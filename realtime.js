"use strict";var Vee=Object.create;var qf=Object.defineProperty;var Wee=Object.getOwnPropertyDescriptor;var zee=Object.getOwnPropertyNames;var Kee=Object.getPrototypeOf,Hee=Object.prototype.hasOwnProperty;var cn=(t,e)=>()=>(t&&(e=t(t=0)),e);var m=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Gee=(t,e)=>{for(var r in e)qf(t,r,{get:e[r],enumerable:!0})},zT=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of zee(e))!Hee.call(t,s)&&s!==r&&qf(t,s,{get:()=>e[s],enumerable:!(n=Wee(e,s))||n.enumerable});return t};var Mi=(t,e,r)=>(r=t!=null?Vee(Kee(t)):{},zT(e||!t||!t.__esModule?qf(r,"default",{value:t,enumerable:!0}):r,t)),Jee=t=>zT(qf({},"__esModule",{value:!0}),t);var JT=m((IDe,qb)=>{"use strict";qb.exports=GT;qb.exports.preferredCharsets=GT;var Yee=/^\s*([^\s;]+)\s*(?:;(.*))?$/;function Qee(t){for(var e=t.split(","),r=0,n=0;r<e.length;r++){var s=Xee(e[r].trim(),r);s&&(e[n++]=s)}return e.length=n,e}function Xee(t,e){var r=Yee.exec(t);if(!r)return null;var n=r[1],s=1;if(r[2])for(var i=r[2].split(";"),o=0;o<i.length;o++){var a=i[o].trim().split("=");if(a[0]==="q"){s=parseFloat(a[1]);break}}return{charset:n,q:s,i:e}}function Zee(t,e,r){for(var n={o:-1,q:0,s:0},s=0;s<e.length;s++){var i=ete(t,e[s],r);i&&(n.s-i.s||n.q-i.q||n.o-i.o)<0&&(n=i)}return n}function ete(t,e,r){var n=0;if(e.charset.toLowerCase()===t.toLowerCase())n|=1;else if(e.charset!=="*")return null;return{i:r,o:e.i,q:e.q,s:n}}function GT(t,e){var r=Qee(t===void 0?"*":t||"");if(!e)return r.filter(HT).sort(KT).map(tte);var n=e.map(function(i,o){return Zee(i,r,o)});return n.filter(HT).sort(KT).map(function(i){return e[n.indexOf(i)]})}function KT(t,e){return e.q-t.q||e.s-t.s||t.o-e.o||t.i-e.i||0}function tte(t){return t.charset}function HT(t){return t.q>0}});var eD=m((NDe,jb)=>{"use strict";jb.exports=ZT;jb.exports.preferredEncodings=ZT;var rte=/^\s*([^\s;]+)\s*(?:;(.*))?$/;function nte(t){for(var e=t.split(","),r=!1,n=1,s=0,i=0;s<e.length;s++){var o=ste(e[s].trim(),s);o&&(e[i++]=o,r=r||XT("identity",o),n=Math.min(n,o.q||1))}return r||(e[i++]={encoding:"identity",q:n,i:s}),e.length=i,e}function ste(t,e){var r=rte.exec(t);if(!r)return null;var n=r[1],s=1;if(r[2])for(var i=r[2].split(";"),o=0;o<i.length;o++){var a=i[o].trim().split("=");if(a[0]==="q"){s=parseFloat(a[1]);break}}return{encoding:n,q:s,i:e}}function ite(t,e,r){for(var n={o:-1,q:0,s:0},s=0;s<e.length;s++){var i=XT(t,e[s],r);i&&(n.s-i.s||n.q-i.q||n.o-i.o)<0&&(n=i)}return n}function XT(t,e,r){var n=0;if(e.encoding.toLowerCase()===t.toLowerCase())n|=1;else if(e.encoding!=="*")return null;return{i:r,o:e.i,q:e.q,s:n}}function ZT(t,e){var r=nte(t||"");if(!e)return r.filter(QT).sort(YT).map(ote);var n=e.map(function(i,o){return ite(i,r,o)});return n.filter(QT).sort(YT).map(function(i){return e[n.indexOf(i)]})}function YT(t,e){return e.q-t.q||e.s-t.s||t.o-e.o||t.i-e.i||0}function ote(t){return t.encoding}function QT(t){return t.q>0}});var iD=m((kDe,Lb)=>{"use strict";Lb.exports=sD;Lb.exports.preferredLanguages=sD;var ate=/^\s*([^\s\-;]+)(?:-([^\s;]+))?\s*(?:;(.*))?$/;function ute(t){for(var e=t.split(","),r=0,n=0;r<e.length;r++){var s=nD(e[r].trim(),r);s&&(e[n++]=s)}return e.length=n,e}function nD(t,e){var r=ate.exec(t);if(!r)return null;var n=r[1],s=r[2],i=n;s&&(i+="-"+s);var o=1;if(r[3])for(var a=r[3].split(";"),u=0;u<a.length;u++){var c=a[u].split("=");c[0]==="q"&&(o=parseFloat(c[1]))}return{prefix:n,suffix:s,q:o,i:e,full:i}}function cte(t,e,r){for(var n={o:-1,q:0,s:0},s=0;s<e.length;s++){var i=lte(t,e[s],r);i&&(n.s-i.s||n.q-i.q||n.o-i.o)<0&&(n=i)}return n}function lte(t,e,r){var n=nD(t);if(!n)return null;var s=0;if(e.full.toLowerCase()===n.full.toLowerCase())s|=4;else if(e.prefix.toLowerCase()===n.full.toLowerCase())s|=2;else if(e.full.toLowerCase()===n.prefix.toLowerCase())s|=1;else if(e.full!=="*")return null;return{i:r,o:e.i,q:e.q,s}}function sD(t,e){var r=ute(t===void 0?"*":t||"");if(!e)return r.filter(rD).sort(tD).map(pte);var n=e.map(function(i,o){return cte(i,r,o)});return n.filter(rD).sort(tD).map(function(i){return e[n.indexOf(i)]})}function tD(t,e){return e.q-t.q||e.s-t.s||t.o-e.o||t.i-e.i||0}function pte(t){return t.full}function rD(t){return t.q>0}});var pD=m((RDe,Ub)=>{"use strict";Ub.exports=cD;Ub.exports.preferredMediaTypes=cD;var dte=/^\s*([^\s\/;]+)\/([^;\s]+)\s*(?:;(.*))?$/;function hte(t){for(var e=_te(t),r=0,n=0;r<e.length;r++){var s=uD(e[r].trim(),r);s&&(e[n++]=s)}return e.length=n,e}function uD(t,e){var r=dte.exec(t);if(!r)return null;var n=Object.create(null),s=1,i=r[2],o=r[1];if(r[3])for(var a=Ete(r[3]).map(gte),u=0;u<a.length;u++){var c=a[u],l=c[0].toLowerCase(),p=c[1],d=p&&p[0]==='"'&&p[p.length-1]==='"'?p.substr(1,p.length-2):p;if(l==="q"){s=parseFloat(d);break}n[l]=d}return{type:o,subtype:i,params:n,q:s,i:e}}function fte(t,e,r){for(var n={o:-1,q:0,s:0},s=0;s<e.length;s++){var i=mte(t,e[s],r);i&&(n.s-i.s||n.q-i.q||n.o-i.o)<0&&(n=i)}return n}function mte(t,e,r){var n=uD(t),s=0;if(!n)return null;if(e.type.toLowerCase()==n.type.toLowerCase())s|=4;else if(e.type!="*")return null;if(e.subtype.toLowerCase()==n.subtype.toLowerCase())s|=2;else if(e.subtype!="*")return null;var i=Object.keys(e.params);if(i.length>0)if(i.every(function(o){return e.params[o]=="*"||(e.params[o]||"").toLowerCase()==(n.params[o]||"").toLowerCase()}))s|=1;else return null;return{i:r,o:e.i,q:e.q,s}}function cD(t,e){var r=hte(t===void 0?"*/*":t||"");if(!e)return r.filter(aD).sort(oD).map(yte);var n=e.map(function(i,o){return fte(i,r,o)});return n.filter(aD).sort(oD).map(function(i){return e[n.indexOf(i)]})}function oD(t,e){return e.q-t.q||e.s-t.s||t.o-e.o||t.i-e.i||0}function yte(t){return t.type+"/"+t.subtype}function aD(t){return t.q>0}function lD(t){for(var e=0,r=0;(r=t.indexOf('"',r))!==-1;)e++,r++;return e}function gte(t){var e=t.indexOf("="),r,n;return e===-1?r=t:(r=t.substr(0,e),n=t.substr(e+1)),[r,n]}function _te(t){for(var e=t.split(","),r=1,n=0;r<e.length;r++)lD(e[n])%2==0?e[++n]=e[r]:e[n]+=","+e[r];return e.length=n+1,e}function Ete(t){for(var e=t.split(";"),r=1,n=0;r<e.length;r++)lD(e[n])%2==0?e[++n]=e[r]:e[n]+=";"+e[r];e.length=n+1;for(var r=0;r<e.length;r++)e[r]=e[r].trim();return e}});var dD=m((FDe,Vb)=>{"use strict";var bte=JT(),wte=eD(),Ste=iD(),Ate=pD();Vb.exports=Ye;Vb.exports.Negotiator=Ye;function Ye(t){if(!(this instanceof Ye))return new Ye(t);this.request=t}Ye.prototype.charset=function(e){var r=this.charsets(e);return r&&r[0]};Ye.prototype.charsets=function(e){return bte(this.request.headers["accept-charset"],e)};Ye.prototype.encoding=function(e){var r=this.encodings(e);return r&&r[0]};Ye.prototype.encodings=function(e){return wte(this.request.headers["accept-encoding"],e)};Ye.prototype.language=function(e){var r=this.languages(e);return r&&r[0]};Ye.prototype.languages=function(e){return Ste(this.request.headers["accept-language"],e)};Ye.prototype.mediaType=function(e){var r=this.mediaTypes(e);return r&&r[0]};Ye.prototype.mediaTypes=function(e){return Ate(this.request.headers.accept,e)};Ye.prototype.preferredCharset=Ye.prototype.charset;Ye.prototype.preferredCharsets=Ye.prototype.charsets;Ye.prototype.preferredEncoding=Ye.prototype.encoding;Ye.prototype.preferredEncodings=Ye.prototype.encodings;Ye.prototype.preferredLanguage=Ye.prototype.language;Ye.prototype.preferredLanguages=Ye.prototype.languages;Ye.prototype.preferredMediaType=Ye.prototype.mediaType;Ye.prototype.preferredMediaTypes=Ye.prototype.mediaTypes});var hD=m(($De,Ote)=>{Ote.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}});var mD=m((qDe,fD)=>{fD.exports=hD()});var _D=m(On=>{"use strict";var jf=mD(),Cte=require("path").extname,yD=/^\s*([^;\s]*)(?:;|\s|$)/,vte=/^text\//i;On.charset=gD;On.charsets={lookup:gD};On.contentType=xte;On.extension=Tte;On.extensions=Object.create(null);On.lookup=Dte;On.types=Object.create(null);Mte(On.extensions,On.types);function gD(t){if(!t||typeof t!="string")return!1;var e=yD.exec(t),r=e&&jf[e[1].toLowerCase()];return r&&r.charset?r.charset:e&&vte.test(e[1])?"UTF-8":!1}function xte(t){if(!t||typeof t!="string")return!1;var e=t.indexOf("/")===-1?On.lookup(t):t;if(!e)return!1;if(e.indexOf("charset")===-1){var r=On.charset(e);r&&(e+="; charset="+r.toLowerCase())}return e}function Tte(t){if(!t||typeof t!="string")return!1;var e=yD.exec(t),r=e&&On.extensions[e[1].toLowerCase()];return!r||!r.length?!1:r[0]}function Dte(t){if(!t||typeof t!="string")return!1;var e=Cte("x."+t).toLowerCase().substr(1);return e&&On.types[e]||!1}function Mte(t,e){var r=["nginx","apache",void 0,"iana"];Object.keys(jf).forEach(function(s){var i=jf[s],o=i.extensions;if(!(!o||!o.length)){t[s]=o;for(var a=0;a<o.length;a++){var u=o[a];if(e[u]){var c=r.indexOf(jf[e[u]].source),l=r.indexOf(i.source);if(e[u]!=="application/octet-stream"&&(c>l||c===l&&e[u].substr(0,12)==="application/"))continue}e[u]=s}}})}});var Lf=m((LDe,ED)=>{"use strict";var Pte=dD(),Bte=_D();ED.exports=Gn;function Gn(t){if(!(this instanceof Gn))return new Gn(t);this.headers=t.headers,this.negotiator=new Pte(t)}Gn.prototype.type=Gn.prototype.types=function(t){var e=t;if(e&&!Array.isArray(e)){e=new Array(arguments.length);for(var r=0;r<e.length;r++)e[r]=arguments[r]}if(!e||e.length===0)return this.negotiator.mediaTypes();if(!this.headers.accept)return e[0];var n=e.map(Ite),s=this.negotiator.mediaTypes(n.filter(Nte)),i=s[0];return i?e[n.indexOf(i)]:!1};Gn.prototype.encoding=Gn.prototype.encodings=function(t){var e=t;if(e&&!Array.isArray(e)){e=new Array(arguments.length);for(var r=0;r<e.length;r++)e[r]=arguments[r]}return!e||e.length===0?this.negotiator.encodings():this.negotiator.encodings(e)[0]||!1};Gn.prototype.charset=Gn.prototype.charsets=function(t){var e=t;if(e&&!Array.isArray(e)){e=new Array(arguments.length);for(var r=0;r<e.length;r++)e[r]=arguments[r]}return!e||e.length===0?this.negotiator.charsets():this.negotiator.charsets(e)[0]||!1};Gn.prototype.lang=Gn.prototype.langs=Gn.prototype.language=Gn.prototype.languages=function(t){var e=t;if(e&&!Array.isArray(e)){e=new Array(arguments.length);for(var r=0;r<e.length;r++)e[r]=arguments[r]}return!e||e.length===0?this.negotiator.languages():this.negotiator.languages(e)[0]||!1};function Ite(t){return t.indexOf("/")===-1?Bte.lookup(t):t}function Nte(t){return typeof t=="string"}});var zb=m((bD,wD)=>{var v1=require("crypto"),Wb=function(){};Wb.prototype.getRandomBytes=function(t){var e=4096,r=this;if(t=t||12,t>e)return v1.randomBytes(t);var n=parseInt(e/t),s=parseInt(n*.85);if(!s||(this.bytesBufferIndex==null&&(this.bytesBufferIndex=-1),this.bytesBufferIndex==n&&(this.bytesBuffer=null,this.bytesBufferIndex=-1),(this.bytesBufferIndex==-1||this.bytesBufferIndex>s)&&(this.isGeneratingBytes||(this.isGeneratingBytes=!0,v1.randomBytes(e,function(o,a){r.bytesBuffer=a,r.bytesBufferIndex=0,r.isGeneratingBytes=!1})),this.bytesBufferIndex==-1)))return v1.randomBytes(t);var i=this.bytesBuffer.slice(t*this.bytesBufferIndex,t*(this.bytesBufferIndex+1));return this.bytesBufferIndex++,i};Wb.prototype.generateId=function(){var t=Buffer.alloc(15);return t.writeInt32BE?(this.sequenceNumber=this.sequenceNumber+1|0,t.writeInt32BE(this.sequenceNumber,11),v1.randomBytes?this.getRandomBytes(12).copy(t):[0,4,8].forEach(function(e){t.writeInt32BE(Math.random()*Math.pow(2,32)|0,e)}),t.toString("base64").replace(/\//g,"_").replace(/\+/g,"-")):Math.abs(Math.random()*Math.random()*Date.now()|0).toString()+Math.abs(Math.random()*Math.random()*Date.now()|0).toString()};bD=wD.exports=new Wb});var Uf=m(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});ta.ERROR_PACKET=ta.PACKET_TYPES_REVERSE=ta.PACKET_TYPES=void 0;var Pi=Object.create(null);ta.PACKET_TYPES=Pi;Pi.open="0";Pi.close="1";Pi.ping="2";Pi.pong="3";Pi.message="4";Pi.upgrade="5";Pi.noop="6";var SD=Object.create(null);ta.PACKET_TYPES_REVERSE=SD;Object.keys(Pi).forEach(t=>{SD[Pi[t]]=t});var kte={type:"error",data:"parser error"};ta.ERROR_PACKET=kte});var OD=m(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});jc.encodePacket=void 0;jc.encodePacketToBinary=$te;var Rte=Uf(),Fte=({type:t,data:e},r,n)=>e instanceof ArrayBuffer||ArrayBuffer.isView(e)?n(r?e:"b"+AD(e,!0).toString("base64")):n(Rte.PACKET_TYPES[t]+(e||""));jc.encodePacket=Fte;var AD=(t,e)=>Buffer.isBuffer(t)||t instanceof Uint8Array&&!e?t:t instanceof ArrayBuffer?Buffer.from(t):Buffer.from(t.buffer,t.byteOffset,t.byteLength),Kb;function $te(t,e){if(t.data instanceof ArrayBuffer||ArrayBuffer.isView(t.data))return e(AD(t.data,!1));(0,jc.encodePacket)(t,!0,r=>{Kb||(Kb=new TextEncoder),e(Kb.encode(r))})}});var vD=m(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});Wf.decodePacket=void 0;var Vf=Uf(),qte=(t,e)=>{if(typeof t!="string")return{type:"message",data:CD(t,e)};let r=t.charAt(0);if(r==="b"){let n=Buffer.from(t.substring(1),"base64");return{type:"message",data:CD(n,e)}}return Vf.PACKET_TYPES_REVERSE[r]?t.length>1?{type:Vf.PACKET_TYPES_REVERSE[r],data:t.substring(1)}:{type:Vf.PACKET_TYPES_REVERSE[r]}:Vf.ERROR_PACKET};Wf.decodePacket=qte;var CD=(t,e)=>e==="arraybuffer"?t instanceof ArrayBuffer?t:Buffer.isBuffer(t)?t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength):t.buffer:Buffer.isBuffer(t)?t:Buffer.from(t)});var x1=m(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.decodePayload=Cn.decodePacket=Cn.encodePayload=Cn.encodePacket=Cn.protocol=void 0;Cn.createPacketEncoderStream=Ute;Cn.createPacketDecoderStream=Vte;var Gb=OD();Object.defineProperty(Cn,"encodePacket",{enumerable:!0,get:function(){return Gb.encodePacket}});var Jb=vD();Object.defineProperty(Cn,"decodePacket",{enumerable:!0,get:function(){return Jb.decodePacket}});var xD=Uf(),TD="",jte=(t,e)=>{let r=t.length,n=new Array(r),s=0;t.forEach((i,o)=>{(0,Gb.encodePacket)(i,!1,a=>{n[o]=a,++s===r&&e(n.join(TD))})})};Cn.encodePayload=jte;var Lte=(t,e)=>{let r=t.split(TD),n=[];for(let s=0;s<r.length;s++){let i=(0,Jb.decodePacket)(r[s],e);if(n.push(i),i.type==="error")break}return n};Cn.decodePayload=Lte;function Ute(){return new TransformStream({transform(t,e){(0,Gb.encodePacketToBinary)(t,r=>{let n=r.length,s;if(n<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,n);else if(n<65536){s=new Uint8Array(3);let i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{s=new Uint8Array(9);let i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(r)})}})}var Hb;function zf(t){return t.reduce((e,r)=>e+r.length,0)}function Kf(t,e){if(t[0].length===e)return t.shift();let r=new Uint8Array(e),n=0;for(let s=0;s<e;s++)r[s]=t[0][n++],n===t[0].length&&(t.shift(),n=0);return t.length&&n<t[0].length&&(t[0]=t[0].slice(n)),r}function Vte(t,e){Hb||(Hb=new TextDecoder);let r=[],n=0,s=-1,i=!1;return new TransformStream({transform(o,a){for(r.push(o);;){if(n===0){if(zf(r)<1)break;let u=Kf(r,1);i=(u[0]&128)===128,s=u[0]&127,s<126?n=3:s===126?n=1:n=2}else if(n===1){if(zf(r)<2)break;let u=Kf(r,2);s=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),n=3}else if(n===2){if(zf(r)<8)break;let u=Kf(r,8),c=new DataView(u.buffer,u.byteOffset,u.length),l=c.getUint32(0);if(l>Math.pow(2,21)-1){a.enqueue(xD.ERROR_PACKET);break}s=l*Math.pow(2,32)+c.getUint32(4),n=3}else{if(zf(r)<s)break;let u=Kf(r,s);a.enqueue((0,Jb.decodePacket)(i?u:Hb.decode(u),e)),n=0}if(s===0||s>t){a.enqueue(xD.ERROR_PACKET);break}}}})}Cn.protocol=4});var BD=m((KDe,PD)=>{var ra=String.fromCharCode;function DD(t){for(var e=[],r=0,n=t.length,s,i;r<n;)s=t.charCodeAt(r++),s>=55296&&s<=56319&&r<n?(i=t.charCodeAt(r++),(i&64512)==56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),r--)):e.push(s);return e}function Wte(t){for(var e=t.length,r=-1,n,s="";++r<e;)n=t[r],n>65535&&(n-=65536,s+=ra(n>>>10&1023|55296),n=56320|n&1023),s+=ra(n);return s}function MD(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function Yb(t,e){return ra(t>>e&63|128)}function zte(t,e){if((t&4294967168)==0)return ra(t);var r="";return(t&4294965248)==0?r=ra(t>>6&31|192):(t&4294901760)==0?(MD(t,e)||(t=65533),r=ra(t>>12&15|224),r+=Yb(t,6)):(t&4292870144)==0&&(r=ra(t>>18&7|240),r+=Yb(t,12),r+=Yb(t,6)),r+=ra(t&63|128),r}function Kte(t,e){e=e||{};for(var r=e.strict!==!1,n=DD(t),s=n.length,i=-1,o,a="";++i<s;)o=n[i],a+=zte(o,r);return a}function Lc(){if(na>=Gf)throw Error("Invalid byte index");var t=Hf[na]&255;if(na++,(t&192)==128)return t&63;throw Error("Invalid continuation byte")}function Hte(t){var e,r,n,s,i;if(na>Gf)throw Error("Invalid byte index");if(na==Gf)return!1;if(e=Hf[na]&255,na++,(e&128)==0)return e;if((e&224)==192){if(r=Lc(),i=(e&31)<<6|r,i>=128)return i;throw Error("Invalid continuation byte")}if((e&240)==224){if(r=Lc(),n=Lc(),i=(e&15)<<12|r<<6|n,i>=2048)return MD(i,t)?i:65533;throw Error("Invalid continuation byte")}if((e&248)==240&&(r=Lc(),n=Lc(),s=Lc(),i=(e&7)<<18|r<<12|n<<6|s,i>=65536&&i<=1114111))return i;throw Error("Invalid UTF-8 detected")}var Hf,Gf,na;function Gte(t,e){e=e||{};var r=e.strict!==!1;Hf=DD(t),Gf=Hf.length,na=0;for(var n=[],s;(s=Hte(r))!==!1;)n.push(s);return Wte(n)}PD.exports={version:"2.1.2",encode:Kte,decode:Gte}});var jD=m(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.packets=dr.protocol=void 0;dr.encodePacket=Qb;dr.encodeBase64Packet=kD;dr.decodePacket=Xb;dr.decodeBase64Packet=RD;dr.encodePayload=Xte;dr.decodePayload=ere;dr.encodePayloadAsBinary=$D;dr.decodePayloadAsBinary=qD;var ND=BD();dr.protocol=3;var Jte=t=>{for(let e of t)if(e.data instanceof ArrayBuffer||ArrayBuffer.isView(e.data))return!0;return!1};dr.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6};var Uc=Object.keys(dr.packets),Ks={type:"error",data:"parser error"},Yte=Buffer.concat([]);function Qb(t,e,r,n){if(typeof e=="function"&&(n=e,e=null),typeof r=="function"&&(n=r,r=null),Buffer.isBuffer(t.data))return ID(t,e,n);if(t.data&&(t.data.buffer||t.data)instanceof ArrayBuffer)return ID({type:t.type,data:Zb(t.data)},e,n);var s=dr.packets[t.type];return t.data!==void 0&&(s+=r?ND.encode(String(t.data),{strict:!1}):String(t.data)),n(""+s)}function ID(t,e,r){if(!e)return kD(t,r);var n=t.data,s=Buffer.allocUnsafe(1);return s[0]=dr.packets[t.type],r(Buffer.concat([s,n]))}function kD(t,e){var r=Buffer.isBuffer(t.data)?t.data:Zb(t.data),n="b"+dr.packets[t.type];return n+=r.toString("base64"),e(n)}function Xb(t,e,r){if(t===void 0)return Ks;let n;if(typeof t=="string")return n=t.charAt(0),n==="b"?RD(t.slice(1),e):r&&(t=Qte(t),t===!1)||Number(n)!=n||!Uc[n]?Ks:t.length>1?{type:Uc[n],data:t.slice(1)}:{type:Uc[n]};if(e==="arraybuffer"){var s=new Uint8Array(t);return n=s[0],{type:Uc[n],data:s.buffer.slice(1)}}return t instanceof ArrayBuffer&&(t=Zb(t)),n=t[0],{type:Uc[n],data:t.slice(1)}}function Qte(t){try{t=ND.decode(t,{strict:!1})}catch{return!1}return t}function RD(t,e){var r=Uc[t.charAt(0)],n=Buffer.from(t.slice(1),"base64");if(e==="arraybuffer"){for(var s=new Uint8Array(n.length),i=0;i<s.length;i++)s[i]=n[i];n=s.buffer}return{type:r,data:n}}function Xte(t,e,r){if(typeof e=="function"&&(r=e,e=null),e&&Jte(t))return $D(t,r);if(!t.length)return r("0:");function n(s,i){Qb(s,e,!1,function(o){i(null,Zte(o))})}FD(t,n,function(s,i){return r(i.join(""))})}function Zte(t){return t.length+":"+t}function FD(t,e,r){let n=new Array(t.length),s=0;for(let i=0;i<t.length;i++)e(t[i],(o,a)=>{n[i]=a,++s===t.length&&r(null,n)})}function ere(t,e,r){if(typeof t!="string")return qD(t,e,r);if(typeof e=="function"&&(r=e,e=null),t==="")return r(Ks,0,1);for(var n="",s,i,o,a=0,u=t.length;a<u;a++){var c=t.charAt(a);if(c!==":"){n+=c;continue}if(n===""||n!=(s=Number(n))||(i=t.slice(a+1,a+1+s),n!=i.length))return r(Ks,0,1);if(i.length){if(o=Xb(i,e,!1),Ks.type===o.type&&Ks.data===o.data)return r(Ks,0,1);var l=r(o,a+s,u);if(l===!1)return}a+=s,n=""}if(n!=="")return r(Ks,0,1)}function tre(t){for(var e="",r=0,n=t.length;r<n;r++)e+=String.fromCharCode(t[r]);return e}function rre(t){for(var e=Buffer.allocUnsafe(t.length),r=0,n=t.length;r<n;r++)e.writeUInt8(t.charCodeAt(r),r);return e}function Zb(t){var e=t.byteLength||t.length,r=t.byteOffset||0;return Buffer.from(t.buffer||t,r,e)}function $D(t,e){if(!t.length)return e(Yte);FD(t,nre,function(r,n){return e(Buffer.concat(n))})}function nre(t,e){function r(n){var s=""+n.length,i;if(typeof n=="string"){i=Buffer.allocUnsafe(s.length+2),i[0]=0;for(var o=0;o<s.length;o++)i[o+1]=parseInt(s[o],10);return i[i.length-1]=255,e(null,Buffer.concat([i,rre(n)]))}i=Buffer.allocUnsafe(s.length+2),i[0]=1;for(var o=0;o<s.length;o++)i[o+1]=parseInt(s[o],10);i[i.length-1]=255,e(null,Buffer.concat([i,n]))}Qb(t,!0,!0,r)}function qD(t,e,r){typeof e=="function"&&(r=e,e=null);for(var n=t,s=[],i;n.length>0;){var o="",a=n[0]===0;for(i=1;n[i]!==255;i++){if(o.length>310)return r(Ks,0,1);o+=""+n[i]}n=n.slice(o.length+1);var u=parseInt(o,10),c=n.slice(1,u+1);a&&(c=tre(c)),s.push(c),n=n.slice(u+1)}var l=s.length;for(i=0;i<l;i++){var p=s[i];r(Xb(p,e,!0),i,l)}}});var ew=m((GDe,LD)=>{var Vc=1e3,Wc=Vc*60,zc=Wc*60,du=zc*24,sre=du*7,ire=du*365.25;LD.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return ore(t);if(r==="number"&&isFinite(t))return e.long?ure(t):are(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function ore(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*ire;case"weeks":case"week":case"w":return r*sre;case"days":case"day":case"d":return r*du;case"hours":case"hour":case"hrs":case"hr":case"h":return r*zc;case"minutes":case"minute":case"mins":case"min":case"m":return r*Wc;case"seconds":case"second":case"secs":case"sec":case"s":return r*Vc;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function are(t){var e=Math.abs(t);return e>=du?Math.round(t/du)+"d":e>=zc?Math.round(t/zc)+"h":e>=Wc?Math.round(t/Wc)+"m":e>=Vc?Math.round(t/Vc)+"s":t+"ms"}function ure(t){var e=Math.abs(t);return e>=du?Jf(t,e,du,"day"):e>=zc?Jf(t,e,zc,"hour"):e>=Wc?Jf(t,e,Wc,"minute"):e>=Vc?Jf(t,e,Vc,"second"):t+" ms"}function Jf(t,e,r,n){var s=e>=r*1.5;return Math.round(t/r)+" "+n+(s?"s":"")}});var tw=m((JDe,UD)=>{function cre(t){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=s,r.enabled=a,r.humanize=ew(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let p=0;for(let d=0;d<l.length;d++)p=(p<<5)-p+l.charCodeAt(d),p|=0;return r.colors[Math.abs(p)%r.colors.length]}r.selectColor=e;function r(l){let p,d=null,h,f;function y(...g){if(!y.enabled)return;let _=y,w=Number(new Date),O=w-(p||w);_.diff=O,_.prev=p,_.curr=w,p=w,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let E=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(x,v)=>{if(x==="%%")return"%";E++;let R=r.formatters[v];if(typeof R=="function"){let M=g[E];x=R.call(_,M),g.splice(E,1),E--}return x}),r.formatArgs.call(_,g),(_.log||r.log).apply(_,g)}return y.namespace=l,y.useColors=r.useColors(),y.color=r.selectColor(l),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(h!==r.namespaces&&(h=r.namespaces,f=r.enabled(l)),f),set:g=>{d=g}}),typeof r.init=="function"&&r.init(y),y}function n(l,p){let d=r(this.namespace+(typeof p>"u"?":":p)+l);return d.log=this.log,d}function s(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let p=(typeof l=="string"?l:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let d of p)d[0]==="-"?r.skips.push(d.slice(1)):r.names.push(d)}function i(l,p){let d=0,h=0,f=-1,y=0;for(;d<l.length;)if(h<p.length&&(p[h]===l[d]||p[h]==="*"))p[h]==="*"?(f=h,y=d,h++):(d++,h++);else if(f!==-1)h=f+1,y++,d=y;else return!1;for(;h<p.length&&p[h]==="*";)h++;return h===p.length}function o(){let l=[...r.names,...r.skips.map(p=>"-"+p)].join(",");return r.enable(""),l}function a(l){for(let p of r.skips)if(i(l,p))return!1;for(let p of r.names)if(i(l,p))return!0;return!1}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}UD.exports=cre});var VD=m((vn,Yf)=>{vn.formatArgs=pre;vn.save=dre;vn.load=hre;vn.useColors=lre;vn.storage=fre();vn.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();vn.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function lre(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function pre(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Yf.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(r++,s==="%c"&&(n=r))}),t.splice(n,0,e)}vn.log=console.debug||console.log||(()=>{});function dre(t){try{t?vn.storage.setItem("debug",t):vn.storage.removeItem("debug")}catch{}}function hre(){let t;try{t=vn.storage.getItem("debug")||vn.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function fre(){try{return localStorage}catch{}}Yf.exports=tw()(vn);var{formatters:mre}=Yf.exports;mre.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var zD=m((hr,Xf)=>{var yre=require("tty"),Qf=require("util");hr.init=Are;hr.log=bre;hr.formatArgs=_re;hr.save=wre;hr.load=Sre;hr.useColors=gre;hr.destroy=Qf.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");hr.colors=[6,2,3,4,5,1];try{let t=require("supports-color");t&&(t.stderr||t).level>=2&&(hr.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}hr.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(s,i)=>i.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function gre(){return"colors"in hr.inspectOpts?!!hr.inspectOpts.colors:yre.isatty(process.stderr.fd)}function _re(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,s="\x1B[3"+(n<8?n:"8;5;"+n),i=`  ${s};1m${e} \x1B[0m`;t[0]=i+t[0].split(`
`).join(`
`+i),t.push(s+"m+"+Xf.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=Ere()+e+" "+t[0]}function Ere(){return hr.inspectOpts.hideDate?"":new Date().toISOString()+" "}function bre(...t){return process.stderr.write(Qf.formatWithOptions(hr.inspectOpts,...t)+`
`)}function wre(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function Sre(){return process.env.DEBUG}function Are(t){t.inspectOpts={};let e=Object.keys(hr.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=hr.inspectOpts[e[r]]}Xf.exports=tw()(hr);var{formatters:WD}=Xf.exports;WD.o=function(t){return this.inspectOpts.colors=this.useColors,Qf.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};WD.O=function(t){return this.inspectOpts.colors=this.useColors,Qf.inspect(t,this.inspectOpts)}});var fr=m((YDe,rw)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?rw.exports=VD():rw.exports=zD()});var hu=m(em=>{"use strict";Object.defineProperty(em,"__esModule",{value:!0});em.Transport=void 0;var Ore=require("events"),Cre=x1(),vre=jD(),xre=fr(),KD=(0,xre.default)("engine:transport");function Tre(){}var Zf=class extends Ore.EventEmitter{get readyState(){return this._readyState}set readyState(e){KD("readyState updated from %s to %s (%s)",this._readyState,e,this.name),this._readyState=e}constructor(e){super(),this.writable=!1,this._readyState="open",this.discarded=!1,this.protocol=e._query.EIO==="4"?4:3,this.parser=this.protocol===4?Cre:vre,this.supportsBinary=!(e._query&&e._query.b64)}discard(){this.discarded=!0}onRequest(e){}close(e){this.readyState==="closed"||this.readyState==="closing"||(this.readyState="closing",this.doClose(e||Tre))}onError(e,r){if(this.listeners("error").length){let n=new Error(e);n.type="TransportError",n.description=r,this.emit("error",n)}else KD("ignored transport error %s (%s)",e,r)}onPacket(e){this.emit("packet",e)}onData(e){this.onPacket(this.parser.decodePacket(e))}onClose(){this.readyState="closed",this.emit("close")}};em.Transport=Zf;Zf.upgradesTo=[]});var sw=m(tm=>{"use strict";Object.defineProperty(tm,"__esModule",{value:!0});tm.Polling=void 0;var Dre=hu(),HD=require("zlib"),Mre=Lf(),Pre=fr(),Jn=(0,Pre.default)("engine:polling"),Bre={gzip:HD.createGzip,deflate:HD.createDeflate},nw=class extends Dre.Transport{constructor(e){super(e),this.closeTimeout=30*1e3}get name(){return"polling"}onRequest(e){let r=e.res;e.res=null,e.method==="GET"?this.onPollRequest(e,r):e.method==="POST"?this.onDataRequest(e,r):(r.writeHead(500),r.end())}onPollRequest(e,r){if(this.req){Jn("request overlap"),this.onError("overlap from client"),r.writeHead(400),r.end();return}Jn("setting request"),this.req=e,this.res=r;let n=()=>{this.onError("poll connection closed prematurely")},s=()=>{e.removeListener("close",n),this.req=this.res=null};e.cleanup=s,e.on("close",n),this.writable=!0,this.emit("ready"),this.writable&&this.shouldClose&&(Jn("triggering empty send to append close packet"),this.send([{type:"noop"}]))}onDataRequest(e,r){if(this.dataReq){this.onError("data request overlap from client"),r.writeHead(400),r.end();return}let n=e.headers["content-type"]==="application/octet-stream";if(n&&this.protocol===4)return this.onError("invalid content");this.dataReq=e,this.dataRes=r;let s=n?Buffer.concat([]):"",i=()=>{e.removeListener("data",a),e.removeListener("end",u),e.removeListener("close",o),this.dataReq=this.dataRes=s=null},o=()=>{i(),this.onError("data request connection closed prematurely")},a=c=>{let l;n?(s=Buffer.concat([s,c]),l=s.length):(s+=c,l=Buffer.byteLength(s)),l>this.maxHttpBufferSize&&(r.writeHead(413).end(),i())},u=()=>{this.onData(s);let c={"Content-Type":"text/html","Content-Length":"2"};r.writeHead(200,this.headers(e,c)),r.end("ok"),i()};e.on("close",o),n||e.setEncoding("utf8"),e.on("data",a),e.on("end",u)}onData(e){Jn('received "%s"',e);let r=n=>{if(n.type==="close")return Jn("got xhr close packet"),this.onClose(),!1;this.onPacket(n)};this.protocol===3?this.parser.decodePayload(e,r):this.parser.decodePayload(e).forEach(r)}onClose(){this.writable&&this.send([{type:"noop"}]),super.onClose()}send(e){this.writable=!1,this.shouldClose&&(Jn("appending close packet to payload"),e.push({type:"close"}),this.shouldClose(),this.shouldClose=null);let r=n=>{let s=e.some(i=>i.options&&i.options.compress);this.write(n,{compress:s})};this.protocol===3?this.parser.encodePayload(e,this.supportsBinary,r):this.parser.encodePayload(e,r)}write(e,r){Jn('writing "%s"',e),this.doWrite(e,r,()=>{this.req.cleanup(),this.emit("drain")})}doWrite(e,r,n){let s=typeof e=="string",o={"Content-Type":s?"text/plain; charset=UTF-8":"application/octet-stream"},a=l=>{o["Content-Length"]=typeof l=="string"?Buffer.byteLength(l):l.length,this.res.writeHead(200,this.headers(this.req,o)),this.res.end(l),n()};if(!this.httpCompression||!r.compress){a(e);return}if((s?Buffer.byteLength(e):e.length)<this.httpCompression.threshold){a(e);return}let c=Mre(this.req).encodings(["gzip","deflate"]);if(!c){a(e);return}this.compress(e,c,(l,p)=>{if(l){this.res.writeHead(500),this.res.end(),n(l);return}o["Content-Encoding"]=c,a(p)})}compress(e,r,n){Jn("compressing");let s=[],i=0;Bre[r](this.httpCompression).on("error",n).on("data",function(o){s.push(o),i+=o.length}).on("end",function(){n(null,Buffer.concat(s,i))}).end(e)}doClose(e){Jn("closing");let r;this.dataReq&&(Jn("aborting ongoing data request"),this.dataReq.destroy());let n=()=>{clearTimeout(r),e(),this.onClose()};this.writable?(Jn("transport writable - closing right away"),this.send([{type:"close"}]),n()):this.discarded?(Jn("transport discarded - closing right away"),n()):(Jn("transport not writable - buffering orderly close"),this.shouldClose=n,r=setTimeout(n,this.closeTimeout))}headers(e,r={}){let n=e.headers["user-agent"];return n&&(~n.indexOf(";MSIE")||~n.indexOf("Trident/"))&&(r["X-XSS-Protection"]="0"),r["cache-control"]="no-store",this.emit("headers",r,e),r}};tm.Polling=nw});var GD=m(rm=>{"use strict";Object.defineProperty(rm,"__esModule",{value:!0});rm.JSONP=void 0;var Ire=sw(),Nre=require("querystring"),kre=/\\\\n/g,Rre=/(\\)?\\n/g,iw=class extends Ire.Polling{constructor(e){super(e),this.head="___eio["+(e._query.j||"").replace(/[^0-9]/g,"")+"](",this.foot=");"}onData(e){e=Nre.parse(e).d,typeof e=="string"&&(e=e.replace(Rre,function(r,n){return n?r:`
`}),super.onData(e.replace(kre,"\\n")))}doWrite(e,r,n){let s=JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029");e=this.head+s+this.foot,super.doWrite(e,r,n)}};rm.JSONP=iw});var YD=m(nm=>{"use strict";Object.defineProperty(nm,"__esModule",{value:!0});nm.WebSocket=void 0;var Fre=hu(),$re=fr(),JD=(0,$re.default)("engine:ws"),ow=class extends Fre.Transport{constructor(e){super(e),this._doSend=r=>{this.socket.send(r,this._onSent)},this._doSendLast=r=>{this.socket.send(r,this._onSentLast)},this._onSent=r=>{r&&this.onError("write error",r.stack)},this._onSentLast=r=>{r?this.onError("write error",r.stack):(this.emit("drain"),this.writable=!0,this.emit("ready"))},this.socket=e.websocket,this.socket.on("message",(r,n)=>{let s=n?r:r.toString();JD('received "%s"',s),super.onData(s)}),this.socket.once("close",this.onClose.bind(this)),this.socket.on("error",this.onError.bind(this)),this.writable=!0,this.perMessageDeflate=null}get name(){return"websocket"}get handlesUpgrades(){return!0}send(e){this.writable=!1;for(let r=0;r<e.length;r++){let n=e[r],s=r+1===e.length;this._canSendPreEncodedFrame(n)?this.socket._sender.sendFrame(n.options.wsPreEncodedFrame,s?this._onSentLast:this._onSent):this.parser.encodePacket(n,this.supportsBinary,s?this._doSendLast:this._doSend)}}_canSendPreEncodedFrame(e){var r,n,s;return!this.perMessageDeflate&&typeof((n=(r=this.socket)===null||r===void 0?void 0:r._sender)===null||n===void 0?void 0:n.sendFrame)=="function"&&((s=e.options)===null||s===void 0?void 0:s.wsPreEncodedFrame)!==void 0}doClose(e){JD("closing"),this.socket.close(),e&&e()}};nm.WebSocket=ow});var uw=m(sm=>{"use strict";Object.defineProperty(sm,"__esModule",{value:!0});sm.WebTransport=void 0;var qre=hu(),jre=fr(),Lre=x1(),Kc=(0,jre.default)("engine:webtransport"),aw=class extends qre.Transport{constructor(e,r,n){super({_query:{EIO:"4"}}),this.session=e;let s=(0,Lre.createPacketEncoderStream)();s.readable.pipeTo(r.writable).catch(()=>{Kc("the stream was closed")}),this.writer=s.writable.getWriter(),(async()=>{try{for(;;){let{value:i,done:o}=await n.read();if(o){Kc("session is closed");break}Kc("received chunk: %o",i),this.onPacket(i)}}catch(i){Kc("error while reading: %s",i.message)}})(),e.closed.then(()=>this.onClose()),this.writable=!0}get name(){return"webtransport"}async send(e){this.writable=!1;try{for(let r=0;r<e.length;r++){let n=e[r];await this.writer.write(n)}}catch(r){Kc("error while writing: %s",r.message)}this.emit("drain"),this.writable=!0,this.emit("ready")}doClose(e){Kc("closing WebTransport session"),this.session.close(),e&&e()}};sm.WebTransport=aw});var lw=m(cw=>{"use strict";Object.defineProperty(cw,"__esModule",{value:!0});var Ure=sw(),Vre=GD(),Wre=YD(),zre=uw();cw.default={polling:QD,websocket:Wre.WebSocket,webtransport:zre.WebTransport};function QD(t){return typeof t._query.j=="string"?new Vre.JSONP(t):new Ure.Polling(t)}QD.upgradesTo=["websocket","webtransport"]});var dw=m(im=>{"use strict";Object.defineProperty(im,"__esModule",{value:!0});im.Socket=void 0;var Kre=require("events"),Hre=fr(),io=require("timers"),qt=(0,Hre.default)("engine:socket"),pw=class extends Kre.EventEmitter{get readyState(){return this._readyState}set readyState(e){qt("readyState updated from %s to %s",this._readyState,e),this._readyState=e}constructor(e,r,n,s,i){super(),this._readyState="opening",this.upgrading=!1,this.upgraded=!1,this.writeBuffer=[],this.packetsFn=[],this.sentCallbackFn=[],this.cleanupFn=[],this.id=e,this.server=r,this.request=s,this.protocol=i,s&&(s.websocket&&s.websocket._socket?this.remoteAddress=s.websocket._socket.remoteAddress:this.remoteAddress=s.connection.remoteAddress),this.pingTimeoutTimer=null,this.pingIntervalTimer=null,this.setTransport(n),this.onOpen()}onOpen(){this.readyState="open",this.transport.sid=this.id,this.sendPacket("open",JSON.stringify({sid:this.id,upgrades:this.getAvailableUpgrades(),pingInterval:this.server.opts.pingInterval,pingTimeout:this.server.opts.pingTimeout,maxPayload:this.server.opts.maxHttpBufferSize})),this.server.opts.initialPacket&&this.sendPacket("message",this.server.opts.initialPacket),this.emit("open"),this.protocol===3?this.resetPingTimeout():this.schedulePing()}onPacket(e){if(this.readyState!=="open")return qt("packet received with closed socket");switch(qt(`received packet ${e.type}`),this.emit("packet",e),e.type){case"ping":if(this.transport.protocol!==3){this.onError(new Error("invalid heartbeat direction"));return}qt("got ping"),this.pingTimeoutTimer.refresh(),this.sendPacket("pong"),this.emit("heartbeat");break;case"pong":if(this.transport.protocol===3){this.onError(new Error("invalid heartbeat direction"));return}qt("got pong"),(0,io.clearTimeout)(this.pingTimeoutTimer),this.pingIntervalTimer.refresh(),this.emit("heartbeat");break;case"error":this.onClose("parse error");break;case"message":this.emit("data",e.data),this.emit("message",e.data);break}}onError(e){qt("transport error"),this.onClose("transport error",e)}schedulePing(){this.pingIntervalTimer=(0,io.setTimeout)(()=>{qt("writing ping packet - expecting pong within %sms",this.server.opts.pingTimeout),this.sendPacket("ping"),this.resetPingTimeout()},this.server.opts.pingInterval)}resetPingTimeout(){(0,io.clearTimeout)(this.pingTimeoutTimer),this.pingTimeoutTimer=(0,io.setTimeout)(()=>{this.readyState!=="closed"&&this.onClose("ping timeout")},this.protocol===3?this.server.opts.pingInterval+this.server.opts.pingTimeout:this.server.opts.pingTimeout)}setTransport(e){let r=this.onError.bind(this),n=()=>this.flush(),s=this.onPacket.bind(this),i=this.onDrain.bind(this),o=this.onClose.bind(this,"transport close");this.transport=e,this.transport.once("error",r),this.transport.on("ready",n),this.transport.on("packet",s),this.transport.on("drain",i),this.transport.once("close",o),this.cleanupFn.push(function(){e.removeListener("error",r),e.removeListener("ready",n),e.removeListener("packet",s),e.removeListener("drain",i),e.removeListener("close",o)})}onDrain(){if(this.sentCallbackFn.length>0){qt("executing batch send callback");let e=this.sentCallbackFn.shift();if(e)for(let r=0;r<e.length;r++)e[r](this.transport)}}_maybeUpgrade(e){qt('might upgrade socket transport from "%s" to "%s"',this.transport.name,e.name),this.upgrading=!0;let r=(0,io.setTimeout)(()=>{qt("client did not complete upgrade - closing transport"),o(),e.readyState==="open"&&e.close()},this.server.opts.upgradeTimeout),n,s=l=>{l.type==="ping"&&l.data==="probe"?(qt("got probe ping packet, sending pong"),e.send([{type:"pong",data:"probe"}]),this.emit("upgrading",e),clearInterval(n),n=setInterval(i,100)):l.type==="upgrade"&&this.readyState!=="closed"?(qt("got upgrade packet - upgrading"),o(),this.transport.discard(),this.upgraded=!0,this.clearTransport(),this.setTransport(e),this.emit("upgrade",e),this.flush(),this.readyState==="closing"&&e.close(()=>{this.onClose("forced close")})):(o(),e.close())},i=()=>{this.transport.name==="polling"&&this.transport.writable&&(qt("writing a noop packet to polling for fast upgrade"),this.transport.send([{type:"noop"}]))},o=()=>{this.upgrading=!1,clearInterval(n),(0,io.clearTimeout)(r),e.removeListener("packet",s),e.removeListener("close",u),e.removeListener("error",a),this.removeListener("close",c)},a=l=>{qt("client did not complete upgrade - %s",l),o(),e.close(),e=null},u=()=>{a("transport closed")},c=()=>{a("socket closed")};e.on("packet",s),e.once("close",u),e.once("error",a),this.once("close",c)}clearTransport(){let e,r=this.cleanupFn.length;for(let n=0;n<r;n++)e=this.cleanupFn.shift(),e();this.transport.on("error",function(){qt("error triggered by discarded transport")}),this.transport.close(),(0,io.clearTimeout)(this.pingTimeoutTimer)}onClose(e,r){this.readyState!=="closed"&&(this.readyState="closed",(0,io.clearTimeout)(this.pingIntervalTimer),(0,io.clearTimeout)(this.pingTimeoutTimer),process.nextTick(()=>{this.writeBuffer=[]}),this.packetsFn=[],this.sentCallbackFn=[],this.clearTransport(),this.emit("close",e,r))}send(e,r,n){return this.sendPacket("message",e,r,n),this}write(e,r,n){return this.sendPacket("message",e,r,n),this}sendPacket(e,r,n={},s){if(typeof n=="function"&&(s=n,n={}),this.readyState!=="closing"&&this.readyState!=="closed"){qt('sending packet "%s" (%s)',e,r),n.compress=n.compress!==!1;let i={type:e,options:n};r&&(i.data=r),this.emit("packetCreate",i),this.writeBuffer.push(i),typeof s=="function"&&this.packetsFn.push(s),this.flush()}}flush(){if(this.readyState!=="closed"&&this.transport.writable&&this.writeBuffer.length){qt("flushing buffer to transport"),this.emit("flush",this.writeBuffer),this.server.emit("flush",this,this.writeBuffer);let e=this.writeBuffer;this.writeBuffer=[],this.packetsFn.length?(this.sentCallbackFn.push(this.packetsFn),this.packetsFn=[]):this.sentCallbackFn.push(null),this.transport.send(e),this.emit("drain"),this.server.emit("drain",this)}}getAvailableUpgrades(){let e=[],r=this.server.upgrades(this.transport.name);for(let n=0;n<r.length;++n){let s=r[n];this.server.opts.transports.indexOf(s)!==-1&&e.push(s)}return e}close(e){if(e&&(this.readyState==="open"||this.readyState==="closing"))return this.closeTransport(e);if(this.readyState==="open"){if(this.readyState="closing",this.writeBuffer.length){qt("there are %d remaining packets in the buffer, waiting for the 'drain' event",this.writeBuffer.length),this.once("drain",()=>{qt("all packets have been sent, closing the transport"),this.closeTransport(e)});return}qt("the buffer is empty, closing the transport right away"),this.closeTransport(e)}}closeTransport(e){qt("closing the transport (discard? %s)",!!e),e&&this.transport.discard(),this.transport.close(this.onClose.bind(this,"forced close"))}};im.Socket=pw});var eM=m(hw=>{"use strict";hw.parse=ene;hw.serialize=tne;var Gre=Object.prototype.toString,Jre=Object.prototype.hasOwnProperty,Yre=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,Qre=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,Xre=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Zre=/^[\u0020-\u003A\u003D-\u007E]*$/;function ene(t,e){if(typeof t!="string")throw new TypeError("argument str must be a string");var r={},n=t.length;if(n<2)return r;var s=e&&e.decode||rne,i=0,o=0,a=0;do{if(o=t.indexOf("=",i),o===-1)break;if(a=t.indexOf(";",i),a===-1)a=n;else if(o>a){i=t.lastIndexOf(";",o-1)+1;continue}var u=XD(t,i,o),c=ZD(t,o,u),l=t.slice(u,c);if(!Jre.call(r,l)){var p=XD(t,o+1,a),d=ZD(t,a,p);t.charCodeAt(p)===34&&t.charCodeAt(d-1)===34&&(p++,d--);var h=t.slice(p,d);r[l]=sne(h,s)}i=a+1}while(i<n);return r}function XD(t,e,r){do{var n=t.charCodeAt(e);if(n!==32&&n!==9)return e}while(++e<r);return r}function ZD(t,e,r){for(;e>r;){var n=t.charCodeAt(--e);if(n!==32&&n!==9)return e+1}return r}function tne(t,e,r){var n=r&&r.encode||encodeURIComponent;if(typeof n!="function")throw new TypeError("option encode is invalid");if(!Yre.test(t))throw new TypeError("argument name is invalid");var s=n(e);if(!Qre.test(s))throw new TypeError("argument val is invalid");var i=t+"="+s;if(!r)return i;if(r.maxAge!=null){var o=Math.floor(r.maxAge);if(!isFinite(o))throw new TypeError("option maxAge is invalid");i+="; Max-Age="+o}if(r.domain){if(!Xre.test(r.domain))throw new TypeError("option domain is invalid");i+="; Domain="+r.domain}if(r.path){if(!Zre.test(r.path))throw new TypeError("option path is invalid");i+="; Path="+r.path}if(r.expires){var a=r.expires;if(!nne(a)||isNaN(a.valueOf()))throw new TypeError("option expires is invalid");i+="; Expires="+a.toUTCString()}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.partitioned&&(i+="; Partitioned"),r.priority){var u=typeof r.priority=="string"?r.priority.toLowerCase():r.priority;switch(u){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(r.sameSite){var c=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(c){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return i}function rne(t){return t.indexOf("%")!==-1?decodeURIComponent(t):t}function nne(t){return Gre.call(t)==="[object Date]"}function sne(t,e){try{return e(t)}catch{return t}}});var oo=m((iMe,nM)=>{"use strict";var tM=["nodebuffer","arraybuffer","fragments"],rM=typeof Blob<"u";rM&&tM.push("blob");nM.exports={BINARY_TYPES:tM,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:rM,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var T1=m((oMe,om)=>{"use strict";var{EMPTY_BUFFER:ine}=oo(),fw=Buffer[Symbol.species];function one(t,e){if(t.length===0)return ine;if(t.length===1)return t[0];let r=Buffer.allocUnsafe(e),n=0;for(let s=0;s<t.length;s++){let i=t[s];r.set(i,n),n+=i.length}return n<e?new fw(r.buffer,r.byteOffset,n):r}function sM(t,e,r,n,s){for(let i=0;i<s;i++)r[n+i]=t[i]^e[i&3]}function iM(t,e){for(let r=0;r<t.length;r++)t[r]^=e[r&3]}function ane(t){return t.length===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.length)}function mw(t){if(mw.readOnly=!0,Buffer.isBuffer(t))return t;let e;return t instanceof ArrayBuffer?e=new fw(t):ArrayBuffer.isView(t)?e=new fw(t.buffer,t.byteOffset,t.byteLength):(e=Buffer.from(t),mw.readOnly=!1),e}om.exports={concat:one,mask:sM,toArrayBuffer:ane,toBuffer:mw,unmask:iM};if(!process.env.WS_NO_BUFFER_UTIL)try{let t=require("bufferutil");om.exports.mask=function(e,r,n,s,i){i<48?sM(e,r,n,s,i):t.mask(e,r,n,s,i)},om.exports.unmask=function(e,r){e.length<32?iM(e,r):t.unmask(e,r)}}catch{}});var uM=m((aMe,aM)=>{"use strict";var oM=Symbol("kDone"),yw=Symbol("kRun"),gw=class{constructor(e){this[oM]=()=>{this.pending--,this[yw]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[yw]()}[yw](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[oM])}}};aM.exports=gw});var M1=m((uMe,dM)=>{"use strict";var D1=require("zlib"),cM=T1(),une=uM(),{kStatusCode:lM}=oo(),cne=Buffer[Symbol.species],lne=Buffer.from([0,0,255,255]),um=Symbol("permessage-deflate"),ao=Symbol("total-length"),Hc=Symbol("callback"),sa=Symbol("buffers"),Gc=Symbol("error"),am,_w=class{constructor(e,r,n){if(this._maxPayload=n|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!r,this._deflate=null,this._inflate=null,this.params=null,!am){let s=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;am=new une(s)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[Hc];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let r=this._options,n=e.find(s=>!(r.serverNoContextTakeover===!1&&s.server_no_context_takeover||s.server_max_window_bits&&(r.serverMaxWindowBits===!1||typeof r.serverMaxWindowBits=="number"&&r.serverMaxWindowBits>s.server_max_window_bits)||typeof r.clientMaxWindowBits=="number"&&!s.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return r.serverNoContextTakeover&&(n.server_no_context_takeover=!0),r.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof r.serverMaxWindowBits=="number"&&(n.server_max_window_bits=r.serverMaxWindowBits),typeof r.clientMaxWindowBits=="number"?n.client_max_window_bits=r.clientMaxWindowBits:(n.client_max_window_bits===!0||r.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(e){let r=e[0];if(this._options.clientNoContextTakeover===!1&&r.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!r.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(r.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&r.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return r}normalizeParams(e){return e.forEach(r=>{Object.keys(r).forEach(n=>{let s=r[n];if(s.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(s=s[0],n==="client_max_window_bits"){if(s!==!0){let i=+s;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${n}": ${s}`);s=i}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${s}`)}else if(n==="server_max_window_bits"){let i=+s;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${n}": ${s}`);s=i}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(s!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${s}`)}else throw new Error(`Unknown parameter "${n}"`);r[n]=s})}),e}decompress(e,r,n){am.add(s=>{this._decompress(e,r,(i,o)=>{s(),n(i,o)})})}compress(e,r,n){am.add(s=>{this._compress(e,r,(i,o)=>{s(),n(i,o)})})}_decompress(e,r,n){let s=this._isServer?"client":"server";if(!this._inflate){let i=`${s}_max_window_bits`,o=typeof this.params[i]!="number"?D1.Z_DEFAULT_WINDOWBITS:this.params[i];this._inflate=D1.createInflateRaw({...this._options.zlibInflateOptions,windowBits:o}),this._inflate[um]=this,this._inflate[ao]=0,this._inflate[sa]=[],this._inflate.on("error",dne),this._inflate.on("data",pM)}this._inflate[Hc]=n,this._inflate.write(e),r&&this._inflate.write(lne),this._inflate.flush(()=>{let i=this._inflate[Gc];if(i){this._inflate.close(),this._inflate=null,n(i);return}let o=cM.concat(this._inflate[sa],this._inflate[ao]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[ao]=0,this._inflate[sa]=[],r&&this.params[`${s}_no_context_takeover`]&&this._inflate.reset()),n(null,o)})}_compress(e,r,n){let s=this._isServer?"server":"client";if(!this._deflate){let i=`${s}_max_window_bits`,o=typeof this.params[i]!="number"?D1.Z_DEFAULT_WINDOWBITS:this.params[i];this._deflate=D1.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:o}),this._deflate[ao]=0,this._deflate[sa]=[],this._deflate.on("data",pne)}this._deflate[Hc]=n,this._deflate.write(e),this._deflate.flush(D1.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let i=cM.concat(this._deflate[sa],this._deflate[ao]);r&&(i=new cne(i.buffer,i.byteOffset,i.length-4)),this._deflate[Hc]=null,this._deflate[ao]=0,this._deflate[sa]=[],r&&this.params[`${s}_no_context_takeover`]&&this._deflate.reset(),n(null,i)})}};dM.exports=_w;function pne(t){this[sa].push(t),this[ao]+=t.length}function pM(t){if(this[ao]+=t.length,this[um]._maxPayload<1||this[ao]<=this[um]._maxPayload){this[sa].push(t);return}this[Gc]=new RangeError("Max payload size exceeded"),this[Gc].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[Gc][lM]=1009,this.removeListener("data",pM),this.reset()}function dne(t){if(this[um]._inflate=null,this[Gc]){this[Hc](this[Gc]);return}t[lM]=1007,this[Hc](t)}});var Jc=m((cMe,cm)=>{"use strict";var{isUtf8:hM}=require("buffer"),{hasBlob:hne}=oo(),fne=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function mne(t){return t>=1e3&&t<=1014&&t!==1004&&t!==1005&&t!==1006||t>=3e3&&t<=4999}function Ew(t){let e=t.length,r=0;for(;r<e;)if((t[r]&128)===0)r++;else if((t[r]&224)===192){if(r+1===e||(t[r+1]&192)!==128||(t[r]&254)===192)return!1;r+=2}else if((t[r]&240)===224){if(r+2>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||t[r]===224&&(t[r+1]&224)===128||t[r]===237&&(t[r+1]&224)===160)return!1;r+=3}else if((t[r]&248)===240){if(r+3>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||(t[r+3]&192)!==128||t[r]===240&&(t[r+1]&240)===128||t[r]===244&&t[r+1]>143||t[r]>244)return!1;r+=4}else return!1;return!0}function yne(t){return hne&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&(t[Symbol.toStringTag]==="Blob"||t[Symbol.toStringTag]==="File")}cm.exports={isBlob:yne,isValidStatusCode:mne,isValidUTF8:Ew,tokenChars:fne};if(hM)cm.exports.isValidUTF8=function(t){return t.length<24?Ew(t):hM(t)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=require("utf-8-validate");cm.exports.isValidUTF8=function(e){return e.length<32?Ew(e):t(e)}}catch{}});var Ow=m((lMe,bM)=>{"use strict";var{Writable:gne}=require("stream"),fM=M1(),{BINARY_TYPES:_ne,EMPTY_BUFFER:mM,kStatusCode:Ene,kWebSocket:bne}=oo(),{concat:bw,toArrayBuffer:wne,unmask:Sne}=T1(),{isValidStatusCode:Ane,isValidUTF8:yM}=Jc(),lm=Buffer[Symbol.species],gs=0,gM=1,_M=2,EM=3,ww=4,Sw=5,pm=6,Aw=class extends gne{constructor(e={}){super(),this._allowSynchronousEvents=e.allowSynchronousEvents!==void 0?e.allowSynchronousEvents:!0,this._binaryType=e.binaryType||_ne[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[bne]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=gs}_write(e,r,n){if(this._opcode===8&&this._state==gs)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let n=this._buffers[0];return this._buffers[0]=new lm(n.buffer,n.byteOffset+e,n.length-e),new lm(n.buffer,n.byteOffset,e)}let r=Buffer.allocUnsafe(e);do{let n=this._buffers[0],s=r.length-e;e>=n.length?r.set(this._buffers.shift(),s):(r.set(new Uint8Array(n.buffer,n.byteOffset,e),s),this._buffers[0]=new lm(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return r}startLoop(e){this._loop=!0;do switch(this._state){case gs:this.getInfo(e);break;case gM:this.getPayloadLength16(e);break;case _M:this.getPayloadLength64(e);break;case EM:this.getMask();break;case ww:this.getData(e);break;case Sw:case pm:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let r=this.consume(2);if((r[0]&48)!==0){let s=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");e(s);return}let n=(r[0]&64)===64;if(n&&!this._extensions[fM.extensionName]){let s=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(s);return}if(this._fin=(r[0]&128)===128,this._opcode=r[0]&15,this._payloadLength=r[1]&127,this._opcode===0){if(n){let s=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(s);return}if(!this._fragmented){let s=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");e(s);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let s=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(s);return}this._compressed=n}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let s=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");e(s);return}if(n){let s=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(s);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let s=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");e(s);return}}else{let s=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(s);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(r[1]&128)===128,this._isServer){if(!this._masked){let s=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");e(s);return}}else if(this._masked){let s=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");e(s);return}this._payloadLength===126?this._state=gM:this._payloadLength===127?this._state=_M:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let r=this.consume(8),n=r.readUInt32BE(0);if(n>Math.pow(2,21)-1){let s=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");e(s);return}this._payloadLength=n*Math.pow(2,32)+r.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let r=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(r);return}this._masked?this._state=EM:this._state=ww}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=ww}getData(e){let r=mM;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}r=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0&&Sne(r,this._mask)}if(this._opcode>7){this.controlMessage(r,e);return}if(this._compressed){this._state=Sw,this.decompress(r,e);return}r.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(r)),this.dataMessage(e)}decompress(e,r){this._extensions[fM.extensionName].decompress(e,this._fin,(s,i)=>{if(s)return r(s);if(i.length){if(this._messageLength+=i.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let o=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");r(o);return}this._fragments.push(i)}this.dataMessage(r),this._state===gs&&this.startLoop(r)})}dataMessage(e){if(!this._fin){this._state=gs;return}let r=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let s;this._binaryType==="nodebuffer"?s=bw(n,r):this._binaryType==="arraybuffer"?s=wne(bw(n,r)):this._binaryType==="blob"?s=new Blob(n):s=n,this._allowSynchronousEvents?(this.emit("message",s,!0),this._state=gs):(this._state=pm,setImmediate(()=>{this.emit("message",s,!0),this._state=gs,this.startLoop(e)}))}else{let s=bw(n,r);if(!this._skipUTF8Validation&&!yM(s)){let i=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(i);return}this._state===Sw||this._allowSynchronousEvents?(this.emit("message",s,!1),this._state=gs):(this._state=pm,setImmediate(()=>{this.emit("message",s,!1),this._state=gs,this.startLoop(e)}))}}controlMessage(e,r){if(this._opcode===8){if(e.length===0)this._loop=!1,this.emit("conclude",1005,mM),this.end();else{let n=e.readUInt16BE(0);if(!Ane(n)){let i=this.createError(RangeError,`invalid status code ${n}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");r(i);return}let s=new lm(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!yM(s)){let i=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");r(i);return}this._loop=!1,this.emit("conclude",n,s),this.end()}this._state=gs;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",e),this._state=gs):(this._state=pm,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",e),this._state=gs,this.startLoop(r)}))}createError(e,r,n,s,i){this._loop=!1,this._errored=!0;let o=new e(n?`Invalid WebSocket frame: ${r}`:r);return Error.captureStackTrace(o,this.createError),o.code=i,o[Ene]=s,o}};bM.exports=Aw});var xw=m((dMe,AM)=>{"use strict";var{Duplex:pMe}=require("stream"),{randomFillSync:One}=require("crypto"),wM=M1(),{EMPTY_BUFFER:Cne,kWebSocket:vne,NOOP:xne}=oo(),{isBlob:Yc,isValidStatusCode:Tne}=Jc(),{mask:SM,toBuffer:fu}=T1(),_s=Symbol("kByteLength"),Dne=Buffer.alloc(4),dm=8*1024,mu,Qc=dm,Hs=0,Mne=1,Pne=2,Cw=class t{constructor(e,r,n){this._extensions=r||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=Hs,this.onerror=xne,this[vne]=void 0}static frame(e,r){let n,s=!1,i=2,o=!1;r.mask&&(n=r.maskBuffer||Dne,r.generateMask?r.generateMask(n):(Qc===dm&&(mu===void 0&&(mu=Buffer.alloc(dm)),One(mu,0,dm),Qc=0),n[0]=mu[Qc++],n[1]=mu[Qc++],n[2]=mu[Qc++],n[3]=mu[Qc++]),o=(n[0]|n[1]|n[2]|n[3])===0,i=6);let a;typeof e=="string"?(!r.mask||o)&&r[_s]!==void 0?a=r[_s]:(e=Buffer.from(e),a=e.length):(a=e.length,s=r.mask&&r.readOnly&&!o);let u=a;a>=65536?(i+=8,u=127):a>125&&(i+=2,u=126);let c=Buffer.allocUnsafe(s?a+i:i);return c[0]=r.fin?r.opcode|128:r.opcode,r.rsv1&&(c[0]|=64),c[1]=u,u===126?c.writeUInt16BE(a,2):u===127&&(c[2]=c[3]=0,c.writeUIntBE(a,4,6)),r.mask?(c[1]|=128,c[i-4]=n[0],c[i-3]=n[1],c[i-2]=n[2],c[i-1]=n[3],o?[c,e]:s?(SM(e,n,c,i,a),[c]):(SM(e,n,e,0,a),[c,e])):[c,e]}close(e,r,n,s){let i;if(e===void 0)i=Cne;else{if(typeof e!="number"||!Tne(e))throw new TypeError("First argument must be a valid error code number");if(r===void 0||!r.length)i=Buffer.allocUnsafe(2),i.writeUInt16BE(e,0);else{let a=Buffer.byteLength(r);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");i=Buffer.allocUnsafe(2+a),i.writeUInt16BE(e,0),typeof r=="string"?i.write(r,2):i.set(r,2)}}let o={[_s]:i.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._state!==Hs?this.enqueue([this.dispatch,i,!1,o,s]):this.sendFrame(t.frame(i,o),s)}ping(e,r,n){let s,i;if(typeof e=="string"?(s=Buffer.byteLength(e),i=!1):Yc(e)?(s=e.size,i=!1):(e=fu(e),s=e.length,i=fu.readOnly),s>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[_s]:s,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:!1};Yc(e)?this._state!==Hs?this.enqueue([this.getBlobData,e,!1,o,n]):this.getBlobData(e,!1,o,n):this._state!==Hs?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(t.frame(e,o),n)}pong(e,r,n){let s,i;if(typeof e=="string"?(s=Buffer.byteLength(e),i=!1):Yc(e)?(s=e.size,i=!1):(e=fu(e),s=e.length,i=fu.readOnly),s>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[_s]:s,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:!1};Yc(e)?this._state!==Hs?this.enqueue([this.getBlobData,e,!1,o,n]):this.getBlobData(e,!1,o,n):this._state!==Hs?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(t.frame(e,o),n)}send(e,r,n){let s=this._extensions[wM.extensionName],i=r.binary?2:1,o=r.compress,a,u;typeof e=="string"?(a=Buffer.byteLength(e),u=!1):Yc(e)?(a=e.size,u=!1):(e=fu(e),a=e.length,u=fu.readOnly),this._firstFragment?(this._firstFragment=!1,o&&s&&s.params[s._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(o=a>=s._threshold),this._compress=o):(o=!1,i=0),r.fin&&(this._firstFragment=!0);let c={[_s]:a,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:i,readOnly:u,rsv1:o};Yc(e)?this._state!==Hs?this.enqueue([this.getBlobData,e,this._compress,c,n]):this.getBlobData(e,this._compress,c,n):this._state!==Hs?this.enqueue([this.dispatch,e,this._compress,c,n]):this.dispatch(e,this._compress,c,n)}getBlobData(e,r,n,s){this._bufferedBytes+=n[_s],this._state=Pne,e.arrayBuffer().then(i=>{if(this._socket.destroyed){let a=new Error("The socket was closed while the blob was being read");process.nextTick(vw,this,a,s);return}this._bufferedBytes-=n[_s];let o=fu(i);r?this.dispatch(o,r,n,s):(this._state=Hs,this.sendFrame(t.frame(o,n),s),this.dequeue())}).catch(i=>{process.nextTick(Bne,this,i,s)})}dispatch(e,r,n,s){if(!r){this.sendFrame(t.frame(e,n),s);return}let i=this._extensions[wM.extensionName];this._bufferedBytes+=n[_s],this._state=Mne,i.compress(e,n.fin,(o,a)=>{if(this._socket.destroyed){let u=new Error("The socket was closed while data was being compressed");vw(this,u,s);return}this._bufferedBytes-=n[_s],this._state=Hs,n.readOnly=!1,this.sendFrame(t.frame(a,n),s),this.dequeue()})}dequeue(){for(;this._state===Hs&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][_s],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][_s],this._queue.push(e)}sendFrame(e,r){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],r),this._socket.uncork()):this._socket.write(e[0],r)}};AM.exports=Cw;function vw(t,e,r){typeof r=="function"&&r(e);for(let n=0;n<t._queue.length;n++){let s=t._queue[n],i=s[s.length-1];typeof i=="function"&&i(e)}}function Bne(t,e,r){vw(t,e,r),t.onerror(e)}});var BM=m((hMe,PM)=>{"use strict";var{kForOnEventAttribute:P1,kListener:Tw}=oo(),OM=Symbol("kCode"),CM=Symbol("kData"),vM=Symbol("kError"),xM=Symbol("kMessage"),TM=Symbol("kReason"),Xc=Symbol("kTarget"),DM=Symbol("kType"),MM=Symbol("kWasClean"),uo=class{constructor(e){this[Xc]=null,this[DM]=e}get target(){return this[Xc]}get type(){return this[DM]}};Object.defineProperty(uo.prototype,"target",{enumerable:!0});Object.defineProperty(uo.prototype,"type",{enumerable:!0});var yu=class extends uo{constructor(e,r={}){super(e),this[OM]=r.code===void 0?0:r.code,this[TM]=r.reason===void 0?"":r.reason,this[MM]=r.wasClean===void 0?!1:r.wasClean}get code(){return this[OM]}get reason(){return this[TM]}get wasClean(){return this[MM]}};Object.defineProperty(yu.prototype,"code",{enumerable:!0});Object.defineProperty(yu.prototype,"reason",{enumerable:!0});Object.defineProperty(yu.prototype,"wasClean",{enumerable:!0});var Zc=class extends uo{constructor(e,r={}){super(e),this[vM]=r.error===void 0?null:r.error,this[xM]=r.message===void 0?"":r.message}get error(){return this[vM]}get message(){return this[xM]}};Object.defineProperty(Zc.prototype,"error",{enumerable:!0});Object.defineProperty(Zc.prototype,"message",{enumerable:!0});var B1=class extends uo{constructor(e,r={}){super(e),this[CM]=r.data===void 0?null:r.data}get data(){return this[CM]}};Object.defineProperty(B1.prototype,"data",{enumerable:!0});var Ine={addEventListener(t,e,r={}){for(let s of this.listeners(t))if(!r[P1]&&s[Tw]===e&&!s[P1])return;let n;if(t==="message")n=function(i,o){let a=new B1("message",{data:o?i:i.toString()});a[Xc]=this,hm(e,this,a)};else if(t==="close")n=function(i,o){let a=new yu("close",{code:i,reason:o.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[Xc]=this,hm(e,this,a)};else if(t==="error")n=function(i){let o=new Zc("error",{error:i,message:i.message});o[Xc]=this,hm(e,this,o)};else if(t==="open")n=function(){let i=new uo("open");i[Xc]=this,hm(e,this,i)};else return;n[P1]=!!r[P1],n[Tw]=e,r.once?this.once(t,n):this.on(t,n)},removeEventListener(t,e){for(let r of this.listeners(t))if(r[Tw]===e&&!r[P1]){this.removeListener(t,r);break}}};PM.exports={CloseEvent:yu,ErrorEvent:Zc,Event:uo,EventTarget:Ine,MessageEvent:B1};function hm(t,e,r){typeof t=="object"&&t.handleEvent?t.handleEvent.call(t,r):t.call(e,r)}});var Dw=m((fMe,IM)=>{"use strict";var{tokenChars:I1}=Jc();function Bi(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}function Nne(t){let e=Object.create(null),r=Object.create(null),n=!1,s=!1,i=!1,o,a,u=-1,c=-1,l=-1,p=0;for(;p<t.length;p++)if(c=t.charCodeAt(p),o===void 0)if(l===-1&&I1[c]===1)u===-1&&(u=p);else if(p!==0&&(c===32||c===9))l===-1&&u!==-1&&(l=p);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${p}`);l===-1&&(l=p);let h=t.slice(u,l);c===44?(Bi(e,h,r),r=Object.create(null)):o=h,u=l=-1}else throw new SyntaxError(`Unexpected character at index ${p}`);else if(a===void 0)if(l===-1&&I1[c]===1)u===-1&&(u=p);else if(c===32||c===9)l===-1&&u!==-1&&(l=p);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${p}`);l===-1&&(l=p),Bi(r,t.slice(u,l),!0),c===44&&(Bi(e,o,r),r=Object.create(null),o=void 0),u=l=-1}else if(c===61&&u!==-1&&l===-1)a=t.slice(u,p),u=l=-1;else throw new SyntaxError(`Unexpected character at index ${p}`);else if(s){if(I1[c]!==1)throw new SyntaxError(`Unexpected character at index ${p}`);u===-1?u=p:n||(n=!0),s=!1}else if(i)if(I1[c]===1)u===-1&&(u=p);else if(c===34&&u!==-1)i=!1,l=p;else if(c===92)s=!0;else throw new SyntaxError(`Unexpected character at index ${p}`);else if(c===34&&t.charCodeAt(p-1)===61)i=!0;else if(l===-1&&I1[c]===1)u===-1&&(u=p);else if(u!==-1&&(c===32||c===9))l===-1&&(l=p);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${p}`);l===-1&&(l=p);let h=t.slice(u,l);n&&(h=h.replace(/\\/g,""),n=!1),Bi(r,a,h),c===44&&(Bi(e,o,r),r=Object.create(null),o=void 0),a=void 0,u=l=-1}else throw new SyntaxError(`Unexpected character at index ${p}`);if(u===-1||i||c===32||c===9)throw new SyntaxError("Unexpected end of input");l===-1&&(l=p);let d=t.slice(u,l);return o===void 0?Bi(e,d,r):(a===void 0?Bi(r,d,!0):n?Bi(r,a,d.replace(/\\/g,"")):Bi(r,a,d),Bi(e,o,r)),e}function kne(t){return Object.keys(t).map(e=>{let r=t[e];return Array.isArray(r)||(r=[r]),r.map(n=>[e].concat(Object.keys(n).map(s=>{let i=n[s];return Array.isArray(i)||(i=[i]),i.map(o=>o===!0?s:`${s}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}IM.exports={format:kne,parse:Nne}});var gm=m((gMe,zM)=>{"use strict";var Rne=require("events"),Fne=require("https"),$ne=require("http"),RM=require("net"),qne=require("tls"),{randomBytes:jne,createHash:Lne}=require("crypto"),{Duplex:mMe,Readable:yMe}=require("stream"),{URL:Mw}=require("url"),ia=M1(),Une=Ow(),Vne=xw(),{isBlob:Wne}=Jc(),{BINARY_TYPES:NM,EMPTY_BUFFER:fm,GUID:zne,kForOnEventAttribute:Pw,kListener:Kne,kStatusCode:Hne,kWebSocket:mr,NOOP:FM}=oo(),{EventTarget:{addEventListener:Gne,removeEventListener:Jne}}=BM(),{format:Yne,parse:Qne}=Dw(),{toBuffer:Xne}=T1(),Zne=30*1e3,$M=Symbol("kAborted"),Bw=[8,13],co=["CONNECTING","OPEN","CLOSING","CLOSED"],ese=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,yt=class t extends Rne{constructor(e,r,n){super(),this._binaryType=NM[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=fm,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=t.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,r===void 0?r=[]:Array.isArray(r)||(typeof r=="object"&&r!==null?(n=r,r=[]):r=[r]),qM(this,e,r,n)):(this._autoPong=n.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){NM.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,r,n){let s=new Une({allowSynchronousEvents:n.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation}),i=new Vne(e,this._extensions,n.generateMask);this._receiver=s,this._sender=i,this._socket=e,s[mr]=this,i[mr]=this,e[mr]=this,s.on("conclude",nse),s.on("drain",sse),s.on("error",ise),s.on("message",ose),s.on("ping",ase),s.on("pong",use),i.onerror=cse,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),r.length>0&&e.unshift(r),e.on("close",UM),e.on("data",ym),e.on("end",VM),e.on("error",WM),this._readyState=t.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[ia.extensionName]&&this._extensions[ia.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,r){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){Yn(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===t.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=t.CLOSING,this._sender.close(e,r,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),LM(this)}}pause(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){Iw(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.ping(e||fm,r,n)}pong(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){Iw(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.pong(e||fm,r,n)}resume(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof r=="function"&&(n=r,r={}),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){Iw(this,e,n);return}let s={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...r};this._extensions[ia.extensionName]||(s.compress=!1),this._sender.send(e||fm,s,n)}terminate(){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){Yn(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=t.CLOSING,this._socket.destroy())}}};Object.defineProperty(yt,"CONNECTING",{enumerable:!0,value:co.indexOf("CONNECTING")});Object.defineProperty(yt.prototype,"CONNECTING",{enumerable:!0,value:co.indexOf("CONNECTING")});Object.defineProperty(yt,"OPEN",{enumerable:!0,value:co.indexOf("OPEN")});Object.defineProperty(yt.prototype,"OPEN",{enumerable:!0,value:co.indexOf("OPEN")});Object.defineProperty(yt,"CLOSING",{enumerable:!0,value:co.indexOf("CLOSING")});Object.defineProperty(yt.prototype,"CLOSING",{enumerable:!0,value:co.indexOf("CLOSING")});Object.defineProperty(yt,"CLOSED",{enumerable:!0,value:co.indexOf("CLOSED")});Object.defineProperty(yt.prototype,"CLOSED",{enumerable:!0,value:co.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(t=>{Object.defineProperty(yt.prototype,t,{enumerable:!0})});["open","error","close","message"].forEach(t=>{Object.defineProperty(yt.prototype,`on${t}`,{enumerable:!0,get(){for(let e of this.listeners(t))if(e[Pw])return e[Kne];return null},set(e){for(let r of this.listeners(t))if(r[Pw]){this.removeListener(t,r);break}typeof e=="function"&&this.addEventListener(t,e,{[Pw]:!0})}})});yt.prototype.addEventListener=Gne;yt.prototype.removeEventListener=Jne;zM.exports=yt;function qM(t,e,r,n){let s={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:Bw[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(t._autoPong=s.autoPong,!Bw.includes(s.protocolVersion))throw new RangeError(`Unsupported protocol version: ${s.protocolVersion} (supported versions: ${Bw.join(", ")})`);let i;if(e instanceof Mw)i=e;else try{i=new Mw(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}i.protocol==="http:"?i.protocol="ws:":i.protocol==="https:"&&(i.protocol="wss:"),t._url=i.href;let o=i.protocol==="wss:",a=i.protocol==="ws+unix:",u;if(i.protocol!=="ws:"&&!o&&!a?u=`The URL's protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"`:a&&!i.pathname?u="The URL's pathname is empty":i.hash&&(u="The URL contains a fragment identifier"),u){let y=new SyntaxError(u);if(t._redirects===0)throw y;mm(t,y);return}let c=o?443:80,l=jne(16).toString("base64"),p=o?Fne.request:$ne.request,d=new Set,h;if(s.createConnection=s.createConnection||(o?rse:tse),s.defaultPort=s.defaultPort||c,s.port=i.port||c,s.host=i.hostname.startsWith("[")?i.hostname.slice(1,-1):i.hostname,s.headers={...s.headers,"Sec-WebSocket-Version":s.protocolVersion,"Sec-WebSocket-Key":l,Connection:"Upgrade",Upgrade:"websocket"},s.path=i.pathname+i.search,s.timeout=s.handshakeTimeout,s.perMessageDeflate&&(h=new ia(s.perMessageDeflate!==!0?s.perMessageDeflate:{},!1,s.maxPayload),s.headers["Sec-WebSocket-Extensions"]=Yne({[ia.extensionName]:h.offer()})),r.length){for(let y of r){if(typeof y!="string"||!ese.test(y)||d.has(y))throw new SyntaxError("An invalid or duplicated subprotocol was specified");d.add(y)}s.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(s.origin&&(s.protocolVersion<13?s.headers["Sec-WebSocket-Origin"]=s.origin:s.headers.Origin=s.origin),(i.username||i.password)&&(s.auth=`${i.username}:${i.password}`),a){let y=s.path.split(":");s.socketPath=y[0],s.path=y[1]}let f;if(s.followRedirects){if(t._redirects===0){t._originalIpc=a,t._originalSecure=o,t._originalHostOrSocketPath=a?s.socketPath:i.host;let y=n&&n.headers;if(n={...n,headers:{}},y)for(let[g,_]of Object.entries(y))n.headers[g.toLowerCase()]=_}else if(t.listenerCount("redirect")===0){let y=a?t._originalIpc?s.socketPath===t._originalHostOrSocketPath:!1:t._originalIpc?!1:i.host===t._originalHostOrSocketPath;(!y||t._originalSecure&&!o)&&(delete s.headers.authorization,delete s.headers.cookie,y||delete s.headers.host,s.auth=void 0)}s.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(s.auth).toString("base64")),f=t._req=p(s),t._redirects&&t.emit("redirect",t.url,f)}else f=t._req=p(s);s.timeout&&f.on("timeout",()=>{Yn(t,f,"Opening handshake has timed out")}),f.on("error",y=>{f===null||f[$M]||(f=t._req=null,mm(t,y))}),f.on("response",y=>{let g=y.headers.location,_=y.statusCode;if(g&&s.followRedirects&&_>=300&&_<400){if(++t._redirects>s.maxRedirects){Yn(t,f,"Maximum redirects exceeded");return}f.abort();let w;try{w=new Mw(g,e)}catch{let E=new SyntaxError(`Invalid URL: ${g}`);mm(t,E);return}qM(t,w,r,n)}else t.emit("unexpected-response",f,y)||Yn(t,f,`Unexpected server response: ${y.statusCode}`)}),f.on("upgrade",(y,g,_)=>{if(t.emit("upgrade",y),t.readyState!==yt.CONNECTING)return;f=t._req=null;let w=y.headers.upgrade;if(w===void 0||w.toLowerCase()!=="websocket"){Yn(t,g,"Invalid Upgrade header");return}let O=Lne("sha1").update(l+zne).digest("base64");if(y.headers["sec-websocket-accept"]!==O){Yn(t,g,"Invalid Sec-WebSocket-Accept header");return}let E=y.headers["sec-websocket-protocol"],A;if(E!==void 0?d.size?d.has(E)||(A="Server sent an invalid subprotocol"):A="Server sent a subprotocol but none was requested":d.size&&(A="Server sent no subprotocol"),A){Yn(t,g,A);return}E&&(t._protocol=E);let x=y.headers["sec-websocket-extensions"];if(x!==void 0){if(!h){Yn(t,g,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let v;try{v=Qne(x)}catch{Yn(t,g,"Invalid Sec-WebSocket-Extensions header");return}let R=Object.keys(v);if(R.length!==1||R[0]!==ia.extensionName){Yn(t,g,"Server indicated an extension that was not requested");return}try{h.accept(v[ia.extensionName])}catch{Yn(t,g,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[ia.extensionName]=h}t.setSocket(g,_,{allowSynchronousEvents:s.allowSynchronousEvents,generateMask:s.generateMask,maxPayload:s.maxPayload,skipUTF8Validation:s.skipUTF8Validation})}),s.finishRequest?s.finishRequest(f,t):f.end()}function mm(t,e){t._readyState=yt.CLOSING,t._errorEmitted=!0,t.emit("error",e),t.emitClose()}function tse(t){return t.path=t.socketPath,RM.connect(t)}function rse(t){return t.path=void 0,!t.servername&&t.servername!==""&&(t.servername=RM.isIP(t.host)?"":t.host),qne.connect(t)}function Yn(t,e,r){t._readyState=yt.CLOSING;let n=new Error(r);Error.captureStackTrace(n,Yn),e.setHeader?(e[$M]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(mm,t,n)):(e.destroy(n),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function Iw(t,e,r){if(e){let n=Wne(e)?e.size:Xne(e).length;t._socket?t._sender._bufferedBytes+=n:t._bufferedAmount+=n}if(r){let n=new Error(`WebSocket is not open: readyState ${t.readyState} (${co[t.readyState]})`);process.nextTick(r,n)}}function nse(t,e){let r=this[mr];r._closeFrameReceived=!0,r._closeMessage=e,r._closeCode=t,r._socket[mr]!==void 0&&(r._socket.removeListener("data",ym),process.nextTick(jM,r._socket),t===1005?r.close():r.close(t,e))}function sse(){let t=this[mr];t.isPaused||t._socket.resume()}function ise(t){let e=this[mr];e._socket[mr]!==void 0&&(e._socket.removeListener("data",ym),process.nextTick(jM,e._socket),e.close(t[Hne])),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t))}function kM(){this[mr].emitClose()}function ose(t,e){this[mr].emit("message",t,e)}function ase(t){let e=this[mr];e._autoPong&&e.pong(t,!this._isServer,FM),e.emit("ping",t)}function use(t){this[mr].emit("pong",t)}function jM(t){t.resume()}function cse(t){let e=this[mr];e.readyState!==yt.CLOSED&&(e.readyState===yt.OPEN&&(e._readyState=yt.CLOSING,LM(e)),this._socket.end(),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t)))}function LM(t){t._closeTimer=setTimeout(t._socket.destroy.bind(t._socket),Zne)}function UM(){let t=this[mr];this.removeListener("close",UM),this.removeListener("data",ym),this.removeListener("end",VM),t._readyState=yt.CLOSING;let e;!this._readableState.endEmitted&&!t._closeFrameReceived&&!t._receiver._writableState.errorEmitted&&(e=t._socket.read())!==null&&t._receiver.write(e),t._receiver.end(),this[mr]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",kM),t._receiver.on("finish",kM))}function ym(t){this[mr]._receiver.write(t)||this.pause()}function VM(){let t=this[mr];t._readyState=yt.CLOSING,t._receiver.end(),this.end()}function WM(){let t=this[mr];this.removeListener("error",WM),this.on("error",FM),t&&(t._readyState=yt.CLOSING,this.destroy())}});var JM=m((EMe,GM)=>{"use strict";var _Me=gm(),{Duplex:lse}=require("stream");function KM(t){t.emit("close")}function pse(){!this.destroyed&&this._writableState.finished&&this.destroy()}function HM(t){this.removeListener("error",HM),this.destroy(),this.listenerCount("error")===0&&this.emit("error",t)}function dse(t,e){let r=!0,n=new lse({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",function(i,o){let a=!o&&n._readableState.objectMode?i.toString():i;n.push(a)||t.pause()}),t.once("error",function(i){n.destroyed||(r=!1,n.destroy(i))}),t.once("close",function(){n.destroyed||n.push(null)}),n._destroy=function(s,i){if(t.readyState===t.CLOSED){i(s),process.nextTick(KM,n);return}let o=!1;t.once("error",function(u){o=!0,i(u)}),t.once("close",function(){o||i(s),process.nextTick(KM,n)}),r&&t.terminate()},n._final=function(s){if(t.readyState===t.CONNECTING){t.once("open",function(){n._final(s)});return}t._socket!==null&&(t._socket._writableState.finished?(s(),n._readableState.endEmitted&&n.destroy()):(t._socket.once("finish",function(){s()}),t.close()))},n._read=function(){t.isPaused&&t.resume()},n._write=function(s,i,o){if(t.readyState===t.CONNECTING){t.once("open",function(){n._write(s,i,o)});return}t.send(s,o)},n.on("end",pse),n.on("error",HM),n}GM.exports=dse});var QM=m((bMe,YM)=>{"use strict";var{tokenChars:hse}=Jc();function fse(t){let e=new Set,r=-1,n=-1,s=0;for(s;s<t.length;s++){let o=t.charCodeAt(s);if(n===-1&&hse[o]===1)r===-1&&(r=s);else if(s!==0&&(o===32||o===9))n===-1&&r!==-1&&(n=s);else if(o===44){if(r===-1)throw new SyntaxError(`Unexpected character at index ${s}`);n===-1&&(n=s);let a=t.slice(r,n);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),r=n=-1}else throw new SyntaxError(`Unexpected character at index ${s}`)}if(r===-1||n!==-1)throw new SyntaxError("Unexpected end of input");let i=t.slice(r,s);if(e.has(i))throw new SyntaxError(`The "${i}" subprotocol is duplicated`);return e.add(i),e}YM.exports={parse:fse}});var sP=m((SMe,nP)=>{"use strict";var mse=require("events"),_m=require("http"),{Duplex:wMe}=require("stream"),{createHash:yse}=require("crypto"),XM=Dw(),gu=M1(),gse=QM(),_se=gm(),{GUID:Ese,kWebSocket:bse}=oo(),wse=/^[+/0-9A-Za-z]{22}==$/,ZM=0,eP=1,rP=2,Nw=class extends mse{constructor(e,r){if(super(),e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:_se,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=_m.createServer((n,s)=>{let i=_m.STATUS_CODES[426];s.writeHead(426,{"Content-Length":i.length,"Content-Type":"text/plain"}),s.end(i)}),this._server.listen(e.port,e.host,e.backlog,r)):e.server&&(this._server=e.server),this._server){let n=this.emit.bind(this,"connection");this._removeListeners=Sse(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(s,i,o)=>{this.handleUpgrade(s,i,o,n)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=ZM}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===rP){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(N1,this);return}if(e&&this.once("close",e),this._state!==eP)if(this._state=eP,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(N1,this):process.nextTick(N1,this);else{let r=this._server;this._removeListeners(),this._removeListeners=this._server=null,r.close(()=>{N1(this)})}}shouldHandle(e){if(this.options.path){let r=e.url.indexOf("?");if((r!==-1?e.url.slice(0,r):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,r,n,s){r.on("error",tP);let i=e.headers["sec-websocket-key"],o=e.headers.upgrade,a=+e.headers["sec-websocket-version"];if(e.method!=="GET"){_u(this,e,r,405,"Invalid HTTP method");return}if(o===void 0||o.toLowerCase()!=="websocket"){_u(this,e,r,400,"Invalid Upgrade header");return}if(i===void 0||!wse.test(i)){_u(this,e,r,400,"Missing or invalid Sec-WebSocket-Key header");return}if(a!==13&&a!==8){_u(this,e,r,400,"Missing or invalid Sec-WebSocket-Version header",{"Sec-WebSocket-Version":"13, 8"});return}if(!this.shouldHandle(e)){k1(r,400);return}let u=e.headers["sec-websocket-protocol"],c=new Set;if(u!==void 0)try{c=gse.parse(u)}catch{_u(this,e,r,400,"Invalid Sec-WebSocket-Protocol header");return}let l=e.headers["sec-websocket-extensions"],p={};if(this.options.perMessageDeflate&&l!==void 0){let d=new gu(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let h=XM.parse(l);h[gu.extensionName]&&(d.accept(h[gu.extensionName]),p[gu.extensionName]=d)}catch{_u(this,e,r,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let d={origin:e.headers[`${a===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(d,(h,f,y,g)=>{if(!h)return k1(r,f||401,y,g);this.completeUpgrade(p,i,c,e,r,n,s)});return}if(!this.options.verifyClient(d))return k1(r,401)}this.completeUpgrade(p,i,c,e,r,n,s)}completeUpgrade(e,r,n,s,i,o,a){if(!i.readable||!i.writable)return i.destroy();if(i[bse])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>ZM)return k1(i,503);let c=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${yse("sha1").update(r+Ese).digest("base64")}`],l=new this.options.WebSocket(null,void 0,this.options);if(n.size){let p=this.options.handleProtocols?this.options.handleProtocols(n,s):n.values().next().value;p&&(c.push(`Sec-WebSocket-Protocol: ${p}`),l._protocol=p)}if(e[gu.extensionName]){let p=e[gu.extensionName].params,d=XM.format({[gu.extensionName]:[p]});c.push(`Sec-WebSocket-Extensions: ${d}`),l._extensions=e}this.emit("headers",c,s),i.write(c.concat(`\r
`).join(`\r
`)),i.removeListener("error",tP),l.setSocket(i,o,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(l),l.on("close",()=>{this.clients.delete(l),this._shouldEmitClose&&!this.clients.size&&process.nextTick(N1,this)})),a(l,s)}};nP.exports=Nw;function Sse(t,e){for(let r of Object.keys(e))t.on(r,e[r]);return function(){for(let n of Object.keys(e))t.removeListener(n,e[n])}}function N1(t){t._state=rP,t.emit("close")}function tP(){this.destroy()}function k1(t,e,r,n){r=r||_m.STATUS_CODES[e],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},t.once("finish",t.destroy),t.end(`HTTP/1.1 ${e} ${_m.STATUS_CODES[e]}\r
`+Object.keys(n).map(s=>`${s}: ${n[s]}`).join(`\r
`)+`\r
\r
`+r)}function _u(t,e,r,n,s,i){if(t.listenerCount("wsClientError")){let o=new Error(s);Error.captureStackTrace(o,_u),t.emit("wsClientError",o,r,e)}else k1(r,n,s,i)}});var kw=m((AMe,iP)=>{"use strict";var lo=gm();lo.createWebSocketStream=JM();lo.Server=sP();lo.Receiver=Ow();lo.Sender=xw();lo.WebSocket=lo;lo.WebSocketServer=lo.Server;iP.exports=lo});var uP=m((OMe,aP)=>{"use strict";var oP=Object.getOwnPropertySymbols,Ase=Object.prototype.hasOwnProperty,Ose=Object.prototype.propertyIsEnumerable;function Cse(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function vse(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map(function(i){return e[i]});if(n.join("")!=="0123456789")return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(i){s[i]=i}),Object.keys(Object.assign({},s)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}aP.exports=vse()?Object.assign:function(t,e){for(var r,n=Cse(t),s,i=1;i<arguments.length;i++){r=Object(arguments[i]);for(var o in r)Ase.call(r,o)&&(n[o]=r[o]);if(oP){s=oP(r);for(var a=0;a<s.length;a++)Ose.call(r,s[a])&&(n[s[a]]=r[s[a]])}}return n}});var pP=m((CMe,Rw)=>{"use strict";Rw.exports=Tse;Rw.exports.append=lP;var xse=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/;function lP(t,e){if(typeof t!="string")throw new TypeError("header argument is required");if(!e)throw new TypeError("field argument is required");for(var r=Array.isArray(e)?e:cP(String(e)),n=0;n<r.length;n++)if(!xse.test(r[n]))throw new TypeError("field argument contains an invalid header name");if(t==="*")return t;var s=t,i=cP(t.toLowerCase());if(r.indexOf("*")!==-1||i.indexOf("*")!==-1)return"*";for(var o=0;o<r.length;o++){var a=r[o].toLowerCase();i.indexOf(a)===-1&&(i.push(a),s=s?s+", "+r[o]:r[o])}return s}function cP(t){for(var e=0,r=[],n=0,s=0,i=t.length;s<i;s++)switch(t.charCodeAt(s)){case 32:n===e&&(n=e=s+1);break;case 44:r.push(t.substring(n,e)),n=e=s+1;break;default:e=s+1;break}return r.push(t.substring(n,e)),r}function Tse(t,e){if(!t||!t.getHeader||!t.setHeader)throw new TypeError("res argument is required");var r=t.getHeader("Vary")||"",n=Array.isArray(r)?r.join(", "):String(r);(r=lP(n,e))&&t.setHeader("Vary",r)}});var Fw=m((vMe,dP)=>{(function(){"use strict";var t=uP(),e=pP(),r={origin:"*",methods:"GET,HEAD,PUT,PATCH,POST,DELETE",preflightContinue:!1,optionsSuccessStatus:204};function n(f){return typeof f=="string"||f instanceof String}function s(f,y){if(Array.isArray(y)){for(var g=0;g<y.length;++g)if(s(f,y[g]))return!0;return!1}else return n(y)?f===y:y instanceof RegExp?y.test(f):!!y}function i(f,y){var g=y.headers.origin,_=[],w;return!f.origin||f.origin==="*"?_.push([{key:"Access-Control-Allow-Origin",value:"*"}]):n(f.origin)?(_.push([{key:"Access-Control-Allow-Origin",value:f.origin}]),_.push([{key:"Vary",value:"Origin"}])):(w=s(g,f.origin),_.push([{key:"Access-Control-Allow-Origin",value:w?g:!1}]),_.push([{key:"Vary",value:"Origin"}])),_}function o(f){var y=f.methods;return y.join&&(y=f.methods.join(",")),{key:"Access-Control-Allow-Methods",value:y}}function a(f){return f.credentials===!0?{key:"Access-Control-Allow-Credentials",value:"true"}:null}function u(f,y){var g=f.allowedHeaders||f.headers,_=[];return g?g.join&&(g=g.join(",")):(g=y.headers["access-control-request-headers"],_.push([{key:"Vary",value:"Access-Control-Request-Headers"}])),g&&g.length&&_.push([{key:"Access-Control-Allow-Headers",value:g}]),_}function c(f){var y=f.exposedHeaders;if(y)y.join&&(y=y.join(","));else return null;return y&&y.length?{key:"Access-Control-Expose-Headers",value:y}:null}function l(f){var y=(typeof f.maxAge=="number"||f.maxAge)&&f.maxAge.toString();return y&&y.length?{key:"Access-Control-Max-Age",value:y}:null}function p(f,y){for(var g=0,_=f.length;g<_;g++){var w=f[g];w&&(Array.isArray(w)?p(w,y):w.key==="Vary"&&w.value?e(y,w.value):w.value&&y.setHeader(w.key,w.value))}}function d(f,y,g,_){var w=[],O=y.method&&y.method.toUpperCase&&y.method.toUpperCase();O==="OPTIONS"?(w.push(i(f,y)),w.push(a(f)),w.push(o(f)),w.push(u(f,y)),w.push(l(f)),w.push(c(f)),p(w,g),f.preflightContinue?_():(g.statusCode=f.optionsSuccessStatus,g.setHeader("Content-Length","0"),g.end())):(w.push(i(f,y)),w.push(a(f)),w.push(c(f)),p(w,g),_())}function h(f){var y=null;return typeof f=="function"?y=f:y=function(g,_){_(null,f)},function(_,w,O){y(_,function(E,A){if(E)O(E);else{var x=t({},r,A),v=null;x.origin&&typeof x.origin=="function"?v=x.origin:x.origin&&(v=function(R,M){M(null,x.origin)}),v?v(_.headers.origin,function(R,M){R||!M?O(R):(x.origin=M,d(x,_,w,O))}):O()}})}}dP.exports=h})()});var qw=m(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});rl.Server=rl.BaseServer=void 0;var hP=zb(),Em=lw(),Dse=require("events"),fP=dw(),Mse=fr(),Pse=eM(),Bse=kw(),mP=uw(),Ise=x1(),be=(0,Mse.default)("engine"),el=Symbol("responseHeaders");function Nse(t){try{let e=JSON.parse(t);if(typeof e.sid=="string")return e.sid}catch{}}var tl=class extends Dse.EventEmitter{constructor(e={}){super(),this.middlewares=[],this.clients={},this.clientsCount=0,this.opts=Object.assign({wsEngine:Bse.Server,pingTimeout:2e4,pingInterval:25e3,upgradeTimeout:1e4,maxHttpBufferSize:1e6,transports:["polling","websocket"],allowUpgrades:!0,httpCompression:{threshold:1024},cors:!1,allowEIO3:!1},e),e.cookie&&(this.opts.cookie=Object.assign({name:"io",path:"/",httpOnly:e.cookie.path!==!1,sameSite:"lax"},e.cookie)),this.opts.cors&&this.use(Fw()(this.opts.cors)),e.perMessageDeflate&&(this.opts.perMessageDeflate=Object.assign({threshold:1024},e.perMessageDeflate)),this.init()}_computePath(e){let r=(e.path||"/engine.io").replace(/\/$/,"");return e.addTrailingSlash!==!1&&(r+="/"),r}upgrades(e){return this.opts.allowUpgrades?Em.default[e].upgradesTo||[]:[]}verify(e,r,n){let s=e._query.transport;if(!~this.opts.transports.indexOf(s)||s==="webtransport")return be('unknown transport "%s"',s),n(ht.errors.UNKNOWN_TRANSPORT,{transport:s});if(kse(e.headers.origin)){let a=e.headers.origin;return e.headers.origin=null,be("origin header invalid"),n(ht.errors.BAD_REQUEST,{name:"INVALID_ORIGIN",origin:a})}let o=e._query.sid;if(o){if(!this.clients.hasOwnProperty(o))return be('unknown sid "%s"',o),n(ht.errors.UNKNOWN_SID,{sid:o});let a=this.clients[o].transport.name;if(!r&&a!==s)return be("bad request: unexpected transport without upgrade"),n(ht.errors.BAD_REQUEST,{name:"TRANSPORT_MISMATCH",transport:s,previousTransport:a})}else return e.method!=="GET"?n(ht.errors.BAD_HANDSHAKE_METHOD,{method:e.method}):s==="websocket"&&!r?(be("invalid transport upgrade"),n(ht.errors.BAD_REQUEST,{name:"TRANSPORT_HANDSHAKE_ERROR"})):this.opts.allowRequest?this.opts.allowRequest(e,(a,u)=>{if(!u)return n(ht.errors.FORBIDDEN,{message:a});n()}):n();n()}use(e){this.middlewares.push(e)}_applyMiddlewares(e,r,n){if(this.middlewares.length===0)return be("no middleware to apply, skipping"),n();let s=i=>{be("applying middleware n\xB0%d",i+1),this.middlewares[i](e,r,o=>{if(o)return n(o);i+1<this.middlewares.length?s(i+1):n()})};s(0)}close(){be("closing all open clients");for(let e in this.clients)this.clients.hasOwnProperty(e)&&this.clients[e].close(!0);return this.cleanup(),this}generateId(e){return hP.generateId()}async handshake(e,r,n){let s=r._query.EIO==="4"?4:3;if(s===3&&!this.opts.allowEIO3){be("unsupported protocol version"),this.emit("connection_error",{req:r,code:ht.errors.UNSUPPORTED_PROTOCOL_VERSION,message:ht.errorMessages[ht.errors.UNSUPPORTED_PROTOCOL_VERSION],context:{protocol:s}}),n(ht.errors.UNSUPPORTED_PROTOCOL_VERSION);return}let i;try{i=await this.generateId(r)}catch(u){be("error while generating an id"),this.emit("connection_error",{req:r,code:ht.errors.BAD_REQUEST,message:ht.errorMessages[ht.errors.BAD_REQUEST],context:{name:"ID_GENERATION_ERROR",error:u}}),n(ht.errors.BAD_REQUEST);return}be('handshaking client "%s"',i);try{var o=this.createTransport(e,r);e==="polling"?(o.maxHttpBufferSize=this.opts.maxHttpBufferSize,o.httpCompression=this.opts.httpCompression):e==="websocket"&&(o.perMessageDeflate=this.opts.perMessageDeflate)}catch(u){be('error handshaking to transport "%s"',e),this.emit("connection_error",{req:r,code:ht.errors.BAD_REQUEST,message:ht.errorMessages[ht.errors.BAD_REQUEST],context:{name:"TRANSPORT_HANDSHAKE_ERROR",error:u}}),n(ht.errors.BAD_REQUEST);return}let a=new fP.Socket(i,this,o,r,s);return o.on("headers",(u,c)=>{!c._query.sid&&(this.opts.cookie&&(u["Set-Cookie"]=[(0,Pse.serialize)(this.opts.cookie.name,i,this.opts.cookie)]),this.emit("initial_headers",u,c)),this.emit("headers",u,c)}),o.onRequest(r),this.clients[i]=a,this.clientsCount++,a.once("close",()=>{delete this.clients[i],this.clientsCount--}),this.emit("connection",a),o}async onWebTransportSession(e){let r=setTimeout(()=>{be("the client failed to establish a bidirectional stream in the given period"),e.close()},this.opts.upgradeTimeout),s=await e.incomingBidirectionalStreams.getReader().read();if(s.done){be("session is closed");return}let i=s.value,o=(0,Ise.createPacketDecoderStream)(this.opts.maxHttpBufferSize,"nodebuffer"),a=i.readable.pipeThrough(o).getReader(),{value:u,done:c}=await a.read();if(c){be("stream is closed");return}if(clearTimeout(r),u.type!=="open")return be("invalid WebTransport handshake"),e.close();if(u.data===void 0){let d=new mP.WebTransport(e,i,a),h=hP.generateId();be('handshaking client "%s" (WebTransport)',h);let f=new fP.Socket(h,this,d,null,4);this.clients[h]=f,this.clientsCount++,f.once("close",()=>{delete this.clients[h],this.clientsCount--}),this.emit("connection",f);return}let l=Nse(u.data);if(!l)return be("invalid WebTransport handshake"),e.close();let p=this.clients[l];if(!p)be("upgrade attempt for closed client"),e.close();else if(p.upgrading)be("transport has already been trying to upgrade"),e.close();else if(p.upgraded)be("transport had already been upgraded"),e.close();else{be("upgrading existing transport");let d=new mP.WebTransport(e,i,a);p._maybeUpgrade(d)}}};rl.BaseServer=tl;tl.errors={UNKNOWN_TRANSPORT:0,UNKNOWN_SID:1,BAD_HANDSHAKE_METHOD:2,BAD_REQUEST:3,FORBIDDEN:4,UNSUPPORTED_PROTOCOL_VERSION:5};tl.errorMessages={0:"Transport unknown",1:"Session ID unknown",2:"Bad handshake method",3:"Bad request",4:"Forbidden",5:"Unsupported protocol version"};var $w=class{constructor(e,r){this.req=e,this.socket=r,e[el]={}}setHeader(e,r){this.req[el][e]=r}getHeader(e){return this.req[el][e]}removeHeader(e){delete this.req[el][e]}write(){}writeHead(){}end(){this.socket.destroy()}},ht=class t extends tl{init(){~this.opts.transports.indexOf("websocket")&&(this.ws&&this.ws.close(),this.ws=new this.opts.wsEngine({noServer:!0,clientTracking:!1,perMessageDeflate:this.opts.perMessageDeflate,maxPayload:this.opts.maxHttpBufferSize}),typeof this.ws.on=="function"&&this.ws.on("headers",(e,r)=>{let n=r[el]||{};delete r[el],!r._query.sid&&this.emit("initial_headers",n,r),this.emit("headers",n,r),be("writing headers: %j",n),Object.keys(n).forEach(i=>{e.push(`${i}: ${n[i]}`)})}))}cleanup(){this.ws&&(be("closing webSocketServer"),this.ws.close())}prepare(e){if(!e._query){let r=new URL(e.url,"https://socket.io");e._query=Object.fromEntries(r.searchParams.entries())}}createTransport(e,r){return new Em.default[e](r)}handleRequest(e,r){be('handling "%s" http request "%s"',e.method,e.url),this.prepare(e),e.res=r;let n=(s,i)=>{if(s!==void 0){this.emit("connection_error",{req:e,code:s,message:t.errorMessages[s],context:i}),yP(r,s,i);return}if(e._query.sid)be("setting new request for existing client"),this.clients[e._query.sid].transport.onRequest(e);else{let o=(a,u)=>yP(r,a,u);this.handshake(e._query.transport,e,o)}};this._applyMiddlewares(e,r,s=>{s?n(t.errors.BAD_REQUEST,{name:"MIDDLEWARE_FAILURE"}):this.verify(e,!1,n)})}handleUpgrade(e,r,n){this.prepare(e);let s=new $w(e,r),i=(o,a)=>{if(o!==void 0){this.emit("connection_error",{req:e,code:o,message:t.errorMessages[o],context:a}),gP(r,o,a);return}let u=Buffer.from(n);n=null,s.writeHead(),this.ws.handleUpgrade(e,r,u,c=>{this.onWebSocket(e,r,c)})};this._applyMiddlewares(e,s,o=>{o?i(t.errors.BAD_REQUEST,{name:"MIDDLEWARE_FAILURE"}):this.verify(e,!0,i)})}onWebSocket(e,r,n){if(n.on("error",i),Em.default[e._query.transport]!==void 0&&!Em.default[e._query.transport].prototype.handlesUpgrades){be("transport doesnt handle upgraded requests"),n.close();return}let s=e._query.sid;if(e.websocket=n,s){let o=this.clients[s];if(!o)be("upgrade attempt for closed client"),n.close();else if(o.upgrading)be("transport has already been trying to upgrade"),n.close();else if(o.upgraded)be("transport had already been upgraded"),n.close();else{be("upgrading existing transport"),n.removeListener("error",i);let a=this.createTransport(e._query.transport,e);a.perMessageDeflate=this.opts.perMessageDeflate,o._maybeUpgrade(a)}}else{let o=(a,u)=>gP(r,a,u);this.handshake(e._query.transport,e,o)}function i(){be("websocket error before upgrade")}}attach(e,r={}){let n=this._computePath(r),s=r.destroyUpgradeTimeout||1e3;function i(a){return n===a.url.slice(0,n.length)}let o=e.listeners("request").slice(0);e.removeAllListeners("request"),e.on("close",this.close.bind(this)),e.on("listening",this.init.bind(this)),e.on("request",(a,u)=>{if(i(a))be('intercepting request for path "%s"',n),this.handleRequest(a,u);else{let c=0,l=o.length;for(;c<l;c++)o[c].call(e,a,u)}}),~this.opts.transports.indexOf("websocket")&&e.on("upgrade",(a,u,c)=>{i(a)?this.handleUpgrade(a,u,c):r.destroyUpgrade!==!1&&setTimeout(function(){if(u.writable&&u.bytesWritten<=0)return u.on("error",l=>{be("error while destroying upgrade: %s",l.message)}),u.end()},s)})}};rl.Server=ht;function yP(t,e,r){let n=e===ht.errors.FORBIDDEN?403:400,s=r&&r.message?r.message:ht.errorMessages[e];t.writeHead(n,{"Content-Type":"application/json"}),t.end(JSON.stringify({code:e,message:s}))}function gP(t,e,r={}){if(t.on("error",()=>{be("ignoring error from closed connection")}),t.writable){let n=r.message||ht.errorMessages[e],s=Buffer.byteLength(n);t.write(`HTTP/1.1 400 Bad Request\r
Connection: close\r
Content-type: text/html\r
Content-Length: `+s+`\r
\r
`+n)}t.destroy()}var R1=[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];function kse(t){if(t+="",t.length<1)return!1;if(!R1[t.charCodeAt(0)])return be('invalid header, index 0, char "%s"',t.charCodeAt(0)),!0;if(t.length<2)return!1;if(!R1[t.charCodeAt(1)])return be('invalid header, index 1, char "%s"',t.charCodeAt(1)),!0;if(t.length<3)return!1;if(!R1[t.charCodeAt(2)])return be('invalid header, index 2, char "%s"',t.charCodeAt(2)),!0;if(t.length<4)return!1;if(!R1[t.charCodeAt(3)])return be('invalid header, index 3, char "%s"',t.charCodeAt(3)),!0;for(let e=4;e<t.length;++e)if(!R1[t.charCodeAt(e)])return be('invalid header, index "%i", char "%s"',e,t.charCodeAt(e)),!0;return!1}});var EP=m(bm=>{"use strict";Object.defineProperty(bm,"__esModule",{value:!0});bm.Polling=void 0;var Rse=hu(),_P=require("zlib"),Fse=Lf(),$se=fr(),Es=(0,$se.default)("engine:polling"),qse={gzip:_P.createGzip,deflate:_P.createDeflate},jw=class extends Rse.Transport{constructor(e){super(e),this.closeTimeout=30*1e3}get name(){return"polling"}onRequest(e){let r=e.res;e.res=null,e.getMethod()==="get"?this.onPollRequest(e,r):e.getMethod()==="post"?this.onDataRequest(e,r):(r.writeStatus("500 Internal Server Error"),r.end())}onPollRequest(e,r){if(this.req){Es("request overlap"),this.onError("overlap from client"),r.writeStatus("500 Internal Server Error"),r.end();return}Es("setting request"),this.req=e,this.res=r;let n=()=>{this.writable=!1,this.onError("poll connection closed prematurely")},s=()=>{this.req=this.res=null};e.cleanup=s,r.onAborted(n),this.writable=!0,this.emit("ready"),this.writable&&this.shouldClose&&(Es("triggering empty send to append close packet"),this.send([{type:"noop"}]))}onDataRequest(e,r){if(this.dataReq){this.onError("data request overlap from client"),r.writeStatus("500 Internal Server Error"),r.end();return}let n=Number(e.headers["content-length"]);if(!n){this.onError("content-length header required"),r.writeStatus("411 Length Required").end();return}if(n>this.maxHttpBufferSize){this.onError("payload too large"),r.writeStatus("413 Payload Too Large").end();return}if(e.headers["content-type"]==="application/octet-stream"&&this.protocol===4)return this.onError("invalid content");this.dataReq=e,this.dataRes=r;let i,o=0,a={"Content-Type":"text/html"};this.headers(e,a);for(let c in a)r.writeHeader(c,String(a[c]));let u=c=>{this.onData(c.toString()),this.onDataRequestCleanup(),r.cork(()=>{r.end("ok")})};r.onAborted(()=>{this.onDataRequestCleanup(),this.onError("data request connection closed prematurely")}),r.onData((c,l)=>{let p=o+c.byteLength;if(p>n){this.onError("content-length mismatch"),r.close();return}if(!i){if(l){u(Buffer.from(c));return}i=Buffer.allocUnsafe(n)}if(Buffer.from(c).copy(i,o),l){if(p!=n){this.onError("content-length mismatch"),r.writeStatus("400 Content-Length Mismatch").end(),this.onDataRequestCleanup();return}u(i);return}o=p})}onDataRequestCleanup(){this.dataReq=this.dataRes=null}onData(e){Es('received "%s"',e);let r=n=>{if(n.type==="close")return Es("got xhr close packet"),this.onClose(),!1;this.onPacket(n)};this.protocol===3?this.parser.decodePayload(e,r):this.parser.decodePayload(e).forEach(r)}onClose(){this.writable&&this.send([{type:"noop"}]),super.onClose()}send(e){this.writable=!1,this.shouldClose&&(Es("appending close packet to payload"),e.push({type:"close"}),this.shouldClose(),this.shouldClose=null);let r=n=>{let s=e.some(i=>i.options&&i.options.compress);this.write(n,{compress:s})};this.protocol===3?this.parser.encodePayload(e,this.supportsBinary,r):this.parser.encodePayload(e,r)}write(e,r){Es('writing "%s"',e),this.doWrite(e,r,()=>{this.req.cleanup(),this.emit("drain")})}doWrite(e,r,n){let s=typeof e=="string",o={"Content-Type":s?"text/plain; charset=UTF-8":"application/octet-stream"},a=l=>{this.headers(this.req,o),this.res.cork(()=>{Object.keys(o).forEach(p=>{this.res.writeHeader(p,String(o[p]))}),this.res.end(l)}),n()};if(!this.httpCompression||!r.compress){a(e);return}if((s?Buffer.byteLength(e):e.length)<this.httpCompression.threshold){a(e);return}let c=Fse(this.req).encodings(["gzip","deflate"]);if(!c){a(e);return}this.compress(e,c,(l,p)=>{if(l){this.res.writeStatus("500 Internal Server Error"),this.res.end(),n(l);return}o["Content-Encoding"]=c,a(p)})}compress(e,r,n){Es("compressing");let s=[],i=0;qse[r](this.httpCompression).on("error",n).on("data",function(o){s.push(o),i+=o.length}).on("end",function(){n(null,Buffer.concat(s,i))}).end(e)}doClose(e){Es("closing");let r,n=()=>{clearTimeout(r),e(),this.onClose()};this.writable?(Es("transport writable - closing right away"),this.send([{type:"close"}]),n()):this.discarded?(Es("transport discarded - closing right away"),n()):(Es("transport not writable - buffering orderly close"),this.shouldClose=n,r=setTimeout(n,this.closeTimeout))}headers(e,r){r=r||{};let n=e.headers["user-agent"];return n&&(~n.indexOf(";MSIE")||~n.indexOf("Trident/"))&&(r["X-XSS-Protection"]="0"),r["cache-control"]="no-store",this.emit("headers",r,e),r}};bm.Polling=jw});var wP=m(wm=>{"use strict";Object.defineProperty(wm,"__esModule",{value:!0});wm.WebSocket=void 0;var jse=hu(),Lse=fr(),bP=(0,Lse.default)("engine:ws"),Lw=class extends jse.Transport{constructor(e){super(e),this.writable=!1,this.perMessageDeflate=null}get name(){return"websocket"}get handlesUpgrades(){return!0}send(e){this.writable=!1;for(let r=0;r<e.length;r++){let n=e[r],s=r+1===e.length,i=o=>{let a=typeof o!="string",u=this.perMessageDeflate&&Buffer.byteLength(o)>this.perMessageDeflate.threshold;bP('writing "%s"',o),this.socket.send(o,a,u),s&&(this.emit("drain"),this.writable=!0,this.emit("ready"))};n.options&&typeof n.options.wsPreEncoded=="string"?i(n.options.wsPreEncoded):this.parser.encodePacket(n,this.supportsBinary,i)}}doClose(e){bP("closing"),e&&e(),this.socket.end()}};wm.WebSocket=Lw});var SP=m(Uw=>{"use strict";Object.defineProperty(Uw,"__esModule",{value:!0});var Use=EP(),Vse=wP();Uw.default={polling:Use.Polling,websocket:Vse.WebSocket}});var AP=m(Sm=>{"use strict";Object.defineProperty(Sm,"__esModule",{value:!0});Sm.uServer=void 0;var Wse=fr(),Eu=qw(),zse=SP(),oa=(0,Wse.default)("engine:uws"),Vw=class extends Eu.BaseServer{init(){}cleanup(){}prepare(e,r){e.method=e.getMethod().toUpperCase(),e.url=e.getUrl();let n=new URLSearchParams(e.getQuery());e._query=Object.fromEntries(n.entries()),e.headers={},e.forEach((s,i)=>{e.headers[s]=i}),e.connection={remoteAddress:Buffer.from(r.getRemoteAddressAsText()).toString()},r.onAborted(()=>{oa("response has been aborted")})}createTransport(e,r){return new zse.default[e](r)}attach(e,r={}){let n=this._computePath(r);e.any(n,this.handleRequest.bind(this)).ws(n,{compression:r.compression,idleTimeout:r.idleTimeout,maxBackpressure:r.maxBackpressure,maxPayloadLength:this.opts.maxHttpBufferSize,upgrade:this.handleUpgrade.bind(this),open:s=>{let i=s.getUserData().transport;i.socket=s,i.writable=!0,i.emit("ready")},message:(s,i,o)=>{s.getUserData().transport.onData(o?i:Buffer.from(i).toString())},close:(s,i,o)=>{s.getUserData().transport.onClose(i,o)}})}_applyMiddlewares(e,r,n){if(this.middlewares.length===0)return n();e.res=new Ww(r),super._applyMiddlewares(e,e.res,s=>{e.res.writeHead(),n(s)})}handleRequest(e,r){oa('handling "%s" http request "%s"',r.getMethod(),r.getUrl()),this.prepare(r,e),r.res=e;let n=(s,i)=>{if(s!==void 0){this.emit("connection_error",{req:r,code:s,message:Eu.Server.errorMessages[s],context:i}),this.abortRequest(r.res,s,i);return}if(r._query.sid)oa("setting new request for existing client"),this.clients[r._query.sid].transport.onRequest(r);else{let o=(a,u)=>this.abortRequest(e,a,u);this.handshake(r._query.transport,r,o)}};this._applyMiddlewares(r,e,s=>{s?n(Eu.Server.errors.BAD_REQUEST,{name:"MIDDLEWARE_FAILURE"}):this.verify(r,!1,n)})}handleUpgrade(e,r,n){oa("on upgrade"),this.prepare(r,e),r.res=e;let s=async(i,o)=>{if(i!==void 0){this.emit("connection_error",{req:r,code:i,message:Eu.Server.errorMessages[i],context:o}),this.abortRequest(e,i,o);return}let a=r._query.sid,u;if(a){let c=this.clients[a];if(c){if(c.upgrading)return oa("transport has already been trying to upgrade"),e.close();if(c.upgraded)return oa("transport had already been upgraded"),e.close();oa("upgrading existing transport"),u=this.createTransport(r._query.transport,r),c._maybeUpgrade(u)}else return oa("upgrade attempt for closed client"),e.close()}else if(u=await this.handshake(r._query.transport,r,(c,l)=>this.abortRequest(e,c,l)),!u)return;r.res.writeStatus("101 Switching Protocols"),e.upgrade({transport:u},r.getHeader("sec-websocket-key"),r.getHeader("sec-websocket-protocol"),r.getHeader("sec-websocket-extensions"),n)};this._applyMiddlewares(r,e,i=>{i?s(Eu.Server.errors.BAD_REQUEST,{name:"MIDDLEWARE_FAILURE"}):this.verify(r,!0,s)})}abortRequest(e,r,n){let s=r===Eu.Server.errors.FORBIDDEN?"403 Forbidden":"400 Bad Request",i=n&&n.message?n.message:Eu.Server.errorMessages[r];e.writeStatus(s),e.writeHeader("Content-Type","application/json"),e.end(JSON.stringify({code:r,message:i}))}};Sm.uServer=Vw;var Ww=class{constructor(e){this.res=e,this.statusWritten=!1,this.headers=[],this.isAborted=!1}set statusCode(e){e&&this.writeStatus(e===200?"200 OK":"204 No Content")}writeHead(e){this.statusCode=e}setHeader(e,r){Array.isArray(r)?r.forEach(n=>{this.writeHeader(e,n)}):this.writeHeader(e,r)}removeHeader(){}getHeader(){}writeStatus(e){if(!this.isAborted)return this.res.writeStatus(e),this.statusWritten=!0,this.writeBufferedHeaders(),this}writeHeader(e,r){this.isAborted||e!=="Content-Length"&&(this.statusWritten?this.res.writeHeader(e,r):this.headers.push([e,r]))}writeBufferedHeaders(){this.headers.forEach(([e,r])=>{this.res.writeHeader(e,r)})}end(e){this.isAborted||this.res.cork(()=>{this.statusWritten||this.writeBufferedHeaders(),this.res.end(e)})}onData(e){this.isAborted||this.res.onData(e)}onAborted(e){this.isAborted||this.res.onAborted(()=>{this.isAborted=!0,e()})}cork(e){this.isAborted||this.res.cork(e)}}});var xP=m(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.protocol=yr.Transport=yr.Socket=yr.uServer=yr.parser=yr.transports=yr.Server=void 0;yr.listen=Qse;yr.attach=vP;var Kse=require("http"),OP=qw();Object.defineProperty(yr,"Server",{enumerable:!0,get:function(){return OP.Server}});var Hse=lw();yr.transports=Hse.default;var CP=x1();yr.parser=CP;var Gse=AP();Object.defineProperty(yr,"uServer",{enumerable:!0,get:function(){return Gse.uServer}});var Jse=dw();Object.defineProperty(yr,"Socket",{enumerable:!0,get:function(){return Jse.Socket}});var Yse=hu();Object.defineProperty(yr,"Transport",{enumerable:!0,get:function(){return Yse.Transport}});yr.protocol=CP.protocol;function Qse(t,e,r){typeof e=="function"&&(r=e,e={});let n=(0,Kse.createServer)(function(i,o){o.writeHead(501),o.end("Not Implemented")}),s=vP(n,e);return s.httpServer=n,n.listen(t,r),s}function vP(t,e){let r=new OP.Server(e);return r.attach(t,e),r}});var DP=m(TP=>{TP.Emitter=ln;function ln(t){if(t)return Xse(t)}function Xse(t){for(var e in ln.prototype)t[e]=ln.prototype[e];return t}ln.prototype.on=ln.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};ln.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this};ln.prototype.off=ln.prototype.removeListener=ln.prototype.removeAllListeners=ln.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,s=0;s<r.length;s++)if(n=r[s],n===e||n.fn===e){r.splice(s,1);break}return r.length===0&&delete this._callbacks["$"+t],this};ln.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,s=r.length;n<s;++n)r[n].apply(this,e)}return this};ln.prototype.emitReserved=ln.prototype.emit;ln.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};ln.prototype.hasListeners=function(t){return!!this.listeners(t).length}});var zw=m(Om=>{"use strict";Object.defineProperty(Om,"__esModule",{value:!0});Om.isBinary=PP;Om.hasBinary=Am;var Zse=typeof ArrayBuffer=="function",eie=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,MP=Object.prototype.toString,tie=typeof Blob=="function"||typeof Blob<"u"&&MP.call(Blob)==="[object BlobConstructor]",rie=typeof File=="function"||typeof File<"u"&&MP.call(File)==="[object FileConstructor]";function PP(t){return Zse&&(t instanceof ArrayBuffer||eie(t))||tie&&t instanceof Blob||rie&&t instanceof File}function Am(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(Am(t[r]))return!0;return!1}if(PP(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Am(t.toJSON(),!0);for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&Am(t[r]))return!0;return!1}});var BP=m(Cm=>{"use strict";Object.defineProperty(Cm,"__esModule",{value:!0});Cm.deconstructPacket=sie;Cm.reconstructPacket=iie;var nie=zw();function sie(t){let e=[],r=t.data,n=t;return n.data=Kw(r,e),n.attachments=e.length,{packet:n,buffers:e}}function Kw(t,e){if(!t)return t;if((0,nie.isBinary)(t)){let r={_placeholder:!0,num:e.length};return e.push(t),r}else if(Array.isArray(t)){let r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=Kw(t[n],e);return r}else if(typeof t=="object"&&!(t instanceof Date)){let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=Kw(t[n],e));return r}return t}function iie(t,e){return t.data=Hw(t.data,e),delete t.attachments,t}function Hw(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=Hw(t[r],e);else if(typeof t=="object")for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=Hw(t[r],e));return t}});var F1=m(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});Gs.Decoder=Gs.Encoder=Gs.PacketType=Gs.protocol=void 0;Gs.isPacketValid=die;var oie=DP(),IP=BP(),NP=zw(),aie=fr(),Gw=(0,aie.default)("socket.io-parser"),kP=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];Gs.protocol=5;var Qe;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Qe||(Gs.PacketType=Qe={}));var Jw=class{constructor(e){this.replacer=e}encode(e){return Gw("encoding packet %j",e),(e.type===Qe.EVENT||e.type===Qe.ACK)&&(0,NP.hasBinary)(e)?this.encodeAsBinary({type:e.type===Qe.EVENT?Qe.BINARY_EVENT:Qe.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let r=""+e.type;return(e.type===Qe.BINARY_EVENT||e.type===Qe.BINARY_ACK)&&(r+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(r+=e.nsp+","),e.id!=null&&(r+=e.id),e.data!=null&&(r+=JSON.stringify(e.data,this.replacer)),Gw("encoded %j as %s",e,r),r}encodeAsBinary(e){let r=(0,IP.deconstructPacket)(e),n=this.encodeAsString(r.packet),s=r.buffers;return s.unshift(n),s}};Gs.Encoder=Jw;var Yw=class t extends oie.Emitter{constructor(e){super(),this.reviver=e}add(e){let r;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(e);let n=r.type===Qe.BINARY_EVENT;n||r.type===Qe.BINARY_ACK?(r.type=n?Qe.EVENT:Qe.ACK,this.reconstructor=new Qw(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if((0,NP.isBinary)(e)||e.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(e),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let r=0,n={type:Number(e.charAt(0))};if(Qe[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Qe.BINARY_EVENT||n.type===Qe.BINARY_ACK){let i=r+1;for(;e.charAt(++r)!=="-"&&r!=e.length;);let o=e.substring(i,r);if(o!=Number(o)||e.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(e.charAt(r+1)==="/"){let i=r+1;for(;++r&&!(e.charAt(r)===","||r===e.length););n.nsp=e.substring(i,r)}else n.nsp="/";let s=e.charAt(r+1);if(s!==""&&Number(s)==s){let i=r+1;for(;++r;){let o=e.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===e.length)break}n.id=Number(e.substring(i,r+1))}if(e.charAt(++r)){let i=this.tryParse(e.substr(r));if(t.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return Gw("decoded %s as %j",e,n),n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,r){switch(e){case Qe.CONNECT:return vm(r);case Qe.DISCONNECT:return r===void 0;case Qe.CONNECT_ERROR:return typeof r=="string"||vm(r);case Qe.EVENT:case Qe.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&kP.indexOf(r[0])===-1);case Qe.ACK:case Qe.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}};Gs.Decoder=Yw;var Qw=class{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){let r=(0,IP.reconstructPacket)(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function uie(t){return typeof t=="string"}var cie=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};function lie(t){return t===void 0||cie(t)}function vm(t){return Object.prototype.toString.call(t)==="[object Object]"}function pie(t,e){switch(t){case Qe.CONNECT:return e===void 0||vm(e);case Qe.DISCONNECT:return e===void 0;case Qe.EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&kP.indexOf(e[0])===-1);case Qe.ACK:return Array.isArray(e);case Qe.CONNECT_ERROR:return typeof e=="string"||vm(e);default:return!1}}function die(t){return uie(t.nsp)&&lie(t.id)&&pie(t.type,t.data)}});var RP=m(nl=>{"use strict";var hie=nl&&nl.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nl,"__esModule",{value:!0});nl.Client=void 0;var xm=F1(),fie=hie(fr()),Js=(0,fie.default)("socket.io:client"),Xw=class{constructor(e,r){this.sockets=new Map,this.nsps=new Map,this.server=e,this.conn=r,this.encoder=e.encoder,this.decoder=new e._parser.Decoder,this.id=r.id,this.setup()}get request(){return this.conn.request}setup(){this.onclose=this.onclose.bind(this),this.ondata=this.ondata.bind(this),this.onerror=this.onerror.bind(this),this.ondecoded=this.ondecoded.bind(this),this.decoder.on("decoded",this.ondecoded),this.conn.on("data",this.ondata),this.conn.on("error",this.onerror),this.conn.on("close",this.onclose),this.connectTimeout=setTimeout(()=>{this.nsps.size===0?(Js("no namespace joined yet, close the client"),this.close()):Js("the client has already joined a namespace, nothing to do")},this.server._connectTimeout)}connect(e,r={}){if(this.server._nsps.has(e))return Js("connecting to namespace %s",e),this.doConnect(e,r);this.server._checkNamespace(e,r,n=>{n?this.doConnect(e,r):(Js("creation of namespace %s was denied",e),this._packet({type:xm.PacketType.CONNECT_ERROR,nsp:e,data:{message:"Invalid namespace"}}))})}doConnect(e,r){let n=this.server.of(e);n._add(this,r,s=>{this.sockets.set(s.id,s),this.nsps.set(n.name,s),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=void 0)})}_disconnect(){for(let e of this.sockets.values())e.disconnect();this.sockets.clear(),this.close()}_remove(e){if(this.sockets.has(e.id)){let r=this.sockets.get(e.id).nsp.name;this.sockets.delete(e.id),this.nsps.delete(r)}else Js("ignoring remove for %s",e.id)}close(){this.conn.readyState==="open"&&(Js("forcing transport close"),this.conn.close(),this.onclose("forced server close"))}_packet(e,r={}){if(this.conn.readyState!=="open"){Js("ignoring packet write %j",e);return}let n=r.preEncoded?e:this.encoder.encode(e);this.writeToEngine(n,r)}writeToEngine(e,r){if(r.volatile&&!this.conn.transport.writable){Js("volatile packet is discarded since the transport is not currently writable");return}let n=Array.isArray(e)?e:[e];for(let s of n)this.conn.write(s,r)}ondata(e){try{this.decoder.add(e)}catch(r){Js("invalid packet format"),this.onerror(r)}}ondecoded(e){let{namespace:r,authPayload:n}=this._parseNamespace(e),s=this.nsps.get(r);!s&&e.type===xm.PacketType.CONNECT?this.connect(r,n):s&&e.type!==xm.PacketType.CONNECT&&e.type!==xm.PacketType.CONNECT_ERROR?process.nextTick(function(){s._onpacket(e)}):(Js("invalid state (packet type: %s)",e.type),this.close())}_parseNamespace(e){if(this.conn.protocol!==3)return{namespace:e.nsp,authPayload:e.data};let r=new URL(e.nsp,"https://socket.io");return{namespace:r.pathname,authPayload:Object.fromEntries(r.searchParams.entries())}}onerror(e){for(let r of this.sockets.values())r._onerror(e);this.conn.close()}onclose(e,r){Js("client close with reason %s",e),this.destroy();for(let n of this.sockets.values())n._onclose(e,r);this.sockets.clear(),this.decoder.destroy()}destroy(){this.conn.removeListener("data",this.ondata),this.conn.removeListener("error",this.onerror),this.conn.removeListener("close",this.onclose),this.decoder.removeListener("decoded",this.ondecoded),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=void 0)}};nl.Client=Xw});var Dm=m(Tm=>{"use strict";Object.defineProperty(Tm,"__esModule",{value:!0});Tm.StrictEventEmitter=void 0;var mie=require("events"),Zw=class extends mie.EventEmitter{on(e,r){return super.on(e,r)}once(e,r){return super.once(e,r)}emit(e,...r){return super.emit(e,...r)}emitReserved(e,...r){return super.emit(e,...r)}emitUntyped(e,...r){return super.emit(e,...r)}listeners(e){return super.listeners(e)}};Tm.StrictEventEmitter=Zw});var eS=m(Mm=>{"use strict";Object.defineProperty(Mm,"__esModule",{value:!0});Mm.RESERVED_EVENTS=void 0;Mm.RESERVED_EVENTS=new Set(["connect","connect_error","disconnect","disconnecting","newListener","removeListener"])});var tS=m(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});sl.RemoteSocket=sl.BroadcastOperator=void 0;var yie=eS(),gie=F1(),Pm=class t{constructor(e,r=new Set,n=new Set,s={}){this.adapter=e,this.rooms=r,this.exceptRooms=n,this.flags=s}to(e){let r=new Set(this.rooms);return Array.isArray(e)?e.forEach(n=>r.add(n)):r.add(e),new t(this.adapter,r,this.exceptRooms,this.flags)}in(e){return this.to(e)}except(e){let r=new Set(this.exceptRooms);return Array.isArray(e)?e.forEach(n=>r.add(n)):r.add(e),new t(this.adapter,this.rooms,r,this.flags)}compress(e){let r=Object.assign({},this.flags,{compress:e});return new t(this.adapter,this.rooms,this.exceptRooms,r)}get volatile(){let e=Object.assign({},this.flags,{volatile:!0});return new t(this.adapter,this.rooms,this.exceptRooms,e)}get local(){let e=Object.assign({},this.flags,{local:!0});return new t(this.adapter,this.rooms,this.exceptRooms,e)}timeout(e){let r=Object.assign({},this.flags,{timeout:e});return new t(this.adapter,this.rooms,this.exceptRooms,r)}emit(e,...r){if(yie.RESERVED_EVENTS.has(e))throw new Error(`"${String(e)}" is a reserved event name`);let n=[e,...r],s={type:gie.PacketType.EVENT,data:n};if(!(typeof n[n.length-1]=="function"))return this.adapter.broadcast(s,{rooms:this.rooms,except:this.exceptRooms,flags:this.flags}),!0;let o=n.pop(),a=!1,u=[],c=setTimeout(()=>{a=!0,o.apply(this,[new Error("operation has timed out"),this.flags.expectSingleResponse?null:u])},this.flags.timeout),l=-1,p=0,d=0,h=()=>{!a&&l===p&&u.length===d&&(clearTimeout(c),o.apply(this,[null,this.flags.expectSingleResponse?u[0]:u]))};return this.adapter.broadcastWithAck(s,{rooms:this.rooms,except:this.exceptRooms,flags:this.flags},f=>{d+=f,p++,h()},f=>{u.push(f),h()}),this.adapter.serverCount().then(f=>{l=f,h()}),!0}emitWithAck(e,...r){return new Promise((n,s)=>{r.push((i,o)=>i?(i.responses=o,s(i)):n(o)),this.emit(e,...r)})}allSockets(){if(!this.adapter)throw new Error("No adapter for this namespace, are you trying to get the list of clients of a dynamic namespace?");return this.adapter.sockets(this.rooms)}fetchSockets(){return this.adapter.fetchSockets({rooms:this.rooms,except:this.exceptRooms,flags:this.flags}).then(e=>e.map(r=>r.server?r:new Bm(this.adapter,r)))}socketsJoin(e){this.adapter.addSockets({rooms:this.rooms,except:this.exceptRooms,flags:this.flags},Array.isArray(e)?e:[e])}socketsLeave(e){this.adapter.delSockets({rooms:this.rooms,except:this.exceptRooms,flags:this.flags},Array.isArray(e)?e:[e])}disconnectSockets(e=!1){this.adapter.disconnectSockets({rooms:this.rooms,except:this.exceptRooms,flags:this.flags},e)}};sl.BroadcastOperator=Pm;var Bm=class{constructor(e,r){this.id=r.id,this.handshake=r.handshake,this.rooms=new Set(r.rooms),this.data=r.data,this.operator=new Pm(e,new Set([this.id]),new Set,{expectSingleResponse:!0})}timeout(e){return this.operator.timeout(e)}emit(e,...r){return this.operator.emit(e,...r)}join(e){return this.operator.socketsJoin(e)}leave(e){return this.operator.socketsLeave(e)}disconnect(e=!1){return this.operator.disconnectSockets(e),this}};sl.RemoteSocket=Bm});var nS=m(il=>{"use strict";var qP=il&&il.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(il,"__esModule",{value:!0});il.Socket=void 0;var bs=F1(),_ie=qP(fr()),Eie=Dm(),FP=qP(zb()),bie=tS(),wie=eS(),Kr=(0,_ie.default)("socket.io:socket"),Sie=new Set(["transport error","transport close","forced close","ping timeout","server shutting down","forced server close"]);function $P(){}var rS=class extends Eie.StrictEventEmitter{constructor(e,r,n,s){super(),this.nsp=e,this.client=r,this.recovered=!1,this.data={},this.connected=!1,this.acks=new Map,this.fns=[],this.flags={},this.server=e.server,this.adapter=e.adapter,s?(this.id=s.sid,this.pid=s.pid,s.rooms.forEach(i=>this.join(i)),this.data=s.data,s.missedPackets.forEach(i=>{this.packet({type:bs.PacketType.EVENT,data:i})}),this.recovered=!0):(r.conn.protocol===3?this.id=e.name!=="/"?e.name+"#"+r.id:r.id:this.id=FP.default.generateId(),this.server._opts.connectionStateRecovery&&(this.pid=FP.default.generateId())),this.handshake=this.buildHandshake(n),this.on("error",$P)}buildHandshake(e){var r,n,s,i;return{headers:((r=this.request)===null||r===void 0?void 0:r.headers)||{},time:new Date+"",address:this.conn.remoteAddress,xdomain:!!(!((n=this.request)===null||n===void 0)&&n.headers.origin),secure:!this.request||!!this.request.connection.encrypted,issued:+new Date,url:(s=this.request)===null||s===void 0?void 0:s.url,query:((i=this.request)===null||i===void 0?void 0:i._query)||{},auth:e}}emit(e,...r){if(wie.RESERVED_EVENTS.has(e))throw new Error(`"${String(e)}" is a reserved event name`);let n=[e,...r],s={type:bs.PacketType.EVENT,data:n};if(typeof n[n.length-1]=="function"){let o=this.nsp._ids++;Kr("emitting packet with ack id %d",o),this.registerAckCallback(o,n.pop()),s.id=o}let i=Object.assign({},this.flags);return this.flags={},this.nsp.server.opts.connectionStateRecovery?this.adapter.broadcast(s,{rooms:new Set([this.id]),except:new Set,flags:i}):(this.notifyOutgoingListeners(s),this.packet(s,i)),!0}emitWithAck(e,...r){let n=this.flags.timeout!==void 0;return new Promise((s,i)=>{r.push((o,a)=>n?o?i(o):s(a):s(o)),this.emit(e,...r)})}registerAckCallback(e,r){let n=this.flags.timeout;if(n===void 0){this.acks.set(e,r);return}let s=setTimeout(()=>{Kr("event with ack id %d has timed out after %d ms",e,n),this.acks.delete(e),r.call(this,new Error("operation has timed out"))},n);this.acks.set(e,(...i)=>{clearTimeout(s),r.apply(this,[null,...i])})}to(e){return this.newBroadcastOperator().to(e)}in(e){return this.newBroadcastOperator().in(e)}except(e){return this.newBroadcastOperator().except(e)}send(...e){return this.emit("message",...e),this}write(...e){return this.emit("message",...e),this}packet(e,r={}){e.nsp=this.nsp.name,r.compress=r.compress!==!1,this.client._packet(e,r)}join(e){return Kr("join room %s",e),this.adapter.addAll(this.id,new Set(Array.isArray(e)?e:[e]))}leave(e){return Kr("leave room %s",e),this.adapter.del(this.id,e)}leaveAll(){this.adapter.delAll(this.id)}_onconnect(){Kr("socket connected - writing packet"),this.connected=!0,this.join(this.id),this.conn.protocol===3?this.packet({type:bs.PacketType.CONNECT}):this.packet({type:bs.PacketType.CONNECT,data:{sid:this.id,pid:this.pid}})}_onpacket(e){switch(Kr("got packet %j",e),e.type){case bs.PacketType.EVENT:this.onevent(e);break;case bs.PacketType.BINARY_EVENT:this.onevent(e);break;case bs.PacketType.ACK:this.onack(e);break;case bs.PacketType.BINARY_ACK:this.onack(e);break;case bs.PacketType.DISCONNECT:this.ondisconnect();break}}onevent(e){let r=e.data||[];if(Kr("emitting event %j",r),e.id!=null&&(Kr("attaching ack callback to event"),r.push(this.ack(e.id))),this._anyListeners&&this._anyListeners.length){let n=this._anyListeners.slice();for(let s of n)s.apply(this,r)}this.dispatch(r)}ack(e){let r=this,n=!1;return function(){if(n)return;let s=Array.prototype.slice.call(arguments);Kr("sending ack %j",s),r.packet({id:e,type:bs.PacketType.ACK,data:s}),n=!0}}onack(e){let r=this.acks.get(e.id);typeof r=="function"?(Kr("calling ack %s with %j",e.id,e.data),r.apply(this,e.data),this.acks.delete(e.id)):Kr("bad ack %s",e.id)}ondisconnect(){Kr("got disconnect packet"),this._onclose("client namespace disconnect")}_onerror(e){this.emitReserved("error",e)}_onclose(e,r){if(!this.connected)return this;Kr("closing socket - reason %s",e),this.emitReserved("disconnecting",e,r),this.server._opts.connectionStateRecovery&&Sie.has(e)&&(Kr("connection state recovery is enabled for sid %s",this.id),this.adapter.persistSession({sid:this.id,pid:this.pid,rooms:[...this.rooms],data:this.data})),this._cleanup(),this.client._remove(this),this.connected=!1,this.emitReserved("disconnect",e,r)}_cleanup(){this.leaveAll(),this.nsp._remove(this),this.join=$P}_error(e){this.packet({type:bs.PacketType.CONNECT_ERROR,data:e})}disconnect(e=!1){return this.connected?(e?this.client._disconnect():(this.packet({type:bs.PacketType.DISCONNECT}),this._onclose("server namespace disconnect")),this):this}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}get broadcast(){return this.newBroadcastOperator()}get local(){return this.newBroadcastOperator().local}timeout(e){return this.flags.timeout=e,this}dispatch(e){Kr("dispatching an event %j",e),this.run(e,r=>{process.nextTick(()=>{if(r)return this._onerror(r);this.connected?super.emitUntyped.apply(this,e):Kr("ignore packet received after disconnection")})})}use(e){return this.fns.push(e),this}run(e,r){if(!this.fns.length)return r();let n=this.fns.slice(0);function s(i){n[i](e,o=>{if(o)return r(o);if(!n[i+1])return r();s(i+1)})}s(0)}get disconnected(){return!this.connected}get request(){return this.client.request}get conn(){return this.client.conn}get rooms(){return this.adapter.socketRooms(this.id)||new Set}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let r=this._anyListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let r=this._anyOutgoingListeners.slice();for(let n of r)n.apply(this,e.data)}}newBroadcastOperator(){let e=Object.assign({},this.flags);return this.flags={},new bie.BroadcastOperator(this.adapter,new Set,new Set([this.id]),e)}};il.Socket=rS});var iS=m(po=>{"use strict";var Aie=po&&po.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(po,"__esModule",{value:!0});po.Namespace=po.RESERVED_EVENTS=void 0;var jP=nS(),Oie=Dm(),Cie=Aie(fr()),Qn=tS(),ol=(0,Cie.default)("socket.io:namespace");po.RESERVED_EVENTS=new Set(["connect","connection","new_namespace"]);var sS=class extends Oie.StrictEventEmitter{constructor(e,r){super(),this.sockets=new Map,this._preConnectSockets=new Map,this._fns=[],this._ids=0,this.server=e,this.name=r,this._initAdapter()}_initAdapter(){this.adapter=new(this.server.adapter())(this),Promise.resolve(this.adapter.init()).catch(e=>{ol("error while initializing adapter: %s",e)})}use(e){return this._fns.push(e),this}run(e,r){if(!this._fns.length)return r();let n=this._fns.slice(0);function s(i){n[i](e,o=>{if(o)return r(o);if(!n[i+1])return r();s(i+1)})}s(0)}to(e){return new Qn.BroadcastOperator(this.adapter).to(e)}in(e){return new Qn.BroadcastOperator(this.adapter).in(e)}except(e){return new Qn.BroadcastOperator(this.adapter).except(e)}async _add(e,r,n){var s;ol("adding socket to nsp %s",this.name);let i=await this._createSocket(e,r);if(this._preConnectSockets.set(i.id,i),!((s=this.server.opts.connectionStateRecovery)===null||s===void 0)&&s.skipMiddlewares&&i.recovered&&e.conn.readyState==="open")return this._doConnect(i,n);this.run(i,o=>{process.nextTick(()=>{if(e.conn.readyState!=="open"){ol("next called after client was closed - ignoring socket"),i._cleanup();return}if(o)return ol("middleware error, sending CONNECT_ERROR packet to the client"),i._cleanup(),e.conn.protocol===3?i._error(o.data||o.message):i._error({message:o.message,data:o.data});this._doConnect(i,n)})})}async _createSocket(e,r){let n=r.pid,s=r.offset;if(this.server.opts.connectionStateRecovery&&typeof n=="string"&&typeof s=="string"){let i;try{i=await this.adapter.restoreSession(n,s)}catch(o){ol("error while restoring session: %s",o)}if(i)return ol("connection state recovered for sid %s",i.sid),new jP.Socket(this,e,r,i)}return new jP.Socket(this,e,r)}_doConnect(e,r){this._preConnectSockets.delete(e.id),this.sockets.set(e.id,e),e._onconnect(),r&&r(e),this.emitReserved("connect",e),this.emitReserved("connection",e)}_remove(e){this.sockets.delete(e.id)||this._preConnectSockets.delete(e.id)}emit(e,...r){return new Qn.BroadcastOperator(this.adapter).emit(e,...r)}send(...e){return this.emit("message",...e),this}write(...e){return this.emit("message",...e),this}serverSideEmit(e,...r){if(po.RESERVED_EVENTS.has(e))throw new Error(`"${String(e)}" is a reserved event name`);return r.unshift(e),this.adapter.serverSideEmit(r),!0}serverSideEmitWithAck(e,...r){return new Promise((n,s)=>{r.push((i,o)=>i?(i.responses=o,s(i)):n(o)),this.serverSideEmit(e,...r)})}_onServerSideEmit(e){super.emitUntyped.apply(this,e)}allSockets(){return new Qn.BroadcastOperator(this.adapter).allSockets()}compress(e){return new Qn.BroadcastOperator(this.adapter).compress(e)}get volatile(){return new Qn.BroadcastOperator(this.adapter).volatile}get local(){return new Qn.BroadcastOperator(this.adapter).local}timeout(e){return new Qn.BroadcastOperator(this.adapter).timeout(e)}fetchSockets(){return new Qn.BroadcastOperator(this.adapter).fetchSockets()}socketsJoin(e){return new Qn.BroadcastOperator(this.adapter).socketsJoin(e)}socketsLeave(e){return new Qn.BroadcastOperator(this.adapter).socketsLeave(e)}disconnectSockets(e=!1){return new Qn.BroadcastOperator(this.adapter).disconnectSockets(e)}};po.Namespace=sS});var zP=m($1=>{"use strict";Object.defineProperty($1,"__esModule",{value:!0});$1.encode=oS;$1.decode=vie;$1.yeast=xie;var VP="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Im=64,WP={},LP=0,aa=0,UP;function oS(t){let e="";do e=VP[t%Im]+e,t=Math.floor(t/Im);while(t>0);return e}function vie(t){let e=0;for(aa=0;aa<t.length;aa++)e=e*Im+WP[t.charAt(aa)];return e}function xie(){let t=oS(+new Date);return t!==UP?(LP=0,UP=t):t+"."+oS(LP++)}for(;aa<Im;aa++)WP[VP[aa]]=aa});var cS=m(al=>{"use strict";var aS;Object.defineProperty(al,"__esModule",{value:!0});al.SessionAwareAdapter=al.Adapter=void 0;var Tie=require("events"),Die=zP(),Nm=kw(),Mie=typeof((aS=Nm?.Sender)===null||aS===void 0?void 0:aS.frame)=="function",km=class extends Tie.EventEmitter{constructor(e){super(),this.nsp=e,this.rooms=new Map,this.sids=new Map,this.encoder=e.server.encoder}init(){}close(){}serverCount(){return Promise.resolve(1)}addAll(e,r){this.sids.has(e)||this.sids.set(e,new Set);for(let n of r)this.sids.get(e).add(n),this.rooms.has(n)||(this.rooms.set(n,new Set),this.emit("create-room",n)),this.rooms.get(n).has(e)||(this.rooms.get(n).add(e),this.emit("join-room",n,e))}del(e,r){this.sids.has(e)&&this.sids.get(e).delete(r),this._del(r,e)}_del(e,r){let n=this.rooms.get(e);n!=null&&(n.delete(r)&&this.emit("leave-room",e,r),n.size===0&&this.rooms.delete(e)&&this.emit("delete-room",e))}delAll(e){if(this.sids.has(e)){for(let r of this.sids.get(e))this._del(r,e);this.sids.delete(e)}}broadcast(e,r){let n=r.flags||{},s={preEncoded:!0,volatile:n.volatile,compress:n.compress};e.nsp=this.nsp.name;let i=this._encode(e,s);this.apply(r,o=>{typeof o.notifyOutgoingListeners=="function"&&o.notifyOutgoingListeners(e),o.client.writeToEngine(i,s)})}broadcastWithAck(e,r,n,s){let i=r.flags||{},o={preEncoded:!0,volatile:i.volatile,compress:i.compress};e.nsp=this.nsp.name,e.id=this.nsp._ids++;let a=this._encode(e,o),u=0;this.apply(r,c=>{u++,c.acks.set(e.id,s),typeof c.notifyOutgoingListeners=="function"&&c.notifyOutgoingListeners(e),c.client.writeToEngine(a,o)}),n(u)}_encode(e,r){let n=this.encoder.encode(e);if(Mie&&n.length===1&&typeof n[0]=="string"){let s=Buffer.from("4"+n[0]);r.wsPreEncodedFrame=Nm.Sender.frame(s,{readOnly:!1,mask:!1,rsv1:!1,opcode:1,fin:!0})}return n}sockets(e){let r=new Set;return this.apply({rooms:e},n=>{r.add(n.id)}),Promise.resolve(r)}socketRooms(e){return this.sids.get(e)}fetchSockets(e){let r=[];return this.apply(e,n=>{r.push(n)}),Promise.resolve(r)}addSockets(e,r){this.apply(e,n=>{n.join(r)})}delSockets(e,r){this.apply(e,n=>{r.forEach(s=>n.leave(s))})}disconnectSockets(e,r){this.apply(e,n=>{n.disconnect(r)})}apply(e,r){let n=e.rooms,s=this.computeExceptSids(e.except);if(n.size){let i=new Set;for(let o of n)if(this.rooms.has(o))for(let a of this.rooms.get(o)){if(i.has(a)||s.has(a))continue;let u=this.nsp.sockets.get(a);u&&(r(u),i.add(a))}}else for(let[i]of this.sids){if(s.has(i))continue;let o=this.nsp.sockets.get(i);o&&r(o)}}computeExceptSids(e){let r=new Set;if(e&&e.size>0)for(let n of e)this.rooms.has(n)&&this.rooms.get(n).forEach(s=>r.add(s));return r}serverSideEmit(e){console.warn("this adapter does not support the serverSideEmit() functionality")}persistSession(e){}restoreSession(e,r){return null}};al.Adapter=km;var uS=class extends km{constructor(e){super(e),this.nsp=e,this.sessions=new Map,this.packets=[],this.maxDisconnectionDuration=e.server.opts.connectionStateRecovery.maxDisconnectionDuration,setInterval(()=>{let n=Date.now()-this.maxDisconnectionDuration;this.sessions.forEach((s,i)=>{s.disconnectedAt<n&&this.sessions.delete(i)});for(let s=this.packets.length-1;s>=0;s--)if(this.packets[s].emittedAt<n){this.packets.splice(0,s+1);break}},60*1e3).unref()}persistSession(e){e.disconnectedAt=Date.now(),this.sessions.set(e.pid,e)}restoreSession(e,r){let n=this.sessions.get(e);if(!n)return null;if(n.disconnectedAt+this.maxDisconnectionDuration<Date.now())return this.sessions.delete(e),null;let i=this.packets.findIndex(a=>a.id===r);if(i===-1)return null;let o=[];for(let a=i+1;a<this.packets.length;a++){let u=this.packets[a];Pie(n.rooms,u.opts)&&o.push(u.data)}return Promise.resolve(Object.assign(Object.assign({},n),{missedPackets:o}))}broadcast(e,r){var n;let s=e.type===2,i=e.id===void 0,o=((n=r.flags)===null||n===void 0?void 0:n.volatile)===void 0;if(s&&i&&o){let a=(0,Die.yeast)();e.data.push(a),this.packets.push({id:a,opts:r,data:e.data,emittedAt:Date.now()})}super.broadcast(e,r)}};al.SessionAwareAdapter=uS;function Pie(t,e){let r=e.rooms.size===0||t.some(s=>e.rooms.has(s)),n=t.every(s=>!e.except.has(s));return r&&n}});var KP=m(Ii=>{"use strict";var Bie=Ii&&Ii.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.ClusterAdapterWithHeartbeat=Ii.ClusterAdapter=Ii.MessageType=void 0;var Iie=cS(),Nie=fr(),kie=require("crypto"),wt=(0,Nie.debug)("socket.io-adapter"),Rie="emitter",Rm=5e3;function cl(){return(0,kie.randomBytes)(8).toString("hex")}var de;(function(t){t[t.INITIAL_HEARTBEAT=1]="INITIAL_HEARTBEAT",t[t.HEARTBEAT=2]="HEARTBEAT",t[t.BROADCAST=3]="BROADCAST",t[t.SOCKETS_JOIN=4]="SOCKETS_JOIN",t[t.SOCKETS_LEAVE=5]="SOCKETS_LEAVE",t[t.DISCONNECT_SOCKETS=6]="DISCONNECT_SOCKETS",t[t.FETCH_SOCKETS=7]="FETCH_SOCKETS",t[t.FETCH_SOCKETS_RESPONSE=8]="FETCH_SOCKETS_RESPONSE",t[t.SERVER_SIDE_EMIT=9]="SERVER_SIDE_EMIT",t[t.SERVER_SIDE_EMIT_RESPONSE=10]="SERVER_SIDE_EMIT_RESPONSE",t[t.BROADCAST_CLIENT_COUNT=11]="BROADCAST_CLIENT_COUNT",t[t.BROADCAST_ACK=12]="BROADCAST_ACK",t[t.ADAPTER_CLOSE=13]="ADAPTER_CLOSE"})(de||(Ii.MessageType=de={}));function bu(t){return{rooms:[...t.rooms],except:[...t.except],flags:t.flags}}function ul(t){return{rooms:new Set(t.rooms),except:new Set(t.except),flags:t.flags}}var Fm=class extends Iie.Adapter{constructor(e){super(e),this.requests=new Map,this.ackRequests=new Map,this.uid=cl()}onMessage(e,r){if(e.uid===this.uid)return wt("[%s] ignore message from self",this.uid);if(e.nsp!==this.nsp.name)return wt("[%s] ignore message from another namespace (%s)",this.uid,e.nsp);switch(wt("[%s] new event of type %d from %s",this.uid,e.type,e.uid),e.type){case de.BROADCAST:{if(e.data.requestId!==void 0)super.broadcastWithAck(e.data.packet,ul(e.data.opts),s=>{wt("[%s] waiting for %d client acknowledgements",this.uid,s),this.publishResponse(e.uid,{type:de.BROADCAST_CLIENT_COUNT,data:{requestId:e.data.requestId,clientCount:s}})},s=>{wt("[%s] received acknowledgement with value %j",this.uid,s),this.publishResponse(e.uid,{type:de.BROADCAST_ACK,data:{requestId:e.data.requestId,packet:s}})});else{let s=e.data.packet,i=ul(e.data.opts);this.addOffsetIfNecessary(s,i,r),super.broadcast(s,i)}break}case de.SOCKETS_JOIN:super.addSockets(ul(e.data.opts),e.data.rooms);break;case de.SOCKETS_LEAVE:super.delSockets(ul(e.data.opts),e.data.rooms);break;case de.DISCONNECT_SOCKETS:super.disconnectSockets(ul(e.data.opts),e.data.close);break;case de.FETCH_SOCKETS:{wt("[%s] calling fetchSockets with opts %j",this.uid,e.data.opts),super.fetchSockets(ul(e.data.opts)).then(n=>{this.publishResponse(e.uid,{type:de.FETCH_SOCKETS_RESPONSE,data:{requestId:e.data.requestId,sockets:n.map(s=>{let i=s.handshake,{sessionStore:o}=i,a=Bie(i,["sessionStore"]);return{id:s.id,handshake:a,rooms:[...s.rooms],data:s.data}})}})});break}case de.SERVER_SIDE_EMIT:{let n=e.data.packet;if(!(e.data.requestId!==void 0)){this.nsp._onServerSideEmit(n);return}let i=!1,o=a=>{i||(i=!0,wt("[%s] calling acknowledgement with %j",this.uid,a),this.publishResponse(e.uid,{type:de.SERVER_SIDE_EMIT_RESPONSE,data:{requestId:e.data.requestId,packet:a}}))};this.nsp._onServerSideEmit([...n,o]);break}case de.BROADCAST_CLIENT_COUNT:case de.BROADCAST_ACK:case de.FETCH_SOCKETS_RESPONSE:case de.SERVER_SIDE_EMIT_RESPONSE:this.onResponse(e);break;default:wt("[%s] unknown message type: %s",this.uid,e.type)}}onResponse(e){var r,n;let s=e.data.requestId;switch(wt("[%s] received response %s to request %s",this.uid,e.type,s),e.type){case de.BROADCAST_CLIENT_COUNT:{(r=this.ackRequests.get(s))===null||r===void 0||r.clientCountCallback(e.data.clientCount);break}case de.BROADCAST_ACK:{(n=this.ackRequests.get(s))===null||n===void 0||n.ack(e.data.packet);break}case de.FETCH_SOCKETS_RESPONSE:{let i=this.requests.get(s);if(!i)return;i.current++,e.data.sockets.forEach(o=>i.responses.push(o)),i.current===i.expected&&(clearTimeout(i.timeout),i.resolve(i.responses),this.requests.delete(s));break}case de.SERVER_SIDE_EMIT_RESPONSE:{let i=this.requests.get(s);if(!i)return;i.current++,i.responses.push(e.data.packet),i.current===i.expected&&(clearTimeout(i.timeout),i.resolve(null,i.responses),this.requests.delete(s));break}default:wt("[%s] unknown response type: %s",this.uid,e.type)}}async broadcast(e,r){var n;if(!((n=r.flags)===null||n===void 0?void 0:n.local))try{let i=await this.publishAndReturnOffset({type:de.BROADCAST,data:{packet:e,opts:bu(r)}});this.addOffsetIfNecessary(e,r,i)}catch(i){return wt("[%s] error while broadcasting message: %s",this.uid,i.message)}super.broadcast(e,r)}addOffsetIfNecessary(e,r,n){var s;if(!this.nsp.server.opts.connectionStateRecovery)return;let i=e.type===2,o=e.id===void 0,a=((s=r.flags)===null||s===void 0?void 0:s.volatile)===void 0;i&&o&&a&&e.data.push(n)}broadcastWithAck(e,r,n,s){var i;if(!((i=r?.flags)===null||i===void 0?void 0:i.local)){let a=cl();this.ackRequests.set(a,{clientCountCallback:n,ack:s}),this.publish({type:de.BROADCAST,data:{packet:e,requestId:a,opts:bu(r)}}),setTimeout(()=>{this.ackRequests.delete(a)},r.flags.timeout)}super.broadcastWithAck(e,r,n,s)}async addSockets(e,r){var n;if(!((n=e.flags)===null||n===void 0?void 0:n.local))try{await this.publishAndReturnOffset({type:de.SOCKETS_JOIN,data:{opts:bu(e),rooms:r}})}catch(i){wt("[%s] error while publishing message: %s",this.uid,i.message)}super.addSockets(e,r)}async delSockets(e,r){var n;if(!((n=e.flags)===null||n===void 0?void 0:n.local))try{await this.publishAndReturnOffset({type:de.SOCKETS_LEAVE,data:{opts:bu(e),rooms:r}})}catch(i){wt("[%s] error while publishing message: %s",this.uid,i.message)}super.delSockets(e,r)}async disconnectSockets(e,r){var n;if(!((n=e.flags)===null||n===void 0?void 0:n.local))try{await this.publishAndReturnOffset({type:de.DISCONNECT_SOCKETS,data:{opts:bu(e),close:r}})}catch(i){wt("[%s] error while publishing message: %s",this.uid,i.message)}super.disconnectSockets(e,r)}async fetchSockets(e){var r;let[n,s]=await Promise.all([super.fetchSockets(e),this.serverCount()]),i=s-1;if(!((r=e.flags)===null||r===void 0)&&r.local||i<=0)return n;let o=cl();return new Promise((a,u)=>{let c=setTimeout(()=>{let p=this.requests.get(o);p&&(u(new Error(`timeout reached: only ${p.current} responses received out of ${p.expected}`)),this.requests.delete(o))},e.flags.timeout||Rm),l={type:de.FETCH_SOCKETS,resolve:a,timeout:c,current:0,expected:i,responses:n};this.requests.set(o,l),this.publish({type:de.FETCH_SOCKETS,data:{opts:bu(e),requestId:o}})})}async serverSideEmit(e){if(!(typeof e[e.length-1]=="function"))return this.publish({type:de.SERVER_SIDE_EMIT,data:{packet:e}});let n=e.pop(),s=await this.serverCount()-1;if(wt('[%s] waiting for %d responses to "serverSideEmit" request',this.uid,s),s<=0)return n(null,[]);let i=cl(),o=setTimeout(()=>{let u=this.requests.get(i);u&&(n(new Error(`timeout reached: only ${u.current} responses received out of ${u.expected}`),u.responses),this.requests.delete(i))},Rm),a={type:de.SERVER_SIDE_EMIT,resolve:n,timeout:o,current:0,expected:s,responses:[]};this.requests.set(i,a),this.publish({type:de.SERVER_SIDE_EMIT,data:{requestId:i,packet:e}})}publish(e){wt("[%s] sending message %s",this.uid,e.type),this.publishAndReturnOffset(e).catch(r=>{wt("[%s] error while publishing message: %s",this.uid,r)})}publishAndReturnOffset(e){return e.uid=this.uid,e.nsp=this.nsp.name,this.doPublish(e)}publishResponse(e,r){r.uid=this.uid,r.nsp=this.nsp.name,wt("[%s] sending response %s to %s",this.uid,r.type,e),this.doPublishResponse(e,r).catch(n=>{wt("[%s] error while publishing response: %s",this.uid,n)})}};Ii.ClusterAdapter=Fm;var lS=class extends Fm{constructor(e,r){super(e),this.nodesMap=new Map,this.customRequests=new Map,this._opts=Object.assign({heartbeatInterval:5e3,heartbeatTimeout:1e4},r),this.cleanupTimer=setInterval(()=>{let n=Date.now();this.nodesMap.forEach((s,i)=>{n-s>this._opts.heartbeatTimeout&&(wt("[%s] node %s seems down",this.uid,i),this.removeNode(i))})},1e3)}init(){this.publish({type:de.INITIAL_HEARTBEAT})}scheduleHeartbeat(){this.heartbeatTimer?this.heartbeatTimer.refresh():this.heartbeatTimer=setTimeout(()=>{this.publish({type:de.HEARTBEAT})},this._opts.heartbeatInterval)}close(){this.publish({type:de.ADAPTER_CLOSE}),clearTimeout(this.heartbeatTimer),this.cleanupTimer&&clearInterval(this.cleanupTimer)}onMessage(e,r){if(e.uid===this.uid)return wt("[%s] ignore message from self",this.uid);switch(e.uid&&e.uid!==Rie&&this.nodesMap.set(e.uid,Date.now()),e.type){case de.INITIAL_HEARTBEAT:this.publish({type:de.HEARTBEAT});break;case de.HEARTBEAT:break;case de.ADAPTER_CLOSE:this.removeNode(e.uid);break;default:super.onMessage(e,r)}}serverCount(){return Promise.resolve(1+this.nodesMap.size)}publish(e){return this.scheduleHeartbeat(),super.publish(e)}async serverSideEmit(e){if(!(typeof e[e.length-1]=="function"))return this.publish({type:de.SERVER_SIDE_EMIT,data:{packet:e}});let n=e.pop(),s=this.nodesMap.size;if(wt('[%s] waiting for %d responses to "serverSideEmit" request',this.uid,s),s<=0)return n(null,[]);let i=cl(),o=setTimeout(()=>{let u=this.customRequests.get(i);u&&(n(new Error(`timeout reached: missing ${u.missingUids.size} responses`),u.responses),this.customRequests.delete(i))},Rm),a={type:de.SERVER_SIDE_EMIT,resolve:n,timeout:o,missingUids:new Set([...this.nodesMap.keys()]),responses:[]};this.customRequests.set(i,a),this.publish({type:de.SERVER_SIDE_EMIT,data:{requestId:i,packet:e}})}async fetchSockets(e){var r;let[n,s]=await Promise.all([super.fetchSockets({rooms:e.rooms,except:e.except,flags:{local:!0}}),this.serverCount()]),i=s-1;if(!((r=e.flags)===null||r===void 0)&&r.local||i<=0)return n;let o=cl();return new Promise((a,u)=>{let c=setTimeout(()=>{let p=this.customRequests.get(o);p&&(u(new Error(`timeout reached: missing ${p.missingUids.size} responses`)),this.customRequests.delete(o))},e.flags.timeout||Rm),l={type:de.FETCH_SOCKETS,resolve:a,timeout:c,missingUids:new Set([...this.nodesMap.keys()]),responses:n};this.customRequests.set(o,l),this.publish({type:de.FETCH_SOCKETS,data:{opts:bu(e),requestId:o}})})}onResponse(e){let r=e.data.requestId;switch(wt("[%s] received response %s to request %s",this.uid,e.type,r),e.type){case de.FETCH_SOCKETS_RESPONSE:{let n=this.customRequests.get(r);if(!n)return;e.data.sockets.forEach(s=>n.responses.push(s)),n.missingUids.delete(e.uid),n.missingUids.size===0&&(clearTimeout(n.timeout),n.resolve(n.responses),this.customRequests.delete(r));break}case de.SERVER_SIDE_EMIT_RESPONSE:{let n=this.customRequests.get(r);if(!n)return;n.responses.push(e.data.packet),n.missingUids.delete(e.uid),n.missingUids.size===0&&(clearTimeout(n.timeout),n.resolve(null,n.responses),this.customRequests.delete(r));break}default:super.onResponse(e)}}removeNode(e){this.customRequests.forEach((r,n)=>{r.missingUids.delete(e),r.missingUids.size===0&&(clearTimeout(r.timeout),r.type===de.FETCH_SOCKETS?r.resolve(r.responses):r.type===de.SERVER_SIDE_EMIT&&r.resolve(null,r.responses),this.customRequests.delete(n))}),this.nodesMap.delete(e)}};Ii.ClusterAdapterWithHeartbeat=lS});var $m=m(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.MessageType=ws.ClusterAdapterWithHeartbeat=ws.ClusterAdapter=ws.SessionAwareAdapter=ws.Adapter=void 0;var HP=cS();Object.defineProperty(ws,"Adapter",{enumerable:!0,get:function(){return HP.Adapter}});Object.defineProperty(ws,"SessionAwareAdapter",{enumerable:!0,get:function(){return HP.SessionAwareAdapter}});var pS=KP();Object.defineProperty(ws,"ClusterAdapter",{enumerable:!0,get:function(){return pS.ClusterAdapter}});Object.defineProperty(ws,"ClusterAdapterWithHeartbeat",{enumerable:!0,get:function(){return pS.ClusterAdapterWithHeartbeat}});Object.defineProperty(ws,"MessageType",{enumerable:!0,get:function(){return pS.MessageType}})});var YP=m(ll=>{"use strict";var Fie=ll&&ll.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ll,"__esModule",{value:!0});ll.ParentNamespace=void 0;var GP=iS(),$ie=$m(),qie=Fie(fr()),JP=(0,qie.default)("socket.io:parent-namespace"),qm=class t extends GP.Namespace{constructor(e){super(e,"/_"+t.count++),this.children=new Set}_initAdapter(){this.adapter=new dS(this)}emit(e,...r){return this.children.forEach(n=>{n.emit(e,...r)}),!0}createChild(e){JP("creating child namespace %s",e);let r=new GP.Namespace(this.server,e);if(this._fns.forEach(n=>r.use(n)),this.listeners("connect").forEach(n=>r.on("connect",n)),this.listeners("connection").forEach(n=>r.on("connection",n)),this.children.add(r),this.server._opts.cleanupEmptyChildNamespaces){let n=r._remove;r._remove=s=>{n.call(r,s),r.sockets.size===0&&(JP("closing child namespace %s",e),r.adapter.close(),this.server._nsps.delete(r.name),this.children.delete(r))}}return this.server._nsps.set(e,r),this.server.sockets.emitReserved("new_namespace",r),r}fetchSockets(){throw new Error("fetchSockets() is not supported on parent namespaces")}};ll.ParentNamespace=qm;qm.count=0;var dS=class extends $ie.Adapter{broadcast(e,r){this.nsp.children.forEach(n=>{n.adapter.broadcast(e,r)})}}});var rB=m(Su=>{"use strict";var jie=Su&&Su.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Su,"__esModule",{value:!0});Su.patchAdapter=Uie;Su.restoreAdapter=Vie;Su.serveFile=zie;var wu=$m(),QP=require("fs"),Lie=jie(fr()),jm=(0,Lie.default)("socket.io:adapter-uws"),hS="",{addAll:ZP,del:eB,broadcast:tB}=wu.Adapter.prototype;function Uie(t){wu.Adapter.prototype.addAll=function(e,r){let n=!this.sids.has(e);ZP.call(this,e,r);let s=this.nsp.sockets.get(e)||this.nsp._preConnectSockets.get(e);if(s){if(s.conn.transport.name==="websocket"){XP(this.nsp.name,s,n,r);return}n&&s.conn.on("upgrade",()=>{let i=this.sids.get(e);i&&XP(this.nsp.name,s,n,i)})}},wu.Adapter.prototype.del=function(e,r){eB.call(this,e,r);let n=this.nsp.sockets.get(e)||this.nsp._preConnectSockets.get(e);if(n&&n.conn.transport.name==="websocket"){let s=n.conn.id,i=n.conn.transport.socket,o=`${this.nsp.name}${hS}${r}`;jm("unsubscribe connection %s from topic %s",s,o),i.unsubscribe(o)}},wu.Adapter.prototype.broadcast=function(e,r){if(!(r.rooms.size<=1&&r.except.size===0)){tB.call(this,e,r);return}let s=r.flags||{},i={preEncoded:!0,volatile:s.volatile,compress:s.compress};e.nsp=this.nsp.name;let o=this.encoder.encode(e),a=r.rooms.size===0?this.nsp.name:`${this.nsp.name}${hS}${r.rooms.keys().next().value}`;jm("fast publish to %s",a),o.forEach(u=>{let c=typeof u!="string";t.publish(a,c?u:"4"+u,c)}),this.apply(r,u=>{u.conn.transport.name!=="websocket"&&u.client.writeToEngine(o,i)})}}function XP(t,e,r,n){let s=e.conn.id,i=e.conn.transport.socket;r&&(jm("subscribe connection %s to topic %s",s,t),i.subscribe(t)),n.forEach(o=>{let a=`${t}${hS}${o}`;jm("subscribe connection %s to topic %s",s,a),i.subscribe(a)})}function Vie(){wu.Adapter.prototype.addAll=ZP,wu.Adapter.prototype.del=eB,wu.Adapter.prototype.broadcast=tB}var Wie=t=>{let{buffer:e,byteOffset:r,byteLength:n}=t;return e.slice(r,r+n)};function zie(t,e){let{size:r}=(0,QP.statSync)(e),n=(0,QP.createReadStream)(e),s=()=>!n.destroyed&&n.destroy(),i=a=>{throw s(),a},o=a=>{let u=Wie(a);t.cork(()=>{let c=t.getWriteOffset(),[l,p]=t.tryEnd(u,r);!p&&!l&&(n.pause(),t.onWritable(d=>{let[h,f]=t.tryEnd(u.slice(d-c),r);return!f&&h&&n.resume(),h}))})};t.onAborted(s),n.on("data",o).on("error",i).on("end",s)}});var nB=m((JMe,Kie)=>{Kie.exports={name:"socket.io",version:"4.8.3",description:"node.js realtime framework server",keywords:["realtime","framework","websocket","tcp","events","socket","io"],files:["dist/","client-dist/","wrapper.mjs","!**/*.tsbuildinfo"],directories:{doc:"docs/",example:"example/",lib:"lib/",test:"test/"},type:"commonjs",main:"./dist/index.js",exports:{".":{types:"./dist/index.d.ts",import:"./wrapper.mjs",require:"./dist/index.js"},"./package.json":"./package.json"},types:"./dist/index.d.ts",license:"MIT",homepage:"https://github.com/socketio/socket.io/tree/main/packages/socket.io#readme",repository:{type:"git",url:"git+https://github.com/socketio/socket.io.git"},bugs:{url:"https://github.com/socketio/socket.io/issues"},scripts:{compile:"rimraf ./dist && tsc",test:"npm run format:check && npm run compile && npm run test:types && npm run test:unit","test:types":"tsd","test:unit":"nyc mocha --import=tsx --reporter spec --slow 200 --bail --timeout 10000 test/index.ts","format:check":'prettier --check "lib/**/*.ts" "test/**/*.ts"',"format:fix":'prettier --write "lib/**/*.ts" "test/**/*.ts"',prepack:"npm run compile"},dependencies:{accepts:"~1.3.4",base64id:"~2.0.0",cors:"~2.8.5",debug:"~4.4.1","engine.io":"~6.6.0","socket.io-adapter":"~2.5.2","socket.io-parser":"~4.2.4"},contributors:[{name:"Guillermo Rauch",email:"rauchg@gmail.com"},{name:"Arnout Kazemier",email:"info@3rd-eden.com"},{name:"Vladimir Dronnikov",email:"dronnikov@gmail.com"},{name:"Einar Otto Stangvik",email:"einaros@gmail.com"}],engines:{node:">=10.2.0"},tsd:{directory:"test"}}});var pB=m((Hr,q1)=>{"use strict";var Hie=Hr&&Hr.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Gie=Hr&&Hr.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Jie=Hr&&Hr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Hie(e,t,r);return Gie(e,t),e},yS=Hr&&Hr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hr,"__esModule",{value:!0});Hr.Namespace=Hr.Socket=Hr.Server=void 0;var Yie=yS(require("http")),Qie=require("fs"),fS=require("zlib"),Xie=Lf(),Lm=require("stream"),sB=require("path"),iB=xP(),Zie=RP(),oB=require("events"),gS=iS();Object.defineProperty(Hr,"Namespace",{enumerable:!0,get:function(){return gS.Namespace}});var eoe=YP(),aB=$m(),toe=Jie(F1()),roe=yS(fr()),lB=nS();Object.defineProperty(Hr,"Socket",{enumerable:!0,get:function(){return lB.Socket}});var noe=Dm(),mS=rB(),soe=yS(Fw()),pn=(0,roe.default)("socket.io:server"),uB=nB().version,cB=/\.map/,pl=class t extends noe.StrictEventEmitter{constructor(e,r={}){super(),this._nsps=new Map,this.parentNsps=new Map,this.parentNamespacesFromRegExp=new Map,typeof e=="object"&&e instanceof Object&&!e.listen&&(r=e,e=void 0),this.path(r.path||"/socket.io"),this.connectTimeout(r.connectTimeout||45e3),this.serveClient(r.serveClient!==!1),this._parser=r.parser||toe,this.encoder=new this._parser.Encoder,this.opts=r,r.connectionStateRecovery?(r.connectionStateRecovery=Object.assign({maxDisconnectionDuration:120*1e3,skipMiddlewares:!0},r.connectionStateRecovery),this.adapter(r.adapter||aB.SessionAwareAdapter)):this.adapter(r.adapter||aB.Adapter),r.cleanupEmptyChildNamespaces=!!r.cleanupEmptyChildNamespaces,this.sockets=this.of("/"),(e||typeof e=="number")&&this.attach(e),this.opts.cors&&(this._corsMiddleware=(0,soe.default)(this.opts.cors))}get _opts(){return this.opts}serveClient(e){return arguments.length?(this._serveClient=e,this):this._serveClient}_checkNamespace(e,r,n){if(this.parentNsps.size===0)return n(!1);let s=this.parentNsps.keys(),i=()=>{let o=s.next();if(o.done)return n(!1);o.value(e,r,(a,u)=>{if(a||!u)return i();if(this._nsps.has(e))return pn("dynamic namespace %s already exists",e),n(this._nsps.get(e));let c=this.parentNsps.get(o.value).createChild(e);pn("dynamic namespace %s was created",e),n(c)})};i()}path(e){if(!arguments.length)return this._path;this._path=e.replace(/\/$/,"");let r=this._path.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");return this.clientPathRegex=new RegExp("^"+r+"/socket\\.io(\\.msgpack|\\.esm)?(\\.min)?\\.js(\\.map)?(?:\\?|$)"),this}connectTimeout(e){return e===void 0?this._connectTimeout:(this._connectTimeout=e,this)}adapter(e){if(!arguments.length)return this._adapter;this._adapter=e;for(let r of this._nsps.values())r._initAdapter();return this}listen(e,r={}){return this.attach(e,r)}attach(e,r={}){if(typeof e=="function"){let n="You are trying to attach socket.io to an express request handler function. Please pass a http.Server instance.";throw new Error(n)}if(Number(e)==e&&(e=Number(e)),typeof e=="number"){pn("creating http server and binding to %d",e);let n=e;e=Yie.default.createServer((s,i)=>{i.writeHead(404),i.end()}),e.listen(n)}return Object.assign(r,this.opts),r.path=r.path||this._path,this.initEngine(e,r),this}attachApp(e,r={}){Object.assign(r,this.opts),r.path=r.path||this._path,pn("creating uWebSockets.js-based engine with opts %j",r);let n=new iB.uServer(r);n.attach(e,r),this.bind(n),this._serveClient&&e.get(`${this._path}/*`,(s,i)=>{if(!this.clientPathRegex.test(i.getUrl())){i.setYield(!0);return}let o=i.getUrl().replace(this._path,"").replace(/\?.*$/,"").replace(/^\//,""),a=cB.test(o),u=a?"map":"source",c='"'+uB+'"',l="W/"+c,p=i.getHeader("if-none-match");if(p&&(c===p||l===p)){pn("serve client %s 304",u),s.writeStatus("304 Not Modified"),s.end();return}pn("serve client %s",u),s.writeHeader("cache-control","public, max-age=0"),s.writeHeader("content-type","application/"+(a?"json":"javascript")+"; charset=utf-8"),s.writeHeader("etag",c);let d=sB.join(__dirname,"../client-dist/",o);(0,mS.serveFile)(s,d)}),(0,mS.patchAdapter)(e)}initEngine(e,r){pn("creating engine.io instance with opts %j",r),this.eio=(0,iB.attach)(e,r),this._serveClient&&this.attachServe(e),this.httpServer=e,this.bind(this.eio)}attachServe(e){pn("attaching client serving req handler");let r=e.listeners("request").slice(0);e.removeAllListeners("request"),e.on("request",(n,s)=>{if(this.clientPathRegex.test(n.url))this._corsMiddleware?this._corsMiddleware(n,s,()=>{this.serve(n,s)}):this.serve(n,s);else for(let i=0;i<r.length;i++)r[i].call(e,n,s)})}serve(e,r){let n=e.url.replace(this._path,"").replace(/\?.*$/,""),s=cB.test(n),i=s?"map":"source",o='"'+uB+'"',a="W/"+o,u=e.headers["if-none-match"];if(u&&(o===u||a===u)){pn("serve client %s 304",i),r.writeHead(304),r.end();return}pn("serve client %s",i),r.setHeader("Cache-Control","public, max-age=0"),r.setHeader("Content-Type","application/"+(s?"json":"javascript")+"; charset=utf-8"),r.setHeader("ETag",o),t.sendFile(n,e,r)}static sendFile(e,r,n){let s=(0,Qie.createReadStream)(sB.join(__dirname,"../client-dist/",e)),i=Xie(r).encodings(["br","gzip","deflate"]),o=a=>{a&&n.end()};switch(i){case"br":n.writeHead(200,{"content-encoding":"br"}),(0,Lm.pipeline)(s,(0,fS.createBrotliCompress)(),n,o);break;case"gzip":n.writeHead(200,{"content-encoding":"gzip"}),(0,Lm.pipeline)(s,(0,fS.createGzip)(),n,o);break;case"deflate":n.writeHead(200,{"content-encoding":"deflate"}),(0,Lm.pipeline)(s,(0,fS.createDeflate)(),n,o);break;default:n.writeHead(200),(0,Lm.pipeline)(s,n,o)}}bind(e){return this.engine=e,this.engine.on("connection",this.onconnection.bind(this)),this}onconnection(e){pn("incoming connection with id %s",e.id);let r=new Zie.Client(this,e);return e.protocol===3&&r.connect("/"),this}of(e,r){if(typeof e=="function"||e instanceof RegExp){let s=new eoe.ParentNamespace(this);return pn("initializing parent namespace %s",s.name),typeof e=="function"?this.parentNsps.set(e,s):(this.parentNsps.set((i,o,a)=>a(null,e.test(i)),s),this.parentNamespacesFromRegExp.set(e,s)),r&&s.on("connect",r),s}String(e)[0]!=="/"&&(e="/"+e);let n=this._nsps.get(e);if(!n){for(let[s,i]of this.parentNamespacesFromRegExp)if(s.test(e))return pn("attaching namespace %s to parent namespace %s",e,s),i.createChild(e);pn("initializing namespace %s",e),n=new gS.Namespace(this,e),this._nsps.set(e,n),e!=="/"&&this.sockets.emitReserved("new_namespace",n)}return r&&n.on("connect",r),n}async close(e){if(await Promise.allSettled([...this._nsps.values()].map(async r=>{r.sockets.forEach(n=>{n._onclose("server shutting down")}),await r.adapter.close()})),this.engine.close(),(0,mS.restoreAdapter)(),this.httpServer)return new Promise(r=>{this.httpServer.close(n=>{e&&e(n),n&&pn("server was not running"),r()})});e&&e()}use(e){return this.sockets.use(e),this}to(e){return this.sockets.to(e)}in(e){return this.sockets.in(e)}except(e){return this.sockets.except(e)}send(...e){return this.sockets.emit("message",...e),this}write(...e){return this.sockets.emit("message",...e),this}serverSideEmit(e,...r){return this.sockets.serverSideEmit(e,...r)}serverSideEmitWithAck(e,...r){return this.sockets.serverSideEmitWithAck(e,...r)}allSockets(){return this.sockets.allSockets()}compress(e){return this.sockets.compress(e)}get volatile(){return this.sockets.volatile}get local(){return this.sockets.local}timeout(e){return this.sockets.timeout(e)}fetchSockets(){return this.sockets.fetchSockets()}socketsJoin(e){return this.sockets.socketsJoin(e)}socketsLeave(e){return this.sockets.socketsLeave(e)}disconnectSockets(e=!1){return this.sockets.disconnectSockets(e)}};Hr.Server=pl;var ioe=Object.keys(oB.EventEmitter.prototype).filter(function(t){return typeof oB.EventEmitter.prototype[t]=="function"});ioe.forEach(function(t){pl.prototype[t]=function(){return this.sockets[t].apply(this.sockets,arguments)}});q1.exports=(t,e)=>new pl(t,e);q1.exports.Server=pl;q1.exports.Namespace=gS.Namespace;q1.exports.Socket=lB.Socket});var fB=m((ZMe,j1)=>{function ooe(t){return t&&t.__esModule?t:{default:t}}j1.exports=ooe,j1.exports.__esModule=!0,j1.exports.default=j1.exports});var ES=m(_S=>{"use strict";Object.defineProperty(_S,"__esModule",{value:!0});var aoe=require("crypto"),uoe=(t,e)=>(0,aoe.createHash)(t).update(e).digest();_S.default=uoe});var Dt=m(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.concatKdf=nr.lengthAndInput=nr.uint32be=nr.uint64be=nr.p2s=nr.concat=nr.decoder=nr.encoder=void 0;var coe=ES();nr.encoder=new TextEncoder;nr.decoder=new TextDecoder;var Um=2**32;function wS(...t){let e=t.reduce((s,{length:i})=>s+i,0),r=new Uint8Array(e),n=0;return t.forEach(s=>{r.set(s,n),n+=s.length}),r}nr.concat=wS;function loe(t,e){return wS(nr.encoder.encode(t),new Uint8Array([0]),e)}nr.p2s=loe;function bS(t,e,r){if(e<0||e>=Um)throw new RangeError(`value must be >= 0 and <= ${Um-1}. Received ${e}`);t.set([e>>>24,e>>>16,e>>>8,e&255],r)}function poe(t){let e=Math.floor(t/Um),r=t%Um,n=new Uint8Array(8);return bS(n,e,0),bS(n,r,4),n}nr.uint64be=poe;function SS(t){let e=new Uint8Array(4);return bS(e,t),e}nr.uint32be=SS;function doe(t){return wS(SS(t.length),t)}nr.lengthAndInput=doe;async function hoe(t,e,r){let n=Math.ceil((e>>3)/32),s=new Uint8Array(n*32);for(let i=0;i<n;i++){let o=new Uint8Array(4+t.length+r.length);o.set(SS(i+1)),o.set(t,4),o.set(r,4+t.length),s.set(await(0,coe.default)("sha256",o),i*32)}return s.slice(0,e>>3)}nr.concatKdf=hoe});var Gr=m(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.decode=Ys.encode=Ys.encodeBase64=Ys.decodeBase64=void 0;var dl=require("buffer"),foe=Dt(),mB;function moe(t){let e=t;return e instanceof Uint8Array&&(e=foe.decoder.decode(e)),e}dl.Buffer.isEncoding("base64url")?Ys.encode=mB=t=>dl.Buffer.from(t).toString("base64url"):Ys.encode=mB=t=>dl.Buffer.from(t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");var yoe=t=>dl.Buffer.from(t,"base64");Ys.decodeBase64=yoe;var goe=t=>dl.Buffer.from(t).toString("base64");Ys.encodeBase64=goe;var _oe=t=>dl.Buffer.from(moe(t),"base64");Ys.decode=_oe});var fe=m(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.JWSSignatureVerificationFailed=Fe.JWKSTimeout=Fe.JWKSMultipleMatchingKeys=Fe.JWKSNoMatchingKey=Fe.JWKSInvalid=Fe.JWKInvalid=Fe.JWTInvalid=Fe.JWSInvalid=Fe.JWEInvalid=Fe.JWEDecompressionFailed=Fe.JWEDecryptionFailed=Fe.JOSENotSupported=Fe.JOSEAlgNotAllowed=Fe.JWTExpired=Fe.JWTClaimValidationFailed=Fe.JOSEError=void 0;var gr=class extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){var r;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,this.constructor)}};Fe.JOSEError=gr;var AS=class extends gr{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(e,r="unspecified",n="unspecified"){super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=n}};Fe.JWTClaimValidationFailed=AS;var OS=class extends gr{static get code(){return"ERR_JWT_EXPIRED"}constructor(e,r="unspecified",n="unspecified"){super(e),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=n}};Fe.JWTExpired=OS;var CS=class extends gr{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}};Fe.JOSEAlgNotAllowed=CS;var vS=class extends gr{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}};Fe.JOSENotSupported=vS;var xS=class extends gr{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}};Fe.JWEDecryptionFailed=xS;var TS=class extends gr{constructor(){super(...arguments),this.code="ERR_JWE_DECOMPRESSION_FAILED",this.message="decompression operation failed"}static get code(){return"ERR_JWE_DECOMPRESSION_FAILED"}};Fe.JWEDecompressionFailed=TS;var DS=class extends gr{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}};Fe.JWEInvalid=DS;var MS=class extends gr{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}};Fe.JWSInvalid=MS;var PS=class extends gr{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}};Fe.JWTInvalid=PS;var BS=class extends gr{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}};Fe.JWKInvalid=BS;var IS=class extends gr{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}};Fe.JWKSInvalid=IS;var NS=class extends gr{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}};Fe.JWKSNoMatchingKey=NS;var kS=class extends gr{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}};Fe.JWKSMultipleMatchingKeys=kS;var RS=class extends gr{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}};Fe.JWKSTimeout=RS;var FS=class extends gr{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}};Fe.JWSSignatureVerificationFailed=FS});var L1=m(Vm=>{"use strict";Object.defineProperty(Vm,"__esModule",{value:!0});Vm.default=void 0;var Eoe=require("crypto");Object.defineProperty(Vm,"default",{enumerable:!0,get:function(){return Eoe.randomFillSync}})});var Wm=m(U1=>{"use strict";Object.defineProperty(U1,"__esModule",{value:!0});U1.bitLength=void 0;var boe=fe(),woe=L1();function yB(t){switch(t){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new boe.JOSENotSupported(`Unsupported JWE Algorithm: ${t}`)}}U1.bitLength=yB;U1.default=t=>(0,woe.default)(new Uint8Array(yB(t)>>3))});var qS=m($S=>{"use strict";Object.defineProperty($S,"__esModule",{value:!0});var Soe=fe(),Aoe=Wm(),Ooe=(t,e)=>{if(e.length<<3!==(0,Aoe.bitLength)(t))throw new Soe.JWEInvalid("Invalid Initialization Vector length")};$S.default=Ooe});var Ss=m(jS=>{"use strict";Object.defineProperty(jS,"__esModule",{value:!0});var Coe=require("crypto"),gB=require("util");jS.default=gB.types.isKeyObject?t=>gB.types.isKeyObject(t):t=>t!=null&&t instanceof Coe.KeyObject});var VS=m(US=>{"use strict";Object.defineProperty(US,"__esModule",{value:!0});var LS=fe(),voe=Ss(),xoe=(t,e)=>{let r;switch(t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":r=parseInt(t.slice(-3),10);break;case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(t.slice(1,4),10);break;default:throw new LS.JOSENotSupported(`Content Encryption Algorithm ${t} is not supported either by JOSE or your javascript runtime`)}if(e instanceof Uint8Array){let n=e.byteLength<<3;if(n!==r)throw new LS.JWEInvalid(`Invalid Content Encryption Key length. Expected ${r} bits, got ${n} bits`);return}if((0,voe.default)(e)&&e.type==="secret"){let n=e.symmetricKeySize<<3;if(n!==r)throw new LS.JWEInvalid(`Invalid Content Encryption Key length. Expected ${r} bits, got ${n} bits`);return}throw new TypeError("Invalid Content Encryption Key type")};US.default=xoe});var _B=m(WS=>{"use strict";Object.defineProperty(WS,"__esModule",{value:!0});var Toe=require("crypto"),Doe=Toe.timingSafeEqual;WS.default=Doe});var KS=m(zS=>{"use strict";Object.defineProperty(zS,"__esModule",{value:!0});var Moe=require("crypto"),EB=Dt();function Poe(t,e,r,n,s,i){let o=(0,EB.concat)(t,e,r,(0,EB.uint64be)(t.length<<3)),a=(0,Moe.createHmac)(`sha${n}`,s);return a.update(o),a.digest().slice(0,i>>3)}zS.default=Poe});var As=m(V1=>{"use strict";Object.defineProperty(V1,"__esModule",{value:!0});V1.isCryptoKey=void 0;var Boe=require("crypto"),bB=require("util"),Ioe=Boe.webcrypto;V1.default=Ioe;V1.isCryptoKey=bB.types.isCryptoKey?t=>bB.types.isCryptoKey(t):t=>!1});var ca=m(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.checkEncCryptoKey=hl.checkSigCryptoKey=void 0;function Cr(t,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${t}`)}function ua(t,e){return t.name===e}function zm(t){return parseInt(t.name.slice(4),10)}function Noe(t){switch(t){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function wB(t,e){if(e.length&&!e.some(r=>t.usages.includes(r))){let r="CryptoKey does not support this operation, its usages must include ";if(e.length>2){let n=e.pop();r+=`one of ${e.join(", ")}, or ${n}.`}else e.length===2?r+=`one of ${e[0]} or ${e[1]}.`:r+=`${e[0]}.`;throw new TypeError(r)}}function koe(t,e,...r){switch(e){case"HS256":case"HS384":case"HS512":{if(!ua(t.algorithm,"HMAC"))throw Cr("HMAC");let n=parseInt(e.slice(2),10);if(zm(t.algorithm.hash)!==n)throw Cr(`SHA-${n}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!ua(t.algorithm,"RSASSA-PKCS1-v1_5"))throw Cr("RSASSA-PKCS1-v1_5");let n=parseInt(e.slice(2),10);if(zm(t.algorithm.hash)!==n)throw Cr(`SHA-${n}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!ua(t.algorithm,"RSA-PSS"))throw Cr("RSA-PSS");let n=parseInt(e.slice(2),10);if(zm(t.algorithm.hash)!==n)throw Cr(`SHA-${n}`,"algorithm.hash");break}case"EdDSA":{if(t.algorithm.name!=="Ed25519"&&t.algorithm.name!=="Ed448")throw Cr("Ed25519 or Ed448");break}case"ES256":case"ES384":case"ES512":{if(!ua(t.algorithm,"ECDSA"))throw Cr("ECDSA");let n=Noe(e);if(t.algorithm.namedCurve!==n)throw Cr(n,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}wB(t,r)}hl.checkSigCryptoKey=koe;function Roe(t,e,...r){switch(e){case"A128GCM":case"A192GCM":case"A256GCM":{if(!ua(t.algorithm,"AES-GCM"))throw Cr("AES-GCM");let n=parseInt(e.slice(1,4),10);if(t.algorithm.length!==n)throw Cr(n,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!ua(t.algorithm,"AES-KW"))throw Cr("AES-KW");let n=parseInt(e.slice(1,4),10);if(t.algorithm.length!==n)throw Cr(n,"algorithm.length");break}case"ECDH":{switch(t.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw Cr("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!ua(t.algorithm,"PBKDF2"))throw Cr("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!ua(t.algorithm,"RSA-OAEP"))throw Cr("RSA-OAEP");let n=parseInt(e.slice(9),10)||1;if(zm(t.algorithm.hash)!==n)throw Cr(`SHA-${n}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}wB(t,r)}hl.checkEncCryptoKey=Roe});var Os=m(W1=>{"use strict";Object.defineProperty(W1,"__esModule",{value:!0});W1.withAlg=void 0;function SB(t,e,...r){if(r.length>2){let n=r.pop();t+=`one of type ${r.join(", ")}, or ${n}.`}else r.length===2?t+=`one of type ${r[0]} or ${r[1]}.`:t+=`of type ${r[0]}.`;return e==null?t+=` Received ${e}`:typeof e=="function"&&e.name?t+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&e.constructor&&e.constructor.name&&(t+=` Received an instance of ${e.constructor.name}`),t}W1.default=(t,...e)=>SB("Key must be ",t,...e);function Foe(t,e,...r){return SB(`Key for the ${t} algorithm must be `,e,...r)}W1.withAlg=Foe});var Km=m(GS=>{"use strict";Object.defineProperty(GS,"__esModule",{value:!0});var $oe=require("crypto"),HS;GS.default=t=>(HS||(HS=new Set((0,$oe.getCiphers)())),HS.has(t))});var Cs=m(z1=>{"use strict";Object.defineProperty(z1,"__esModule",{value:!0});z1.types=void 0;var Hm=As(),qoe=Ss();z1.default=t=>(0,qoe.default)(t)||(0,Hm.isCryptoKey)(t);var AB=["KeyObject"];z1.types=AB;(globalThis.CryptoKey||!(Hm.default===null||Hm.default===void 0)&&Hm.default.CryptoKey)&&AB.push("CryptoKey")});var QS=m(YS=>{"use strict";Object.defineProperty(YS,"__esModule",{value:!0});var JS=require("crypto"),joe=qS(),Loe=VS(),Uoe=Dt(),fl=fe(),Voe=_B(),Woe=KS(),zoe=As(),Koe=ca(),OB=Ss(),Hoe=Os(),CB=Km(),Goe=Cs();function Joe(t,e,r,n,s,i){let o=parseInt(t.slice(1,4),10);(0,OB.default)(e)&&(e=e.export());let a=e.subarray(o>>3),u=e.subarray(0,o>>3),c=parseInt(t.slice(-3),10),l=`aes-${o}-cbc`;if(!(0,CB.default)(l))throw new fl.JOSENotSupported(`alg ${t} is not supported by your javascript runtime`);let p=(0,Woe.default)(i,n,r,c,u,o),d;try{d=(0,Voe.default)(s,p)}catch{}if(!d)throw new fl.JWEDecryptionFailed;let h;try{let f=(0,JS.createDecipheriv)(l,a,n);h=(0,Uoe.concat)(f.update(r),f.final())}catch{}if(!h)throw new fl.JWEDecryptionFailed;return h}function Yoe(t,e,r,n,s,i){let a=`aes-${parseInt(t.slice(1,4),10)}-gcm`;if(!(0,CB.default)(a))throw new fl.JOSENotSupported(`alg ${t} is not supported by your javascript runtime`);try{let u=(0,JS.createDecipheriv)(a,e,n,{authTagLength:16});u.setAuthTag(s),i.byteLength&&u.setAAD(i,{plaintextLength:r.length});let c=u.update(r);return u.final(),c}catch{throw new fl.JWEDecryptionFailed}}var Qoe=(t,e,r,n,s,i)=>{let o;if((0,zoe.isCryptoKey)(e))(0,Koe.checkEncCryptoKey)(e,t,"decrypt"),o=JS.KeyObject.from(e);else if(e instanceof Uint8Array||(0,OB.default)(e))o=e;else throw new TypeError((0,Hoe.default)(e,...Goe.types,"Uint8Array"));switch((0,Loe.default)(t,o),(0,joe.default)(t,n),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return Joe(t,o,r,n,s,i);case"A128GCM":case"A192GCM":case"A256GCM":return Yoe(t,o,r,n,s,i);default:throw new fl.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}};YS.default=Qoe});var XS=m(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.deflate=ml.inflate=void 0;var vB=require("util"),xB=require("zlib"),Xoe=fe(),Zoe=(0,vB.promisify)(xB.inflateRaw),eae=(0,vB.promisify)(xB.deflateRaw),tae=t=>Zoe(t,{maxOutputLength:25e4}).catch(()=>{throw new Xoe.JWEDecompressionFailed});ml.inflate=tae;var rae=t=>eae(t);ml.deflate=rae});var yl=m(ZS=>{"use strict";Object.defineProperty(ZS,"__esModule",{value:!0});var nae=(...t)=>{let e=t.filter(Boolean);if(e.length===0||e.length===1)return!0;let r;for(let n of e){let s=Object.keys(n);if(!r||r.size===0){r=new Set(s);continue}for(let i of s){if(r.has(i))return!1;r.add(i)}}return!0};ZS.default=nae});var xn=m(e3=>{"use strict";Object.defineProperty(e3,"__esModule",{value:!0});function sae(t){return typeof t=="object"&&t!==null}function iae(t){if(!sae(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}e3.default=iae});var Jm=m(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});gl.unwrap=gl.wrap=void 0;var TB=require("buffer"),Gm=require("crypto"),DB=fe(),MB=Dt(),oae=As(),aae=ca(),uae=Ss(),cae=Os(),PB=Km(),lae=Cs();function BB(t,e){if(t.symmetricKeySize<<3!==parseInt(e.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${e}`)}function IB(t,e,r){if((0,uae.default)(t))return t;if(t instanceof Uint8Array)return(0,Gm.createSecretKey)(t);if((0,oae.isCryptoKey)(t))return(0,aae.checkEncCryptoKey)(t,e,r),Gm.KeyObject.from(t);throw new TypeError((0,cae.default)(t,...lae.types,"Uint8Array"))}var pae=(t,e,r)=>{let s=`aes${parseInt(t.slice(1,4),10)}-wrap`;if(!(0,PB.default)(s))throw new DB.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`);let i=IB(e,t,"wrapKey");BB(i,t);let o=(0,Gm.createCipheriv)(s,i,TB.Buffer.alloc(8,166));return(0,MB.concat)(o.update(r),o.final())};gl.wrap=pae;var dae=(t,e,r)=>{let s=`aes${parseInt(t.slice(1,4),10)}-wrap`;if(!(0,PB.default)(s))throw new DB.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`);let i=IB(e,t,"unwrapKey");BB(i,t);let o=(0,Gm.createDecipheriv)(s,i,TB.Buffer.alloc(8,166));return(0,MB.concat)(o.update(r),o.final())};gl.unwrap=dae});var K1=m(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});Qs.setCurve=Qs.weakMap=void 0;var Ym=require("buffer"),NB=require("crypto"),kB=fe(),hae=As(),fae=Ss(),mae=Os(),yae=Cs(),gae=Ym.Buffer.from([42,134,72,206,61,3,1,7]),_ae=Ym.Buffer.from([43,129,4,0,34]),Eae=Ym.Buffer.from([43,129,4,0,35]),bae=Ym.Buffer.from([43,129,4,0,10]);Qs.weakMap=new WeakMap;var wae=t=>{switch(t){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new kB.JOSENotSupported("Unsupported key curve for this operation")}},RB=(t,e)=>{var r;let n;if((0,hae.isCryptoKey)(t))n=NB.KeyObject.from(t);else if((0,fae.default)(t))n=t;else throw new TypeError((0,mae.default)(t,...yae.types));if(n.type==="secret")throw new TypeError('only "private" or "public" type keys can be used for this operation');switch(n.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${n.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${n.asymmetricKeyType.slice(1)}`;case"ec":{if(Qs.weakMap.has(n))return Qs.weakMap.get(n);let s=(r=n.asymmetricKeyDetails)===null||r===void 0?void 0:r.namedCurve;if(!s&&n.type==="private")s=RB((0,NB.createPublicKey)(n),!0);else if(!s){let o=n.export({format:"der",type:"spki"}),a=o[1]<128?14:15,u=o[a],c=o.slice(a+1,a+1+u);if(c.equals(gae))s="prime256v1";else if(c.equals(_ae))s="secp384r1";else if(c.equals(Eae))s="secp521r1";else if(c.equals(bae))s="secp256k1";else throw new kB.JOSENotSupported("Unsupported key curve for this operation")}if(e)return s;let i=wae(s);return Qs.weakMap.set(n,i),i}default:throw new TypeError("Invalid asymmetric key type for this operation")}};function Sae(t,e){Qs.weakMap.set(t,e)}Qs.setCurve=Sae;Qs.default=RB});var o3=m(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});la.ecdhAllowed=la.generateEpk=la.deriveKey=void 0;var H1=require("crypto"),Aae=require("util"),$B=K1(),Au=Dt(),Oae=fe(),r3=As(),FB=ca(),n3=Ss(),s3=Os(),i3=Cs(),t3=(0,Aae.promisify)(H1.generateKeyPair);async function Cae(t,e,r,n,s=new Uint8Array(0),i=new Uint8Array(0)){let o;if((0,r3.isCryptoKey)(t))(0,FB.checkEncCryptoKey)(t,"ECDH"),o=H1.KeyObject.from(t);else if((0,n3.default)(t))o=t;else throw new TypeError((0,s3.default)(t,...i3.types));let a;if((0,r3.isCryptoKey)(e))(0,FB.checkEncCryptoKey)(e,"ECDH","deriveBits"),a=H1.KeyObject.from(e);else if((0,n3.default)(e))a=e;else throw new TypeError((0,s3.default)(e,...i3.types));let u=(0,Au.concat)((0,Au.lengthAndInput)(Au.encoder.encode(r)),(0,Au.lengthAndInput)(s),(0,Au.lengthAndInput)(i),(0,Au.uint32be)(n)),c=(0,H1.diffieHellman)({privateKey:a,publicKey:o});return(0,Au.concatKdf)(c,n,u)}la.deriveKey=Cae;async function vae(t){let e;if((0,r3.isCryptoKey)(t))e=H1.KeyObject.from(t);else if((0,n3.default)(t))e=t;else throw new TypeError((0,s3.default)(t,...i3.types));switch(e.asymmetricKeyType){case"x25519":return t3("x25519");case"x448":return t3("x448");case"ec":{let r=(0,$B.default)(e);return t3("ec",{namedCurve:r})}default:throw new Oae.JOSENotSupported("Invalid or unsupported EPK")}}la.generateEpk=vae;var xae=t=>["P-256","P-384","P-521","X25519","X448"].includes((0,$B.default)(t));la.ecdhAllowed=xae});var qB=m(a3=>{"use strict";Object.defineProperty(a3,"__esModule",{value:!0});var Tae=fe();function Dae(t){if(!(t instanceof Uint8Array)||t.length<8)throw new Tae.JWEInvalid("PBES2 Salt Input must be 8 or more octets")}a3.default=Dae});var u3=m(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.decrypt=_l.encrypt=void 0;var Mae=require("util"),jB=require("crypto"),Pae=L1(),LB=Dt(),Bae=Gr(),UB=Jm(),VB=qB(),Iae=As(),Nae=ca(),kae=Ss(),Rae=Os(),Fae=Cs(),WB=(0,Mae.promisify)(jB.pbkdf2);function zB(t,e){if((0,kae.default)(t))return t.export();if(t instanceof Uint8Array)return t;if((0,Iae.isCryptoKey)(t))return(0,Nae.checkEncCryptoKey)(t,e,"deriveBits","deriveKey"),jB.KeyObject.from(t).export();throw new TypeError((0,Rae.default)(t,...Fae.types,"Uint8Array"))}var $ae=async(t,e,r,n=2048,s=(0,Pae.default)(new Uint8Array(16)))=>{(0,VB.default)(s);let i=(0,LB.p2s)(t,s),o=parseInt(t.slice(13,16),10)>>3,a=zB(e,t),u=await WB(a,i,n,o,`sha${t.slice(8,11)}`);return{encryptedKey:await(0,UB.wrap)(t.slice(-6),u,r),p2c:n,p2s:(0,Bae.encode)(s)}};_l.encrypt=$ae;var qae=async(t,e,r,n,s)=>{(0,VB.default)(s);let i=(0,LB.p2s)(t,s),o=parseInt(t.slice(13,16),10)>>3,a=zB(e,t),u=await WB(a,i,n,o,`sha${t.slice(8,11)}`);return(0,UB.unwrap)(t.slice(-6),u,r)};_l.decrypt=qae});var G1=m(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.setModulusLength=Xs.weakMap=void 0;Xs.weakMap=new WeakMap;var Qm=(t,e)=>{let r=t.readUInt8(1);if((r&128)===0)return e===0?r:Qm(t.subarray(2+r),e-1);let n=r&127;r=0;for(let s=0;s<n;s++){r<<=8;let i=t.readUInt8(2+s);r|=i}return e===0?r:Qm(t.subarray(2+r),e-1)},jae=(t,e)=>{let r=t.readUInt8(1);if((r&128)===0)return Qm(t.subarray(2),e);let n=r&127;return Qm(t.subarray(2+n),e)},Lae=t=>{var e,r;if(Xs.weakMap.has(t))return Xs.weakMap.get(t);let n=(r=(e=t.asymmetricKeyDetails)===null||e===void 0?void 0:e.modulusLength)!==null&&r!==void 0?r:jae(t.export({format:"der",type:"pkcs1"}),t.type==="private"?1:0)-1<<3;return Xs.weakMap.set(t,n),n},Uae=(t,e)=>{Xs.weakMap.set(t,e)};Xs.setModulusLength=Uae;Xs.default=(t,e)=>{if(Lae(t)<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}});var c3=m(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});El.decrypt=El.encrypt=void 0;var J1=require("crypto"),Vae=G1(),Wae=As(),zae=ca(),Kae=Ss(),Hae=Os(),Gae=Cs(),KB=(t,e)=>{if(t.asymmetricKeyType!=="rsa")throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");(0,Vae.default)(t,e)},HB=t=>{switch(t){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return J1.constants.RSA_PKCS1_OAEP_PADDING;case"RSA1_5":return J1.constants.RSA_PKCS1_PADDING;default:return}},GB=t=>{switch(t){case"RSA-OAEP":return"sha1";case"RSA-OAEP-256":return"sha256";case"RSA-OAEP-384":return"sha384";case"RSA-OAEP-512":return"sha512";default:return}};function JB(t,e,...r){if((0,Kae.default)(t))return t;if((0,Wae.isCryptoKey)(t))return(0,zae.checkEncCryptoKey)(t,e,...r),J1.KeyObject.from(t);throw new TypeError((0,Hae.default)(t,...Gae.types))}var Jae=(t,e,r)=>{let n=HB(t),s=GB(t),i=JB(e,t,"wrapKey","encrypt");return KB(i,t),(0,J1.publicEncrypt)({key:i,oaepHash:s,padding:n},r)};El.encrypt=Jae;var Yae=(t,e,r)=>{let n=HB(t),s=GB(t),i=JB(e,t,"unwrapKey","decrypt");return KB(i,t),(0,J1.privateDecrypt)({key:i,oaepHash:s,padding:n},r)};El.decrypt=Yae});var Q1=m(Y1=>{"use strict";Object.defineProperty(Y1,"__esModule",{value:!0});Y1.bitLength=void 0;var Qae=fe(),Xae=L1();function YB(t){switch(t){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new Qae.JOSENotSupported(`Unsupported JWE Algorithm: ${t}`)}}Y1.bitLength=YB;Y1.default=t=>(0,Xae.default)(new Uint8Array(YB(t)>>3))});var Zm=m(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});vs.fromX509=vs.fromSPKI=vs.fromPKCS8=vs.toPKCS8=vs.toSPKI=void 0;var Xm=require("crypto"),QB=require("buffer"),Zae=As(),eue=Ss(),tue=Os(),rue=Cs(),XB=(t,e,r)=>{let n;if((0,Zae.isCryptoKey)(r)){if(!r.extractable)throw new TypeError("CryptoKey is not extractable");n=Xm.KeyObject.from(r)}else if((0,eue.default)(r))n=r;else throw new TypeError((0,tue.default)(r,...rue.types));if(n.type!==t)throw new TypeError(`key is not a ${t} key`);return n.export({format:"pem",type:e})},nue=t=>XB("public","spki",t);vs.toSPKI=nue;var sue=t=>XB("private","pkcs8",t);vs.toPKCS8=sue;var iue=t=>(0,Xm.createPrivateKey)({key:QB.Buffer.from(t.replace(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,""),"base64"),type:"pkcs8",format:"der"});vs.fromPKCS8=iue;var oue=t=>(0,Xm.createPublicKey)({key:QB.Buffer.from(t.replace(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,""),"base64"),type:"spki",format:"der"});vs.fromSPKI=oue;var aue=t=>(0,Xm.createPublicKey)({key:t,type:"spki",format:"pem"});vs.fromX509=aue});var ZB=m(d3=>{"use strict";Object.defineProperty(d3,"__esModule",{value:!0});var Yt=require("buffer"),uue=fe(),cue=2,lue=3,pue=4,due=48,l3=Yt.Buffer.from([0]),e0=Yt.Buffer.from([cue]),hue=Yt.Buffer.from([lue]),fue=Yt.Buffer.from([due]),mue=Yt.Buffer.from([pue]),pa=t=>{if(t<128)return Yt.Buffer.from([t]);let e=Yt.Buffer.alloc(5);e.writeUInt32BE(t,1);let r=1;for(;e[r]===0;)r++;return e[r-1]=128|5-r,e.slice(r-1)},yue=new Map([["P-256",Yt.Buffer.from("06 08 2A 86 48 CE 3D 03 01 07".replace(/ /g,""),"hex")],["secp256k1",Yt.Buffer.from("06 05 2B 81 04 00 0A".replace(/ /g,""),"hex")],["P-384",Yt.Buffer.from("06 05 2B 81 04 00 22".replace(/ /g,""),"hex")],["P-521",Yt.Buffer.from("06 05 2B 81 04 00 23".replace(/ /g,""),"hex")],["ecPublicKey",Yt.Buffer.from("06 07 2A 86 48 CE 3D 02 01".replace(/ /g,""),"hex")],["X25519",Yt.Buffer.from("06 03 2B 65 6E".replace(/ /g,""),"hex")],["X448",Yt.Buffer.from("06 03 2B 65 6F".replace(/ /g,""),"hex")],["Ed25519",Yt.Buffer.from("06 03 2B 65 70".replace(/ /g,""),"hex")],["Ed448",Yt.Buffer.from("06 03 2B 65 71".replace(/ /g,""),"hex")]]),p3=class{constructor(){this.length=0,this.elements=[]}oidFor(e){let r=yue.get(e);if(!r)throw new uue.JOSENotSupported("Invalid or unsupported OID");this.elements.push(r),this.length+=r.length}zero(){this.elements.push(e0,Yt.Buffer.from([1]),l3),this.length+=3}one(){this.elements.push(e0,Yt.Buffer.from([1]),Yt.Buffer.from([1])),this.length+=3}unsignedInteger(e){if(e[0]&128){let r=pa(e.length+1);this.elements.push(e0,r,l3,e),this.length+=2+r.length+e.length}else{let r=0;for(;e[r]===0&&(e[r+1]&128)===0;)r++;let n=pa(e.length-r);this.elements.push(e0,pa(e.length-r),e.slice(r)),this.length+=1+n.length+e.length-r}}octStr(e){let r=pa(e.length);this.elements.push(mue,pa(e.length),e),this.length+=1+r.length+e.length}bitStr(e){let r=pa(e.length+1);this.elements.push(hue,pa(e.length+1),l3,e),this.length+=1+r.length+e.length+1}add(e){this.elements.push(e),this.length+=e.length}end(e=fue){let r=pa(this.length);return Yt.Buffer.concat([e,r,...this.elements],1+r.length+this.length)}};d3.default=p3});var X1=m(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.jwkImport=Ni.jwkExport=Ni.rsaPssParams=Ni.oneShotCallback=void 0;var[da,t0]=process.versions.node.split(".").map(t=>parseInt(t,10));Ni.oneShotCallback=da>=16||da===15&&t0>=13;Ni.rsaPssParams=!("electron"in process.versions)&&(da>=17||da===16&&t0>=9);Ni.jwkExport=da>=16||da===15&&t0>=9;Ni.jwkImport=da>=16||da===15&&t0>=12});var tI=m(h3=>{"use strict";Object.defineProperty(h3,"__esModule",{value:!0});var _r=require("buffer"),ho=require("crypto"),gue=Gr(),_ue=fe(),eI=K1(),Eue=G1(),Zs=ZB(),bue=X1(),wue=t=>{if(bue.jwkImport&&t.kty!=="oct")return t.d?(0,ho.createPrivateKey)({format:"jwk",key:t}):(0,ho.createPublicKey)({format:"jwk",key:t});switch(t.kty){case"oct":return(0,ho.createSecretKey)((0,gue.decode)(t.k));case"RSA":{let e=new Zs.default,r=t.d!==void 0,n=_r.Buffer.from(t.n,"base64"),s=_r.Buffer.from(t.e,"base64");r?(e.zero(),e.unsignedInteger(n),e.unsignedInteger(s),e.unsignedInteger(_r.Buffer.from(t.d,"base64")),e.unsignedInteger(_r.Buffer.from(t.p,"base64")),e.unsignedInteger(_r.Buffer.from(t.q,"base64")),e.unsignedInteger(_r.Buffer.from(t.dp,"base64")),e.unsignedInteger(_r.Buffer.from(t.dq,"base64")),e.unsignedInteger(_r.Buffer.from(t.qi,"base64"))):(e.unsignedInteger(n),e.unsignedInteger(s));let o={key:e.end(),format:"der",type:"pkcs1"},a=r?(0,ho.createPrivateKey)(o):(0,ho.createPublicKey)(o);return(0,Eue.setModulusLength)(a,n.length<<3),a}case"EC":{let e=new Zs.default,r=t.d!==void 0,n=_r.Buffer.concat([_r.Buffer.alloc(1,4),_r.Buffer.from(t.x,"base64"),_r.Buffer.from(t.y,"base64")]);if(r){e.zero();let a=new Zs.default;a.oidFor("ecPublicKey"),a.oidFor(t.crv),e.add(a.end());let u=new Zs.default;u.one(),u.octStr(_r.Buffer.from(t.d,"base64"));let c=new Zs.default;c.bitStr(n);let l=c.end(_r.Buffer.from([161]));u.add(l);let p=u.end(),d=new Zs.default;d.add(p);let h=d.end(_r.Buffer.from([4]));e.add(h);let f=e.end(),y=(0,ho.createPrivateKey)({key:f,format:"der",type:"pkcs8"});return(0,eI.setCurve)(y,t.crv),y}let s=new Zs.default;s.oidFor("ecPublicKey"),s.oidFor(t.crv),e.add(s.end()),e.bitStr(n);let i=e.end(),o=(0,ho.createPublicKey)({key:i,format:"der",type:"spki"});return(0,eI.setCurve)(o,t.crv),o}case"OKP":{let e=new Zs.default;if(t.d!==void 0){e.zero();let i=new Zs.default;i.oidFor(t.crv),e.add(i.end());let o=new Zs.default;o.octStr(_r.Buffer.from(t.d,"base64"));let a=o.end(_r.Buffer.from([4]));e.add(a);let u=e.end();return(0,ho.createPrivateKey)({key:u,format:"der",type:"pkcs8"})}let n=new Zs.default;n.oidFor(t.crv),e.add(n.end()),e.bitStr(_r.Buffer.from(t.x,"base64"));let s=e.end();return(0,ho.createPublicKey)({key:s,format:"der",type:"spki"})}default:throw new _ue.JOSENotSupported('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}};h3.default=wue});var Z1=m(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});ki.importJWK=ki.importPKCS8=ki.importX509=ki.importSPKI=void 0;var Sue=Gr(),f3=Zm(),rI=tI(),nI=fe(),Aue=xn();async function Oue(t,e,r){if(typeof t!="string"||t.indexOf("-----BEGIN PUBLIC KEY-----")!==0)throw new TypeError('"spki" must be SPKI formatted string');return(0,f3.fromSPKI)(t,e,r)}ki.importSPKI=Oue;async function Cue(t,e,r){if(typeof t!="string"||t.indexOf("-----BEGIN CERTIFICATE-----")!==0)throw new TypeError('"x509" must be X.509 formatted string');return(0,f3.fromX509)(t,e,r)}ki.importX509=Cue;async function vue(t,e,r){if(typeof t!="string"||t.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return(0,f3.fromPKCS8)(t,e,r)}ki.importPKCS8=vue;async function xue(t,e,r){var n;if(!(0,Aue.default)(t))throw new TypeError("JWK must be an object");switch(e||(e=t.alg),t.kty){case"oct":if(typeof t.k!="string"||!t.k)throw new TypeError('missing "k" (Key Value) Parameter value');return r??(r=t.ext!==!0),r?(0,rI.default)({...t,alg:e,ext:(n=t.ext)!==null&&n!==void 0?n:!1}):(0,Sue.decode)(t.k);case"RSA":if(t.oth!==void 0)throw new nI.JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return(0,rI.default)({...t,alg:e});default:throw new nI.JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}ki.importJWK=xue});var ed=m(m3=>{"use strict";Object.defineProperty(m3,"__esModule",{value:!0});var sI=Os(),Ri=Cs(),Tue=(t,e)=>{if(!(e instanceof Uint8Array)){if(!(0,Ri.default)(e))throw new TypeError((0,sI.withAlg)(t,e,...Ri.types,"Uint8Array"));if(e.type!=="secret")throw new TypeError(`${Ri.types.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},Due=(t,e,r)=>{if(!(0,Ri.default)(e))throw new TypeError((0,sI.withAlg)(t,e,...Ri.types));if(e.type==="secret")throw new TypeError(`${Ri.types.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(r==="sign"&&e.type==="public")throw new TypeError(`${Ri.types.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(r==="decrypt"&&e.type==="public")throw new TypeError(`${Ri.types.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(e.algorithm&&r==="verify"&&e.type==="private")throw new TypeError(`${Ri.types.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(e.algorithm&&r==="encrypt"&&e.type==="private")throw new TypeError(`${Ri.types.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},Mue=(t,e,r)=>{t.startsWith("HS")||t==="dir"||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?Tue(t,e):Due(t,e,r)};m3.default=Mue});var E3=m(_3=>{"use strict";Object.defineProperty(_3,"__esModule",{value:!0});var y3=require("crypto"),Pue=qS(),Bue=VS(),Iue=Dt(),Nue=KS(),kue=As(),Rue=ca(),iI=Ss(),Fue=Os(),g3=fe(),oI=Km(),$ue=Cs();function que(t,e,r,n,s){let i=parseInt(t.slice(1,4),10);(0,iI.default)(r)&&(r=r.export());let o=r.subarray(i>>3),a=r.subarray(0,i>>3),u=`aes-${i}-cbc`;if(!(0,oI.default)(u))throw new g3.JOSENotSupported(`alg ${t} is not supported by your javascript runtime`);let c=(0,y3.createCipheriv)(u,o,n),l=(0,Iue.concat)(c.update(e),c.final()),p=parseInt(t.slice(-3),10),d=(0,Nue.default)(s,n,l,p,a,i);return{ciphertext:l,tag:d}}function jue(t,e,r,n,s){let o=`aes-${parseInt(t.slice(1,4),10)}-gcm`;if(!(0,oI.default)(o))throw new g3.JOSENotSupported(`alg ${t} is not supported by your javascript runtime`);let a=(0,y3.createCipheriv)(o,r,n,{authTagLength:16});s.byteLength&&a.setAAD(s,{plaintextLength:e.length});let u=a.update(e);a.final();let c=a.getAuthTag();return{ciphertext:u,tag:c}}var Lue=(t,e,r,n,s)=>{let i;if((0,kue.isCryptoKey)(r))(0,Rue.checkEncCryptoKey)(r,t,"encrypt"),i=y3.KeyObject.from(r);else if(r instanceof Uint8Array||(0,iI.default)(r))i=r;else throw new TypeError((0,Fue.default)(r,...$ue.types,"Uint8Array"));switch((0,Bue.default)(t,i),(0,Pue.default)(t,n),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return que(t,e,i,n,s);case"A128GCM":case"A192GCM":case"A256GCM":return jue(t,e,i,n,s);default:throw new g3.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}};_3.default=Lue});var b3=m(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.unwrap=bl.wrap=void 0;var Uue=E3(),Vue=QS(),Wue=Wm(),aI=Gr();async function zue(t,e,r,n){let s=t.slice(0,7);n||(n=(0,Wue.default)(s));let{ciphertext:i,tag:o}=await(0,Uue.default)(s,r,e,n,new Uint8Array(0));return{encryptedKey:i,iv:(0,aI.encode)(n),tag:(0,aI.encode)(o)}}bl.wrap=zue;async function Kue(t,e,r,n,s){let i=t.slice(0,7);return(0,Vue.default)(i,e,r,n,s,new Uint8Array(0))}bl.unwrap=Kue});var lI=m(w3=>{"use strict";Object.defineProperty(w3,"__esModule",{value:!0});var uI=Jm(),cI=o3(),Hue=u3(),Gue=c3(),td=Gr(),Mt=fe(),Jue=Q1(),Yue=Z1(),Que=ed(),Xue=xn(),Zue=b3();async function ece(t,e,r,n,s){switch((0,Que.default)(t,e,"decrypt"),t){case"dir":{if(r!==void 0)throw new Mt.JWEInvalid("Encountered unexpected JWE Encrypted Key");return e}case"ECDH-ES":if(r!==void 0)throw new Mt.JWEInvalid("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!(0,Xue.default)(n.epk))throw new Mt.JWEInvalid('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!cI.ecdhAllowed(e))throw new Mt.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let i=await(0,Yue.importJWK)(n.epk,t),o,a;if(n.apu!==void 0){if(typeof n.apu!="string")throw new Mt.JWEInvalid('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{o=(0,td.decode)(n.apu)}catch{throw new Mt.JWEInvalid("Failed to base64url decode the apu")}}if(n.apv!==void 0){if(typeof n.apv!="string")throw new Mt.JWEInvalid('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{a=(0,td.decode)(n.apv)}catch{throw new Mt.JWEInvalid("Failed to base64url decode the apv")}}let u=await cI.deriveKey(i,e,t==="ECDH-ES"?n.enc:t,t==="ECDH-ES"?(0,Jue.bitLength)(n.enc):parseInt(t.slice(-5,-2),10),o,a);if(t==="ECDH-ES")return u;if(r===void 0)throw new Mt.JWEInvalid("JWE Encrypted Key missing");return(0,uI.unwrap)(t.slice(-6),u,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(r===void 0)throw new Mt.JWEInvalid("JWE Encrypted Key missing");return(0,Gue.decrypt)(t,e,r)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(r===void 0)throw new Mt.JWEInvalid("JWE Encrypted Key missing");if(typeof n.p2c!="number")throw new Mt.JWEInvalid('JOSE Header "p2c" (PBES2 Count) missing or invalid');let i=s?.maxPBES2Count||1e4;if(n.p2c>i)throw new Mt.JWEInvalid('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof n.p2s!="string")throw new Mt.JWEInvalid('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let o;try{o=(0,td.decode)(n.p2s)}catch{throw new Mt.JWEInvalid("Failed to base64url decode the p2s")}return(0,Hue.decrypt)(t,e,r,n.p2c,o)}case"A128KW":case"A192KW":case"A256KW":{if(r===void 0)throw new Mt.JWEInvalid("JWE Encrypted Key missing");return(0,uI.unwrap)(t,e,r)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(r===void 0)throw new Mt.JWEInvalid("JWE Encrypted Key missing");if(typeof n.iv!="string")throw new Mt.JWEInvalid('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof n.tag!="string")throw new Mt.JWEInvalid('JOSE Header "tag" (Authentication Tag) missing or invalid');let i;try{i=(0,td.decode)(n.iv)}catch{throw new Mt.JWEInvalid("Failed to base64url decode the iv")}let o;try{o=(0,td.decode)(n.tag)}catch{throw new Mt.JWEInvalid("Failed to base64url decode the tag")}return(0,Zue.unwrap)(t,e,r,i,o)}default:throw new Mt.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}}w3.default=ece});var wl=m(S3=>{"use strict";Object.defineProperty(S3,"__esModule",{value:!0});var tce=fe();function rce(t,e,r,n,s){if(s.crit!==void 0&&n.crit===void 0)throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||n.crit===void 0)return new Set;if(!Array.isArray(n.crit)||n.crit.length===0||n.crit.some(o=>typeof o!="string"||o.length===0))throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let i;r!==void 0?i=new Map([...Object.entries(r),...e.entries()]):i=e;for(let o of n.crit){if(!i.has(o))throw new tce.JOSENotSupported(`Extension Header Parameter "${o}" is not recognized`);if(s[o]===void 0)throw new t(`Extension Header Parameter "${o}" is missing`);if(i.get(o)&&n[o]===void 0)throw new t(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(n.crit)}S3.default=rce});var O3=m(A3=>{"use strict";Object.defineProperty(A3,"__esModule",{value:!0});var nce=(t,e)=>{if(e!==void 0&&(!Array.isArray(e)||e.some(r=>typeof r!="string")))throw new TypeError(`"${t}" option must be an array of strings`);if(e)return new Set(e)};A3.default=nce});var n0=m(r0=>{"use strict";Object.defineProperty(r0,"__esModule",{value:!0});r0.flattenedDecrypt=void 0;var Sl=Gr(),sce=QS(),ice=XS(),ot=fe(),oce=yl(),C3=xn(),ace=lI(),rd=Dt(),uce=Q1(),cce=wl(),pI=O3();async function lce(t,e,r){var n;if(!(0,C3.default)(t))throw new ot.JWEInvalid("Flattened JWE must be an object");if(t.protected===void 0&&t.header===void 0&&t.unprotected===void 0)throw new ot.JWEInvalid("JOSE Header missing");if(typeof t.iv!="string")throw new ot.JWEInvalid("JWE Initialization Vector missing or incorrect type");if(typeof t.ciphertext!="string")throw new ot.JWEInvalid("JWE Ciphertext missing or incorrect type");if(typeof t.tag!="string")throw new ot.JWEInvalid("JWE Authentication Tag missing or incorrect type");if(t.protected!==void 0&&typeof t.protected!="string")throw new ot.JWEInvalid("JWE Protected Header incorrect type");if(t.encrypted_key!==void 0&&typeof t.encrypted_key!="string")throw new ot.JWEInvalid("JWE Encrypted Key incorrect type");if(t.aad!==void 0&&typeof t.aad!="string")throw new ot.JWEInvalid("JWE AAD incorrect type");if(t.header!==void 0&&!(0,C3.default)(t.header))throw new ot.JWEInvalid("JWE Shared Unprotected Header incorrect type");if(t.unprotected!==void 0&&!(0,C3.default)(t.unprotected))throw new ot.JWEInvalid("JWE Per-Recipient Unprotected Header incorrect type");let s;if(t.protected)try{let E=(0,Sl.decode)(t.protected);s=JSON.parse(rd.decoder.decode(E))}catch{throw new ot.JWEInvalid("JWE Protected Header is invalid")}if(!(0,oce.default)(s,t.header,t.unprotected))throw new ot.JWEInvalid("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let i={...s,...t.header,...t.unprotected};if((0,cce.default)(ot.JWEInvalid,new Map,r?.crit,s,i),i.zip!==void 0){if(!s||!s.zip)throw new ot.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(i.zip!=="DEF")throw new ot.JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:o,enc:a}=i;if(typeof o!="string"||!o)throw new ot.JWEInvalid("missing JWE Algorithm (alg) in JWE Header");if(typeof a!="string"||!a)throw new ot.JWEInvalid("missing JWE Encryption Algorithm (enc) in JWE Header");let u=r&&(0,pI.default)("keyManagementAlgorithms",r.keyManagementAlgorithms),c=r&&(0,pI.default)("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(u&&!u.has(o))throw new ot.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(c&&!c.has(a))throw new ot.JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter not allowed');let l;if(t.encrypted_key!==void 0)try{l=(0,Sl.decode)(t.encrypted_key)}catch{throw new ot.JWEInvalid("Failed to base64url decode the encrypted_key")}let p=!1;typeof e=="function"&&(e=await e(s,t),p=!0);let d;try{d=await(0,ace.default)(o,e,l,i,r)}catch(E){if(E instanceof TypeError||E instanceof ot.JWEInvalid||E instanceof ot.JOSENotSupported)throw E;d=(0,uce.default)(a)}let h,f;try{h=(0,Sl.decode)(t.iv)}catch{throw new ot.JWEInvalid("Failed to base64url decode the iv")}try{f=(0,Sl.decode)(t.tag)}catch{throw new ot.JWEInvalid("Failed to base64url decode the tag")}let y=rd.encoder.encode((n=t.protected)!==null&&n!==void 0?n:""),g;t.aad!==void 0?g=(0,rd.concat)(y,rd.encoder.encode("."),rd.encoder.encode(t.aad)):g=y;let _;try{_=(0,Sl.decode)(t.ciphertext)}catch{throw new ot.JWEInvalid("Failed to base64url decode the ciphertext")}let w=await(0,sce.default)(a,d,_,h,f,g);i.zip==="DEF"&&(w=await(r?.inflateRaw||ice.inflate)(w));let O={plaintext:w};if(t.protected!==void 0&&(O.protectedHeader=s),t.aad!==void 0)try{O.additionalAuthenticatedData=(0,Sl.decode)(t.aad)}catch{throw new ot.JWEInvalid("Failed to base64url decode the aad")}return t.unprotected!==void 0&&(O.sharedUnprotectedHeader=t.unprotected),t.header!==void 0&&(O.unprotectedHeader=t.header),p?{...O,key:e}:O}r0.flattenedDecrypt=lce});var v3=m(s0=>{"use strict";Object.defineProperty(s0,"__esModule",{value:!0});s0.compactDecrypt=void 0;var pce=n0(),dI=fe(),dce=Dt();async function hce(t,e,r){if(t instanceof Uint8Array&&(t=dce.decoder.decode(t)),typeof t!="string")throw new dI.JWEInvalid("Compact JWE must be a string or Uint8Array");let{0:n,1:s,2:i,3:o,4:a,length:u}=t.split(".");if(u!==5)throw new dI.JWEInvalid("Invalid Compact JWE");let c=await(0,pce.flattenedDecrypt)({ciphertext:o,iv:i||void 0,protected:n||void 0,tag:a||void 0,encrypted_key:s||void 0},e,r),l={plaintext:c.plaintext,protectedHeader:c.protectedHeader};return typeof e=="function"?{...l,key:c.key}:l}s0.compactDecrypt=hce});var fI=m(o0=>{"use strict";Object.defineProperty(o0,"__esModule",{value:!0});o0.generalDecrypt=void 0;var fce=n0(),i0=fe(),hI=xn();async function mce(t,e,r){if(!(0,hI.default)(t))throw new i0.JWEInvalid("General JWE must be an object");if(!Array.isArray(t.recipients)||!t.recipients.every(hI.default))throw new i0.JWEInvalid("JWE Recipients missing or incorrect type");if(!t.recipients.length)throw new i0.JWEInvalid("JWE Recipients has no members");for(let n of t.recipients)try{return await(0,fce.flattenedDecrypt)({aad:t.aad,ciphertext:t.ciphertext,encrypted_key:n.encrypted_key,header:n.header,iv:t.iv,protected:t.protected,tag:t.tag,unprotected:t.unprotected},e,r)}catch{}throw new i0.JWEDecryptionFailed}o0.generalDecrypt=mce});var mI=m(T3=>{"use strict";Object.defineProperty(T3,"__esModule",{value:!0});var yce=2,gce=48,x3=class{constructor(e){if(e[0]!==gce)throw new TypeError;if(this.buffer=e,this.offset=1,this.decodeLength()!==e.length-this.offset)throw new TypeError}decodeLength(){let e=this.buffer[this.offset++];if(e&128){let r=e&-129;e=0;for(let n=0;n<r;n++)e=e<<8|this.buffer[this.offset+n];this.offset+=r}return e}unsignedInteger(){if(this.buffer[this.offset++]!==yce)throw new TypeError;let e=this.decodeLength();this.buffer[this.offset]===0&&(this.offset++,e--);let r=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,r}end(){if(this.offset!==this.buffer.length)throw new TypeError}};T3.default=x3});var yI=m(M3=>{"use strict";Object.defineProperty(M3,"__esModule",{value:!0});var a0=require("crypto"),vr=Gr(),_ce=mI(),u0=fe(),D3=K1(),Ece=As(),bce=Ss(),wce=Os(),Sce=Cs(),Ace=X1(),c0=t=>{let e;if((0,Ece.isCryptoKey)(t)){if(!t.extractable)throw new TypeError("CryptoKey is not extractable");e=a0.KeyObject.from(t)}else if((0,bce.default)(t))e=t;else{if(t instanceof Uint8Array)return{kty:"oct",k:(0,vr.encode)(t)};throw new TypeError((0,wce.default)(t,...Sce.types,"Uint8Array"))}if(Ace.jwkExport){if(e.type!=="secret"&&!["rsa","ec","ed25519","x25519","ed448","x448"].includes(e.asymmetricKeyType))throw new u0.JOSENotSupported("Unsupported key asymmetricKeyType");return e.export({format:"jwk"})}switch(e.type){case"secret":return{kty:"oct",k:(0,vr.encode)(e.export())};case"private":case"public":switch(e.asymmetricKeyType){case"rsa":{let r=e.export({format:"der",type:"pkcs1"}),n=new _ce.default(r);e.type==="private"&&n.unsignedInteger();let s=(0,vr.encode)(n.unsignedInteger()),i=(0,vr.encode)(n.unsignedInteger()),o;return e.type==="private"&&(o={d:(0,vr.encode)(n.unsignedInteger()),p:(0,vr.encode)(n.unsignedInteger()),q:(0,vr.encode)(n.unsignedInteger()),dp:(0,vr.encode)(n.unsignedInteger()),dq:(0,vr.encode)(n.unsignedInteger()),qi:(0,vr.encode)(n.unsignedInteger())}),n.end(),{kty:"RSA",n:s,e:i,...o}}case"ec":{let r=(0,D3.default)(e),n,s,i;switch(r){case"secp256k1":n=64,s=33,i=-1;break;case"P-256":n=64,s=36,i=-1;break;case"P-384":n=96,s=35,i=-3;break;case"P-521":n=132,s=35,i=-3;break;default:throw new u0.JOSENotSupported("Unsupported curve")}if(e.type==="public"){let a=e.export({type:"spki",format:"der"});return{kty:"EC",crv:r,x:(0,vr.encode)(a.subarray(-n,-n/2)),y:(0,vr.encode)(a.subarray(-n/2))}}let o=e.export({type:"pkcs8",format:"der"});return o.length<100&&(s+=i),{...c0((0,a0.createPublicKey)(e)),d:(0,vr.encode)(o.subarray(s,s+n/2))}}case"ed25519":case"x25519":{let r=(0,D3.default)(e);if(e.type==="public"){let s=e.export({type:"spki",format:"der"});return{kty:"OKP",crv:r,x:(0,vr.encode)(s.subarray(-32))}}let n=e.export({type:"pkcs8",format:"der"});return{...c0((0,a0.createPublicKey)(e)),d:(0,vr.encode)(n.subarray(-32))}}case"ed448":case"x448":{let r=(0,D3.default)(e);if(e.type==="public"){let s=e.export({type:"spki",format:"der"});return{kty:"OKP",crv:r,x:(0,vr.encode)(s.subarray(r==="Ed448"?-57:-56))}}let n=e.export({type:"pkcs8",format:"der"});return{...c0((0,a0.createPublicKey)(e)),d:(0,vr.encode)(n.subarray(r==="Ed448"?-57:-56))}}default:throw new u0.JOSENotSupported("Unsupported key asymmetricKeyType")}default:throw new u0.JOSENotSupported("Unsupported key type")}};M3.default=c0});var P3=m(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.exportJWK=ha.exportPKCS8=ha.exportSPKI=void 0;var Oce=Zm(),Cce=Zm(),vce=yI();async function xce(t){return(0,Oce.toSPKI)(t)}ha.exportSPKI=xce;async function Tce(t){return(0,Cce.toPKCS8)(t)}ha.exportPKCS8=Tce;async function Dce(t){return(0,vce.default)(t)}ha.exportJWK=Dce});var N3=m(I3=>{"use strict";Object.defineProperty(I3,"__esModule",{value:!0});var gI=Jm(),B3=o3(),Mce=u3(),Pce=c3(),_I=Gr(),Al=Q1(),EI=fe(),Bce=P3(),Ice=ed(),Nce=b3();async function kce(t,e,r,n,s={}){let i,o,a;switch((0,Ice.default)(t,r,"encrypt"),t){case"dir":{a=r;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!B3.ecdhAllowed(r))throw new EI.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:u,apv:c}=s,{epk:l}=s;l||(l=(await B3.generateEpk(r)).privateKey);let{x:p,y:d,crv:h,kty:f}=await(0,Bce.exportJWK)(l),y=await B3.deriveKey(r,l,t==="ECDH-ES"?e:t,t==="ECDH-ES"?(0,Al.bitLength)(e):parseInt(t.slice(-5,-2),10),u,c);if(o={epk:{x:p,crv:h,kty:f}},f==="EC"&&(o.epk.y=d),u&&(o.apu=(0,_I.encode)(u)),c&&(o.apv=(0,_I.encode)(c)),t==="ECDH-ES"){a=y;break}a=n||(0,Al.default)(e);let g=t.slice(-6);i=await(0,gI.wrap)(g,y,a);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{a=n||(0,Al.default)(e),i=await(0,Pce.encrypt)(t,r,a);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{a=n||(0,Al.default)(e);let{p2c:u,p2s:c}=s;({encryptedKey:i,...o}=await(0,Mce.encrypt)(t,r,a,u,c));break}case"A128KW":case"A192KW":case"A256KW":{a=n||(0,Al.default)(e),i=await(0,gI.wrap)(t,r,a);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{a=n||(0,Al.default)(e);let{iv:u}=s;({encryptedKey:i,...o}=await(0,Nce.wrap)(t,r,a,u));break}default:throw new EI.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:a,encryptedKey:i,parameters:o}}I3.default=kce});var l0=m(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.FlattenedEncrypt=Cu.unprotected=void 0;var Ol=Gr(),bI=E3(),Rce=XS(),Fce=Wm(),$ce=N3(),Ou=fe(),qce=yl(),Cl=Dt(),jce=wl();Cu.unprotected=Symbol();var k3=class{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}async encrypt(e,r){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new Ou.JWEInvalid("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!(0,qce.default)(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new Ou.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let n={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if((0,jce.default)(Ou.JWEInvalid,new Map,r?.crit,this._protectedHeader,n),n.zip!==void 0){if(!this._protectedHeader||!this._protectedHeader.zip)throw new Ou.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(n.zip!=="DEF")throw new Ou.JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:s,enc:i}=n;if(typeof s!="string"||!s)throw new Ou.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof i!="string"||!i)throw new Ou.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let o;if(s==="dir"){if(this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if(s==="ECDH-ES"&&this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");let a;{let f;({cek:a,encryptedKey:o,parameters:f}=await(0,$ce.default)(s,i,e,this._cek,this._keyManagementParameters)),f&&(r&&Cu.unprotected in r?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...f}:this.setUnprotectedHeader(f):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...f}:this.setProtectedHeader(f))}this._iv||(this._iv=(0,Fce.default)(i));let u,c,l;this._protectedHeader?c=Cl.encoder.encode((0,Ol.encode)(JSON.stringify(this._protectedHeader))):c=Cl.encoder.encode(""),this._aad?(l=(0,Ol.encode)(this._aad),u=(0,Cl.concat)(c,Cl.encoder.encode("."),Cl.encoder.encode(l))):u=c;let p,d;if(n.zip==="DEF"){let f=await(r?.deflateRaw||Rce.deflate)(this._plaintext);({ciphertext:p,tag:d}=await(0,bI.default)(i,f,a,this._iv,u))}else({ciphertext:p,tag:d}=await(0,bI.default)(i,this._plaintext,a,this._iv,u));let h={ciphertext:(0,Ol.encode)(p),iv:(0,Ol.encode)(this._iv),tag:(0,Ol.encode)(d)};return o&&(h.encrypted_key=(0,Ol.encode)(o)),l&&(h.aad=l),this._protectedHeader&&(h.protected=Cl.decoder.decode(c)),this._sharedUnprotectedHeader&&(h.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(h.header=this._unprotectedHeader),h}};Cu.FlattenedEncrypt=k3});var wI=m(p0=>{"use strict";Object.defineProperty(p0,"__esModule",{value:!0});p0.GeneralEncrypt=void 0;var R3=l0(),fa=fe(),Lce=Q1(),Uce=yl(),Vce=N3(),Wce=Gr(),zce=wl(),F3=class{constructor(e,r,n){this.parent=e,this.key=r,this.options=n}setUnprotectedHeader(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addRecipient(...e){return this.parent.addRecipient(...e)}encrypt(...e){return this.parent.encrypt(...e)}done(){return this.parent}},$3=class{constructor(e){this._recipients=[],this._plaintext=e}addRecipient(e,r){let n=new F3(this,e,{crit:r?.crit});return this._recipients.push(n),n}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}async encrypt(e){var r,n,s;if(!this._recipients.length)throw new fa.JWEInvalid("at least one recipient must be added");if(e={deflateRaw:e?.deflateRaw},this._recipients.length===1){let[u]=this._recipients,c=await new R3.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(u.unprotectedHeader).encrypt(u.key,{...u.options,...e}),l={ciphertext:c.ciphertext,iv:c.iv,recipients:[{}],tag:c.tag};return c.aad&&(l.aad=c.aad),c.protected&&(l.protected=c.protected),c.unprotected&&(l.unprotected=c.unprotected),c.encrypted_key&&(l.recipients[0].encrypted_key=c.encrypted_key),c.header&&(l.recipients[0].header=c.header),l}let i;for(let u=0;u<this._recipients.length;u++){let c=this._recipients[u];if(!(0,Uce.default)(this._protectedHeader,this._unprotectedHeader,c.unprotectedHeader))throw new fa.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let l={...this._protectedHeader,...this._unprotectedHeader,...c.unprotectedHeader},{alg:p}=l;if(typeof p!="string"||!p)throw new fa.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(p==="dir"||p==="ECDH-ES")throw new fa.JWEInvalid('"dir" and "ECDH-ES" alg may only be used with a single recipient');if(typeof l.enc!="string"||!l.enc)throw new fa.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(!i)i=l.enc;else if(i!==l.enc)throw new fa.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');if((0,zce.default)(fa.JWEInvalid,new Map,c.options.crit,this._protectedHeader,l),l.zip!==void 0&&(!this._protectedHeader||!this._protectedHeader.zip))throw new fa.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}let o=(0,Lce.default)(i),a={ciphertext:"",iv:"",recipients:[],tag:""};for(let u=0;u<this._recipients.length;u++){let c=this._recipients[u],l={};a.recipients.push(l);let d={...this._protectedHeader,...this._unprotectedHeader,...c.unprotectedHeader}.alg.startsWith("PBES2")?2048+u:void 0;if(u===0){let y=await new R3.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(o).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(c.unprotectedHeader).setKeyManagementParameters({p2c:d}).encrypt(c.key,{...c.options,...e,[R3.unprotected]:!0});a.ciphertext=y.ciphertext,a.iv=y.iv,a.tag=y.tag,y.aad&&(a.aad=y.aad),y.protected&&(a.protected=y.protected),y.unprotected&&(a.unprotected=y.unprotected),l.encrypted_key=y.encrypted_key,y.header&&(l.header=y.header);continue}let{encryptedKey:h,parameters:f}=await(0,Vce.default)(((r=c.unprotectedHeader)===null||r===void 0?void 0:r.alg)||((n=this._protectedHeader)===null||n===void 0?void 0:n.alg)||((s=this._unprotectedHeader)===null||s===void 0?void 0:s.alg),i,c.key,o,{p2c:d});l.encrypted_key=(0,Wce.encode)(h),(c.unprotectedHeader||f)&&(l.header={...c.unprotectedHeader,...f})}return a}};p0.GeneralEncrypt=$3});var j3=m(q3=>{"use strict";Object.defineProperty(q3,"__esModule",{value:!0});var Kce=fe();function Hce(t){switch(t){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"EdDSA":return;default:throw new Kce.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}q3.default=Hce});var V3=m(U3=>{"use strict";Object.defineProperty(U3,"__esModule",{value:!0});var SI=require("crypto"),Gce=K1(),Jce=fe(),L3=G1(),vl=X1(),AI={padding:SI.constants.RSA_PKCS1_PSS_PADDING,saltLength:SI.constants.RSA_PSS_SALTLEN_DIGEST},Yce=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);function Qce(t,e){switch(t){case"EdDSA":if(!["ed25519","ed448"].includes(e.asymmetricKeyType))throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");return e;case"RS256":case"RS384":case"RS512":if(e.asymmetricKeyType!=="rsa")throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,L3.default)(e,t),e;case(vl.rsaPssParams&&"PS256"):case(vl.rsaPssParams&&"PS384"):case(vl.rsaPssParams&&"PS512"):if(e.asymmetricKeyType==="rsa-pss"){let{hashAlgorithm:r,mgf1HashAlgorithm:n,saltLength:s}=e.asymmetricKeyDetails,i=parseInt(t.slice(-3),10);if(r!==void 0&&(r!==`sha${i}`||n!==r))throw new TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${t}`);if(s!==void 0&&s>i>>3)throw new TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${t}`)}else if(e.asymmetricKeyType!=="rsa")throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");return(0,L3.default)(e,t),{key:e,...AI};case(!vl.rsaPssParams&&"PS256"):case(!vl.rsaPssParams&&"PS384"):case(!vl.rsaPssParams&&"PS512"):if(e.asymmetricKeyType!=="rsa")throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,L3.default)(e,t),{key:e,...AI};case"ES256":case"ES256K":case"ES384":case"ES512":{if(e.asymmetricKeyType!=="ec")throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let r=(0,Gce.default)(e),n=Yce.get(t);if(r!==n)throw new TypeError(`Invalid key curve for the algorithm, its curve must be ${n}, got ${r}`);return{dsaEncoding:"ieee-p1363",key:e}}default:throw new Jce.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}U3.default=Qce});var OI=m(W3=>{"use strict";Object.defineProperty(W3,"__esModule",{value:!0});var Xce=fe();function Zce(t){switch(t){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new Xce.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}W3.default=Zce});var H3=m(K3=>{"use strict";Object.defineProperty(K3,"__esModule",{value:!0});var z3=require("crypto"),ele=As(),tle=ca(),CI=Os(),vI=Cs();function rle(t,e,r){if(e instanceof Uint8Array){if(!t.startsWith("HS"))throw new TypeError((0,CI.default)(e,...vI.types));return(0,z3.createSecretKey)(e)}if(e instanceof z3.KeyObject)return e;if((0,ele.isCryptoKey)(e))return(0,tle.checkSigCryptoKey)(e,t,r),z3.KeyObject.from(e);throw new TypeError((0,CI.default)(e,...vI.types,"Uint8Array"))}K3.default=rle});var Y3=m(J3=>{"use strict";Object.defineProperty(J3,"__esModule",{value:!0});var d0=require("crypto"),nle=require("util"),sle=j3(),ile=OI(),ole=V3(),ale=H3(),G3;d0.sign.length>3?G3=(0,nle.promisify)(d0.sign):G3=d0.sign;var ule=async(t,e,r)=>{let n=(0,ale.default)(t,e,"sign");if(t.startsWith("HS")){let s=d0.createHmac((0,ile.default)(t),n);return s.update(r),s.digest()}return G3((0,sle.default)(t),r,(0,ole.default)(t,n))};J3.default=ule});var xI=m(X3=>{"use strict";Object.defineProperty(X3,"__esModule",{value:!0});var h0=require("crypto"),cle=require("util"),lle=j3(),ple=V3(),dle=Y3(),hle=H3(),fle=X1(),Q3;h0.verify.length>4&&fle.oneShotCallback?Q3=(0,cle.promisify)(h0.verify):Q3=h0.verify;var mle=async(t,e,r,n)=>{let s=(0,hle.default)(t,e,"verify");if(t.startsWith("HS")){let a=await(0,dle.default)(t,s,n),u=r;try{return h0.timingSafeEqual(u,a)}catch{return!1}}let i=(0,lle.default)(t),o=(0,ple.default)(t,s);try{return await Q3(i,n,o,r)}catch{return!1}};X3.default=mle});var m0=m(f0=>{"use strict";Object.defineProperty(f0,"__esModule",{value:!0});f0.flattenedVerify=void 0;var Z3=Gr(),yle=xI(),xr=fe(),xl=Dt(),gle=yl(),TI=xn(),_le=ed(),Ele=wl(),ble=O3();async function wle(t,e,r){var n;if(!(0,TI.default)(t))throw new xr.JWSInvalid("Flattened JWS must be an object");if(t.protected===void 0&&t.header===void 0)throw new xr.JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');if(t.protected!==void 0&&typeof t.protected!="string")throw new xr.JWSInvalid("JWS Protected Header incorrect type");if(t.payload===void 0)throw new xr.JWSInvalid("JWS Payload missing");if(typeof t.signature!="string")throw new xr.JWSInvalid("JWS Signature missing or incorrect type");if(t.header!==void 0&&!(0,TI.default)(t.header))throw new xr.JWSInvalid("JWS Unprotected Header incorrect type");let s={};if(t.protected)try{let g=(0,Z3.decode)(t.protected);s=JSON.parse(xl.decoder.decode(g))}catch{throw new xr.JWSInvalid("JWS Protected Header is invalid")}if(!(0,gle.default)(s,t.header))throw new xr.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let i={...s,...t.header},o=(0,Ele.default)(xr.JWSInvalid,new Map([["b64",!0]]),r?.crit,s,i),a=!0;if(o.has("b64")&&(a=s.b64,typeof a!="boolean"))throw new xr.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:u}=i;if(typeof u!="string"||!u)throw new xr.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');let c=r&&(0,ble.default)("algorithms",r.algorithms);if(c&&!c.has(u))throw new xr.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(a){if(typeof t.payload!="string")throw new xr.JWSInvalid("JWS Payload must be a string")}else if(typeof t.payload!="string"&&!(t.payload instanceof Uint8Array))throw new xr.JWSInvalid("JWS Payload must be a string or an Uint8Array instance");let l=!1;typeof e=="function"&&(e=await e(s,t),l=!0),(0,_le.default)(u,e,"verify");let p=(0,xl.concat)(xl.encoder.encode((n=t.protected)!==null&&n!==void 0?n:""),xl.encoder.encode("."),typeof t.payload=="string"?xl.encoder.encode(t.payload):t.payload),d;try{d=(0,Z3.decode)(t.signature)}catch{throw new xr.JWSInvalid("Failed to base64url decode the signature")}if(!await(0,yle.default)(u,e,d,p))throw new xr.JWSSignatureVerificationFailed;let f;if(a)try{f=(0,Z3.decode)(t.payload)}catch{throw new xr.JWSInvalid("Failed to base64url decode the payload")}else typeof t.payload=="string"?f=xl.encoder.encode(t.payload):f=t.payload;let y={payload:f};return t.protected!==void 0&&(y.protectedHeader=s),t.header!==void 0&&(y.unprotectedHeader=t.header),l?{...y,key:e}:y}f0.flattenedVerify=wle});var eA=m(y0=>{"use strict";Object.defineProperty(y0,"__esModule",{value:!0});y0.compactVerify=void 0;var Sle=m0(),DI=fe(),Ale=Dt();async function Ole(t,e,r){if(t instanceof Uint8Array&&(t=Ale.decoder.decode(t)),typeof t!="string")throw new DI.JWSInvalid("Compact JWS must be a string or Uint8Array");let{0:n,1:s,2:i,length:o}=t.split(".");if(o!==3)throw new DI.JWSInvalid("Invalid Compact JWS");let a=await(0,Sle.flattenedVerify)({payload:s,protected:n,signature:i},e,r),u={payload:a.payload,protectedHeader:a.protectedHeader};return typeof e=="function"?{...u,key:a.key}:u}y0.compactVerify=Ole});var PI=m(g0=>{"use strict";Object.defineProperty(g0,"__esModule",{value:!0});g0.generalVerify=void 0;var Cle=m0(),tA=fe(),MI=xn();async function vle(t,e,r){if(!(0,MI.default)(t))throw new tA.JWSInvalid("General JWS must be an object");if(!Array.isArray(t.signatures)||!t.signatures.every(MI.default))throw new tA.JWSInvalid("JWS Signatures missing or incorrect type");for(let n of t.signatures)try{return await(0,Cle.flattenedVerify)({header:n.header,payload:t.payload,protected:n.protected,signature:n.signature},e,r)}catch{}throw new tA.JWSSignatureVerificationFailed}g0.generalVerify=vle});var nA=m(rA=>{"use strict";Object.defineProperty(rA,"__esModule",{value:!0});rA.default=t=>Math.floor(t.getTime()/1e3)});var oA=m(iA=>{"use strict";Object.defineProperty(iA,"__esModule",{value:!0});var BI=60,II=BI*60,sA=II*24,xle=sA*7,Tle=sA*365.25,Dle=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;iA.default=t=>{let e=Dle.exec(t);if(!e)throw new TypeError("Invalid time period format");let r=parseFloat(e[1]);switch(e[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(r);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(r*BI);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(r*II);case"day":case"days":case"d":return Math.round(r*sA);case"week":case"weeks":case"w":return Math.round(r*xle);default:return Math.round(r*Tle)}}});var _0=m(aA=>{"use strict";Object.defineProperty(aA,"__esModule",{value:!0});var Xn=fe(),Mle=Dt(),Ple=nA(),NI=oA(),Ble=xn(),kI=t=>t.toLowerCase().replace(/^application\//,""),Ile=(t,e)=>typeof t=="string"?e.includes(t):Array.isArray(t)?e.some(Set.prototype.has.bind(new Set(t))):!1;aA.default=(t,e,r={})=>{let{typ:n}=r;if(n&&(typeof t.typ!="string"||kI(t.typ)!==kI(n)))throw new Xn.JWTClaimValidationFailed('unexpected "typ" JWT header value',"typ","check_failed");let s;try{s=JSON.parse(Mle.decoder.decode(e))}catch{}if(!(0,Ble.default)(s))throw new Xn.JWTInvalid("JWT Claims Set must be a top-level JSON object");let{requiredClaims:i=[],issuer:o,subject:a,audience:u,maxTokenAge:c}=r;c!==void 0&&i.push("iat"),u!==void 0&&i.push("aud"),a!==void 0&&i.push("sub"),o!==void 0&&i.push("iss");for(let h of new Set(i.reverse()))if(!(h in s))throw new Xn.JWTClaimValidationFailed(`missing required "${h}" claim`,h,"missing");if(o&&!(Array.isArray(o)?o:[o]).includes(s.iss))throw new Xn.JWTClaimValidationFailed('unexpected "iss" claim value',"iss","check_failed");if(a&&s.sub!==a)throw new Xn.JWTClaimValidationFailed('unexpected "sub" claim value',"sub","check_failed");if(u&&!Ile(s.aud,typeof u=="string"?[u]:u))throw new Xn.JWTClaimValidationFailed('unexpected "aud" claim value',"aud","check_failed");let l;switch(typeof r.clockTolerance){case"string":l=(0,NI.default)(r.clockTolerance);break;case"number":l=r.clockTolerance;break;case"undefined":l=0;break;default:throw new TypeError("Invalid clockTolerance option type")}let{currentDate:p}=r,d=(0,Ple.default)(p||new Date);if((s.iat!==void 0||c)&&typeof s.iat!="number")throw new Xn.JWTClaimValidationFailed('"iat" claim must be a number',"iat","invalid");if(s.nbf!==void 0){if(typeof s.nbf!="number")throw new Xn.JWTClaimValidationFailed('"nbf" claim must be a number',"nbf","invalid");if(s.nbf>d+l)throw new Xn.JWTClaimValidationFailed('"nbf" claim timestamp check failed',"nbf","check_failed")}if(s.exp!==void 0){if(typeof s.exp!="number")throw new Xn.JWTClaimValidationFailed('"exp" claim must be a number',"exp","invalid");if(s.exp<=d-l)throw new Xn.JWTExpired('"exp" claim timestamp check failed',"exp","check_failed")}if(c){let h=d-s.iat,f=typeof c=="number"?c:(0,NI.default)(c);if(h-l>f)throw new Xn.JWTExpired('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(h<0-l)throw new Xn.JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return s}});var RI=m(E0=>{"use strict";Object.defineProperty(E0,"__esModule",{value:!0});E0.jwtVerify=void 0;var Nle=eA(),kle=_0(),Rle=fe();async function Fle(t,e,r){var n;let s=await(0,Nle.compactVerify)(t,e,r);if(!((n=s.protectedHeader.crit)===null||n===void 0)&&n.includes("b64")&&s.protectedHeader.b64===!1)throw new Rle.JWTInvalid("JWTs MUST NOT use unencoded payload");let o={payload:(0,kle.default)(s.protectedHeader,s.payload,r),protectedHeader:s.protectedHeader};return typeof e=="function"?{...o,key:s.key}:o}E0.jwtVerify=Fle});var FI=m(b0=>{"use strict";Object.defineProperty(b0,"__esModule",{value:!0});b0.jwtDecrypt=void 0;var $le=v3(),qle=_0(),uA=fe();async function jle(t,e,r){let n=await(0,$le.compactDecrypt)(t,e,r),s=(0,qle.default)(n.protectedHeader,n.plaintext,r),{protectedHeader:i}=n;if(i.iss!==void 0&&i.iss!==s.iss)throw new uA.JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(i.sub!==void 0&&i.sub!==s.sub)throw new uA.JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(i.aud!==void 0&&JSON.stringify(i.aud)!==JSON.stringify(s.aud))throw new uA.JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',"aud","mismatch");let o={payload:s,protectedHeader:i};return typeof e=="function"?{...o,key:n.key}:o}b0.jwtDecrypt=jle});var lA=m(w0=>{"use strict";Object.defineProperty(w0,"__esModule",{value:!0});w0.CompactEncrypt=void 0;var Lle=l0(),cA=class{constructor(e){this._flattened=new Lle.FlattenedEncrypt(e)}setContentEncryptionKey(e){return this._flattened.setContentEncryptionKey(e),this}setInitializationVector(e){return this._flattened.setInitializationVector(e),this}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}setKeyManagementParameters(e){return this._flattened.setKeyManagementParameters(e),this}async encrypt(e,r){let n=await this._flattened.encrypt(e,r);return[n.protected,n.encrypted_key,n.iv,n.ciphertext,n.tag].join(".")}};w0.CompactEncrypt=cA});var A0=m(S0=>{"use strict";Object.defineProperty(S0,"__esModule",{value:!0});S0.FlattenedSign=void 0;var pA=Gr(),Ule=Y3(),Vle=yl(),nd=fe(),vu=Dt(),Wle=ed(),zle=wl(),dA=class{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,r){if(!this._protectedHeader&&!this._unprotectedHeader)throw new nd.JWSInvalid("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!(0,Vle.default)(this._protectedHeader,this._unprotectedHeader))throw new nd.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let n={...this._protectedHeader,...this._unprotectedHeader},s=(0,zle.default)(nd.JWSInvalid,new Map([["b64",!0]]),r?.crit,this._protectedHeader,n),i=!0;if(s.has("b64")&&(i=this._protectedHeader.b64,typeof i!="boolean"))throw new nd.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:o}=n;if(typeof o!="string"||!o)throw new nd.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');(0,Wle.default)(o,e,"sign");let a=this._payload;i&&(a=vu.encoder.encode((0,pA.encode)(a)));let u;this._protectedHeader?u=vu.encoder.encode((0,pA.encode)(JSON.stringify(this._protectedHeader))):u=vu.encoder.encode("");let c=(0,vu.concat)(u,vu.encoder.encode("."),a),l=await(0,Ule.default)(o,e,c),p={signature:(0,pA.encode)(l),payload:""};return i&&(p.payload=vu.decoder.decode(a)),this._unprotectedHeader&&(p.header=this._unprotectedHeader),this._protectedHeader&&(p.protected=vu.decoder.decode(u)),p}};S0.FlattenedSign=dA});var fA=m(O0=>{"use strict";Object.defineProperty(O0,"__esModule",{value:!0});O0.CompactSign=void 0;var Kle=A0(),hA=class{constructor(e){this._flattened=new Kle.FlattenedSign(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,r){let n=await this._flattened.sign(e,r);if(n.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${n.protected}.${n.payload}.${n.signature}`}};O0.CompactSign=hA});var qI=m(C0=>{"use strict";Object.defineProperty(C0,"__esModule",{value:!0});C0.GeneralSign=void 0;var Hle=A0(),$I=fe(),mA=class{constructor(e,r,n){this.parent=e,this.key=r,this.options=n}setProtectedHeader(e){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=e,this}setUnprotectedHeader(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addSignature(...e){return this.parent.addSignature(...e)}sign(...e){return this.parent.sign(...e)}done(){return this.parent}},yA=class{constructor(e){this._signatures=[],this._payload=e}addSignature(e,r){let n=new mA(this,e,r);return this._signatures.push(n),n}async sign(){if(!this._signatures.length)throw new $I.JWSInvalid("at least one signature must be added");let e={signatures:[],payload:""};for(let r=0;r<this._signatures.length;r++){let n=this._signatures[r],s=new Hle.FlattenedSign(this._payload);s.setProtectedHeader(n.protectedHeader),s.setUnprotectedHeader(n.unprotectedHeader);let{payload:i,...o}=await s.sign(n.key,n.options);if(r===0)e.payload=i;else if(e.payload!==i)throw new $I.JWSInvalid("inconsistent use of JWS Unencoded Payload (RFC7797)");e.signatures.push(o)}return e}};C0.GeneralSign=yA});var x0=m(v0=>{"use strict";Object.defineProperty(v0,"__esModule",{value:!0});v0.ProduceJWT=void 0;var gA=nA(),Gle=xn(),jI=oA(),_A=class{constructor(e){if(!(0,Gle.default)(e))throw new TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return typeof e=="number"?this._payload={...this._payload,nbf:e}:this._payload={...this._payload,nbf:(0,gA.default)(new Date)+(0,jI.default)(e)},this}setExpirationTime(e){return typeof e=="number"?this._payload={...this._payload,exp:e}:this._payload={...this._payload,exp:(0,gA.default)(new Date)+(0,jI.default)(e)},this}setIssuedAt(e){return typeof e>"u"?this._payload={...this._payload,iat:(0,gA.default)(new Date)}:this._payload={...this._payload,iat:e},this}};v0.ProduceJWT=_A});var LI=m(T0=>{"use strict";Object.defineProperty(T0,"__esModule",{value:!0});T0.SignJWT=void 0;var Jle=fA(),Yle=fe(),Qle=Dt(),Xle=x0(),EA=class extends Xle.ProduceJWT{setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,r){var n;let s=new Jle.CompactSign(Qle.encoder.encode(JSON.stringify(this._payload)));if(s.setProtectedHeader(this._protectedHeader),Array.isArray((n=this._protectedHeader)===null||n===void 0?void 0:n.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new Yle.JWTInvalid("JWTs MUST NOT use unencoded payload");return s.sign(e,r)}};T0.SignJWT=EA});var UI=m(D0=>{"use strict";Object.defineProperty(D0,"__esModule",{value:!0});D0.EncryptJWT=void 0;var Zle=lA(),epe=Dt(),tpe=x0(),bA=class extends tpe.ProduceJWT{setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(e,r){let n=new Zle.CompactEncrypt(epe.encoder.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),n.setProtectedHeader(this._protectedHeader),this._iv&&n.setInitializationVector(this._iv),this._cek&&n.setContentEncryptionKey(this._cek),this._keyManagementParameters&&n.setKeyManagementParameters(this._keyManagementParameters),n.encrypt(e,r)}};D0.EncryptJWT=bA});var zI=m(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});Tl.calculateJwkThumbprintUri=Tl.calculateJwkThumbprint=void 0;var rpe=ES(),npe=Gr(),VI=fe(),spe=Dt(),ipe=xn(),ma=(t,e)=>{if(typeof t!="string"||!t)throw new VI.JWKInvalid(`${e} missing or invalid`)};async function WI(t,e){if(!(0,ipe.default)(t))throw new TypeError("JWK must be an object");if(e??(e="sha256"),e!=="sha256"&&e!=="sha384"&&e!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let r;switch(t.kty){case"EC":ma(t.crv,'"crv" (Curve) Parameter'),ma(t.x,'"x" (X Coordinate) Parameter'),ma(t.y,'"y" (Y Coordinate) Parameter'),r={crv:t.crv,kty:t.kty,x:t.x,y:t.y};break;case"OKP":ma(t.crv,'"crv" (Subtype of Key Pair) Parameter'),ma(t.x,'"x" (Public Key) Parameter'),r={crv:t.crv,kty:t.kty,x:t.x};break;case"RSA":ma(t.e,'"e" (Exponent) Parameter'),ma(t.n,'"n" (Modulus) Parameter'),r={e:t.e,kty:t.kty,n:t.n};break;case"oct":ma(t.k,'"k" (Key Value) Parameter'),r={k:t.k,kty:t.kty};break;default:throw new VI.JOSENotSupported('"kty" (Key Type) Parameter missing or unsupported')}let n=spe.encoder.encode(JSON.stringify(r));return(0,npe.encode)(await(0,rpe.default)(e,n))}Tl.calculateJwkThumbprint=WI;async function ope(t,e){e??(e="sha256");let r=await WI(t,e);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${e.slice(-3)}:${r}`}Tl.calculateJwkThumbprintUri=ope});var HI=m(M0=>{"use strict";Object.defineProperty(M0,"__esModule",{value:!0});M0.EmbeddedJWK=void 0;var ape=Z1(),upe=xn(),KI=fe();async function cpe(t,e){let r={...t,...e?.header};if(!(0,upe.default)(r.jwk))throw new KI.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a JSON object');let n=await(0,ape.importJWK)({...r.jwk,ext:!0},r.alg,!0);if(n instanceof Uint8Array||n.type!=="public")throw new KI.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a public key');return n}M0.EmbeddedJWK=cpe});var wA=m(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});ya.createLocalJWKSet=ya.LocalJWKSet=ya.isJWKSLike=void 0;var lpe=Z1(),sd=fe(),ppe=xn();function dpe(t){switch(typeof t=="string"&&t.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new sd.JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set')}}function JI(t){return t&&typeof t=="object"&&Array.isArray(t.keys)&&t.keys.every(hpe)}ya.isJWKSLike=JI;function hpe(t){return(0,ppe.default)(t)}function fpe(t){return typeof structuredClone=="function"?structuredClone(t):JSON.parse(JSON.stringify(t))}var P0=class{constructor(e){if(this._cached=new WeakMap,!JI(e))throw new sd.JWKSInvalid("JSON Web Key Set malformed");this._jwks=fpe(e)}async getKey(e,r){let{alg:n,kid:s}={...e,...r?.header},i=dpe(n),o=this._jwks.keys.filter(c=>{let l=i===c.kty;if(l&&typeof s=="string"&&(l=s===c.kid),l&&typeof c.alg=="string"&&(l=n===c.alg),l&&typeof c.use=="string"&&(l=c.use==="sig"),l&&Array.isArray(c.key_ops)&&(l=c.key_ops.includes("verify")),l&&n==="EdDSA"&&(l=c.crv==="Ed25519"||c.crv==="Ed448"),l)switch(n){case"ES256":l=c.crv==="P-256";break;case"ES256K":l=c.crv==="secp256k1";break;case"ES384":l=c.crv==="P-384";break;case"ES512":l=c.crv==="P-521";break}return l}),{0:a,length:u}=o;if(u===0)throw new sd.JWKSNoMatchingKey;if(u!==1){let c=new sd.JWKSMultipleMatchingKeys,{_cached:l}=this;throw c[Symbol.asyncIterator]=async function*(){for(let p of o)try{yield await GI(l,p,n)}catch{continue}},c}return GI(this._cached,a,n)}};ya.LocalJWKSet=P0;async function GI(t,e,r){let n=t.get(e)||t.set(e,{}).get(e);if(n[r]===void 0){let s=await(0,lpe.importJWK)({...e,ext:!0},r);if(s instanceof Uint8Array||s.type!=="public")throw new sd.JWKSInvalid("JSON Web Key Set members must be public keys");n[r]=s}return n[r]}function mpe(t){let e=new P0(t);return async function(r,n){return e.getKey(r,n)}}ya.createLocalJWKSet=mpe});var XI=m(AA=>{"use strict";Object.defineProperty(AA,"__esModule",{value:!0});var ype=require("http"),gpe=require("https"),YI=require("events"),SA=fe(),QI=Dt(),_pe=async(t,e,r)=>{let n;switch(t.protocol){case"https:":n=gpe.get;break;case"http:":n=ype.get;break;default:throw new TypeError("Unsupported URL protocol.")}let{agent:s,headers:i}=r,o=n(t.href,{agent:s,timeout:e,headers:i}),[a]=await Promise.race([(0,YI.once)(o,"response"),(0,YI.once)(o,"timeout")]);if(!a)throw o.destroy(),new SA.JWKSTimeout;if(a.statusCode!==200)throw new SA.JOSEError("Expected 200 OK from the JSON Web Key Set HTTP response");let u=[];for await(let c of a)u.push(c);try{return JSON.parse(QI.decoder.decode((0,QI.concat)(...u)))}catch{throw new SA.JOSEError("Failed to parse the JSON Web Key Set HTTP response as JSON")}};AA.default=_pe});var tN=m(B0=>{"use strict";Object.defineProperty(B0,"__esModule",{value:!0});B0.createRemoteJWKSet=void 0;var Epe=XI(),ZI=fe(),eN=wA();function bpe(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}var OA=class extends eN.LocalJWKSet{constructor(e,r){if(super({keys:[]}),this._jwks=void 0,!(e instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:r?.agent,headers:r?.headers},this._timeoutDuration=typeof r?.timeoutDuration=="number"?r?.timeoutDuration:5e3,this._cooldownDuration=typeof r?.cooldownDuration=="number"?r?.cooldownDuration:3e4,this._cacheMaxAge=typeof r?.cacheMaxAge=="number"?r?.cacheMaxAge:6e5}coolingDown(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cooldownDuration:!1}fresh(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cacheMaxAge:!1}async getKey(e,r){(!this._jwks||!this.fresh())&&await this.reload();try{return await super.getKey(e,r)}catch(n){if(n instanceof ZI.JWKSNoMatchingKey&&this.coolingDown()===!1)return await this.reload(),super.getKey(e,r);throw n}}async reload(){this._pendingFetch&&bpe()&&(this._pendingFetch=void 0),this._pendingFetch||(this._pendingFetch=(0,Epe.default)(this._url,this._timeoutDuration,this._options).then(e=>{if(!(0,eN.isJWKSLike)(e))throw new ZI.JWKSInvalid("JSON Web Key Set malformed");this._jwks={keys:e.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(e=>{throw this._pendingFetch=void 0,e})),await this._pendingFetch}};function wpe(t,e){let r=new OA(t,e);return async function(n,s){return r.getKey(n,s)}}B0.createRemoteJWKSet=wpe});var rN=m(N0=>{"use strict";Object.defineProperty(N0,"__esModule",{value:!0});N0.UnsecuredJWT=void 0;var I0=Gr(),Spe=Dt(),CA=fe(),Ape=_0(),Ope=x0(),vA=class extends Ope.ProduceJWT{encode(){let e=I0.encode(JSON.stringify({alg:"none"})),r=I0.encode(JSON.stringify(this._payload));return`${e}.${r}.`}static decode(e,r){if(typeof e!="string")throw new CA.JWTInvalid("Unsecured JWT must be a string");let{0:n,1:s,2:i,length:o}=e.split(".");if(o!==3||i!=="")throw new CA.JWTInvalid("Invalid Unsecured JWT");let a;try{if(a=JSON.parse(Spe.decoder.decode(I0.decode(n))),a.alg!=="none")throw new Error}catch{throw new CA.JWTInvalid("Invalid Unsecured JWT")}return{payload:(0,Ape.default)(a,I0.decode(s),r),header:a}}};N0.UnsecuredJWT=vA});var k0=m(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.decode=Dl.encode=void 0;var nN=Gr();Dl.encode=nN.encode;Dl.decode=nN.decode});var sN=m(R0=>{"use strict";Object.defineProperty(R0,"__esModule",{value:!0});R0.decodeProtectedHeader=void 0;var Cpe=k0(),vpe=Dt(),xpe=xn();function Tpe(t){let e;if(typeof t=="string"){let r=t.split(".");(r.length===3||r.length===5)&&([e]=r)}else if(typeof t=="object"&&t)if("protected"in t)e=t.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof e!="string"||!e)throw new Error;let r=JSON.parse(vpe.decoder.decode((0,Cpe.decode)(e)));if(!(0,xpe.default)(r))throw new Error;return r}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}R0.decodeProtectedHeader=Tpe});var iN=m(F0=>{"use strict";Object.defineProperty(F0,"__esModule",{value:!0});F0.decodeJwt=void 0;var Dpe=k0(),Mpe=Dt(),Ppe=xn(),xu=fe();function Bpe(t){if(typeof t!="string")throw new xu.JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");let{1:e,length:r}=t.split(".");if(r===5)throw new xu.JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(r!==3)throw new xu.JWTInvalid("Invalid JWT");if(!e)throw new xu.JWTInvalid("JWTs must contain a payload");let n;try{n=(0,Dpe.decode)(e)}catch{throw new xu.JWTInvalid("Failed to base64url decode the payload")}let s;try{s=JSON.parse(Mpe.decoder.decode(n))}catch{throw new xu.JWTInvalid("Failed to parse the decoded payload as JSON")}if(!(0,Ppe.default)(s))throw new xu.JWTInvalid("Invalid JWT Claims Set");return s}F0.decodeJwt=Bpe});var xA=m(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});Ml.generateKeyPair=Ml.generateSecret=void 0;var aN=require("crypto"),Ipe=require("util"),Npe=L1(),oN=G1(),id=fe(),Fi=(0,Ipe.promisify)(aN.generateKeyPair);async function kpe(t,e){let r;switch(t){case"HS256":case"HS384":case"HS512":case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":r=parseInt(t.slice(-3),10);break;case"A128KW":case"A192KW":case"A256KW":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(t.slice(1,4),10);break;default:throw new id.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return(0,aN.createSecretKey)((0,Npe.default)(new Uint8Array(r>>3)))}Ml.generateSecret=kpe;async function Rpe(t,e){var r,n;switch(t){case"RS256":case"RS384":case"RS512":case"PS256":case"PS384":case"PS512":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":case"RSA1_5":{let i=(r=e?.modulusLength)!==null&&r!==void 0?r:2048;if(typeof i!="number"||i<2048)throw new id.JOSENotSupported("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");let o=await Fi("rsa",{modulusLength:i,publicExponent:65537});return(0,oN.setModulusLength)(o.privateKey,i),(0,oN.setModulusLength)(o.publicKey,i),o}case"ES256":return Fi("ec",{namedCurve:"P-256"});case"ES256K":return Fi("ec",{namedCurve:"secp256k1"});case"ES384":return Fi("ec",{namedCurve:"P-384"});case"ES512":return Fi("ec",{namedCurve:"P-521"});case"EdDSA":switch(e?.crv){case void 0:case"Ed25519":return Fi("ed25519");case"Ed448":return Fi("ed448");default:throw new id.JOSENotSupported("Invalid or unsupported crv option provided, supported values are Ed25519 and Ed448")}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":let s=(n=e?.crv)!==null&&n!==void 0?n:"P-256";switch(s){case void 0:case"P-256":case"P-384":case"P-521":return Fi("ec",{namedCurve:s});case"X25519":return Fi("x25519");case"X448":return Fi("x448");default:throw new id.JOSENotSupported("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}default:throw new id.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}}Ml.generateKeyPair=Rpe});var uN=m($0=>{"use strict";Object.defineProperty($0,"__esModule",{value:!0});$0.generateKeyPair=void 0;var Fpe=xA();async function $pe(t,e){return(0,Fpe.generateKeyPair)(t,e)}$0.generateKeyPair=$pe});var cN=m(q0=>{"use strict";Object.defineProperty(q0,"__esModule",{value:!0});q0.generateSecret=void 0;var qpe=xA();async function jpe(t,e){return(0,qpe.generateSecret)(t,e)}q0.generateSecret=jpe});var lN=m(TA=>{"use strict";Object.defineProperty(TA,"__esModule",{value:!0});TA.default="node:crypto"});var pN=m(DA=>{"use strict";Object.defineProperty(DA,"__esModule",{value:!0});var Lpe=lN();DA.default=Lpe.default});var hN=m(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.cryptoRuntime=J.base64url=J.generateSecret=J.generateKeyPair=J.errors=J.decodeJwt=J.decodeProtectedHeader=J.importJWK=J.importX509=J.importPKCS8=J.importSPKI=J.exportJWK=J.exportSPKI=J.exportPKCS8=J.UnsecuredJWT=J.createRemoteJWKSet=J.createLocalJWKSet=J.EmbeddedJWK=J.calculateJwkThumbprintUri=J.calculateJwkThumbprint=J.EncryptJWT=J.SignJWT=J.GeneralSign=J.FlattenedSign=J.CompactSign=J.FlattenedEncrypt=J.CompactEncrypt=J.jwtDecrypt=J.jwtVerify=J.generalVerify=J.flattenedVerify=J.compactVerify=J.GeneralEncrypt=J.generalDecrypt=J.flattenedDecrypt=J.compactDecrypt=void 0;var Upe=v3();Object.defineProperty(J,"compactDecrypt",{enumerable:!0,get:function(){return Upe.compactDecrypt}});var Vpe=n0();Object.defineProperty(J,"flattenedDecrypt",{enumerable:!0,get:function(){return Vpe.flattenedDecrypt}});var Wpe=fI();Object.defineProperty(J,"generalDecrypt",{enumerable:!0,get:function(){return Wpe.generalDecrypt}});var zpe=wI();Object.defineProperty(J,"GeneralEncrypt",{enumerable:!0,get:function(){return zpe.GeneralEncrypt}});var Kpe=eA();Object.defineProperty(J,"compactVerify",{enumerable:!0,get:function(){return Kpe.compactVerify}});var Hpe=m0();Object.defineProperty(J,"flattenedVerify",{enumerable:!0,get:function(){return Hpe.flattenedVerify}});var Gpe=PI();Object.defineProperty(J,"generalVerify",{enumerable:!0,get:function(){return Gpe.generalVerify}});var Jpe=RI();Object.defineProperty(J,"jwtVerify",{enumerable:!0,get:function(){return Jpe.jwtVerify}});var Ype=FI();Object.defineProperty(J,"jwtDecrypt",{enumerable:!0,get:function(){return Ype.jwtDecrypt}});var Qpe=lA();Object.defineProperty(J,"CompactEncrypt",{enumerable:!0,get:function(){return Qpe.CompactEncrypt}});var Xpe=l0();Object.defineProperty(J,"FlattenedEncrypt",{enumerable:!0,get:function(){return Xpe.FlattenedEncrypt}});var Zpe=fA();Object.defineProperty(J,"CompactSign",{enumerable:!0,get:function(){return Zpe.CompactSign}});var e1e=A0();Object.defineProperty(J,"FlattenedSign",{enumerable:!0,get:function(){return e1e.FlattenedSign}});var t1e=qI();Object.defineProperty(J,"GeneralSign",{enumerable:!0,get:function(){return t1e.GeneralSign}});var r1e=LI();Object.defineProperty(J,"SignJWT",{enumerable:!0,get:function(){return r1e.SignJWT}});var n1e=UI();Object.defineProperty(J,"EncryptJWT",{enumerable:!0,get:function(){return n1e.EncryptJWT}});var dN=zI();Object.defineProperty(J,"calculateJwkThumbprint",{enumerable:!0,get:function(){return dN.calculateJwkThumbprint}});Object.defineProperty(J,"calculateJwkThumbprintUri",{enumerable:!0,get:function(){return dN.calculateJwkThumbprintUri}});var s1e=HI();Object.defineProperty(J,"EmbeddedJWK",{enumerable:!0,get:function(){return s1e.EmbeddedJWK}});var i1e=wA();Object.defineProperty(J,"createLocalJWKSet",{enumerable:!0,get:function(){return i1e.createLocalJWKSet}});var o1e=tN();Object.defineProperty(J,"createRemoteJWKSet",{enumerable:!0,get:function(){return o1e.createRemoteJWKSet}});var a1e=rN();Object.defineProperty(J,"UnsecuredJWT",{enumerable:!0,get:function(){return a1e.UnsecuredJWT}});var MA=P3();Object.defineProperty(J,"exportPKCS8",{enumerable:!0,get:function(){return MA.exportPKCS8}});Object.defineProperty(J,"exportSPKI",{enumerable:!0,get:function(){return MA.exportSPKI}});Object.defineProperty(J,"exportJWK",{enumerable:!0,get:function(){return MA.exportJWK}});var j0=Z1();Object.defineProperty(J,"importSPKI",{enumerable:!0,get:function(){return j0.importSPKI}});Object.defineProperty(J,"importPKCS8",{enumerable:!0,get:function(){return j0.importPKCS8}});Object.defineProperty(J,"importX509",{enumerable:!0,get:function(){return j0.importX509}});Object.defineProperty(J,"importJWK",{enumerable:!0,get:function(){return j0.importJWK}});var u1e=sN();Object.defineProperty(J,"decodeProtectedHeader",{enumerable:!0,get:function(){return u1e.decodeProtectedHeader}});var c1e=iN();Object.defineProperty(J,"decodeJwt",{enumerable:!0,get:function(){return c1e.decodeJwt}});J.errors=fe();var l1e=uN();Object.defineProperty(J,"generateKeyPair",{enumerable:!0,get:function(){return l1e.generateKeyPair}});var p1e=cN();Object.defineProperty(J,"generateSecret",{enumerable:!0,get:function(){return p1e.generateSecret}});J.base64url=k0();var d1e=pN();Object.defineProperty(J,"cryptoRuntime",{enumerable:!0,get:function(){return d1e.default}})});var mN=m(PA=>{"use strict";Object.defineProperty(PA,"__esModule",{value:!0});var fN=require("crypto");PA.default=(t,e,r,n,s)=>{let i=parseInt(t.substr(3),10)>>3||20,o=(0,fN.createHmac)(t,r.byteLength?r:new Uint8Array(i)).update(e).digest(),a=Math.ceil(s/i),u=new Uint8Array(i*a+n.byteLength+1),c=0,l=0;for(let p=1;p<=a;p++)u.set(n,l),u[l+n.byteLength]=p,u.set((0,fN.createHmac)(t,o).update(u.subarray(c,l+n.byteLength+1)).digest(),l),c=l,l+=i;return u.slice(0,s)}});var _N=m(BA=>{"use strict";Object.defineProperty(BA,"__esModule",{value:!0});var yN=require("crypto"),h1e=mN(),gN;typeof yN.hkdf=="function"&&!process.versions.electron&&(gN=async(...t)=>new Promise((e,r)=>{yN.hkdf(...t,(n,s)=>{n?r(n):e(new Uint8Array(s))})}));BA.default=async(t,e,r,n,s)=>(gN||h1e.default)(t,e,r,n,s)});var bN=m(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.default=Pl.hkdf=void 0;var f1e=_N();function m1e(t){switch(t){case"sha256":case"sha384":case"sha512":case"sha1":return t;default:throw new TypeError('unsupported "digest" value')}}function IA(t,e){if(typeof t=="string")return new TextEncoder().encode(t);if(!(t instanceof Uint8Array))throw new TypeError(`"${e}"" must be an instance of Uint8Array or a string`);return t}function y1e(t){let e=IA(t,"ikm");if(!e.byteLength)throw new TypeError('"ikm" must be at least one byte in length');return e}function g1e(t){let e=IA(t,"info");if(e.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return e}function _1e(t,e){if(typeof t!="number"||!Number.isInteger(t)||t<1)throw new TypeError('"keylen" must be a positive integer');let r=parseInt(e.substr(3),10)>>3||20;if(t>255*r)throw new TypeError('"keylen" too large');return t}async function EN(t,e,r,n,s){return(0,f1e.default)(m1e(t),y1e(e),IA(r,"salt"),g1e(n),_1e(s,t))}Pl.hkdf=EN;Pl.default=EN});function od(){return L0>U0.length-16&&(wN.default.randomFillSync(U0),L0=0),U0.slice(L0,L0+=16)}var wN,U0,L0,NA=cn(()=>{wN=Mi(require("crypto")),U0=new Uint8Array(256),L0=U0.length});var SN,AN=cn(()=>{SN=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function E1e(t){return typeof t=="string"&&SN.test(t)}var ga,ad=cn(()=>{AN();ga=E1e});function b1e(t,e=0){let r=(Tr[t[e+0]]+Tr[t[e+1]]+Tr[t[e+2]]+Tr[t[e+3]]+"-"+Tr[t[e+4]]+Tr[t[e+5]]+"-"+Tr[t[e+6]]+Tr[t[e+7]]+"-"+Tr[t[e+8]]+Tr[t[e+9]]+"-"+Tr[t[e+10]]+Tr[t[e+11]]+Tr[t[e+12]]+Tr[t[e+13]]+Tr[t[e+14]]+Tr[t[e+15]]).toLowerCase();if(!ga(r))throw TypeError("Stringified UUID is invalid");return r}var Tr,_a,ud=cn(()=>{ad();Tr=[];for(let t=0;t<256;++t)Tr.push((t+256).toString(16).substr(1));_a=b1e});function w1e(t,e,r){let n=e&&r||0,s=e||new Array(16);t=t||{};let i=t.node||ON,o=t.clockseq!==void 0?t.clockseq:kA;if(i==null||o==null){let d=t.random||(t.rng||od)();i==null&&(i=ON=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),o==null&&(o=kA=(d[6]<<8|d[7])&16383)}let a=t.msecs!==void 0?t.msecs:Date.now(),u=t.nsecs!==void 0?t.nsecs:FA+1,c=a-RA+(u-FA)/1e4;if(c<0&&t.clockseq===void 0&&(o=o+1&16383),(c<0||a>RA)&&t.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");RA=a,FA=u,kA=o,a+=122192928e5;let l=((a&268435455)*1e4+u)%4294967296;s[n++]=l>>>24&255,s[n++]=l>>>16&255,s[n++]=l>>>8&255,s[n++]=l&255;let p=a/4294967296*1e4&268435455;s[n++]=p>>>8&255,s[n++]=p&255,s[n++]=p>>>24&15|16,s[n++]=p>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(let d=0;d<6;++d)s[n+d]=i[d];return e||_a(s)}var ON,kA,RA,FA,CN,vN=cn(()=>{NA();ud();RA=0,FA=0;CN=w1e});function S1e(t){if(!ga(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var V0,$A=cn(()=>{ad();V0=S1e});function A1e(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}function W0(t,e,r){function n(s,i,o,a){if(typeof s=="string"&&(s=A1e(s)),typeof i=="string"&&(i=V0(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+s.length);if(u.set(i),u.set(s,i.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,o){a=a||0;for(let c=0;c<16;++c)o[a+c]=u[c];return o}return _a(u)}try{n.name=t}catch{}return n.DNS=O1e,n.URL=C1e,n}var O1e,C1e,qA=cn(()=>{ud();$A();O1e="6ba7b810-9dad-11d1-80b4-00c04fd430c8",C1e="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function v1e(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),xN.default.createHash("md5").update(t).digest()}var xN,TN,DN=cn(()=>{xN=Mi(require("crypto"));TN=v1e});var x1e,MN,PN=cn(()=>{qA();DN();x1e=W0("v3",48,TN),MN=x1e});function T1e(t,e,r){t=t||{};let n=t.random||(t.rng||od)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let s=0;s<16;++s)e[r+s]=n[s];return e}return _a(n)}var BN,IN=cn(()=>{NA();ud();BN=T1e});function D1e(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),NN.default.createHash("sha1").update(t).digest()}var NN,kN,RN=cn(()=>{NN=Mi(require("crypto"));kN=D1e});var M1e,FN,$N=cn(()=>{qA();RN();M1e=W0("v5",80,kN),FN=M1e});var qN,jN=cn(()=>{qN="00000000-0000-0000-0000-000000000000"});function P1e(t){if(!ga(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}var LN,UN=cn(()=>{ad();LN=P1e});var VN={};Gee(VN,{NIL:()=>qN,parse:()=>V0,stringify:()=>_a,v1:()=>CN,v3:()=>MN,v4:()=>BN,v5:()=>FN,validate:()=>ga,version:()=>LN});var WN=cn(()=>{vN();PN();IN();$N();jN();UN();ad();ud();$A()});var JN=m(pd=>{"use strict";Object.defineProperty(pd,"__esModule",{value:!0});pd.SessionStore=void 0;pd.defaultCookies=I1e;function B1e(t,e){HN(t,e),e.add(t)}function jA(t,e,r){HN(t,e),e.set(t,r)}function HN(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Zn(t,e){return t.get(ld(t,e))}function zN(t,e,r){return t.set(ld(t,e),r),r}function ld(t,e,r){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var GN=4096,UA=163,LA=GN-UA;function I1e(t){let e=t?"__Secure-":"";return{sessionToken:{name:`${e}next-auth.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t}},callbackUrl:{name:`${e}next-auth.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t}},csrfToken:{name:`${t?"__Host-":""}next-auth.csrf-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t}},pkceCodeVerifier:{name:`${e}next-auth.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t,maxAge:900}},state:{name:`${e}next-auth.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t,maxAge:900}},nonce:{name:`${e}next-auth.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t}}}}var $i=new WeakMap,cd=new WeakMap,VA=new WeakMap,z0=new WeakSet,WA=class{constructor(e,r,n){B1e(this,z0),jA(this,$i,{}),jA(this,cd,void 0),jA(this,VA,void 0),zN(VA,this,n),zN(cd,this,e);let{cookies:s}=r,{name:i}=e;if(typeof s?.getAll=="function")for(let{name:o,value:a}of s.getAll())o.startsWith(i)&&(Zn($i,this)[o]=a);else if(s instanceof Map)for(let o of s.keys())o.startsWith(i)&&(Zn($i,this)[o]=s.get(o));else for(let o in s)o.startsWith(i)&&(Zn($i,this)[o]=s[o])}get value(){return Object.keys(Zn($i,this)).sort((r,n)=>{var s,i;let o=parseInt((s=r.split(".").pop())!==null&&s!==void 0?s:"0"),a=parseInt((i=n.split(".").pop())!==null&&i!==void 0?i:"0");return o-a}).map(r=>Zn($i,this)[r]).join("")}chunk(e,r){let n=ld(z0,this,KN).call(this),s=ld(z0,this,N1e).call(this,{name:Zn(cd,this).name,value:e,options:{...Zn(cd,this).options,...r}});for(let i of s)n[i.name]=i;return Object.values(n)}clean(){return Object.values(ld(z0,this,KN).call(this))}};pd.SessionStore=WA;function N1e(t){let e=Math.ceil(t.value.length/LA);if(e===1)return Zn($i,this)[t.name]=t.value,[t];let r=[];for(let n=0;n<e;n++){let s=`${t.name}.${n}`,i=t.value.substr(n*LA,LA);r.push({...t,name:s,value:i}),Zn($i,this)[s]=i}return Zn(VA,this).debug("CHUNKING_SESSION_COOKIE",{message:`Session cookie exceeds allowed ${GN} bytes.`,emptyCookieSize:UA,valueSize:t.value.length,chunks:r.map(n=>n.value.length+UA)}),r}function KN(){let t={};for(let r in Zn($i,this)){var e;(e=Zn($i,this))===null||e===void 0||delete e[r],t[r]={name:r,value:"",options:{...Zn(cd,this).options,maxAge:0}}}return t}});var QN=m(YN=>{"use strict";Object.defineProperty(YN,"__esModule",{value:!0})});var tk=m(Ea=>{"use strict";var k1e=fB();Object.defineProperty(Ea,"__esModule",{value:!0});var R1e={encode:!0,decode:!0,getToken:!0};Ea.decode=ZN;Ea.encode=U1e;Ea.getToken=V1e;var XN=hN(),F1e=k1e(bN()),$1e=(WN(),Jee(VN)),q1e=JN(),zA=QN();Object.keys(zA).forEach(function(t){t==="default"||t==="__esModule"||Object.prototype.hasOwnProperty.call(R1e,t)||t in Ea&&Ea[t]===zA[t]||Object.defineProperty(Ea,t,{enumerable:!0,get:function(){return zA[t]}})});var j1e=720*60*60,L1e=()=>Date.now()/1e3|0;async function U1e(t){let{token:e={},secret:r,maxAge:n=j1e,salt:s=""}=t,i=await ek(r,s);return await new XN.EncryptJWT(e).setProtectedHeader({alg:"dir",enc:"A256GCM"}).setIssuedAt().setExpirationTime(L1e()+n).setJti((0,$1e.v4)()).encrypt(i)}async function ZN(t){let{token:e,secret:r,salt:n=""}=t;if(!e)return null;let s=await ek(r,n),{payload:i}=await(0,XN.jwtDecrypt)(e,s,{clockTolerance:15});return i}async function V1e(t){var e,r,n,s;let{req:i,secureCookie:o=(e=(r=process.env.NEXTAUTH_URL)===null||r===void 0?void 0:r.startsWith("https://"))!==null&&e!==void 0?e:!!process.env.VERCEL,cookieName:a=o?"__Secure-next-auth.session-token":"next-auth.session-token",raw:u,decode:c=ZN,logger:l=console,secret:p=(n=process.env.NEXTAUTH_SECRET)!==null&&n!==void 0?n:process.env.AUTH_SECRET}=t;if(!i)throw new Error("Must pass `req` to JWT getToken()");let h=new q1e.SessionStore({name:a,options:{secure:o}},{cookies:i.cookies,headers:i.headers},l).value,f=i.headers instanceof Headers?i.headers.get("authorization"):(s=i.headers)===null||s===void 0?void 0:s.authorization;if(!h&&f?.split(" ")[0]==="Bearer"){let y=f.split(" ")[1];h=decodeURIComponent(y)}if(!h)return null;if(u)return h;try{return await c({token:h,secret:p})}catch{return null}}async function ek(t,e){return await(0,F1e.default)("sha256",t,e,`NextAuth.js Generated Encryption Key${e?` (${e})`:""}`,32)}});var v6=m(Le=>{"use strict";var W1e=(()=>{let t=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array.prototype),Symbol.toStringTag).get;return e=>t.call(e)})();function ba(t){return W1e(t)==="Uint8Array"}function g6(t){return typeof t=="object"&&t!=null&&Symbol.toStringTag in t&&(t[Symbol.toStringTag]==="ArrayBuffer"||t[Symbol.toStringTag]==="SharedArrayBuffer")}function Nl(t){return t instanceof RegExp||Object.prototype.toString.call(t)==="[object RegExp]"}function _6(t){return typeof t=="object"&&t!=null&&Symbol.toStringTag in t&&t[Symbol.toStringTag]==="Map"}function kl(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function es(t,e){return JSON.stringify(t,(r,n)=>typeof n=="bigint"?{$numberLong:`${n}`}:_6(n)?Object.fromEntries(n):n)}function z1e(t){if(t!=null&&typeof t=="object"&&"stylize"in t&&typeof t.stylize=="function")return t.stylize}var Mu=7,$l=Symbol.for("@@mdb.bson.version"),md=2147483647,yd=-2147483648,bk=Math.pow(2,63)-1,wk=-Math.pow(2,63),Sk=Math.pow(2,53),Ak=-Math.pow(2,53),E6=1,Ok=2,b6=3,Ck=4,w6=5,K1e=6,vk=7,xk=8,Tk=9,S6=10,G0=11,H1e=12,A6=13,Dk=14,Mk=15,fd=16,Pk=17,O6=18,Bk=19,Ik=255,Nk=127,G1e=0,C6=4,kk=Object.freeze({double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:-1,maxKey:127}),k=class extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor(e,r){super(e,r)}static isBSONError(e){return e!=null&&typeof e=="object"&&"bsonError"in e&&e.bsonError===!0&&"name"in e&&"message"in e&&"stack"in e}},yo=class extends k{get name(){return"BSONVersionError"}constructor(){super(`Unsupported BSON version, bson types must be from bson ${Mu}.x.x`)}},ql=class extends k{get name(){return"BSONRuntimeError"}constructor(e){super(e)}},Ts=class extends k{get name(){return"BSONOffsetError"}offset;constructor(e,r,n){super(`${e}. offset: ${r}`,n),this.offset=r}},sk,ik;function Rk(t,e,r,n){if(n){sk??=new TextDecoder("utf8",{fatal:!0});try{return sk.decode(t.subarray(e,r))}catch(s){throw new k("Invalid UTF-8 string in BSON document",{cause:s})}}return ik??=new TextDecoder("utf8",{fatal:!1}),ik.decode(t.subarray(e,r))}function Fk(t,e,r){if(t.length===0)return"";let n=r-e;if(n===0)return"";if(n>20)return null;if(n===1&&t[e]<128)return String.fromCharCode(t[e]);if(n===2&&t[e]<128&&t[e+1]<128)return String.fromCharCode(t[e])+String.fromCharCode(t[e+1]);if(n===3&&t[e]<128&&t[e+1]<128&&t[e+2]<128)return String.fromCharCode(t[e])+String.fromCharCode(t[e+1])+String.fromCharCode(t[e+2]);let s=[];for(let i=e;i<r;i++){let o=t[i];if(o>127)return null;s.push(o)}return String.fromCharCode(...s)}function J1e(t,e,r){if(e.length===0)return 0;if(e.length>25||t.length-r<e.length)return null;for(let n=0,s=r;n<e.length;n++,s++){let i=e.charCodeAt(n);if(i>127)return null;t[s]=i}return e.length}function Y1e(t){return ti.fromNumberArray(Array.from({length:t},()=>Math.floor(Math.random()*256)))}function Q1e(t){return crypto.getRandomValues(ti.allocate(t))}var X1e=(()=>{let{crypto:t}=globalThis;return t!=null&&typeof t.getRandomValues=="function"?Q1e:Y1e})(),ti={isUint8Array:ba,toLocalBufferType(t){if(Buffer.isBuffer(t))return t;if(ArrayBuffer.isView(t))return Buffer.from(t.buffer,t.byteOffset,t.byteLength);let e=t?.[Symbol.toStringTag]??Object.prototype.toString.call(t);if(e==="ArrayBuffer"||e==="SharedArrayBuffer"||e==="[object ArrayBuffer]"||e==="[object SharedArrayBuffer]")return Buffer.from(t);throw new k("Cannot create Buffer from the passed potentialBuffer.")},allocate(t){return Buffer.alloc(t)},allocateUnsafe(t){return Buffer.allocUnsafe(t)},compare(t,e){return ti.toLocalBufferType(t).compare(e)},concat(t){return Buffer.concat(t)},equals(t,e){return ti.toLocalBufferType(t).equals(e)},fromNumberArray(t){return Buffer.from(t)},fromBase64(t){return Buffer.from(t,"base64")},fromUTF8(t){return Buffer.from(t,"utf8")},toBase64(t){return ti.toLocalBufferType(t).toString("base64")},fromISO88591(t){return Buffer.from(t,"binary")},toISO88591(t){return ti.toLocalBufferType(t).toString("binary")},fromHex(t){return Buffer.from(t,"hex")},toHex(t){return ti.toLocalBufferType(t).toString("hex")},toUTF8(t,e,r,n){let s=r-e<=20?Fk(t,e,r):null;if(s!=null)return s;let i=ti.toLocalBufferType(t).toString("utf8",e,r);if(n){for(let o=0;o<i.length;o++)if(i.charCodeAt(o)===65533){Rk(t,e,r,!0);break}}return i},utf8ByteLength(t){return Buffer.byteLength(t,"utf8")},encodeUTF8Into(t,e,r){let n=J1e(t,e,r);return n??ti.toLocalBufferType(t).write(e,r,void 0,"utf8")},randomBytes:X1e,swap32(t){return ti.toLocalBufferType(t).swap32()}};function Z1e(){let{navigator:t}=globalThis;return typeof t=="object"&&t.product==="ReactNative"}function ede(t){if(t<0)throw new RangeError(`The argument 'byteLength' is invalid. Received ${t}`);return Du.fromNumberArray(Array.from({length:t},()=>Math.floor(Math.random()*256)))}var tde=(()=>{let{crypto:t}=globalThis;if(t!=null&&typeof t.getRandomValues=="function")return e=>t.getRandomValues(Du.allocate(e));if(Z1e()){let{console:e}=globalThis;e?.warn?.("BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return ede})(),ok=/(\d|[a-f])/i,Du={isUint8Array:ba,toLocalBufferType(t){let e=t?.[Symbol.toStringTag]??Object.prototype.toString.call(t);if(e==="Uint8Array")return t;if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));if(e==="ArrayBuffer"||e==="SharedArrayBuffer"||e==="[object ArrayBuffer]"||e==="[object SharedArrayBuffer]")return new Uint8Array(t);throw new k("Cannot make a Uint8Array from passed potentialBuffer.")},allocate(t){if(typeof t!="number")throw new TypeError(`The "size" argument must be of type number. Received ${String(t)}`);return new Uint8Array(t)},allocateUnsafe(t){return Du.allocate(t)},compare(t,e){if(t===e)return 0;let r=Math.min(t.length,e.length);for(let n=0;n<r;n++){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1}return t.length<e.length?-1:t.length>e.length?1:0},concat(t){if(t.length===0)return Du.allocate(0);let e=0;for(let s of t)e+=s.length;let r=Du.allocate(e),n=0;for(let s of t)r.set(s,n),n+=s.length;return r},equals(t,e){if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},fromNumberArray(t){return Uint8Array.from(t)},fromBase64(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))},fromUTF8(t){return new TextEncoder().encode(t)},toBase64(t){return btoa(Du.toISO88591(t))},fromISO88591(t){return Uint8Array.from(t,e=>e.charCodeAt(0)&255)},toISO88591(t){return Array.from(Uint16Array.from(t),e=>String.fromCharCode(e)).join("")},fromHex(t){let e=t.length%2===0?t:t.slice(0,t.length-1),r=[];for(let n=0;n<e.length;n+=2){let s=e[n],i=e[n+1];if(!ok.test(s)||!ok.test(i))break;let o=Number.parseInt(`${s}${i}`,16);r.push(o)}return Uint8Array.from(r)},toHex(t){return Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")},toUTF8(t,e,r,n){let s=r-e<=20?Fk(t,e,r):null;return s??Rk(t,e,r,n)},utf8ByteLength(t){return new TextEncoder().encode(t).byteLength},encodeUTF8Into(t,e,r){let n=new TextEncoder().encode(e);return t.set(n,r),n.byteLength},randomBytes:tde,swap32(t){if(t.length%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t.length;e+=4){let r=t[e],n=t[e+1],s=t[e+2],i=t[e+3];t[e]=i,t[e+1]=s,t[e+2]=n,t[e+3]=r}return t}},rde=typeof Buffer=="function"&&Buffer.prototype?._isBuffer!==!0,B=rde?ti:Du,Y0=Symbol.for("@@mdb.bson.type"),Jr=class{get[Y0](){return this._bsontype}get[$l](){return Mu}[Symbol.for("nodejs.util.inspect.custom")](e,r,n){return this.inspect(e,r,n)}},Rl=new Float64Array(1),je=new Uint8Array(Rl.buffer,0,8);Rl[0]=-1;var KA=je[7]===0,ie={isBigEndian:KA,getNonnegativeInt32LE(t,e){if(t[e+3]>127)throw new RangeError(`Size cannot be negative at offset: ${e}`);return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24},getInt32LE(t,e){return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24},getUint32LE(t,e){return t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216},getUint32BE(t,e){return t[e+3]+t[e+2]*256+t[e+1]*65536+t[e]*16777216},getBigInt64LE(t,e){let r=BigInt(t[e+4]+t[e+5]*256+t[e+6]*65536+(t[e+7]<<24)),n=BigInt(t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216);return(r<<32n)+n},getFloat64LE:KA?(t,e)=>(je[7]=t[e],je[6]=t[e+1],je[5]=t[e+2],je[4]=t[e+3],je[3]=t[e+4],je[2]=t[e+5],je[1]=t[e+6],je[0]=t[e+7],Rl[0]):(t,e)=>(je[0]=t[e],je[1]=t[e+1],je[2]=t[e+2],je[3]=t[e+3],je[4]=t[e+4],je[5]=t[e+5],je[6]=t[e+6],je[7]=t[e+7],Rl[0]),setInt32BE(t,e,r){return t[e+3]=r,r>>>=8,t[e+2]=r,r>>>=8,t[e+1]=r,r>>>=8,t[e]=r,4},setInt32LE(t,e,r){return t[e]=r,r>>>=8,t[e+1]=r,r>>>=8,t[e+2]=r,r>>>=8,t[e+3]=r,4},setBigInt64LE(t,e,r){let n=0xffffffffn,s=Number(r&n);t[e]=s,s>>=8,t[e+1]=s,s>>=8,t[e+2]=s,s>>=8,t[e+3]=s;let i=Number(r>>32n&n);return t[e+4]=i,i>>=8,t[e+5]=i,i>>=8,t[e+6]=i,i>>=8,t[e+7]=i,8},setFloat64LE:KA?(t,e,r)=>(Rl[0]=r,t[e]=je[7],t[e+1]=je[6],t[e+2]=je[5],t[e+3]=je[4],t[e+4]=je[3],t[e+5]=je[2],t[e+6]=je[1],t[e+7]=je[0],8):(t,e,r)=>(Rl[0]=r,t[e]=je[0],t[e+1]=je[1],t[e+2]=je[2],t[e+3]=je[3],t[e+4]=je[4],t[e+5]=je[5],t[e+6]=je[6],t[e+7]=je[7],8)},Pt=class t extends Jr{get _bsontype(){return"Binary"}static BSON_BINARY_SUBTYPE_DEFAULT=0;static BUFFER_SIZE=256;static SUBTYPE_DEFAULT=0;static SUBTYPE_FUNCTION=1;static SUBTYPE_BYTE_ARRAY=2;static SUBTYPE_UUID_OLD=3;static SUBTYPE_UUID=4;static SUBTYPE_MD5=5;static SUBTYPE_ENCRYPTED=6;static SUBTYPE_COLUMN=7;static SUBTYPE_SENSITIVE=8;static SUBTYPE_VECTOR=9;static SUBTYPE_USER_DEFINED=128;static VECTOR_TYPE=Object.freeze({Int8:3,Float32:39,PackedBit:16});buffer;sub_type;position;constructor(e,r){if(super(),e!=null&&typeof e=="string"&&!ArrayBuffer.isView(e)&&!g6(e)&&!Array.isArray(e))throw new k("Binary can only be constructed from Uint8Array or number[]");this.sub_type=r??t.BSON_BINARY_SUBTYPE_DEFAULT,e==null?(this.buffer=B.allocate(t.BUFFER_SIZE),this.position=0):(this.buffer=Array.isArray(e)?B.fromNumberArray(e):B.toLocalBufferType(e),this.position=this.buffer.byteLength)}put(e){if(typeof e=="string"&&e.length!==1)throw new k("only accepts single character String");if(typeof e!="number"&&e.length!==1)throw new k("only accepts single character Uint8Array or Array");let r;if(typeof e=="string"?r=e.charCodeAt(0):typeof e=="number"?r=e:r=e[0],r<0||r>255)throw new k("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=r;else{let n=B.allocate(t.BUFFER_SIZE+this.buffer.length);n.set(this.buffer,0),this.buffer=n,this.buffer[this.position++]=r}}write(e,r){if(r=typeof r=="number"?r:this.position,this.buffer.byteLength<r+e.length){let n=B.allocate(this.buffer.byteLength+e.length);n.set(this.buffer,0),this.buffer=n}if(ArrayBuffer.isView(e))this.buffer.set(B.toLocalBufferType(e),r),this.position=r+e.byteLength>this.position?r+e.length:this.position;else if(typeof e=="string")throw new k("input cannot be string")}read(e,r){r=r&&r>0?r:this.position;let n=e+r;return this.buffer.subarray(e,n>this.position?this.position:n)}value(){return this.buffer.length===this.position?this.buffer:this.buffer.subarray(0,this.position)}length(){return this.position}toJSON(){return B.toBase64(this.buffer.subarray(0,this.position))}toString(e){return e==="hex"?B.toHex(this.buffer.subarray(0,this.position)):e==="base64"?B.toBase64(this.buffer.subarray(0,this.position)):e==="utf8"||e==="utf-8"?B.toUTF8(this.buffer,0,this.position,!1):B.toUTF8(this.buffer,0,this.position,!1)}toExtendedJSON(e){e=e||{},this.sub_type===t.SUBTYPE_VECTOR&&fo(this);let r=B.toBase64(this.buffer),n=Number(this.sub_type).toString(16);return e.legacy?{$binary:r,$type:n.length===1?"0"+n:n}:{$binary:{base64:r,subType:n.length===1?"0"+n:n}}}toUUID(){if(this.sub_type===t.SUBTYPE_UUID)return new Sa(this.buffer.subarray(0,this.position));throw new k(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${t.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString(e,r){return new t(B.fromHex(e),r)}static createFromBase64(e,r){return new t(B.fromBase64(e),r)}static fromExtendedJSON(e,r){r=r||{};let n,s;if("$binary"in e?r.legacy&&typeof e.$binary=="string"&&"$type"in e?(s=e.$type?parseInt(e.$type,16):0,n=B.fromBase64(e.$binary)):typeof e.$binary!="string"&&(s=e.$binary.subType?parseInt(e.$binary.subType,16):0,n=B.fromBase64(e.$binary.base64)):"$uuid"in e&&(s=4,n=Sa.bytesFromString(e.$uuid)),!n)throw new k(`Unexpected Binary Extended JSON format ${JSON.stringify(e)}`);return s===C6?new Sa(n):new t(n,s)}inspect(e,r,n){n??=es;let s=B.toBase64(this.buffer.subarray(0,this.position)),i=n(s,r),o=n(this.sub_type,r);return`Binary.createFromBase64(${i}, ${o})`}toInt8Array(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new k("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.Int8)throw new k("Binary datatype field is not Int8");return fo(this),new Int8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toFloat32Array(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new k("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.Float32)throw new k("Binary datatype field is not Float32");fo(this);let e=new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position));return ie.isBigEndian&&B.swap32(e),new Float32Array(e.buffer)}toPackedBits(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new k("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.PackedBit)throw new k("Binary datatype field is not packed bit");return fo(this),new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toBits(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new k("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.PackedBit)throw new k("Binary datatype field is not packed bit");fo(this);let r=(this.length()-2)*8-this.buffer[1],n=new Int8Array(r);for(let s=0;s<n.length;s++){let i=s/8|0,o=this.buffer[i+2],a=7-s%8,u=o>>a&1;n[s]=u}return n}static fromInt8Array(e){let r=B.allocate(e.byteLength+2);r[0]=t.VECTOR_TYPE.Int8,r[1]=0;let n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.set(n,2);let s=new this(r,this.SUBTYPE_VECTOR);return fo(s),s}static fromFloat32Array(e){let r=B.allocate(e.byteLength+2);r[0]=t.VECTOR_TYPE.Float32,r[1]=0;let n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.set(n,2),ie.isBigEndian&&B.swap32(new Uint8Array(r.buffer,2));let s=new this(r,this.SUBTYPE_VECTOR);return fo(s),s}static fromPackedBits(e,r=0){let n=B.allocate(e.byteLength+2);n[0]=t.VECTOR_TYPE.PackedBit,n[1]=r,n.set(e,2);let s=new this(n,this.SUBTYPE_VECTOR);return fo(s),s}static fromBits(e){let r=e.length+7>>>3,n=new Uint8Array(r+2);n[0]=t.VECTOR_TYPE.PackedBit;let s=e.length%8;n[1]=s===0?0:8-s;for(let i=0;i<e.length;i++){let o=i>>>3,a=e[i];if(a!==0&&a!==1)throw new k(`Invalid bit value at ${i}: must be 0 or 1, found ${e[i]}`);if(a===0)continue;let u=7-i%8;n[o+2]|=a<<u}return new this(n,t.SUBTYPE_VECTOR)}};function fo(t){if(t.sub_type!==Pt.SUBTYPE_VECTOR)return;let e=t.position,r=t.buffer[0],n=t.buffer[1];if((r===Pt.VECTOR_TYPE.Float32||r===Pt.VECTOR_TYPE.Int8)&&n!==0)throw new k("Invalid Vector: padding must be zero for int8 and float32 vectors");if(r===Pt.VECTOR_TYPE.Float32&&e!==0&&e-2!==0&&(e-2)%4!==0)throw new k("Invalid Vector: Float32 vector must contain a multiple of 4 bytes");if(r===Pt.VECTOR_TYPE.PackedBit&&n!==0&&e===2)throw new k("Invalid Vector: padding must be zero for packed bit vectors that are empty");if(r===Pt.VECTOR_TYPE.PackedBit&&n>7)throw new k(`Invalid Vector: padding must be a value between 0 and 7. found: ${n}`)}var HA=16,nde=/^[0-9A-F]{32}$/i,sde=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,Sa=class t extends Pt{constructor(e){let r;if(e==null)r=t.generate();else if(e instanceof t)r=B.toLocalBufferType(new Uint8Array(e.buffer));else if(ArrayBuffer.isView(e)&&e.byteLength===HA)r=B.toLocalBufferType(e);else if(typeof e=="string")r=t.bytesFromString(e);else throw new k("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");super(r,C6)}get id(){return this.buffer}set id(e){this.buffer=e}toHexString(e=!0){return e?[B.toHex(this.buffer.subarray(0,4)),B.toHex(this.buffer.subarray(4,6)),B.toHex(this.buffer.subarray(6,8)),B.toHex(this.buffer.subarray(8,10)),B.toHex(this.buffer.subarray(10,16))].join("-"):B.toHex(this.buffer)}toString(e){return e==="hex"?B.toHex(this.id):e==="base64"?B.toBase64(this.id):this.toHexString()}toJSON(){return this.toHexString()}equals(e){if(!e)return!1;if(e instanceof t)return B.equals(e.id,this.id);try{return B.equals(new t(e).id,this.id)}catch{return!1}}toBinary(){return new Pt(this.id,Pt.SUBTYPE_UUID)}static generate(){let e=B.randomBytes(HA);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,e}static isValid(e){return e?typeof e=="string"?t.isValidUUIDString(e):ba(e)?e.byteLength===HA:e._bsontype==="Binary"&&e.sub_type===this.SUBTYPE_UUID&&e.buffer.byteLength===16:!1}static createFromHexString(e){let r=t.bytesFromString(e);return new t(r)}static createFromBase64(e){return new t(B.fromBase64(e))}static bytesFromString(e){if(!t.isValidUUIDString(e))throw new k("UUID string representation must be 32 hex digits or canonical hyphenated representation");return B.fromHex(e.replace(/-/g,""))}static isValidUUIDString(e){return nde.test(e)||sde.test(e)}inspect(e,r,n){return n??=es,`new UUID(${n(this.toHexString(),r)})`}},go=class t extends Jr{get _bsontype(){return"Code"}code;scope;constructor(e,r){super(),this.code=e.toString(),this.scope=r??null}toJSON(){return this.scope!=null?{code:this.code,scope:this.scope}:{code:this.code}}toExtendedJSON(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}static fromExtendedJSON(e){return new t(e.$code,e.$scope)}inspect(e,r,n){n??=es;let s=n(this.code,r),i=s.includes(`
`);this.scope!=null&&(s+=`,${i?`
`:" "}${n(this.scope,r)}`);let o=i&&this.scope===null;return`new Code(${i?`
`:""}${s}${o?`
`:""})`}};function $k(t){return t!=null&&typeof t=="object"&&"$id"in t&&t.$id!=null&&"$ref"in t&&typeof t.$ref=="string"&&(!("$db"in t)||"$db"in t&&typeof t.$db=="string")}var qi=class t extends Jr{get _bsontype(){return"DBRef"}collection;oid;db;fields;constructor(e,r,n,s){super();let i=e.split(".");i.length===2&&(n=i.shift(),e=i.shift()),this.collection=e,this.oid=r,this.db=n,this.fields=s||{}}get namespace(){return this.collection}set namespace(e){this.collection=e}toJSON(){let e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return this.db!=null&&(e.$db=this.db),e}toExtendedJSON(e){e=e||{};let r={$ref:this.collection,$id:this.oid};return e.legacy||(this.db&&(r.$db=this.db),r=Object.assign(r,this.fields)),r}static fromExtendedJSON(e){let r=Object.assign({},e);return delete r.$ref,delete r.$id,delete r.$db,new t(e.$ref,e.$id,e.$db,r)}inspect(e,r,n){n??=es;let s=[n(this.namespace,r),n(this.oid,r),...this.db?[n(this.db,r)]:[],...Object.keys(this.fields).length>0?[n(this.fields,r)]:[]];return s[1]=n===es?`new ObjectId(${s[1]})`:s[1],`new DBRef(${s.join(", ")})`}};function qk(t){if(t==="")return t;let e=0,r=t[e]==="-",n=t[e]==="+";(n||r)&&(e+=1);let s=!1;for(;e<t.length&&t[e]==="0";++e)s=!0;return s?`${r?"-":""}${t.length===e?"0":t.slice(e)}`:n?t.slice(1):t}function ide(t,e){e=e??10;let r="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,e);return new RegExp(`[^-+${r}]`,"i").test(t)?!1:t}var xs;try{xs=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var ak=65536,ode=1<<24,Fl=ak*ak,jk=Fl*Fl,uk=jk/2,ck={},lk={},ade=20,ude=/^(\+?0|(\+|-)?[1-9][0-9]*)$/,Z=class t extends Jr{get _bsontype(){return"Long"}get __isLong__(){return!0}high;low;unsigned;constructor(e=0,r,n){super();let s=typeof r=="boolean"?r:!!n,i=typeof r=="number"?r:0,o=typeof e=="string"?t.fromString(e,s):typeof e=="bigint"?t.fromBigInt(e,s):{low:e|0,high:i|0,unsigned:s};this.low=o.low,this.high=o.high,this.unsigned=o.unsigned}static TWO_PWR_24=t.fromInt(ode);static MAX_UNSIGNED_VALUE=t.fromBits(-1,-1,!0);static ZERO=t.fromInt(0);static UZERO=t.fromInt(0,!0);static ONE=t.fromInt(1);static UONE=t.fromInt(1,!0);static NEG_ONE=t.fromInt(-1);static MAX_VALUE=t.fromBits(-1,2147483647,!1);static MIN_VALUE=t.fromBits(0,-2147483648,!1);static fromBits(e,r,n){return new t(e,r,n)}static fromInt(e,r){let n,s,i;return r?(e>>>=0,(i=0<=e&&e<256)&&(s=lk[e],s)?s:(n=t.fromBits(e,(e|0)<0?-1:0,!0),i&&(lk[e]=n),n)):(e|=0,(i=-128<=e&&e<128)&&(s=ck[e],s)?s:(n=t.fromBits(e,e<0?-1:0,!1),i&&(ck[e]=n),n))}static fromNumber(e,r){if(isNaN(e))return r?t.UZERO:t.ZERO;if(r){if(e<0)return t.UZERO;if(e>=jk)return t.MAX_UNSIGNED_VALUE}else{if(e<=-uk)return t.MIN_VALUE;if(e+1>=uk)return t.MAX_VALUE}return e<0?t.fromNumber(-e,r).neg():t.fromBits(e%Fl|0,e/Fl|0,r)}static fromBigInt(e,r){let n=0xffffffffn,s=32n;return new t(Number(e&n),Number(e>>s&n),r)}static _fromString(e,r,n){if(e.length===0)throw new k("empty string");if(n<2||36<n)throw new k("radix");let s;if((s=e.indexOf("-"))>0)throw new k("interior hyphen");if(s===0)return t._fromString(e.substring(1),r,n).neg();let i=t.fromNumber(Math.pow(n,8)),o=t.ZERO;for(let a=0;a<e.length;a+=8){let u=Math.min(8,e.length-a),c=parseInt(e.substring(a,a+u),n);if(u<8){let l=t.fromNumber(Math.pow(n,u));o=o.mul(l).add(t.fromNumber(c))}else o=o.mul(i),o=o.add(t.fromNumber(c))}return o.unsigned=r,o}static fromStringStrict(e,r,n){let s=!1;if(typeof r=="number"?(n=r,r=!1):s=!!r,n??=10,e.trim()!==e)throw new k(`Input: '${e}' contains leading and/or trailing whitespace`);if(!ide(e,n))throw new k(`Input: '${e}' contains invalid characters for radix: ${n}`);let i=qk(e),o=t._fromString(i,s,n);if(o.toString(n).toLowerCase()!==i.toLowerCase())throw new k(`Input: ${e} is not representable as ${o.unsigned?"an unsigned":"a signed"} 64-bit Long ${n!=null?`with radix: ${n}`:""}`);return o}static fromString(e,r,n){let s=!1;return typeof r=="number"?(n=r,r=!1):s=!!r,n??=10,e==="NaN"&&n<24||(e==="Infinity"||e==="+Infinity"||e==="-Infinity")&&n<35?t.ZERO:t._fromString(e,s,n)}static fromBytes(e,r,n){return n?t.fromBytesLE(e,r):t.fromBytesBE(e,r)}static fromBytesLE(e,r){return new t(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)}static fromBytesBE(e,r){return new t(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)}static isLong(e){return e!=null&&typeof e=="object"&&"__isLong__"in e&&e.__isLong__===!0}static fromValue(e,r){return typeof e=="number"?t.fromNumber(e,r):typeof e=="string"?t.fromString(e,r):t.fromBits(e.low,e.high,typeof r=="boolean"?r:e.unsigned)}add(e){t.isLong(e)||(e=t.fromValue(e));let r=this.high>>>16,n=this.high&65535,s=this.low>>>16,i=this.low&65535,o=e.high>>>16,a=e.high&65535,u=e.low>>>16,c=e.low&65535,l=0,p=0,d=0,h=0;return h+=i+c,d+=h>>>16,h&=65535,d+=s+u,p+=d>>>16,d&=65535,p+=n+a,l+=p>>>16,p&=65535,l+=r+o,l&=65535,t.fromBits(d<<16|h,l<<16|p,this.unsigned)}and(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)}compare(e){if(t.isLong(e)||(e=t.fromValue(e)),this.eq(e))return 0;let r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1}comp(e){return this.compare(e)}divide(e){if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())throw new k("division by zero");if(xs){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;let i=(this.unsigned?xs.div_u:xs.div_s)(this.low,this.high,e.low,e.high);return t.fromBits(i,xs.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;let r,n,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return t.UZERO;if(e.gt(this.shru(1)))return t.UONE;s=t.UZERO}else{if(this.eq(t.MIN_VALUE))return e.eq(t.ONE)||e.eq(t.NEG_ONE)?t.MIN_VALUE:e.eq(t.MIN_VALUE)?t.ONE:(r=this.shr(1).div(e).shl(1),r.eq(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(n=this.sub(e.mul(r)),s=r.add(n.div(e)),s));if(e.eq(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=t.ZERO}for(n=this;n.gte(e);){r=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));let i=Math.ceil(Math.log(r)/Math.LN2),o=i<=48?1:Math.pow(2,i-48),a=t.fromNumber(r),u=a.mul(e);for(;u.isNegative()||u.gt(n);)r-=o,a=t.fromNumber(r,this.unsigned),u=a.mul(e);a.isZero()&&(a=t.ONE),s=s.add(a),n=n.sub(u)}return s}div(e){return this.divide(e)}equals(e){return t.isLong(e)||(e=t.fromValue(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low}eq(e){return this.equals(e)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){if(this.isNegative())return this.eq(t.MIN_VALUE)?64:this.neg().getNumBitsAbs();let e=this.high!==0?this.high:this.low,r;for(r=31;r>0&&(e&1<<r)===0;r--);return this.high!==0?r+33:r+1}greaterThan(e){return this.comp(e)>0}gt(e){return this.greaterThan(e)}greaterThanOrEqual(e){return this.comp(e)>=0}gte(e){return this.greaterThanOrEqual(e)}ge(e){return this.greaterThanOrEqual(e)}isEven(){return(this.low&1)===0}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return(this.low&1)===1}isPositive(){return this.unsigned||this.high>=0}isZero(){return this.high===0&&this.low===0}lessThan(e){return this.comp(e)<0}lt(e){return this.lessThan(e)}lessThanOrEqual(e){return this.comp(e)<=0}lte(e){return this.lessThanOrEqual(e)}modulo(e){if(t.isLong(e)||(e=t.fromValue(e)),xs){let r=(this.unsigned?xs.rem_u:xs.rem_s)(this.low,this.high,e.low,e.high);return t.fromBits(r,xs.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))}mod(e){return this.modulo(e)}rem(e){return this.modulo(e)}multiply(e){if(this.isZero())return t.ZERO;if(t.isLong(e)||(e=t.fromValue(e)),xs){let f=xs.mul(this.low,this.high,e.low,e.high);return t.fromBits(f,xs.get_high(),this.unsigned)}if(e.isZero())return t.ZERO;if(this.eq(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.eq(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(t.TWO_PWR_24)&&e.lt(t.TWO_PWR_24))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);let r=this.high>>>16,n=this.high&65535,s=this.low>>>16,i=this.low&65535,o=e.high>>>16,a=e.high&65535,u=e.low>>>16,c=e.low&65535,l=0,p=0,d=0,h=0;return h+=i*c,d+=h>>>16,h&=65535,d+=s*c,p+=d>>>16,d&=65535,d+=i*u,p+=d>>>16,d&=65535,p+=n*c,l+=p>>>16,p&=65535,p+=s*u,l+=p>>>16,p&=65535,p+=i*a,l+=p>>>16,p&=65535,l+=r*c+n*u+s*a+i*o,l&=65535,t.fromBits(d<<16|h,l<<16|p,this.unsigned)}mul(e){return this.multiply(e)}negate(){return!this.unsigned&&this.eq(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)}neg(){return this.negate()}not(){return t.fromBits(~this.low,~this.high,this.unsigned)}notEquals(e){return!this.equals(e)}neq(e){return this.notEquals(e)}ne(e){return this.notEquals(e)}or(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)}shiftLeft(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)}shl(e){return this.shiftLeft(e)}shiftRight(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)}shr(e){return this.shiftRight(e)}shiftRightUnsigned(e){if(t.isLong(e)&&(e=e.toInt()),e&=63,e===0)return this;{let r=this.high;if(e<32){let n=this.low;return t.fromBits(n>>>e|r<<32-e,r>>>e,this.unsigned)}else return e===32?t.fromBits(r,0,this.unsigned):t.fromBits(r>>>e-32,0,this.unsigned)}}shr_u(e){return this.shiftRightUnsigned(e)}shru(e){return this.shiftRightUnsigned(e)}subtract(e){return t.isLong(e)||(e=t.fromValue(e)),this.add(e.neg())}sub(e){return this.subtract(e)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){return this.unsigned?(this.high>>>0)*Fl+(this.low>>>0):this.high*Fl+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes(e){return e?this.toBytesLE():this.toBytesBE()}toBytesLE(){let e=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]}toBytesBE(){let e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255]}toSigned(){return this.unsigned?t.fromBits(this.low,this.high,!1):this}toString(e){if(e=e||10,e<2||36<e)throw new k("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(t.MIN_VALUE)){let i=t.fromNumber(e),o=this.div(i),a=o.mul(i).sub(this);return o.toString(e)+a.toInt().toString(e)}else return"-"+this.neg().toString(e);let r=t.fromNumber(Math.pow(e,6),this.unsigned),n=this,s="";for(;;){let i=n.div(r),a=(n.sub(i.mul(r)).toInt()>>>0).toString(e);if(n=i,n.isZero())return a+s;for(;a.length<6;)a="0"+a;s=""+a+s}}toUnsigned(){return this.unsigned?this:t.fromBits(this.low,this.high,!0)}xor(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)}eqz(){return this.isZero()}le(e){return this.lessThanOrEqual(e)}toExtendedJSON(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}}static fromExtendedJSON(e,r){let{useBigInt64:n=!1,relaxed:s=!0}={...r};if(e.$numberLong.length>ade)throw new k("$numberLong string is too long");if(!ude.test(e.$numberLong))throw new k(`$numberLong string "${e.$numberLong}" is in an invalid format`);if(n){let o=BigInt(e.$numberLong);return BigInt.asIntN(64,o)}let i=t.fromString(e.$numberLong);return s?i.toNumber():i}inspect(e,r,n){n??=es;let s=n(this.toString(),r),i=this.unsigned?`, ${n(this.unsigned,r)}`:"";return`new Long(${s}${i})`}},cde=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,lde=/^(\+|-)?(Infinity|inf)$/i,pde=/^(\+|-)?NaN$/i,Bl=6111,dd=-6176,pk=6176,dk=34,GA=B.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),hk=B.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),fk=B.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),dde=/^([-+])?(\d+)?$/,hde=31,mk=16383,fde=30,mde=31;function yk(t){return!isNaN(parseInt(t,10))}function yde(t){let e=Z.fromNumber(1e9),r=Z.fromNumber(0);if(!t.parts[0]&&!t.parts[1]&&!t.parts[2]&&!t.parts[3])return{quotient:t,rem:r};for(let n=0;n<=3;n++)r=r.shiftLeft(32),r=r.add(new Z(t.parts[n],0)),t.parts[n]=r.div(e).low,r=r.modulo(e);return{quotient:t,rem:r}}function gde(t,e){if(!t&&!e)return{high:Z.fromNumber(0),low:Z.fromNumber(0)};let r=t.shiftRightUnsigned(32),n=new Z(t.getLowBits(),0),s=e.shiftRightUnsigned(32),i=new Z(e.getLowBits(),0),o=r.multiply(s),a=r.multiply(i),u=n.multiply(s),c=n.multiply(i);return o=o.add(a.shiftRightUnsigned(32)),a=new Z(a.getLowBits(),0).add(u).add(c.shiftRightUnsigned(32)),o=o.add(a.shiftRightUnsigned(32)),c=a.shiftLeft(32).add(new Z(c.getLowBits(),0)),{high:o,low:c}}function _de(t,e){let r=t.high>>>0,n=e.high>>>0;if(r<n)return!0;if(r===n){let s=t.low>>>0,i=e.low>>>0;if(s<i)return!0}return!1}function ei(t,e){throw new k(`"${t}" is not a valid Decimal128 string - ${e}`)}var Pu=class t extends Jr{get _bsontype(){return"Decimal128"}bytes;constructor(e){if(super(),typeof e=="string")this.bytes=t.fromString(e).bytes;else if(e instanceof Uint8Array||ba(e)){if(e.byteLength!==16)throw new k("Decimal128 must take a Buffer of 16 bytes");this.bytes=e}else throw new k("Decimal128 must take a Buffer or string")}static fromString(e){return t._fromString(e,{allowRounding:!1})}static fromStringWithRounding(e){return t._fromString(e,{allowRounding:!0})}static _fromString(e,r){let n=!1,s=!1,i=!1,o=!1,a=0,u=0,c=0,l=0,p=0,d=[0],h=0,f=0,y=0,g=0,_=new Z(0,0),w=new Z(0,0),O=0,E=0;if(e.length>=7e3)throw new k(""+e+" not a valid Decimal128 string");let A=e.match(cde),x=e.match(lde),v=e.match(pde);if(!A&&!x&&!v||e.length===0)throw new k(""+e+" not a valid Decimal128 string");if(A){let j=A[2],U=A[4],oe=A[5],Q=A[6];U&&Q===void 0&&ei(e,"missing exponent power"),U&&j===void 0&&ei(e,"missing exponent base"),U===void 0&&(oe||Q)&&ei(e,"missing e before exponent")}if((e[E]==="+"||e[E]==="-")&&(s=!0,n=e[E++]==="-"),!yk(e[E])&&e[E]!=="."){if(e[E]==="i"||e[E]==="I")return new t(n?hk:fk);if(e[E]==="N")return new t(GA)}for(;yk(e[E])||e[E]===".";){if(e[E]==="."){i&&ei(e,"contains multiple periods"),i=!0,E=E+1;continue}h<dk&&(e[E]!=="0"||o)&&(o||(p=u),o=!0,d[f++]=parseInt(e[E],10),h=h+1),o&&(c=c+1),i&&(l=l+1),u=u+1,E=E+1}if(i&&!u)throw new k(""+e+" not a valid Decimal128 string");if(e[E]==="e"||e[E]==="E"){let j=e.substr(++E).match(dde);if(!j||!j[2])return new t(GA);g=parseInt(j[0],10),E=E+j[0].length}if(e[E])return new t(GA);if(!h)d[0]=0,c=1,h=1,a=0;else if(y=h-1,a=c,a!==1)for(;e[p+a-1+Number(s)+Number(i)]==="0";)a=a-1;for(g<=l&&l>g+16384?g=dd:g=g-l;g>Bl;){if(y=y+1,y>=dk){if(a===0){g=Bl;break}ei(e,"overflow")}g=g-1}if(r.allowRounding){for(;g<dd||h<c;){if(y===0&&a<h){g=dd,a=0;break}if(h<c?c=c-1:y=y-1,g<Bl)g=g+1;else{if(d.join("").match(/^0+$/)){g=Bl;break}ei(e,"overflow")}}if(y+1<a){let j=u;i&&(p=p+1,j=j+1),s&&(p=p+1,j=j+1);let U=parseInt(e[p+y+1],10),oe=0;if(U>=5&&(oe=1,U===5)){oe=d[y]%2===1?1:0;for(let Q=p+y+2;Q<j;Q++)if(parseInt(e[Q],10)){oe=1;break}}if(oe){let Q=y;for(;Q>=0&&++d[Q]>9;Q--)if(d[Q]=0,Q===0)if(g<Bl)g=g+1,d[Q]=1;else return new t(n?hk:fk)}}}else{for(;g<dd||h<c;){if(y===0){if(a===0){g=dd;break}ei(e,"exponent underflow")}h<c?(e[c-1+Number(s)+Number(i)]!=="0"&&a!==0&&ei(e,"inexact rounding"),c=c-1):(d[y]!==0&&ei(e,"inexact rounding"),y=y-1),g<Bl?g=g+1:ei(e,"overflow")}y+1<a&&(i&&(p=p+1),s&&(p=p+1),parseInt(e[p+y+1],10)!==0&&ei(e,"inexact rounding"))}if(_=Z.fromNumber(0),w=Z.fromNumber(0),a===0)_=Z.fromNumber(0),w=Z.fromNumber(0);else if(y<17){let j=0;for(w=Z.fromNumber(d[j++]),_=new Z(0,0);j<=y;j++)w=w.multiply(Z.fromNumber(10)),w=w.add(Z.fromNumber(d[j]))}else{let j=0;for(_=Z.fromNumber(d[j++]);j<=y-17;j++)_=_.multiply(Z.fromNumber(10)),_=_.add(Z.fromNumber(d[j]));for(w=Z.fromNumber(d[j++]);j<=y;j++)w=w.multiply(Z.fromNumber(10)),w=w.add(Z.fromNumber(d[j]))}let R=gde(_,Z.fromString("100000000000000000"));R.low=R.low.add(w),_de(R.low,w)&&(R.high=R.high.add(Z.fromNumber(1))),O=g+pk;let M={low:Z.fromNumber(0),high:Z.fromNumber(0)};R.high.shiftRightUnsigned(49).and(Z.fromNumber(1)).equals(Z.fromNumber(1))?(M.high=M.high.or(Z.fromNumber(3).shiftLeft(61)),M.high=M.high.or(Z.fromNumber(O).and(Z.fromNumber(16383).shiftLeft(47))),M.high=M.high.or(R.high.and(Z.fromNumber(0x7fffffffffff)))):(M.high=M.high.or(Z.fromNumber(O&16383).shiftLeft(49)),M.high=M.high.or(R.high.and(Z.fromNumber(562949953421311)))),M.low=R.low,n&&(M.high=M.high.or(Z.fromString("9223372036854775808")));let I=B.allocateUnsafe(16);return E=0,I[E++]=M.low.low&255,I[E++]=M.low.low>>8&255,I[E++]=M.low.low>>16&255,I[E++]=M.low.low>>24&255,I[E++]=M.low.high&255,I[E++]=M.low.high>>8&255,I[E++]=M.low.high>>16&255,I[E++]=M.low.high>>24&255,I[E++]=M.high.low&255,I[E++]=M.high.low>>8&255,I[E++]=M.high.low>>16&255,I[E++]=M.high.low>>24&255,I[E++]=M.high.high&255,I[E++]=M.high.high>>8&255,I[E++]=M.high.high>>16&255,I[E++]=M.high.high>>24&255,new t(I)}toString(){let e,r=0,n=new Array(36);for(let E=0;E<n.length;E++)n[E]=0;let s=0,i=!1,o,a={parts:[0,0,0,0]},u,c,l=[];s=0;let p=this.bytes,d=p[s++]|p[s++]<<8|p[s++]<<16|p[s++]<<24,h=p[s++]|p[s++]<<8|p[s++]<<16|p[s++]<<24,f=p[s++]|p[s++]<<8|p[s++]<<16|p[s++]<<24,y=p[s++]|p[s++]<<8|p[s++]<<16|p[s++]<<24;s=0,{low:new Z(d,h),high:new Z(f,y)}.high.lessThan(Z.ZERO)&&l.push("-");let _=y>>26&hde;if(_>>3===3){if(_===fde)return l.join("")+"Infinity";if(_===mde)return"NaN";e=y>>15&mk,o=8+(y>>14&1)}else o=y>>14&7,e=y>>17&mk;let w=e-pk;if(a.parts[0]=(y&16383)+((o&15)<<14),a.parts[1]=f,a.parts[2]=h,a.parts[3]=d,a.parts[0]===0&&a.parts[1]===0&&a.parts[2]===0&&a.parts[3]===0)i=!0;else for(c=3;c>=0;c--){let E=0,A=yde(a);if(a=A.quotient,E=A.rem.low,!!E)for(u=8;u>=0;u--)n[c*9+u]=E%10,E=Math.floor(E/10)}if(i)r=1,n[s]=0;else for(r=36;!n[s];)r=r-1,s=s+1;let O=r-1+w;if(O>=34||O<=-7||w>0){if(r>34)return l.push("0"),w>0?l.push(`E+${w}`):w<0&&l.push(`E${w}`),l.join("");l.push(`${n[s++]}`),r=r-1,r&&l.push(".");for(let E=0;E<r;E++)l.push(`${n[s++]}`);l.push("E"),O>0?l.push(`+${O}`):l.push(`${O}`)}else if(w>=0)for(let E=0;E<r;E++)l.push(`${n[s++]}`);else{let E=r+w;if(E>0)for(let A=0;A<E;A++)l.push(`${n[s++]}`);else l.push("0");for(l.push(".");E++<0;)l.push("0");for(let A=0;A<r-Math.max(E-1,0);A++)l.push(`${n[s++]}`)}return l.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON(e){return t.fromString(e.$numberDecimal)}inspect(e,r,n){return n??=es,`new Decimal128(${n(this.toString(),r)})`}},Aa=class t extends Jr{get _bsontype(){return"Double"}value;constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=+e}static fromString(e){let r=Number(e);if(e==="NaN")return new t(NaN);if(e==="Infinity")return new t(1/0);if(e==="-Infinity")return new t(-1/0);if(!Number.isFinite(r))throw new k(`Input: ${e} is not representable as a Double`);if(e.trim()!==e)throw new k(`Input: '${e}' contains whitespace`);if(e==="")throw new k("Input is an empty string");if(/[^-0-9.+eE]/.test(e))throw new k(`Input: '${e}' is not in decimal or exponential notation`);return new t(r)}valueOf(){return this.value}toJSON(){return this.value}toString(e){return this.value.toString(e)}toExtendedJSON(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-0.0"}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON(e,r){let n=parseFloat(e.$numberDouble);return r&&r.relaxed?n:new t(n)}inspect(e,r,n){return n??=es,`new Double(${n(this.value,r)})`}},Oa=class t extends Jr{get _bsontype(){return"Int32"}value;constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=+e|0}static fromString(e){let r=qk(e),n=Number(e);if(md<n)throw new k(`Input: '${e}' is larger than the maximum value for Int32`);if(yd>n)throw new k(`Input: '${e}' is smaller than the minimum value for Int32`);if(Number.isSafeInteger(n)){if(n.toString()!==r)throw new k(`Input: '${e}' is not a valid Int32 string`)}else throw new k(`Input: '${e}' is not a safe integer`);return new t(n)}valueOf(){return this.value}toString(e){return this.value.toString(e)}toJSON(){return this.value}toExtendedJSON(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}}static fromExtendedJSON(e,r){return r&&r.relaxed?parseInt(e.$numberInt,10):new t(e.$numberInt)}inspect(e,r,n){return n??=es,`new Int32(${n(this.value,r)})`}},Bu=class t extends Jr{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new t}inspect(){return"new MaxKey()"}},Iu=class t extends Jr{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new t}inspect(){return"new MinKey()"}},Tu=null,hd=new WeakMap,Ca=class t extends Jr{get _bsontype(){return"ObjectId"}static index=Math.floor(Math.random()*16777215);static cacheHexString;buffer;constructor(e){super();let r;if(typeof e=="object"&&e&&"id"in e){if(typeof e.id!="string"&&!ArrayBuffer.isView(e.id))throw new k("Argument passed in must have an id that is of type string or Buffer");"toHexString"in e&&typeof e.toHexString=="function"?r=B.fromHex(e.toHexString()):r=e.id}else r=e;if(r==null)this.buffer=t.generate();else if(ArrayBuffer.isView(r)&&r.byteLength===12)this.buffer=B.toLocalBufferType(r);else if(typeof r=="string")if(t.validateHexString(r))this.buffer=B.fromHex(r),t.cacheHexString&&hd.set(this,r);else throw new k("input must be a 24 character hex string, 12 byte Uint8Array, or an integer");else throw new k("Argument passed in does not match the accepted types")}get id(){return this.buffer}set id(e){this.buffer=e,t.cacheHexString&&hd.set(this,B.toHex(e))}static validateHexString(e){if(e?.length!==24)return!1;for(let r=0;r<24;r++){let n=e.charCodeAt(r);if(!(n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70))return!1}return!0}toHexString(){if(t.cacheHexString){let r=hd.get(this);if(r)return r}let e=B.toHex(this.id);return t.cacheHexString&&hd.set(this,e),e}static getInc(){return t.index=(t.index+1)%16777215}static generate(e){typeof e!="number"&&(e=Math.floor(Date.now()/1e3));let r=t.getInc(),n=B.allocateUnsafe(12);return ie.setInt32BE(n,0,e),Tu===null&&(Tu=B.randomBytes(5)),n[4]=Tu[0],n[5]=Tu[1],n[6]=Tu[2],n[7]=Tu[3],n[8]=Tu[4],n[11]=r&255,n[10]=r>>8&255,n[9]=r>>16&255,n}toString(e){return e==="base64"?B.toBase64(this.id):e==="hex"?this.toHexString():this.toHexString()}toJSON(){return this.toHexString()}static is(e){return e!=null&&typeof e=="object"&&"_bsontype"in e&&e._bsontype==="ObjectId"}equals(e){if(e==null)return!1;if(t.is(e))return this.buffer[11]===e.buffer[11]&&B.equals(this.buffer,e.buffer);if(typeof e=="string")return e.toLowerCase()===this.toHexString();if(typeof e=="object"&&typeof e.toHexString=="function"){let r=e.toHexString(),n=this.toHexString();return typeof r=="string"&&r.toLowerCase()===n}return!1}getTimestamp(){let e=new Date,r=ie.getUint32BE(this.buffer,0);return e.setTime(Math.floor(r)*1e3),e}static createPk(){return new t}serializeInto(e,r){return e[r]=this.buffer[0],e[r+1]=this.buffer[1],e[r+2]=this.buffer[2],e[r+3]=this.buffer[3],e[r+4]=this.buffer[4],e[r+5]=this.buffer[5],e[r+6]=this.buffer[6],e[r+7]=this.buffer[7],e[r+8]=this.buffer[8],e[r+9]=this.buffer[9],e[r+10]=this.buffer[10],e[r+11]=this.buffer[11],12}static createFromTime(e){let r=B.allocate(12);for(let n=11;n>=4;n--)r[n]=0;return ie.setInt32BE(r,0,e),new t(r)}static createFromHexString(e){if(e?.length!==24)throw new k("hex string must be 24 characters");return new t(B.fromHex(e))}static createFromBase64(e){if(e?.length!==16)throw new k("base64 string must be 16 characters");return new t(B.fromBase64(e))}static isValid(e){if(e==null)return!1;if(typeof e=="string")return t.validateHexString(e);try{return new t(e),!0}catch{return!1}}toExtendedJSON(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}static fromExtendedJSON(e){return new t(e.$oid)}isCached(){return t.cacheHexString&&hd.has(this)}inspect(e,r,n){return n??=es,`new ObjectId(${n(this.toHexString(),r)})`}};function K0(t,e,r){let n=5;if(Array.isArray(t))for(let s=0;s<t.length;s++)n+=gk(s.toString(),t[s],e,!0,r);else{typeof t?.toBSON=="function"&&(t=t.toBSON());for(let s of Object.keys(t))n+=gk(s,t[s],e,!1,r)}return n}function gk(t,e,r=!1,n=!1,s=!1){switch(typeof e?.toBSON=="function"&&(e=e.toBSON()),typeof e){case"string":return 1+B.utf8ByteLength(t)+1+4+B.utf8ByteLength(e)+1;case"number":return Math.floor(e)===e&&e>=Ak&&e<=Sk&&e>=yd&&e<=md?(t!=null?B.utf8ByteLength(t)+1:0)+5:(t!=null?B.utf8ByteLength(t)+1:0)+9;case"undefined":return n||!s?(t!=null?B.utf8ByteLength(t)+1:0)+1:0;case"boolean":return(t!=null?B.utf8ByteLength(t)+1:0)+2;case"object":if(e!=null&&typeof e._bsontype=="string"&&e[$l]!==Mu)throw new yo;if(e==null||e._bsontype==="MinKey"||e._bsontype==="MaxKey")return(t!=null?B.utf8ByteLength(t)+1:0)+1;if(e._bsontype==="ObjectId")return(t!=null?B.utf8ByteLength(t)+1:0)+13;if(e instanceof Date||kl(e))return(t!=null?B.utf8ByteLength(t)+1:0)+9;if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer||g6(e))return(t!=null?B.utf8ByteLength(t)+1:0)+6+e.byteLength;if(e._bsontype==="Long"||e._bsontype==="Double"||e._bsontype==="Timestamp")return(t!=null?B.utf8ByteLength(t)+1:0)+9;if(e._bsontype==="Decimal128")return(t!=null?B.utf8ByteLength(t)+1:0)+17;if(e._bsontype==="Code")return e.scope!=null&&Object.keys(e.scope).length>0?(t!=null?B.utf8ByteLength(t)+1:0)+1+4+4+B.utf8ByteLength(e.code.toString())+1+K0(e.scope,r,s):(t!=null?B.utf8ByteLength(t)+1:0)+1+4+B.utf8ByteLength(e.code.toString())+1;if(e._bsontype==="Binary"){let i=e;return i.sub_type===Pt.SUBTYPE_BYTE_ARRAY?(t!=null?B.utf8ByteLength(t)+1:0)+(i.position+1+4+1+4):(t!=null?B.utf8ByteLength(t)+1:0)+(i.position+1+4+1)}else{if(e._bsontype==="Symbol")return(t!=null?B.utf8ByteLength(t)+1:0)+B.utf8ByteLength(e.value)+4+1+1;if(e._bsontype==="DBRef"){let i=Object.assign({$ref:e.collection,$id:e.oid},e.fields);return e.db!=null&&(i.$db=e.db),(t!=null?B.utf8ByteLength(t)+1:0)+1+K0(i,r,s)}else return e instanceof RegExp||Nl(e)?(t!=null?B.utf8ByteLength(t)+1:0)+1+B.utf8ByteLength(e.source)+1+(e.global?1:0)+(e.ignoreCase?1:0)+(e.multiline?1:0)+1:e._bsontype==="BSONRegExp"?(t!=null?B.utf8ByteLength(t)+1:0)+1+B.utf8ByteLength(e.pattern)+1+B.utf8ByteLength(e.options)+1:(t!=null?B.utf8ByteLength(t)+1:0)+K0(e,r,s)+1}case"function":return r?(t!=null?B.utf8ByteLength(t)+1:0)+1+4+B.utf8ByteLength(e.toString())+1:0;case"bigint":return(t!=null?B.utf8ByteLength(t)+1:0)+9;case"symbol":return 0;default:throw new k(`Unrecognized JS type: ${typeof e}`)}}function Ede(t){return t.split("").sort().join("")}var _o=class t extends Jr{get _bsontype(){return"BSONRegExp"}pattern;options;constructor(e,r){if(super(),this.pattern=e,this.options=Ede(r??""),this.pattern.indexOf("\0")!==-1)throw new k(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(this.options.indexOf("\0")!==-1)throw new k(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let n=0;n<this.options.length;n++)if(!(this.options[n]==="i"||this.options[n]==="m"||this.options[n]==="x"||this.options[n]==="l"||this.options[n]==="s"||this.options[n]==="u"))throw new k(`The regular expression option [${this.options[n]}] is not supported`)}static parseOptions(e){return e?e.split("").sort().join(""):""}toExtendedJSON(e){return e=e||{},e.legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON(e){if("$regex"in e)if(typeof e.$regex!="string"){if(e.$regex._bsontype==="BSONRegExp")return e}else return new t(e.$regex,t.parseOptions(e.$options));if("$regularExpression"in e)return new t(e.$regularExpression.pattern,t.parseOptions(e.$regularExpression.options));throw new k(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(e)}`)}inspect(e,r,n){let s=z1e(r)??(a=>a);n??=es;let i=s(n(this.pattern),"regexp"),o=s(n(this.options),"regexp");return`new BSONRegExp(${i}, ${o})`}},Nu=class t extends Jr{get _bsontype(){return"BSONSymbol"}value;constructor(e){super(),this.value=e}valueOf(){return this.value}toString(){return this.value}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON(e){return new t(e.$symbol)}inspect(e,r,n){return n??=es,`new BSONSymbol(${n(this.value,r)})`}},bde=Z,ku=class t extends bde{get _bsontype(){return"Timestamp"}get[Y0](){return"Timestamp"}static MAX_VALUE=Z.MAX_UNSIGNED_VALUE;get i(){return this.low>>>0}get t(){return this.high>>>0}constructor(e){if(e==null)super(0,0,!0);else if(typeof e=="bigint")super(e,!0);else if(Z.isLong(e))super(e.low,e.high,!0);else if(typeof e=="object"&&"t"in e&&"i"in e){if(typeof e.t!="number"&&(typeof e.t!="object"||e.t._bsontype!=="Int32"))throw new k("Timestamp constructed from { t, i } must provide t as a number");if(typeof e.i!="number"&&(typeof e.i!="object"||e.i._bsontype!=="Int32"))throw new k("Timestamp constructed from { t, i } must provide i as a number");let r=Number(e.t),n=Number(e.i);if(r<0||Number.isNaN(r))throw new k("Timestamp constructed from { t, i } must provide a positive t");if(n<0||Number.isNaN(n))throw new k("Timestamp constructed from { t, i } must provide a positive i");if(r>4294967295)throw new k("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if(n>4294967295)throw new k("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super(n,r,!0)}else throw new k("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }")}toJSON(){return{$timestamp:this.toString()}}static fromInt(e){return new t(Z.fromInt(e,!0))}static fromNumber(e){return new t(Z.fromNumber(e,!0))}static fromBits(e,r){return new t({i:e,t:r})}static fromString(e,r){return new t(Z.fromString(e,!0,r))}toExtendedJSON(){return{$timestamp:{t:this.t,i:this.i}}}static fromExtendedJSON(e){let r=Z.isLong(e.$timestamp.i)?e.$timestamp.i.getLowBitsUnsigned():e.$timestamp.i,n=Z.isLong(e.$timestamp.t)?e.$timestamp.t.getLowBitsUnsigned():e.$timestamp.t;return new t({t:n,i:r})}inspect(e,r,n){n??=es;let s=n(this.t,r),i=n(this.i,r);return`new Timestamp({ t: ${s}, i: ${i} })`}},wde=Z.fromNumber(Sk),Sde=Z.fromNumber(Ak);function Lk(t,e,r){e=e??{};let n=e&&e.index?e.index:0,s=ie.getInt32LE(t,n);if(s<5)throw new k(`bson size must be >= 5, is ${s}`);if(e.allowObjectSmallerThanBufferSize&&t.length<s)throw new k(`buffer length ${t.length} must be >= bson size ${s}`);if(!e.allowObjectSmallerThanBufferSize&&t.length!==s)throw new k(`buffer length ${t.length} must === bson size ${s}`);if(s+n>t.byteLength)throw new k(`(bson size ${s} + options.index ${n} must be <= buffer length ${t.byteLength})`);if(t[n+s-1]!==0)throw new k("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return H0(t,n,e,r)}var Ade=/^\$ref$|^\$id$|^\$db$/;function H0(t,e,r,n=!1){let s=r.fieldsAsRaw==null?null:r.fieldsAsRaw,i=r.raw==null?!1:r.raw,o=typeof r.bsonRegExp=="boolean"?r.bsonRegExp:!1,a=r.promoteBuffers??!1,u=r.promoteLongs??!0,c=r.promoteValues??!0,l=r.useBigInt64??!1;if(l&&!c)throw new k("Must either request bigint or Long for int64 deserialization");if(l&&!u)throw new k("Must either request bigint or Long for int64 deserialization");let p=r.validation==null?{utf8:!0}:r.validation,d=!0,h,f,y=p.utf8;if(typeof y=="boolean")h=y;else{d=!1;let A=Object.keys(y).map(function(x){return y[x]});if(A.length===0)throw new k("UTF-8 validation setting cannot be empty");if(typeof A[0]!="boolean")throw new k("Invalid UTF-8 validation option, must specify boolean values");if(h=A[0],!A.every(x=>x===h))throw new k("Invalid UTF-8 validation option - keys must be all true or all false")}if(!d){f=new Set;for(let A of Object.keys(y))f.add(A)}let g=e;if(t.length<5)throw new k("corrupt bson message < 5 bytes long");let _=ie.getInt32LE(t,e);if(e+=4,_<5||_>t.length)throw new k("corrupt bson message");let w=n?[]:{},O=0,E=n?!1:null;for(;;){let A=t[e++];if(A===0)break;let x=e;for(;t[x]!==0&&x<t.length;)x++;if(x>=t.byteLength)throw new k("Bad BSON Document: illegal CString");let v=n?O++:B.toUTF8(t,e,x,!1),R=!0;d||f?.has(v)?R=h:R=!h,E!==!1&&v[0]==="$"&&(E=Ade.test(v));let M;if(e=x+1,A===Ok){let I=ie.getInt32LE(t,e);if(e+=4,I<=0||I>t.length-e||t[e+I-1]!==0)throw new k("bad string length in bson");M=B.toUTF8(t,e,e+I-1,R),e=e+I}else if(A===vk){let I=B.allocateUnsafe(12);for(let j=0;j<12;j++)I[j]=t[e+j];M=new Ca(I),e=e+12}else if(A===fd&&c===!1)M=new Oa(ie.getInt32LE(t,e)),e+=4;else if(A===fd)M=ie.getInt32LE(t,e),e+=4;else if(A===E6)M=ie.getFloat64LE(t,e),e+=8,c===!1&&(M=new Aa(M));else if(A===Tk){let I=ie.getInt32LE(t,e),j=ie.getInt32LE(t,e+4);e+=8,M=new Date(new Z(I,j).toNumber())}else if(A===xk){if(t[e]!==0&&t[e]!==1)throw new k("illegal boolean type value");M=t[e++]===1}else if(A===b6){let I=e,j=ie.getInt32LE(t,e);if(j<=0||j>t.length-e)throw new k("bad embedded document length in bson");if(i)M=t.subarray(e,e+j);else{let U=r;d||(U={...r,validation:{utf8:R}}),M=H0(t,I,U,!1)}e=e+j}else if(A===Ck){let I=e,j=ie.getInt32LE(t,e),U=r,oe=e+j;if(s&&s[v]&&(U={...r,raw:!0}),d||(U={...U,validation:{utf8:R}}),M=H0(t,I,U,!0),e=e+j,t[e-1]!==0)throw new k("invalid array terminator byte");if(e!==oe)throw new k("corrupted array bson")}else if(A===K1e)M=void 0;else if(A===S6)M=null;else if(A===O6)if(l)M=ie.getBigInt64LE(t,e),e+=8;else{let I=ie.getInt32LE(t,e),j=ie.getInt32LE(t,e+4);e+=8;let U=new Z(I,j);u&&c===!0?M=U.lessThanOrEqual(wde)&&U.greaterThanOrEqual(Sde)?U.toNumber():U:M=U}else if(A===Bk){let I=B.allocateUnsafe(16);for(let j=0;j<16;j++)I[j]=t[e+j];e=e+16,M=new Pu(I)}else if(A===w6){let I=ie.getInt32LE(t,e);e+=4;let j=I,U=t[e++];if(I<0)throw new k("Negative binary type element size found");if(I>t.byteLength)throw new k("Binary type size larger than document size");if(U===Pt.SUBTYPE_BYTE_ARRAY){if(I=ie.getInt32LE(t,e),e+=4,I<0)throw new k("Negative binary type element size found for subtype 0x02");if(I>j-4)throw new k("Binary type with subtype 0x02 contains too long binary size");if(I<j-4)throw new k("Binary type with subtype 0x02 contains too short binary size")}a&&c?M=B.toLocalBufferType(t.subarray(e,e+I)):(M=new Pt(t.subarray(e,e+I),U),U===C6&&Sa.isValid(M)&&(M=M.toUUID())),e=e+I}else if(A===G0&&o===!1){for(x=e;t[x]!==0&&x<t.length;)x++;if(x>=t.length)throw new k("Bad BSON Document: illegal CString");let I=B.toUTF8(t,e,x,!1);for(e=x+1,x=e;t[x]!==0&&x<t.length;)x++;if(x>=t.length)throw new k("Bad BSON Document: illegal CString");let j=B.toUTF8(t,e,x,!1);e=x+1;let U=new Array(j.length);for(x=0;x<j.length;x++)switch(j[x]){case"m":U[x]="m";break;case"s":U[x]="g";break;case"i":U[x]="i";break}M=new RegExp(I,U.join(""))}else if(A===G0&&o===!0){for(x=e;t[x]!==0&&x<t.length;)x++;if(x>=t.length)throw new k("Bad BSON Document: illegal CString");let I=B.toUTF8(t,e,x,!1);for(e=x+1,x=e;t[x]!==0&&x<t.length;)x++;if(x>=t.length)throw new k("Bad BSON Document: illegal CString");let j=B.toUTF8(t,e,x,!1);e=x+1,M=new _o(I,j)}else if(A===Dk){let I=ie.getInt32LE(t,e);if(e+=4,I<=0||I>t.length-e||t[e+I-1]!==0)throw new k("bad string length in bson");let j=B.toUTF8(t,e,e+I-1,R);M=c?j:new Nu(j),e=e+I}else if(A===Pk)M=new ku({i:ie.getUint32LE(t,e),t:ie.getUint32LE(t,e+4)}),e+=8;else if(A===Ik)M=new Iu;else if(A===Nk)M=new Bu;else if(A===A6){let I=ie.getInt32LE(t,e);if(e+=4,I<=0||I>t.length-e||t[e+I-1]!==0)throw new k("bad string length in bson");let j=B.toUTF8(t,e,e+I-1,R);M=new go(j),e=e+I}else if(A===Mk){let I=ie.getInt32LE(t,e);if(e+=4,I<13)throw new k("code_w_scope total size shorter minimum expected length");let j=ie.getInt32LE(t,e);if(e+=4,j<=0||j>t.length-e||t[e+j-1]!==0)throw new k("bad string length in bson");let U=B.toUTF8(t,e,e+j-1,R);e=e+j;let oe=e,Q=ie.getInt32LE(t,e),un=H0(t,oe,r,!1);if(e=e+Q,I<8+Q+j)throw new k("code_w_scope total size is too short, truncating scope");if(I>8+Q+j)throw new k("code_w_scope total size is too long, clips outer document");M=new go(U,un)}else if(A===H1e){let I=ie.getInt32LE(t,e);if(e+=4,I<=0||I>t.length-e||t[e+I-1]!==0)throw new k("bad string length in bson");let j=B.toUTF8(t,e,e+I-1,R);e=e+I;let U=B.allocateUnsafe(12);for(let Q=0;Q<12;Q++)U[Q]=t[e+Q];let oe=new Ca(U);e=e+12,M=new qi(j,oe)}else throw new k(`Detected unknown BSON type ${A.toString(16)} for fieldname "${v}"`);v==="__proto__"?Object.defineProperty(w,v,{value:M,writable:!0,enumerable:!0,configurable:!0}):w[v]=M}if(_!==e-g)throw n?new k("corrupt array bson"):new k("corrupt object bson");if(!E)return w;if($k(w)){let A=Object.assign({},w);return delete A.$ref,delete A.$id,delete A.$db,new qi(w.$ref,w.$id,w.$db,A)}return w}var J0=/\x00/,_k=new Set(["$db","$ref","$id","$clusterTime"]);function JA(t,e,r,n){t[n++]=Ok;let s=B.encodeUTF8Into(t,e,n);n=n+s+1,t[n-1]=0;let i=B.encodeUTF8Into(t,r,n+4);return ie.setInt32LE(t,n,i+1),n=n+4+i,t[n++]=0,n}function YA(t,e,r,n){let i=!Object.is(r,-0)&&Number.isSafeInteger(r)&&r<=md&&r>=yd?fd:E6;t[n++]=i;let o=B.encodeUTF8Into(t,e,n);return n=n+o,t[n++]=0,i===fd?n+=ie.setInt32LE(t,n,r):n+=ie.setFloat64LE(t,n,r),n}function QA(t,e,r,n){t[n++]=O6;let s=B.encodeUTF8Into(t,e,n);return n+=s,t[n++]=0,n+=ie.setBigInt64LE(t,n,r),n}function Il(t,e,r,n){t[n++]=S6;let s=B.encodeUTF8Into(t,e,n);return n=n+s,t[n++]=0,n}function XA(t,e,r,n){t[n++]=xk;let s=B.encodeUTF8Into(t,e,n);return n=n+s,t[n++]=0,t[n++]=r?1:0,n}function ZA(t,e,r,n){t[n++]=Tk;let s=B.encodeUTF8Into(t,e,n);n=n+s,t[n++]=0;let i=Z.fromNumber(r.getTime()),o=i.getLowBits(),a=i.getHighBits();return n+=ie.setInt32LE(t,n,o),n+=ie.setInt32LE(t,n,a),n}function e6(t,e,r,n){t[n++]=G0;let s=B.encodeUTF8Into(t,e,n);if(n=n+s,t[n++]=0,r.source&&r.source.match(J0)!=null)throw new k("value "+r.source+" must not contain null bytes");return n=n+B.encodeUTF8Into(t,r.source,n),t[n++]=0,r.ignoreCase&&(t[n++]=105),r.global&&(t[n++]=115),r.multiline&&(t[n++]=109),t[n++]=0,n}function t6(t,e,r,n){t[n++]=G0;let s=B.encodeUTF8Into(t,e,n);if(n=n+s,t[n++]=0,r.pattern.match(J0)!=null)throw new k("pattern "+r.pattern+" must not contain null bytes");n=n+B.encodeUTF8Into(t,r.pattern,n),t[n++]=0;let i=r.options.split("").sort().join("");return n=n+B.encodeUTF8Into(t,i,n),t[n++]=0,n}function r6(t,e,r,n){r===null?t[n++]=S6:r._bsontype==="MinKey"?t[n++]=Ik:t[n++]=Nk;let s=B.encodeUTF8Into(t,e,n);return n=n+s,t[n++]=0,n}function n6(t,e,r,n){t[n++]=vk;let s=B.encodeUTF8Into(t,e,n);return n=n+s,t[n++]=0,n+=r.serializeInto(t,n),n}function s6(t,e,r,n){t[n++]=w6;let s=B.encodeUTF8Into(t,e,n);n=n+s,t[n++]=0;let i=r.length;if(n+=ie.setInt32LE(t,n,i),t[n++]=G1e,i<=16)for(let o=0;o<i;o++)t[n+o]=r[o];else t.set(r,n);return n=n+i,n}function i6(t,e,r,n,s,i,o,a,u){if(u.has(r))throw new k("Cannot convert circular structure to BSON");u.add(r),t[n++]=Array.isArray(r)?Ck:b6;let c=B.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let l=gd(t,r,s,n,i+1,o,a,u);return u.delete(r),l}function o6(t,e,r,n){t[n++]=Bk;let s=B.encodeUTF8Into(t,e,n);n=n+s,t[n++]=0;for(let i=0;i<16;i++)t[n+i]=r.bytes[i];return n+16}function a6(t,e,r,n){t[n++]=r._bsontype==="Long"?O6:Pk;let s=B.encodeUTF8Into(t,e,n);n=n+s,t[n++]=0;let i=r.getLowBits(),o=r.getHighBits();return n+=ie.setInt32LE(t,n,i),n+=ie.setInt32LE(t,n,o),n}function u6(t,e,r,n){r=r.valueOf(),t[n++]=fd;let s=B.encodeUTF8Into(t,e,n);return n=n+s,t[n++]=0,n+=ie.setInt32LE(t,n,r),n}function c6(t,e,r,n){t[n++]=E6;let s=B.encodeUTF8Into(t,e,n);return n=n+s,t[n++]=0,n+=ie.setFloat64LE(t,n,r.value),n}function l6(t,e,r,n){t[n++]=A6;let s=B.encodeUTF8Into(t,e,n);n=n+s,t[n++]=0;let i=r.toString(),o=B.encodeUTF8Into(t,i,n+4)+1;return ie.setInt32LE(t,n,o),n=n+4+o-1,t[n++]=0,n}function p6(t,e,r,n,s=!1,i=0,o=!1,a=!0,u){if(r.scope&&typeof r.scope=="object"){t[n++]=Mk;let c=B.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let l=n,p=r.code;n=n+4;let d=B.encodeUTF8Into(t,p,n+4)+1;ie.setInt32LE(t,n,d),t[n+4+d-1]=0,n=n+d+4;let h=gd(t,r.scope,s,n,i+1,o,a,u);n=h-1;let f=h-l;l+=ie.setInt32LE(t,l,f),t[n++]=0}else{t[n++]=A6;let c=B.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let l=r.code.toString(),p=B.encodeUTF8Into(t,l,n+4)+1;ie.setInt32LE(t,n,p),n=n+4+p-1,t[n++]=0}return n}function d6(t,e,r,n){t[n++]=w6;let s=B.encodeUTF8Into(t,e,n);n=n+s,t[n++]=0;let i=r.buffer,o=r.position;if(r.sub_type===Pt.SUBTYPE_BYTE_ARRAY&&(o=o+4),n+=ie.setInt32LE(t,n,o),t[n++]=r.sub_type,r.sub_type===Pt.SUBTYPE_BYTE_ARRAY&&(o=o-4,n+=ie.setInt32LE(t,n,o)),r.sub_type===Pt.SUBTYPE_VECTOR&&fo(r),o<=16)for(let a=0;a<o;a++)t[n+a]=i[a];else t.set(i,n);return n=n+r.position,n}function h6(t,e,r,n){t[n++]=Dk;let s=B.encodeUTF8Into(t,e,n);n=n+s,t[n++]=0;let i=B.encodeUTF8Into(t,r.value,n+4)+1;return ie.setInt32LE(t,n,i),n=n+4+i-1,t[n++]=0,n}function f6(t,e,r,n,s,i,o){t[n++]=b6;let a=B.encodeUTF8Into(t,e,n);n=n+a,t[n++]=0;let u=n,c={$ref:r.collection||r.namespace,$id:r.oid};r.db!=null&&(c.$db=r.db),c=Object.assign(c,r.fields);let l=gd(t,c,!1,n,s+1,i,!0,o),p=l-u;return u+=ie.setInt32LE(t,n,p),l}function gd(t,e,r,n,s,i,o,a){if(a==null){if(e==null)return t[0]=5,t[1]=0,t[2]=0,t[3]=0,t[4]=0,5;if(Array.isArray(e))throw new k("serialize does not support an array as the root input");if(typeof e!="object")throw new k("serialize does not support non-object as the root input");if("_bsontype"in e&&typeof e._bsontype=="string")throw new k("BSON types cannot be serialized as a document");if(kl(e)||Nl(e)||ba(e)||g6(e))throw new k("date, regexp, typedarray, and arraybuffer cannot be BSON documents");a=new Set}a.add(e);let u=n+4;if(Array.isArray(e))for(let l=0;l<e.length;l++){let p=`${l}`,d=e[l];typeof d?.toBSON=="function"&&(d=d.toBSON());let h=typeof d;if(d===void 0)u=Il(t,p,d,u);else if(d===null)u=Il(t,p,d,u);else if(h==="string")u=JA(t,p,d,u);else if(h==="number")u=YA(t,p,d,u);else if(h==="bigint")u=QA(t,p,d,u);else if(h==="boolean")u=XA(t,p,d,u);else if(h==="object"&&d._bsontype==null)d instanceof Date||kl(d)?u=ZA(t,p,d,u):d instanceof Uint8Array||ba(d)?u=s6(t,p,d,u):d instanceof RegExp||Nl(d)?u=e6(t,p,d,u):u=i6(t,p,d,u,r,s,i,o,a);else if(h==="object"){if(d[$l]!==Mu)throw new yo;if(d._bsontype==="ObjectId")u=n6(t,p,d,u);else if(d._bsontype==="Decimal128")u=o6(t,p,d,u);else if(d._bsontype==="Long"||d._bsontype==="Timestamp")u=a6(t,p,d,u);else if(d._bsontype==="Double")u=c6(t,p,d,u);else if(d._bsontype==="Code")u=p6(t,p,d,u,r,s,i,o,a);else if(d._bsontype==="Binary")u=d6(t,p,d,u);else if(d._bsontype==="BSONSymbol")u=h6(t,p,d,u);else if(d._bsontype==="DBRef")u=f6(t,p,d,u,s,i,a);else if(d._bsontype==="BSONRegExp")u=t6(t,p,d,u);else if(d._bsontype==="Int32")u=u6(t,p,d,u);else if(d._bsontype==="MinKey"||d._bsontype==="MaxKey")u=r6(t,p,d,u);else if(typeof d._bsontype<"u")throw new k(`Unrecognized or invalid _bsontype: ${String(d._bsontype)}`)}else h==="function"&&i&&(u=l6(t,p,d,u))}else if(e instanceof Map||_6(e)){let l=e.entries(),p=!1;for(;!p;){let d=l.next();if(p=!!d.done,p)continue;let h=d.value?d.value[0]:void 0,f=d.value?d.value[1]:void 0;typeof f?.toBSON=="function"&&(f=f.toBSON());let y=typeof f;if(typeof h=="string"&&!_k.has(h)){if(h.match(J0)!=null)throw new k("key "+h+" must not contain null bytes");if(r){if(h[0]==="$")throw new k("key "+h+" must not start with '$'");if(h.includes("."))throw new k("key "+h+" must not contain '.'")}}if(f===void 0)o===!1&&(u=Il(t,h,f,u));else if(f===null)u=Il(t,h,f,u);else if(y==="string")u=JA(t,h,f,u);else if(y==="number")u=YA(t,h,f,u);else if(y==="bigint")u=QA(t,h,f,u);else if(y==="boolean")u=XA(t,h,f,u);else if(y==="object"&&f._bsontype==null)f instanceof Date||kl(f)?u=ZA(t,h,f,u):f instanceof Uint8Array||ba(f)?u=s6(t,h,f,u):f instanceof RegExp||Nl(f)?u=e6(t,h,f,u):u=i6(t,h,f,u,r,s,i,o,a);else if(y==="object"){if(f[$l]!==Mu)throw new yo;if(f._bsontype==="ObjectId")u=n6(t,h,f,u);else if(f._bsontype==="Decimal128")u=o6(t,h,f,u);else if(f._bsontype==="Long"||f._bsontype==="Timestamp")u=a6(t,h,f,u);else if(f._bsontype==="Double")u=c6(t,h,f,u);else if(f._bsontype==="Code")u=p6(t,h,f,u,r,s,i,o,a);else if(f._bsontype==="Binary")u=d6(t,h,f,u);else if(f._bsontype==="BSONSymbol")u=h6(t,h,f,u);else if(f._bsontype==="DBRef")u=f6(t,h,f,u,s,i,a);else if(f._bsontype==="BSONRegExp")u=t6(t,h,f,u);else if(f._bsontype==="Int32")u=u6(t,h,f,u);else if(f._bsontype==="MinKey"||f._bsontype==="MaxKey")u=r6(t,h,f,u);else if(typeof f._bsontype<"u")throw new k(`Unrecognized or invalid _bsontype: ${String(f._bsontype)}`)}else y==="function"&&i&&(u=l6(t,h,f,u))}}else{if(typeof e?.toBSON=="function"&&(e=e.toBSON(),e!=null&&typeof e!="object"))throw new k("toBSON function did not return an object");for(let l of Object.keys(e)){let p=e[l];typeof p?.toBSON=="function"&&(p=p.toBSON());let d=typeof p;if(typeof l=="string"&&!_k.has(l)){if(l.match(J0)!=null)throw new k("key "+l+" must not contain null bytes");if(r){if(l[0]==="$")throw new k("key "+l+" must not start with '$'");if(l.includes("."))throw new k("key "+l+" must not contain '.'")}}if(p===void 0)o===!1&&(u=Il(t,l,p,u));else if(p===null)u=Il(t,l,p,u);else if(d==="string")u=JA(t,l,p,u);else if(d==="number")u=YA(t,l,p,u);else if(d==="bigint")u=QA(t,l,p,u);else if(d==="boolean")u=XA(t,l,p,u);else if(d==="object"&&p._bsontype==null)p instanceof Date||kl(p)?u=ZA(t,l,p,u):p instanceof Uint8Array||ba(p)?u=s6(t,l,p,u):p instanceof RegExp||Nl(p)?u=e6(t,l,p,u):u=i6(t,l,p,u,r,s,i,o,a);else if(d==="object"){if(p[$l]!==Mu)throw new yo;if(p._bsontype==="ObjectId")u=n6(t,l,p,u);else if(p._bsontype==="Decimal128")u=o6(t,l,p,u);else if(p._bsontype==="Long"||p._bsontype==="Timestamp")u=a6(t,l,p,u);else if(p._bsontype==="Double")u=c6(t,l,p,u);else if(p._bsontype==="Code")u=p6(t,l,p,u,r,s,i,o,a);else if(p._bsontype==="Binary")u=d6(t,l,p,u);else if(p._bsontype==="BSONSymbol")u=h6(t,l,p,u);else if(p._bsontype==="DBRef")u=f6(t,l,p,u,s,i,a);else if(p._bsontype==="BSONRegExp")u=t6(t,l,p,u);else if(p._bsontype==="Int32")u=u6(t,l,p,u);else if(p._bsontype==="MinKey"||p._bsontype==="MaxKey")u=r6(t,l,p,u);else if(typeof p._bsontype<"u")throw new k(`Unrecognized or invalid _bsontype: ${String(p._bsontype)}`)}else d==="function"&&i&&(u=l6(t,l,p,u))}}a.delete(e),t[u++]=0;let c=u-n;return n+=ie.setInt32LE(t,n,c),u}function Ode(t){return t!=null&&typeof t=="object"&&"_bsontype"in t&&typeof t._bsontype=="string"}var Cde={$oid:Ca,$binary:Pt,$uuid:Pt,$symbol:Nu,$numberInt:Oa,$numberDecimal:Pu,$numberDouble:Aa,$numberLong:Z,$minKey:Iu,$maxKey:Bu,$regex:_o,$regularExpression:_o,$timestamp:ku};function Uk(t,e={}){if(typeof t=="number"){let n=t<=md&&t>=yd,s=t<=bk&&t>=wk;if(e.relaxed||e.legacy)return t;if(Number.isInteger(t)&&!Object.is(t,-0)){if(n)return new Oa(t);if(s)return e.useBigInt64?BigInt(t):Z.fromNumber(t)}return new Aa(t)}if(t==null||typeof t!="object")return t;if(t.$undefined)return null;let r=Object.keys(t).filter(n=>n.startsWith("$")&&t[n]!=null);for(let n=0;n<r.length;n++){let s=Cde[r[n]];if(s)return s.fromExtendedJSON(t,e)}if(t.$date!=null){let n=t.$date,s=new Date;if(e.legacy)if(typeof n=="number")s.setTime(n);else if(typeof n=="string")s.setTime(Date.parse(n));else if(typeof n=="bigint")s.setTime(Number(n));else throw new ql(`Unrecognized type for EJSON date: ${typeof n}`);else if(typeof n=="string")s.setTime(Date.parse(n));else if(Z.isLong(n))s.setTime(n.toNumber());else if(typeof n=="number"&&e.relaxed)s.setTime(n);else if(typeof n=="bigint")s.setTime(Number(n));else throw new ql(`Unrecognized type for EJSON date: ${typeof n}`);return s}if(t.$code!=null){let n=Object.assign({},t);return t.$scope&&(n.$scope=Uk(t.$scope)),go.fromExtendedJSON(t)}if($k(t)||t.$dbPointer){let n=t.$ref?t:t.$dbPointer;if(n instanceof qi)return n;let s=Object.keys(n).filter(o=>o.startsWith("$")),i=!0;if(s.forEach(o=>{["$ref","$id","$db"].indexOf(o)===-1&&(i=!1)}),i)return qi.fromExtendedJSON(n)}return t}function vde(t,e){return t.map((r,n)=>{e.seenObjects.push({propertyName:`index ${n}`,obj:null});try{return mo(r,e)}finally{e.seenObjects.pop()}})}function Ek(t){let e=t.toISOString();return t.getUTCMilliseconds()!==0?e:e.slice(0,-5)+"Z"}function mo(t,e){if(t instanceof Map||_6(t)){let r=Object.create(null);for(let[n,s]of t){if(typeof n!="string")throw new k("Can only serialize maps with string keys");r[n]=s}return mo(r,e)}if((typeof t=="object"||typeof t=="function")&&t!==null){let r=e.seenObjects.findIndex(n=>n.obj===t);if(r!==-1){let n=e.seenObjects.map(l=>l.propertyName),s=n.slice(0,r).map(l=>`${l} -> `).join(""),i=n[r],o=" -> "+n.slice(r+1,n.length-1).map(l=>`${l} -> `).join(""),a=n[n.length-1],u=" ".repeat(s.length+i.length/2),c="-".repeat(o.length+(i.length+a.length)/2-1);throw new k(`Converting circular structure to EJSON:
    ${s}${i}${o}${a}
    ${u}\\${c}/`)}e.seenObjects[e.seenObjects.length-1].obj=t}if(Array.isArray(t))return vde(t,e);if(t===void 0)return null;if(t instanceof Date||kl(t)){let r=t.getTime(),n=r>-1&&r<2534023188e5;return e.legacy?e.relaxed&&n?{$date:t.getTime()}:{$date:Ek(t)}:e.relaxed&&n?{$date:Ek(t)}:{$date:{$numberLong:t.getTime().toString()}}}if(typeof t=="number"&&(!e.relaxed||!isFinite(t))){if(Number.isInteger(t)&&!Object.is(t,-0)){if(t>=yd&&t<=md)return{$numberInt:t.toString()};if(t>=wk&&t<=bk)return{$numberLong:t.toString()}}return{$numberDouble:Object.is(t,-0)?"-0.0":t.toString()}}if(typeof t=="bigint")return e.relaxed?Number(BigInt.asIntN(64,t)):{$numberLong:BigInt.asIntN(64,t).toString()};if(t instanceof RegExp||Nl(t)){let r=t.flags;if(r===void 0){let s=t.toString().match(/[gimuy]*$/);s&&(r=s[0])}return new _o(t.source,r).toExtendedJSON(e)}return t!=null&&typeof t=="object"?Tde(t,e):t}var xde={Binary:t=>new Pt(t.value(),t.sub_type),Code:t=>new go(t.code,t.scope),DBRef:t=>new qi(t.collection||t.namespace,t.oid,t.db,t.fields),Decimal128:t=>new Pu(t.bytes),Double:t=>new Aa(t.value),Int32:t=>new Oa(t.value),Long:t=>Z.fromBits(t.low!=null?t.low:t.low_,t.low!=null?t.high:t.high_,t.low!=null?t.unsigned:t.unsigned_),MaxKey:()=>new Bu,MinKey:()=>new Iu,ObjectId:t=>new Ca(t),BSONRegExp:t=>new _o(t.pattern,t.options),BSONSymbol:t=>new Nu(t.value),Timestamp:t=>ku.fromBits(t.low,t.high)};function Tde(t,e){if(t==null||typeof t!="object")throw new k("not an object instance");let r=t._bsontype;if(typeof r>"u"){let n={};for(let s of Object.keys(t)){e.seenObjects.push({propertyName:s,obj:null});try{let i=mo(t[s],e);s==="__proto__"?Object.defineProperty(n,s,{value:i,writable:!0,enumerable:!0,configurable:!0}):n[s]=i}finally{e.seenObjects.pop()}}return n}else{if(t!=null&&typeof t=="object"&&typeof t._bsontype=="string"&&t[$l]!==Mu)throw new yo;if(Ode(t)){let n=t;if(typeof n.toExtendedJSON!="function"){let s=xde[t._bsontype];if(!s)throw new k("Unrecognized or invalid _bsontype: "+t._bsontype);n=s(n)}return r==="Code"&&n.scope?n=new go(n.code,mo(n.scope,e)):r==="DBRef"&&n.oid&&(n=new qi(mo(n.collection,e),mo(n.oid,e),mo(n.db,e),mo(n.fields,e))),n.toExtendedJSON(e)}else throw new k("_bsontype must be a string, but was: "+typeof r)}}function Vk(t,e){let r={useBigInt64:e?.useBigInt64??!1,relaxed:e?.relaxed??!0,legacy:e?.legacy??!1};return JSON.parse(t,(n,s)=>{if(n.indexOf("\0")!==-1)throw new k(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify(n)}`);return Uk(s,r)})}function Wk(t,e,r,n){r!=null&&typeof r=="object"&&(n=r,r=0),e!=null&&typeof e=="object"&&!Array.isArray(e)&&(n=e,e=void 0,r=0);let s=Object.assign({relaxed:!0,legacy:!1},n,{seenObjects:[{propertyName:"(root)",obj:null}]}),i=mo(t,s);return JSON.stringify(i,e,r)}function Dde(t,e){return e=e||{},JSON.parse(Wk(t,e))}function Mde(t,e){return e=e||{},Vk(JSON.stringify(t),e)}var Ru=Object.create(null);Ru.parse=Vk;Ru.stringify=Wk;Ru.serialize=Dde;Ru.deserialize=Mde;Object.freeze(Ru);var St={double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:255,maxKey:127};function m6(t,e){try{return ie.getNonnegativeInt32LE(t,e)}catch(r){throw new Ts("BSON size cannot be negative",e,{cause:r})}}function y6(t,e){let r=e;for(;t[r]!==0;r++);if(r===t.length-1)throw new Ts("Null terminator not found",e);return r}function Pde(t,e=0){if(e??=0,t.length<5)throw new Ts(`Input must be at least 5 bytes, got ${t.length} bytes`,e);let r=m6(t,e);if(r>t.length-e)throw new Ts(`Parsed documentSize (${r} bytes) does not match input length (${t.length} bytes)`,e);if(t[e+r-1]!==0)throw new Ts("BSON documents must end in 0x00",e+r);let n=[],s=e+4;for(;s<=r+e;){let i=t[s];if(s+=1,i===0){if(s-e!==r)throw new Ts("Invalid 0x00 type byte",s);break}let o=s,a=y6(t,s)-o;s+=a+1;let u;if(i===St.double||i===St.long||i===St.date||i===St.timestamp)u=8;else if(i===St.int)u=4;else if(i===St.objectId)u=12;else if(i===St.decimal)u=16;else if(i===St.bool)u=1;else if(i===St.null||i===St.undefined||i===St.maxKey||i===St.minKey)u=0;else if(i===St.regex)u=y6(t,y6(t,s)+1)+1-s;else if(i===St.object||i===St.array||i===St.javascriptWithScope)u=m6(t,s);else if(i===St.string||i===St.binData||i===St.dbPointer||i===St.javascript||i===St.symbol)u=m6(t,s)+4,i===St.binData&&(u+=1),i===St.dbPointer&&(u+=12);else throw new Ts(`Invalid 0x${i.toString(16).padStart(2,"0")} type byte`,s);if(u>r)throw new Ts("value reports length larger than document",s);n.push([i,o,a,s,u]),s+=u}return n}var jl=Object.create(null);jl.parseToElements=Pde;jl.ByteUtils=B;jl.NumberUtils=ie;Object.freeze(jl);var zk=1024*1024*17,wa=B.allocate(zk);function Kk(t){wa.length<t&&(wa=B.allocate(t))}function Hk(t,e={}){let r=typeof e.checkKeys=="boolean"?e.checkKeys:!1,n=typeof e.serializeFunctions=="boolean"?e.serializeFunctions:!1,s=typeof e.ignoreUndefined=="boolean"?e.ignoreUndefined:!0,i=typeof e.minInternalBufferSize=="number"?e.minInternalBufferSize:zk;wa.length<i&&(wa=B.allocate(i));let o=gd(wa,t,r,0,0,n,s,null),a=B.allocateUnsafe(o);return a.set(wa.subarray(0,o),0),a}function Gk(t,e,r={}){let n=typeof r.checkKeys=="boolean"?r.checkKeys:!1,s=typeof r.serializeFunctions=="boolean"?r.serializeFunctions:!1,i=typeof r.ignoreUndefined=="boolean"?r.ignoreUndefined:!0,o=typeof r.index=="number"?r.index:0,a=gd(wa,t,n,0,0,s,i,null);return e.set(wa.subarray(0,a),o),o+a-1}function Jk(t,e={}){return Lk(B.toLocalBufferType(t),e)}function Yk(t,e={}){e=e||{};let r=typeof e.serializeFunctions=="boolean"?e.serializeFunctions:!1,n=typeof e.ignoreUndefined=="boolean"?e.ignoreUndefined:!0;return K0(t,r,n)}function Qk(t,e,r,n,s,i){let o=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},i),a=B.toLocalBufferType(t),u=e;for(let c=0;c<r;c++){let l=ie.getInt32LE(a,u);o.index=u,n[s+c]=Lk(a,o),u=u+l}return u}var Bde=Object.freeze({__proto__:null,BSONError:k,BSONOffsetError:Ts,BSONRegExp:_o,BSONRuntimeError:ql,BSONSymbol:Nu,BSONType:kk,BSONValue:Jr,BSONVersionError:yo,Binary:Pt,ByteUtils:B,Code:go,DBRef:qi,Decimal128:Pu,Double:Aa,EJSON:Ru,Int32:Oa,Long:Z,MaxKey:Bu,MinKey:Iu,NumberUtils:ie,ObjectId:Ca,Timestamp:ku,UUID:Sa,bsonType:Y0,calculateObjectSize:Yk,deserialize:Jk,deserializeStream:Qk,onDemand:jl,serialize:Hk,serializeWithBufferAndIndex:Gk,setInternalBufferSize:Kk});Le.BSON=Bde;Le.BSONError=k;Le.BSONOffsetError=Ts;Le.BSONRegExp=_o;Le.BSONRuntimeError=ql;Le.BSONSymbol=Nu;Le.BSONType=kk;Le.BSONValue=Jr;Le.BSONVersionError=yo;Le.Binary=Pt;Le.ByteUtils=B;Le.Code=go;Le.DBRef=qi;Le.Decimal128=Pu;Le.Double=Aa;Le.EJSON=Ru;Le.Int32=Oa;Le.Long=Z;Le.MaxKey=Bu;Le.MinKey=Iu;Le.NumberUtils=ie;Le.ObjectId=Ca;Le.Timestamp=ku;Le.UUID=Sa;Le.bsonType=Y0;Le.calculateObjectSize=Yk;Le.deserialize=Jk;Le.deserializeStream=Qk;Le.onDemand=jl;Le.serialize=Hk;Le.serializeWithBufferAndIndex=Gk;Le.setInternalBufferSize=Kk});var pe=m(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.toUTF8=ne.getBigInt64LE=ne.getFloat64LE=ne.getInt32LE=ne.UUID=ne.Timestamp=ne.serialize=ne.ObjectId=ne.MinKey=ne.MaxKey=ne.Long=ne.Int32=ne.EJSON=ne.Double=ne.deserialize=ne.Decimal128=ne.DBRef=ne.Code=ne.calculateObjectSize=ne.BSONType=ne.BSONSymbol=ne.BSONRegExp=ne.BSONError=ne.BSON=ne.Binary=void 0;ne.parseToElementsToArray=Ide;ne.pluckBSONSerializeOptions=Nde;ne.resolveBSONOptions=kde;ne.parseUtf8ValidationOption=Rde;var _d=v6(),jt=v6();Object.defineProperty(ne,"Binary",{enumerable:!0,get:function(){return jt.Binary}});Object.defineProperty(ne,"BSON",{enumerable:!0,get:function(){return jt.BSON}});Object.defineProperty(ne,"BSONError",{enumerable:!0,get:function(){return jt.BSONError}});Object.defineProperty(ne,"BSONRegExp",{enumerable:!0,get:function(){return jt.BSONRegExp}});Object.defineProperty(ne,"BSONSymbol",{enumerable:!0,get:function(){return jt.BSONSymbol}});Object.defineProperty(ne,"BSONType",{enumerable:!0,get:function(){return jt.BSONType}});Object.defineProperty(ne,"calculateObjectSize",{enumerable:!0,get:function(){return jt.calculateObjectSize}});Object.defineProperty(ne,"Code",{enumerable:!0,get:function(){return jt.Code}});Object.defineProperty(ne,"DBRef",{enumerable:!0,get:function(){return jt.DBRef}});Object.defineProperty(ne,"Decimal128",{enumerable:!0,get:function(){return jt.Decimal128}});Object.defineProperty(ne,"deserialize",{enumerable:!0,get:function(){return jt.deserialize}});Object.defineProperty(ne,"Double",{enumerable:!0,get:function(){return jt.Double}});Object.defineProperty(ne,"EJSON",{enumerable:!0,get:function(){return jt.EJSON}});Object.defineProperty(ne,"Int32",{enumerable:!0,get:function(){return jt.Int32}});Object.defineProperty(ne,"Long",{enumerable:!0,get:function(){return jt.Long}});Object.defineProperty(ne,"MaxKey",{enumerable:!0,get:function(){return jt.MaxKey}});Object.defineProperty(ne,"MinKey",{enumerable:!0,get:function(){return jt.MinKey}});Object.defineProperty(ne,"ObjectId",{enumerable:!0,get:function(){return jt.ObjectId}});Object.defineProperty(ne,"serialize",{enumerable:!0,get:function(){return jt.serialize}});Object.defineProperty(ne,"Timestamp",{enumerable:!0,get:function(){return jt.Timestamp}});Object.defineProperty(ne,"UUID",{enumerable:!0,get:function(){return jt.UUID}});function Ide(t,e){let r=_d.BSON.onDemand.parseToElements(t,e);return Array.isArray(r)?r:[...r]}ne.getInt32LE=_d.BSON.onDemand.NumberUtils.getInt32LE;ne.getFloat64LE=_d.BSON.onDemand.NumberUtils.getFloat64LE;ne.getBigInt64LE=_d.BSON.onDemand.NumberUtils.getBigInt64LE;ne.toUTF8=_d.BSON.onDemand.ByteUtils.toUTF8;function Nde(t){let{fieldsAsRaw:e,useBigInt64:r,promoteValues:n,promoteBuffers:s,promoteLongs:i,serializeFunctions:o,ignoreUndefined:a,bsonRegExp:u,raw:c,enableUtf8Validation:l}=t;return{fieldsAsRaw:e,useBigInt64:r,promoteValues:n,promoteBuffers:s,promoteLongs:i,serializeFunctions:o,ignoreUndefined:a,bsonRegExp:u,raw:c,enableUtf8Validation:l}}function kde(t,e){let r=e?.bsonOptions;return{raw:t?.raw??r?.raw??!1,useBigInt64:t?.useBigInt64??r?.useBigInt64??!1,promoteLongs:t?.promoteLongs??r?.promoteLongs??!0,promoteValues:t?.promoteValues??r?.promoteValues??!0,promoteBuffers:t?.promoteBuffers??r?.promoteBuffers??!1,ignoreUndefined:t?.ignoreUndefined??r?.ignoreUndefined??!1,bsonRegExp:t?.bsonRegExp??r?.bsonRegExp??!1,serializeFunctions:t?.serializeFunctions??r?.serializeFunctions??!1,fieldsAsRaw:t?.fieldsAsRaw??r?.fieldsAsRaw??{},enableUtf8Validation:t?.enableUtf8Validation??r?.enableUtf8Validation??!0}}function Rde(t){return t?.enableUtf8Validation===!1?{utf8:!1}:{utf8:{writeErrors:!1}}}});var z=m(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.MongoWriteConcernError=P.MongoServerSelectionError=P.MongoSystemError=P.MongoMissingDependencyError=P.MongoMissingCredentialsError=P.MongoCompatibilityError=P.MongoInvalidArgumentError=P.MongoParseError=P.MongoNetworkTimeoutError=P.MongoNetworkError=P.MongoClientClosedError=P.MongoTopologyClosedError=P.MongoCursorExhaustedError=P.MongoServerClosedError=P.MongoCursorInUseError=P.MongoOperationTimeoutError=P.MongoUnexpectedServerResponseError=P.MongoGridFSChunkError=P.MongoGridFSStreamError=P.MongoTailableCursorError=P.MongoChangeStreamError=P.MongoClientBulkWriteExecutionError=P.MongoClientBulkWriteCursorError=P.MongoClientBulkWriteError=P.MongoGCPError=P.MongoAzureError=P.MongoOIDCError=P.MongoAWSError=P.MongoKerberosError=P.MongoExpiredSessionError=P.MongoTransactionError=P.MongoNotConnectedError=P.MongoDecompressionError=P.MongoBatchReExecutionError=P.MongoStalePrimaryError=P.MongoRuntimeError=P.MongoAPIError=P.MongoDriverError=P.MongoServerError=P.MongoError=P.MongoErrorLabel=P.GET_MORE_RESUMABLE_CODES=P.MONGODB_ERROR_CODES=P.NODE_IS_RECOVERING_ERROR_MESSAGE=P.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=P.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=void 0;P.needsRetryableWriteLabel=$de;P.isRetryableWriteError=Zk;P.isRetryableReadError=qde;P.isNodeShuttingDownError=Wde;P.isSDAMUnrecoverableError=zde;P.isNetworkTimeoutError=Kde;P.isResumableError=Hde;P.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=new RegExp("not master","i");P.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=new RegExp("not master or secondary","i");P.NODE_IS_RECOVERING_ERROR_MESSAGE=new RegExp("node is recovering","i");P.MONGODB_ERROR_CODES=Object.freeze({HostUnreachable:6,HostNotFound:7,AuthenticationFailed:18,NetworkTimeout:89,ShutdownInProgress:91,PrimarySteppedDown:189,ExceededTimeLimit:262,SocketException:9001,NotWritablePrimary:10107,InterruptedAtShutdown:11600,InterruptedDueToReplStateChange:11602,NotPrimaryNoSecondaryOk:13435,NotPrimaryOrSecondary:13436,StaleShardVersion:63,StaleEpoch:150,StaleConfig:13388,RetryChangeStream:234,FailedToSatisfyReadPreference:133,CursorNotFound:43,LegacyNotPrimary:10058,WriteConcernTimeout:64,NamespaceNotFound:26,IllegalOperation:20,MaxTimeMSExpired:50,UnknownReplWriteConcern:79,UnsatisfiableWriteConcern:100,Reauthenticate:391,ReadConcernMajorityNotAvailableYet:134});P.GET_MORE_RESUMABLE_CODES=new Set([P.MONGODB_ERROR_CODES.HostUnreachable,P.MONGODB_ERROR_CODES.HostNotFound,P.MONGODB_ERROR_CODES.NetworkTimeout,P.MONGODB_ERROR_CODES.ShutdownInProgress,P.MONGODB_ERROR_CODES.PrimarySteppedDown,P.MONGODB_ERROR_CODES.ExceededTimeLimit,P.MONGODB_ERROR_CODES.SocketException,P.MONGODB_ERROR_CODES.NotWritablePrimary,P.MONGODB_ERROR_CODES.InterruptedAtShutdown,P.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,P.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,P.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,P.MONGODB_ERROR_CODES.StaleShardVersion,P.MONGODB_ERROR_CODES.StaleEpoch,P.MONGODB_ERROR_CODES.StaleConfig,P.MONGODB_ERROR_CODES.RetryChangeStream,P.MONGODB_ERROR_CODES.FailedToSatisfyReadPreference,P.MONGODB_ERROR_CODES.CursorNotFound]);P.MongoErrorLabel=Object.freeze({RetryableWriteError:"RetryableWriteError",TransientTransactionError:"TransientTransactionError",UnknownTransactionCommitResult:"UnknownTransactionCommitResult",ResumableChangeStreamError:"ResumableChangeStreamError",HandshakeError:"HandshakeError",ResetPool:"ResetPool",PoolRequestedRetry:"PoolRequestedRetry",InterruptInUseConnections:"InterruptInUseConnections",NoWritesPerformed:"NoWritesPerformed"});function Fde(t){return t!=null&&typeof t=="object"&&"errors"in t&&Array.isArray(t.errors)}var ri=class extends Error{get errorLabels(){return Array.from(this.errorLabelSet)}constructor(e,r){super(e,r),this.errorLabelSet=new Set}static buildErrorMessage(e){return typeof e=="string"?e:Fde(e)&&e.message.length===0?e.errors.length===0?"AggregateError has an empty errors array. Please check the `cause` property for more information.":e.errors.map(({message:r})=>r).join(", "):e!=null&&typeof e=="object"&&"message"in e&&typeof e.message=="string"?e.message:"empty error message"}get name(){return"MongoError"}get errmsg(){return this.message}hasErrorLabel(e){return this.errorLabelSet.has(e)}addErrorLabel(e){this.errorLabelSet.add(e)}};P.MongoError=ri;var Ed=class extends ri{constructor(e){if(super(e.message||e.errmsg||e.$err||"n/a"),e.errorLabels)for(let r of e.errorLabels)this.addErrorLabel(r);this.errorResponse=e;for(let r in e)r!=="errorLabels"&&r!=="errmsg"&&r!=="message"&&r!=="errorResponse"&&(this[r]=e[r])}get name(){return"MongoServerError"}};P.MongoServerError=Ed;var Fu=class extends ri{constructor(e,r){super(e,r)}get name(){return"MongoDriverError"}};P.MongoDriverError=Fu;var Dr=class extends Fu{constructor(e,r){super(e,r)}get name(){return"MongoAPIError"}};P.MongoAPIError=Dr;var Tn=class extends Fu{constructor(e,r){super(e,r)}get name(){return"MongoRuntimeError"}};P.MongoRuntimeError=Tn;var T6=class extends Tn{constructor(e,r){super(e,r)}get name(){return"MongoStalePrimaryError"}};P.MongoStalePrimaryError=T6;var D6=class extends Dr{constructor(e="This batch has already been executed, create new batch to execute"){super(e)}get name(){return"MongoBatchReExecutionError"}};P.MongoBatchReExecutionError=D6;var M6=class extends Tn{constructor(e){super(e)}get name(){return"MongoDecompressionError"}};P.MongoDecompressionError=M6;var P6=class extends Dr{constructor(e){super(e)}get name(){return"MongoNotConnectedError"}};P.MongoNotConnectedError=P6;var B6=class extends Dr{constructor(e){super(e)}get name(){return"MongoTransactionError"}};P.MongoTransactionError=B6;var I6=class extends Dr{constructor(e="Cannot use a session that has ended"){super(e)}get name(){return"MongoExpiredSessionError"}};P.MongoExpiredSessionError=I6;var N6=class extends Tn{constructor(e){super(e)}get name(){return"MongoKerberosError"}};P.MongoKerberosError=N6;var k6=class extends Tn{constructor(e,r){super(e,r)}get name(){return"MongoAWSError"}};P.MongoAWSError=k6;var bd=class extends Tn{constructor(e){super(e)}get name(){return"MongoOIDCError"}};P.MongoOIDCError=bd;var R6=class extends bd{constructor(e){super(e)}get name(){return"MongoAzureError"}};P.MongoAzureError=R6;var F6=class extends bd{constructor(e){super(e)}get name(){return"MongoGCPError"}};P.MongoGCPError=F6;var $6=class extends Ed{constructor(e){super(e),this.writeConcernErrors=[],this.writeErrors=new Map}get name(){return"MongoClientBulkWriteError"}};P.MongoClientBulkWriteError=$6;var q6=class extends Tn{constructor(e){super(e)}get name(){return"MongoClientBulkWriteCursorError"}};P.MongoClientBulkWriteCursorError=q6;var j6=class extends Tn{constructor(e){super(e)}get name(){return"MongoClientBulkWriteExecutionError"}};P.MongoClientBulkWriteExecutionError=j6;var L6=class extends Tn{constructor(e){super(e)}get name(){return"MongoChangeStreamError"}};P.MongoChangeStreamError=L6;var U6=class extends Dr{constructor(e="Tailable cursor does not support this operation"){super(e)}get name(){return"MongoTailableCursorError"}};P.MongoTailableCursorError=U6;var V6=class extends Tn{constructor(e){super(e)}get name(){return"MongoGridFSStreamError"}};P.MongoGridFSStreamError=V6;var W6=class extends Tn{constructor(e){super(e)}get name(){return"MongoGridFSChunkError"}};P.MongoGridFSChunkError=W6;var z6=class extends Tn{constructor(e,r){super(e,r)}get name(){return"MongoUnexpectedServerResponseError"}};P.MongoUnexpectedServerResponseError=z6;var K6=class extends Fu{get name(){return"MongoOperationTimeoutError"}};P.MongoOperationTimeoutError=K6;var H6=class extends Dr{constructor(e="Cursor is already initialized"){super(e)}get name(){return"MongoCursorInUseError"}};P.MongoCursorInUseError=H6;var G6=class extends Dr{constructor(e="Server is closed"){super(e)}get name(){return"MongoServerClosedError"}};P.MongoServerClosedError=G6;var J6=class extends Dr{constructor(e){super(e||"Cursor is exhausted")}get name(){return"MongoCursorExhaustedError"}};P.MongoCursorExhaustedError=J6;var Y6=class extends Dr{constructor(e="Topology is closed"){super(e)}get name(){return"MongoTopologyClosedError"}};P.MongoTopologyClosedError=Y6;var Q6=class extends Dr{constructor(){super("Operation interrupted because client was closed")}get name(){return"MongoClientClosedError"}};P.MongoClientClosedError=Q6;var va=class extends ri{constructor(e,r){super(e,{cause:r?.cause}),this.beforeHandshake=!!r?.beforeHandshake}get name(){return"MongoNetworkError"}};P.MongoNetworkError=va;var X6=class extends va{constructor(e,r){super(e,r)}get name(){return"MongoNetworkTimeoutError"}};P.MongoNetworkTimeoutError=X6;var Q0=class extends Fu{constructor(e){super(e)}get name(){return"MongoParseError"}};P.MongoParseError=Q0;var Z6=class extends Dr{constructor(e,r){super(e,r)}get name(){return"MongoInvalidArgumentError"}};P.MongoInvalidArgumentError=Z6;var eO=class extends Dr{constructor(e){super(e)}get name(){return"MongoCompatibilityError"}};P.MongoCompatibilityError=eO;var tO=class extends Dr{constructor(e){super(e)}get name(){return"MongoMissingCredentialsError"}};P.MongoMissingCredentialsError=tO;var rO=class extends Dr{constructor(e,r){super(e,r),this.dependencyName=r.dependencyName}get name(){return"MongoMissingDependencyError"}};P.MongoMissingDependencyError=rO;var X0=class extends ri{constructor(e,r){r&&r.error?super(ri.buildErrorMessage(r.error.message||r.error),{cause:r.error}):super(e),r&&(this.reason=r),this.code=r.error?.code}get name(){return"MongoSystemError"}};P.MongoSystemError=X0;var Z0=class extends X0{constructor(e,r){super(e,r)}get name(){return"MongoServerSelectionError"}};P.MongoServerSelectionError=Z0;var ey=class extends Ed{constructor(e){super({...e.writeConcernError,...e}),this.errInfo=e.writeConcernError.errInfo,this.result=e}get name(){return"MongoWriteConcernError"}};P.MongoWriteConcernError=ey;var Xk=new Set([P.MONGODB_ERROR_CODES.HostUnreachable,P.MONGODB_ERROR_CODES.HostNotFound,P.MONGODB_ERROR_CODES.NetworkTimeout,P.MONGODB_ERROR_CODES.ShutdownInProgress,P.MONGODB_ERROR_CODES.PrimarySteppedDown,P.MONGODB_ERROR_CODES.SocketException,P.MONGODB_ERROR_CODES.NotWritablePrimary,P.MONGODB_ERROR_CODES.InterruptedAtShutdown,P.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,P.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,P.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,P.MONGODB_ERROR_CODES.ExceededTimeLimit,P.MONGODB_ERROR_CODES.ReadConcernMajorityNotAvailableYet]),x6=Xk;function $de(t,e,r){if(t instanceof va)return!0;if(t instanceof ri&&(e>=9||Zk(t))&&!t.hasErrorLabel(P.MongoErrorLabel.HandshakeError))return!1;if(t instanceof ey){if(r==="Mongos"&&e<9)return x6.has(t.result.code??0);let i=t.result.writeConcernError.code??Number(t.code);return x6.has(Number.isNaN(i)?0:i)}return t instanceof ri?x6.has(Number(t.code)):!!(P.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)||P.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message))}function Zk(t){return t.hasErrorLabel(P.MongoErrorLabel.RetryableWriteError)||t.hasErrorLabel(P.MongoErrorLabel.PoolRequestedRetry)}function qde(t){return!!((typeof t.code=="number"?Xk.has(t.code):!1)||t instanceof va||P.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)||P.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message))}var jde=new Set([P.MONGODB_ERROR_CODES.ShutdownInProgress,P.MONGODB_ERROR_CODES.PrimarySteppedDown,P.MONGODB_ERROR_CODES.InterruptedAtShutdown,P.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,P.MONGODB_ERROR_CODES.NotPrimaryOrSecondary]),Lde=new Set([P.MONGODB_ERROR_CODES.NotWritablePrimary,P.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,P.MONGODB_ERROR_CODES.LegacyNotPrimary]),Ude=new Set([P.MONGODB_ERROR_CODES.InterruptedAtShutdown,P.MONGODB_ERROR_CODES.ShutdownInProgress]);function eR(t){return typeof t.code=="number"?jde.has(t.code):P.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE.test(t.message)||P.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message)}function Vde(t){return typeof t.code=="number"?Lde.has(t.code):eR(t)?!1:P.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)}function Wde(t){return!!(typeof t.code=="number"&&Ude.has(t.code))}function zde(t){return t instanceof Q0||t==null?!0:eR(t)||Vde(t)}function Kde(t){return!!(t instanceof va&&t.message.match(/timed out/))}function Hde(t,e){return t==null||!(t instanceof ri)?!1:t instanceof va||t instanceof Z0?!0:e!=null&&e>=9?t.code===P.MONGODB_ERROR_CODES.CursorNotFound?!0:t.hasErrorLabel(P.MongoErrorLabel.ResumableChangeStreamError):typeof t.code=="number"?P.GET_MORE_RESUMABLE_CODES.has(t.code):!1}});var Eo=m(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.OP_MSG=Me.OP_COMPRESSED=Me.OP_DELETE=Me.OP_QUERY=Me.OP_INSERT=Me.OP_UPDATE=Me.OP_REPLY=Me.MIN_SUPPORTED_RAW_DATA_SERVER_VERSION=Me.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION=Me.MIN_SUPPORTED_QE_SERVER_VERSION=Me.MIN_SUPPORTED_QE_WIRE_VERSION=Me.MAX_SUPPORTED_WIRE_VERSION=Me.MIN_SUPPORTED_WIRE_VERSION=Me.MIN_SUPPORTED_SNAPSHOT_READS_SERVER_VERSION=Me.MIN_SUPPORTED_SNAPSHOT_READS_WIRE_VERSION=Me.MAX_SUPPORTED_SERVER_VERSION=Me.MIN_SUPPORTED_SERVER_VERSION=void 0;Me.MIN_SUPPORTED_SERVER_VERSION="4.2";Me.MAX_SUPPORTED_SERVER_VERSION="8.2";Me.MIN_SUPPORTED_SNAPSHOT_READS_WIRE_VERSION=13;Me.MIN_SUPPORTED_SNAPSHOT_READS_SERVER_VERSION="5.0";Me.MIN_SUPPORTED_WIRE_VERSION=8;Me.MAX_SUPPORTED_WIRE_VERSION=27;Me.MIN_SUPPORTED_QE_WIRE_VERSION=21;Me.MIN_SUPPORTED_QE_SERVER_VERSION="7.0";Me.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION=27;Me.MIN_SUPPORTED_RAW_DATA_SERVER_VERSION="8.2";Me.OP_REPLY=1;Me.OP_UPDATE=2001;Me.OP_INSERT=2002;Me.OP_QUERY=2004;Me.OP_DELETE=2006;Me.OP_COMPRESSED=2012;Me.OP_MSG=2013});var Lt=m(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.END=D.CHANGE=D.INIT=D.MORE=D.RESPONSE=D.SERVER_HEARTBEAT_FAILED=D.SERVER_HEARTBEAT_SUCCEEDED=D.SERVER_HEARTBEAT_STARTED=D.COMMAND_FAILED=D.COMMAND_SUCCEEDED=D.COMMAND_STARTED=D.CLUSTER_TIME_RECEIVED=D.CONNECTION_CHECKED_IN=D.CONNECTION_CHECKED_OUT=D.CONNECTION_CHECK_OUT_FAILED=D.CONNECTION_CHECK_OUT_STARTED=D.CONNECTION_CLOSED=D.CONNECTION_READY=D.CONNECTION_CREATED=D.CONNECTION_POOL_READY=D.CONNECTION_POOL_CLEARED=D.CONNECTION_POOL_CLOSED=D.CONNECTION_POOL_CREATED=D.WAITING_FOR_SUITABLE_SERVER=D.SERVER_SELECTION_SUCCEEDED=D.SERVER_SELECTION_FAILED=D.SERVER_SELECTION_STARTED=D.TOPOLOGY_DESCRIPTION_CHANGED=D.TOPOLOGY_CLOSED=D.TOPOLOGY_OPENING=D.SERVER_DESCRIPTION_CHANGED=D.SERVER_CLOSED=D.SERVER_OPENING=D.DESCRIPTION_RECEIVED=D.UNPINNED=D.PINNED=D.MESSAGE=D.ENDED=D.CLOSED=D.CONNECT=D.OPEN=D.CLOSE=D.TIMEOUT=D.ERROR=D.SYSTEM_JS_COLLECTION=D.SYSTEM_COMMAND_COLLECTION=D.SYSTEM_USER_COLLECTION=D.SYSTEM_PROFILE_COLLECTION=D.SYSTEM_INDEX_COLLECTION=D.SYSTEM_NAMESPACE_COLLECTION=void 0;D.kDecoratedKeys=D.kDecorateResult=D.LEGACY_HELLO_COMMAND_CAMEL_CASE=D.LEGACY_HELLO_COMMAND=D.MONGO_CLIENT_EVENTS=D.LOCAL_SERVER_EVENTS=D.SERVER_RELAY_EVENTS=D.APM_EVENTS=D.TOPOLOGY_EVENTS=D.CMAP_EVENTS=D.HEARTBEAT_EVENTS=D.RESUME_TOKEN_CHANGED=void 0;D.SYSTEM_NAMESPACE_COLLECTION="system.namespaces";D.SYSTEM_INDEX_COLLECTION="system.indexes";D.SYSTEM_PROFILE_COLLECTION="system.profile";D.SYSTEM_USER_COLLECTION="system.users";D.SYSTEM_COMMAND_COLLECTION="$cmd";D.SYSTEM_JS_COLLECTION="system.js";D.ERROR="error";D.TIMEOUT="timeout";D.CLOSE="close";D.OPEN="open";D.CONNECT="connect";D.CLOSED="closed";D.ENDED="ended";D.MESSAGE="message";D.PINNED="pinned";D.UNPINNED="unpinned";D.DESCRIPTION_RECEIVED="descriptionReceived";D.SERVER_OPENING="serverOpening";D.SERVER_CLOSED="serverClosed";D.SERVER_DESCRIPTION_CHANGED="serverDescriptionChanged";D.TOPOLOGY_OPENING="topologyOpening";D.TOPOLOGY_CLOSED="topologyClosed";D.TOPOLOGY_DESCRIPTION_CHANGED="topologyDescriptionChanged";D.SERVER_SELECTION_STARTED="serverSelectionStarted";D.SERVER_SELECTION_FAILED="serverSelectionFailed";D.SERVER_SELECTION_SUCCEEDED="serverSelectionSucceeded";D.WAITING_FOR_SUITABLE_SERVER="waitingForSuitableServer";D.CONNECTION_POOL_CREATED="connectionPoolCreated";D.CONNECTION_POOL_CLOSED="connectionPoolClosed";D.CONNECTION_POOL_CLEARED="connectionPoolCleared";D.CONNECTION_POOL_READY="connectionPoolReady";D.CONNECTION_CREATED="connectionCreated";D.CONNECTION_READY="connectionReady";D.CONNECTION_CLOSED="connectionClosed";D.CONNECTION_CHECK_OUT_STARTED="connectionCheckOutStarted";D.CONNECTION_CHECK_OUT_FAILED="connectionCheckOutFailed";D.CONNECTION_CHECKED_OUT="connectionCheckedOut";D.CONNECTION_CHECKED_IN="connectionCheckedIn";D.CLUSTER_TIME_RECEIVED="clusterTimeReceived";D.COMMAND_STARTED="commandStarted";D.COMMAND_SUCCEEDED="commandSucceeded";D.COMMAND_FAILED="commandFailed";D.SERVER_HEARTBEAT_STARTED="serverHeartbeatStarted";D.SERVER_HEARTBEAT_SUCCEEDED="serverHeartbeatSucceeded";D.SERVER_HEARTBEAT_FAILED="serverHeartbeatFailed";D.RESPONSE="response";D.MORE="more";D.INIT="init";D.CHANGE="change";D.END="end";D.RESUME_TOKEN_CHANGED="resumeTokenChanged";D.HEARTBEAT_EVENTS=Object.freeze([D.SERVER_HEARTBEAT_STARTED,D.SERVER_HEARTBEAT_SUCCEEDED,D.SERVER_HEARTBEAT_FAILED]);D.CMAP_EVENTS=Object.freeze([D.CONNECTION_POOL_CREATED,D.CONNECTION_POOL_READY,D.CONNECTION_POOL_CLEARED,D.CONNECTION_POOL_CLOSED,D.CONNECTION_CREATED,D.CONNECTION_READY,D.CONNECTION_CLOSED,D.CONNECTION_CHECK_OUT_STARTED,D.CONNECTION_CHECK_OUT_FAILED,D.CONNECTION_CHECKED_OUT,D.CONNECTION_CHECKED_IN]);D.TOPOLOGY_EVENTS=Object.freeze([D.SERVER_OPENING,D.SERVER_CLOSED,D.SERVER_DESCRIPTION_CHANGED,D.TOPOLOGY_OPENING,D.TOPOLOGY_CLOSED,D.TOPOLOGY_DESCRIPTION_CHANGED,D.ERROR,D.TIMEOUT,D.CLOSE]);D.APM_EVENTS=Object.freeze([D.COMMAND_STARTED,D.COMMAND_SUCCEEDED,D.COMMAND_FAILED]);D.SERVER_RELAY_EVENTS=Object.freeze([D.SERVER_HEARTBEAT_STARTED,D.SERVER_HEARTBEAT_SUCCEEDED,D.SERVER_HEARTBEAT_FAILED,D.COMMAND_STARTED,D.COMMAND_SUCCEEDED,D.COMMAND_FAILED,...D.CMAP_EVENTS]);D.LOCAL_SERVER_EVENTS=Object.freeze([D.CONNECT,D.DESCRIPTION_RECEIVED,D.CLOSED,D.ENDED]);D.MONGO_CLIENT_EVENTS=Object.freeze([...D.CMAP_EVENTS,...D.APM_EVENTS,...D.TOPOLOGY_EVENTS,...D.HEARTBEAT_EVENTS]);D.LEGACY_HELLO_COMMAND="ismaster";D.LEGACY_HELLO_COMMAND_CAMEL_CASE="isMaster";D.kDecorateResult=Symbol.for("@@mdb.decorateDecryptionResult");D.kDecoratedKeys=Symbol.for("@@mdb.decryptedKeys")});var si=m(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.ReadConcern=ni.ReadConcernLevel=void 0;ni.ReadConcernLevel=Object.freeze({local:"local",majority:"majority",linearizable:"linearizable",available:"available",snapshot:"snapshot"});var nO=class t{constructor(e){this.level=ni.ReadConcernLevel[e]??e}static fromOptions(e){if(e!=null){if(e.readConcern){let{readConcern:r}=e;if(r instanceof t)return r;if(typeof r=="string")return new t(r);if("level"in r&&r.level)return new t(r.level)}if(e.level)return new t(e.level)}}static get MAJORITY(){return ni.ReadConcernLevel.majority}static get AVAILABLE(){return ni.ReadConcernLevel.available}static get LINEARIZABLE(){return ni.ReadConcernLevel.linearizable}static get SNAPSHOT(){return ni.ReadConcernLevel.snapshot}toJSON(){return{level:this.level}}};ni.ReadConcern=nO});var sr=m(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});Yr.ReadPreference=Yr.ReadPreferenceMode=void 0;var $u=z();Yr.ReadPreferenceMode=Object.freeze({primary:"primary",primaryPreferred:"primaryPreferred",secondary:"secondary",secondaryPreferred:"secondaryPreferred",nearest:"nearest"});var sO=class t{static{this.PRIMARY=Yr.ReadPreferenceMode.primary}static{this.PRIMARY_PREFERRED=Yr.ReadPreferenceMode.primaryPreferred}static{this.SECONDARY=Yr.ReadPreferenceMode.secondary}static{this.SECONDARY_PREFERRED=Yr.ReadPreferenceMode.secondaryPreferred}static{this.NEAREST=Yr.ReadPreferenceMode.nearest}static{this.primary=new t(Yr.ReadPreferenceMode.primary)}static{this.primaryPreferred=new t(Yr.ReadPreferenceMode.primaryPreferred)}static{this.secondary=new t(Yr.ReadPreferenceMode.secondary)}static{this.secondaryPreferred=new t(Yr.ReadPreferenceMode.secondaryPreferred)}static{this.nearest=new t(Yr.ReadPreferenceMode.nearest)}constructor(e,r,n){if(!t.isValid(e))throw new $u.MongoInvalidArgumentError(`Invalid read preference mode ${JSON.stringify(e)}`);if(n==null&&typeof r=="object"&&!Array.isArray(r))n=r,r=void 0;else if(r&&!Array.isArray(r))throw new $u.MongoInvalidArgumentError("ReadPreference tags must be an array");if(this.mode=e,this.tags=r,this.hedge=n?.hedge,this.maxStalenessSeconds=void 0,n=n??{},n.maxStalenessSeconds!=null){if(n.maxStalenessSeconds<=0)throw new $u.MongoInvalidArgumentError("maxStalenessSeconds must be a positive integer");this.maxStalenessSeconds=n.maxStalenessSeconds}if(this.mode===t.PRIMARY){if(this.tags&&Array.isArray(this.tags)&&this.tags.length>0)throw new $u.MongoInvalidArgumentError("Primary read preference cannot be combined with tags");if(this.maxStalenessSeconds)throw new $u.MongoInvalidArgumentError("Primary read preference cannot be combined with maxStalenessSeconds");if(this.hedge)throw new $u.MongoInvalidArgumentError("Primary read preference cannot be combined with hedge")}}get preference(){return this.mode}static fromString(e){return new t(e)}static fromOptions(e){if(!e)return;let r=e.readPreference??e.session?.transaction.options.readPreference,n=e.readPreferenceTags;if(r!=null){if(typeof r=="string")return new t(r,n,{maxStalenessSeconds:e.maxStalenessSeconds,hedge:e.hedge});if(!(r instanceof t)&&typeof r=="object"){let s=r.mode||r.preference;if(s&&typeof s=="string")return new t(s,r.tags??n,{maxStalenessSeconds:r.maxStalenessSeconds,hedge:e.hedge})}return n&&(r.tags=n),r}}static translate(e){if(e.readPreference==null)return e;let r=e.readPreference;if(typeof r=="string")e.readPreference=new t(r);else if(r&&!(r instanceof t)&&typeof r=="object"){let n=r.mode||r.preference;n&&typeof n=="string"&&(e.readPreference=new t(n,r.tags,{maxStalenessSeconds:r.maxStalenessSeconds}))}else if(!(r instanceof t))throw new $u.MongoInvalidArgumentError(`Invalid read preference: ${r}`);return e}static isValid(e){return new Set([t.PRIMARY,t.PRIMARY_PREFERRED,t.SECONDARY,t.SECONDARY_PREFERRED,t.NEAREST,null]).has(e)}isValid(e){return t.isValid(typeof e=="string"?e:this.mode)}secondaryOk(){return new Set([t.PRIMARY_PREFERRED,t.SECONDARY,t.SECONDARY_PREFERRED,t.NEAREST]).has(this.mode)}equals(e){return e.mode===this.mode}toJSON(){let e={mode:this.mode};return Array.isArray(this.tags)&&(e.tags=this.tags),this.maxStalenessSeconds&&(e.maxStalenessSeconds=this.maxStalenessSeconds),this.hedge&&(e.hedge=this.hedge),e}};Yr.ReadPreference=sO});var ts=m(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.ServerType=dn.TopologyType=dn.STATE_CONNECTED=dn.STATE_CONNECTING=dn.STATE_CLOSED=dn.STATE_CLOSING=void 0;dn._advanceClusterTime=Gde;dn.STATE_CLOSING="closing";dn.STATE_CLOSED="closed";dn.STATE_CONNECTING="connecting";dn.STATE_CONNECTED="connected";dn.TopologyType=Object.freeze({Single:"Single",ReplicaSetNoPrimary:"ReplicaSetNoPrimary",ReplicaSetWithPrimary:"ReplicaSetWithPrimary",Sharded:"Sharded",Unknown:"Unknown",LoadBalanced:"LoadBalanced"});dn.ServerType=Object.freeze({Standalone:"Standalone",Mongos:"Mongos",PossiblePrimary:"PossiblePrimary",RSPrimary:"RSPrimary",RSSecondary:"RSSecondary",RSArbiter:"RSArbiter",RSOther:"RSOther",RSGhost:"RSGhost",Unknown:"Unknown",LoadBalancer:"LoadBalancer"});function Gde(t,e){(t.clusterTime==null||e.clusterTime.greaterThan(t.clusterTime.clusterTime))&&(t.clusterTime=e)}});var hn=m(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.WriteConcern=qu.WRITE_CONCERN_KEYS=void 0;qu.throwIfWriteConcernError=Yde;var tR=ze(),Jde=z();qu.WRITE_CONCERN_KEYS=["w","wtimeout","j","journal","fsync"];var iO=class t{constructor(e,r,n,s){e!=null&&(Number.isNaN(Number(e))?this.w=e:this.w=Number(e)),r!=null&&(this.wtimeoutMS=this.wtimeout=r),n!=null&&(this.journal=this.j=n),s!=null&&(this.journal=this.j=!!s)}static apply(e,r){let n={};return r.w!=null&&(n.w=r.w),r.wtimeoutMS!=null&&(n.wtimeout=r.wtimeoutMS),r.journal!=null&&(n.j=r.j),e.writeConcern=n,e}static fromOptions(e,r){if(e==null)return;r=r??{};let n;typeof e=="string"||typeof e=="number"?n={w:e}:e instanceof t?n=e:n=e.writeConcern;let i={...r instanceof t?r:r.writeConcern,...n},{w:o=void 0,wtimeout:a=void 0,j:u=void 0,fsync:c=void 0,journal:l=void 0,wtimeoutMS:p=void 0}=i;if(o!=null||a!=null||p!=null||u!=null||l!=null||c!=null)return new t(o,a??p,u??l,c)}};qu.WriteConcern=iO;function Yde(t){if(typeof t=="object"&&t!=null){let e=tR.MongoDBResponse.is(t)&&t.has("writeConcernError")?t.toObject():!tR.MongoDBResponse.is(t)&&"writeConcernError"in t?t:null;if(e!=null)throw new Jde.MongoWriteConcernError(e)}}});var X=m(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.kDispose=W.randomBytes=W.COSMOS_DB_MSG=W.DOCUMENT_DB_MSG=W.COSMOS_DB_CHECK=W.DOCUMENT_DB_CHECK=W.MONGODB_WARNING_CODE=W.DEFAULT_PK_FACTORY=W.HostAddress=W.BufferPool=W.List=W.MongoDBCollectionNamespace=W.MongoDBNamespace=W.ByteUtils=void 0;W.isUint8Array=she;W.hostMatchesWildcards=ihe;W.normalizeHintField=ohe;W.isObject=aO;W.mergeOptions=uhe;W.filterOptions=che;W.isPromiseLike=lhe;W.decorateWithCollation=phe;W.decorateWithReadConcern=dhe;W.getTopology=hhe;W.ns=fhe;W.makeCounter=mhe;W.uuidV4=yhe;W.maxWireVersion=ghe;W.arrayStrictEqual=_he;W.errorStrictEqual=Ehe;W.makeStateMachine=bhe;W.now=aR;W.calculateDurationInMs=whe;W.hasAtomicOperators=uR;W.resolveTimeoutOptions=She;W.resolveOptions=Ahe;W.isSuperset=cR;W.isHello=Ohe;W.setDifference=Che;W.isRecord=xhe;W.emitWarning=lR;W.emitWarningOnce=The;W.enumToString=Dhe;W.supportsRetryableWrites=Mhe;W.shuffle=Phe;W.commandSupportsReadConcern=Bhe;W.compareObjectId=Ihe;W.parseInteger=pR;W.parseUnsignedInteger=Nhe;W.checkParentDomainMatch=khe;W.get=Rhe;W.request=Fhe;W.isHostMatch=$he;W.promiseWithResolvers=pO;W.squashError=qhe;W.once=jhe;W.maybeAddIdToDocuments=Lhe;W.fileIsAccessible=Uhe;W.csotMin=Vhe;W.noop=Whe;W.decorateDecryptionResult=dR;W.addAbortListener=dO;W.abortable=zhe;var iR=require("crypto"),Qde=require("fs"),oR=require("http"),oO=require("timers"),Xde=require("url"),Zde=require("url"),ehe=require("util"),lO=pe(),rR=Eo(),ty=Lt(),fn=z(),the=si(),rhe=sr(),nhe=ts(),nR=hn();W.ByteUtils={toLocalBufferType(t){return Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength)},equals(t,e){return W.ByteUtils.toLocalBufferType(t).equals(e)},compare(t,e){return W.ByteUtils.toLocalBufferType(t).compare(e)},toBase64(t){return W.ByteUtils.toLocalBufferType(t).toString("base64")}};function she(t){return t!=null&&typeof t=="object"&&Symbol.toStringTag in t&&t[Symbol.toStringTag]==="Uint8Array"}function ihe(t,e){for(let r of e)if(t===r||r.startsWith("*.")&&t?.endsWith(r.substring(2,r.length))||r.startsWith("*/")&&t?.endsWith(r.substring(2,r.length)))return!0;return!1}function ohe(t){let e;if(typeof t=="string")e=t;else if(Array.isArray(t))e={},t.forEach(r=>{e[r]=1});else if(t!=null&&typeof t=="object"){e={};for(let r in t)e[r]=t[r]}return e}var ahe=t=>Object.prototype.toString.call(t);function aO(t){return ahe(t)==="[object Object]"}function uhe(t,e){return{...t,...e}}function che(t,e){let r={};for(let n in t)e.includes(n)&&(r[n]=t[n]);return r}function lhe(t){return t!=null&&typeof t=="object"&&"then"in t&&typeof t.then=="function"}function phe(t,e){e.collation&&typeof e.collation=="object"&&(t.collation=e.collation)}function dhe(t,e,r){if(r&&r.session&&r.session.inTransaction())return;let n=Object.assign({},t.readConcern||{});e.s.readConcern&&Object.assign(n,e.s.readConcern),Object.keys(n).length>0&&Object.assign(t,{readConcern:n})}function hhe(t){if("topology"in t&&t.topology)return t.topology;if("client"in t&&t.client.topology)return t.client.topology;throw new fn.MongoNotConnectedError("MongoClient must be connected to perform this operation")}function fhe(t){return wd.fromString(t)}var wd=class t{constructor(e,r){this.db=e,this.collection=r===""?void 0:r}toString(){return this.collection?`${this.db}.${this.collection}`:this.db}withCollection(e){return new ry(this.db,e)}static fromString(e){if(typeof e!="string"||e==="")throw new fn.MongoRuntimeError(`Cannot parse namespace from "${e}"`);let[r,...n]=e.split("."),s=n.join(".");return new t(r,s===""?void 0:s)}};W.MongoDBNamespace=wd;var ry=class extends wd{constructor(e,r){super(e,r),this.collection=r}static fromString(e){return super.fromString(e)}};W.MongoDBCollectionNamespace=ry;function*mhe(t=0){let e=t;for(;;){let r=e;e+=1,yield r}}function yhe(){let t=iR.randomBytes(16);return t[6]=t[6]&15|64,t[8]=t[8]&63|128,t}function ghe(t){if(t){if(t.hello)return t.hello.maxWireVersion;if(t.serverApi?.version||t.loadBalanced)return rR.MAX_SUPPORTED_WIRE_VERSION;if("lastHello"in t&&typeof t.lastHello=="function"){let e=t.lastHello();if(e)return e.maxWireVersion}if(t.description&&"maxWireVersion"in t.description&&t.description.maxWireVersion!=null)return t.description.maxWireVersion}return 0}function _he(t,e){return!Array.isArray(t)||!Array.isArray(e)?!1:t.length===e.length&&t.every((r,n)=>r===e[n])}function Ehe(t,e){return t===e?!0:!t||!e?t===e:!(t==null&&e!=null||t!=null&&e==null||t.constructor.name!==e.constructor.name||t.message!==e.message)}function bhe(t){return function(r,n){let s=t[r.s.state];if(s&&s.indexOf(n)<0)throw new fn.MongoRuntimeError(`illegal state transition from [${r.s.state}] => [${n}], allowed: [${s}]`);r.emit("stateChanged",r.s.state,n),r.s.state=n}}function aR(){let t=process.hrtime();return Math.floor(t[0]*1e3+t[1]/1e6)}function whe(t){if(typeof t!="number")return-1;let e=aR()-t;return e<0?0:e}function uR(t,e){if(Array.isArray(t)){for(let n of t)if(uR(n))return!0;return!1}let r=Object.keys(t);if(e?.ignoreUndefined){let n=!0;for(let s of r)if(t[s]!==void 0){n=!1;break}if(n)throw new fn.MongoInvalidArgumentError("Update operations require that all atomic operators have defined values, but none were provided.")}return r.length>0&&r[0][0]==="$"}function She(t,e){let{socketTimeoutMS:r,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:s,timeoutMS:i}=t.s.options;return{socketTimeoutMS:r,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:s,timeoutMS:i,...e}}function Ahe(t,e){let r=Object.assign({},e,(0,lO.resolveBSONOptions)(e,t)),n=e?.timeoutMS??t?.timeoutMS,s=e?.session;if(!s?.inTransaction()){let a=the.ReadConcern.fromOptions(e)??t?.readConcern;a&&(r.readConcern=a);let u=nR.WriteConcern.fromOptions(e)??t?.writeConcern;u&&(n!=null&&(u=nR.WriteConcern.fromOptions({writeConcern:{...u,wtimeout:void 0,wtimeoutMS:void 0}})),r.writeConcern=u)}r.timeoutMS=n;let i=rhe.ReadPreference.fromOptions(e)??t?.readPreference;if(i&&(r.readPreference=i),s?.explicit&&s?.timeoutContext!=null&&e?.timeoutMS!=null)throw new fn.MongoInvalidArgumentError("An operation cannot be given a timeoutMS setting when inside a withTransaction call that has a timeoutMS setting");return r}function cR(t,e){t=Array.isArray(t)?new Set(t):t,e=Array.isArray(e)?new Set(e):e;for(let r of e)if(!t.has(r))return!1;return!0}function Ohe(t){return!!(t[ty.LEGACY_HELLO_COMMAND]||t.hello)}function Che(t,e){let r=new Set(t);for(let n of e)r.delete(n);return r}var vhe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);function xhe(t,e=void 0){if(!aO(t))return!1;let r=t.constructor;if(r&&r.prototype&&(!aO(r.prototype)||!vhe(r.prototype,"isPrototypeOf")))return!1;if(e){let n=Object.keys(t);return cR(n,e)}return!0}var ny=class{get length(){return this.count}get[Symbol.toStringTag](){return"List"}constructor(){this.count=0,this.head={next:null,prev:null,value:null},this.head.next=this.head,this.head.prev=this.head}toArray(){return Array.from(this)}toString(){return`head <=> ${this.toArray().join(" <=> ")} <=> head`}*[Symbol.iterator](){for(let e of this.nodes())yield e.value}*nodes(){let e=this.head.next;for(;e!==this.head;){let{next:r}=e;yield e,e=r}}push(e){this.count+=1;let r={next:this.head,prev:this.head.prev,value:e};this.head.prev.next=r,this.head.prev=r}pushMany(e){for(let r of e)this.push(r)}unshift(e){this.count+=1;let r={next:this.head.next,prev:this.head,value:e};this.head.next.prev=r,this.head.next=r}remove(e){if(e===this.head||this.length===0)return null;this.count-=1;let r=e.prev,n=e.next;return r.next=n,n.prev=r,e.value}shift(){return this.remove(this.head.next)}pop(){return this.remove(this.head.prev)}prune(e){for(let r of this.nodes())e(r.value)&&this.remove(r)}clear(){this.count=0,this.head.next=this.head,this.head.prev=this.head}first(){return this.head.next.value}last(){return this.head.prev.value}};W.List=ny;var uO=class{constructor(){this.buffers=new ny,this.totalByteLength=0}get length(){return this.totalByteLength}append(e){this.buffers.push(e),this.totalByteLength+=e.length}getInt32(){if(this.totalByteLength<4)return null;let e=this.buffers.first();if(e!=null&&e.byteLength>=4)return e.readInt32LE(0);let r=this.read(4),n=r.readInt32LE(0);return this.totalByteLength+=4,this.buffers.unshift(r),n}read(e){if(typeof e!="number"||e<0)throw new fn.MongoInvalidArgumentError('Argument "size" must be a non-negative number');if(e>this.totalByteLength)return Buffer.alloc(0);let r=Buffer.allocUnsafe(e);for(let n=0;n<e;){let s=this.buffers.shift();if(s==null)break;let i=e-n,o=Math.min(i,s.byteLength),a=s.subarray(0,o);r.set(a,n),n+=o,this.totalByteLength-=o,o<s.byteLength&&this.buffers.unshift(s.subarray(o))}return r}};W.BufferPool=uO;var cO=class t{constructor(e){this.host=void 0,this.port=void 0,this.socketPath=void 0,this.isIPv6=!1;let r=e.split(" ").join("%20");if(r.endsWith(".sock")){this.socketPath=decodeURIComponent(r);return}let n=`iLoveJS://${r}`,s;try{s=new Zde.URL(n)}catch(u){let c=new fn.MongoRuntimeError(`Unable to parse ${r} with URL`);throw c.cause=u,c}let i=s.hostname,o=s.port,a=decodeURIComponent(i).toLowerCase();if(a.startsWith("[")&&a.endsWith("]")&&(this.isIPv6=!0,a=a.substring(1,i.length-1)),this.host=a.toLowerCase(),typeof o=="number"?this.port=o:typeof o=="string"&&o!==""?this.port=Number.parseInt(o,10):this.port=27017,this.port===0)throw new fn.MongoParseError("Invalid port (zero) with hostname");Object.freeze(this)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new HostAddress('${this.toString()}')`}toString(){return typeof this.host=="string"?this.isIPv6?`[${this.host}]:${this.port}`:`${this.host}:${this.port}`:`${this.socketPath}`}static fromString(e){return new t(e)}static fromHostPort(e,r){return e.includes(":")&&(e=`[${e}]`),t.fromString(`${e}:${r}`)}static fromSrvRecord({name:e,port:r}){return t.fromHostPort(e,r)}toHostPort(){if(this.socketPath)return{host:this.socketPath,port:0};let e=this.host??"",r=this.port??0;return{host:e,port:r}}};W.HostAddress=cO;W.DEFAULT_PK_FACTORY={createPk(){return new lO.ObjectId}};W.MONGODB_WARNING_CODE="MONGODB DRIVER";function lR(t){return process.emitWarning(t,{code:W.MONGODB_WARNING_CODE})}var sR=new Set;function The(t){if(!sR.has(t))return sR.add(t),lR(t)}function Dhe(t){return Object.values(t).join(", ")}function Mhe(t){return t?!!(t.loadBalanced||t.description.logicalSessionTimeoutMinutes!=null&&t.description.type!==nhe.ServerType.Standalone):!1}function Phe(t,e=0){let r=Array.from(t);if(e>r.length)throw new fn.MongoRuntimeError("Limit must be less than the number of items");let n=r.length,s=e%r.length===0?1:r.length-e;for(;n>s;){let i=Math.floor(Math.random()*n);n-=1;let o=r[n];r[n]=r[i],r[i]=o}return e%r.length===0?r:r.slice(s)}function Bhe(t){return!!(t.aggregate||t.count||t.distinct||t.find||t.geoNear)}function Ihe(t,e){return t==null&&e==null?0:t==null?-1:e==null?1:W.ByteUtils.compare(t.id,e.id)}function pR(t){if(typeof t=="number")return Math.trunc(t);let e=Number.parseInt(String(t),10);return Number.isNaN(e)?null:e}function Nhe(t){let e=pR(t);return e!=null&&e>=0?e:null}function khe(t,e){let r=t.endsWith(".")?t.slice(0,t.length-1):t,n=e.endsWith(".")?e.slice(0,e.length-1):e,s=/^.*?\./,i=n.split(".").length<3,o=`.${r.replace(s,"")}`,a=i?n:`.${n.replace(s,"")}`;if(a.startsWith(".")||(a="."+a),i&&r.split(".").length<=n.split(".").length)throw new fn.MongoAPIError("Server record does not have at least one more domain level than parent URI");if(!o.endsWith(a))throw new fn.MongoAPIError("Server record does not share hostname with parent URI")}function Rhe(t,e={}){return new Promise((r,n)=>{let s,i=oR.get(t,e,o=>{o.setEncoding("utf8");let a="";o.on("data",u=>a+=u),o.on("end",()=>{(0,oO.clearTimeout)(s),r({status:o.statusCode,body:a})})}).on("error",o=>{(0,oO.clearTimeout)(s),n(o)}).end();s=(0,oO.setTimeout)(()=>{i.destroy(new fn.MongoNetworkTimeoutError("request timed out after 10 seconds"))},1e4)})}async function Fhe(t,e={}){return await new Promise((r,n)=>{let s={method:"GET",timeout:1e4,json:!0,...Xde.parse(t),...e},i=oR.request(s,o=>{o.setEncoding("utf8");let a="";o.on("data",u=>{a+=u}),o.once("end",()=>{if(e.json===!1){r(a);return}try{let u=JSON.parse(a);r(u)}catch{n(new fn.MongoRuntimeError(`Invalid JSON response: "${a}"`))}})});i.once("timeout",()=>i.destroy(new fn.MongoNetworkTimeoutError(`Network request to ${t} timed out after ${e.timeout} ms`))),i.once("error",o=>n(o)),i.end()})}W.DOCUMENT_DB_CHECK=/(\.docdb\.amazonaws\.com$)|(\.docdb-elastic\.amazonaws\.com$)/;W.COSMOS_DB_CHECK=/\.cosmos\.azure\.com$/;W.DOCUMENT_DB_MSG="You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb";W.COSMOS_DB_MSG="You appear to be connected to a CosmosDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/cosmosdb";function $he(t,e){return!!(e&&t.test(e.toLowerCase()))}function pO(){let t,e;return{promise:new Promise(function(s,i){t=s,e=i}),resolve:t,reject:e}}function qhe(t){}W.randomBytes=(0,ehe.promisify)(iR.randomBytes);async function jhe(t,e,r){r?.signal?.throwIfAborted();let{promise:n,resolve:s,reject:i}=pO(),o=c=>s(c),a=c=>i(c),u=dO(r?.signal,function(){i(this.reason)});t.once(e,o).once("error",a);try{return await n}finally{t.off(e,o),t.off("error",a),u?.[W.kDispose]()}}function Lhe(t,e,r){return(r.forceServerObjectId??t.db.options?.forceServerObjectId??!1)||e._id==null&&(e._id=t.s.pkFactory.createPk()),e}async function Uhe(t,e){try{return await Qde.promises.access(t,e),!0}catch{return!1}}function Vhe(t,e){return t===0?e:e===0?t:Math.min(t,e)}function Whe(){}function dR(t,e,r=!0){if(r&&(Buffer.isBuffer(e)&&(e=(0,lO.deserialize)(e)),Buffer.isBuffer(t)))throw new fn.MongoRuntimeError("Expected result of decryption to be deserialized BSON object");if(!(!t||typeof t!="object"))for(let n of Object.keys(t)){let s=e[n];if(s&&s._bsontype==="Binary"&&s.sub_type===6){t[ty.kDecoratedKeys]||Object.defineProperty(t,ty.kDecoratedKeys,{value:[],configurable:!0,enumerable:!1,writable:!1}),t[ty.kDecoratedKeys].push(n);continue}dR(t[n],s,!1)}}W.kDispose=Symbol.dispose??Symbol("dispose");function dO(t,e){if(t!=null)return t.addEventListener("abort",e,{once:!0}),{[W.kDispose]:()=>t.removeEventListener("abort",e)}}async function zhe(t,{signal:e}){if(e==null)return await t;let{promise:r,reject:n}=pO(),s=e.aborted?n(e.reason):dO(e,function(){n(this.reason)});try{return await Promise.race([t,r])}finally{s?.[W.kDispose]()}}});var hR=m(sy=>{"use strict";Object.defineProperty(sy,"__esModule",{value:!0});sy.OnDemandDocument=void 0;var ve=pe(),Sd={type:0,nameOffset:1,nameLength:2,offset:3,length:4},hO=class t{constructor(e,r=0,n=!1,s){this.cache=Object.create(null),this.indexFound=Object.create(null),this.bson=e,this.offset=r,this.isArray=n,this.elements=s??(0,ve.parseToElementsToArray)(this.bson,r)}isElementName(e,r){let n=r[Sd.nameLength],s=r[Sd.nameOffset];if(e.length!==n)return!1;let i=s+n;for(let o=s,a=0;a<e.length&&o<i;a++,o++)if(this.bson[o]!==e.charCodeAt(a))return!1;return!0}getElement(e){let r=this.cache[e];if(r===!1)return null;if(r!=null)return r;if(typeof e=="number")if(this.isArray)if(e<this.elements.length){let s={element:this.elements[e],value:void 0};return this.cache[e]=s,this.indexFound[e]=!0,s}else return null;else return null;for(let n=0;n<this.elements.length;n++){let s=this.elements[n];if(!(n in this.indexFound)&&this.isElementName(e,s)){let i={element:s,value:void 0};return this.cache[e]=i,this.indexFound[n]=!0,i}}return this.cache[e]=!1,null}toJSValue(e,r){let n=e[Sd.type],s=e[Sd.offset],i=e[Sd.length];if(r!==n)return null;switch(r){case ve.BSONType.null:case ve.BSONType.undefined:return null;case ve.BSONType.double:return(0,ve.getFloat64LE)(this.bson,s);case ve.BSONType.int:return(0,ve.getInt32LE)(this.bson,s);case ve.BSONType.long:return(0,ve.getBigInt64LE)(this.bson,s);case ve.BSONType.bool:return!!this.bson[s];case ve.BSONType.objectId:return new ve.ObjectId(this.bson.subarray(s,s+12));case ve.BSONType.timestamp:return new ve.Timestamp((0,ve.getBigInt64LE)(this.bson,s));case ve.BSONType.string:return(0,ve.toUTF8)(this.bson,s+4,s+i-1,!1);case ve.BSONType.binData:{let o=(0,ve.getInt32LE)(this.bson,s),a=this.bson[s+4];if(a===2){let u=(0,ve.getInt32LE)(this.bson,s+1+4);if(u<0)throw new ve.BSONError("Negative binary type element size found for subtype 0x02");if(u>o-4)throw new ve.BSONError("Binary type with subtype 0x02 contains too long binary size");if(u<o-4)throw new ve.BSONError("Binary type with subtype 0x02 contains too short binary size");return new ve.Binary(this.bson.subarray(s+1+4+4,s+1+4+4+u),2)}return new ve.Binary(this.bson.subarray(s+1+4,s+1+4+o),a)}case ve.BSONType.date:return new Date(Number((0,ve.getBigInt64LE)(this.bson,s)));case ve.BSONType.object:return new t(this.bson,s);case ve.BSONType.array:return new t(this.bson,s,!0);default:throw new ve.BSONError(`Unsupported BSON type: ${r}`)}}size(){return this.elements.length}has(e){let r=this.cache[e];return r===!1?!1:r!=null?!0:this.getElement(e)!=null}get(e,r,n){let s=this.getElement(e);if(s==null){if(n===!0)throw new ve.BSONError(`BSON element "${e}" is missing`);return null}if(s.value==null){let i=this.toJSValue(s.element,r);if(i==null){if(n===!0)throw new ve.BSONError(`BSON element "${e}" is missing`);return null}s.value=i}return s.value}getNumber(e,r){let n=this.get(e,ve.BSONType.bool),s=n==null?null:n?1:0,i=this.get(e,ve.BSONType.long),o=i==null?null:Number(i),a=s??o??this.get(e,ve.BSONType.int)??this.get(e,ve.BSONType.double);if(r===!0&&a==null)throw new ve.BSONError(`BSON element "${e}" is missing`);return a}toObject(e){return(0,ve.deserialize)(this.bson,{...e,index:this.offset,allowObjectSmallerThanBufferSize:!0})}toBytes(){let e=(0,ve.getInt32LE)(this.bson,this.offset);return this.bson.subarray(this.offset,this.offset+e)}};sy.OnDemandDocument=hO});var ze=m(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.ClientBulkWriteCursorResponse=ii.ExplainedCursorResponse=ii.CursorResponse=ii.MongoDBResponse=void 0;ii.isErrorResponse=mR;var Pe=pe(),ju=z(),fR=X(),Khe=hR(),iy={type:0,nameOffset:1,nameLength:2,offset:3,length:4};function mR(t,e){for(let r=0;r<e.length;r++){let n=e[r];if(n[iy.nameLength]===2){let s=n[iy.nameOffset];if(t[s]===111&&t[s+1]===107){let i=n[iy.offset],o=n[iy.length];for(let a=i;a<i+o;a++)if(t[a]!==0)return!1;return!0}}}return!0}var oy=class t extends Khe.OnDemandDocument{get(e,r,n){try{return super.get(e,r,n)}catch(s){throw new ju.MongoUnexpectedServerResponseError(s.message,{cause:s})}}static is(e){return e instanceof t}static make(e){let r=(0,Pe.parseToElementsToArray)(e,0);return mR(e,r)?new t(e,0,!1,r):new this(e,0,!1,r)}static{this.empty=new t(new Uint8Array([13,0,0,0,16,111,107,0,1,0,0,0,0]))}get isMaxTimeExpiredError(){if(this.ok===0&&this.code===ju.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;if(this.ok===0)return!1;if(this.get("writeConcernError",Pe.BSONType.object)?.getNumber("code")===ju.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;let n=this.get("writeErrors",Pe.BSONType.array);if(n?.size()){for(let s=0;s<n.size();s++)if(n.get(s,Pe.BSONType.object)?.getNumber("code")===ju.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0}return!1}get recoveryToken(){return this.get("recoveryToken",Pe.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}get atClusterTime(){return this.get("cursor",Pe.BSONType.object)?.get("atClusterTime",Pe.BSONType.timestamp)??this.get("atClusterTime",Pe.BSONType.timestamp)}get operationTime(){return this.get("operationTime",Pe.BSONType.timestamp)}get ok(){return this.getNumber("ok")?1:0}get $err(){return this.get("$err",Pe.BSONType.string)}get errmsg(){return this.get("errmsg",Pe.BSONType.string)}get code(){return this.getNumber("code")}get $clusterTime(){if(!("clusterTime"in this)){let e=this.get("$clusterTime",Pe.BSONType.object);if(e==null)return this.clusterTime=null,null;let r=e.get("clusterTime",Pe.BSONType.timestamp,!0),n=e.get("signature",Pe.BSONType.object)?.toObject();this.clusterTime={clusterTime:r,signature:n}}return this.clusterTime??null}toObject(e){let r={...(0,Pe.pluckBSONSerializeOptions)(e??{}),validation:(0,Pe.parseUtf8ValidationOption)(e)};return super.toObject(r)}};ii.MongoDBResponse=oy;var Ad=class t extends oy{constructor(){super(...arguments),this._batch=null,this.iterated=0,this._encryptedBatch=null}static get emptyGetMore(){return new t((0,Pe.serialize)({ok:1,cursor:{id:0n,nextBatch:[]}}))}static is(e){return e instanceof t||e===t.emptyGetMore}get cursor(){return this.get("cursor",Pe.BSONType.object,!0)}get id(){try{return Pe.Long.fromBigInt(this.cursor.get("id",Pe.BSONType.long,!0))}catch(e){throw new ju.MongoUnexpectedServerResponseError(e.message,{cause:e})}}get ns(){let e=this.cursor.get("ns",Pe.BSONType.string);return e!=null?(0,fR.ns)(e):null}get length(){return Math.max(this.batchSize-this.iterated,0)}get encryptedBatch(){if(this.encryptedResponse==null)return null;if(this._encryptedBatch!=null)return this._encryptedBatch;let e=this.encryptedResponse?.get("cursor",Pe.BSONType.object);if(e?.has("firstBatch"))this._encryptedBatch=e.get("firstBatch",Pe.BSONType.array,!0);else if(e?.has("nextBatch"))this._encryptedBatch=e.get("nextBatch",Pe.BSONType.array,!0);else throw new ju.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._encryptedBatch}get batch(){if(this._batch!=null)return this._batch;let e=this.cursor;if(e.has("firstBatch"))this._batch=e.get("firstBatch",Pe.BSONType.array,!0);else if(e.has("nextBatch"))this._batch=e.get("nextBatch",Pe.BSONType.array,!0);else throw new ju.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._batch}get batchSize(){return this.batch?.size()}get postBatchResumeToken(){return this.cursor.get("postBatchResumeToken",Pe.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}shift(e){if(this.iterated>=this.batchSize)return null;let r=this.batch.get(this.iterated,Pe.BSONType.object,!0)??null,n=this.encryptedBatch?.get(this.iterated,Pe.BSONType.object,!0)??null;if(this.iterated+=1,e?.raw)return r.toBytes();{let s=r.toObject(e);return n&&(0,fR.decorateDecryptionResult)(s,n.toObject(e),!0),s}}clear(){this.iterated=this.batchSize}};ii.CursorResponse=Ad;var fO=class extends Ad{constructor(){super(...arguments),this.isExplain=!0,this._length=1}get id(){return Pe.Long.fromBigInt(0n)}get batchSize(){return 0}get ns(){return null}get length(){return this._length}shift(e){return this._length===0?null:(this._length-=1,this.toObject(e))}};ii.ExplainedCursorResponse=fO;var mO=class extends Ad{get insertedCount(){return this.get("nInserted",Pe.BSONType.int,!0)}get upsertedCount(){return this.get("nUpserted",Pe.BSONType.int,!0)}get matchedCount(){return this.get("nMatched",Pe.BSONType.int,!0)}get modifiedCount(){return this.get("nModified",Pe.BSONType.int,!0)}get deletedCount(){return this.get("nDeleted",Pe.BSONType.int,!0)}get writeConcernError(){return this.get("writeConcernError",Pe.BSONType.object,!1)}};ii.ClientBulkWriteCursorResponse=mO});var Od=m(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});ji.Explain=ji.ExplainVerbosity=void 0;ji.validateExplainTimeoutOptions=Ghe;ji.decorateWithExplain=Jhe;var Hhe=z();ji.ExplainVerbosity=Object.freeze({queryPlanner:"queryPlanner",queryPlannerExtended:"queryPlannerExtended",executionStats:"executionStats",allPlansExecution:"allPlansExecution"});var yO=class t{constructor(e,r){typeof e=="boolean"?this.verbosity=e?ji.ExplainVerbosity.allPlansExecution:ji.ExplainVerbosity.queryPlanner:this.verbosity=e,this.maxTimeMS=r}static fromOptions({explain:e}={}){if(e==null)return;if(typeof e=="boolean"||typeof e=="string")return new t(e);let{verbosity:r,maxTimeMS:n}=e;return new t(r,n)}};ji.Explain=yO;function Ghe(t,e){let{maxTimeMS:r,timeoutMS:n}=t;if(n!=null&&(r!=null||e?.maxTimeMS!=null))throw new Hhe.MongoAPIError("Cannot use maxTimeMS with timeoutMS for explain commands.")}function Jhe(t,e){let{verbosity:r,maxTimeMS:n}=e,s={explain:t,verbosity:r};return typeof n=="number"&&(s.maxTimeMS=n),s}});var Xe=m(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.AbstractOperation=Ds.Aspect=void 0;Ds.defineAspects=Qhe;var Yhe=pe(),gO=sr();Ds.Aspect={READ_OPERATION:Symbol("READ_OPERATION"),WRITE_OPERATION:Symbol("WRITE_OPERATION"),RETRYABLE:Symbol("RETRYABLE"),EXPLAINABLE:Symbol("EXPLAINABLE"),SKIP_COLLATION:Symbol("SKIP_COLLATION"),CURSOR_CREATING:Symbol("CURSOR_CREATING"),MUST_SELECT_SAME_SERVER:Symbol("MUST_SELECT_SAME_SERVER"),COMMAND_BATCHING:Symbol("COMMAND_BATCHING"),SUPPORTS_RAW_DATA:Symbol("SUPPORTS_RAW_DATA")};var _O=class{constructor(e={}){this.readPreference=this.hasAspect(Ds.Aspect.WRITE_OPERATION)?gO.ReadPreference.primary:gO.ReadPreference.fromOptions(e)??gO.ReadPreference.primary,this.bsonOptions=(0,Yhe.resolveBSONOptions)(e),this._session=e.session!=null?e.session:void 0,this.options=e,this.bypassPinningCheck=!!e.bypassPinningCheck}hasAspect(e){let r=this.constructor;return r.aspects==null?!1:r.aspects.has(e)}get session(){return this._session}set session(e){this._session=e}clearSession(){this._session=void 0}resetBatch(){return!0}get canRetryRead(){return this.hasAspect(Ds.Aspect.RETRYABLE)&&this.hasAspect(Ds.Aspect.READ_OPERATION)}get canRetryWrite(){return this.hasAspect(Ds.Aspect.RETRYABLE)&&this.hasAspect(Ds.Aspect.WRITE_OPERATION)}handleOk(e){return e.toObject(this.bsonOptions)}handleError(e){throw e}};Ds.AbstractOperation=_O;function Qhe(t,e){return!Array.isArray(e)&&!(e instanceof Set)&&(e=[e]),e=new Set(e),Object.defineProperty(t,"aspects",{value:e,writable:!1}),e}});var At=m(uy=>{"use strict";Object.defineProperty(uy,"__esModule",{value:!0});uy.CommandOperation=void 0;var Xhe=Eo(),Zhe=z(),EO=Od(),efe=si(),ay=X(),yR=hn(),Lu=Xe(),bO=class extends Lu.AbstractOperation{constructor(e,r){super(r),this.options=r??{};let n=r?.dbName||r?.authdb;if(n?this.ns=new ay.MongoDBNamespace(n,"$cmd"):this.ns=e?e.s.namespace.withCollection("$cmd"):new ay.MongoDBNamespace("admin","$cmd"),this.readConcern=efe.ReadConcern.fromOptions(r),this.writeConcern=yR.WriteConcern.fromOptions(r),this.hasAspect(Lu.Aspect.EXPLAINABLE))this.explain=EO.Explain.fromOptions(r),this.explain&&(0,EO.validateExplainTimeoutOptions)(this.options,this.explain);else if(r?.explain!=null)throw new Zhe.MongoInvalidArgumentError('Option "explain" is not supported on this command')}get canRetryWrite(){return this.hasAspect(Lu.Aspect.EXPLAINABLE)?this.explain==null:super.canRetryWrite}buildOptions(e){return{...this.options,...this.bsonOptions,timeoutContext:e,readPreference:this.readPreference,session:this.session}}buildCommand(e,r){let n=this.buildCommandDocument(e,r),s=this.session&&this.session.inTransaction();return this.readConcern&&(0,ay.commandSupportsReadConcern)(n)&&!s&&Object.assign(n,{readConcern:this.readConcern}),this.writeConcern&&this.hasAspect(Lu.Aspect.WRITE_OPERATION)&&!s&&yR.WriteConcern.apply(n,this.writeConcern),this.options.collation&&typeof this.options.collation=="object"&&!this.hasAspect(Lu.Aspect.SKIP_COLLATION)&&Object.assign(n,{collation:this.options.collation}),typeof this.options.maxTimeMS=="number"&&(n.maxTimeMS=this.options.maxTimeMS),this.options.rawData!=null&&this.hasAspect(Lu.Aspect.SUPPORTS_RAW_DATA)&&(0,ay.maxWireVersion)(e)>=Xhe.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION&&(n.rawData=this.options.rawData),this.hasAspect(Lu.Aspect.EXPLAINABLE)&&this.explain?(0,EO.decorateWithExplain)(n,this.explain):n}};uy.CommandOperation=bO});var SO=m(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});bo.DeleteManyOperation=bo.DeleteOneOperation=bo.DeleteOperation=void 0;bo.makeDeleteStatement=wO;var tfe=ze(),Cd=z(),rfe=X(),nfe=At(),mn=Xe(),Ll=class extends nfe.CommandOperation{constructor(e,r,n){super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=tfe.MongoDBResponse,this.options=n,this.ns=e,this.statements=r}get commandName(){return"delete"}get canRetryWrite(){return super.canRetryWrite===!1?!1:this.statements.every(e=>e.limit!=null?e.limit>0:!0)}buildCommandDocument(e,r){let n=this.options,s=typeof n.ordered=="boolean"?n.ordered:!0,i={delete:this.ns.collection,deletes:this.statements,ordered:s};if(n.let&&(i.let=n.let),n.comment!==void 0&&(i.comment=n.comment),this.writeConcern&&this.writeConcern.w===0&&(0,rfe.maxWireVersion)(e)<9&&this.statements.find(a=>a.hint))throw new Cd.MongoCompatibilityError("hint for the delete command is only supported on MongoDB 4.4+");return i}};bo.DeleteOperation=Ll;var cy=class extends Ll{constructor(e,r,n){super(e,[wO(r,{...n,limit:1})],n)}handleOk(e){let r=super.handleOk(e);if(this.explain)return r;if(r.code)throw new Cd.MongoServerError(r);if(r.writeErrors)throw new Cd.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:r.n}}};bo.DeleteOneOperation=cy;var ly=class extends Ll{constructor(e,r,n){super(e,[wO(r,n)],n)}handleOk(e){let r=super.handleOk(e);if(this.explain)return r;if(r.code)throw new Cd.MongoServerError(r);if(r.writeErrors)throw new Cd.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:r.n}}};bo.DeleteManyOperation=ly;function wO(t,e){let r={q:t,limit:typeof e.limit=="number"?e.limit:0};return e.collation&&(r.collation=e.collation),e.hint&&(r.hint=e.hint),r}(0,mn.defineAspects)(Ll,[mn.Aspect.RETRYABLE,mn.Aspect.WRITE_OPERATION,mn.Aspect.SUPPORTS_RAW_DATA]);(0,mn.defineAspects)(cy,[mn.Aspect.RETRYABLE,mn.Aspect.WRITE_OPERATION,mn.Aspect.EXPLAINABLE,mn.Aspect.SKIP_COLLATION,mn.Aspect.SUPPORTS_RAW_DATA]);(0,mn.defineAspects)(ly,[mn.Aspect.WRITE_OPERATION,mn.Aspect.EXPLAINABLE,mn.Aspect.SKIP_COLLATION,mn.Aspect.SUPPORTS_RAW_DATA])});var xd=m(wo=>{"use strict";Object.defineProperty(wo,"__esModule",{value:!0});wo.MIN_SECONDARY_WRITE_WIRE_VERSION=void 0;wo.writableServerSelector=ife;wo.sameServerSelector=ofe;wo.secondaryWritableServerSelector=afe;wo.readPreferenceServerSelector=OO;var AO=z(),vd=sr(),ns=ts(),sfe=1e4,gR=90;wo.MIN_SECONDARY_WRITE_WIRE_VERSION=13;function ife(){return function(e,r){return py(e,r.filter(n=>n.isWritable))}}function ofe(t){return function(r,n){return t?n.filter(s=>s.address===t.address&&s.type!==ns.ServerType.Unknown):[]}}function afe(t,e){return!e||!t||t&&t<wo.MIN_SECONDARY_WRITE_WIRE_VERSION?OO(vd.ReadPreference.primary):OO(e)}function ufe(t,e,r){if(t.maxStalenessSeconds==null||t.maxStalenessSeconds<0)return r;let n=t.maxStalenessSeconds,s=(e.heartbeatFrequencyMS+sfe)/1e3;if(n<s)throw new AO.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${s} seconds`);if(n<gR)throw new AO.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${gR} seconds`);if(e.type===ns.TopologyType.ReplicaSetWithPrimary){let i=Array.from(e.servers.values()).filter(dy)[0];return r.reduce((o,a)=>{let c=(a.lastUpdateTime-a.lastWriteDate-(i.lastUpdateTime-i.lastWriteDate)+e.heartbeatFrequencyMS)/1e3,l=t.maxStalenessSeconds??0;return c<=l&&o.push(a),o},[])}if(e.type===ns.TopologyType.ReplicaSetNoPrimary){if(r.length===0)return r;let i=r.reduce((o,a)=>a.lastWriteDate>o.lastWriteDate?a:o);return r.reduce((o,a)=>{let c=(i.lastWriteDate-a.lastWriteDate+e.heartbeatFrequencyMS)/1e3,l=t.maxStalenessSeconds??0;return c<=l&&o.push(a),o},[])}return r}function cfe(t,e){let r=Object.keys(t),n=Object.keys(e);for(let s=0;s<r.length;++s){let i=r[s];if(n.indexOf(i)===-1||e[i]!==t[i])return!1}return!0}function lfe(t,e){if(t.tags==null||Array.isArray(t.tags)&&t.tags.length===0)return e;for(let r=0;r<t.tags.length;++r){let n=t.tags[r],s=e.reduce((i,o)=>(cfe(n,o.tags)&&i.push(o),i),[]);if(s.length)return s}return[]}function py(t,e){let r=e.reduce((s,i)=>Math.min(i.roundTripTime,s),1/0),n=r+t.localThresholdMS;return e.reduce((s,i)=>(i.roundTripTime<=n&&i.roundTripTime>=r&&s.push(i),s),[])}function dy(t){return t.type===ns.ServerType.RSPrimary}function pfe(t){return t.type===ns.ServerType.RSSecondary}function dfe(t){return t.type===ns.ServerType.RSSecondary||t.type===ns.ServerType.RSPrimary}function _R(t){return t.type!==ns.ServerType.Unknown}function hfe(t){return t.type===ns.ServerType.LoadBalancer}function OO(t){if(!t.isValid())throw new AO.MongoInvalidArgumentError("Invalid read preference specified");return function(r,n,s=[]){if(r.type===ns.TopologyType.LoadBalanced)return n.filter(hfe);if(r.type===ns.TopologyType.Unknown)return[];if(r.type===ns.TopologyType.Single)return py(r,n.filter(_R));if(r.type===ns.TopologyType.Sharded){let u=n.filter(l=>!s.includes(l)),c=u.length>0?u:s;return py(r,c.filter(_R))}let i=t.mode;if(i===vd.ReadPreference.PRIMARY)return n.filter(dy);if(i===vd.ReadPreference.PRIMARY_PREFERRED){let u=n.filter(dy);if(u.length)return u}let o=i===vd.ReadPreference.NEAREST?dfe:pfe,a=py(r,lfe(t,ufe(t,r,n.filter(o))));return i===vd.ReadPreference.SECONDARY_PREFERRED&&a.length===0?n.filter(dy):a}}});var ir=m(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.LegacyTimeoutContext=Ps.CSOTTimeoutContext=Ps.TimeoutContext=Ps.Timeout=Ps.TimeoutError=void 0;var ER=require("timers"),Uu=z(),CO=X(),Td=class extends Error{get name(){return"TimeoutError"}constructor(e,r){super(e,r),this.duration=r.duration}static is(e){return e!=null&&typeof e=="object"&&"name"in e&&e.name==="TimeoutError"}};Ps.TimeoutError=Td;var Ms=class t extends Promise{get remainingTime(){return this.timedOut?0:this.duration===0?1/0:this.start+this.duration-Math.trunc(performance.now())}get timeElapsed(){return Math.trunc(performance.now())-this.start}constructor(e=()=>null,r){let n=r?.duration??0,s=!!r?.unref,i=r?.rejection;if(n<0)throw new Uu.MongoInvalidArgumentError("Cannot create a Timeout with a negative duration");let o;super((a,u)=>{o=u,e(CO.noop,u)}),this.ended=null,this.timedOut=!1,this.cleared=!1,this.duration=n,this.start=Math.trunc(performance.now()),i==null&&this.duration>0?(this.id=(0,ER.setTimeout)(()=>{this.ended=Math.trunc(performance.now()),this.timedOut=!0,o(new Td(`Expired after ${n}ms`,{duration:n}))},this.duration),typeof this.id.unref=="function"&&s&&this.id.unref()):i!=null&&(this.ended=Math.trunc(performance.now()),this.timedOut=!0,o(i))}clear(){(0,ER.clearTimeout)(this.id),this.id=void 0,this.timedOut=!1,this.cleared=!0}throwIfExpired(){if(this.timedOut)throw this.then(void 0,CO.squashError),new Td("Timed out",{duration:this.duration})}static expires(e,r){return new t(void 0,{duration:e,unref:r})}static reject(e){return new t(void 0,{duration:0,unref:!0,rejection:e})}};Ps.Timeout=Ms;function ffe(t){return t!=null&&typeof t=="object"&&"serverSelectionTimeoutMS"in t&&typeof t.serverSelectionTimeoutMS=="number"&&"waitQueueTimeoutMS"in t&&typeof t.waitQueueTimeoutMS=="number"}function mfe(t){return t!=null&&typeof t=="object"&&"serverSelectionTimeoutMS"in t&&typeof t.serverSelectionTimeoutMS=="number"&&"timeoutMS"in t&&typeof t.timeoutMS=="number"}var Dd=class{static create(e){if(e.session?.timeoutContext!=null)return e.session?.timeoutContext;if(mfe(e))return new hy(e);if(ffe(e))return new fy(e);throw new Uu.MongoRuntimeError("Unrecognized options")}};Ps.TimeoutContext=Dd;var hy=class t extends Dd{constructor(e){super(),this.minRoundTripTime=0,this.start=Math.trunc(performance.now()),this.timeoutMS=e.timeoutMS,this.serverSelectionTimeoutMS=e.serverSelectionTimeoutMS,this.socketTimeoutMS=e.socketTimeoutMS,this.clearServerSelectionTimeout=!1}get maxTimeMS(){return this.remainingTimeMS-this.minRoundTripTime}get remainingTimeMS(){let e=Math.trunc(performance.now())-this.start;return this.timeoutMS<=0?1/0:this.timeoutMS-e}csotEnabled(){return!0}get serverSelectionTimeout(){if(typeof this._serverSelectionTimeout!="object"||this._serverSelectionTimeout?.cleared){let{remainingTimeMS:e,serverSelectionTimeoutMS:r}=this;if(e<=0)return Ms.reject(new Uu.MongoOperationTimeoutError(`Timed out in server selection after ${this.timeoutMS}ms`));r!==0&&(0,CO.csotMin)(e,r)===r?this._serverSelectionTimeout=Ms.expires(r):e>0&&Number.isFinite(e)?this._serverSelectionTimeout=Ms.expires(e):this._serverSelectionTimeout=null}return this._serverSelectionTimeout}get connectionCheckoutTimeout(){if(typeof this._connectionCheckoutTimeout!="object"||this._connectionCheckoutTimeout?.cleared)if(typeof this._serverSelectionTimeout=="object")this._connectionCheckoutTimeout=this._serverSelectionTimeout;else throw new Uu.MongoRuntimeError("Unreachable. If you are seeing this error, please file a ticket on the NODE driver project on Jira");return this._connectionCheckoutTimeout}get timeoutForSocketWrite(){let{remainingTimeMS:e}=this;return Number.isFinite(e)?e>0?Ms.expires(e):Ms.reject(new Uu.MongoOperationTimeoutError("Timed out before socket write")):null}get timeoutForSocketRead(){let{remainingTimeMS:e}=this;return Number.isFinite(e)?e>0?Ms.expires(e):Ms.reject(new Uu.MongoOperationTimeoutError("Timed out before socket read")):null}refresh(){this.start=Math.trunc(performance.now()),this.minRoundTripTime=0,this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}clear(){this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}getRemainingTimeMSOrThrow(e){let{remainingTimeMS:r}=this;if(r<=0)throw new Uu.MongoOperationTimeoutError(e??`Expired after ${this.timeoutMS}ms`);return r}clone(){let e=new t({timeoutMS:this.timeoutMS,serverSelectionTimeoutMS:this.serverSelectionTimeoutMS});return e.start=this.start,e}refreshed(){return new t(this)}addMaxTimeMSToCommand(e,r){if(r.omitMaxTimeMS)return;let n=this.remainingTimeMS-this.minRoundTripTime;n>0&&Number.isFinite(n)&&(e.maxTimeMS=n)}getSocketTimeoutMS(){return 0}};Ps.CSOTTimeoutContext=hy;var fy=class t extends Dd{constructor(e){super(),this.options=e,this.clearServerSelectionTimeout=!0}csotEnabled(){return!1}get serverSelectionTimeout(){return this.options.serverSelectionTimeoutMS!=null&&this.options.serverSelectionTimeoutMS>0?Ms.expires(this.options.serverSelectionTimeoutMS):null}get connectionCheckoutTimeout(){return this.options.waitQueueTimeoutMS!=null&&this.options.waitQueueTimeoutMS>0?Ms.expires(this.options.waitQueueTimeoutMS):null}get timeoutForSocketWrite(){return null}get timeoutForSocketRead(){return null}refresh(){}clear(){}get maxTimeMS(){return null}refreshed(){return new t(this.options)}addMaxTimeMSToCommand(e,r){}getSocketTimeoutMS(){return this.options.socketTimeoutMS}};Ps.LegacyTimeoutContext=fy});var Md=m(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.AggregateOperation=Vu.DB_AGGREGATE_COLLECTION=void 0;var vO=ze(),yfe=z(),gfe=hn(),_fe=At(),Ul=Xe();Vu.DB_AGGREGATE_COLLECTION=1;var my=class extends _fe.CommandOperation{constructor(e,r,n){if(super(void 0,{...n,dbName:e.db}),this.SERVER_COMMAND_RESPONSE_TYPE=vO.CursorResponse,this.options={...n},this.target=e.collection||Vu.DB_AGGREGATE_COLLECTION,this.pipeline=r,this.hasWriteStage=!1,typeof n?.out=="string")this.pipeline=this.pipeline.concat({$out:n.out}),this.hasWriteStage=!0;else if(r.length>0){let s=r[r.length-1];(s.$out||s.$merge)&&(this.hasWriteStage=!0)}if(this.hasWriteStage||delete this.options.writeConcern,n?.cursor!=null&&typeof n.cursor!="object")throw new yfe.MongoInvalidArgumentError("Cursor options must be an object");this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?vO.ExplainedCursorResponse:vO.CursorResponse}get commandName(){return"aggregate"}get canRetryRead(){return!this.hasWriteStage}addToPipeline(e){this.pipeline.push(e)}buildCommandDocument(){let e=this.options,r={aggregate:this.target,pipeline:this.pipeline};return this.hasWriteStage&&this.writeConcern&&gfe.WriteConcern.apply(r,this.writeConcern),e.bypassDocumentValidation===!0&&(r.bypassDocumentValidation=e.bypassDocumentValidation),typeof e.allowDiskUse=="boolean"&&(r.allowDiskUse=e.allowDiskUse),e.hint&&(r.hint=e.hint),e.let&&(r.let=e.let),e.comment!==void 0&&(r.comment=e.comment),r.cursor=e.cursor||{},e.batchSize&&!this.hasWriteStage&&(r.cursor.batchSize=e.batchSize),r}handleOk(e){return e}};Vu.AggregateOperation=my;(0,Ul.defineAspects)(my,[Ul.Aspect.READ_OPERATION,Ul.Aspect.RETRYABLE,Ul.Aspect.EXPLAINABLE,Ul.Aspect.CURSOR_CREATING,Ul.Aspect.SUPPORTS_RAW_DATA])});var Er=m(gy=>{"use strict";Object.defineProperty(gy,"__esModule",{value:!0});gy.executeOperation=Afe;gy.autoConnect=AR;var Efe=Eo(),Qr=z(),bR=sr(),wR=xd(),bfe=ir(),yy=X(),wfe=Md(),So=Xe(),Sfe=Qr.MONGODB_ERROR_CODES.IllegalOperation,SR="This MongoDB deployment does not support retryable writes. Please add retryWrites=false to your connection string.";async function Afe(t,e,r){if(!(e instanceof So.AbstractOperation))throw new Qr.MongoRuntimeError("This method requires a valid operation instance");let n=t.topology==null?await(0,yy.abortable)(AR(t),e.options):t.topology,s=e.session,i;if(s==null)i=Symbol(),s=t.startSession({owner:i,explicit:!1});else{if(s.hasEnded)throw new Qr.MongoExpiredSessionError("Use of expired sessions is not permitted");if(s.snapshotEnabled&&(0,yy.maxWireVersion)(n)<Efe.MIN_SUPPORTED_SNAPSHOT_READS_WIRE_VERSION)throw new Qr.MongoCompatibilityError("Snapshot reads require MongoDB 5.0 or later");if(s.client!==t)throw new Qr.MongoInvalidArgumentError("ClientSession must be from the same MongoClient")}e.session??=s;let o=e.readPreference??bR.ReadPreference.primary,a=!!s?.inTransaction(),u=e.hasAspect(So.Aspect.READ_OPERATION);if(a&&!o.equals(bR.ReadPreference.primary)&&(u||e.commandName==="runCommand"))throw new Qr.MongoTransactionError(`Read preference in a transaction must be primary, not: ${o.mode}`);s?.isPinned&&s.transaction.isCommitted&&!e.bypassPinningCheck&&s.unpin(),r??=bfe.TimeoutContext.create({session:s,serverSelectionTimeoutMS:t.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:t.s.options.waitQueueTimeoutMS,timeoutMS:e.options.timeoutMS});try{return await Ofe(e,{topology:n,timeoutContext:r,session:s,readPreference:o})}finally{s?.owner!=null&&s.owner===i&&await s.endSession()}}async function AR(t){if(t.topology==null){if(t.s.hasBeenClosed)throw new Qr.MongoNotConnectedError("Client must be connected before running operations");t.s.options.__skipPingOnConnect=!0;try{if(await t.connect(),t.topology==null)throw new Qr.MongoRuntimeError("client.connect did not create a topology but also did not throw");return t.topology}finally{delete t.s.options.__skipPingOnConnect}}return t.topology}async function Ofe(t,{topology:e,timeoutContext:r,session:n,readPreference:s}){let i;t.hasAspect(So.Aspect.MUST_SELECT_SAME_SERVER)?i=(0,wR.sameServerSelector)(t.server?.description):t instanceof wfe.AggregateOperation&&t.hasWriteStage?i=(0,wR.secondaryWritableServerSelector)(e.commonWireVersion,s):i=s;let o=await e.selectServer(i,{session:n,operationName:t.commandName,timeoutContext:r,signal:t.options.signal}),a=t.hasAspect(So.Aspect.READ_OPERATION),u=t.hasAspect(So.Aspect.WRITE_OPERATION),c=n?.inTransaction()??!1,l=e.s.options.retryReads&&!c&&t.canRetryRead,p=e.s.options.retryWrites&&!c&&(0,yy.supportsRetryableWrites)(o)&&t.canRetryWrite,d=t.hasAspect(So.Aspect.RETRYABLE)&&n!=null&&(a&&l||u&&p);u&&p&&n!=null&&(t.options.willRetryWrite=!0,n.incrementTransactionNumber());let h=d?r.csotEnabled()?1/0:2:1,f,y;for(let g=0;g<h;g++){if(f){if(u&&f.code===Sfe)throw new Qr.MongoServerError({message:SR,errmsg:SR,originalError:f});if(t.hasAspect(So.Aspect.COMMAND_BATCHING)&&!t.canRetryWrite||u&&!(0,Qr.isRetryableWriteError)(f)||a&&!(0,Qr.isRetryableReadError)(f))throw f;if(f instanceof Qr.MongoNetworkError&&t.hasAspect(So.Aspect.CURSOR_CREATING)&&n!=null&&n.isPinned&&!n.inTransaction()&&n.unpin({force:!0,forceClear:!0}),o=await e.selectServer(i,{session:n,operationName:t.commandName,previousServer:y,signal:t.options.signal}),u&&!(0,yy.supportsRetryableWrites)(o))throw new Qr.MongoUnexpectedServerResponseError("Selected server does not support retryable writes")}t.server=o;try{g>0&&t.hasAspect(So.Aspect.COMMAND_BATCHING)&&t.resetBatch();try{let _=await o.command(t,r);return t.handleOk(_)}catch(_){return t.handleError(_)}}catch(_){if(!(_ instanceof Qr.MongoError))throw _;if(f!=null&&_.hasErrorLabel(Qr.MongoErrorLabel.NoWritesPerformed))throw f;y=o.description,f=_,r.clear()}}throw f??new Qr.MongoRuntimeError("Tried to propagate retryability error, but no error was found.")}});var xO=m(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});Vl.InsertOneOperation=Vl.InsertOperation=void 0;var Cfe=ze(),OR=z(),vfe=X(),xfe=At(),xa=Xe(),Pd=class extends xfe.CommandOperation{constructor(e,r,n){super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=Cfe.MongoDBResponse,this.options={...n,checkKeys:n.checkKeys??!1},this.ns=e,this.documents=r}get commandName(){return"insert"}buildCommandDocument(e,r){let n=this.options??{},s=typeof n.ordered=="boolean"?n.ordered:!0,i={insert:this.ns.collection,documents:this.documents,ordered:s};return typeof n.bypassDocumentValidation=="boolean"&&(i.bypassDocumentValidation=n.bypassDocumentValidation),n.comment!==void 0&&(i.comment=n.comment),i}};Vl.InsertOperation=Pd;var _y=class extends Pd{constructor(e,r,n){super(e.s.namespace,[(0,vfe.maybeAddIdToDocuments)(e,r,n)],n)}handleOk(e){let r=super.handleOk(e);if(r.code)throw new OR.MongoServerError(r);if(r.writeErrors)throw new OR.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,insertedId:this.documents[0]._id}}};Vl.InsertOneOperation=_y;(0,xa.defineAspects)(Pd,[xa.Aspect.RETRYABLE,xa.Aspect.WRITE_OPERATION,xa.Aspect.SUPPORTS_RAW_DATA]);(0,xa.defineAspects)(_y,[xa.Aspect.RETRYABLE,xa.Aspect.WRITE_OPERATION,xa.Aspect.SUPPORTS_RAW_DATA])});var zl=m(TO=>{"use strict";Object.defineProperty(TO,"__esModule",{value:!0});TO.formatSort=$fe;var CR=z();function Wl(t=1){let e=`${t}`.toLowerCase();if(Tfe(t))return t;switch(e){case"ascending":case"asc":case"1":return 1;case"descending":case"desc":case"-1":return-1;default:throw new CR.MongoInvalidArgumentError(`Invalid sort direction: ${JSON.stringify(t)}`)}}function Tfe(t){return typeof t=="object"&&t!=null&&"$meta"in t&&typeof t.$meta=="string"}function Dfe(t){if(Array.isArray(t)&&t.length===2)try{return Wl(t[1]),!0}catch{return!1}return!1}function Mfe(t){return Array.isArray(t)&&Array.isArray(t[0])}function Pfe(t){return t instanceof Map&&t.size>0}function Bfe(t){return Array.isArray(t)}function Ife(t){return new Map([[`${t[0]}`,Wl([t[1]])]])}function Nfe(t){let e=t.map(([r,n])=>[`${r}`,Wl(n)]);return new Map(e)}function kfe(t){let e=t.map(r=>[`${r}`,1]);return new Map(e)}function Rfe(t){let e=Object.entries(t).map(([r,n])=>[`${r}`,Wl(n)]);return new Map(e)}function Ffe(t){let e=Array.from(t).map(([r,n])=>[`${r}`,Wl(n)]);return new Map(e)}function $fe(t,e){if(t!=null){if(typeof t=="string")return new Map([[t,Wl(e)]]);if(typeof t!="object")throw new CR.MongoInvalidArgumentError(`Invalid sort format: ${JSON.stringify(t)} Sort must be a valid object`);if(!Bfe(t))return Pfe(t)?Ffe(t):Object.keys(t).length?Rfe(t):void 0;if(t.length)return Mfe(t)?Nfe(t):Dfe(t)?Ife(t):kfe(t)}}});var MO=m(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.ReplaceOneOperation=oi.UpdateManyOperation=oi.UpdateOneOperation=oi.UpdateOperation=void 0;oi.makeUpdateStatement=Sy;var qfe=ze(),ai=z(),jfe=zl(),DO=X(),Lfe=At(),Ut=Xe(),Wu=class extends Lfe.CommandOperation{constructor(e,r,n){super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=qfe.MongoDBResponse,this.options=n,this.ns=e,this.statements=r}get commandName(){return"update"}get canRetryWrite(){return super.canRetryWrite===!1?!1:this.statements.every(e=>e.multi==null||e.multi===!1)}buildCommandDocument(e,r){let n=this.options,s={update:this.ns.collection,updates:this.statements,ordered:n.ordered??!0};return typeof n.bypassDocumentValidation=="boolean"&&(s.bypassDocumentValidation=n.bypassDocumentValidation),n.let&&(s.let=n.let),n.comment!==void 0&&(s.comment=n.comment),s}};oi.UpdateOperation=Wu;var Ey=class extends Wu{constructor(e,r,n,s){if(super(e,[Sy(r,n,{...s,multi:!1})],s),!(0,DO.hasAtomicOperators)(n,s))throw new ai.MongoInvalidArgumentError("Update document requires atomic operators")}handleOk(e){let r=super.handleOk(e);if(this.explain!=null)return r;if(r.code)throw new ai.MongoServerError(r);if(r.writeErrors)throw new ai.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:r.nModified??r.n,upsertedId:Array.isArray(r.upserted)&&r.upserted.length>0?r.upserted[0]._id:null,upsertedCount:Array.isArray(r.upserted)&&r.upserted.length?r.upserted.length:0,matchedCount:Array.isArray(r.upserted)&&r.upserted.length>0?0:r.n}}};oi.UpdateOneOperation=Ey;var by=class extends Wu{constructor(e,r,n,s){if(super(e,[Sy(r,n,{...s,multi:!0})],s),!(0,DO.hasAtomicOperators)(n,s))throw new ai.MongoInvalidArgumentError("Update document requires atomic operators")}handleOk(e){let r=super.handleOk(e);if(this.explain!=null)return r;if(r.code)throw new ai.MongoServerError(r);if(r.writeErrors)throw new ai.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:r.nModified??r.n,upsertedId:Array.isArray(r.upserted)&&r.upserted.length>0?r.upserted[0]._id:null,upsertedCount:Array.isArray(r.upserted)&&r.upserted.length?r.upserted.length:0,matchedCount:Array.isArray(r.upserted)&&r.upserted.length>0?0:r.n}}};oi.UpdateManyOperation=by;var wy=class extends Wu{constructor(e,r,n,s){if(super(e,[Sy(r,n,{...s,multi:!1})],s),(0,DO.hasAtomicOperators)(n))throw new ai.MongoInvalidArgumentError("Replacement document must not contain atomic operators")}handleOk(e){let r=super.handleOk(e);if(this.explain!=null)return r;if(r.code)throw new ai.MongoServerError(r);if(r.writeErrors)throw new ai.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:r.nModified??r.n,upsertedId:Array.isArray(r.upserted)&&r.upserted.length>0?r.upserted[0]._id:null,upsertedCount:Array.isArray(r.upserted)&&r.upserted.length?r.upserted.length:0,matchedCount:Array.isArray(r.upserted)&&r.upserted.length>0?0:r.n}}};oi.ReplaceOneOperation=wy;function Sy(t,e,r){if(t==null||typeof t!="object")throw new ai.MongoInvalidArgumentError("Selector must be a valid JavaScript object");if(e==null||typeof e!="object")throw new ai.MongoInvalidArgumentError("Document must be a valid JavaScript object");let n={q:t,u:e};return typeof r.upsert=="boolean"&&(n.upsert=r.upsert),r.multi&&(n.multi=r.multi),r.hint&&(n.hint=r.hint),r.arrayFilters&&(n.arrayFilters=r.arrayFilters),r.collation&&(n.collation=r.collation),!r.multi&&r.sort!=null&&(n.sort=(0,jfe.formatSort)(r.sort)),n}(0,Ut.defineAspects)(Wu,[Ut.Aspect.RETRYABLE,Ut.Aspect.WRITE_OPERATION,Ut.Aspect.SKIP_COLLATION,Ut.Aspect.SUPPORTS_RAW_DATA]);(0,Ut.defineAspects)(Ey,[Ut.Aspect.RETRYABLE,Ut.Aspect.WRITE_OPERATION,Ut.Aspect.EXPLAINABLE,Ut.Aspect.SKIP_COLLATION,Ut.Aspect.SUPPORTS_RAW_DATA]);(0,Ut.defineAspects)(by,[Ut.Aspect.WRITE_OPERATION,Ut.Aspect.EXPLAINABLE,Ut.Aspect.SKIP_COLLATION,Ut.Aspect.SUPPORTS_RAW_DATA]);(0,Ut.defineAspects)(wy,[Ut.Aspect.RETRYABLE,Ut.Aspect.WRITE_OPERATION,Ut.Aspect.SKIP_COLLATION,Ut.Aspect.SUPPORTS_RAW_DATA])});var Hl=m($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.BulkOperationBase=$e.FindOperators=$e.MongoBulkWriteError=$e.WriteError=$e.WriteConcernError=$e.BulkWriteResult=$e.Batch=$e.BatchType=void 0;$e.mergeBatchResults=BO;var TR=pe(),or=z(),Id=SO(),Ufe=Er(),Vfe=xO(),zu=MO(),Wfe=ir(),Li=X(),vR=hn();$e.BatchType=Object.freeze({INSERT:1,UPDATE:2,DELETE:3});var PO=class{constructor(e,r){this.originalZeroIndex=r,this.currentIndex=0,this.originalIndexes=[],this.batchType=e,this.operations=[],this.size=0,this.sizeBytes=0}};$e.Batch=PO;var Ta=class t{static generateIdMap(e){let r={};for(let n of e)r[n.index]=n._id;return r}constructor(e,r){this.result=e,this.insertedCount=this.result.nInserted??0,this.matchedCount=this.result.nMatched??0,this.modifiedCount=this.result.nModified??0,this.deletedCount=this.result.nRemoved??0,this.upsertedCount=this.result.upserted.length??0,this.upsertedIds=t.generateIdMap(this.result.upserted),this.insertedIds=t.generateIdMap(this.getSuccessfullyInsertedIds(e,r)),Object.defineProperty(this,"result",{value:this.result,enumerable:!1})}get ok(){return this.result.ok}getSuccessfullyInsertedIds(e,r){return e.writeErrors.length===0?e.insertedIds:r?e.insertedIds.slice(0,e.writeErrors[0].index):e.insertedIds.filter(({index:n})=>!e.writeErrors.some(s=>n===s.index))}getUpsertedIdAt(e){return this.result.upserted[e]}getRawResponse(){return this.result}hasWriteErrors(){return this.result.writeErrors.length>0}getWriteErrorCount(){return this.result.writeErrors.length}getWriteErrorAt(e){return e<this.result.writeErrors.length?this.result.writeErrors[e]:void 0}getWriteErrors(){return this.result.writeErrors}getWriteConcernError(){if(this.result.writeConcernErrors.length!==0){if(this.result.writeConcernErrors.length===1)return this.result.writeConcernErrors[0];{let e="";for(let r=0;r<this.result.writeConcernErrors.length;r++){let n=this.result.writeConcernErrors[r];e=e+n.errmsg,r===0&&(e=e+" and ")}return new Kl({errmsg:e,code:or.MONGODB_ERROR_CODES.WriteConcernTimeout})}}}toString(){return`BulkWriteResult(${TR.EJSON.stringify(this.result)})`}isOk(){return this.result.ok===1}};$e.BulkWriteResult=Ta;var Kl=class{constructor(e){this.serverError=e}get code(){return this.serverError.code}get errmsg(){return this.serverError.errmsg}get errInfo(){return this.serverError.errInfo}toJSON(){return this.serverError}toString(){return`WriteConcernError(${this.errmsg})`}};$e.WriteConcernError=Kl;var Nd=class{constructor(e){this.err=e}get code(){return this.err.code}get index(){return this.err.index}get errmsg(){return this.err.errmsg}get errInfo(){return this.err.errInfo}getOperation(){return this.err.op}toJSON(){return{code:this.err.code,index:this.err.index,errmsg:this.err.errmsg,op:this.err.op}}toString(){return`WriteError(${JSON.stringify(this.toJSON())})`}};$e.WriteError=Nd;function BO(t,e,r,n){if(r?n=r:n&&n.result&&(n=n.result),n==null)return;if(n.ok===0&&e.ok===1){e.ok=0;let i={index:0,code:n.code||0,errmsg:n.message,errInfo:n.errInfo,op:t.operations[0]};e.writeErrors.push(new Nd(i));return}else if(n.ok===0&&e.ok===0)return;DR(t)&&n.n&&(e.nInserted=e.nInserted+n.n),kO(t)&&n.n&&(e.nRemoved=e.nRemoved+n.n);let s=0;if(Array.isArray(n.upserted)){s=n.upserted.length;for(let i=0;i<n.upserted.length;i++)e.upserted.push({index:n.upserted[i].index+t.originalZeroIndex,_id:n.upserted[i]._id})}else n.upserted&&(s=1,e.upserted.push({index:t.originalZeroIndex,_id:n.upserted}));if(NO(t)&&n.n){let i=n.nModified;e.nUpserted=e.nUpserted+s,e.nMatched=e.nMatched+(n.n-s),typeof i=="number"?e.nModified=e.nModified+i:e.nModified=0}if(Array.isArray(n.writeErrors))for(let i=0;i<n.writeErrors.length;i++){let o={index:t.originalIndexes[n.writeErrors[i].index],code:n.writeErrors[i].code,errmsg:n.writeErrors[i].errmsg,errInfo:n.writeErrors[i].errInfo,op:t.operations[n.writeErrors[i].index]};e.writeErrors.push(new Nd(o))}n.writeConcernError&&e.writeConcernErrors.push(new Kl(n.writeConcernError))}async function xR(t,e){if(t.s.batches.length===0)return new Ta(t.s.bulkResult,t.isOrdered);for(let n of t.s.batches){let s=(0,Li.resolveOptions)(t,{...e,ordered:t.isOrdered});s.bypassDocumentValidation!==!0&&delete s.bypassDocumentValidation,t.s.bypassDocumentValidation===!0&&(s.bypassDocumentValidation=!0),t.s.checkKeys===!1&&(s.checkKeys=!1),t.retryWrites&&(NO(n)&&(t.retryWrites=t.retryWrites&&!n.operations.some(c=>c.multi)),kO(n)&&(t.retryWrites=t.retryWrites&&!n.operations.some(c=>c.limit===0)));let i=DR(n)?new Vfe.InsertOperation(t.s.namespace,n.operations,s):NO(n)?new zu.UpdateOperation(t.s.namespace,n.operations,s):kO(n)?new Id.DeleteOperation(t.s.namespace,n.operations,s):null;if(i==null)throw new or.MongoRuntimeError(`Unknown batchType: ${n.batchType}`);let o=null,a;try{a=await(0,Ufe.executeOperation)(t.s.collection.client,i,s.timeoutContext)}catch(c){o=c}if(o!=null)if(o instanceof or.MongoWriteConcernError){BO(n,t.s.bulkResult,o,a);let c=new Ta(t.s.bulkResult,t.isOrdered);throw new Ku({message:o.result.writeConcernError.errmsg,code:o.result.writeConcernError.code},c)}else throw new Ku(o,new Ta(t.s.bulkResult,t.isOrdered));BO(n,t.s.bulkResult,o,a);let u=new Ta(t.s.bulkResult,t.isOrdered);t.handleWriteError(u)}t.s.batches.length=0;let r=new Ta(t.s.bulkResult,t.isOrdered);return t.handleWriteError(r),r}var Ku=class extends or.MongoServerError{constructor(e,r){super(e),this.writeErrors=[],e instanceof Kl?this.err=e:e instanceof Error||(this.message=e.message,this.code=e.code,this.writeErrors=e.writeErrors??[]),this.result=r,Object.assign(this,e)}get name(){return"MongoBulkWriteError"}get insertedCount(){return this.result.insertedCount}get matchedCount(){return this.result.matchedCount}get modifiedCount(){return this.result.modifiedCount}get deletedCount(){return this.result.deletedCount}get upsertedCount(){return this.result.upsertedCount}get insertedIds(){return this.result.insertedIds}get upsertedIds(){return this.result.upsertedIds}};$e.MongoBulkWriteError=Ku;var Ay=class{constructor(e){this.bulkOperation=e}update(e){let r=Bd(this.bulkOperation);return this.bulkOperation.addToOperationsList($e.BatchType.UPDATE,(0,zu.makeUpdateStatement)(r.selector,e,{...r,multi:!0}))}updateOne(e){if(!(0,Li.hasAtomicOperators)(e,this.bulkOperation.bsonOptions))throw new or.MongoInvalidArgumentError("Update document requires atomic operators");let r=Bd(this.bulkOperation);return this.bulkOperation.addToOperationsList($e.BatchType.UPDATE,(0,zu.makeUpdateStatement)(r.selector,e,{...r,multi:!1}))}replaceOne(e){if((0,Li.hasAtomicOperators)(e))throw new or.MongoInvalidArgumentError("Replacement document must not use atomic operators");let r=Bd(this.bulkOperation);return this.bulkOperation.addToOperationsList($e.BatchType.UPDATE,(0,zu.makeUpdateStatement)(r.selector,e,{...r,multi:!1}))}deleteOne(){let e=Bd(this.bulkOperation);return this.bulkOperation.addToOperationsList($e.BatchType.DELETE,(0,Id.makeDeleteStatement)(e.selector,{...e,limit:1}))}delete(){let e=Bd(this.bulkOperation);return this.bulkOperation.addToOperationsList($e.BatchType.DELETE,(0,Id.makeDeleteStatement)(e.selector,{...e,limit:0}))}upsert(){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.upsert=!0,this}collation(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.collation=e,this}arrayFilters(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.arrayFilters=e,this}hint(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.hint=e,this}};$e.FindOperators=Ay;var IO=class{constructor(e,r,n){this.collection=e,this.retryWrites=e.db.options?.retryWrites,this.isOrdered=n;let s=(0,Li.getTopology)(e);r=r??{};let i=e.s.namespace,o=!1,a=void 0,u=s.lastHello(),c=!!(s.s.options&&s.s.options.autoEncrypter),l=u&&u.maxBsonObjectSize?u.maxBsonObjectSize:1024*1024*16,p=c?1024*1024*2:l,d=u&&u.maxWriteBatchSize?u.maxWriteBatchSize:1e3,h=(d-1).toString(10).length+2,f={ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]};this.s={bulkResult:f,currentBatch:void 0,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,currentInsertBatch:void 0,currentUpdateBatch:void 0,currentRemoveBatch:void 0,batches:[],writeConcern:vR.WriteConcern.fromOptions(r),maxBsonObjectSize:l,maxBatchSizeBytes:p,maxWriteBatchSize:d,maxKeySize:h,namespace:i,topology:s,options:r,bsonOptions:(0,TR.resolveBSONOptions)(r),currentOp:a,executed:o,collection:e,err:void 0,checkKeys:typeof r.checkKeys=="boolean"?r.checkKeys:!1},r.bypassDocumentValidation===!0&&(this.s.bypassDocumentValidation=!0)}insert(e){return(0,Li.maybeAddIdToDocuments)(this.collection,e,{forceServerObjectId:this.shouldForceServerObjectId()}),this.addToOperationsList($e.BatchType.INSERT,e)}find(e){if(!e)throw new or.MongoInvalidArgumentError("Bulk find operation must specify a selector");return this.s.currentOp={selector:e},new Ay(this)}raw(e){if(e==null||typeof e!="object")throw new or.MongoInvalidArgumentError("Operation must be an object with an operation key");if("insertOne"in e){let r=this.shouldForceServerObjectId(),n=e.insertOne&&e.insertOne.document==null?e.insertOne:e.insertOne.document;return(0,Li.maybeAddIdToDocuments)(this.collection,n,{forceServerObjectId:r}),this.addToOperationsList($e.BatchType.INSERT,n)}if("replaceOne"in e||"updateOne"in e||"updateMany"in e){if("replaceOne"in e){if("q"in e.replaceOne)throw new or.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,zu.makeUpdateStatement)(e.replaceOne.filter,e.replaceOne.replacement,{...e.replaceOne,multi:!1});if((0,Li.hasAtomicOperators)(r.u))throw new or.MongoInvalidArgumentError("Replacement document must not use atomic operators");return this.addToOperationsList($e.BatchType.UPDATE,r)}if("updateOne"in e){if("q"in e.updateOne)throw new or.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,zu.makeUpdateStatement)(e.updateOne.filter,e.updateOne.update,{...e.updateOne,multi:!1});if(!(0,Li.hasAtomicOperators)(r.u,this.bsonOptions))throw new or.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList($e.BatchType.UPDATE,r)}if("updateMany"in e){if("q"in e.updateMany)throw new or.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,zu.makeUpdateStatement)(e.updateMany.filter,e.updateMany.update,{...e.updateMany,multi:!0});if(!(0,Li.hasAtomicOperators)(r.u,this.bsonOptions))throw new or.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList($e.BatchType.UPDATE,r)}}if("deleteOne"in e){if("q"in e.deleteOne)throw new or.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList($e.BatchType.DELETE,(0,Id.makeDeleteStatement)(e.deleteOne.filter,{...e.deleteOne,limit:1}))}if("deleteMany"in e){if("q"in e.deleteMany)throw new or.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList($e.BatchType.DELETE,(0,Id.makeDeleteStatement)(e.deleteMany.filter,{...e.deleteMany,limit:0}))}throw new or.MongoInvalidArgumentError("bulkWrite only supports insertOne, updateOne, updateMany, deleteOne, deleteMany")}get length(){return this.s.currentIndex}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get batches(){let e=[...this.s.batches];return this.isOrdered?this.s.currentBatch&&e.push(this.s.currentBatch):(this.s.currentInsertBatch&&e.push(this.s.currentInsertBatch),this.s.currentUpdateBatch&&e.push(this.s.currentUpdateBatch),this.s.currentRemoveBatch&&e.push(this.s.currentRemoveBatch)),e}async execute(e={}){if(this.s.executed)throw new or.MongoBatchReExecutionError;let r=vR.WriteConcern.fromOptions(e);if(r&&(this.s.writeConcern=r),this.isOrdered?this.s.currentBatch&&this.s.batches.push(this.s.currentBatch):(this.s.currentInsertBatch&&this.s.batches.push(this.s.currentInsertBatch),this.s.currentUpdateBatch&&this.s.batches.push(this.s.currentUpdateBatch),this.s.currentRemoveBatch&&this.s.batches.push(this.s.currentRemoveBatch)),this.s.batches.length===0)throw new or.MongoInvalidArgumentError("Invalid BulkOperation, Batch cannot be empty");this.s.executed=!0;let n=(0,Li.resolveOptions)(this.collection,{...this.s.options,...e});return n.timeoutContext??=Wfe.TimeoutContext.create({session:n.session,timeoutMS:n.timeoutMS,serverSelectionTimeoutMS:this.collection.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:this.collection.client.s.options.waitQueueTimeoutMS}),n.session==null?await this.collection.client.withSession({explicit:!1},async s=>await xR(this,{...n,session:s})):await xR(this,{...n})}handleWriteError(e){if(this.s.bulkResult.writeErrors.length>0){let n=this.s.bulkResult.writeErrors[0].errmsg?this.s.bulkResult.writeErrors[0].errmsg:"write operation failed";throw new Ku({message:n,code:this.s.bulkResult.writeErrors[0].code,writeErrors:this.s.bulkResult.writeErrors},e)}let r=e.getWriteConcernError();if(r)throw new Ku(r,e)}shouldForceServerObjectId(){return this.s.options.forceServerObjectId===!0||this.s.collection.db.options?.forceServerObjectId===!0}};$e.BulkOperationBase=IO;function DR(t){return t.batchType===$e.BatchType.INSERT}function NO(t){return t.batchType===$e.BatchType.UPDATE}function kO(t){return t.batchType===$e.BatchType.DELETE}function Bd(t){let{currentOp:e}=t.s;return t.s.currentOp=void 0,e||(e={}),e}});var PR=m((HIe,MR)=>{"use strict";var zfe=Hl().BulkWriteResult;MR.exports=zfe});var kd=m((FR,$R)=>{"use strict";var Ui=$R.exports=FR=Object.create(null),BR="disconnected",IR="connected",NR="connecting",kR="disconnecting",RR="uninitialized";Ui[0]=BR;Ui[1]=IR;Ui[2]=NR;Ui[3]=kR;Ui[99]=RR;Ui[BR]=0;Ui[IR]=1;Ui[NR]=2;Ui[kR]=3;Ui[RR]=99});var Da=m((GIe,qR)=>{"use strict";var Kfe=typeof process<"u"&&typeof process.nextTick=="function"?process.nextTick.bind(process):t=>setTimeout(t,0);qR.exports=function(e){return Kfe(e)}});var RO=m((JIe,LR)=>{"use strict";var Hfe=require("events").EventEmitter,Gfe=kd(),jR=Da();function Ke(t,e,r){r===void 0&&(r={}),this.opts=r,this.name=t,this.collectionName=t,this.conn=e,this.queue=[],this.buffer=!e?._hasOpened,this.emitter=new Hfe,Gfe.connected===this.conn.readyState&&this.onOpen()}Ke.prototype.name;Ke.prototype.collectionName;Ke.prototype.conn;Ke.prototype.onOpen=function(){this.buffer=!1,jR(()=>this.doQueue())};Ke.prototype.onClose=function(){};Ke.prototype.addQueue=function(t,e){return this.queue.push([t,e]),this};Ke.prototype.removeQueue=function(t,e){let r=this.queue.findIndex(n=>n[0]===t&&n[1]===e);return r===-1?!1:(this.queue.splice(r,1),!0)};Ke.prototype.doQueue=function(){for(let e of this.queue)typeof e[0]=="function"?e[0].apply(this,e[1]):this[e[0]].apply(this,e[1]);this.queue=[];let t=this;return jR(function(){t.emitter.emit("queue")}),this};Ke.prototype.ensureIndex=function(){throw new Error("Collection#ensureIndex unimplemented by driver")};Ke.prototype.createIndex=function(){throw new Error("Collection#createIndex unimplemented by driver")};Ke.prototype.findAndModify=function(){throw new Error("Collection#findAndModify unimplemented by driver")};Ke.prototype.findOneAndUpdate=function(){throw new Error("Collection#findOneAndUpdate unimplemented by driver")};Ke.prototype.findOneAndDelete=function(){throw new Error("Collection#findOneAndDelete unimplemented by driver")};Ke.prototype.findOneAndReplace=function(){throw new Error("Collection#findOneAndReplace unimplemented by driver")};Ke.prototype.findOne=function(){throw new Error("Collection#findOne unimplemented by driver")};Ke.prototype.find=function(){throw new Error("Collection#find unimplemented by driver")};Ke.prototype.insert=function(){throw new Error("Collection#insert unimplemented by driver")};Ke.prototype.insertOne=function(){throw new Error("Collection#insertOne unimplemented by driver")};Ke.prototype.insertMany=function(){throw new Error("Collection#insertMany unimplemented by driver")};Ke.prototype.save=function(){throw new Error("Collection#save unimplemented by driver")};Ke.prototype.updateOne=function(){throw new Error("Collection#updateOne unimplemented by driver")};Ke.prototype.updateMany=function(){throw new Error("Collection#updateMany unimplemented by driver")};Ke.prototype.deleteOne=function(){throw new Error("Collection#deleteOne unimplemented by driver")};Ke.prototype.deleteMany=function(){throw new Error("Collection#deleteMany unimplemented by driver")};Ke.prototype.getIndexes=function(){throw new Error("Collection#getIndexes unimplemented by driver")};Ke.prototype.watch=function(){throw new Error("Collection#watch unimplemented by driver")};Ke.prototype._shouldBufferCommands=function(){let e=this.opts;return e.bufferCommands!=null?e.bufferCommands:e?.schemaUserProvidedOptions?.bufferCommands!=null?e.schemaUserProvidedOptions.bufferCommands:this.conn._shouldBufferCommands()};Ke.prototype._getBufferTimeoutMS=function(){let e=this.conn,r=this.opts;return r.bufferTimeoutMS!=null?r.bufferTimeoutMS:r?.schemaUserProvidedOptions?.bufferTimeoutMS!=null?r.schemaUserProvidedOptions.bufferTimeoutMS:e._getBufferTimeoutMS()};LR.exports=Ke});var we=m((YIe,UR)=>{"use strict";var Oy=class extends Error{};Object.defineProperty(Oy.prototype,"name",{value:"MongooseError"});UR.exports=Oy});var WR=m(vy=>{"use strict";Object.defineProperty(vy,"__esModule",{value:!0});vy.ListDatabasesOperation=void 0;var Jfe=ze(),VR=X(),Yfe=At(),FO=Xe(),Cy=class extends Yfe.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=Jfe.MongoDBResponse,this.options=r??{},this.ns=new VR.MongoDBNamespace("admin","$cmd")}get commandName(){return"listDatabases"}buildCommandDocument(e,r){let n={listDatabases:1};return typeof this.options.nameOnly=="boolean"&&(n.nameOnly=this.options.nameOnly),this.options.filter&&(n.filter=this.options.filter),typeof this.options.authorizedDatabases=="boolean"&&(n.authorizedDatabases=this.options.authorizedDatabases),(0,VR.maxWireVersion)(e)>=9&&this.options.comment!==void 0&&(n.comment=this.options.comment),n}};vy.ListDatabasesOperation=Cy;(0,FO.defineAspects)(Cy,[FO.Aspect.READ_OPERATION,FO.Aspect.RETRYABLE])});var $O=m(Ty=>{"use strict";Object.defineProperty(Ty,"__esModule",{value:!0});Ty.RemoveUserOperation=void 0;var Qfe=ze(),Xfe=At(),zR=Xe(),xy=class extends Xfe.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=Qfe.MongoDBResponse,this.options=n,this.username=r}get commandName(){return"dropUser"}buildCommandDocument(e){return{dropUser:this.username}}handleOk(e){return!0}};Ty.RemoveUserOperation=xy;(0,zR.defineAspects)(xy,[zR.Aspect.WRITE_OPERATION])});var Rd=m(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});Gl.RunCursorCommandOperation=Gl.RunCommandOperation=void 0;var KR=ze(),Zfe=Xe(),Dy=class extends Zfe.AbstractOperation{constructor(e,r,n){super(n),this.SERVER_COMMAND_RESPONSE_TYPE=KR.MongoDBResponse,this.command=r,this.options=n,this.ns=e.withCollection("$cmd")}get commandName(){return"runCommand"}buildCommand(e,r){return this.command}buildOptions(e){return{...this.options,session:this.session,timeoutContext:e,signal:this.options.signal,readPreference:this.options.readPreference}}};Gl.RunCommandOperation=Dy;var qO=class extends Dy{constructor(){super(...arguments),this.SERVER_COMMAND_RESPONSE_TYPE=KR.CursorResponse}handleOk(e){return e}};Gl.RunCursorCommandOperation=qO});var HR=m(My=>{"use strict";Object.defineProperty(My,"__esModule",{value:!0});My.ValidateCollectionOperation=void 0;var eme=ze(),jO=z(),tme=At(),LO=class extends tme.CommandOperation{constructor(e,r,n){super(e.s.db,n),this.SERVER_COMMAND_RESPONSE_TYPE=eme.MongoDBResponse,this.options=n,this.collectionName=r}get commandName(){return"validate"}buildCommandDocument(e,r){return{validate:this.collectionName,...Object.fromEntries(Object.entries(this.options).filter(n=>n[0]!=="session"))}}handleOk(e){let r=super.handleOk(e);if(r.result!=null&&typeof r.result!="string")throw new jO.MongoUnexpectedServerResponseError("Error with validation data");if(r.result!=null&&r.result.match(/exception|corrupt/)!=null)throw new jO.MongoUnexpectedServerResponseError(`Invalid collection ${this.collectionName}`);if(r.valid!=null&&!r.valid)throw new jO.MongoUnexpectedServerResponseError(`Invalid collection ${this.collectionName}`);return e}};My.ValidateCollectionOperation=LO});var VO=m(By=>{"use strict";Object.defineProperty(By,"__esModule",{value:!0});By.Admin=void 0;var rme=pe(),Py=Er(),nme=WR(),sme=$O(),ime=Rd(),ome=HR(),ame=X(),UO=class{constructor(e){this.s={db:e}}async command(e,r){return await(0,Py.executeOperation)(this.s.db.client,new ime.RunCommandOperation(new ame.MongoDBNamespace("admin"),e,{...(0,rme.resolveBSONOptions)(r),session:r?.session,readPreference:r?.readPreference,timeoutMS:r?.timeoutMS??this.s.db.timeoutMS}))}async buildInfo(e){return await this.command({buildinfo:1},e)}async serverInfo(e){return await this.command({buildinfo:1},e)}async serverStatus(e){return await this.command({serverStatus:1},e)}async ping(e){return await this.command({ping:1},e)}async removeUser(e,r){return await(0,Py.executeOperation)(this.s.db.client,new sme.RemoveUserOperation(this.s.db,e,{dbName:"admin",...r}))}async validateCollection(e,r={}){return await(0,Py.executeOperation)(this.s.db.client,new ome.ValidateCollectionOperation(this,e,r))}async listDatabases(e){return await(0,Py.executeOperation)(this.s.db.client,new nme.ListDatabasesOperation(this.s.db,{timeoutMS:this.s.db.timeoutMS,...e}))}async replSetGetStatus(e){return await this.command({replSetGetStatus:1},e)}};By.Admin=UO});var zO=m(Ny=>{"use strict";Object.defineProperty(Ny,"__esModule",{value:!0});Ny.OrderedBulkOperation=void 0;var ume=pe(),GR=z(),Iy=Hl(),WO=class extends Iy.BulkOperationBase{constructor(e,r){super(e,r,!0)}addToOperationsList(e,r){let n=ume.calculateObjectSize(r,{checkKeys:!1,ignoreUndefined:!1});if(n>=this.s.maxBsonObjectSize)throw new GR.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);this.s.currentBatch==null&&(this.s.currentBatch=new Iy.Batch(e,this.s.currentIndex));let s=this.s.maxKeySize;if((this.s.currentBatchSize+1>=this.s.maxWriteBatchSize||this.s.currentBatchSize>0&&this.s.currentBatchSizeBytes+s+n>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==e)&&(this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new Iy.Batch(e,this.s.currentIndex),this.s.currentBatchSize=0,this.s.currentBatchSizeBytes=0),e===Iy.BatchType.INSERT&&this.s.bulkResult.insertedIds.push({index:this.s.currentIndex,_id:r._id}),Array.isArray(r))throw new GR.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentBatch.operations.push(r),this.s.currentBatchSize+=1,this.s.currentBatchSizeBytes+=s+n,this.s.currentIndex+=1,this}};Ny.OrderedBulkOperation=WO});var HO=m(ky=>{"use strict";Object.defineProperty(ky,"__esModule",{value:!0});ky.UnorderedBulkOperation=void 0;var cme=pe(),JR=z(),Ao=Hl(),KO=class extends Ao.BulkOperationBase{constructor(e,r){super(e,r,!1)}handleWriteError(e){if(!this.s.batches.length)return super.handleWriteError(e)}addToOperationsList(e,r){let n=cme.calculateObjectSize(r,{checkKeys:!1,ignoreUndefined:!1});if(n>=this.s.maxBsonObjectSize)throw new JR.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);this.s.currentBatch=void 0,e===Ao.BatchType.INSERT?this.s.currentBatch=this.s.currentInsertBatch:e===Ao.BatchType.UPDATE?this.s.currentBatch=this.s.currentUpdateBatch:e===Ao.BatchType.DELETE&&(this.s.currentBatch=this.s.currentRemoveBatch);let s=this.s.maxKeySize;if(this.s.currentBatch==null&&(this.s.currentBatch=new Ao.Batch(e,this.s.currentIndex)),(this.s.currentBatch.size+1>=this.s.maxWriteBatchSize||this.s.currentBatch.size>0&&this.s.currentBatch.sizeBytes+s+n>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==e)&&(this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new Ao.Batch(e,this.s.currentIndex)),Array.isArray(r))throw new JR.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.operations.push(r),this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentIndex=this.s.currentIndex+1,e===Ao.BatchType.INSERT?(this.s.currentInsertBatch=this.s.currentBatch,this.s.bulkResult.insertedIds.push({index:this.s.bulkResult.insertedIds.length,_id:r._id})):e===Ao.BatchType.UPDATE?this.s.currentUpdateBatch=this.s.currentBatch:e===Ao.BatchType.DELETE&&(this.s.currentRemoveBatch=this.s.currentBatch),this.s.currentBatch.size+=1,this.s.currentBatch.sizeBytes+=s+n,this}};ky.UnorderedBulkOperation=KO});var Ba=m(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.MongoLogger=xe.MongoLoggableComponent=xe.SEVERITY_LEVEL_MAP=xe.DEFAULT_MAX_DOCUMENT_LENGTH=xe.SeverityLevel=void 0;xe.parseSeverityFromString=QO;xe.createStdioLogger=Hu;xe.stringifyWithMaxLen=Pa;xe.defaultLogTransform=XR;var YR=require("util"),QR=pe(),at=Lt(),Gu=X();xe.SeverityLevel=Object.freeze({EMERGENCY:"emergency",ALERT:"alert",CRITICAL:"critical",ERROR:"error",WARNING:"warn",NOTICE:"notice",INFORMATIONAL:"info",DEBUG:"debug",TRACE:"trace",OFF:"off"});xe.DEFAULT_MAX_DOCUMENT_LENGTH=1e3;var YO=class extends Map{constructor(e){let r=[];for(let[n,s]of e)r.push([s,n]);r.push(...e),super(r)}getNumericSeverityLevel(e){return this.get(e)}getSeverityLevelName(e){return this.get(e)}};xe.SEVERITY_LEVEL_MAP=new YO([[xe.SeverityLevel.OFF,-1/0],[xe.SeverityLevel.EMERGENCY,0],[xe.SeverityLevel.ALERT,1],[xe.SeverityLevel.CRITICAL,2],[xe.SeverityLevel.ERROR,3],[xe.SeverityLevel.WARNING,4],[xe.SeverityLevel.NOTICE,5],[xe.SeverityLevel.INFORMATIONAL,6],[xe.SeverityLevel.DEBUG,7],[xe.SeverityLevel.TRACE,8]]);xe.MongoLoggableComponent=Object.freeze({COMMAND:"command",TOPOLOGY:"topology",SERVER_SELECTION:"serverSelection",CONNECTION:"connection",CLIENT:"client"});function QO(t){let e=Object.values(xe.SeverityLevel),r=t?.toLowerCase();return r!=null&&e.includes(r)?r:null}function Hu(t){return{write:(0,YR.promisify)((e,r)=>{let n=(0,YR.inspect)(e,{compact:!0,breakLength:1/0});t.write(`${n}
`,"utf-8",r)})}}function lme({MONGODB_LOG_PATH:t},{mongodbLogPath:e}){return typeof e=="string"&&/^stderr$/i.test(e)?{mongodbLogPath:Hu(process.stderr),mongodbLogPathIsStdErr:!0}:typeof e=="string"&&/^stdout$/i.test(e)?{mongodbLogPath:Hu(process.stdout),mongodbLogPathIsStdErr:!1}:typeof e=="object"&&typeof e?.write=="function"?{mongodbLogPath:e,mongodbLogPathIsStdErr:!1}:t&&/^stderr$/i.test(t)?{mongodbLogPath:Hu(process.stderr),mongodbLogPathIsStdErr:!0}:t&&/^stdout$/i.test(t)?{mongodbLogPath:Hu(process.stdout),mongodbLogPathIsStdErr:!1}:{mongodbLogPath:Hu(process.stderr),mongodbLogPathIsStdErr:!0}}function Jl(t,e,r){return QO(t)??QO(e)??r}function pme(t,e){let r=xe.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(t),n=xe.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(e);return r<n?-1:r>n?1:0}function Pa(t,e,r={}){let n="",s=0,i=function(a,u){if(!(s>=e)){if(a==="")return s+=1,u;if(s+=a.length+4,u==null)return u;switch(typeof u){case"string":s+=u.length+2;break;case"number":case"bigint":s+=String(u).length;break;case"boolean":s+=u?4:5;break;case"object":if((0,Gu.isUint8Array)(u))s+=22+u.byteLength+u.byteLength*.33+18|0;else if("_bsontype"in u){let c=u;switch(c._bsontype){case"Int32":s+=String(c.value).length;break;case"Double":s+=(c.value|0)===c.value?String(c.value).length+2:String(c.value).length;break;case"Long":s+=c.toString().length;break;case"ObjectId":s+=35;break;case"MaxKey":case"MinKey":s+=13;break;case"Binary":s+=22+u.position+u.position*.33+18|0;break;case"Timestamp":s+=19+String(c.t).length+5+String(c.i).length+2;break;case"Code":c.scope==null?s+=c.code.length+10+2:s+=c.code.length+10+11;break;case"BSONRegExp":s+=34+c.pattern.length+13+c.options.length+3;break}}}return u}};if(typeof t=="string")n=t;else if(typeof t=="function")n=t.name;else try{e!==0?n=QR.EJSON.stringify(t,i,0,r):n=QR.EJSON.stringify(t,r)}catch(o){n=`Extended JSON serialization failed with: ${o.message}`}return e!==0&&n.length>e&&n.charCodeAt(e-1)!==n.codePointAt(e-1)&&(e--,e===0)?"":e!==0&&n.length>e?`${n.slice(0,e)}...`:n}function dme(t){let e=t;return e.toLog!==void 0&&typeof e.toLog=="function"}function Ry(t,e,r=xe.DEFAULT_MAX_DOCUMENT_LENGTH){let{selector:n,operation:s,topologyDescription:i,message:o}=e;return t.selector=Pa(n,r),t.operation=s,t.topologyDescription=Pa(i,r),t.message=o,t}function GO(t,e){t.commandName=e.commandName,t.requestId=e.requestId,t.driverConnectionId=e.connectionId;let{host:r,port:n}=Gu.HostAddress.fromString(e.address).toHostPort();return t.serverHost=r,t.serverPort=n,e?.serviceId&&(t.serviceId=e.serviceId.toHexString()),t.databaseName=e.databaseName,t.serverConnectionId=e.serverConnectionId,t}function ss(t,e){let{host:r,port:n}=Gu.HostAddress.fromString(e.address).toHostPort();return t.serverHost=r,t.serverPort=n,t}function Ma(t,e){return t.topologyId=e.topologyId,t}function JO(t,e){let{awaited:r,connectionId:n}=e;t.awaited=r,t.driverConnectionId=e.connectionId;let{host:s,port:i}=Gu.HostAddress.fromString(n).toHostPort();return t.serverHost=s,t.serverPort=i,t}function XR(t,e=xe.DEFAULT_MAX_DOCUMENT_LENGTH){let r=Object.create(null);switch(t.name){case at.SERVER_SELECTION_STARTED:return r=Ry(r,t,e),r;case at.SERVER_SELECTION_FAILED:return r=Ry(r,t,e),r.failure=t.failure?.message,r;case at.SERVER_SELECTION_SUCCEEDED:return r=Ry(r,t,e),r.serverHost=t.serverHost,r.serverPort=t.serverPort,r;case at.WAITING_FOR_SUITABLE_SERVER:return r=Ry(r,t,e),r.remainingTimeMS=t.remainingTimeMS,r;case at.COMMAND_STARTED:return r=GO(r,t),r.message="Command started",r.command=Pa(t.command,e,{relaxed:!0}),r.databaseName=t.databaseName,r;case at.COMMAND_SUCCEEDED:return r=GO(r,t),r.message="Command succeeded",r.durationMS=t.duration,r.reply=Pa(t.reply,e,{relaxed:!0}),r;case at.COMMAND_FAILED:return r=GO(r,t),r.message="Command failed",r.durationMS=t.duration,r.failure=t.failure?.message??"(redacted)",r;case at.CONNECTION_POOL_CREATED:if(r=ss(r,t),r.message="Connection pool created",t.options){let{maxIdleTimeMS:n,minPoolSize:s,maxPoolSize:i,maxConnecting:o,waitQueueTimeoutMS:a}=t.options;r={...r,maxIdleTimeMS:n,minPoolSize:s,maxPoolSize:i,maxConnecting:o,waitQueueTimeoutMS:a}}return r;case at.CONNECTION_POOL_READY:return r=ss(r,t),r.message="Connection pool ready",r;case at.CONNECTION_POOL_CLEARED:return r=ss(r,t),r.message="Connection pool cleared",t.serviceId?._bsontype==="ObjectId"&&(r.serviceId=t.serviceId?.toHexString()),r;case at.CONNECTION_POOL_CLOSED:return r=ss(r,t),r.message="Connection pool closed",r;case at.CONNECTION_CREATED:return r=ss(r,t),r.message="Connection created",r.driverConnectionId=t.connectionId,r;case at.CONNECTION_READY:return r=ss(r,t),r.message="Connection ready",r.driverConnectionId=t.connectionId,r.durationMS=t.durationMS,r;case at.CONNECTION_CLOSED:switch(r=ss(r,t),r.message="Connection closed",r.driverConnectionId=t.connectionId,t.reason){case"stale":r.reason="Connection became stale because the pool was cleared";break;case"idle":r.reason="Connection has been available but unused for longer than the configured max idle time";break;case"error":r.reason="An error occurred while using the connection",t.error&&(r.error=t.error);break;case"poolClosed":r.reason="Connection pool was closed";break;default:r.reason=`Unknown close reason: ${t.reason}`}return r;case at.CONNECTION_CHECK_OUT_STARTED:return r=ss(r,t),r.message="Connection checkout started",r;case at.CONNECTION_CHECK_OUT_FAILED:switch(r=ss(r,t),r.message="Connection checkout failed",t.reason){case"poolClosed":r.reason="Connection pool was closed";break;case"timeout":r.reason="Wait queue timeout elapsed without a connection becoming available";break;case"connectionError":r.reason="An error occurred while trying to establish a new connection",t.error&&(r.error=t.error);break;default:r.reason=`Unknown close reason: ${t.reason}`}return r.durationMS=t.durationMS,r;case at.CONNECTION_CHECKED_OUT:return r=ss(r,t),r.message="Connection checked out",r.driverConnectionId=t.connectionId,r.durationMS=t.durationMS,r;case at.CONNECTION_CHECKED_IN:return r=ss(r,t),r.message="Connection checked in",r.driverConnectionId=t.connectionId,r;case at.SERVER_OPENING:return r=Ma(r,t),r=ss(r,t),r.message="Starting server monitoring",r;case at.SERVER_CLOSED:return r=Ma(r,t),r=ss(r,t),r.message="Stopped server monitoring",r;case at.SERVER_HEARTBEAT_STARTED:return r=Ma(r,t),r=JO(r,t),r.message="Server heartbeat started",r;case at.SERVER_HEARTBEAT_SUCCEEDED:return r=Ma(r,t),r=JO(r,t),r.message="Server heartbeat succeeded",r.durationMS=t.duration,r.serverConnectionId=t.serverConnectionId,r.reply=Pa(t.reply,e,{relaxed:!0}),r;case at.SERVER_HEARTBEAT_FAILED:return r=Ma(r,t),r=JO(r,t),r.message="Server heartbeat failed",r.durationMS=t.duration,r.failure=t.failure?.message,r;case at.TOPOLOGY_OPENING:return r=Ma(r,t),r.message="Starting topology monitoring",r;case at.TOPOLOGY_CLOSED:return r=Ma(r,t),r.message="Stopped topology monitoring",r;case at.TOPOLOGY_DESCRIPTION_CHANGED:return r=Ma(r,t),r.message="Topology description changed",r.previousDescription=r.reply=Pa(t.previousDescription,e),r.newDescription=r.reply=Pa(t.newDescription,e),r;default:for(let[n,s]of Object.entries(t))s!=null&&(r[n]=s)}return r}var XO=class{constructor(e){this.pendingLog=null,this.error=this.log.bind(this,"error"),this.warn=this.log.bind(this,"warn"),this.info=this.log.bind(this,"info"),this.debug=this.log.bind(this,"debug"),this.trace=this.log.bind(this,"trace"),this.componentSeverities=e.componentSeverities,this.maxDocumentLength=e.maxDocumentLength,this.logDestination=e.logDestination,this.logDestinationIsStdErr=e.logDestinationIsStdErr,this.severities=this.createLoggingSeverities()}createLoggingSeverities(){let e=Object();for(let r of Object.values(xe.MongoLoggableComponent)){e[r]={};for(let n of Object.values(xe.SeverityLevel))e[r][n]=pme(n,this.componentSeverities[r])<=0}return e}turnOffSeverities(){for(let e of Object.values(xe.MongoLoggableComponent)){this.componentSeverities[e]=xe.SeverityLevel.OFF;for(let r of Object.values(xe.SeverityLevel))this.severities[e][r]=!1}}logWriteFailureHandler(e){if(this.logDestinationIsStdErr){this.turnOffSeverities(),this.clearPendingLog();return}this.logDestination=Hu(process.stderr),this.logDestinationIsStdErr=!0,this.clearPendingLog(),this.error(xe.MongoLoggableComponent.CLIENT,{toLog:function(){return{message:"User input for mongodbLogPath is now invalid. Logging is halted.",error:e.message}}}),this.turnOffSeverities(),this.clearPendingLog()}clearPendingLog(){this.pendingLog=null}willLog(e,r){return r===xe.SeverityLevel.OFF?!1:this.severities[e][r]}log(e,r,n){if(!this.willLog(r,e))return;let s={t:new Date,c:r,s:e};if(typeof n=="string"?s.message=n:typeof n=="object"&&(dme(n)?s={...s,...n.toLog()}:s={...s,...XR(n,this.maxDocumentLength)}),(0,Gu.isPromiseLike)(this.pendingLog)){this.pendingLog=this.pendingLog.then(()=>this.logDestination.write(s)).then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this));return}try{let i=this.logDestination.write(s);(0,Gu.isPromiseLike)(i)&&(this.pendingLog=i.then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this)))}catch(i){this.logWriteFailureHandler(i)}}static resolveOptions(e,r){let n=lme(e,r),s={...e,...r,mongodbLogPath:n.mongodbLogPath,mongodbLogPathIsStdErr:n.mongodbLogPathIsStdErr},i=Jl(s.mongodbLogComponentSeverities?.default,s.MONGODB_LOG_ALL,xe.SeverityLevel.OFF);return{componentSeverities:{command:Jl(s.mongodbLogComponentSeverities?.command,s.MONGODB_LOG_COMMAND,i),topology:Jl(s.mongodbLogComponentSeverities?.topology,s.MONGODB_LOG_TOPOLOGY,i),serverSelection:Jl(s.mongodbLogComponentSeverities?.serverSelection,s.MONGODB_LOG_SERVER_SELECTION,i),connection:Jl(s.mongodbLogComponentSeverities?.connection,s.MONGODB_LOG_CONNECTION,i),client:Jl(s.mongodbLogComponentSeverities?.client,s.MONGODB_LOG_CLIENT,i),default:i},maxDocumentLength:s.mongodbLogMaxDocumentLength??(0,Gu.parseUnsignedInteger)(s.MONGODB_LOG_MAX_DOCUMENT_LENGTH)??1e3,logDestination:s.mongodbLogPath,logDestinationIsStdErr:s.mongodbLogPathIsStdErr}}};xe.MongoLogger=XO});var is=m(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.CancellationToken=Yl.TypedEventEmitter=void 0;var hme=require("events"),fme=Ba(),mme=X(),Fy=class extends hme.EventEmitter{emitAndLog(e,...r){this.emit(e,...r),this.component&&this.mongoLogger?.debug(this.component,r[0])}emitAndLogHeartbeat(e,r,n,...s){if(this.emit(e,...s),this.component){let i={topologyId:r,serverConnectionId:n??null,...s[0]};this.mongoLogger?.debug(this.component,i)}}emitAndLogCommand(e,r,n,s,...i){if(e&&this.emit(r,...i),s){let o={databaseName:n,...i[0]};this.mongoLogger?.debug(fme.MongoLoggableComponent.COMMAND,o)}}};Yl.TypedEventEmitter=Fy;var ZO=class extends Fy{constructor(...e){super(...e),this.on("error",mme.noop)}};Yl.CancellationToken=ZO});var e4=m(jy=>{"use strict";Object.defineProperty(jy,"__esModule",{value:!0});jy.GetMoreOperation=void 0;var yme=ze(),ZR=z(),gme=X(),$y=Xe(),qy=class extends $y.AbstractOperation{constructor(e,r,n,s){super(s),this.SERVER_COMMAND_RESPONSE_TYPE=yme.CursorResponse,this.options=s,this.ns=e,this.cursorId=r,this.server=n}get commandName(){return"getMore"}buildCommand(e){if(this.cursorId==null||this.cursorId.isZero())throw new ZR.MongoRuntimeError("Unable to iterate cursor with no id");let r=this.ns.collection;if(r==null)throw new ZR.MongoRuntimeError("A collection name must be determined before getMore");let n={getMore:this.cursorId,collection:r};return typeof this.options.batchSize=="number"&&(n.batchSize=Math.abs(this.options.batchSize)),typeof this.options.maxAwaitTimeMS=="number"&&(n.maxTimeMS=this.options.maxAwaitTimeMS),this.options.comment!==void 0&&(0,gme.maxWireVersion)(e)>=9&&(n.comment=this.options.comment),n}buildOptions(e){return{returnFieldSelector:null,documentsReturnedIn:"nextBatch",timeoutContext:e,...this.options}}handleOk(e){return e}};jy.GetMoreOperation=qy;(0,$y.defineAspects)(qy,[$y.Aspect.READ_OPERATION,$y.Aspect.MUST_SELECT_SAME_SERVER])});var eF=m(Uy=>{"use strict";Object.defineProperty(Uy,"__esModule",{value:!0});Uy.KillCursorsOperation=void 0;var _me=ze(),Eme=z(),t4=Xe(),Ly=class extends t4.AbstractOperation{constructor(e,r,n,s){super(s),this.SERVER_COMMAND_RESPONSE_TYPE=_me.MongoDBResponse,this.ns=r,this.cursorId=e,this.server=n}get commandName(){return"killCursors"}buildCommand(e,r){let n=this.ns.collection;if(n==null)throw new Eme.MongoRuntimeError("A collection name must be determined before killCursors");return{killCursors:n,cursors:[this.cursorId]}}buildOptions(e){return{session:this.session,timeoutContext:e}}handleError(e){}};Uy.KillCursorsOperation=Ly;(0,t4.defineAspects)(Ly,[t4.Aspect.MUST_SELECT_SAME_SERVER])});var n4=m(Vy=>{"use strict";Object.defineProperty(Vy,"__esModule",{value:!0});Vy.ConnectionPoolMetrics=void 0;var r4=class t{constructor(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}static{this.TXN="txn"}static{this.CURSOR="cursor"}static{this.OTHER="other"}markPinned(e){e===t.TXN?this.txnConnections+=1:e===t.CURSOR?this.cursorConnections+=1:this.otherConnections+=1}markUnpinned(e){e===t.TXN?this.txnConnections-=1:e===t.CURSOR?this.cursorConnections-=1:this.otherConnections-=1}info(e){return`Timed out while checking out a connection from connection pool: maxPoolSize: ${e}, connections in use by cursors: ${this.cursorConnections}, connections in use by transactions: ${this.txnConnections}, connections in use by other operations: ${this.otherConnections}`}reset(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}};Vy.ConnectionPoolMetrics=r4});var i4=m(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.Transaction=Se.TxnState=void 0;Se.isTransactionCommand=vme;var tF=z(),bme=si(),wme=sr(),Sme=hn();Se.TxnState=Object.freeze({NO_TRANSACTION:"NO_TRANSACTION",STARTING_TRANSACTION:"STARTING_TRANSACTION",TRANSACTION_IN_PROGRESS:"TRANSACTION_IN_PROGRESS",TRANSACTION_COMMITTED:"TRANSACTION_COMMITTED",TRANSACTION_COMMITTED_EMPTY:"TRANSACTION_COMMITTED_EMPTY",TRANSACTION_ABORTED:"TRANSACTION_ABORTED"});var Ame={[Se.TxnState.NO_TRANSACTION]:[Se.TxnState.NO_TRANSACTION,Se.TxnState.STARTING_TRANSACTION],[Se.TxnState.STARTING_TRANSACTION]:[Se.TxnState.TRANSACTION_IN_PROGRESS,Se.TxnState.TRANSACTION_COMMITTED,Se.TxnState.TRANSACTION_COMMITTED_EMPTY,Se.TxnState.TRANSACTION_ABORTED],[Se.TxnState.TRANSACTION_IN_PROGRESS]:[Se.TxnState.TRANSACTION_IN_PROGRESS,Se.TxnState.TRANSACTION_COMMITTED,Se.TxnState.TRANSACTION_ABORTED],[Se.TxnState.TRANSACTION_COMMITTED]:[Se.TxnState.TRANSACTION_COMMITTED,Se.TxnState.TRANSACTION_COMMITTED_EMPTY,Se.TxnState.STARTING_TRANSACTION,Se.TxnState.NO_TRANSACTION],[Se.TxnState.TRANSACTION_ABORTED]:[Se.TxnState.STARTING_TRANSACTION,Se.TxnState.NO_TRANSACTION],[Se.TxnState.TRANSACTION_COMMITTED_EMPTY]:[Se.TxnState.TRANSACTION_COMMITTED_EMPTY,Se.TxnState.NO_TRANSACTION]},Ome=new Set([Se.TxnState.STARTING_TRANSACTION,Se.TxnState.TRANSACTION_IN_PROGRESS]),Cme=new Set([Se.TxnState.TRANSACTION_COMMITTED,Se.TxnState.TRANSACTION_COMMITTED_EMPTY,Se.TxnState.TRANSACTION_ABORTED]),s4=class{constructor(e){e=e??{},this.state=Se.TxnState.NO_TRANSACTION,this.options={};let r=Sme.WriteConcern.fromOptions(e);if(r){if(r.w===0)throw new tF.MongoTransactionError("Transactions do not support unacknowledged write concern");this.options.writeConcern=r}e.readConcern&&(this.options.readConcern=bme.ReadConcern.fromOptions(e)),e.readPreference&&(this.options.readPreference=wme.ReadPreference.fromOptions(e)),e.maxCommitTimeMS&&(this.options.maxTimeMS=e.maxCommitTimeMS),this._pinnedServer=void 0,this._recoveryToken=void 0}get server(){return this._pinnedServer}get recoveryToken(){return this._recoveryToken}get isPinned(){return!!this.server}get isStarting(){return this.state===Se.TxnState.STARTING_TRANSACTION}get isActive(){return Ome.has(this.state)}get isCommitted(){return Cme.has(this.state)}transition(e){let r=Ame[this.state];if(r&&r.includes(e)){this.state=e,(this.state===Se.TxnState.NO_TRANSACTION||this.state===Se.TxnState.STARTING_TRANSACTION||this.state===Se.TxnState.TRANSACTION_ABORTED)&&this.unpinServer();return}throw new tF.MongoRuntimeError(`Attempted illegal state transition from [${this.state}] to [${e}]`)}pinServer(e){this.isActive&&(this._pinnedServer=e)}unpinServer(){this._pinnedServer=void 0}};Se.Transaction=s4;function vme(t){return!!(t.commitTransaction||t.abortTransaction)}});var $d=m(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.ServerSessionPool=ui.ServerSession=ui.ClientSession=void 0;ui.maybeClearPinnedConnection=Ky;ui.applySession=Mme;ui.updateSessionFromResponse=Pme;var zy=pe(),Hy=n4(),sF=Lt(),he=z(),xme=is(),Wy=Er(),o4=Rd(),Tme=si(),a4=sr(),c4=ts(),u4=ir(),Ze=i4(),Mr=X(),Ql=hn(),l4=class t extends xme.TypedEventEmitter{constructor(e,r,n,s){if(super(),this.timeoutContext=null,this.on("error",Mr.noop),e==null)throw new he.MongoRuntimeError("ClientSession requires a MongoClient");if(r==null||!(r instanceof Gy))throw new he.MongoRuntimeError("ClientSession requires a ServerSessionPool");if(n=n??{},this.snapshotEnabled=n.snapshot===!0,n.causalConsistency===!0&&this.snapshotEnabled)throw new he.MongoInvalidArgumentError('Properties "causalConsistency" and "snapshot" are mutually exclusive');this.client=e,this.sessionPool=r,this.hasEnded=!1,this.clientOptions=s,this.timeoutMS=n.defaultTimeoutMS??e.s.options?.timeoutMS,this.explicit=!!n.explicit,this._serverSession=this.explicit?this.sessionPool.acquire():null,this.txnNumberIncrement=0;let i=this.explicit&&n.snapshot!==!0;this.supports={causalConsistency:n.causalConsistency??i},this.clusterTime=n.initialClusterTime,this.operationTime=void 0,this.owner=n.owner,this.defaultTransactionOptions={...n.defaultTransactionOptions},this.transaction=new Ze.Transaction}get id(){return this.serverSession?.id}get serverSession(){let e=this._serverSession;if(e==null){if(this.explicit)throw new he.MongoRuntimeError("Unexpected null serverSession for an explicit session");if(this.hasEnded)throw new he.MongoRuntimeError("Unexpected null serverSession for an ended implicit session");e=this.sessionPool.acquire(),this._serverSession=e}return e}get loadBalanced(){return this.client.topology?.description.type===c4.TopologyType.LoadBalanced}pin(e){if(this.pinnedConnection)throw TypeError("Cannot pin multiple connections to the same session");this.pinnedConnection=e,e.emit(sF.PINNED,this.inTransaction()?Hy.ConnectionPoolMetrics.TXN:Hy.ConnectionPoolMetrics.CURSOR)}unpin(e){if(this.loadBalanced)return Ky(this,e);this.transaction.unpinServer()}get isPinned(){return this.loadBalanced?!!this.pinnedConnection:this.transaction.isPinned}async endSession(e){try{this.inTransaction()&&await this.abortTransaction({...e,throwTimeout:!0})}catch(r){if(r.name==="MongoOperationTimeoutError")throw r;(0,Mr.squashError)(r)}finally{if(!this.hasEnded){let r=this.serverSession;r!=null&&(this.sessionPool.release(r),this._serverSession=new Fd(r)),this.hasEnded=!0,this.emit("ended",this)}Ky(this,{force:!0,...e})}}async[Symbol.asyncDispose](){await this.endSession({force:!0})}advanceOperationTime(e){if(this.operationTime==null){this.operationTime=e;return}e.greaterThan(this.operationTime)&&(this.operationTime=e)}advanceClusterTime(e){if(!e||typeof e!="object")throw new he.MongoInvalidArgumentError("input cluster time must be an object");if(!e.clusterTime||e.clusterTime._bsontype!=="Timestamp")throw new he.MongoInvalidArgumentError('input cluster time "clusterTime" property must be a valid BSON Timestamp');if(!e.signature||e.signature.hash?._bsontype!=="Binary"||typeof e.signature.keyId!="bigint"&&typeof e.signature.keyId!="number"&&e.signature.keyId?._bsontype!=="Long")throw new he.MongoInvalidArgumentError('input cluster time must have a valid "signature" property with BSON Binary hash and BSON Long keyId');(0,c4._advanceClusterTime)(this,e)}equals(e){return!(e instanceof t)||this.id==null||e.id==null?!1:Mr.ByteUtils.equals(this.id.id.buffer,e.id.id.buffer)}incrementTransactionNumber(){this.txnNumberIncrement+=1}inTransaction(){return this.transaction.isActive}startTransaction(e){if(this.snapshotEnabled)throw new he.MongoCompatibilityError("Transactions are not supported in snapshot sessions");if(this.inTransaction())throw new he.MongoTransactionError("Transaction already in progress");this.isPinned&&this.transaction.isCommitted&&this.unpin(),this.commitAttempted=!1,this.incrementTransactionNumber(),this.transaction=new Ze.Transaction({readConcern:e?.readConcern??this.defaultTransactionOptions.readConcern??this.clientOptions?.readConcern,writeConcern:e?.writeConcern??this.defaultTransactionOptions.writeConcern??this.clientOptions?.writeConcern,readPreference:e?.readPreference??this.defaultTransactionOptions.readPreference??this.clientOptions?.readPreference,maxCommitTimeMS:e?.maxCommitTimeMS??this.defaultTransactionOptions.maxCommitTimeMS}),this.transaction.transition(Ze.TxnState.STARTING_TRANSACTION)}async commitTransaction(e){if(this.transaction.state===Ze.TxnState.NO_TRANSACTION)throw new he.MongoTransactionError("No transaction started");if(this.transaction.state===Ze.TxnState.STARTING_TRANSACTION||this.transaction.state===Ze.TxnState.TRANSACTION_COMMITTED_EMPTY){this.transaction.transition(Ze.TxnState.TRANSACTION_COMMITTED_EMPTY);return}if(this.transaction.state===Ze.TxnState.TRANSACTION_ABORTED)throw new he.MongoTransactionError("Cannot call commitTransaction after calling abortTransaction");let r={commitTransaction:1},n=typeof e?.timeoutMS=="number"?e.timeoutMS:typeof this.timeoutMS=="number"?this.timeoutMS:null,s=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;if(s!=null)if(n==null&&this.timeoutContext==null)Ql.WriteConcern.apply(r,{wtimeoutMS:1e4,w:"majority",...s});else{let a=Object.keys(s);(a.length>2||!a.includes("wtimeoutMS")&&!a.includes("wTimeoutMS"))&&Ql.WriteConcern.apply(r,{...s,wtimeoutMS:void 0})}(this.transaction.state===Ze.TxnState.TRANSACTION_COMMITTED||this.commitAttempted)&&(n==null&&this.timeoutContext==null?Ql.WriteConcern.apply(r,{wtimeoutMS:1e4,...s,w:"majority"}):Ql.WriteConcern.apply(r,{w:"majority",...s,wtimeoutMS:void 0})),typeof this.transaction.options.maxTimeMS=="number"&&(r.maxTimeMS=this.transaction.options.maxTimeMS),this.transaction.recoveryToken&&(r.recoveryToken=this.transaction.recoveryToken);let i=new o4.RunCommandOperation(new Mr.MongoDBNamespace("admin"),r,{session:this,readPreference:a4.ReadPreference.primary,bypassPinningCheck:!0}),o=this.timeoutContext??(typeof n=="number"?u4.TimeoutContext.create({serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS,timeoutMS:n}):null);try{await(0,Wy.executeOperation)(this.client,i,o),this.commitAttempted=void 0;return}catch(a){if(this.commitAttempted=!0,a instanceof he.MongoError&&(0,he.isRetryableWriteError)(a)){Ql.WriteConcern.apply(r,{wtimeoutMS:1e4,...s,w:"majority"}),this.unpin({force:!0});try{await(0,Wy.executeOperation)(this.client,new o4.RunCommandOperation(new Mr.MongoDBNamespace("admin"),r,{session:this,readPreference:a4.ReadPreference.primary,bypassPinningCheck:!0}),o);return}catch(u){throw nF(u)&&u.addErrorLabel(he.MongoErrorLabel.UnknownTransactionCommitResult),rF(u)&&this.unpin({error:u}),u}}throw nF(a)&&a.addErrorLabel(he.MongoErrorLabel.UnknownTransactionCommitResult),rF(a)&&this.unpin({error:a}),a}finally{this.transaction.transition(Ze.TxnState.TRANSACTION_COMMITTED)}}async abortTransaction(e){if(this.transaction.state===Ze.TxnState.NO_TRANSACTION)throw new he.MongoTransactionError("No transaction started");if(this.transaction.state===Ze.TxnState.STARTING_TRANSACTION){this.transaction.transition(Ze.TxnState.TRANSACTION_ABORTED);return}if(this.transaction.state===Ze.TxnState.TRANSACTION_ABORTED)throw new he.MongoTransactionError("Cannot call abortTransaction twice");if(this.transaction.state===Ze.TxnState.TRANSACTION_COMMITTED||this.transaction.state===Ze.TxnState.TRANSACTION_COMMITTED_EMPTY)throw new he.MongoTransactionError("Cannot call abortTransaction after calling commitTransaction");let r={abortTransaction:1},n=typeof e?.timeoutMS=="number"?e.timeoutMS:this.timeoutContext?.csotEnabled()?this.timeoutContext.timeoutMS:typeof this.timeoutMS=="number"?this.timeoutMS:null,s=n!=null?u4.TimeoutContext.create({timeoutMS:n,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null,i=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;i!=null&&n==null&&Ql.WriteConcern.apply(r,{wtimeoutMS:1e4,w:"majority",...i}),this.transaction.recoveryToken&&(r.recoveryToken=this.transaction.recoveryToken);let o=new o4.RunCommandOperation(new Mr.MongoDBNamespace("admin"),r,{session:this,readPreference:a4.ReadPreference.primary,bypassPinningCheck:!0});try{await(0,Wy.executeOperation)(this.client,o,s),this.unpin();return}catch(a){if(this.unpin(),a.name==="MongoRuntimeError"||e?.throwTimeout&&a.name==="MongoOperationTimeoutError")throw a;if(a instanceof he.MongoError&&(0,he.isRetryableWriteError)(a))try{await(0,Wy.executeOperation)(this.client,o,s);return}catch(u){if(u.name==="MongoRuntimeError"||e?.throwTimeout&&u.name==="MongoOperationTimeoutError")throw u}}finally{this.transaction.transition(Ze.TxnState.TRANSACTION_ABORTED),this.loadBalanced&&Ky(this,{force:!1})}}toBSON(){throw new he.MongoRuntimeError("ClientSession cannot be serialized to BSON.")}async withTransaction(e,r){let s=r?.timeoutMS??this.timeoutMS??null;this.timeoutContext=s!=null?u4.TimeoutContext.create({timeoutMS:s,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null;let i=this.timeoutContext?.csotEnabled()?this.timeoutContext.start:(0,Mr.now)(),o=!1,a;try{for(;!o;){this.startTransaction(r);try{let u=e(this);if(!(0,Mr.isPromiseLike)(u))throw new he.MongoInvalidArgumentError("Function provided to `withTransaction` must return a Promise");if(a=await u,this.transaction.state===Ze.TxnState.NO_TRANSACTION||this.transaction.state===Ze.TxnState.TRANSACTION_COMMITTED||this.transaction.state===Ze.TxnState.TRANSACTION_ABORTED)return a}catch(u){if(!(u instanceof he.MongoError)||u instanceof he.MongoInvalidArgumentError)throw await this.abortTransaction(),u;if((this.transaction.state===Ze.TxnState.STARTING_TRANSACTION||this.transaction.state===Ze.TxnState.TRANSACTION_IN_PROGRESS)&&await this.abortTransaction(),u.hasErrorLabel(he.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||(0,Mr.now)()-i<12e4))continue;throw u}for(;!o;)try{await this.commitTransaction(),o=!0}catch(u){if(!Jy(u)&&u.hasErrorLabel(he.MongoErrorLabel.UnknownTransactionCommitResult)&&(this.timeoutContext!=null||(0,Mr.now)()-i<12e4))continue;if(u.hasErrorLabel(he.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||(0,Mr.now)()-i<12e4))break;throw u}}return a}finally{this.timeoutContext=null}}};ui.ClientSession=l4;var Dme=new Set(["CannotSatisfyWriteConcern","UnknownReplWriteConcern","UnsatisfiableWriteConcern"]);function rF(t){if(t instanceof he.MongoError){if((0,he.isRetryableWriteError)(t)||t instanceof he.MongoWriteConcernError||Jy(t)){if(iF(t))return!0}else if(t.hasErrorLabel(he.MongoErrorLabel.TransientTransactionError))return!0}return!1}function nF(t){let e=(0,he.isRetryableWriteError)(t);return e||=t instanceof he.MongoWriteConcernError,e||=Jy(t),e&&=iF(t),e}function iF(t){let e=t instanceof he.MongoServerError&&t.codeName&&Dme.has(t.codeName);return Jy(t)||!e&&t.code!==he.MONGODB_ERROR_CODES.UnsatisfiableWriteConcern&&t.code!==he.MONGODB_ERROR_CODES.UnknownReplWriteConcern}function Ky(t,e){let r=t.pinnedConnection,n=e?.error;if(t.inTransaction()&&n&&n instanceof he.MongoError&&n.hasErrorLabel(he.MongoErrorLabel.TransientTransactionError))return;let s=t.client.topology;if(r&&s!=null){let o=Array.from(s.s.servers.values())[0];(e?.error==null||e?.force)&&(o.pool.checkIn(r),t.pinnedConnection=void 0,r.emit(sF.UNPINNED,t.transaction.state!==Ze.TxnState.NO_TRANSACTION?Hy.ConnectionPoolMetrics.TXN:Hy.ConnectionPoolMetrics.CURSOR),e?.forceClear&&o.pool.clear({serviceId:r.serviceId}))}}function Jy(t){return t==null||!(t instanceof he.MongoServerError)?!1:t.code===he.MONGODB_ERROR_CODES.MaxTimeMSExpired||t.writeConcernError?.code===he.MONGODB_ERROR_CODES.MaxTimeMSExpired}var Fd=class{constructor(e){if(e!=null){let r=Buffer.allocUnsafe(16);r.set(e.id.id.buffer),this.id={id:new zy.Binary(r,e.id.id.sub_type)},this.lastUse=e.lastUse,this.txnNumber=e.txnNumber,this.isDirty=e.isDirty;return}this.id={id:new zy.Binary((0,Mr.uuidV4)(),zy.Binary.SUBTYPE_UUID)},this.lastUse=(0,Mr.now)(),this.txnNumber=0,this.isDirty=!1}hasTimedOut(e){return Math.round((0,Mr.calculateDurationInMs)(this.lastUse)%864e5%36e5/6e4)>e-1}};ui.ServerSession=Fd;var Gy=class{constructor(e){if(e==null)throw new he.MongoRuntimeError("ServerSessionPool requires a MongoClient");this.client=e,this.sessions=new Mr.List}acquire(){let e=this.client.topology?.logicalSessionTimeoutMinutes??10,r=null;for(;this.sessions.length>0;){let n=this.sessions.shift();if(n!=null&&(this.client.topology?.loadBalanced||!n.hasTimedOut(e))){r=n;break}}return r==null&&(r=new Fd),r}release(e){let r=this.client.topology?.logicalSessionTimeoutMinutes??10;if(this.client.topology?.loadBalanced&&!r&&this.sessions.unshift(e),!!r&&(this.sessions.prune(n=>n.hasTimedOut(r)),!e.hasTimedOut(r))){if(e.isDirty)return;this.sessions.unshift(e)}}};ui.ServerSessionPool=Gy;function Mme(t,e,r){if(t.hasEnded)return new he.MongoExpiredSessionError;let n=t.serverSession;if(n==null)return new he.MongoRuntimeError("Unable to acquire server session");if(r.writeConcern?.w===0)return t&&t.explicit?new he.MongoAPIError("Cannot have explicit session with unacknowledged writes"):void 0;n.lastUse=(0,Mr.now)(),e.lsid=n.id;let s=t.inTransaction()||(0,Ze.isTransactionCommand)(e);if((r.willRetryWrite||s)&&(n.txnNumber+=t.txnNumberIncrement,t.txnNumberIncrement=0,e.txnNumber=zy.Long.fromNumber(n.txnNumber)),!s){t.transaction.state!==Ze.TxnState.NO_TRANSACTION&&t.transaction.transition(Ze.TxnState.NO_TRANSACTION),t.supports.causalConsistency&&t.operationTime&&(0,Mr.commandSupportsReadConcern)(e)?(e.readConcern=e.readConcern||{},Object.assign(e.readConcern,{afterClusterTime:t.operationTime})):t.snapshotEnabled&&(e.readConcern=e.readConcern||{level:Tme.ReadConcernLevel.snapshot},t.snapshotTime!=null&&Object.assign(e.readConcern,{atClusterTime:t.snapshotTime}));return}if(e.autocommit=!1,t.transaction.state===Ze.TxnState.STARTING_TRANSACTION){t.transaction.transition(Ze.TxnState.TRANSACTION_IN_PROGRESS),e.startTransaction=!0;let o=t.transaction.options.readConcern||t?.clientOptions?.readConcern;o&&(e.readConcern=o),t.supports.causalConsistency&&t.operationTime&&(e.readConcern=e.readConcern||{},Object.assign(e.readConcern,{afterClusterTime:t.operationTime}))}}function Pme(t,e){if(e.$clusterTime&&(0,c4._advanceClusterTime)(t,e.$clusterTime),e.operationTime&&t&&t.supports.causalConsistency&&t.advanceOperationTime(e.operationTime),e.recoveryToken&&t&&t.inTransaction()&&(t.transaction._recoveryToken=e.recoveryToken),t?.snapshotEnabled&&t.snapshotTime==null){let r=e.atClusterTime;r&&(t.snapshotTime=r)}}});var Xr=m(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.CursorTimeoutContext=Bt.AbstractCursor=Bt.CursorTimeoutMode=Bt.CURSOR_FLAGS=void 0;var Bme=require("stream"),Xl=pe(),ar=z(),Ime=is(),oF=Er(),Nme=e4(),kme=eF(),aF=si(),Yy=sr(),Rme=$d(),p4=ir(),os=X();Bt.CURSOR_FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];function uF(){this.client.s.activeCursors.delete(this)}Bt.CursorTimeoutMode=Object.freeze({ITERATION:"iteration",LIFETIME:"cursorLifetime"});var d4=class extends Ime.TypedEventEmitter{static{this.CLOSE="close"}constructor(e,r,n={}){if(super(),this.documents=null,this.hasEmittedClose=!1,this.on("error",os.noop),!e.s.isMongoClient)throw new ar.MongoRuntimeError("Cursor must be constructed with MongoClient");if(this.cursorClient=e,this.cursorNamespace=r,this.cursorId=null,this.initialized=!1,this.isClosed=!1,this.isKilled=!1,this.cursorOptions={readPreference:n.readPreference&&n.readPreference instanceof Yy.ReadPreference?n.readPreference:Yy.ReadPreference.primary,...(0,Xl.pluckBSONSerializeOptions)(n),timeoutMS:n?.timeoutContext?.csotEnabled()?n.timeoutContext.timeoutMS:n.timeoutMS,tailable:n.tailable,awaitData:n.awaitData},this.cursorOptions.timeoutMS!=null)if(n.timeoutMode==null)if(n.tailable){if(n.awaitData&&n.maxAwaitTimeMS!=null&&n.maxAwaitTimeMS>=this.cursorOptions.timeoutMS)throw new ar.MongoInvalidArgumentError("Cannot specify maxAwaitTimeMS >= timeoutMS for a tailable awaitData cursor");this.cursorOptions.timeoutMode=Bt.CursorTimeoutMode.ITERATION}else this.cursorOptions.timeoutMode=Bt.CursorTimeoutMode.LIFETIME;else{if(n.tailable&&n.timeoutMode===Bt.CursorTimeoutMode.LIFETIME)throw new ar.MongoInvalidArgumentError("Cannot set tailable cursor's timeoutMode to LIFETIME");this.cursorOptions.timeoutMode=n.timeoutMode}else if(n.timeoutMode!=null)throw new ar.MongoInvalidArgumentError("Cannot set timeoutMode without setting timeoutMS");this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null&&(this.cursorOptions.timeoutMode===Bt.CursorTimeoutMode.ITERATION&&!this.cursorOptions.tailable||this.cursorOptions.tailable&&!this.cursorOptions.awaitData);let s=aF.ReadConcern.fromOptions(n);s&&(this.cursorOptions.readConcern=s),typeof n.batchSize=="number"&&(this.cursorOptions.batchSize=n.batchSize),n.comment!==void 0&&(this.cursorOptions.comment=n.comment),typeof n.maxTimeMS=="number"&&(this.cursorOptions.maxTimeMS=n.maxTimeMS),typeof n.maxAwaitTimeMS=="number"&&(this.cursorOptions.maxAwaitTimeMS=n.maxAwaitTimeMS),this.cursorSession=n.session??null,this.deserializationOptions={...this.cursorOptions,validation:{utf8:n?.enableUtf8Validation!==!1}},this.timeoutContext=n.timeoutContext,this.signal=n.signal,this.abortListener=(0,os.addAbortListener)(this.signal,()=>{this.close().then(void 0,os.squashError)}),this.trackCursor()}get id(){return this.cursorId??void 0}get isDead(){return(this.cursorId?.isZero()??!1)||this.isClosed||this.isKilled}get client(){return this.cursorClient}get server(){return this.selectedServer}get namespace(){return this.cursorNamespace}get readPreference(){return this.cursorOptions.readPreference}get readConcern(){return this.cursorOptions.readConcern}get session(){return this.cursorSession}set session(e){this.cursorSession=e}get closed(){return this.isClosed&&(this.documents?.length??0)===0}get killed(){return this.isKilled}get loadBalanced(){return!!this.cursorClient.topology?.loadBalanced}async[Symbol.asyncDispose](){await this.close()}trackCursor(){this.cursorClient.s.activeCursors.add(this),this.listeners("close").includes(uF)||this.once("close",uF)}bufferedCount(){return this.documents?.length??0}readBufferedDocuments(e){let r=[],n=Math.min(e??this.documents?.length??0,this.documents?.length??0);for(let s=0;s<n;s++){let i=this.documents?.shift(this.deserializationOptions);i!=null&&r.push(i)}return r}async*[Symbol.asyncIterator](){if(this.signal?.throwIfAborted(),!this.closed)try{for(;;){if(this.isKilled||this.closed||this.cursorId!=null&&this.isDead&&(this.documents?.length??0)===0)return;let e=await this.next();if(e===null)return;yield e,this.signal?.throwIfAborted()}}finally{if(!this.isClosed)try{await this.close()}catch(e){(0,os.squashError)(e)}}}stream(){let e=new h4(this),r=(0,os.addAbortListener)(this.signal,function(){e.destroy(this.reason)});return e.once("end",()=>{r?.[os.kDispose]()}),e}async hasNext(){if(this.signal?.throwIfAborted(),this.cursorId===Xl.Long.ZERO)return!1;this.cursorOptions.timeoutMode===Bt.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{do{if((this.documents?.length??0)!==0)return!0;await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{this.cursorOptions.timeoutMode===Bt.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return!1}async next(){if(this.signal?.throwIfAborted(),this.cursorId===Xl.Long.ZERO)throw new ar.MongoCursorExhaustedError;this.cursorOptions.timeoutMode===Bt.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{do{let e=this.documents?.shift(this.deserializationOptions);if(e!=null)return this.transform!=null?await this.transformDocument(e):e;await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{this.cursorOptions.timeoutMode===Bt.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return null}async tryNext(){if(this.signal?.throwIfAborted(),this.cursorId===Xl.Long.ZERO)throw new ar.MongoCursorExhaustedError;this.cursorOptions.timeoutMode===Bt.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{let e=this.documents?.shift(this.deserializationOptions);if(e!=null)return this.transform!=null?await this.transformDocument(e):e;if(await this.fetchBatch(),e=this.documents?.shift(this.deserializationOptions),e!=null)return this.transform!=null?await this.transformDocument(e):e}finally{this.cursorOptions.timeoutMode===Bt.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return null}async forEach(e){if(this.signal?.throwIfAborted(),typeof e!="function")throw new ar.MongoInvalidArgumentError('Argument "iterator" must be a function');for await(let r of this)if(e(r)===!1)break}async close(e){await this.cleanup(e?.timeoutMS)}async toArray(){this.signal?.throwIfAborted();let e=[];for await(let r of this){e.push(r);let n=this.readBufferedDocuments();if(this.transform!=null)for(let s of n)e.push(await this.transformDocument(s));else for(let s of n)e.push(s)}return e}addCursorFlag(e,r){if(this.throwIfInitialized(),!Bt.CURSOR_FLAGS.includes(e))throw new ar.MongoInvalidArgumentError(`Flag ${e} is not one of ${Bt.CURSOR_FLAGS}`);if(typeof r!="boolean")throw new ar.MongoInvalidArgumentError(`Flag ${e} must be a boolean value`);return this.cursorOptions[e]=r,this}map(e){this.throwIfInitialized();let r=this.transform;return r?this.transform=n=>e(r(n)):this.transform=e,this}withReadPreference(e){if(this.throwIfInitialized(),e instanceof Yy.ReadPreference)this.cursorOptions.readPreference=e;else if(typeof e=="string")this.cursorOptions.readPreference=Yy.ReadPreference.fromString(e);else throw new ar.MongoInvalidArgumentError(`Invalid read preference: ${e}`);return this}withReadConcern(e){this.throwIfInitialized();let r=aF.ReadConcern.fromOptions({readConcern:e});return r&&(this.cursorOptions.readConcern=r),this}maxTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new ar.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.cursorOptions.maxTimeMS=e,this}batchSize(e){if(this.throwIfInitialized(),this.cursorOptions.tailable)throw new ar.MongoTailableCursorError("Tailable cursor does not support batchSize");if(typeof e!="number")throw new ar.MongoInvalidArgumentError('Operation "batchSize" requires an integer');return this.cursorOptions.batchSize=e,this}rewind(){if(this.timeoutContext&&this.timeoutContext.owner!==this)throw new ar.MongoAPIError("Cannot rewind cursor that does not own its timeout context.");this.initialized&&(this.cursorId=null,this.documents?.clear(),this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!1,this.isKilled=!1,this.initialized=!1,this.hasEmittedClose=!1,this.trackCursor(),this.cursorSession?.explicit===!1&&(this.cursorSession.hasEnded||this.cursorSession.endSession().then(void 0,os.squashError),this.cursorSession=null))}async getMore(){if(this.cursorId==null)throw new ar.MongoRuntimeError("Unexpected null cursor id. A cursor creating command should have set this");if(this.selectedServer==null)throw new ar.MongoRuntimeError("Unexpected null selectedServer. A cursor creating command should have set this");if(this.cursorSession==null)throw new ar.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let e={...this.cursorOptions,session:this.cursorSession,batchSize:this.cursorOptions.batchSize},r=new Nme.GetMoreOperation(this.cursorNamespace,this.cursorId,this.selectedServer,e);return await(0,oF.executeOperation)(this.cursorClient,r,this.timeoutContext)}async cursorInit(){this.cursorOptions.timeoutMS!=null&&(this.timeoutContext??=new qd(p4.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:this.cursorOptions.timeoutMS}),this));try{this.cursorSession??=this.cursorClient.startSession({owner:this,explicit:!1});let e=await this._initialize(this.cursorSession);this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null;let r=e.response;this.selectedServer=e.server,this.cursorId=r.id,this.cursorNamespace=r.ns??this.namespace,this.documents=r,this.initialized=!0}catch(e){throw this.initialized=!0,await this.cleanup(void 0,e),e}this.isDead&&await this.cleanup()}async fetchBatch(){if(!this.isClosed){if(this.isDead){await this.cleanup();return}if(!(this.cursorId==null&&(await this.cursorInit(),(this.documents?.length??0)!==0||this.isDead))){try{let e=await this.getMore();this.cursorId=e.id,this.documents=e}catch(e){try{await this.cleanup(void 0,e)}catch(r){(0,os.squashError)(r)}throw e}this.isDead&&await this.cleanup()}}}async cleanup(e,r){this.abortListener?.[os.kDispose](),this.isClosed=!0;let n=()=>e!=null?(this.timeoutContext?.clear(),new qd(p4.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:e}),this)):this.timeoutContext?.refreshed();await(async o=>{try{await o()}finally{this.emitClose()}})(async()=>{let o=this.cursorSession;if(o)try{if(!this.isKilled&&this.cursorId&&!this.cursorId.isZero()&&this.cursorNamespace&&this.selectedServer&&!o.hasEnded){this.isKilled=!0;let a=this.cursorId;this.cursorId=Xl.Long.ZERO,await(0,oF.executeOperation)(this.cursorClient,new kme.KillCursorsOperation(a,this.cursorNamespace,this.selectedServer,{session:o}),n())}}catch(a){(0,os.squashError)(a)}finally{o.owner===this&&await o.endSession({error:r}),o.inTransaction()||(0,Rme.maybeClearPinnedConnection)(o,{error:r})}})}emitClose(){try{!this.hasEmittedClose&&((this.documents?.length??0)===0||this.isClosed)&&this.emit("close")}finally{this.hasEmittedClose=!0}}async transformDocument(e){if(this.transform==null)return e;try{let r=this.transform(e);if(r===null){let n="Cursor returned a `null` document, but the cursor is not exhausted.  Mapping documents to `null` is not supported in the cursor transform.";throw new ar.MongoAPIError(n)}return r}catch(r){try{await this.close()}catch(n){(0,os.squashError)(n)}throw r}}throwIfInitialized(){if(this.initialized)throw new ar.MongoCursorInUseError}};Bt.AbstractCursor=d4;var h4=class extends Bme.Readable{constructor(e){super({objectMode:!0,autoDestroy:!1,highWaterMark:1}),this._readInProgress=!1,this._cursor=e}_read(e){this._readInProgress||(this._readInProgress=!0,this._readNext())}_destroy(e,r){this._cursor.close().then(()=>r(e),n=>r(n))}_readNext(){if(this._cursor.id===Xl.Long.ZERO){this.push(null);return}this._cursor.next().then(e=>{if(e==null)this.push(null);else if(this.destroyed)this._cursor.close().then(void 0,os.squashError);else{if(this.push(e))return this._readNext();this._readInProgress=!1}},e=>e.message.match(/server is closed/)?(this._cursor.close().then(void 0,os.squashError),this.push(null)):e.message.match(/operation was interrupted/)?this.push(null):this.destroy(e)).catch(e=>{this._readInProgress=!1,this.destroy(e)})}},qd=class t extends p4.TimeoutContext{constructor(e,r){super(),this.timeoutContext=e,this.owner=r}get serverSelectionTimeout(){return this.timeoutContext.serverSelectionTimeout}get connectionCheckoutTimeout(){return this.timeoutContext.connectionCheckoutTimeout}get clearServerSelectionTimeout(){return this.timeoutContext.clearServerSelectionTimeout}get timeoutForSocketWrite(){return this.timeoutContext.timeoutForSocketWrite}get timeoutForSocketRead(){return this.timeoutContext.timeoutForSocketRead}csotEnabled(){return this.timeoutContext.csotEnabled()}refresh(){if(typeof this.owner!="symbol")return this.timeoutContext.refresh()}clear(){if(typeof this.owner!="symbol")return this.timeoutContext.clear()}get maxTimeMS(){return this.timeoutContext.maxTimeMS}get timeoutMS(){return this.timeoutContext.csotEnabled()?this.timeoutContext.timeoutMS:null}refreshed(){return new t(this.timeoutContext.refreshed(),this.owner)}addMaxTimeMSToCommand(e,r){this.timeoutContext.addMaxTimeMSToCommand(e,r)}getSocketTimeoutMS(){return this.timeoutContext.getSocketTimeoutMS()}};Bt.CursorTimeoutContext=qd});var Xy=m(Qy=>{"use strict";Object.defineProperty(Qy,"__esModule",{value:!0});Qy.ExplainableCursor=void 0;var Fme=Xr(),f4=class extends Fme.AbstractCursor{resolveExplainTimeoutOptions(e,r){let n,s;return e==null&&r==null?(n=void 0,s=void 0):e!=null&&r==null?(n=typeof e!="object"||"verbosity"in e?e:void 0,s=typeof e=="object"&&"timeoutMS"in e?e:void 0):(n=e,s=r),{timeout:s,explain:n}}};Qy.ExplainableCursor=f4});var jd=m(Zy=>{"use strict";Object.defineProperty(Zy,"__esModule",{value:!0});Zy.AggregationCursor=void 0;var m4=z(),cF=Od(),lF=Md(),pF=Er(),$me=X(),dF=Xr(),qme=Xy(),y4=class t extends qme.ExplainableCursor{constructor(e,r,n=[],s={}){super(e,r,s),this.pipeline=n,this.aggregateOptions=s;let i=this.pipeline[this.pipeline.length-1];if(this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===dF.CursorTimeoutMode.ITERATION&&(i?.$merge!=null||i?.$out!=null))throw new m4.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode")}clone(){let e=(0,$me.mergeOptions)({},this.aggregateOptions);return delete e.session,new t(this.client,this.namespace,this.pipeline,{...e})}map(e){return super.map(e)}async _initialize(e){let r={...this.aggregateOptions,...this.cursorOptions,session:e,signal:this.signal};if(r.explain)try{(0,cF.validateExplainTimeoutOptions)(r,cF.Explain.fromOptions(r))}catch{throw new m4.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in aggregateOptions")}let n=new lF.AggregateOperation(this.namespace,this.pipeline,r),s=await(0,pF.executeOperation)(this.client,n,this.timeoutContext);return{server:n.server,session:e,response:s}}async explain(e,r){let{explain:n,timeout:s}=this.resolveExplainTimeoutOptions(e,r);return(await(0,pF.executeOperation)(this.client,new lF.AggregateOperation(this.namespace,this.pipeline,{...this.aggregateOptions,...this.cursorOptions,...s,explain:n??!0}))).shift(this.deserializationOptions)}addStage(e){if(this.throwIfInitialized(),this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===dF.CursorTimeoutMode.ITERATION&&(e.$out!=null||e.$merge!=null))throw new m4.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode");return this.pipeline.push(e),this}group(e){return this.addStage({$group:e})}limit(e){return this.addStage({$limit:e})}match(e){return this.addStage({$match:e})}out(e){return this.addStage({$out:e})}project(e){return this.addStage({$project:e})}lookup(e){return this.addStage({$lookup:e})}redact(e){return this.addStage({$redact:e})}skip(e){return this.addStage({$skip:e})}sort(e){return this.addStage({$sort:e})}unwind(e){return this.addStage({$unwind:e})}geoNear(e){return this.addStage({$geoNear:e})}};Zy.AggregationCursor=y4});var g4=m(rg=>{"use strict";Object.defineProperty(rg,"__esModule",{value:!0});rg.CountOperation=void 0;var jme=ze(),Lme=At(),eg=Xe(),tg=class extends Lme.CommandOperation{constructor(e,r,n){super({s:{namespace:e}},n),this.SERVER_COMMAND_RESPONSE_TYPE=jme.MongoDBResponse,this.options=n,this.collectionName=e.collection,this.query=r}get commandName(){return"count"}buildCommandDocument(e,r){let n=this.options,s={count:this.collectionName,query:this.query};return typeof n.limit=="number"&&(s.limit=n.limit),typeof n.skip=="number"&&(s.skip=n.skip),n.hint!=null&&(s.hint=n.hint),typeof n.maxTimeMS=="number"&&(s.maxTimeMS=n.maxTimeMS),s}handleOk(e){return e.getNumber("n")??0}};rg.CountOperation=tg;(0,eg.defineAspects)(tg,[eg.Aspect.READ_OPERATION,eg.Aspect.RETRYABLE,eg.Aspect.SUPPORTS_RAW_DATA])});var hF=m(sg=>{"use strict";Object.defineProperty(sg,"__esModule",{value:!0});sg.FindOperation=void 0;var _4=ze(),Ume=z(),Vme=zl(),Wme=X(),zme=At(),Zl=Xe(),ng=class extends zme.CommandOperation{constructor(e,r={},n={}){if(super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=_4.CursorResponse,this.options={...n},delete this.options.writeConcern,this.ns=e,typeof r!="object"||Array.isArray(r))throw new Ume.MongoInvalidArgumentError("Query filter must be a plain object or ObjectId");this.filter=r!=null&&r._bsontype==="ObjectId"?{_id:r}:r,this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?_4.ExplainedCursorResponse:_4.CursorResponse}get commandName(){return"find"}buildOptions(e){return{...this.options,...this.bsonOptions,documentsReturnedIn:"firstBatch",session:this.session,timeoutContext:e}}handleOk(e){return e}buildCommandDocument(){return Kme(this.ns,this.filter,this.options)}};sg.FindOperation=ng;function Kme(t,e,r){let n={find:t.collection,filter:e};if(r.sort&&(n.sort=(0,Vme.formatSort)(r.sort)),r.projection){let s=r.projection;s&&Array.isArray(s)&&(s=s.length?s.reduce((i,o)=>(i[o]=1,i),{}):{_id:1}),n.projection=s}return r.hint&&(n.hint=(0,Wme.normalizeHintField)(r.hint)),typeof r.skip=="number"&&(n.skip=r.skip),typeof r.limit=="number"&&(r.limit<0?(n.limit=-r.limit,n.singleBatch=!0):n.limit=r.limit),typeof r.batchSize=="number"&&(r.batchSize<0?n.limit=-r.batchSize:r.batchSize===r.limit?n.batchSize=r.batchSize+1:n.batchSize=r.batchSize),typeof r.singleBatch=="boolean"&&(n.singleBatch=r.singleBatch),r.comment!==void 0&&(n.comment=r.comment),r.max&&(n.max=r.max),r.min&&(n.min=r.min),typeof r.returnKey=="boolean"&&(n.returnKey=r.returnKey),typeof r.showRecordId=="boolean"&&(n.showRecordId=r.showRecordId),typeof r.tailable=="boolean"&&(n.tailable=r.tailable),typeof r.oplogReplay=="boolean"&&(n.oplogReplay=r.oplogReplay),typeof r.timeout=="boolean"?n.noCursorTimeout=!r.timeout:typeof r.noCursorTimeout=="boolean"&&(n.noCursorTimeout=r.noCursorTimeout),typeof r.awaitData=="boolean"&&(n.awaitData=r.awaitData),typeof r.allowPartialResults=="boolean"&&(n.allowPartialResults=r.allowPartialResults),typeof r.allowDiskUse=="boolean"&&(n.allowDiskUse=r.allowDiskUse),r.let&&(n.let=r.let),n}(0,Zl.defineAspects)(ng,[Zl.Aspect.READ_OPERATION,Zl.Aspect.RETRYABLE,Zl.Aspect.EXPLAINABLE,Zl.Aspect.CURSOR_CREATING,Zl.Aspect.SUPPORTS_RAW_DATA])});var S4=m(ep=>{"use strict";Object.defineProperty(ep,"__esModule",{value:!0});ep.FindCursor=ep.FLAGS=void 0;var Hme=ze(),Bs=z(),fF=Od(),Gme=g4(),E4=Er(),mF=hF(),b4=zl(),ig=X(),Jme=Xy();ep.FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];var w4=class t extends Jme.ExplainableCursor{constructor(e,r,n={},s={}){super(e,r,s),this.numReturned=0,this.cursorFilter=n,this.findOptions=s,s.sort!=null&&(this.findOptions.sort=(0,b4.formatSort)(s.sort))}clone(){let e=(0,ig.mergeOptions)({},this.findOptions);return delete e.session,new t(this.client,this.namespace,this.cursorFilter,{...e})}map(e){return super.map(e)}async _initialize(e){let r={...this.findOptions,...this.cursorOptions,session:e,signal:this.signal};if(r.explain)try{(0,fF.validateExplainTimeoutOptions)(r,fF.Explain.fromOptions(r))}catch{throw new Bs.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in findOptions")}let n=new mF.FindOperation(this.namespace,this.cursorFilter,r),s=await(0,E4.executeOperation)(this.client,n,this.timeoutContext);return this.numReturned=s.batchSize,{server:n.server,session:e,response:s}}async getMore(){let e=this.numReturned,r=this.findOptions.limit??1/0,n=r-e;if(e===r&&!this.id?.isZero()){try{await this.close()}catch(o){(0,ig.squashError)(o)}return Hme.CursorResponse.emptyGetMore}let s=ig.noop,{batchSize:i}=this.cursorOptions;i!=null&&i>n&&(this.cursorOptions.batchSize=n,s=()=>{this.cursorOptions.batchSize=i});try{let o=await super.getMore();return this.numReturned=this.numReturned+o.batchSize,o}finally{s?.()}}async count(e){if((0,ig.emitWarningOnce)("cursor.count is deprecated and will be removed in the next major version, please use `collection.estimatedDocumentCount` or `collection.countDocuments` instead "),typeof e=="boolean")throw new Bs.MongoInvalidArgumentError("Invalid first parameter to count");return await(0,E4.executeOperation)(this.client,new Gme.CountOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...e}))}async explain(e,r){let{explain:n,timeout:s}=this.resolveExplainTimeoutOptions(e,r);return(await(0,E4.executeOperation)(this.client,new mF.FindOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...s,explain:n??!0}))).shift(this.deserializationOptions)}filter(e){return this.throwIfInitialized(),this.cursorFilter=e,this}hint(e){return this.throwIfInitialized(),this.findOptions.hint=e,this}min(e){return this.throwIfInitialized(),this.findOptions.min=e,this}max(e){return this.throwIfInitialized(),this.findOptions.max=e,this}returnKey(e){return this.throwIfInitialized(),this.findOptions.returnKey=e,this}showRecordId(e){return this.throwIfInitialized(),this.findOptions.showRecordId=e,this}addQueryModifier(e,r){if(this.throwIfInitialized(),e[0]!=="$")throw new Bs.MongoInvalidArgumentError(`${e} is not a valid query modifier`);switch(e.substr(1)){case"comment":this.findOptions.comment=r;break;case"explain":this.findOptions.explain=r;break;case"hint":this.findOptions.hint=r;break;case"max":this.findOptions.max=r;break;case"maxTimeMS":this.findOptions.maxTimeMS=r;break;case"min":this.findOptions.min=r;break;case"orderby":this.findOptions.sort=(0,b4.formatSort)(r);break;case"query":this.cursorFilter=r;break;case"returnKey":this.findOptions.returnKey=r;break;case"showDiskLoc":this.findOptions.showRecordId=r;break;default:throw new Bs.MongoInvalidArgumentError(`Invalid query modifier: ${e}`)}return this}comment(e){return this.throwIfInitialized(),this.findOptions.comment=e,this}maxAwaitTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new Bs.MongoInvalidArgumentError("Argument for maxAwaitTimeMS must be a number");return this.findOptions.maxAwaitTimeMS=e,this}maxTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new Bs.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.findOptions.maxTimeMS=e,this}project(e){return this.throwIfInitialized(),this.findOptions.projection=e,this}sort(e,r){if(this.throwIfInitialized(),this.findOptions.tailable)throw new Bs.MongoTailableCursorError("Tailable cursor does not support sorting");return this.findOptions.sort=(0,b4.formatSort)(e,r),this}allowDiskUse(e=!0){if(this.throwIfInitialized(),!this.findOptions.sort)throw new Bs.MongoInvalidArgumentError('Option "allowDiskUse" requires a sort specification');return e?(this.findOptions.allowDiskUse=!0,this):(this.findOptions.allowDiskUse=!1,this)}collation(e){return this.throwIfInitialized(),this.findOptions.collation=e,this}limit(e){if(this.throwIfInitialized(),this.findOptions.tailable)throw new Bs.MongoTailableCursorError("Tailable cursor does not support limit");if(typeof e!="number")throw new Bs.MongoInvalidArgumentError('Operation "limit" requires an integer');return this.findOptions.limit=e,this}skip(e){if(this.throwIfInitialized(),this.findOptions.tailable)throw new Bs.MongoTailableCursorError("Tailable cursor does not support skip");if(typeof e!="number")throw new Bs.MongoInvalidArgumentError('Operation "skip" requires an integer');return this.findOptions.skip=e,this}};ep.FindCursor=w4});var Ld=m(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.ListIndexesOperation=Ia.DropIndexOperation=Ia.CreateIndexesOperation=void 0;var A4=ze(),Yme=z(),O4=X(),C4=At(),ci=Xe(),Qme=new Set(["background","unique","name","partialFilterExpression","sparse","hidden","expireAfterSeconds","storageEngine","collation","version","weights","default_language","language_override","textIndexVersion","2dsphereIndexVersion","bits","min","max","bucketSize","wildcardProjection"]);function Xme(t){return typeof t=="number"||t==="2d"||t==="2dsphere"||t==="text"||t==="geoHaystack"}function Zme(t){return Array.isArray(t)&&t.length===2&&Xme(t[1])}function e0e(t){let e=new Map,r=!Array.isArray(t)||Zme(t)?[t]:t;for(let n of r)if(typeof n=="string")e.set(n,1);else if(Array.isArray(n))e.set(n[0],n[1]??1);else if(n instanceof Map)for(let[s,i]of n)e.set(s,i);else if((0,O4.isObject)(n))for(let[s,i]of Object.entries(n))e.set(s,i);return e}function t0e(t){let e=Object.entries(t).filter(([r])=>Qme.has(r));return Object.fromEntries(e.map(([r,n])=>r==="version"?["v",n]:[r,n]))}var og=class t extends C4.CommandOperation{constructor(e,r,n,s){super(e,s),this.SERVER_COMMAND_RESPONSE_TYPE=A4.MongoDBResponse,this.options=s??{},this.options.collation=void 0,this.collectionName=r,this.indexes=n.map(i=>{let o=i.key instanceof Map?i.key:new Map(Object.entries(i.key)),a=i.name??Array.from(o).flat().join("_");return{...t0e(i),name:a,key:o}}),this.ns=e.s.namespace}static fromIndexDescriptionArray(e,r,n,s){return new t(e,r,n,s)}static fromIndexSpecification(e,r,n,s={}){let i=e0e(n),o={...s,key:i};return new t(e,r,[o],s)}get commandName(){return"createIndexes"}buildCommandDocument(e){let r=this.options,n=this.indexes,s=(0,O4.maxWireVersion)(e),i={createIndexes:this.collectionName,indexes:n};if(r.commitQuorum!=null){if(s<9)throw new Yme.MongoCompatibilityError("Option `commitQuorum` for `createIndexes` not supported on servers < 4.4");i.commitQuorum=r.commitQuorum}return i}handleOk(e){return this.indexes.map(n=>n.name||"")}};Ia.CreateIndexesOperation=og;var ag=class extends C4.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=A4.MongoDBResponse,this.options=n??{},this.collection=e,this.indexName=r,this.ns=e.fullNamespace}get commandName(){return"dropIndexes"}buildCommandDocument(e){return{dropIndexes:this.collection.collectionName,index:this.indexName}}};Ia.DropIndexOperation=ag;var ug=class extends C4.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=A4.CursorResponse,this.options={...r},delete this.options.writeConcern,this.collectionNamespace=e.s.namespace}get commandName(){return"listIndexes"}buildCommandDocument(e){let r=(0,O4.maxWireVersion)(e),n=this.options.batchSize?{batchSize:this.options.batchSize}:{},s={listIndexes:this.collectionNamespace.collection,cursor:n};return r>=9&&this.options.comment!==void 0&&(s.comment=this.options.comment),s}handleOk(e){return e}};Ia.ListIndexesOperation=ug;(0,ci.defineAspects)(ug,[ci.Aspect.READ_OPERATION,ci.Aspect.RETRYABLE,ci.Aspect.CURSOR_CREATING,ci.Aspect.SUPPORTS_RAW_DATA]);(0,ci.defineAspects)(og,[ci.Aspect.WRITE_OPERATION,ci.Aspect.SUPPORTS_RAW_DATA]);(0,ci.defineAspects)(ag,[ci.Aspect.WRITE_OPERATION,ci.Aspect.SUPPORTS_RAW_DATA])});var x4=m(cg=>{"use strict";Object.defineProperty(cg,"__esModule",{value:!0});cg.ListIndexesCursor=void 0;var r0e=Er(),n0e=Ld(),s0e=Xr(),v4=class t extends s0e.AbstractCursor{constructor(e,r){super(e.client,e.s.namespace,r),this.parent=e,this.options=r}clone(){return new t(this.parent,{...this.options,...this.cursorOptions})}async _initialize(e){let r=new n0e.ListIndexesOperation(this.parent,{...this.cursorOptions,...this.options,session:e}),n=await(0,r0e.executeOperation)(this.parent.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}};cg.ListIndexesCursor=v4});var yF=m(lg=>{"use strict";Object.defineProperty(lg,"__esModule",{value:!0});lg.ListSearchIndexesCursor=void 0;var i0e=jd(),T4=class extends i0e.AggregationCursor{constructor({fullNamespace:e,client:r},n,s={}){let i=n==null?[{$listSearchIndexes:{}}]:[{$listSearchIndexes:{name:n}}];super(r,e,i,s)}};lg.ListSearchIndexesCursor=T4});var gF=m(dg=>{"use strict";Object.defineProperty(dg,"__esModule",{value:!0});dg.DistinctOperation=void 0;var o0e=ze(),a0e=At(),Ud=Xe(),pg=class extends a0e.CommandOperation{constructor(e,r,n,s){super(e,s),this.SERVER_COMMAND_RESPONSE_TYPE=o0e.MongoDBResponse,this.options=s??{},this.collection=e,this.key=r,this.query=n}get commandName(){return"distinct"}buildCommandDocument(e){let r={distinct:this.collection.collectionName,key:this.key,query:this.query};return this.options.comment!==void 0&&(r.comment=this.options.comment),this.options.hint!=null&&(r.hint=this.options.hint),r}handleOk(e){return this.explain?e.toObject(this.bsonOptions):e.toObject(this.bsonOptions).values}};dg.DistinctOperation=pg;(0,Ud.defineAspects)(pg,[Ud.Aspect.READ_OPERATION,Ud.Aspect.RETRYABLE,Ud.Aspect.EXPLAINABLE,Ud.Aspect.SUPPORTS_RAW_DATA])});var _F=m(fg=>{"use strict";Object.defineProperty(fg,"__esModule",{value:!0});fg.EstimatedDocumentCountOperation=void 0;var u0e=ze(),c0e=At(),Vd=Xe(),hg=class extends c0e.CommandOperation{constructor(e,r={}){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=u0e.MongoDBResponse,this.options=r,this.collectionName=e.collectionName}get commandName(){return"count"}buildCommandDocument(e,r){let n={count:this.collectionName};return typeof this.options.maxTimeMS=="number"&&(n.maxTimeMS=this.options.maxTimeMS),this.options.comment!==void 0&&(n.comment=this.options.comment),n}handleOk(e){return e.getNumber("n")??0}};fg.EstimatedDocumentCountOperation=hg;(0,Vd.defineAspects)(hg,[Vd.Aspect.READ_OPERATION,Vd.Aspect.RETRYABLE,Vd.Aspect.CURSOR_CREATING,Vd.Aspect.SUPPORTS_RAW_DATA])});var B4=m(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.FindOneAndUpdateOperation=as.FindOneAndReplaceOperation=as.FindOneAndDeleteOperation=as.FindAndModifyOperation=as.ReturnDocument=void 0;var l0e=ze(),Na=z(),p0e=sr(),d0e=zl(),mg=X(),h0e=At(),Wd=Xe();as.ReturnDocument=Object.freeze({BEFORE:"before",AFTER:"after"});function EF(t,e){return t.new=e.returnDocument===as.ReturnDocument.AFTER,t.upsert=e.upsert===!0,e.bypassDocumentValidation===!0&&(t.bypassDocumentValidation=e.bypassDocumentValidation),t}var Ju=class extends h0e.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=l0e.MongoDBResponse,this.options=n,this.readPreference=p0e.ReadPreference.primary,this.collection=e,this.query=r}get commandName(){return"findAndModify"}buildCommandDocument(e,r){let n=this.options,s={findAndModify:this.collection.collectionName,query:this.query,remove:!1,new:!1,upsert:!1};n.includeResultMetadata??=!1;let i=(0,d0e.formatSort)(n.sort);if(i&&(s.sort=i),n.projection&&(s.fields=n.projection),n.maxTimeMS&&(s.maxTimeMS=n.maxTimeMS),n.writeConcern&&(s.writeConcern=n.writeConcern),n.let&&(s.let=n.let),n.comment!==void 0&&(s.comment=n.comment),(0,mg.decorateWithCollation)(s,n),n.hint){if(this.writeConcern?.w===0&&(0,mg.maxWireVersion)(e)<9)throw new Na.MongoCompatibilityError("hint for the findAndModify command is only supported on MongoDB 4.4+");s.hint=n.hint}return s}handleOk(e){let r=super.handleOk(e);return this.options.includeResultMetadata?r:r.value??null}};as.FindAndModifyOperation=Ju;var D4=class extends Ju{constructor(e,r,n){if(r==null||typeof r!="object")throw new Na.MongoInvalidArgumentError('Argument "filter" must be an object');super(e,r,n)}buildCommandDocument(e,r){let n=super.buildCommandDocument(e,r);return n.remove=!0,n}};as.FindOneAndDeleteOperation=D4;var M4=class extends Ju{constructor(e,r,n,s){if(r==null||typeof r!="object")throw new Na.MongoInvalidArgumentError('Argument "filter" must be an object');if(n==null||typeof n!="object")throw new Na.MongoInvalidArgumentError('Argument "replacement" must be an object');if((0,mg.hasAtomicOperators)(n))throw new Na.MongoInvalidArgumentError("Replacement document must not contain atomic operators");super(e,r,s),this.replacement=n}buildCommandDocument(e,r){let n=super.buildCommandDocument(e,r);return n.update=this.replacement,EF(n,this.options),n}};as.FindOneAndReplaceOperation=M4;var P4=class extends Ju{constructor(e,r,n,s){if(r==null||typeof r!="object")throw new Na.MongoInvalidArgumentError('Argument "filter" must be an object');if(n==null||typeof n!="object")throw new Na.MongoInvalidArgumentError('Argument "update" must be an object');if(!(0,mg.hasAtomicOperators)(n,s))throw new Na.MongoInvalidArgumentError("Update document requires atomic operators");super(e,r,s),this.update=n,this.options=s}buildCommandDocument(e,r){let n=super.buildCommandDocument(e,r);return n.update=this.update,EF(n,this.options),this.options.arrayFilters&&(n.arrayFilters=this.options.arrayFilters),n}};as.FindOneAndUpdateOperation=P4;(0,Wd.defineAspects)(Ju,[Wd.Aspect.WRITE_OPERATION,Wd.Aspect.RETRYABLE,Wd.Aspect.EXPLAINABLE,Wd.Aspect.SUPPORTS_RAW_DATA])});var I4=m(gg=>{"use strict";Object.defineProperty(gg,"__esModule",{value:!0});gg.RenameOperation=void 0;var f0e=ze(),m0e=tp(),y0e=X(),g0e=At(),bF=Xe(),yg=class extends g0e.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=f0e.MongoDBResponse,this.collection=e,this.newName=r,this.options=n,this.ns=new y0e.MongoDBNamespace("admin","$cmd")}get commandName(){return"renameCollection"}buildCommandDocument(e,r){let n=this.collection.namespace,s=this.collection.s.namespace.withCollection(this.newName).toString(),i=typeof this.options.dropTarget=="boolean"?this.options.dropTarget:!1;return{renameCollection:n,to:s,dropTarget:i}}handleOk(e){return new m0e.Collection(this.collection.db,this.newName,this.collection.s.options)}};gg.RenameOperation=yg;(0,bF.defineAspects)(yg,[bF.Aspect.WRITE_OPERATION])});var wF=m(_g=>{"use strict";Object.defineProperty(_g,"__esModule",{value:!0});_g.CreateSearchIndexesOperation=void 0;var _0e=ze(),E0e=Xe(),N4=class extends E0e.AbstractOperation{constructor(e,r){super(),this.SERVER_COMMAND_RESPONSE_TYPE=_0e.MongoDBResponse,this.collection=e,this.descriptions=r,this.ns=e.fullNamespace}get commandName(){return"createSearchIndexes"}buildCommand(e,r){return{createSearchIndexes:this.collection.fullNamespace.collection,indexes:this.descriptions}}handleOk(e){return super.handleOk(e).indexesCreated.map(r=>r.name)}buildOptions(e){return{session:this.session,timeoutContext:e}}};_g.CreateSearchIndexesOperation=N4});var AF=m(Eg=>{"use strict";Object.defineProperty(Eg,"__esModule",{value:!0});Eg.DropSearchIndexOperation=void 0;var b0e=ze(),SF=z(),w0e=Xe(),k4=class extends w0e.AbstractOperation{constructor(e,r){super(),this.SERVER_COMMAND_RESPONSE_TYPE=b0e.MongoDBResponse,this.collection=e,this.name=r,this.ns=e.fullNamespace}get commandName(){return"dropSearchIndex"}buildCommand(e,r){let s={dropSearchIndex:this.collection.fullNamespace.collection};return typeof this.name=="string"&&(s.name=this.name),s}handleOk(e){}buildOptions(e){return{session:this.session,timeoutContext:e}}handleError(e){if(!(e instanceof SF.MongoServerError&&e.code===SF.MONGODB_ERROR_CODES.NamespaceNotFound))throw e}};Eg.DropSearchIndexOperation=k4});var OF=m(bg=>{"use strict";Object.defineProperty(bg,"__esModule",{value:!0});bg.UpdateSearchIndexOperation=void 0;var S0e=ze(),A0e=Xe(),R4=class extends A0e.AbstractOperation{constructor(e,r,n){super(),this.SERVER_COMMAND_RESPONSE_TYPE=S0e.MongoDBResponse,this.collection=e,this.name=r,this.definition=n,this.ns=e.fullNamespace}get commandName(){return"updateSearchIndex"}buildCommand(e,r){return{updateSearchIndex:this.collection.fullNamespace.collection,name:this.name,definition:this.definition}}handleOk(e){}buildOptions(e){return{session:this.session,timeoutContext:e}}};bg.UpdateSearchIndexOperation=R4});var tp=m(Sg=>{"use strict";Object.defineProperty(Sg,"__esModule",{value:!0});Sg.Collection=void 0;var O0e=pe(),C0e=zO(),v0e=HO(),x0e=np(),T0e=jd(),D0e=S4(),M0e=x4(),P0e=yF(),rp=z(),B0e=g4(),CF=SO(),I0e=gF(),N0e=_F(),Vt=Er(),F4=B4(),wg=Ld(),k0e=xO(),R0e=I4(),F0e=wF(),$0e=AF(),q0e=OF(),$4=MO(),j0e=si(),q4=sr(),He=X(),vF=hn(),j4=class{constructor(e,r,n){this.db=e,this.s={db:e,options:n,namespace:new He.MongoDBCollectionNamespace(e.databaseName,r),pkFactory:e.options?.pkFactory??He.DEFAULT_PK_FACTORY,readPreference:q4.ReadPreference.fromOptions(n),bsonOptions:(0,O0e.resolveBSONOptions)(n,e),readConcern:j0e.ReadConcern.fromOptions(n),writeConcern:vF.WriteConcern.fromOptions(n)},this.client=e.client}get dbName(){return this.s.namespace.db}get collectionName(){return this.s.namespace.collection}get namespace(){return this.fullNamespace.toString()}get fullNamespace(){return this.s.namespace}get readConcern(){return this.s.readConcern==null?this.db.readConcern:this.s.readConcern}get readPreference(){return this.s.readPreference==null?this.db.readPreference:this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern==null?this.db.writeConcern:this.s.writeConcern}get hint(){return this.s.collectionHint}set hint(e){this.s.collectionHint=(0,He.normalizeHintField)(e)}get timeoutMS(){return this.s.options.timeoutMS}async insertOne(e,r){return await(0,Vt.executeOperation)(this.client,new k0e.InsertOneOperation(this,e,(0,He.resolveOptions)(this,r)))}async insertMany(e,r){if(!Array.isArray(e))throw new rp.MongoInvalidArgumentError('Argument "docs" must be an array of documents');r=(0,He.resolveOptions)(this,r??{});let n=vF.WriteConcern.fromOptions(r)?.w!==0;try{let s=await this.bulkWrite(e.map(i=>({insertOne:{document:i}})),r);return{acknowledged:n,insertedCount:s.insertedCount,insertedIds:s.insertedIds}}catch(s){throw s&&s.message==="Operation must be an object with an operation key"?new rp.MongoInvalidArgumentError("Collection.insertMany() cannot be called with an array that has null/undefined values"):s}}async bulkWrite(e,r){if(!Array.isArray(e))throw new rp.MongoInvalidArgumentError('Argument "operations" must be an array of documents');r=(0,He.resolveOptions)(this,r??{}),this.client.topology!=null||await(0,Vt.autoConnect)(this.client);let s=r.ordered===!1?this.initializeUnorderedBulkOp(r):this.initializeOrderedBulkOp(r);for(let i of e)s.raw(i);return await s.execute({...r})}async updateOne(e,r,n){return await(0,Vt.executeOperation)(this.client,new $4.UpdateOneOperation(this.s.namespace,e,r,(0,He.resolveOptions)(this,n)))}async replaceOne(e,r,n){return await(0,Vt.executeOperation)(this.client,new $4.ReplaceOneOperation(this.s.namespace,e,r,(0,He.resolveOptions)(this,n)))}async updateMany(e,r,n){return await(0,Vt.executeOperation)(this.client,new $4.UpdateManyOperation(this.s.namespace,e,r,(0,He.resolveOptions)(this,n)))}async deleteOne(e={},r={}){return await(0,Vt.executeOperation)(this.client,new CF.DeleteOneOperation(this.s.namespace,e,(0,He.resolveOptions)(this,r)))}async deleteMany(e={},r={}){return await(0,Vt.executeOperation)(this.client,new CF.DeleteManyOperation(this.s.namespace,e,(0,He.resolveOptions)(this,r)))}async rename(e,r){return await(0,Vt.executeOperation)(this.client,new R0e.RenameOperation(this,e,(0,He.resolveOptions)(void 0,{...r,readPreference:q4.ReadPreference.PRIMARY})))}async drop(e){return await this.db.dropCollection(this.collectionName,e)}async findOne(e={},r={}){let{...n}=r;n.singleBatch=!0;let s=this.find(e,n).limit(1),i=await s.next();return await s.close(),i}find(e={},r={}){return new D0e.FindCursor(this.client,this.s.namespace,e,(0,He.resolveOptions)(this,r))}async options(e){e=(0,He.resolveOptions)(this,e);let[r]=await this.db.listCollections({name:this.collectionName},{...e,nameOnly:!1}).toArray();if(r==null||r.options==null)throw new rp.MongoAPIError(`collection ${this.namespace} not found`);return r.options}async isCapped(e){let{capped:r}=await this.options(e);return!!r}async createIndex(e,r){return(await(0,Vt.executeOperation)(this.client,wg.CreateIndexesOperation.fromIndexSpecification(this,this.collectionName,e,(0,He.resolveOptions)(this,r))))[0]}async createIndexes(e,r){return await(0,Vt.executeOperation)(this.client,wg.CreateIndexesOperation.fromIndexDescriptionArray(this,this.collectionName,e,(0,He.resolveOptions)(this,{...r,maxTimeMS:void 0})))}async dropIndex(e,r){return await(0,Vt.executeOperation)(this.client,new wg.DropIndexOperation(this,e,{...(0,He.resolveOptions)(this,r),readPreference:q4.ReadPreference.primary}))}async dropIndexes(e){try{return await(0,Vt.executeOperation)(this.client,new wg.DropIndexOperation(this,"*",(0,He.resolveOptions)(this,e))),!0}catch(r){if(r instanceof rp.MongoOperationTimeoutError)throw r;return!1}}listIndexes(e){return new M0e.ListIndexesCursor(this,(0,He.resolveOptions)(this,e))}async indexExists(e,r){let n=Array.isArray(e)?e:[e],s=new Set(await this.listIndexes(r).map(({name:i})=>i).toArray());return n.every(i=>s.has(i))}async indexInformation(e){return await this.indexes({...e,full:e?.full??!1})}async estimatedDocumentCount(e){return await(0,Vt.executeOperation)(this.client,new N0e.EstimatedDocumentCountOperation(this,(0,He.resolveOptions)(this,e)))}async countDocuments(e={},r={}){let n=[];n.push({$match:e}),typeof r.skip=="number"&&n.push({$skip:r.skip}),typeof r.limit=="number"&&n.push({$limit:r.limit}),n.push({$group:{_id:1,n:{$sum:1}}});let s=this.aggregate(n,r),i=await s.next();return await s.close(),i?.n??0}async distinct(e,r={},n={}){return await(0,Vt.executeOperation)(this.client,new I0e.DistinctOperation(this,e,r,(0,He.resolveOptions)(this,n)))}async indexes(e){let r=await this.listIndexes(e).toArray();return e?.full??!0?r:Object.fromEntries(r.map(({name:i,key:o})=>[i,Object.entries(o)]))}async findOneAndDelete(e,r){return await(0,Vt.executeOperation)(this.client,new F4.FindOneAndDeleteOperation(this,e,(0,He.resolveOptions)(this,r)))}async findOneAndReplace(e,r,n){return await(0,Vt.executeOperation)(this.client,new F4.FindOneAndReplaceOperation(this,e,r,(0,He.resolveOptions)(this,n)))}async findOneAndUpdate(e,r,n){return await(0,Vt.executeOperation)(this.client,new F4.FindOneAndUpdateOperation(this,e,r,(0,He.resolveOptions)(this,n)))}aggregate(e=[],r){if(!Array.isArray(e))throw new rp.MongoInvalidArgumentError('Argument "pipeline" must be an array of aggregation stages');return new T0e.AggregationCursor(this.client,this.s.namespace,e,(0,He.resolveOptions)(this,r))}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new x0e.ChangeStream(this,e,(0,He.resolveOptions)(this,r))}initializeUnorderedBulkOp(e){return new v0e.UnorderedBulkOperation(this,(0,He.resolveOptions)(this,e))}initializeOrderedBulkOp(e){return new C0e.OrderedBulkOperation(this,(0,He.resolveOptions)(this,e))}async count(e={},r={}){return await(0,Vt.executeOperation)(this.client,new B0e.CountOperation(this.fullNamespace,e,(0,He.resolveOptions)(this,r)))}listSearchIndexes(e,r){r=typeof e=="object"?e:r??{};let n=e==null||typeof e=="object"?null:e;return new P0e.ListSearchIndexesCursor(this,n,r)}async createSearchIndex(e){let[r]=await this.createSearchIndexes([e]);return r}async createSearchIndexes(e){return await(0,Vt.executeOperation)(this.client,new F0e.CreateSearchIndexesOperation(this,e))}async dropSearchIndex(e){return await(0,Vt.executeOperation)(this.client,new $0e.DropSearchIndexOperation(this,e))}async updateSearchIndex(e,r){return await(0,Vt.executeOperation)(this.client,new q0e.UpdateSearchIndexOperation(this,e,r))}};Sg.Collection=j4});var V4=m(Ag=>{"use strict";Object.defineProperty(Ag,"__esModule",{value:!0});Ag.ChangeStreamCursor=void 0;var L4=np(),xF=Lt(),L0e=Md(),U0e=Er(),TF=X(),V0e=Xr(),U4=class t extends V0e.AbstractCursor{constructor(e,r,n=[],s={}){super(e,r,{...s,tailable:!0,awaitData:!0}),this.pipeline=n,this.changeStreamCursorOptions=s,this._resumeToken=null,this.startAtOperationTime=s.startAtOperationTime??null,s.startAfter?this.resumeToken=s.startAfter:s.resumeAfter&&(this.resumeToken=s.resumeAfter)}set resumeToken(e){this._resumeToken=e,this.emit(L4.ChangeStream.RESUME_TOKEN_CHANGED,e)}get resumeToken(){return this._resumeToken}get resumeOptions(){let e={...this.changeStreamCursorOptions};for(let r of["resumeAfter","startAfter","startAtOperationTime"])delete e[r];return this.resumeToken!=null?this.changeStreamCursorOptions.startAfter&&!this.hasReceived?e.startAfter=this.resumeToken:e.resumeAfter=this.resumeToken:this.startAtOperationTime!=null&&(e.startAtOperationTime=this.startAtOperationTime),e}cacheResumeToken(e){this.bufferedCount()===0&&this.postBatchResumeToken?this.resumeToken=this.postBatchResumeToken:this.resumeToken=e,this.hasReceived=!0}_processBatch(e){let{postBatchResumeToken:r}=e;r&&(this.postBatchResumeToken=r,e.batchSize===0&&(this.resumeToken=r))}clone(){return new t(this.client,this.namespace,this.pipeline,{...this.cursorOptions})}async _initialize(e){let r=new L0e.AggregateOperation(this.namespace,this.pipeline,{...this.cursorOptions,...this.changeStreamCursorOptions,session:e}),n=await(0,U0e.executeOperation)(e.client,r,this.timeoutContext),s=r.server;return this.maxWireVersion=(0,TF.maxWireVersion)(s),this.startAtOperationTime==null&&this.changeStreamCursorOptions.resumeAfter==null&&this.changeStreamCursorOptions.startAfter==null&&(this.startAtOperationTime=n.operationTime),this._processBatch(n),this.emit(xF.INIT,n),this.emit(xF.RESPONSE),{server:s,session:e,response:n}}async getMore(){let e=await super.getMore();return this.maxWireVersion=(0,TF.maxWireVersion)(this.server),this._processBatch(e),this.emit(L4.ChangeStream.MORE,e),this.emit(L4.ChangeStream.RESPONSE),e}};Ag.ChangeStreamCursor=U4});var DF=m(Cg=>{"use strict";Object.defineProperty(Cg,"__esModule",{value:!0});Cg.ListCollectionsOperation=void 0;var W4=ze(),W0e=X(),z0e=At(),zd=Xe(),Og=class extends z0e.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=W4.CursorResponse,this.options={...n},delete this.options.writeConcern,this.db=e,this.filter=r,this.nameOnly=!!this.options.nameOnly,this.authorizedCollections=!!this.options.authorizedCollections,typeof this.options.batchSize=="number"&&(this.batchSize=this.options.batchSize),this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?W4.ExplainedCursorResponse:W4.CursorResponse}get commandName(){return"listCollections"}buildCommandDocument(e){let r={listCollections:1,filter:this.filter,cursor:this.batchSize?{batchSize:this.batchSize}:{},nameOnly:this.nameOnly,authorizedCollections:this.authorizedCollections};return(0,W0e.maxWireVersion)(e)>=9&&this.options.comment!==void 0&&(r.comment=this.options.comment),r}handleOk(e){return e}};Cg.ListCollectionsOperation=Og;(0,zd.defineAspects)(Og,[zd.Aspect.READ_OPERATION,zd.Aspect.RETRYABLE,zd.Aspect.CURSOR_CREATING,zd.Aspect.SUPPORTS_RAW_DATA])});var K4=m(vg=>{"use strict";Object.defineProperty(vg,"__esModule",{value:!0});vg.ListCollectionsCursor=void 0;var K0e=Er(),H0e=DF(),G0e=Xr(),z4=class t extends G0e.AbstractCursor{constructor(e,r,n){super(e.client,e.s.namespace,n),this.parent=e,this.filter=r,this.options=n}clone(){return new t(this.parent,this.filter,{...this.options,...this.cursorOptions})}async _initialize(e){let r=new H0e.ListCollectionsOperation(this.parent,this.filter,{...this.cursorOptions,...this.options,session:e,signal:this.signal}),n=await(0,K0e.executeOperation)(this.parent.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}};vg.ListCollectionsCursor=z4});var PF=m(xg=>{"use strict";Object.defineProperty(xg,"__esModule",{value:!0});xg.RunCommandCursor=void 0;var sp=z(),MF=Er(),J0e=e4(),Y0e=Rd(),Q0e=X(),X0e=Xr(),H4=class extends X0e.AbstractCursor{setComment(e){return this.getMoreOptions.comment=e,this}setMaxTimeMS(e){return this.getMoreOptions.maxAwaitTimeMS=e,this}setBatchSize(e){return this.getMoreOptions.batchSize=e,this}clone(){throw new sp.MongoAPIError("Clone not supported, create a new cursor with db.runCursorCommand")}withReadConcern(e){throw new sp.MongoAPIError("RunCommandCursor does not support readConcern it must be attached to the command being run")}addCursorFlag(e,r){throw new sp.MongoAPIError("RunCommandCursor does not support cursor flags, they must be attached to the command being run")}maxTimeMS(e){throw new sp.MongoAPIError("maxTimeMS must be configured on the command document directly, to configure getMore.maxTimeMS use cursor.setMaxTimeMS()")}batchSize(e){throw new sp.MongoAPIError("batchSize must be configured on the command document directly, to configure getMore.batchSize use cursor.setBatchSize()")}constructor(e,r,n={}){super(e.client,(0,Q0e.ns)(e.namespace),n),this.getMoreOptions={},this.db=e,this.command=Object.freeze({...r})}async _initialize(e){let r=new Y0e.RunCursorCommandOperation(this.db.s.namespace,this.command,{...this.cursorOptions,session:e,readPreference:this.cursorOptions.readPreference}),n=await(0,MF.executeOperation)(this.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}async getMore(){if(!this.session)throw new sp.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let e=new J0e.GetMoreOperation(this.namespace,this.id,this.server,{...this.cursorOptions,session:this.session,...this.getMoreOptions});return await(0,MF.executeOperation)(this.client,e,this.timeoutContext)}};xg.RunCommandCursor=H4});var NF=m(Kd=>{"use strict";Object.defineProperty(Kd,"__esModule",{value:!0});Kd.CreateCollectionOperation=void 0;Kd.createCollections=uye;var BF=Eo(),Z0e=ze(),eye=tp(),tye=z(),rye=ir(),nye=X(),sye=At(),G4=Er(),iye=Ld(),IF=Xe(),oye=new Set(["w","wtimeout","timeoutMS","j","fsync","pkFactory","raw","readPreference","session","readConcern","writeConcern","raw","fieldsAsRaw","useBigInt64","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","serializeFunctions","ignoreUndefined","enableUtf8Validation"]),aye="Driver support of Queryable Encryption is incompatible with server. Upgrade server to use Queryable Encryption.",ip=class extends sye.CommandOperation{constructor(e,r,n={}){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=Z0e.MongoDBResponse,this.options=n,this.db=e,this.name=r}get commandName(){return"create"}buildCommandDocument(e,r){let n=([s,i])=>i!=null&&typeof i!="function"&&!oye.has(s);return{create:this.name,...Object.fromEntries(Object.entries(this.options).filter(n))}}handleOk(e){return new eye.Collection(this.db,this.name,this.options)}};Kd.CreateCollectionOperation=ip;async function uye(t,e,r){let n=rye.TimeoutContext.create({session:r.session,serverSelectionTimeoutMS:t.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:t.client.s.options.waitQueueTimeoutMS,timeoutMS:r.timeoutMS}),s=r.encryptedFields??t.client.s.options.autoEncryption?.encryptedFieldsMap?.[`${t.databaseName}.${e}`];if(s){class o extends ip{buildCommandDocument(l,p){if(!l.description.loadBalanced&&(0,nye.maxWireVersion)(l)<BF.MIN_SUPPORTED_QE_WIRE_VERSION)throw new tye.MongoCompatibilityError(`${aye} The minimum server version required is ${BF.MIN_SUPPORTED_QE_SERVER_VERSION}`);return super.buildCommandDocument(l,p)}}let a=s.escCollection??`enxcol_.${e}.esc`,u=s.ecocCollection??`enxcol_.${e}.ecoc`;for(let c of[a,u]){let l=new o(t,c,{clusteredIndex:{key:{_id:1},unique:!0},session:r.session});await(0,G4.executeOperation)(t.client,l,n)}r.encryptedFields||(r={...r,encryptedFields:s})}let i=await(0,G4.executeOperation)(t.client,new ip(t,e,r),n);if(s){let o=iye.CreateIndexesOperation.fromIndexSpecification(t,e,{__safeContent__:1},{session:r.session});await(0,G4.executeOperation)(t.client,o,n)}return i}(0,IF.defineAspects)(ip,[IF.Aspect.WRITE_OPERATION])});var $F=m(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.DropDatabaseOperation=Yu.DropCollectionOperation=void 0;Yu.dropCollections=hye;var cye=ka(),RF=ze(),lye=Xr(),pye=z(),dye=ir(),FF=At(),kF=Er(),Tg=Xe(),op=class extends FF.CommandOperation{constructor(e,r,n={}){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=RF.MongoDBResponse,this.options=n,this.name=r}get commandName(){return"drop"}buildCommandDocument(e,r){return{drop:this.name}}handleOk(e){return!0}handleError(e){if(!(e instanceof cye.MongoServerError)||Number(e.code)!==pye.MONGODB_ERROR_CODES.NamespaceNotFound)throw e;return!1}};Yu.DropCollectionOperation=op;async function hye(t,e,r){let n=dye.TimeoutContext.create({session:r.session,serverSelectionTimeoutMS:t.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:t.client.s.options.waitQueueTimeoutMS,timeoutMS:r.timeoutMS}),s=t.client.s.options.autoEncryption?.encryptedFieldsMap,i=r.encryptedFields??s?.[`${t.databaseName}.${e}`];if(!i&&s&&(i=(await t.listCollections({name:e},{nameOnly:!1,session:r.session,timeoutContext:new lye.CursorTimeoutContext(n,Symbol())}).toArray())?.[0]?.options?.encryptedFields),i){let o=i.escCollection||`enxcol_.${e}.esc`,a=i.ecocCollection||`enxcol_.${e}.ecoc`;for(let u of[o,a]){let c=new op(t,u,r);await(0,kF.executeOperation)(t.client,c,n)}}return await(0,kF.executeOperation)(t.client,new op(t,e,r),n)}var Dg=class extends FF.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=RF.MongoDBResponse,this.options=r}get commandName(){return"dropDatabase"}buildCommandDocument(e,r){return{dropDatabase:1}}handleOk(e){return!0}};Yu.DropDatabaseOperation=Dg;(0,Tg.defineAspects)(op,[Tg.Aspect.WRITE_OPERATION]);(0,Tg.defineAspects)(Dg,[Tg.Aspect.WRITE_OPERATION])});var jF=m(Mg=>{"use strict";Object.defineProperty(Mg,"__esModule",{value:!0});Mg.ProfilingLevelOperation=void 0;var fye=pe(),mye=ze(),qF=z(),yye=At(),J4=class extends mye.MongoDBResponse{get was(){return this.get("was",fye.BSONType.int,!0)}},Y4=class extends yye.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=J4,this.options=r}get commandName(){return"profile"}buildCommandDocument(e){return{profile:-1}}handleOk(e){if(e.ok===1){let r=e.was;if(r===0)return"off";if(r===1)return"slow_only";if(r===2)return"all";throw new qF.MongoUnexpectedServerResponseError(`Illegal profiling level value ${r}`)}else throw new qF.MongoUnexpectedServerResponseError("Error with profile command")}};Mg.ProfilingLevelOperation=Y4});var X4=m(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.SetProfilingLevelOperation=Vi.ProfilingLevel=void 0;var gye=ze(),_ye=z(),Eye=X(),bye=At(),wye=new Set(["off","slow_only","all"]);Vi.ProfilingLevel=Object.freeze({off:"off",slowOnly:"slow_only",all:"all"});var Q4=class extends bye.CommandOperation{constructor(e,r,n){switch(super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=gye.MongoDBResponse,this.options=n,r){case Vi.ProfilingLevel.off:this.profile=0;break;case Vi.ProfilingLevel.slowOnly:this.profile=1;break;case Vi.ProfilingLevel.all:this.profile=2;break;default:this.profile=0;break}this.level=r}get commandName(){return"profile"}buildCommandDocument(e){let r=this.level;if(!wye.has(r))throw new _ye.MongoInvalidArgumentError(`Profiling level must be one of "${(0,Eye.enumToString)(Vi.ProfilingLevel)}"`);return{profile:this.profile}}handleOk(e){return this.level}};Vi.SetProfilingLevelOperation=Q4});var UF=m(Bg=>{"use strict";Object.defineProperty(Bg,"__esModule",{value:!0});Bg.DbStatsOperation=void 0;var Sye=ze(),Aye=At(),LF=Xe(),Pg=class extends Aye.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=Sye.MongoDBResponse,this.options=r}get commandName(){return"dbStats"}buildCommandDocument(e){let r={dbStats:!0};return this.options.scale!=null&&(r.scale=this.options.scale),r}};Bg.DbStatsOperation=Pg;(0,LF.defineAspects)(Pg,[LF.Aspect.READ_OPERATION])});var Ng=m(Ig=>{"use strict";Object.defineProperty(Ig,"__esModule",{value:!0});Ig.Db=void 0;var Oye=VO(),VF=pe(),Cye=np(),WF=tp(),ap=Lt(),vye=jd(),xye=K4(),Tye=PF(),zF=z(),Dye=NF(),KF=$F(),Ra=Er(),Mye=Ld(),Pye=jF(),Bye=$O(),Iye=I4(),Nye=Rd(),kye=X4(),Rye=UF(),Fye=si(),HF=sr(),br=X(),$ye=hn(),qye=["writeConcern","readPreference","readPreferenceTags","native_parser","forceServerObjectId","pkFactory","serializeFunctions","raw","authSource","ignoreUndefined","readConcern","retryMiliSeconds","numberOfRetries","useBigInt64","promoteBuffers","promoteLongs","bsonRegExp","enableUtf8Validation","promoteValues","compression","retryWrites","timeoutMS"],Z4=class{static{this.SYSTEM_NAMESPACE_COLLECTION=ap.SYSTEM_NAMESPACE_COLLECTION}static{this.SYSTEM_INDEX_COLLECTION=ap.SYSTEM_INDEX_COLLECTION}static{this.SYSTEM_PROFILE_COLLECTION=ap.SYSTEM_PROFILE_COLLECTION}static{this.SYSTEM_USER_COLLECTION=ap.SYSTEM_USER_COLLECTION}static{this.SYSTEM_COMMAND_COLLECTION=ap.SYSTEM_COMMAND_COLLECTION}static{this.SYSTEM_JS_COLLECTION=ap.SYSTEM_JS_COLLECTION}constructor(e,r,n){if(n=n??{},n=(0,br.filterOptions)(n,qye),typeof r=="string"&&r.includes("."))throw new zF.MongoInvalidArgumentError("Database names cannot contain the character '.'");this.s={options:n,readPreference:HF.ReadPreference.fromOptions(n),bsonOptions:(0,VF.resolveBSONOptions)(n,e),pkFactory:n?.pkFactory??br.DEFAULT_PK_FACTORY,readConcern:Fye.ReadConcern.fromOptions(n),writeConcern:$ye.WriteConcern.fromOptions(n),namespace:new br.MongoDBNamespace(r)},this.client=e}get databaseName(){return this.s.namespace.db}get options(){return this.s.options}get secondaryOk(){return this.s.readPreference?.preference!=="primary"||!1}get readConcern(){return this.s.readConcern}get readPreference(){return this.s.readPreference==null?this.client.readPreference:this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get namespace(){return this.s.namespace.toString()}get timeoutMS(){return this.s.options?.timeoutMS}async createCollection(e,r){return r=(0,br.resolveOptions)(this,r),await(0,Dye.createCollections)(this,e,r)}async command(e,r){return await(0,Ra.executeOperation)(this.client,new Nye.RunCommandOperation(this.s.namespace,e,(0,br.resolveOptions)(void 0,{...(0,VF.resolveBSONOptions)(r),timeoutMS:r?.timeoutMS??this.timeoutMS,session:r?.session,readPreference:r?.readPreference,signal:r?.signal})))}aggregate(e=[],r){return new vye.AggregationCursor(this.client,this.s.namespace,e,(0,br.resolveOptions)(this,r))}admin(){return new Oye.Admin(this)}collection(e,r={}){if(typeof r=="function")throw new zF.MongoInvalidArgumentError("The callback form of this helper has been removed.");return new WF.Collection(this,e,(0,br.resolveOptions)(this,r))}async stats(e){return await(0,Ra.executeOperation)(this.client,new Rye.DbStatsOperation(this,(0,br.resolveOptions)(this,e)))}listCollections(e={},r={}){return new xye.ListCollectionsCursor(this,e,(0,br.resolveOptions)(this,r))}async renameCollection(e,r,n){return await(0,Ra.executeOperation)(this.client,new Iye.RenameOperation(this.collection(e),r,(0,br.resolveOptions)(void 0,{...n,new_collection:!0,readPreference:HF.ReadPreference.primary})))}async dropCollection(e,r){return r=(0,br.resolveOptions)(this,r),await(0,KF.dropCollections)(this,e,r)}async dropDatabase(e){return await(0,Ra.executeOperation)(this.client,new KF.DropDatabaseOperation(this,(0,br.resolveOptions)(this,e)))}async collections(e){return e=(0,br.resolveOptions)(this,e),(await this.listCollections({},{...e,nameOnly:!0}).toArray()).filter(({name:n})=>!n.includes("$")).map(({name:n})=>new WF.Collection(this,n,this.s.options))}async createIndex(e,r,n){return(await(0,Ra.executeOperation)(this.client,Mye.CreateIndexesOperation.fromIndexSpecification(this,e,r,n)))[0]}async removeUser(e,r){return await(0,Ra.executeOperation)(this.client,new Bye.RemoveUserOperation(this,e,(0,br.resolveOptions)(this,r)))}async setProfilingLevel(e,r){return await(0,Ra.executeOperation)(this.client,new kye.SetProfilingLevelOperation(this,e,(0,br.resolveOptions)(this,r)))}async profilingLevel(e){return await(0,Ra.executeOperation)(this.client,new Pye.ProfilingLevelOperation(this,(0,br.resolveOptions)(this,e)))}async indexInformation(e,r){return await this.collection(e).indexInformation((0,br.resolveOptions)(this,r))}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new Cye.ChangeStream(this,e,(0,br.resolveOptions)(this,r))}runCursorCommand(e,r){return new Tye.RunCommandCursor(this,e,r)}};Ig.Db=Z4});var pi=m(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.aws4=void 0;li.getKerberos=jye;li.getZstdLibrary=Lye;li.getAwsCredentialProvider=Uye;li.getGcpMetadata=Vye;li.getSnappy=Wye;li.getSocks=zye;li.getMongoDBClientEncryption=Hye;var Fa=z();function Hd(t){let e=t?{kModuleError:t}:{};return new Proxy(e,{get:(r,n)=>{if(n==="kModuleError")return t;throw t},set:()=>{throw t}})}function jye(){let t;try{t=require("kerberos")}catch(e){t=Hd(new Fa.MongoMissingDependencyError("Optional module `kerberos` not found. Please install it to enable kerberos authentication",{cause:e,dependencyName:"kerberos"}))}return t}function Lye(){let t;try{t=require("@mongodb-js/zstd")}catch(e){t=Hd(new Fa.MongoMissingDependencyError("Optional module `@mongodb-js/zstd` not found. Please install it to enable zstd compression",{cause:e,dependencyName:"zstd"}))}return t}function Uye(){try{return require("@aws-sdk/credential-providers")}catch(t){return Hd(new Fa.MongoMissingDependencyError("Optional module `@aws-sdk/credential-providers` not found. Please install it to enable getting aws credentials via the official sdk.",{cause:t,dependencyName:"@aws-sdk/credential-providers"}))}}function Vye(){try{return require("gcp-metadata")}catch(t){return Hd(new Fa.MongoMissingDependencyError("Optional module `gcp-metadata` not found. Please install it to enable getting gcp credentials via the official sdk.",{cause:t,dependencyName:"gcp-metadata"}))}}function Wye(){try{return require("snappy")}catch(t){return{kModuleError:new Fa.MongoMissingDependencyError("Optional module `snappy` not found. Please install it to enable snappy compression",{cause:t,dependencyName:"snappy"})}}}function zye(){try{return require("socks")}catch(t){return{kModuleError:new Fa.MongoMissingDependencyError("Optional module `socks` not found. Please install it to connections over a SOCKS5 proxy",{cause:t,dependencyName:"socks"})}}}li.aws4=Kye();function Kye(){let t;try{t=require("aws4")}catch(e){t=Hd(new Fa.MongoMissingDependencyError("Optional module `aws4` not found. Please install it to enable AWS authentication",{cause:e,dependencyName:"aws4"}))}return t}function Hye(){let t=null;try{t=require("mongodb-client-encryption")}catch(e){return{kModuleError:new Fa.MongoMissingDependencyError("Optional module `mongodb-client-encryption` not found. Please install it to use auto encryption or ClientEncryption.",{cause:e,dependencyName:"mongodb-client-encryption"})}}return t}});var $a=m(up=>{"use strict";Object.defineProperty(up,"__esModule",{value:!0});up.AuthProvider=up.AuthContext=void 0;var Gye=z(),eC=class{constructor(e,r,n){this.reauthenticating=!1,this.connection=e,this.credentials=r,this.options=n}};up.AuthContext=eC;var tC=class{async prepare(e,r){return e}async reauth(e){if(e.reauthenticating)throw new Gye.MongoRuntimeError("Reauthentication already in progress.");try{e.reauthenticating=!0,await this.auth(e)}finally{e.reauthenticating=!1}}};up.AuthProvider=tC});var kg=m(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});di.GSSAPI=di.GSSAPICanonicalizationValue=void 0;di.performGSSAPICanonicalizeHostName=YF;di.resolveCname=iC;var nC=require("dns"),Jye=pi(),GF=z(),Yye=X(),Qye=$a();di.GSSAPICanonicalizationValue=Object.freeze({on:!0,off:!1,none:"none",forward:"forward",forwardAndReverse:"forwardAndReverse"});async function rC(t,e){return await t.command((0,Yye.ns)("$external.$cmd"),e)}var Gd,sC=class extends Qye.AuthProvider{async auth(e){let{connection:r,credentials:n}=e;if(n==null)throw new GF.MongoMissingCredentialsError("Credentials required for GSSAPI authentication");let{username:s}=n,i=await Xye(e),o=await i.step(""),a=await rC(r,Zye(o)),u=await JF(i,10,a.payload),c=await rC(r,ege(u,a.conversationId)),l=await tge(i,s,c.payload);await rC(r,{saslContinue:1,conversationId:c.conversationId,payload:l})}};di.GSSAPI=sC;async function Xye(t){let{hostAddress:e}=t.options,{credentials:r}=t;if(!e||typeof e.host!="string"||!r)throw new GF.MongoInvalidArgumentError("Connection must have host and port and credentials defined.");if(rge(),"kModuleError"in Gd)throw Gd.kModuleError;let{initializeClient:n}=Gd,{username:s,password:i}=r,o=r.mechanismProperties,a=o.SERVICE_NAME??"mongodb",u=await YF(e.host,o),c={};i!=null&&Object.assign(c,{user:s,password:i});let l=o.SERVICE_HOST??u,p=`${a}${process.platform==="win32"?"/":"@"}${l}`;return"SERVICE_REALM"in o&&(p=`${p}@${o.SERVICE_REALM}`),await n(p,c)}function Zye(t){return{saslStart:1,mechanism:"GSSAPI",payload:t,autoAuthorize:1}}function ege(t,e){return{saslContinue:1,conversationId:e,payload:t}}async function JF(t,e,r){try{return await t.step(r)||""}catch(n){if(e===0)throw n;return await JF(t,e-1,r)}}async function tge(t,e,r){let n=await t.unwrap(r);return await t.wrap(n||"",{user:e})}async function YF(t,e){let r=e.CANONICALIZE_HOST_NAME;if(!r||r===di.GSSAPICanonicalizationValue.none)return t;if(r===di.GSSAPICanonicalizationValue.on||r===di.GSSAPICanonicalizationValue.forwardAndReverse){let{address:n}=await nC.promises.lookup(t);try{let s=await nC.promises.resolvePtr(n);return s.length>0?s[0]:t}catch{return await iC(t)}}else return await iC(t)}async function iC(t){try{let e=await nC.promises.resolveCname(t);return e.length>0?e[0]:t}catch{return t}}function rge(){Gd||(Gd=(0,Jye.getKerberos)())}});var zi=m(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});Wi.AUTH_MECHS_AUTH_SRC_EXTERNAL=Wi.AuthMechanism=void 0;Wi.AuthMechanism=Object.freeze({MONGODB_AWS:"MONGODB-AWS",MONGODB_DEFAULT:"DEFAULT",MONGODB_GSSAPI:"GSSAPI",MONGODB_PLAIN:"PLAIN",MONGODB_SCRAM_SHA1:"SCRAM-SHA-1",MONGODB_SCRAM_SHA256:"SCRAM-SHA-256",MONGODB_X509:"MONGODB-X509",MONGODB_OIDC:"MONGODB-OIDC"});Wi.AUTH_MECHS_AUTH_SRC_EXTERNAL=new Set([Wi.AuthMechanism.MONGODB_GSSAPI,Wi.AuthMechanism.MONGODB_AWS,Wi.AuthMechanism.MONGODB_OIDC,Wi.AuthMechanism.MONGODB_X509])});var Rg=m(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});Qu.MongoCredentials=Qu.DEFAULT_ALLOWED_HOSTS=void 0;var Is=z(),nge=kg(),yn=zi();function sge(t){return t&&Array.isArray(t.saslSupportedMechs)?t.saslSupportedMechs.includes(yn.AuthMechanism.MONGODB_SCRAM_SHA256)?yn.AuthMechanism.MONGODB_SCRAM_SHA256:yn.AuthMechanism.MONGODB_SCRAM_SHA1:yn.AuthMechanism.MONGODB_SCRAM_SHA256}var QF=["test","azure","gcp","k8s"],XF="Auth mechanism property ALLOWED_HOSTS must be an array of strings.";Qu.DEFAULT_ALLOWED_HOSTS=["*.mongodb.net","*.mongodb-qa.net","*.mongodb-dev.net","*.mongodbgov.net","localhost","127.0.0.1","::1"];var ige="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure or gcp.",oC=class t{constructor(e){this.username=e.username??"",this.password=e.password,this.source=e.source,!this.source&&e.db&&(this.source=e.db),this.mechanism=e.mechanism||yn.AuthMechanism.MONGODB_DEFAULT,this.mechanismProperties=e.mechanismProperties||{},this.mechanism===yn.AuthMechanism.MONGODB_OIDC&&!this.mechanismProperties.ALLOWED_HOSTS&&(this.mechanismProperties={...this.mechanismProperties,ALLOWED_HOSTS:Qu.DEFAULT_ALLOWED_HOSTS}),Object.freeze(this.mechanismProperties),Object.freeze(this)}equals(e){return this.mechanism===e.mechanism&&this.username===e.username&&this.password===e.password&&this.source===e.source}resolveAuthMechanism(e){return this.mechanism.match(/DEFAULT/i)?new t({username:this.username,password:this.password,source:this.source,mechanism:sge(e),mechanismProperties:this.mechanismProperties}):this}validate(){if((this.mechanism===yn.AuthMechanism.MONGODB_GSSAPI||this.mechanism===yn.AuthMechanism.MONGODB_PLAIN||this.mechanism===yn.AuthMechanism.MONGODB_SCRAM_SHA1||this.mechanism===yn.AuthMechanism.MONGODB_SCRAM_SHA256)&&!this.username)throw new Is.MongoMissingCredentialsError(`Username required for mechanism '${this.mechanism}'`);if(this.mechanism===yn.AuthMechanism.MONGODB_OIDC){if(this.username&&this.mechanismProperties.ENVIRONMENT&&this.mechanismProperties.ENVIRONMENT!=="azure")throw new Is.MongoInvalidArgumentError(`username and ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' may not be used together for mechanism '${this.mechanism}'.`);if(this.username&&this.password)throw new Is.MongoInvalidArgumentError(`No password is allowed in ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' for '${this.mechanism}'.`);if((this.mechanismProperties.ENVIRONMENT==="azure"||this.mechanismProperties.ENVIRONMENT==="gcp")&&!this.mechanismProperties.TOKEN_RESOURCE)throw new Is.MongoInvalidArgumentError(ige);if(this.mechanismProperties.ENVIRONMENT&&!QF.includes(this.mechanismProperties.ENVIRONMENT))throw new Is.MongoInvalidArgumentError(`Currently only a ENVIRONMENT in ${QF.join(",")} is supported for mechanism '${this.mechanism}'.`);if(!this.mechanismProperties.ENVIRONMENT&&!this.mechanismProperties.OIDC_CALLBACK&&!this.mechanismProperties.OIDC_HUMAN_CALLBACK)throw new Is.MongoInvalidArgumentError(`Either a ENVIRONMENT, OIDC_CALLBACK, or OIDC_HUMAN_CALLBACK must be specified for mechanism '${this.mechanism}'.`);if(this.mechanismProperties.ALLOWED_HOSTS){let r=this.mechanismProperties.ALLOWED_HOSTS;if(!Array.isArray(r))throw new Is.MongoInvalidArgumentError(XF);for(let n of r)if(typeof n!="string")throw new Is.MongoInvalidArgumentError(XF)}}if(yn.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(this.mechanism)&&this.source!=null&&this.source!=="$external")throw new Is.MongoAPIError(`Invalid source '${this.source}' for mechanism '${this.mechanism}' specified.`);if(this.mechanism===yn.AuthMechanism.MONGODB_PLAIN&&this.source==null)throw new Is.MongoAPIError("PLAIN Authentication Mechanism needs an auth source");if(this.mechanism===yn.AuthMechanism.MONGODB_X509&&this.password!=null){if(this.password===""){Reflect.set(this,"password",void 0);return}throw new Is.MongoAPIError("Password not allowed for mechanism MONGODB-X509")}let e=this.mechanismProperties.CANONICALIZE_HOST_NAME??!1;if(!Object.values(nge.GSSAPICanonicalizationValue).includes(e))throw new Is.MongoAPIError(`Invalid CANONICALIZE_HOST_NAME value: ${e}`)}static merge(e,r){return new t({username:r.username??e?.username??"",password:r.password??e?.password??"",mechanism:r.mechanism??e?.mechanism??yn.AuthMechanism.MONGODB_DEFAULT,mechanismProperties:r.mechanismProperties??e?.mechanismProperties??{},source:r.source??r.db??e?.source??"admin"})}};Qu.MongoCredentials=oC});var ZF=m((VNe,oge)=>{oge.exports={name:"mongodb",version:"7.0.0",description:"The official MongoDB driver for Node.js",main:"lib/index.js",files:["lib","src","etc/prepare.js","mongodb.d.ts","tsconfig.json"],types:"mongodb.d.ts",repository:{type:"git",url:"git@github.com:mongodb/node-mongodb-native.git"},keywords:["mongodb","driver","official"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},dependencies:{"@mongodb-js/saslprep":"^1.3.0",bson:"^7.0.0","mongodb-connection-string-url":"^7.0.0"},peerDependencies:{"@aws-sdk/credential-providers":"^3.806.0","@mongodb-js/zstd":"^7.0.0","gcp-metadata":"^7.0.1",kerberos:"^7.0.0","mongodb-client-encryption":">=7.0.0 <7.1.0",snappy:"^7.3.2",socks:"^2.8.6"},peerDependenciesMeta:{"@aws-sdk/credential-providers":{optional:!0},"@mongodb-js/zstd":{optional:!0},kerberos:{optional:!0},snappy:{optional:!0},"mongodb-client-encryption":{optional:!0},"gcp-metadata":{optional:!0},socks:{optional:!0}},devDependencies:{"@aws-sdk/credential-providers":"^3.876.0","@iarna/toml":"^2.2.5","@istanbuljs/nyc-config-typescript":"^1.0.2","@microsoft/api-extractor":"^7.52.11","@microsoft/tsdoc-config":"^0.17.1","@mongodb-js/zstd":"^7.0.0","@types/chai":"^4.3.17","@types/chai-subset":"^1.3.5","@types/express":"^5.0.3","@types/kerberos":"^1.1.5","@types/mocha":"^10.0.9","@types/node":"^22.15.3","@types/saslprep":"^1.0.3","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/sinon-chai":"^4.0.0","@types/whatwg-url":"^13.0.0","@typescript-eslint/eslint-plugin":"^8.41.0","@typescript-eslint/parser":"^8.31.1",chai:"^4.4.1","chai-subset":"^1.6.0",chalk:"^4.1.2",eslint:"^9.34.0","eslint-config-prettier":"^10.1.8","eslint-plugin-mocha":"^10.4.1","eslint-plugin-prettier":"^5.5.4","eslint-plugin-simple-import-sort":"^12.1.1","eslint-plugin-tsdoc":"^0.4.0","eslint-plugin-unused-imports":"^4.2.0",express:"^5.1.0","gcp-metadata":"^7.0.1","js-yaml":"^4.1.0",mocha:"^11.7.1","mocha-sinon":"^2.1.2","mongodb-client-encryption":"^7.0.0",nyc:"^15.1.0",prettier:"^3.6.2",semver:"^7.7.2",sinon:"^18.0.1","sinon-chai":"^3.7.0",snappy:"^7.3.2",socks:"^2.8.7","source-map-support":"^0.5.21","ts-node":"^10.9.2",tsd:"^0.33.0",typescript:"5.8.3","typescript-cached-transpile":"^0.0.6","v8-heapsnapshot":"^1.3.1",yargs:"^18.0.0"},license:"Apache-2.0",engines:{node:">=20.19.0"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},homepage:"https://github.com/mongodb/node-mongodb-native",scripts:{"build:evergreen":"node .evergreen/generate_evergreen_tasks.js","build:ts":"node ./node_modules/typescript/bin/tsc","build:dts":"npm run build:ts && api-extractor run && node etc/clean_definition_files.cjs && ESLINT_USE_FLAT_CONFIG=false eslint --no-ignore --fix mongodb.d.ts","build:docs":"./etc/docs/build.ts","build:typedoc":"typedoc","build:nightly":"node ./.github/scripts/nightly.mjs","check:bench":"npm --prefix test/benchmarks/driver_bench start","check:coverage":"nyc npm run test:all","check:integration-coverage":"nyc npm run check:test","check:lambda":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/handler.test.js","check:lambda:aws":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/aws_handler.test.js","check:lint":"npm run build:dts && npm run check:dts && npm run check:eslint && npm run check:tsd","check:eslint":"npm run build:dts && ESLINT_USE_FLAT_CONFIG=false eslint -v && ESLINT_USE_FLAT_CONFIG=false eslint --max-warnings=0 --ext '.js,.ts' src test","check:tsd":"tsd --version && tsd","check:dependencies":"mocha test/action/dependency.test.ts","check:dts":"node ./node_modules/typescript/bin/tsc --target es2023 --module commonjs --noEmit mongodb.d.ts && tsd","check:search-indexes":"nyc mocha --config test/mocha_mongodb.js test/manual/search-index-management.prose.test.ts","check:test":"mocha --config test/mocha_mongodb.js test/integration","check:unit":"nyc mocha test/unit","check:ts":"node ./node_modules/typescript/bin/tsc -v && node ./node_modules/typescript/bin/tsc --noEmit","check:atlas":"nyc mocha --config test/manual/mocharc.js test/manual/atlas_connectivity.test.ts","check:drivers-atlas-testing":"nyc mocha --config test/mocha_mongodb.js test/atlas/drivers_atlas_testing.test.ts","check:aws":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_aws.test.ts test/integration/auth/mongodb_aws.prose.test.ts","check:oidc-auth":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/auth.spec.test.ts","check:oidc-test":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc.prose.test.ts","check:oidc-azure":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_azure.prose.05.test.ts","check:oidc-gcp":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_gcp.prose.06.test.ts","check:oidc-k8s":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_k8s.prose.07.test.ts","check:kerberos":"nyc mocha --config test/manual/mocharc.js test/manual/kerberos.test.ts","check:tls":"nyc mocha --config test/manual/mocharc.js test/manual/tls_support.test.ts","check:ldap":"nyc mocha --config test/manual/mocharc.js test/manual/ldap.test.ts","check:socks5":"nyc mocha --config test/manual/mocharc.js test/manual/socks5.test.ts","check:csfle":"nyc mocha --config test/mocha_mongodb.js test/integration/client-side-encryption","check:snappy":"nyc mocha test/unit/assorted/snappy.test.js","check:x509":"nyc mocha test/manual/x509_auth.test.ts","fix:eslint":"npm run check:eslint -- --fix",prepare:"node etc/prepare.js","preview:docs":"ts-node etc/docs/preview.ts",test:"npm run check:lint && npm run test:all","test:all":"npm run check:unit && npm run check:test","update:docs":"npm run build:docs -- --yes"},tsd:{directory:"test/types",compilerOptions:{strict:!0,target:"esnext",module:"commonjs",moduleResolution:"node"}}}});var aC=m(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});Xu.LimitedSizeDocument=void 0;Xu.isDriverInfoEqual=cge;Xu.makeClientMetadata=lge;Xu.getFAASEnv=r$;var Jd=require("os"),Yd=require("process"),cp=pe(),e$=z(),age=X(),uge=ZF().version;function cge(t,e){let r=(n,s)=>(n||=void 0,s||=void 0,n===s);return r(t.name,e.name)&&r(t.platform,e.platform)&&r(t.version,e.version)}var Qd=class{constructor(e){this.document=new Map,this.documentSize=5,this.maxSize=e}ifItFitsItSits(e,r){let n=cp.BSON.serialize(new Map().set(e,r)).byteLength-5;return n+this.documentSize>this.maxSize?!1:(this.documentSize+=n,this.document.set(e,r),!0)}toObject(){return cp.BSON.deserialize(cp.BSON.serialize(this.document),{promoteLongs:!1,promoteBuffers:!1,promoteValues:!1,useBigInt64:!1})}};Xu.LimitedSizeDocument=Qd;async function lge(t,{appName:e=""}){let r=new Qd(512);if(e.length>0){let a=Buffer.byteLength(e,"utf8")<=128?e:Buffer.from(e,"utf8").subarray(0,128).toString("utf8");r.ifItFitsItSits("application",{name:a})}let n={name:"nodejs",version:uge};for(let{name:a="",version:u=""}of t)a.length>0&&(n.name=`${n.name}|${a}`),u.length>0&&(n.version=`${n.version}|${u}`);if(!r.ifItFitsItSits("driver",n))throw new e$.MongoInvalidArgumentError("Unable to include driverInfo name and version, metadata cannot exceed 512 bytes");let s=hge();for(let{platform:a=""}of t)a.length>0&&(s=`${s}|${a}`);if(!r.ifItFitsItSits("platform",s))throw new e$.MongoInvalidArgumentError("Unable to include driverInfo platform, metadata cannot exceed 512 bytes");let i=new Map().set("name",Yd.platform).set("architecture",Yd.arch).set("version",Jd.release()).set("type",Jd.type());if(!r.ifItFitsItSits("os",i)){for(let a of i.keys())if(i.delete(a),i.size===0||r.ifItFitsItSits("os",i))break}let o=r$();if(o!=null&&!r.ifItFitsItSits("env",o)){for(let a of o.keys())if(o.delete(a),o.size===0||r.ifItFitsItSits("env",o))break}return await dge(r.toObject())}var t$;async function pge(){t$??=(0,age.fileIsAccessible)("/.dockerenv");let t=await t$,{KUBERNETES_SERVICE_HOST:e=""}=Yd.env,r=e.length>0,n={};return t&&(n.runtime="docker"),r&&(n.orchestrator="kubernetes"),n}async function dge(t){let e=await pge();if(Object.keys(e).length===0)return t;let r=new Qd(512),n={...t?.env,container:e};for(let[s,i]of Object.entries(t))s!=="env"?r.ifItFitsItSits(s,i):r.ifItFitsItSits("env",n)||r.ifItFitsItSits("env",i);return"env"in t||r.ifItFitsItSits("env",n),r.toObject()}function r$(){let{AWS_EXECUTION_ENV:t="",AWS_LAMBDA_RUNTIME_API:e="",FUNCTIONS_WORKER_RUNTIME:r="",K_SERVICE:n="",FUNCTION_NAME:s="",VERCEL:i="",AWS_LAMBDA_FUNCTION_MEMORY_SIZE:o="",AWS_REGION:a="",FUNCTION_MEMORY_MB:u="",FUNCTION_REGION:c="",FUNCTION_TIMEOUT_SEC:l="",VERCEL_REGION:p=""}=Yd.env,d=t.startsWith("AWS_Lambda_")||e.length>0,h=r.length>0,f=n.length>0||s.length>0,y=i.length>0,g=new Map;return y&&!(h||f)?(p.length>0&&g.set("region",p),g.set("name","vercel"),g):d&&!(h||f||y)?(a.length>0&&g.set("region",a),o.length>0&&Number.isInteger(+o)&&g.set("memory_mb",new cp.Int32(o)),g.set("name","aws.lambda"),g):h&&!(f||d||y)?(g.set("name","azure.func"),g):f&&!(h||d||y)?(c.length>0&&g.set("region",c),u.length>0&&Number.isInteger(+u)&&g.set("memory_mb",new cp.Int32(u)),l.length>0&&Number.isInteger(+l)&&g.set("timeout_sec",new cp.Int32(l)),g.set("name","gcp.func"),g):null}function hge(){return"Deno"in globalThis?`Deno v${typeof Deno?.version?.deno=="string"?Deno?.version?.deno:"0.0.0-unknown"}, ${Jd.endianness()}`:"Bun"in globalThis?`Bun v${typeof Bun?.version=="string"?Bun?.version:"0.0.0-unknown"}, ${Jd.endianness()}`:`Node.js ${Yd.version}, ${Jd.endianness()}`}});var $g=m(Ge=>{"use strict";function et(t,e,r){return r.globals&&(t=r.globals[t.name]),new t(`${r.context?r.context:"Value"} ${e}.`)}function dp(t,e){if(typeof t=="bigint")throw et(TypeError,"is a BigInt which cannot be converted to a number",e);return e.globals?e.globals.Number(t):Number(t)}function s$(t){return t>0&&t%1===.5&&(t&1)===0||t<0&&t%1===-.5&&(t&1)===1?Xd(Math.floor(t)):Xd(Math.round(t))}function Fg(t){return Xd(Math.trunc(t))}function n$(t){return t<0?-1:1}function fge(t,e){let r=t%e;return n$(e)!==n$(r)?r+e:r}function Xd(t){return t===0?0:t}function hp(t,{unsigned:e}){let r,n;e?(r=0,n=2**t-1):(r=-(2**(t-1)),n=2**(t-1)-1);let s=2**t,i=2**(t-1);return(o,a={})=>{let u=dp(o,a);if(u=Xd(u),a.enforceRange){if(!Number.isFinite(u))throw et(TypeError,"is not a finite number",a);if(u=Fg(u),u<r||u>n)throw et(TypeError,`is outside the accepted range of ${r} to ${n}, inclusive`,a);return u}return!Number.isNaN(u)&&a.clamp?(u=Math.min(Math.max(u,r),n),u=s$(u),u):!Number.isFinite(u)||u===0?0:(u=Fg(u),u>=r&&u<=n?u:(u=fge(u,s),!e&&u>=i?u-s:u))}}function i$(t,{unsigned:e}){let r=Number.MAX_SAFE_INTEGER,n=e?0:Number.MIN_SAFE_INTEGER,s=e?BigInt.asUintN:BigInt.asIntN;return(i,o={})=>{let a=dp(i,o);if(a=Xd(a),o.enforceRange){if(!Number.isFinite(a))throw et(TypeError,"is not a finite number",o);if(a=Fg(a),a<n||a>r)throw et(TypeError,`is outside the accepted range of ${n} to ${r}, inclusive`,o);return a}if(!Number.isNaN(a)&&o.clamp)return a=Math.min(Math.max(a,n),r),a=s$(a),a;if(!Number.isFinite(a)||a===0)return 0;let u=BigInt(Fg(a));return u=s(t,u),Number(u)}}Ge.any=t=>t;Ge.undefined=()=>{};Ge.boolean=t=>!!t;Ge.byte=hp(8,{unsigned:!1});Ge.octet=hp(8,{unsigned:!0});Ge.short=hp(16,{unsigned:!1});Ge["unsigned short"]=hp(16,{unsigned:!0});Ge.long=hp(32,{unsigned:!1});Ge["unsigned long"]=hp(32,{unsigned:!0});Ge["long long"]=i$(64,{unsigned:!1});Ge["unsigned long long"]=i$(64,{unsigned:!0});Ge.double=(t,e={})=>{let r=dp(t,e);if(!Number.isFinite(r))throw et(TypeError,"is not a finite floating-point value",e);return r};Ge["unrestricted double"]=(t,e={})=>dp(t,e);Ge.float=(t,e={})=>{let r=dp(t,e);if(!Number.isFinite(r))throw et(TypeError,"is not a finite floating-point value",e);if(Object.is(r,-0))return r;let n=Math.fround(r);if(!Number.isFinite(n))throw et(TypeError,"is outside the range of a single-precision floating-point value",e);return n};Ge["unrestricted float"]=(t,e={})=>{let r=dp(t,e);return isNaN(r)||Object.is(r,-0)?r:Math.fround(r)};Ge.DOMString=(t,e={})=>{if(e.treatNullAsEmptyString&&t===null)return"";if(typeof t=="symbol")throw et(TypeError,"is a symbol, which cannot be converted to a string",e);return(e.globals?e.globals.String:String)(t)};Ge.ByteString=(t,e={})=>{let r=Ge.DOMString(t,e),n;for(let s=0;(n=r.codePointAt(s))!==void 0;++s)if(n>255)throw et(TypeError,"is not a valid ByteString",e);return r};Ge.USVString=(t,e={})=>{let r=Ge.DOMString(t,e),n=r.length,s=[];for(let i=0;i<n;++i){let o=r.charCodeAt(i);if(o<55296||o>57343)s.push(String.fromCodePoint(o));else if(56320<=o&&o<=57343)s.push(String.fromCodePoint(65533));else if(i===n-1)s.push(String.fromCodePoint(65533));else{let a=r.charCodeAt(i+1);if(56320<=a&&a<=57343){let u=o&1023,c=a&1023;s.push(String.fromCodePoint(65536+1024*u+c)),++i}else s.push(String.fromCodePoint(65533))}}return s.join("")};Ge.object=(t,e={})=>{if(t===null||typeof t!="object"&&typeof t!="function")throw et(TypeError,"is not an object",e);return t};var mge=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get,yge=typeof SharedArrayBuffer=="function"?Object.getOwnPropertyDescriptor(SharedArrayBuffer.prototype,"byteLength").get:null;function uC(t){try{return mge.call(t),!0}catch{return!1}}function lp(t){try{return yge.call(t),!0}catch{return!1}}function pp(t){try{return new Uint8Array(t),!1}catch{return!0}}Ge.ArrayBuffer=(t,e={})=>{if(!uC(t))throw e.allowShared&&!lp(t)?et(TypeError,"is not an ArrayBuffer or SharedArrayBuffer",e):et(TypeError,"is not an ArrayBuffer",e);if(pp(t))throw et(TypeError,"is a detached ArrayBuffer",e);return t};var gge=Object.getOwnPropertyDescriptor(DataView.prototype,"byteLength").get;Ge.DataView=(t,e={})=>{try{gge.call(t)}catch{throw et(TypeError,"is not a DataView",e)}if(!e.allowShared&&lp(t.buffer))throw et(TypeError,"is backed by a SharedArrayBuffer, which is not allowed",e);if(pp(t.buffer))throw et(TypeError,"is backed by a detached ArrayBuffer",e);return t};var _ge=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array).prototype,Symbol.toStringTag).get;[Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Uint8ClampedArray,Float32Array,Float64Array].forEach(t=>{let{name:e}=t,r=/^[AEIOU]/u.test(e)?"an":"a";Ge[e]=(n,s={})=>{if(!ArrayBuffer.isView(n)||_ge.call(n)!==e)throw et(TypeError,`is not ${r} ${e} object`,s);if(!s.allowShared&&lp(n.buffer))throw et(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",s);if(pp(n.buffer))throw et(TypeError,"is a view on a detached ArrayBuffer",s);return n}});Ge.ArrayBufferView=(t,e={})=>{if(!ArrayBuffer.isView(t))throw et(TypeError,"is not a view on an ArrayBuffer or SharedArrayBuffer",e);if(!e.allowShared&&lp(t.buffer))throw et(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",e);if(pp(t.buffer))throw et(TypeError,"is a view on a detached ArrayBuffer",e);return t};Ge.BufferSource=(t,e={})=>{if(ArrayBuffer.isView(t)){if(!e.allowShared&&lp(t.buffer))throw et(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",e);if(pp(t.buffer))throw et(TypeError,"is a view on a detached ArrayBuffer",e);return t}if(!e.allowShared&&!uC(t))throw et(TypeError,"is not an ArrayBuffer or a view on one",e);if(e.allowShared&&!lp(t)&&!uC(t))throw et(TypeError,"is not an ArrayBuffer, SharedArrayBuffer, or a view on one",e);if(pp(t))throw et(TypeError,"is a detached ArrayBuffer",e);return t};Ge.DOMTimeStamp=Ge["unsigned long long"]});var jg=m((d$,h$)=>{"use strict";function Ege(t){return typeof t=="object"&&t!==null||typeof t=="function"}var o$=Function.prototype.call.bind(Object.prototype.hasOwnProperty);function bge(t,e){for(let r of Reflect.ownKeys(e)){let n=Reflect.getOwnPropertyDescriptor(e,r);if(n&&!Reflect.defineProperty(t,r,n))throw new TypeError(`Cannot redefine property: ${String(r)}`)}}function wge(t,e){let r=c$(t);return Object.defineProperties(Object.create(r["%Object.prototype%"]),Object.getOwnPropertyDescriptors(e))}var a$=Symbol("wrapper"),u$=Symbol("impl"),fp=Symbol("SameObject caches"),qg=Symbol.for("[webidl2js] constructor registry"),Sge=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);function c$(t){if(o$(t,qg))return t[qg];let e=Object.create(null);e["%Object.prototype%"]=t.Object.prototype,e["%IteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(new t.Array()[Symbol.iterator]()));try{e["%AsyncIteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(t.eval("(async function* () {})").prototype))}catch{e["%AsyncIteratorPrototype%"]=Sge}return t[qg]=e,e}function Age(t,e,r){return t[fp]||(t[fp]=Object.create(null)),e in t[fp]||(t[fp][e]=r()),t[fp][e]}function l$(t){return t?t[a$]:null}function p$(t){return t?t[u$]:null}function Oge(t){let e=l$(t);return e||t}function Cge(t){let e=p$(t);return e||t}var vge=Symbol("internal");function xge(t){if(typeof t!="string")return!1;let e=t>>>0;if(e===2**32-1)return!1;let r=`${e}`;return t===r}var Tge=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get;function Dge(t){try{return Tge.call(t),!0}catch{return!1}}function Mge([t,e],r){let n;switch(r){case"key":n=t;break;case"value":n=e;break;case"key+value":n=[t,e];break}return{value:n,done:!1}}var Pge=Symbol("supports property index"),Bge=Symbol("supported property indices"),Ige=Symbol("supports property name"),Nge=Symbol("supported property names"),kge=Symbol("indexed property get"),Rge=Symbol("indexed property set new"),Fge=Symbol("indexed property set existing"),$ge=Symbol("named property get"),qge=Symbol("named property set new"),jge=Symbol("named property set existing"),Lge=Symbol("named property delete"),Uge=Symbol("async iterator get the next iteration result"),Vge=Symbol("async iterator return steps"),Wge=Symbol("async iterator initialization steps"),zge=Symbol("async iterator end of iteration");h$.exports=d$={isObject:Ege,hasOwn:o$,define:bge,newObjectInRealm:wge,wrapperSymbol:a$,implSymbol:u$,getSameObject:Age,ctorRegistrySymbol:qg,initCtorRegistry:c$,wrapperForImpl:l$,implForWrapper:p$,tryWrapperForImpl:Oge,tryImplForWrapper:Cge,iterInternalSymbol:vge,isArrayBuffer:Dge,isArrayIndexPropName:xge,supportsPropertyIndex:Pge,supportedPropertyIndices:Bge,supportsPropertyName:Ige,supportedPropertyNames:Nge,indexedGet:kge,indexedSetNew:Rge,indexedSetExisting:Fge,namedGet:$ge,namedSetNew:qge,namedSetExisting:jge,namedDelete:Lge,asyncIteratorNext:Uge,asyncIteratorReturn:Vge,asyncIteratorInit:Wge,asyncIteratorEOI:zge,iteratorResult:Mge}});var w$=m((KNe,b$)=>{"use strict";var Kge=/^xn--/,Hge=/[^\0-\x7F]/,Gge=/[\x2E\u3002\uFF0E\uFF61]/g,Jge={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},cC=35,Ki=Math.floor,lC=String.fromCharCode;function qa(t){throw new RangeError(Jge[t])}function Yge(t,e){let r=[],n=t.length;for(;n--;)r[n]=e(t[n]);return r}function m$(t,e){let r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(Gge,".");let s=t.split("."),i=Yge(s,e).join(".");return n+i}function y$(t){let e=[],r=0,n=t.length;for(;r<n;){let s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){let i=t.charCodeAt(r++);(i&64512)==56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),r--)}else e.push(s)}return e}var Qge=t=>String.fromCodePoint(...t),Xge=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:36},f$=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},g$=function(t,e,r){let n=0;for(t=r?Ki(t/700):t>>1,t+=Ki(t/e);t>cC*26>>1;n+=36)t=Ki(t/cC);return Ki(n+(cC+1)*t/(t+38))},_$=function(t){let e=[],r=t.length,n=0,s=128,i=72,o=t.lastIndexOf("-");o<0&&(o=0);for(let a=0;a<o;++a)t.charCodeAt(a)>=128&&qa("not-basic"),e.push(t.charCodeAt(a));for(let a=o>0?o+1:0;a<r;){let u=n;for(let l=1,p=36;;p+=36){a>=r&&qa("invalid-input");let d=Xge(t.charCodeAt(a++));d>=36&&qa("invalid-input"),d>Ki((2147483647-n)/l)&&qa("overflow"),n+=d*l;let h=p<=i?1:p>=i+26?26:p-i;if(d<h)break;let f=36-h;l>Ki(2147483647/f)&&qa("overflow"),l*=f}let c=e.length+1;i=g$(n-u,c,u==0),Ki(n/c)>2147483647-s&&qa("overflow"),s+=Ki(n/c),n%=c,e.splice(n++,0,s)}return String.fromCodePoint(...e)},E$=function(t){let e=[];t=y$(t);let r=t.length,n=128,s=0,i=72;for(let u of t)u<128&&e.push(lC(u));let o=e.length,a=o;for(o&&e.push("-");a<r;){let u=2147483647;for(let l of t)l>=n&&l<u&&(u=l);let c=a+1;u-n>Ki((2147483647-s)/c)&&qa("overflow"),s+=(u-n)*c,n=u;for(let l of t)if(l<n&&++s>2147483647&&qa("overflow"),l===n){let p=s;for(let d=36;;d+=36){let h=d<=i?1:d>=i+26?26:d-i;if(p<h)break;let f=p-h,y=36-h;e.push(lC(f$(h+f%y,0))),p=Ki(f/y)}e.push(lC(f$(p,0))),i=g$(s,c,a===o),s=0,++a}++s,++n}return e.join("")},Zge=function(t){return m$(t,function(e){return Kge.test(e)?_$(e.slice(4).toLowerCase()):e})},e2e=function(t){return m$(t,function(e){return Hge.test(e)?"xn--"+E$(e):e})},t2e={version:"2.3.1",ucs2:{decode:y$,encode:Qge},decode:_$,encode:E$,toASCII:e2e,toUnicode:Zge};b$.exports=t2e});var A$=m((HNe,S$)=>{"use strict";var r2e=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113B8}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]/u,n2e=/[\u094D\u09CD\u0A4D\u0ACD\u0B4D\u0BCD\u0C4D\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E3A\u0EBA\u0F84\u1039\u103A\u1714\u1715\u1734\u17D2\u1A60\u1B44\u1BAA\u1BAB\u1BF2\u1BF3\u2D7F\uA806\uA82C\uA8C4\uA953\uA9C0\uAAF6\uABED\u{10A3F}\u{11046}\u{11070}\u{1107F}\u{110B9}\u{11133}\u{11134}\u{111C0}\u{11235}\u{112EA}\u{1134D}\u{113CE}-\u{113D0}\u{11442}\u{114C2}\u{115BF}\u{1163F}\u{116B6}\u{1172B}\u{11839}\u{1193D}\u{1193E}\u{119E0}\u{11A34}\u{11A47}\u{11A99}\u{11C3F}\u{11D44}\u{11D45}\u{11D97}\u{11F41}\u{11F42}\u{1612F}]/u,s2e=/[\u0620\u0626\u0628\u062A-\u062E\u0633-\u063F\u0641-\u0647\u0649\u064A\u066E\u066F\u0678-\u0687\u069A-\u06BF\u06C1\u06C2\u06CC\u06CE\u06D0\u06D1\u06FA-\u06FC\u06FF\u0712-\u0714\u071A-\u071D\u071F-\u0727\u0729\u072B\u072D\u072E\u074E-\u0758\u075C-\u076A\u076D-\u0770\u0772\u0775-\u0777\u077A-\u077F\u07CA-\u07EA\u0841-\u0845\u0848\u084A-\u0853\u0855\u0860\u0862-\u0865\u0868\u0886\u0889-\u088D\u08A0-\u08A9\u08AF\u08B0\u08B3-\u08B8\u08BA-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA872\u{10AC0}-\u{10AC4}\u{10ACD}\u{10AD3}-\u{10ADC}\u{10ADE}-\u{10AE0}\u{10AEB}-\u{10AEE}\u{10B80}\u{10B82}\u{10B86}-\u{10B88}\u{10B8A}\u{10B8B}\u{10B8D}\u{10B90}\u{10BAD}\u{10BAE}\u{10D00}-\u{10D21}\u{10D23}\u{10EC3}\u{10EC4}\u{10F30}-\u{10F32}\u{10F34}-\u{10F44}\u{10F51}-\u{10F53}\u{10F70}-\u{10F73}\u{10F76}-\u{10F81}\u{10FB0}\u{10FB2}\u{10FB3}\u{10FB8}\u{10FBB}\u{10FBC}\u{10FBE}\u{10FBF}\u{10FC1}\u{10FC4}\u{10FCA}\u{10FCB}\u{1E900}-\u{1E943}][\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*\u200C[\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*[\u0620\u0622-\u063F\u0641-\u064A\u066E\u066F\u0671-\u0673\u0675-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u077F\u07CA-\u07EA\u0840-\u0858\u0860\u0862-\u0865\u0867-\u086A\u0870-\u0882\u0886\u0889-\u088E\u08A0-\u08AC\u08AE-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA871\u{10AC0}-\u{10AC5}\u{10AC7}\u{10AC9}\u{10ACA}\u{10ACE}-\u{10AD6}\u{10AD8}-\u{10AE1}\u{10AE4}\u{10AEB}-\u{10AEF}\u{10B80}-\u{10B91}\u{10BA9}-\u{10BAE}\u{10D01}-\u{10D23}\u{10EC2}-\u{10EC4}\u{10F30}-\u{10F44}\u{10F51}-\u{10F54}\u{10F70}-\u{10F81}\u{10FB0}\u{10FB2}-\u{10FB6}\u{10FB8}-\u{10FBF}\u{10FC1}-\u{10FC4}\u{10FC9}\u{10FCA}\u{1E900}-\u{1E943}]/u,i2e=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,o2e=/[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u249C-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCEF}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D800}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]/u,a2e=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D4A}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,u2e=/^[\0-\x08\x0E-\x1B!-@\[-`\{-\x84\x86-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02B9\u02BA\u02C2-\u02CF\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u036F\u0374\u0375\u037E\u0384\u0385\u0387\u03F6\u0483-\u0489\u058A\u058D-\u058F\u0591-\u05C7\u05D0-\u05EA\u05EF-\u05F4\u0600-\u070D\u070F-\u074A\u074D-\u07B1\u07C0-\u07FA\u07FD-\u082D\u0830-\u083E\u0840-\u085B\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u0897-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09F2\u09F3\u09FB\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AF1\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0BF3-\u0BFA\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C78-\u0C7E\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E3F\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39-\u0F3D\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1390-\u1399\u1400\u169B\u169C\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DB\u17DD\u17F0-\u17F9\u1800-\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1940\u1944\u1945\u19DE-\u19FF\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u200B-\u200D\u200F-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2070\u2074-\u207E\u2080-\u208E\u20A0-\u20C0\u20D0-\u20F0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u2150-\u215F\u2189-\u218B\u2190-\u2335\u237B-\u2394\u2396-\u2429\u2440-\u244A\u2460-\u249B\u24EA-\u26AB\u26AD-\u27FF\u2900-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF9-\u2CFF\u2D7F\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u3004\u3008-\u3020\u302A-\u302D\u3030\u3036\u3037\u303D-\u303F\u3099-\u309C\u30A0\u30FB\u31C0-\u31E5\u31EF\u321D\u321E\u3250-\u325F\u327C-\u327E\u32B1-\u32BF\u32CC-\u32CF\u3377-\u337A\u33DE\u33DF\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA60D-\uA60F\uA66F-\uA67F\uA69E\uA69F\uA6F0\uA6F1\uA700-\uA721\uA788\uA802\uA806\uA80B\uA825\uA826\uA828-\uA82C\uA838\uA839\uA874-\uA877\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uAB6A\uAB6B\uABE5\uABE8\uABED\uFB1D-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD8F\uFD92-\uFDC7\uFDCF\uFDF0-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE74\uFE76-\uFEFC\uFEFF\uFF01-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10101}\u{10140}-\u{1018C}\u{10190}-\u{1019C}\u{101A0}\u{101FD}\u{102E0}-\u{102FB}\u{10376}-\u{1037A}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{1091F}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A38}-\u{10A3A}\u{10A3F}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE6}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B39}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D27}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D69}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAB}-\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10EFC}-\u{10F27}\u{10F30}-\u{10F59}\u{10F70}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{11001}\u{11038}-\u{11046}\u{11052}-\u{11065}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{11660}-\u{1166C}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{11FD5}-\u{11FF1}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE2}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CC00}-\u{1CCD5}\u{1CCF0}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D1E9}\u{1D1EA}\u{1D200}-\u{1D245}\u{1D300}-\u{1D356}\u{1D6C1}\u{1D6DB}\u{1D6FB}\u{1D715}\u{1D735}\u{1D74F}\u{1D76F}\u{1D789}\u{1D7A9}\u{1D7C3}\u{1D7CE}-\u{1D7FF}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E2FF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8D6}\u{1E900}-\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F10F}\u{1F12F}\u{1F16A}-\u{1F16F}\u{1F1AD}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*$/u,c2e=/[0-9\xB2\xB3\xB9\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\u{102E1}-\u{102FB}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u,l2e=/[0-9\xB2\xB3\xB9\u06F0-\u06F9\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFF10-\uFF19\u{102E1}-\u{102FB}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}]/u,p2e=/[\u0600-\u0605\u0660-\u0669\u066B\u066C\u06DD\u0890\u0891\u08E2\u{10D30}-\u{10D39}\u{10D40}-\u{10D49}\u{10E60}-\u{10E7E}]/u,d2e=/^[\0-\x08\x0E-\x1B!-\x84\x86-\u0377\u037A-\u037F\u0384-\u038A\u038C\u038E-\u03A1\u03A3-\u052F\u0531-\u0556\u0559-\u058A\u058D-\u058F\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0606\u0607\u0609\u060A\u060C\u060E-\u061A\u064B-\u065F\u066A\u0670\u06D6-\u06DC\u06DE-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07F6-\u07F9\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A76\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AF1\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B77\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BFA\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C77-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4F\u0D54-\u0D63\u0D66-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E3A\u0E3F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F47\u0F49-\u0F6C\u0F71-\u0F97\u0F99-\u0FBC\u0FBE-\u0FCC\u0FCE-\u0FDA\u1000-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u137C\u1380-\u1399\u13A0-\u13F5\u13F8-\u13FD\u1400-\u167F\u1681-\u169C\u16A0-\u16F8\u1700-\u1715\u171F-\u1736\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u1800-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1940\u1944-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u19DE-\u1A1B\u1A1E-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1AB0-\u1ACE\u1B00-\u1B4C\u1B4E-\u1BF3\u1BFC-\u1C37\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD0-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u200B-\u200E\u2010-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2071\u2074-\u208E\u2090-\u209C\u20A0-\u20C0\u20D0-\u20F0\u2100-\u218B\u2190-\u2429\u2440-\u244A\u2460-\u2B73\u2B76-\u2B95\u2B97-\u2CF3\u2CF9-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u303F\u3041-\u3096\u3099-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31E5\u31EF-\u321E\u3220-\uA48C\uA490-\uA4C6\uA4D0-\uA62B\uA640-\uA6F7\uA700-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA82C\uA830-\uA839\uA840-\uA877\uA880-\uA8C5\uA8CE-\uA8D9\uA8E0-\uA953\uA95F-\uA97C\uA980-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA5C-\uAAC2\uAADB-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB6B\uAB70-\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1E\uFB29\uFD3E-\uFD4F\uFDCF\uFDFD-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}-\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1018E}\u{10190}-\u{1019C}\u{101A0}\u{101D0}-\u{101FD}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E0}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{1037A}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{1091F}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10B39}-\u{10B3F}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6E}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{1104D}\u{11052}-\u{11075}\u{1107F}-\u{110C2}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11100}-\u{11134}\u{11136}-\u{11147}\u{11150}-\u{11176}\u{11180}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{11241}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112EA}\u{112F0}-\u{112F9}\u{11300}-\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133B}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D5}\u{113D7}\u{113D8}\u{113E1}\u{113E2}\u{11400}-\u{1145B}\u{1145D}-\u{11461}\u{11480}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B5}\u{115B8}-\u{115DD}\u{11600}-\u{11644}\u{11650}-\u{11659}\u{11660}-\u{1166C}\u{11680}-\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171D}-\u{1172B}\u{11730}-\u{11746}\u{11800}-\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D7}\u{119DA}-\u{119E4}\u{11A00}-\u{11A47}\u{11A50}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C36}\u{11C38}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D47}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF8}\u{11F00}-\u{11F10}\u{11F12}-\u{11F3A}\u{11F3E}-\u{11F5A}\u{11FB0}\u{11FC0}-\u{11FF1}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{13455}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF0}-\u{16AF5}\u{16B00}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F4F}-\u{16F87}\u{16F8F}-\u{16F9F}\u{16FE0}-\u{16FE4}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}-\u{1BCA3}\u{1CC00}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D1EA}\u{1D200}-\u{1D245}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D300}-\u{1D356}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D7CB}\u{1D7CE}-\u{1DA8B}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E030}-\u{1E06D}\u{1E08F}\u{1E100}-\u{1E12C}\u{1E130}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AE}\u{1E2C0}-\u{1E2F9}\u{1E2FF}\u{1E4D0}-\u{1E4F9}\u{1E5D0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F1AD}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]*$/u,h2e=/[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u06F0-\u06F9\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u2488-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E1}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCF9}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D7CE}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F100}-\u{1F10A}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1FBF0}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u;S$.exports={combiningMarks:r2e,combiningClassVirama:n2e,validZWNJ:s2e,bidiDomain:i2e,bidiS1LTR:o2e,bidiS1RTL:a2e,bidiS2:u2e,bidiS3:c2e,bidiS4EN:l2e,bidiS4AN:p2e,bidiS5:d2e,bidiS6:h2e}});var O$=m((GNe,f2e)=>{f2e.exports=[[[0,44],2],[[45,46],2],[47,2],[[48,57],2],[[58,64],2],[65,1,"a"],[66,1,"b"],[67,1,"c"],[68,1,"d"],[69,1,"e"],[70,1,"f"],[71,1,"g"],[72,1,"h"],[73,1,"i"],[74,1,"j"],[75,1,"k"],[76,1,"l"],[77,1,"m"],[78,1,"n"],[79,1,"o"],[80,1,"p"],[81,1,"q"],[82,1,"r"],[83,1,"s"],[84,1,"t"],[85,1,"u"],[86,1,"v"],[87,1,"w"],[88,1,"x"],[89,1,"y"],[90,1,"z"],[[91,96],2],[[97,122],2],[[123,127],2],[[128,159],3],[160,1," "],[[161,167],2],[168,1," \u0308"],[169,2],[170,1,"a"],[[171,172],2],[173,7],[174,2],[175,1," \u0304"],[[176,177],2],[178,1,"2"],[179,1,"3"],[180,1," \u0301"],[181,1,"\u03BC"],[182,2],[183,2],[184,1," \u0327"],[185,1,"1"],[186,1,"o"],[187,2],[188,1,"1\u20444"],[189,1,"1\u20442"],[190,1,"3\u20444"],[191,2],[192,1,"\xE0"],[193,1,"\xE1"],[194,1,"\xE2"],[195,1,"\xE3"],[196,1,"\xE4"],[197,1,"\xE5"],[198,1,"\xE6"],[199,1,"\xE7"],[200,1,"\xE8"],[201,1,"\xE9"],[202,1,"\xEA"],[203,1,"\xEB"],[204,1,"\xEC"],[205,1,"\xED"],[206,1,"\xEE"],[207,1,"\xEF"],[208,1,"\xF0"],[209,1,"\xF1"],[210,1,"\xF2"],[211,1,"\xF3"],[212,1,"\xF4"],[213,1,"\xF5"],[214,1,"\xF6"],[215,2],[216,1,"\xF8"],[217,1,"\xF9"],[218,1,"\xFA"],[219,1,"\xFB"],[220,1,"\xFC"],[221,1,"\xFD"],[222,1,"\xFE"],[223,6,"ss"],[[224,246],2],[247,2],[[248,255],2],[256,1,"\u0101"],[257,2],[258,1,"\u0103"],[259,2],[260,1,"\u0105"],[261,2],[262,1,"\u0107"],[263,2],[264,1,"\u0109"],[265,2],[266,1,"\u010B"],[267,2],[268,1,"\u010D"],[269,2],[270,1,"\u010F"],[271,2],[272,1,"\u0111"],[273,2],[274,1,"\u0113"],[275,2],[276,1,"\u0115"],[277,2],[278,1,"\u0117"],[279,2],[280,1,"\u0119"],[281,2],[282,1,"\u011B"],[283,2],[284,1,"\u011D"],[285,2],[286,1,"\u011F"],[287,2],[288,1,"\u0121"],[289,2],[290,1,"\u0123"],[291,2],[292,1,"\u0125"],[293,2],[294,1,"\u0127"],[295,2],[296,1,"\u0129"],[297,2],[298,1,"\u012B"],[299,2],[300,1,"\u012D"],[301,2],[302,1,"\u012F"],[303,2],[304,1,"i\u0307"],[305,2],[[306,307],1,"ij"],[308,1,"\u0135"],[309,2],[310,1,"\u0137"],[[311,312],2],[313,1,"\u013A"],[314,2],[315,1,"\u013C"],[316,2],[317,1,"\u013E"],[318,2],[[319,320],1,"l\xB7"],[321,1,"\u0142"],[322,2],[323,1,"\u0144"],[324,2],[325,1,"\u0146"],[326,2],[327,1,"\u0148"],[328,2],[329,1,"\u02BCn"],[330,1,"\u014B"],[331,2],[332,1,"\u014D"],[333,2],[334,1,"\u014F"],[335,2],[336,1,"\u0151"],[337,2],[338,1,"\u0153"],[339,2],[340,1,"\u0155"],[341,2],[342,1,"\u0157"],[343,2],[344,1,"\u0159"],[345,2],[346,1,"\u015B"],[347,2],[348,1,"\u015D"],[349,2],[350,1,"\u015F"],[351,2],[352,1,"\u0161"],[353,2],[354,1,"\u0163"],[355,2],[356,1,"\u0165"],[357,2],[358,1,"\u0167"],[359,2],[360,1,"\u0169"],[361,2],[362,1,"\u016B"],[363,2],[364,1,"\u016D"],[365,2],[366,1,"\u016F"],[367,2],[368,1,"\u0171"],[369,2],[370,1,"\u0173"],[371,2],[372,1,"\u0175"],[373,2],[374,1,"\u0177"],[375,2],[376,1,"\xFF"],[377,1,"\u017A"],[378,2],[379,1,"\u017C"],[380,2],[381,1,"\u017E"],[382,2],[383,1,"s"],[384,2],[385,1,"\u0253"],[386,1,"\u0183"],[387,2],[388,1,"\u0185"],[389,2],[390,1,"\u0254"],[391,1,"\u0188"],[392,2],[393,1,"\u0256"],[394,1,"\u0257"],[395,1,"\u018C"],[[396,397],2],[398,1,"\u01DD"],[399,1,"\u0259"],[400,1,"\u025B"],[401,1,"\u0192"],[402,2],[403,1,"\u0260"],[404,1,"\u0263"],[405,2],[406,1,"\u0269"],[407,1,"\u0268"],[408,1,"\u0199"],[[409,411],2],[412,1,"\u026F"],[413,1,"\u0272"],[414,2],[415,1,"\u0275"],[416,1,"\u01A1"],[417,2],[418,1,"\u01A3"],[419,2],[420,1,"\u01A5"],[421,2],[422,1,"\u0280"],[423,1,"\u01A8"],[424,2],[425,1,"\u0283"],[[426,427],2],[428,1,"\u01AD"],[429,2],[430,1,"\u0288"],[431,1,"\u01B0"],[432,2],[433,1,"\u028A"],[434,1,"\u028B"],[435,1,"\u01B4"],[436,2],[437,1,"\u01B6"],[438,2],[439,1,"\u0292"],[440,1,"\u01B9"],[[441,443],2],[444,1,"\u01BD"],[[445,451],2],[[452,454],1,"d\u017E"],[[455,457],1,"lj"],[[458,460],1,"nj"],[461,1,"\u01CE"],[462,2],[463,1,"\u01D0"],[464,2],[465,1,"\u01D2"],[466,2],[467,1,"\u01D4"],[468,2],[469,1,"\u01D6"],[470,2],[471,1,"\u01D8"],[472,2],[473,1,"\u01DA"],[474,2],[475,1,"\u01DC"],[[476,477],2],[478,1,"\u01DF"],[479,2],[480,1,"\u01E1"],[481,2],[482,1,"\u01E3"],[483,2],[484,1,"\u01E5"],[485,2],[486,1,"\u01E7"],[487,2],[488,1,"\u01E9"],[489,2],[490,1,"\u01EB"],[491,2],[492,1,"\u01ED"],[493,2],[494,1,"\u01EF"],[[495,496],2],[[497,499],1,"dz"],[500,1,"\u01F5"],[501,2],[502,1,"\u0195"],[503,1,"\u01BF"],[504,1,"\u01F9"],[505,2],[506,1,"\u01FB"],[507,2],[508,1,"\u01FD"],[509,2],[510,1,"\u01FF"],[511,2],[512,1,"\u0201"],[513,2],[514,1,"\u0203"],[515,2],[516,1,"\u0205"],[517,2],[518,1,"\u0207"],[519,2],[520,1,"\u0209"],[521,2],[522,1,"\u020B"],[523,2],[524,1,"\u020D"],[525,2],[526,1,"\u020F"],[527,2],[528,1,"\u0211"],[529,2],[530,1,"\u0213"],[531,2],[532,1,"\u0215"],[533,2],[534,1,"\u0217"],[535,2],[536,1,"\u0219"],[537,2],[538,1,"\u021B"],[539,2],[540,1,"\u021D"],[541,2],[542,1,"\u021F"],[543,2],[544,1,"\u019E"],[545,2],[546,1,"\u0223"],[547,2],[548,1,"\u0225"],[549,2],[550,1,"\u0227"],[551,2],[552,1,"\u0229"],[553,2],[554,1,"\u022B"],[555,2],[556,1,"\u022D"],[557,2],[558,1,"\u022F"],[559,2],[560,1,"\u0231"],[561,2],[562,1,"\u0233"],[563,2],[[564,566],2],[[567,569],2],[570,1,"\u2C65"],[571,1,"\u023C"],[572,2],[573,1,"\u019A"],[574,1,"\u2C66"],[[575,576],2],[577,1,"\u0242"],[578,2],[579,1,"\u0180"],[580,1,"\u0289"],[581,1,"\u028C"],[582,1,"\u0247"],[583,2],[584,1,"\u0249"],[585,2],[586,1,"\u024B"],[587,2],[588,1,"\u024D"],[589,2],[590,1,"\u024F"],[591,2],[[592,680],2],[[681,685],2],[[686,687],2],[688,1,"h"],[689,1,"\u0266"],[690,1,"j"],[691,1,"r"],[692,1,"\u0279"],[693,1,"\u027B"],[694,1,"\u0281"],[695,1,"w"],[696,1,"y"],[[697,705],2],[[706,709],2],[[710,721],2],[[722,727],2],[728,1," \u0306"],[729,1," \u0307"],[730,1," \u030A"],[731,1," \u0328"],[732,1," \u0303"],[733,1," \u030B"],[734,2],[735,2],[736,1,"\u0263"],[737,1,"l"],[738,1,"s"],[739,1,"x"],[740,1,"\u0295"],[[741,745],2],[[746,747],2],[748,2],[749,2],[750,2],[[751,767],2],[[768,831],2],[832,1,"\u0300"],[833,1,"\u0301"],[834,2],[835,1,"\u0313"],[836,1,"\u0308\u0301"],[837,1,"\u03B9"],[[838,846],2],[847,7],[[848,855],2],[[856,860],2],[[861,863],2],[[864,865],2],[866,2],[[867,879],2],[880,1,"\u0371"],[881,2],[882,1,"\u0373"],[883,2],[884,1,"\u02B9"],[885,2],[886,1,"\u0377"],[887,2],[[888,889],3],[890,1," \u03B9"],[[891,893],2],[894,1,";"],[895,1,"\u03F3"],[[896,899],3],[900,1," \u0301"],[901,1," \u0308\u0301"],[902,1,"\u03AC"],[903,1,"\xB7"],[904,1,"\u03AD"],[905,1,"\u03AE"],[906,1,"\u03AF"],[907,3],[908,1,"\u03CC"],[909,3],[910,1,"\u03CD"],[911,1,"\u03CE"],[912,2],[913,1,"\u03B1"],[914,1,"\u03B2"],[915,1,"\u03B3"],[916,1,"\u03B4"],[917,1,"\u03B5"],[918,1,"\u03B6"],[919,1,"\u03B7"],[920,1,"\u03B8"],[921,1,"\u03B9"],[922,1,"\u03BA"],[923,1,"\u03BB"],[924,1,"\u03BC"],[925,1,"\u03BD"],[926,1,"\u03BE"],[927,1,"\u03BF"],[928,1,"\u03C0"],[929,1,"\u03C1"],[930,3],[931,1,"\u03C3"],[932,1,"\u03C4"],[933,1,"\u03C5"],[934,1,"\u03C6"],[935,1,"\u03C7"],[936,1,"\u03C8"],[937,1,"\u03C9"],[938,1,"\u03CA"],[939,1,"\u03CB"],[[940,961],2],[962,6,"\u03C3"],[[963,974],2],[975,1,"\u03D7"],[976,1,"\u03B2"],[977,1,"\u03B8"],[978,1,"\u03C5"],[979,1,"\u03CD"],[980,1,"\u03CB"],[981,1,"\u03C6"],[982,1,"\u03C0"],[983,2],[984,1,"\u03D9"],[985,2],[986,1,"\u03DB"],[987,2],[988,1,"\u03DD"],[989,2],[990,1,"\u03DF"],[991,2],[992,1,"\u03E1"],[993,2],[994,1,"\u03E3"],[995,2],[996,1,"\u03E5"],[997,2],[998,1,"\u03E7"],[999,2],[1e3,1,"\u03E9"],[1001,2],[1002,1,"\u03EB"],[1003,2],[1004,1,"\u03ED"],[1005,2],[1006,1,"\u03EF"],[1007,2],[1008,1,"\u03BA"],[1009,1,"\u03C1"],[1010,1,"\u03C3"],[1011,2],[1012,1,"\u03B8"],[1013,1,"\u03B5"],[1014,2],[1015,1,"\u03F8"],[1016,2],[1017,1,"\u03C3"],[1018,1,"\u03FB"],[1019,2],[1020,2],[1021,1,"\u037B"],[1022,1,"\u037C"],[1023,1,"\u037D"],[1024,1,"\u0450"],[1025,1,"\u0451"],[1026,1,"\u0452"],[1027,1,"\u0453"],[1028,1,"\u0454"],[1029,1,"\u0455"],[1030,1,"\u0456"],[1031,1,"\u0457"],[1032,1,"\u0458"],[1033,1,"\u0459"],[1034,1,"\u045A"],[1035,1,"\u045B"],[1036,1,"\u045C"],[1037,1,"\u045D"],[1038,1,"\u045E"],[1039,1,"\u045F"],[1040,1,"\u0430"],[1041,1,"\u0431"],[1042,1,"\u0432"],[1043,1,"\u0433"],[1044,1,"\u0434"],[1045,1,"\u0435"],[1046,1,"\u0436"],[1047,1,"\u0437"],[1048,1,"\u0438"],[1049,1,"\u0439"],[1050,1,"\u043A"],[1051,1,"\u043B"],[1052,1,"\u043C"],[1053,1,"\u043D"],[1054,1,"\u043E"],[1055,1,"\u043F"],[1056,1,"\u0440"],[1057,1,"\u0441"],[1058,1,"\u0442"],[1059,1,"\u0443"],[1060,1,"\u0444"],[1061,1,"\u0445"],[1062,1,"\u0446"],[1063,1,"\u0447"],[1064,1,"\u0448"],[1065,1,"\u0449"],[1066,1,"\u044A"],[1067,1,"\u044B"],[1068,1,"\u044C"],[1069,1,"\u044D"],[1070,1,"\u044E"],[1071,1,"\u044F"],[[1072,1103],2],[1104,2],[[1105,1116],2],[1117,2],[[1118,1119],2],[1120,1,"\u0461"],[1121,2],[1122,1,"\u0463"],[1123,2],[1124,1,"\u0465"],[1125,2],[1126,1,"\u0467"],[1127,2],[1128,1,"\u0469"],[1129,2],[1130,1,"\u046B"],[1131,2],[1132,1,"\u046D"],[1133,2],[1134,1,"\u046F"],[1135,2],[1136,1,"\u0471"],[1137,2],[1138,1,"\u0473"],[1139,2],[1140,1,"\u0475"],[1141,2],[1142,1,"\u0477"],[1143,2],[1144,1,"\u0479"],[1145,2],[1146,1,"\u047B"],[1147,2],[1148,1,"\u047D"],[1149,2],[1150,1,"\u047F"],[1151,2],[1152,1,"\u0481"],[1153,2],[1154,2],[[1155,1158],2],[1159,2],[[1160,1161],2],[1162,1,"\u048B"],[1163,2],[1164,1,"\u048D"],[1165,2],[1166,1,"\u048F"],[1167,2],[1168,1,"\u0491"],[1169,2],[1170,1,"\u0493"],[1171,2],[1172,1,"\u0495"],[1173,2],[1174,1,"\u0497"],[1175,2],[1176,1,"\u0499"],[1177,2],[1178,1,"\u049B"],[1179,2],[1180,1,"\u049D"],[1181,2],[1182,1,"\u049F"],[1183,2],[1184,1,"\u04A1"],[1185,2],[1186,1,"\u04A3"],[1187,2],[1188,1,"\u04A5"],[1189,2],[1190,1,"\u04A7"],[1191,2],[1192,1,"\u04A9"],[1193,2],[1194,1,"\u04AB"],[1195,2],[1196,1,"\u04AD"],[1197,2],[1198,1,"\u04AF"],[1199,2],[1200,1,"\u04B1"],[1201,2],[1202,1,"\u04B3"],[1203,2],[1204,1,"\u04B5"],[1205,2],[1206,1,"\u04B7"],[1207,2],[1208,1,"\u04B9"],[1209,2],[1210,1,"\u04BB"],[1211,2],[1212,1,"\u04BD"],[1213,2],[1214,1,"\u04BF"],[1215,2],[1216,1,"\u04CF"],[1217,1,"\u04C2"],[1218,2],[1219,1,"\u04C4"],[1220,2],[1221,1,"\u04C6"],[1222,2],[1223,1,"\u04C8"],[1224,2],[1225,1,"\u04CA"],[1226,2],[1227,1,"\u04CC"],[1228,2],[1229,1,"\u04CE"],[1230,2],[1231,2],[1232,1,"\u04D1"],[1233,2],[1234,1,"\u04D3"],[1235,2],[1236,1,"\u04D5"],[1237,2],[1238,1,"\u04D7"],[1239,2],[1240,1,"\u04D9"],[1241,2],[1242,1,"\u04DB"],[1243,2],[1244,1,"\u04DD"],[1245,2],[1246,1,"\u04DF"],[1247,2],[1248,1,"\u04E1"],[1249,2],[1250,1,"\u04E3"],[1251,2],[1252,1,"\u04E5"],[1253,2],[1254,1,"\u04E7"],[1255,2],[1256,1,"\u04E9"],[1257,2],[1258,1,"\u04EB"],[1259,2],[1260,1,"\u04ED"],[1261,2],[1262,1,"\u04EF"],[1263,2],[1264,1,"\u04F1"],[1265,2],[1266,1,"\u04F3"],[1267,2],[1268,1,"\u04F5"],[1269,2],[1270,1,"\u04F7"],[1271,2],[1272,1,"\u04F9"],[1273,2],[1274,1,"\u04FB"],[1275,2],[1276,1,"\u04FD"],[1277,2],[1278,1,"\u04FF"],[1279,2],[1280,1,"\u0501"],[1281,2],[1282,1,"\u0503"],[1283,2],[1284,1,"\u0505"],[1285,2],[1286,1,"\u0507"],[1287,2],[1288,1,"\u0509"],[1289,2],[1290,1,"\u050B"],[1291,2],[1292,1,"\u050D"],[1293,2],[1294,1,"\u050F"],[1295,2],[1296,1,"\u0511"],[1297,2],[1298,1,"\u0513"],[1299,2],[1300,1,"\u0515"],[1301,2],[1302,1,"\u0517"],[1303,2],[1304,1,"\u0519"],[1305,2],[1306,1,"\u051B"],[1307,2],[1308,1,"\u051D"],[1309,2],[1310,1,"\u051F"],[1311,2],[1312,1,"\u0521"],[1313,2],[1314,1,"\u0523"],[1315,2],[1316,1,"\u0525"],[1317,2],[1318,1,"\u0527"],[1319,2],[1320,1,"\u0529"],[1321,2],[1322,1,"\u052B"],[1323,2],[1324,1,"\u052D"],[1325,2],[1326,1,"\u052F"],[1327,2],[1328,3],[1329,1,"\u0561"],[1330,1,"\u0562"],[1331,1,"\u0563"],[1332,1,"\u0564"],[1333,1,"\u0565"],[1334,1,"\u0566"],[1335,1,"\u0567"],[1336,1,"\u0568"],[1337,1,"\u0569"],[1338,1,"\u056A"],[1339,1,"\u056B"],[1340,1,"\u056C"],[1341,1,"\u056D"],[1342,1,"\u056E"],[1343,1,"\u056F"],[1344,1,"\u0570"],[1345,1,"\u0571"],[1346,1,"\u0572"],[1347,1,"\u0573"],[1348,1,"\u0574"],[1349,1,"\u0575"],[1350,1,"\u0576"],[1351,1,"\u0577"],[1352,1,"\u0578"],[1353,1,"\u0579"],[1354,1,"\u057A"],[1355,1,"\u057B"],[1356,1,"\u057C"],[1357,1,"\u057D"],[1358,1,"\u057E"],[1359,1,"\u057F"],[1360,1,"\u0580"],[1361,1,"\u0581"],[1362,1,"\u0582"],[1363,1,"\u0583"],[1364,1,"\u0584"],[1365,1,"\u0585"],[1366,1,"\u0586"],[[1367,1368],3],[1369,2],[[1370,1375],2],[1376,2],[[1377,1414],2],[1415,1,"\u0565\u0582"],[1416,2],[1417,2],[1418,2],[[1419,1420],3],[[1421,1422],2],[1423,2],[1424,3],[[1425,1441],2],[1442,2],[[1443,1455],2],[[1456,1465],2],[1466,2],[[1467,1469],2],[1470,2],[1471,2],[1472,2],[[1473,1474],2],[1475,2],[1476,2],[1477,2],[1478,2],[1479,2],[[1480,1487],3],[[1488,1514],2],[[1515,1518],3],[1519,2],[[1520,1524],2],[[1525,1535],3],[[1536,1539],3],[1540,3],[1541,3],[[1542,1546],2],[1547,2],[1548,2],[[1549,1551],2],[[1552,1557],2],[[1558,1562],2],[1563,2],[1564,3],[1565,2],[1566,2],[1567,2],[1568,2],[[1569,1594],2],[[1595,1599],2],[1600,2],[[1601,1618],2],[[1619,1621],2],[[1622,1624],2],[[1625,1630],2],[1631,2],[[1632,1641],2],[[1642,1645],2],[[1646,1647],2],[[1648,1652],2],[1653,1,"\u0627\u0674"],[1654,1,"\u0648\u0674"],[1655,1,"\u06C7\u0674"],[1656,1,"\u064A\u0674"],[[1657,1719],2],[[1720,1721],2],[[1722,1726],2],[1727,2],[[1728,1742],2],[1743,2],[[1744,1747],2],[1748,2],[[1749,1756],2],[1757,3],[1758,2],[[1759,1768],2],[1769,2],[[1770,1773],2],[[1774,1775],2],[[1776,1785],2],[[1786,1790],2],[1791,2],[[1792,1805],2],[1806,3],[1807,3],[[1808,1836],2],[[1837,1839],2],[[1840,1866],2],[[1867,1868],3],[[1869,1871],2],[[1872,1901],2],[[1902,1919],2],[[1920,1968],2],[1969,2],[[1970,1983],3],[[1984,2037],2],[[2038,2042],2],[[2043,2044],3],[2045,2],[[2046,2047],2],[[2048,2093],2],[[2094,2095],3],[[2096,2110],2],[2111,3],[[2112,2139],2],[[2140,2141],3],[2142,2],[2143,3],[[2144,2154],2],[[2155,2159],3],[[2160,2183],2],[2184,2],[[2185,2190],2],[2191,3],[[2192,2193],3],[[2194,2198],3],[2199,2],[[2200,2207],2],[2208,2],[2209,2],[[2210,2220],2],[[2221,2226],2],[[2227,2228],2],[2229,2],[[2230,2237],2],[[2238,2247],2],[[2248,2258],2],[2259,2],[[2260,2273],2],[2274,3],[2275,2],[[2276,2302],2],[2303,2],[2304,2],[[2305,2307],2],[2308,2],[[2309,2361],2],[[2362,2363],2],[[2364,2381],2],[2382,2],[2383,2],[[2384,2388],2],[2389,2],[[2390,2391],2],[2392,1,"\u0915\u093C"],[2393,1,"\u0916\u093C"],[2394,1,"\u0917\u093C"],[2395,1,"\u091C\u093C"],[2396,1,"\u0921\u093C"],[2397,1,"\u0922\u093C"],[2398,1,"\u092B\u093C"],[2399,1,"\u092F\u093C"],[[2400,2403],2],[[2404,2405],2],[[2406,2415],2],[2416,2],[[2417,2418],2],[[2419,2423],2],[2424,2],[[2425,2426],2],[[2427,2428],2],[2429,2],[[2430,2431],2],[2432,2],[[2433,2435],2],[2436,3],[[2437,2444],2],[[2445,2446],3],[[2447,2448],2],[[2449,2450],3],[[2451,2472],2],[2473,3],[[2474,2480],2],[2481,3],[2482,2],[[2483,2485],3],[[2486,2489],2],[[2490,2491],3],[2492,2],[2493,2],[[2494,2500],2],[[2501,2502],3],[[2503,2504],2],[[2505,2506],3],[[2507,2509],2],[2510,2],[[2511,2518],3],[2519,2],[[2520,2523],3],[2524,1,"\u09A1\u09BC"],[2525,1,"\u09A2\u09BC"],[2526,3],[2527,1,"\u09AF\u09BC"],[[2528,2531],2],[[2532,2533],3],[[2534,2545],2],[[2546,2554],2],[2555,2],[2556,2],[2557,2],[2558,2],[[2559,2560],3],[2561,2],[2562,2],[2563,2],[2564,3],[[2565,2570],2],[[2571,2574],3],[[2575,2576],2],[[2577,2578],3],[[2579,2600],2],[2601,3],[[2602,2608],2],[2609,3],[2610,2],[2611,1,"\u0A32\u0A3C"],[2612,3],[2613,2],[2614,1,"\u0A38\u0A3C"],[2615,3],[[2616,2617],2],[[2618,2619],3],[2620,2],[2621,3],[[2622,2626],2],[[2627,2630],3],[[2631,2632],2],[[2633,2634],3],[[2635,2637],2],[[2638,2640],3],[2641,2],[[2642,2648],3],[2649,1,"\u0A16\u0A3C"],[2650,1,"\u0A17\u0A3C"],[2651,1,"\u0A1C\u0A3C"],[2652,2],[2653,3],[2654,1,"\u0A2B\u0A3C"],[[2655,2661],3],[[2662,2676],2],[2677,2],[2678,2],[[2679,2688],3],[[2689,2691],2],[2692,3],[[2693,2699],2],[2700,2],[2701,2],[2702,3],[[2703,2705],2],[2706,3],[[2707,2728],2],[2729,3],[[2730,2736],2],[2737,3],[[2738,2739],2],[2740,3],[[2741,2745],2],[[2746,2747],3],[[2748,2757],2],[2758,3],[[2759,2761],2],[2762,3],[[2763,2765],2],[[2766,2767],3],[2768,2],[[2769,2783],3],[2784,2],[[2785,2787],2],[[2788,2789],3],[[2790,2799],2],[2800,2],[2801,2],[[2802,2808],3],[2809,2],[[2810,2815],2],[2816,3],[[2817,2819],2],[2820,3],[[2821,2828],2],[[2829,2830],3],[[2831,2832],2],[[2833,2834],3],[[2835,2856],2],[2857,3],[[2858,2864],2],[2865,3],[[2866,2867],2],[2868,3],[2869,2],[[2870,2873],2],[[2874,2875],3],[[2876,2883],2],[2884,2],[[2885,2886],3],[[2887,2888],2],[[2889,2890],3],[[2891,2893],2],[[2894,2900],3],[2901,2],[[2902,2903],2],[[2904,2907],3],[2908,1,"\u0B21\u0B3C"],[2909,1,"\u0B22\u0B3C"],[2910,3],[[2911,2913],2],[[2914,2915],2],[[2916,2917],3],[[2918,2927],2],[2928,2],[2929,2],[[2930,2935],2],[[2936,2945],3],[[2946,2947],2],[2948,3],[[2949,2954],2],[[2955,2957],3],[[2958,2960],2],[2961,3],[[2962,2965],2],[[2966,2968],3],[[2969,2970],2],[2971,3],[2972,2],[2973,3],[[2974,2975],2],[[2976,2978],3],[[2979,2980],2],[[2981,2983],3],[[2984,2986],2],[[2987,2989],3],[[2990,2997],2],[2998,2],[[2999,3001],2],[[3002,3005],3],[[3006,3010],2],[[3011,3013],3],[[3014,3016],2],[3017,3],[[3018,3021],2],[[3022,3023],3],[3024,2],[[3025,3030],3],[3031,2],[[3032,3045],3],[3046,2],[[3047,3055],2],[[3056,3058],2],[[3059,3066],2],[[3067,3071],3],[3072,2],[[3073,3075],2],[3076,2],[[3077,3084],2],[3085,3],[[3086,3088],2],[3089,3],[[3090,3112],2],[3113,3],[[3114,3123],2],[3124,2],[[3125,3129],2],[[3130,3131],3],[3132,2],[3133,2],[[3134,3140],2],[3141,3],[[3142,3144],2],[3145,3],[[3146,3149],2],[[3150,3156],3],[[3157,3158],2],[3159,3],[[3160,3161],2],[3162,2],[[3163,3164],3],[3165,2],[[3166,3167],3],[[3168,3169],2],[[3170,3171],2],[[3172,3173],3],[[3174,3183],2],[[3184,3190],3],[3191,2],[[3192,3199],2],[3200,2],[3201,2],[[3202,3203],2],[3204,2],[[3205,3212],2],[3213,3],[[3214,3216],2],[3217,3],[[3218,3240],2],[3241,3],[[3242,3251],2],[3252,3],[[3253,3257],2],[[3258,3259],3],[[3260,3261],2],[[3262,3268],2],[3269,3],[[3270,3272],2],[3273,3],[[3274,3277],2],[[3278,3284],3],[[3285,3286],2],[[3287,3292],3],[3293,2],[3294,2],[3295,3],[[3296,3297],2],[[3298,3299],2],[[3300,3301],3],[[3302,3311],2],[3312,3],[[3313,3314],2],[3315,2],[[3316,3327],3],[3328,2],[3329,2],[[3330,3331],2],[3332,2],[[3333,3340],2],[3341,3],[[3342,3344],2],[3345,3],[[3346,3368],2],[3369,2],[[3370,3385],2],[3386,2],[[3387,3388],2],[3389,2],[[3390,3395],2],[3396,2],[3397,3],[[3398,3400],2],[3401,3],[[3402,3405],2],[3406,2],[3407,2],[[3408,3411],3],[[3412,3414],2],[3415,2],[[3416,3422],2],[3423,2],[[3424,3425],2],[[3426,3427],2],[[3428,3429],3],[[3430,3439],2],[[3440,3445],2],[[3446,3448],2],[3449,2],[[3450,3455],2],[3456,3],[3457,2],[[3458,3459],2],[3460,3],[[3461,3478],2],[[3479,3481],3],[[3482,3505],2],[3506,3],[[3507,3515],2],[3516,3],[3517,2],[[3518,3519],3],[[3520,3526],2],[[3527,3529],3],[3530,2],[[3531,3534],3],[[3535,3540],2],[3541,3],[3542,2],[3543,3],[[3544,3551],2],[[3552,3557],3],[[3558,3567],2],[[3568,3569],3],[[3570,3571],2],[3572,2],[[3573,3584],3],[[3585,3634],2],[3635,1,"\u0E4D\u0E32"],[[3636,3642],2],[[3643,3646],3],[3647,2],[[3648,3662],2],[3663,2],[[3664,3673],2],[[3674,3675],2],[[3676,3712],3],[[3713,3714],2],[3715,3],[3716,2],[3717,3],[3718,2],[[3719,3720],2],[3721,2],[3722,2],[3723,3],[3724,2],[3725,2],[[3726,3731],2],[[3732,3735],2],[3736,2],[[3737,3743],2],[3744,2],[[3745,3747],2],[3748,3],[3749,2],[3750,3],[3751,2],[[3752,3753],2],[[3754,3755],2],[3756,2],[[3757,3762],2],[3763,1,"\u0ECD\u0EB2"],[[3764,3769],2],[3770,2],[[3771,3773],2],[[3774,3775],3],[[3776,3780],2],[3781,3],[3782,2],[3783,3],[[3784,3789],2],[3790,2],[3791,3],[[3792,3801],2],[[3802,3803],3],[3804,1,"\u0EAB\u0E99"],[3805,1,"\u0EAB\u0EA1"],[[3806,3807],2],[[3808,3839],3],[3840,2],[[3841,3850],2],[3851,2],[3852,1,"\u0F0B"],[[3853,3863],2],[[3864,3865],2],[[3866,3871],2],[[3872,3881],2],[[3882,3892],2],[3893,2],[3894,2],[3895,2],[3896,2],[3897,2],[[3898,3901],2],[[3902,3906],2],[3907,1,"\u0F42\u0FB7"],[[3908,3911],2],[3912,3],[[3913,3916],2],[3917,1,"\u0F4C\u0FB7"],[[3918,3921],2],[3922,1,"\u0F51\u0FB7"],[[3923,3926],2],[3927,1,"\u0F56\u0FB7"],[[3928,3931],2],[3932,1,"\u0F5B\u0FB7"],[[3933,3944],2],[3945,1,"\u0F40\u0FB5"],[3946,2],[[3947,3948],2],[[3949,3952],3],[[3953,3954],2],[3955,1,"\u0F71\u0F72"],[3956,2],[3957,1,"\u0F71\u0F74"],[3958,1,"\u0FB2\u0F80"],[3959,1,"\u0FB2\u0F71\u0F80"],[3960,1,"\u0FB3\u0F80"],[3961,1,"\u0FB3\u0F71\u0F80"],[[3962,3968],2],[3969,1,"\u0F71\u0F80"],[[3970,3972],2],[3973,2],[[3974,3979],2],[[3980,3983],2],[[3984,3986],2],[3987,1,"\u0F92\u0FB7"],[[3988,3989],2],[3990,2],[3991,2],[3992,3],[[3993,3996],2],[3997,1,"\u0F9C\u0FB7"],[[3998,4001],2],[4002,1,"\u0FA1\u0FB7"],[[4003,4006],2],[4007,1,"\u0FA6\u0FB7"],[[4008,4011],2],[4012,1,"\u0FAB\u0FB7"],[4013,2],[[4014,4016],2],[[4017,4023],2],[4024,2],[4025,1,"\u0F90\u0FB5"],[[4026,4028],2],[4029,3],[[4030,4037],2],[4038,2],[[4039,4044],2],[4045,3],[4046,2],[4047,2],[[4048,4049],2],[[4050,4052],2],[[4053,4056],2],[[4057,4058],2],[[4059,4095],3],[[4096,4129],2],[4130,2],[[4131,4135],2],[4136,2],[[4137,4138],2],[4139,2],[[4140,4146],2],[[4147,4149],2],[[4150,4153],2],[[4154,4159],2],[[4160,4169],2],[[4170,4175],2],[[4176,4185],2],[[4186,4249],2],[[4250,4253],2],[[4254,4255],2],[4256,1,"\u2D00"],[4257,1,"\u2D01"],[4258,1,"\u2D02"],[4259,1,"\u2D03"],[4260,1,"\u2D04"],[4261,1,"\u2D05"],[4262,1,"\u2D06"],[4263,1,"\u2D07"],[4264,1,"\u2D08"],[4265,1,"\u2D09"],[4266,1,"\u2D0A"],[4267,1,"\u2D0B"],[4268,1,"\u2D0C"],[4269,1,"\u2D0D"],[4270,1,"\u2D0E"],[4271,1,"\u2D0F"],[4272,1,"\u2D10"],[4273,1,"\u2D11"],[4274,1,"\u2D12"],[4275,1,"\u2D13"],[4276,1,"\u2D14"],[4277,1,"\u2D15"],[4278,1,"\u2D16"],[4279,1,"\u2D17"],[4280,1,"\u2D18"],[4281,1,"\u2D19"],[4282,1,"\u2D1A"],[4283,1,"\u2D1B"],[4284,1,"\u2D1C"],[4285,1,"\u2D1D"],[4286,1,"\u2D1E"],[4287,1,"\u2D1F"],[4288,1,"\u2D20"],[4289,1,"\u2D21"],[4290,1,"\u2D22"],[4291,1,"\u2D23"],[4292,1,"\u2D24"],[4293,1,"\u2D25"],[4294,3],[4295,1,"\u2D27"],[[4296,4300],3],[4301,1,"\u2D2D"],[[4302,4303],3],[[4304,4342],2],[[4343,4344],2],[[4345,4346],2],[4347,2],[4348,1,"\u10DC"],[[4349,4351],2],[[4352,4441],2],[[4442,4446],2],[[4447,4448],7],[[4449,4514],2],[[4515,4519],2],[[4520,4601],2],[[4602,4607],2],[[4608,4614],2],[4615,2],[[4616,4678],2],[4679,2],[4680,2],[4681,3],[[4682,4685],2],[[4686,4687],3],[[4688,4694],2],[4695,3],[4696,2],[4697,3],[[4698,4701],2],[[4702,4703],3],[[4704,4742],2],[4743,2],[4744,2],[4745,3],[[4746,4749],2],[[4750,4751],3],[[4752,4782],2],[4783,2],[4784,2],[4785,3],[[4786,4789],2],[[4790,4791],3],[[4792,4798],2],[4799,3],[4800,2],[4801,3],[[4802,4805],2],[[4806,4807],3],[[4808,4814],2],[4815,2],[[4816,4822],2],[4823,3],[[4824,4846],2],[4847,2],[[4848,4878],2],[4879,2],[4880,2],[4881,3],[[4882,4885],2],[[4886,4887],3],[[4888,4894],2],[4895,2],[[4896,4934],2],[4935,2],[[4936,4954],2],[[4955,4956],3],[[4957,4958],2],[4959,2],[4960,2],[[4961,4988],2],[[4989,4991],3],[[4992,5007],2],[[5008,5017],2],[[5018,5023],3],[[5024,5108],2],[5109,2],[[5110,5111],3],[5112,1,"\u13F0"],[5113,1,"\u13F1"],[5114,1,"\u13F2"],[5115,1,"\u13F3"],[5116,1,"\u13F4"],[5117,1,"\u13F5"],[[5118,5119],3],[5120,2],[[5121,5740],2],[[5741,5742],2],[[5743,5750],2],[[5751,5759],2],[5760,3],[[5761,5786],2],[[5787,5788],2],[[5789,5791],3],[[5792,5866],2],[[5867,5872],2],[[5873,5880],2],[[5881,5887],3],[[5888,5900],2],[5901,2],[[5902,5908],2],[5909,2],[[5910,5918],3],[5919,2],[[5920,5940],2],[[5941,5942],2],[[5943,5951],3],[[5952,5971],2],[[5972,5983],3],[[5984,5996],2],[5997,3],[[5998,6e3],2],[6001,3],[[6002,6003],2],[[6004,6015],3],[[6016,6067],2],[[6068,6069],7],[[6070,6099],2],[[6100,6102],2],[6103,2],[[6104,6107],2],[6108,2],[6109,2],[[6110,6111],3],[[6112,6121],2],[[6122,6127],3],[[6128,6137],2],[[6138,6143],3],[[6144,6154],2],[[6155,6158],7],[6159,7],[[6160,6169],2],[[6170,6175],3],[[6176,6263],2],[6264,2],[[6265,6271],3],[[6272,6313],2],[6314,2],[[6315,6319],3],[[6320,6389],2],[[6390,6399],3],[[6400,6428],2],[[6429,6430],2],[6431,3],[[6432,6443],2],[[6444,6447],3],[[6448,6459],2],[[6460,6463],3],[6464,2],[[6465,6467],3],[[6468,6469],2],[[6470,6509],2],[[6510,6511],3],[[6512,6516],2],[[6517,6527],3],[[6528,6569],2],[[6570,6571],2],[[6572,6575],3],[[6576,6601],2],[[6602,6607],3],[[6608,6617],2],[6618,2],[[6619,6621],3],[[6622,6623],2],[[6624,6655],2],[[6656,6683],2],[[6684,6685],3],[[6686,6687],2],[[6688,6750],2],[6751,3],[[6752,6780],2],[[6781,6782],3],[[6783,6793],2],[[6794,6799],3],[[6800,6809],2],[[6810,6815],3],[[6816,6822],2],[6823,2],[[6824,6829],2],[[6830,6831],3],[[6832,6845],2],[6846,2],[[6847,6848],2],[[6849,6862],2],[[6863,6911],3],[[6912,6987],2],[6988,2],[6989,3],[[6990,6991],2],[[6992,7001],2],[[7002,7018],2],[[7019,7027],2],[[7028,7036],2],[[7037,7038],2],[7039,2],[[7040,7082],2],[[7083,7085],2],[[7086,7097],2],[[7098,7103],2],[[7104,7155],2],[[7156,7163],3],[[7164,7167],2],[[7168,7223],2],[[7224,7226],3],[[7227,7231],2],[[7232,7241],2],[[7242,7244],3],[[7245,7293],2],[[7294,7295],2],[7296,1,"\u0432"],[7297,1,"\u0434"],[7298,1,"\u043E"],[7299,1,"\u0441"],[[7300,7301],1,"\u0442"],[7302,1,"\u044A"],[7303,1,"\u0463"],[7304,1,"\uA64B"],[7305,1,"\u1C8A"],[7306,2],[[7307,7311],3],[7312,1,"\u10D0"],[7313,1,"\u10D1"],[7314,1,"\u10D2"],[7315,1,"\u10D3"],[7316,1,"\u10D4"],[7317,1,"\u10D5"],[7318,1,"\u10D6"],[7319,1,"\u10D7"],[7320,1,"\u10D8"],[7321,1,"\u10D9"],[7322,1,"\u10DA"],[7323,1,"\u10DB"],[7324,1,"\u10DC"],[7325,1,"\u10DD"],[7326,1,"\u10DE"],[7327,1,"\u10DF"],[7328,1,"\u10E0"],[7329,1,"\u10E1"],[7330,1,"\u10E2"],[7331,1,"\u10E3"],[7332,1,"\u10E4"],[7333,1,"\u10E5"],[7334,1,"\u10E6"],[7335,1,"\u10E7"],[7336,1,"\u10E8"],[7337,1,"\u10E9"],[7338,1,"\u10EA"],[7339,1,"\u10EB"],[7340,1,"\u10EC"],[7341,1,"\u10ED"],[7342,1,"\u10EE"],[7343,1,"\u10EF"],[7344,1,"\u10F0"],[7345,1,"\u10F1"],[7346,1,"\u10F2"],[7347,1,"\u10F3"],[7348,1,"\u10F4"],[7349,1,"\u10F5"],[7350,1,"\u10F6"],[7351,1,"\u10F7"],[7352,1,"\u10F8"],[7353,1,"\u10F9"],[7354,1,"\u10FA"],[[7355,7356],3],[7357,1,"\u10FD"],[7358,1,"\u10FE"],[7359,1,"\u10FF"],[[7360,7367],2],[[7368,7375],3],[[7376,7378],2],[7379,2],[[7380,7410],2],[[7411,7414],2],[7415,2],[[7416,7417],2],[7418,2],[[7419,7423],3],[[7424,7467],2],[7468,1,"a"],[7469,1,"\xE6"],[7470,1,"b"],[7471,2],[7472,1,"d"],[7473,1,"e"],[7474,1,"\u01DD"],[7475,1,"g"],[7476,1,"h"],[7477,1,"i"],[7478,1,"j"],[7479,1,"k"],[7480,1,"l"],[7481,1,"m"],[7482,1,"n"],[7483,2],[7484,1,"o"],[7485,1,"\u0223"],[7486,1,"p"],[7487,1,"r"],[7488,1,"t"],[7489,1,"u"],[7490,1,"w"],[7491,1,"a"],[7492,1,"\u0250"],[7493,1,"\u0251"],[7494,1,"\u1D02"],[7495,1,"b"],[7496,1,"d"],[7497,1,"e"],[7498,1,"\u0259"],[7499,1,"\u025B"],[7500,1,"\u025C"],[7501,1,"g"],[7502,2],[7503,1,"k"],[7504,1,"m"],[7505,1,"\u014B"],[7506,1,"o"],[7507,1,"\u0254"],[7508,1,"\u1D16"],[7509,1,"\u1D17"],[7510,1,"p"],[7511,1,"t"],[7512,1,"u"],[7513,1,"\u1D1D"],[7514,1,"\u026F"],[7515,1,"v"],[7516,1,"\u1D25"],[7517,1,"\u03B2"],[7518,1,"\u03B3"],[7519,1,"\u03B4"],[7520,1,"\u03C6"],[7521,1,"\u03C7"],[7522,1,"i"],[7523,1,"r"],[7524,1,"u"],[7525,1,"v"],[7526,1,"\u03B2"],[7527,1,"\u03B3"],[7528,1,"\u03C1"],[7529,1,"\u03C6"],[7530,1,"\u03C7"],[7531,2],[[7532,7543],2],[7544,1,"\u043D"],[[7545,7578],2],[7579,1,"\u0252"],[7580,1,"c"],[7581,1,"\u0255"],[7582,1,"\xF0"],[7583,1,"\u025C"],[7584,1,"f"],[7585,1,"\u025F"],[7586,1,"\u0261"],[7587,1,"\u0265"],[7588,1,"\u0268"],[7589,1,"\u0269"],[7590,1,"\u026A"],[7591,1,"\u1D7B"],[7592,1,"\u029D"],[7593,1,"\u026D"],[7594,1,"\u1D85"],[7595,1,"\u029F"],[7596,1,"\u0271"],[7597,1,"\u0270"],[7598,1,"\u0272"],[7599,1,"\u0273"],[7600,1,"\u0274"],[7601,1,"\u0275"],[7602,1,"\u0278"],[7603,1,"\u0282"],[7604,1,"\u0283"],[7605,1,"\u01AB"],[7606,1,"\u0289"],[7607,1,"\u028A"],[7608,1,"\u1D1C"],[7609,1,"\u028B"],[7610,1,"\u028C"],[7611,1,"z"],[7612,1,"\u0290"],[7613,1,"\u0291"],[7614,1,"\u0292"],[7615,1,"\u03B8"],[[7616,7619],2],[[7620,7626],2],[[7627,7654],2],[[7655,7669],2],[[7670,7673],2],[7674,2],[7675,2],[7676,2],[7677,2],[[7678,7679],2],[7680,1,"\u1E01"],[7681,2],[7682,1,"\u1E03"],[7683,2],[7684,1,"\u1E05"],[7685,2],[7686,1,"\u1E07"],[7687,2],[7688,1,"\u1E09"],[7689,2],[7690,1,"\u1E0B"],[7691,2],[7692,1,"\u1E0D"],[7693,2],[7694,1,"\u1E0F"],[7695,2],[7696,1,"\u1E11"],[7697,2],[7698,1,"\u1E13"],[7699,2],[7700,1,"\u1E15"],[7701,2],[7702,1,"\u1E17"],[7703,2],[7704,1,"\u1E19"],[7705,2],[7706,1,"\u1E1B"],[7707,2],[7708,1,"\u1E1D"],[7709,2],[7710,1,"\u1E1F"],[7711,2],[7712,1,"\u1E21"],[7713,2],[7714,1,"\u1E23"],[7715,2],[7716,1,"\u1E25"],[7717,2],[7718,1,"\u1E27"],[7719,2],[7720,1,"\u1E29"],[7721,2],[7722,1,"\u1E2B"],[7723,2],[7724,1,"\u1E2D"],[7725,2],[7726,1,"\u1E2F"],[7727,2],[7728,1,"\u1E31"],[7729,2],[7730,1,"\u1E33"],[7731,2],[7732,1,"\u1E35"],[7733,2],[7734,1,"\u1E37"],[7735,2],[7736,1,"\u1E39"],[7737,2],[7738,1,"\u1E3B"],[7739,2],[7740,1,"\u1E3D"],[7741,2],[7742,1,"\u1E3F"],[7743,2],[7744,1,"\u1E41"],[7745,2],[7746,1,"\u1E43"],[7747,2],[7748,1,"\u1E45"],[7749,2],[7750,1,"\u1E47"],[7751,2],[7752,1,"\u1E49"],[7753,2],[7754,1,"\u1E4B"],[7755,2],[7756,1,"\u1E4D"],[7757,2],[7758,1,"\u1E4F"],[7759,2],[7760,1,"\u1E51"],[7761,2],[7762,1,"\u1E53"],[7763,2],[7764,1,"\u1E55"],[7765,2],[7766,1,"\u1E57"],[7767,2],[7768,1,"\u1E59"],[7769,2],[7770,1,"\u1E5B"],[7771,2],[7772,1,"\u1E5D"],[7773,2],[7774,1,"\u1E5F"],[7775,2],[7776,1,"\u1E61"],[7777,2],[7778,1,"\u1E63"],[7779,2],[7780,1,"\u1E65"],[7781,2],[7782,1,"\u1E67"],[7783,2],[7784,1,"\u1E69"],[7785,2],[7786,1,"\u1E6B"],[7787,2],[7788,1,"\u1E6D"],[7789,2],[7790,1,"\u1E6F"],[7791,2],[7792,1,"\u1E71"],[7793,2],[7794,1,"\u1E73"],[7795,2],[7796,1,"\u1E75"],[7797,2],[7798,1,"\u1E77"],[7799,2],[7800,1,"\u1E79"],[7801,2],[7802,1,"\u1E7B"],[7803,2],[7804,1,"\u1E7D"],[7805,2],[7806,1,"\u1E7F"],[7807,2],[7808,1,"\u1E81"],[7809,2],[7810,1,"\u1E83"],[7811,2],[7812,1,"\u1E85"],[7813,2],[7814,1,"\u1E87"],[7815,2],[7816,1,"\u1E89"],[7817,2],[7818,1,"\u1E8B"],[7819,2],[7820,1,"\u1E8D"],[7821,2],[7822,1,"\u1E8F"],[7823,2],[7824,1,"\u1E91"],[7825,2],[7826,1,"\u1E93"],[7827,2],[7828,1,"\u1E95"],[[7829,7833],2],[7834,1,"a\u02BE"],[7835,1,"\u1E61"],[[7836,7837],2],[7838,1,"\xDF"],[7839,2],[7840,1,"\u1EA1"],[7841,2],[7842,1,"\u1EA3"],[7843,2],[7844,1,"\u1EA5"],[7845,2],[7846,1,"\u1EA7"],[7847,2],[7848,1,"\u1EA9"],[7849,2],[7850,1,"\u1EAB"],[7851,2],[7852,1,"\u1EAD"],[7853,2],[7854,1,"\u1EAF"],[7855,2],[7856,1,"\u1EB1"],[7857,2],[7858,1,"\u1EB3"],[7859,2],[7860,1,"\u1EB5"],[7861,2],[7862,1,"\u1EB7"],[7863,2],[7864,1,"\u1EB9"],[7865,2],[7866,1,"\u1EBB"],[7867,2],[7868,1,"\u1EBD"],[7869,2],[7870,1,"\u1EBF"],[7871,2],[7872,1,"\u1EC1"],[7873,2],[7874,1,"\u1EC3"],[7875,2],[7876,1,"\u1EC5"],[7877,2],[7878,1,"\u1EC7"],[7879,2],[7880,1,"\u1EC9"],[7881,2],[7882,1,"\u1ECB"],[7883,2],[7884,1,"\u1ECD"],[7885,2],[7886,1,"\u1ECF"],[7887,2],[7888,1,"\u1ED1"],[7889,2],[7890,1,"\u1ED3"],[7891,2],[7892,1,"\u1ED5"],[7893,2],[7894,1,"\u1ED7"],[7895,2],[7896,1,"\u1ED9"],[7897,2],[7898,1,"\u1EDB"],[7899,2],[7900,1,"\u1EDD"],[7901,2],[7902,1,"\u1EDF"],[7903,2],[7904,1,"\u1EE1"],[7905,2],[7906,1,"\u1EE3"],[7907,2],[7908,1,"\u1EE5"],[7909,2],[7910,1,"\u1EE7"],[7911,2],[7912,1,"\u1EE9"],[7913,2],[7914,1,"\u1EEB"],[7915,2],[7916,1,"\u1EED"],[7917,2],[7918,1,"\u1EEF"],[7919,2],[7920,1,"\u1EF1"],[7921,2],[7922,1,"\u1EF3"],[7923,2],[7924,1,"\u1EF5"],[7925,2],[7926,1,"\u1EF7"],[7927,2],[7928,1,"\u1EF9"],[7929,2],[7930,1,"\u1EFB"],[7931,2],[7932,1,"\u1EFD"],[7933,2],[7934,1,"\u1EFF"],[7935,2],[[7936,7943],2],[7944,1,"\u1F00"],[7945,1,"\u1F01"],[7946,1,"\u1F02"],[7947,1,"\u1F03"],[7948,1,"\u1F04"],[7949,1,"\u1F05"],[7950,1,"\u1F06"],[7951,1,"\u1F07"],[[7952,7957],2],[[7958,7959],3],[7960,1,"\u1F10"],[7961,1,"\u1F11"],[7962,1,"\u1F12"],[7963,1,"\u1F13"],[7964,1,"\u1F14"],[7965,1,"\u1F15"],[[7966,7967],3],[[7968,7975],2],[7976,1,"\u1F20"],[7977,1,"\u1F21"],[7978,1,"\u1F22"],[7979,1,"\u1F23"],[7980,1,"\u1F24"],[7981,1,"\u1F25"],[7982,1,"\u1F26"],[7983,1,"\u1F27"],[[7984,7991],2],[7992,1,"\u1F30"],[7993,1,"\u1F31"],[7994,1,"\u1F32"],[7995,1,"\u1F33"],[7996,1,"\u1F34"],[7997,1,"\u1F35"],[7998,1,"\u1F36"],[7999,1,"\u1F37"],[[8e3,8005],2],[[8006,8007],3],[8008,1,"\u1F40"],[8009,1,"\u1F41"],[8010,1,"\u1F42"],[8011,1,"\u1F43"],[8012,1,"\u1F44"],[8013,1,"\u1F45"],[[8014,8015],3],[[8016,8023],2],[8024,3],[8025,1,"\u1F51"],[8026,3],[8027,1,"\u1F53"],[8028,3],[8029,1,"\u1F55"],[8030,3],[8031,1,"\u1F57"],[[8032,8039],2],[8040,1,"\u1F60"],[8041,1,"\u1F61"],[8042,1,"\u1F62"],[8043,1,"\u1F63"],[8044,1,"\u1F64"],[8045,1,"\u1F65"],[8046,1,"\u1F66"],[8047,1,"\u1F67"],[8048,2],[8049,1,"\u03AC"],[8050,2],[8051,1,"\u03AD"],[8052,2],[8053,1,"\u03AE"],[8054,2],[8055,1,"\u03AF"],[8056,2],[8057,1,"\u03CC"],[8058,2],[8059,1,"\u03CD"],[8060,2],[8061,1,"\u03CE"],[[8062,8063],3],[8064,1,"\u1F00\u03B9"],[8065,1,"\u1F01\u03B9"],[8066,1,"\u1F02\u03B9"],[8067,1,"\u1F03\u03B9"],[8068,1,"\u1F04\u03B9"],[8069,1,"\u1F05\u03B9"],[8070,1,"\u1F06\u03B9"],[8071,1,"\u1F07\u03B9"],[8072,1,"\u1F00\u03B9"],[8073,1,"\u1F01\u03B9"],[8074,1,"\u1F02\u03B9"],[8075,1,"\u1F03\u03B9"],[8076,1,"\u1F04\u03B9"],[8077,1,"\u1F05\u03B9"],[8078,1,"\u1F06\u03B9"],[8079,1,"\u1F07\u03B9"],[8080,1,"\u1F20\u03B9"],[8081,1,"\u1F21\u03B9"],[8082,1,"\u1F22\u03B9"],[8083,1,"\u1F23\u03B9"],[8084,1,"\u1F24\u03B9"],[8085,1,"\u1F25\u03B9"],[8086,1,"\u1F26\u03B9"],[8087,1,"\u1F27\u03B9"],[8088,1,"\u1F20\u03B9"],[8089,1,"\u1F21\u03B9"],[8090,1,"\u1F22\u03B9"],[8091,1,"\u1F23\u03B9"],[8092,1,"\u1F24\u03B9"],[8093,1,"\u1F25\u03B9"],[8094,1,"\u1F26\u03B9"],[8095,1,"\u1F27\u03B9"],[8096,1,"\u1F60\u03B9"],[8097,1,"\u1F61\u03B9"],[8098,1,"\u1F62\u03B9"],[8099,1,"\u1F63\u03B9"],[8100,1,"\u1F64\u03B9"],[8101,1,"\u1F65\u03B9"],[8102,1,"\u1F66\u03B9"],[8103,1,"\u1F67\u03B9"],[8104,1,"\u1F60\u03B9"],[8105,1,"\u1F61\u03B9"],[8106,1,"\u1F62\u03B9"],[8107,1,"\u1F63\u03B9"],[8108,1,"\u1F64\u03B9"],[8109,1,"\u1F65\u03B9"],[8110,1,"\u1F66\u03B9"],[8111,1,"\u1F67\u03B9"],[[8112,8113],2],[8114,1,"\u1F70\u03B9"],[8115,1,"\u03B1\u03B9"],[8116,1,"\u03AC\u03B9"],[8117,3],[8118,2],[8119,1,"\u1FB6\u03B9"],[8120,1,"\u1FB0"],[8121,1,"\u1FB1"],[8122,1,"\u1F70"],[8123,1,"\u03AC"],[8124,1,"\u03B1\u03B9"],[8125,1," \u0313"],[8126,1,"\u03B9"],[8127,1," \u0313"],[8128,1," \u0342"],[8129,1," \u0308\u0342"],[8130,1,"\u1F74\u03B9"],[8131,1,"\u03B7\u03B9"],[8132,1,"\u03AE\u03B9"],[8133,3],[8134,2],[8135,1,"\u1FC6\u03B9"],[8136,1,"\u1F72"],[8137,1,"\u03AD"],[8138,1,"\u1F74"],[8139,1,"\u03AE"],[8140,1,"\u03B7\u03B9"],[8141,1," \u0313\u0300"],[8142,1," \u0313\u0301"],[8143,1," \u0313\u0342"],[[8144,8146],2],[8147,1,"\u0390"],[[8148,8149],3],[[8150,8151],2],[8152,1,"\u1FD0"],[8153,1,"\u1FD1"],[8154,1,"\u1F76"],[8155,1,"\u03AF"],[8156,3],[8157,1," \u0314\u0300"],[8158,1," \u0314\u0301"],[8159,1," \u0314\u0342"],[[8160,8162],2],[8163,1,"\u03B0"],[[8164,8167],2],[8168,1,"\u1FE0"],[8169,1,"\u1FE1"],[8170,1,"\u1F7A"],[8171,1,"\u03CD"],[8172,1,"\u1FE5"],[8173,1," \u0308\u0300"],[8174,1," \u0308\u0301"],[8175,1,"`"],[[8176,8177],3],[8178,1,"\u1F7C\u03B9"],[8179,1,"\u03C9\u03B9"],[8180,1,"\u03CE\u03B9"],[8181,3],[8182,2],[8183,1,"\u1FF6\u03B9"],[8184,1,"\u1F78"],[8185,1,"\u03CC"],[8186,1,"\u1F7C"],[8187,1,"\u03CE"],[8188,1,"\u03C9\u03B9"],[8189,1," \u0301"],[8190,1," \u0314"],[8191,3],[[8192,8202],1," "],[8203,7],[[8204,8205],6,""],[[8206,8207],3],[8208,2],[8209,1,"\u2010"],[[8210,8214],2],[8215,1," \u0333"],[[8216,8227],2],[[8228,8230],3],[8231,2],[[8232,8238],3],[8239,1," "],[[8240,8242],2],[8243,1,"\u2032\u2032"],[8244,1,"\u2032\u2032\u2032"],[8245,2],[8246,1,"\u2035\u2035"],[8247,1,"\u2035\u2035\u2035"],[[8248,8251],2],[8252,1,"!!"],[8253,2],[8254,1," \u0305"],[[8255,8262],2],[8263,1,"??"],[8264,1,"?!"],[8265,1,"!?"],[[8266,8269],2],[[8270,8274],2],[[8275,8276],2],[[8277,8278],2],[8279,1,"\u2032\u2032\u2032\u2032"],[[8280,8286],2],[8287,1," "],[[8288,8291],7],[8292,7],[8293,3],[[8294,8297],3],[[8298,8303],7],[8304,1,"0"],[8305,1,"i"],[[8306,8307],3],[8308,1,"4"],[8309,1,"5"],[8310,1,"6"],[8311,1,"7"],[8312,1,"8"],[8313,1,"9"],[8314,1,"+"],[8315,1,"\u2212"],[8316,1,"="],[8317,1,"("],[8318,1,")"],[8319,1,"n"],[8320,1,"0"],[8321,1,"1"],[8322,1,"2"],[8323,1,"3"],[8324,1,"4"],[8325,1,"5"],[8326,1,"6"],[8327,1,"7"],[8328,1,"8"],[8329,1,"9"],[8330,1,"+"],[8331,1,"\u2212"],[8332,1,"="],[8333,1,"("],[8334,1,")"],[8335,3],[8336,1,"a"],[8337,1,"e"],[8338,1,"o"],[8339,1,"x"],[8340,1,"\u0259"],[8341,1,"h"],[8342,1,"k"],[8343,1,"l"],[8344,1,"m"],[8345,1,"n"],[8346,1,"p"],[8347,1,"s"],[8348,1,"t"],[[8349,8351],3],[[8352,8359],2],[8360,1,"rs"],[[8361,8362],2],[8363,2],[8364,2],[[8365,8367],2],[[8368,8369],2],[[8370,8373],2],[[8374,8376],2],[8377,2],[8378,2],[[8379,8381],2],[8382,2],[8383,2],[8384,2],[[8385,8399],3],[[8400,8417],2],[[8418,8419],2],[[8420,8426],2],[8427,2],[[8428,8431],2],[8432,2],[[8433,8447],3],[8448,1,"a/c"],[8449,1,"a/s"],[8450,1,"c"],[8451,1,"\xB0c"],[8452,2],[8453,1,"c/o"],[8454,1,"c/u"],[8455,1,"\u025B"],[8456,2],[8457,1,"\xB0f"],[8458,1,"g"],[[8459,8462],1,"h"],[8463,1,"\u0127"],[[8464,8465],1,"i"],[[8466,8467],1,"l"],[8468,2],[8469,1,"n"],[8470,1,"no"],[[8471,8472],2],[8473,1,"p"],[8474,1,"q"],[[8475,8477],1,"r"],[[8478,8479],2],[8480,1,"sm"],[8481,1,"tel"],[8482,1,"tm"],[8483,2],[8484,1,"z"],[8485,2],[8486,1,"\u03C9"],[8487,2],[8488,1,"z"],[8489,2],[8490,1,"k"],[8491,1,"\xE5"],[8492,1,"b"],[8493,1,"c"],[8494,2],[[8495,8496],1,"e"],[8497,1,"f"],[8498,1,"\u214E"],[8499,1,"m"],[8500,1,"o"],[8501,1,"\u05D0"],[8502,1,"\u05D1"],[8503,1,"\u05D2"],[8504,1,"\u05D3"],[8505,1,"i"],[8506,2],[8507,1,"fax"],[8508,1,"\u03C0"],[[8509,8510],1,"\u03B3"],[8511,1,"\u03C0"],[8512,1,"\u2211"],[[8513,8516],2],[[8517,8518],1,"d"],[8519,1,"e"],[8520,1,"i"],[8521,1,"j"],[[8522,8523],2],[8524,2],[8525,2],[8526,2],[8527,2],[8528,1,"1\u20447"],[8529,1,"1\u20449"],[8530,1,"1\u204410"],[8531,1,"1\u20443"],[8532,1,"2\u20443"],[8533,1,"1\u20445"],[8534,1,"2\u20445"],[8535,1,"3\u20445"],[8536,1,"4\u20445"],[8537,1,"1\u20446"],[8538,1,"5\u20446"],[8539,1,"1\u20448"],[8540,1,"3\u20448"],[8541,1,"5\u20448"],[8542,1,"7\u20448"],[8543,1,"1\u2044"],[8544,1,"i"],[8545,1,"ii"],[8546,1,"iii"],[8547,1,"iv"],[8548,1,"v"],[8549,1,"vi"],[8550,1,"vii"],[8551,1,"viii"],[8552,1,"ix"],[8553,1,"x"],[8554,1,"xi"],[8555,1,"xii"],[8556,1,"l"],[8557,1,"c"],[8558,1,"d"],[8559,1,"m"],[8560,1,"i"],[8561,1,"ii"],[8562,1,"iii"],[8563,1,"iv"],[8564,1,"v"],[8565,1,"vi"],[8566,1,"vii"],[8567,1,"viii"],[8568,1,"ix"],[8569,1,"x"],[8570,1,"xi"],[8571,1,"xii"],[8572,1,"l"],[8573,1,"c"],[8574,1,"d"],[8575,1,"m"],[[8576,8578],2],[8579,1,"\u2184"],[8580,2],[[8581,8584],2],[8585,1,"0\u20443"],[[8586,8587],2],[[8588,8591],3],[[8592,8682],2],[[8683,8691],2],[[8692,8703],2],[[8704,8747],2],[8748,1,"\u222B\u222B"],[8749,1,"\u222B\u222B\u222B"],[8750,2],[8751,1,"\u222E\u222E"],[8752,1,"\u222E\u222E\u222E"],[[8753,8945],2],[[8946,8959],2],[8960,2],[8961,2],[[8962,9e3],2],[9001,1,"\u3008"],[9002,1,"\u3009"],[[9003,9082],2],[9083,2],[9084,2],[[9085,9114],2],[[9115,9166],2],[[9167,9168],2],[[9169,9179],2],[[9180,9191],2],[9192,2],[[9193,9203],2],[[9204,9210],2],[[9211,9214],2],[9215,2],[[9216,9252],2],[[9253,9254],2],[[9255,9257],2],[[9258,9279],3],[[9280,9290],2],[[9291,9311],3],[9312,1,"1"],[9313,1,"2"],[9314,1,"3"],[9315,1,"4"],[9316,1,"5"],[9317,1,"6"],[9318,1,"7"],[9319,1,"8"],[9320,1,"9"],[9321,1,"10"],[9322,1,"11"],[9323,1,"12"],[9324,1,"13"],[9325,1,"14"],[9326,1,"15"],[9327,1,"16"],[9328,1,"17"],[9329,1,"18"],[9330,1,"19"],[9331,1,"20"],[9332,1,"(1)"],[9333,1,"(2)"],[9334,1,"(3)"],[9335,1,"(4)"],[9336,1,"(5)"],[9337,1,"(6)"],[9338,1,"(7)"],[9339,1,"(8)"],[9340,1,"(9)"],[9341,1,"(10)"],[9342,1,"(11)"],[9343,1,"(12)"],[9344,1,"(13)"],[9345,1,"(14)"],[9346,1,"(15)"],[9347,1,"(16)"],[9348,1,"(17)"],[9349,1,"(18)"],[9350,1,"(19)"],[9351,1,"(20)"],[[9352,9371],3],[9372,1,"(a)"],[9373,1,"(b)"],[9374,1,"(c)"],[9375,1,"(d)"],[9376,1,"(e)"],[9377,1,"(f)"],[9378,1,"(g)"],[9379,1,"(h)"],[9380,1,"(i)"],[9381,1,"(j)"],[9382,1,"(k)"],[9383,1,"(l)"],[9384,1,"(m)"],[9385,1,"(n)"],[9386,1,"(o)"],[9387,1,"(p)"],[9388,1,"(q)"],[9389,1,"(r)"],[9390,1,"(s)"],[9391,1,"(t)"],[9392,1,"(u)"],[9393,1,"(v)"],[9394,1,"(w)"],[9395,1,"(x)"],[9396,1,"(y)"],[9397,1,"(z)"],[9398,1,"a"],[9399,1,"b"],[9400,1,"c"],[9401,1,"d"],[9402,1,"e"],[9403,1,"f"],[9404,1,"g"],[9405,1,"h"],[9406,1,"i"],[9407,1,"j"],[9408,1,"k"],[9409,1,"l"],[9410,1,"m"],[9411,1,"n"],[9412,1,"o"],[9413,1,"p"],[9414,1,"q"],[9415,1,"r"],[9416,1,"s"],[9417,1,"t"],[9418,1,"u"],[9419,1,"v"],[9420,1,"w"],[9421,1,"x"],[9422,1,"y"],[9423,1,"z"],[9424,1,"a"],[9425,1,"b"],[9426,1,"c"],[9427,1,"d"],[9428,1,"e"],[9429,1,"f"],[9430,1,"g"],[9431,1,"h"],[9432,1,"i"],[9433,1,"j"],[9434,1,"k"],[9435,1,"l"],[9436,1,"m"],[9437,1,"n"],[9438,1,"o"],[9439,1,"p"],[9440,1,"q"],[9441,1,"r"],[9442,1,"s"],[9443,1,"t"],[9444,1,"u"],[9445,1,"v"],[9446,1,"w"],[9447,1,"x"],[9448,1,"y"],[9449,1,"z"],[9450,1,"0"],[[9451,9470],2],[9471,2],[[9472,9621],2],[[9622,9631],2],[[9632,9711],2],[[9712,9719],2],[[9720,9727],2],[[9728,9747],2],[[9748,9749],2],[[9750,9751],2],[9752,2],[9753,2],[[9754,9839],2],[[9840,9841],2],[[9842,9853],2],[[9854,9855],2],[[9856,9865],2],[[9866,9873],2],[[9874,9884],2],[9885,2],[[9886,9887],2],[[9888,9889],2],[[9890,9905],2],[9906,2],[[9907,9916],2],[[9917,9919],2],[[9920,9923],2],[[9924,9933],2],[9934,2],[[9935,9953],2],[9954,2],[9955,2],[[9956,9959],2],[[9960,9983],2],[9984,2],[[9985,9988],2],[9989,2],[[9990,9993],2],[[9994,9995],2],[[9996,10023],2],[10024,2],[[10025,10059],2],[10060,2],[10061,2],[10062,2],[[10063,10066],2],[[10067,10069],2],[10070,2],[10071,2],[[10072,10078],2],[[10079,10080],2],[[10081,10087],2],[[10088,10101],2],[[10102,10132],2],[[10133,10135],2],[[10136,10159],2],[10160,2],[[10161,10174],2],[10175,2],[[10176,10182],2],[[10183,10186],2],[10187,2],[10188,2],[10189,2],[[10190,10191],2],[[10192,10219],2],[[10220,10223],2],[[10224,10239],2],[[10240,10495],2],[[10496,10763],2],[10764,1,"\u222B\u222B\u222B\u222B"],[[10765,10867],2],[10868,1,"::="],[10869,1,"=="],[10870,1,"==="],[[10871,10971],2],[10972,1,"\u2ADD\u0338"],[[10973,11007],2],[[11008,11021],2],[[11022,11027],2],[[11028,11034],2],[[11035,11039],2],[[11040,11043],2],[[11044,11084],2],[[11085,11087],2],[[11088,11092],2],[[11093,11097],2],[[11098,11123],2],[[11124,11125],3],[[11126,11157],2],[11158,3],[11159,2],[[11160,11193],2],[[11194,11196],2],[[11197,11208],2],[11209,2],[[11210,11217],2],[11218,2],[[11219,11243],2],[[11244,11247],2],[[11248,11262],2],[11263,2],[11264,1,"\u2C30"],[11265,1,"\u2C31"],[11266,1,"\u2C32"],[11267,1,"\u2C33"],[11268,1,"\u2C34"],[11269,1,"\u2C35"],[11270,1,"\u2C36"],[11271,1,"\u2C37"],[11272,1,"\u2C38"],[11273,1,"\u2C39"],[11274,1,"\u2C3A"],[11275,1,"\u2C3B"],[11276,1,"\u2C3C"],[11277,1,"\u2C3D"],[11278,1,"\u2C3E"],[11279,1,"\u2C3F"],[11280,1,"\u2C40"],[11281,1,"\u2C41"],[11282,1,"\u2C42"],[11283,1,"\u2C43"],[11284,1,"\u2C44"],[11285,1,"\u2C45"],[11286,1,"\u2C46"],[11287,1,"\u2C47"],[11288,1,"\u2C48"],[11289,1,"\u2C49"],[11290,1,"\u2C4A"],[11291,1,"\u2C4B"],[11292,1,"\u2C4C"],[11293,1,"\u2C4D"],[11294,1,"\u2C4E"],[11295,1,"\u2C4F"],[11296,1,"\u2C50"],[11297,1,"\u2C51"],[11298,1,"\u2C52"],[11299,1,"\u2C53"],[11300,1,"\u2C54"],[11301,1,"\u2C55"],[11302,1,"\u2C56"],[11303,1,"\u2C57"],[11304,1,"\u2C58"],[11305,1,"\u2C59"],[11306,1,"\u2C5A"],[11307,1,"\u2C5B"],[11308,1,"\u2C5C"],[11309,1,"\u2C5D"],[11310,1,"\u2C5E"],[11311,1,"\u2C5F"],[[11312,11358],2],[11359,2],[11360,1,"\u2C61"],[11361,2],[11362,1,"\u026B"],[11363,1,"\u1D7D"],[11364,1,"\u027D"],[[11365,11366],2],[11367,1,"\u2C68"],[11368,2],[11369,1,"\u2C6A"],[11370,2],[11371,1,"\u2C6C"],[11372,2],[11373,1,"\u0251"],[11374,1,"\u0271"],[11375,1,"\u0250"],[11376,1,"\u0252"],[11377,2],[11378,1,"\u2C73"],[11379,2],[11380,2],[11381,1,"\u2C76"],[[11382,11383],2],[[11384,11387],2],[11388,1,"j"],[11389,1,"v"],[11390,1,"\u023F"],[11391,1,"\u0240"],[11392,1,"\u2C81"],[11393,2],[11394,1,"\u2C83"],[11395,2],[11396,1,"\u2C85"],[11397,2],[11398,1,"\u2C87"],[11399,2],[11400,1,"\u2C89"],[11401,2],[11402,1,"\u2C8B"],[11403,2],[11404,1,"\u2C8D"],[11405,2],[11406,1,"\u2C8F"],[11407,2],[11408,1,"\u2C91"],[11409,2],[11410,1,"\u2C93"],[11411,2],[11412,1,"\u2C95"],[11413,2],[11414,1,"\u2C97"],[11415,2],[11416,1,"\u2C99"],[11417,2],[11418,1,"\u2C9B"],[11419,2],[11420,1,"\u2C9D"],[11421,2],[11422,1,"\u2C9F"],[11423,2],[11424,1,"\u2CA1"],[11425,2],[11426,1,"\u2CA3"],[11427,2],[11428,1,"\u2CA5"],[11429,2],[11430,1,"\u2CA7"],[11431,2],[11432,1,"\u2CA9"],[11433,2],[11434,1,"\u2CAB"],[11435,2],[11436,1,"\u2CAD"],[11437,2],[11438,1,"\u2CAF"],[11439,2],[11440,1,"\u2CB1"],[11441,2],[11442,1,"\u2CB3"],[11443,2],[11444,1,"\u2CB5"],[11445,2],[11446,1,"\u2CB7"],[11447,2],[11448,1,"\u2CB9"],[11449,2],[11450,1,"\u2CBB"],[11451,2],[11452,1,"\u2CBD"],[11453,2],[11454,1,"\u2CBF"],[11455,2],[11456,1,"\u2CC1"],[11457,2],[11458,1,"\u2CC3"],[11459,2],[11460,1,"\u2CC5"],[11461,2],[11462,1,"\u2CC7"],[11463,2],[11464,1,"\u2CC9"],[11465,2],[11466,1,"\u2CCB"],[11467,2],[11468,1,"\u2CCD"],[11469,2],[11470,1,"\u2CCF"],[11471,2],[11472,1,"\u2CD1"],[11473,2],[11474,1,"\u2CD3"],[11475,2],[11476,1,"\u2CD5"],[11477,2],[11478,1,"\u2CD7"],[11479,2],[11480,1,"\u2CD9"],[11481,2],[11482,1,"\u2CDB"],[11483,2],[11484,1,"\u2CDD"],[11485,2],[11486,1,"\u2CDF"],[11487,2],[11488,1,"\u2CE1"],[11489,2],[11490,1,"\u2CE3"],[[11491,11492],2],[[11493,11498],2],[11499,1,"\u2CEC"],[11500,2],[11501,1,"\u2CEE"],[[11502,11505],2],[11506,1,"\u2CF3"],[11507,2],[[11508,11512],3],[[11513,11519],2],[[11520,11557],2],[11558,3],[11559,2],[[11560,11564],3],[11565,2],[[11566,11567],3],[[11568,11621],2],[[11622,11623],2],[[11624,11630],3],[11631,1,"\u2D61"],[11632,2],[[11633,11646],3],[11647,2],[[11648,11670],2],[[11671,11679],3],[[11680,11686],2],[11687,3],[[11688,11694],2],[11695,3],[[11696,11702],2],[11703,3],[[11704,11710],2],[11711,3],[[11712,11718],2],[11719,3],[[11720,11726],2],[11727,3],[[11728,11734],2],[11735,3],[[11736,11742],2],[11743,3],[[11744,11775],2],[[11776,11799],2],[[11800,11803],2],[[11804,11805],2],[[11806,11822],2],[11823,2],[11824,2],[11825,2],[[11826,11835],2],[[11836,11842],2],[[11843,11844],2],[[11845,11849],2],[[11850,11854],2],[11855,2],[[11856,11858],2],[[11859,11869],2],[[11870,11903],3],[[11904,11929],2],[11930,3],[[11931,11934],2],[11935,1,"\u6BCD"],[[11936,12018],2],[12019,1,"\u9F9F"],[[12020,12031],3],[12032,1,"\u4E00"],[12033,1,"\u4E28"],[12034,1,"\u4E36"],[12035,1,"\u4E3F"],[12036,1,"\u4E59"],[12037,1,"\u4E85"],[12038,1,"\u4E8C"],[12039,1,"\u4EA0"],[12040,1,"\u4EBA"],[12041,1,"\u513F"],[12042,1,"\u5165"],[12043,1,"\u516B"],[12044,1,"\u5182"],[12045,1,"\u5196"],[12046,1,"\u51AB"],[12047,1,"\u51E0"],[12048,1,"\u51F5"],[12049,1,"\u5200"],[12050,1,"\u529B"],[12051,1,"\u52F9"],[12052,1,"\u5315"],[12053,1,"\u531A"],[12054,1,"\u5338"],[12055,1,"\u5341"],[12056,1,"\u535C"],[12057,1,"\u5369"],[12058,1,"\u5382"],[12059,1,"\u53B6"],[12060,1,"\u53C8"],[12061,1,"\u53E3"],[12062,1,"\u56D7"],[12063,1,"\u571F"],[12064,1,"\u58EB"],[12065,1,"\u5902"],[12066,1,"\u590A"],[12067,1,"\u5915"],[12068,1,"\u5927"],[12069,1,"\u5973"],[12070,1,"\u5B50"],[12071,1,"\u5B80"],[12072,1,"\u5BF8"],[12073,1,"\u5C0F"],[12074,1,"\u5C22"],[12075,1,"\u5C38"],[12076,1,"\u5C6E"],[12077,1,"\u5C71"],[12078,1,"\u5DDB"],[12079,1,"\u5DE5"],[12080,1,"\u5DF1"],[12081,1,"\u5DFE"],[12082,1,"\u5E72"],[12083,1,"\u5E7A"],[12084,1,"\u5E7F"],[12085,1,"\u5EF4"],[12086,1,"\u5EFE"],[12087,1,"\u5F0B"],[12088,1,"\u5F13"],[12089,1,"\u5F50"],[12090,1,"\u5F61"],[12091,1,"\u5F73"],[12092,1,"\u5FC3"],[12093,1,"\u6208"],[12094,1,"\u6236"],[12095,1,"\u624B"],[12096,1,"\u652F"],[12097,1,"\u6534"],[12098,1,"\u6587"],[12099,1,"\u6597"],[12100,1,"\u65A4"],[12101,1,"\u65B9"],[12102,1,"\u65E0"],[12103,1,"\u65E5"],[12104,1,"\u66F0"],[12105,1,"\u6708"],[12106,1,"\u6728"],[12107,1,"\u6B20"],[12108,1,"\u6B62"],[12109,1,"\u6B79"],[12110,1,"\u6BB3"],[12111,1,"\u6BCB"],[12112,1,"\u6BD4"],[12113,1,"\u6BDB"],[12114,1,"\u6C0F"],[12115,1,"\u6C14"],[12116,1,"\u6C34"],[12117,1,"\u706B"],[12118,1,"\u722A"],[12119,1,"\u7236"],[12120,1,"\u723B"],[12121,1,"\u723F"],[12122,1,"\u7247"],[12123,1,"\u7259"],[12124,1,"\u725B"],[12125,1,"\u72AC"],[12126,1,"\u7384"],[12127,1,"\u7389"],[12128,1,"\u74DC"],[12129,1,"\u74E6"],[12130,1,"\u7518"],[12131,1,"\u751F"],[12132,1,"\u7528"],[12133,1,"\u7530"],[12134,1,"\u758B"],[12135,1,"\u7592"],[12136,1,"\u7676"],[12137,1,"\u767D"],[12138,1,"\u76AE"],[12139,1,"\u76BF"],[12140,1,"\u76EE"],[12141,1,"\u77DB"],[12142,1,"\u77E2"],[12143,1,"\u77F3"],[12144,1,"\u793A"],[12145,1,"\u79B8"],[12146,1,"\u79BE"],[12147,1,"\u7A74"],[12148,1,"\u7ACB"],[12149,1,"\u7AF9"],[12150,1,"\u7C73"],[12151,1,"\u7CF8"],[12152,1,"\u7F36"],[12153,1,"\u7F51"],[12154,1,"\u7F8A"],[12155,1,"\u7FBD"],[12156,1,"\u8001"],[12157,1,"\u800C"],[12158,1,"\u8012"],[12159,1,"\u8033"],[12160,1,"\u807F"],[12161,1,"\u8089"],[12162,1,"\u81E3"],[12163,1,"\u81EA"],[12164,1,"\u81F3"],[12165,1,"\u81FC"],[12166,1,"\u820C"],[12167,1,"\u821B"],[12168,1,"\u821F"],[12169,1,"\u826E"],[12170,1,"\u8272"],[12171,1,"\u8278"],[12172,1,"\u864D"],[12173,1,"\u866B"],[12174,1,"\u8840"],[12175,1,"\u884C"],[12176,1,"\u8863"],[12177,1,"\u897E"],[12178,1,"\u898B"],[12179,1,"\u89D2"],[12180,1,"\u8A00"],[12181,1,"\u8C37"],[12182,1,"\u8C46"],[12183,1,"\u8C55"],[12184,1,"\u8C78"],[12185,1,"\u8C9D"],[12186,1,"\u8D64"],[12187,1,"\u8D70"],[12188,1,"\u8DB3"],[12189,1,"\u8EAB"],[12190,1,"\u8ECA"],[12191,1,"\u8F9B"],[12192,1,"\u8FB0"],[12193,1,"\u8FB5"],[12194,1,"\u9091"],[12195,1,"\u9149"],[12196,1,"\u91C6"],[12197,1,"\u91CC"],[12198,1,"\u91D1"],[12199,1,"\u9577"],[12200,1,"\u9580"],[12201,1,"\u961C"],[12202,1,"\u96B6"],[12203,1,"\u96B9"],[12204,1,"\u96E8"],[12205,1,"\u9751"],[12206,1,"\u975E"],[12207,1,"\u9762"],[12208,1,"\u9769"],[12209,1,"\u97CB"],[12210,1,"\u97ED"],[12211,1,"\u97F3"],[12212,1,"\u9801"],[12213,1,"\u98A8"],[12214,1,"\u98DB"],[12215,1,"\u98DF"],[12216,1,"\u9996"],[12217,1,"\u9999"],[12218,1,"\u99AC"],[12219,1,"\u9AA8"],[12220,1,"\u9AD8"],[12221,1,"\u9ADF"],[12222,1,"\u9B25"],[12223,1,"\u9B2F"],[12224,1,"\u9B32"],[12225,1,"\u9B3C"],[12226,1,"\u9B5A"],[12227,1,"\u9CE5"],[12228,1,"\u9E75"],[12229,1,"\u9E7F"],[12230,1,"\u9EA5"],[12231,1,"\u9EBB"],[12232,1,"\u9EC3"],[12233,1,"\u9ECD"],[12234,1,"\u9ED1"],[12235,1,"\u9EF9"],[12236,1,"\u9EFD"],[12237,1,"\u9F0E"],[12238,1,"\u9F13"],[12239,1,"\u9F20"],[12240,1,"\u9F3B"],[12241,1,"\u9F4A"],[12242,1,"\u9F52"],[12243,1,"\u9F8D"],[12244,1,"\u9F9C"],[12245,1,"\u9FA0"],[[12246,12271],3],[[12272,12283],3],[[12284,12287],3],[12288,1," "],[12289,2],[12290,1,"."],[[12291,12292],2],[[12293,12295],2],[[12296,12329],2],[[12330,12333],2],[[12334,12341],2],[12342,1,"\u3012"],[12343,2],[12344,1,"\u5341"],[12345,1,"\u5344"],[12346,1,"\u5345"],[12347,2],[12348,2],[12349,2],[12350,2],[12351,2],[12352,3],[[12353,12436],2],[[12437,12438],2],[[12439,12440],3],[[12441,12442],2],[12443,1," \u3099"],[12444,1," \u309A"],[[12445,12446],2],[12447,1,"\u3088\u308A"],[12448,2],[[12449,12542],2],[12543,1,"\u30B3\u30C8"],[[12544,12548],3],[[12549,12588],2],[12589,2],[12590,2],[12591,2],[12592,3],[12593,1,"\u1100"],[12594,1,"\u1101"],[12595,1,"\u11AA"],[12596,1,"\u1102"],[12597,1,"\u11AC"],[12598,1,"\u11AD"],[12599,1,"\u1103"],[12600,1,"\u1104"],[12601,1,"\u1105"],[12602,1,"\u11B0"],[12603,1,"\u11B1"],[12604,1,"\u11B2"],[12605,1,"\u11B3"],[12606,1,"\u11B4"],[12607,1,"\u11B5"],[12608,1,"\u111A"],[12609,1,"\u1106"],[12610,1,"\u1107"],[12611,1,"\u1108"],[12612,1,"\u1121"],[12613,1,"\u1109"],[12614,1,"\u110A"],[12615,1,"\u110B"],[12616,1,"\u110C"],[12617,1,"\u110D"],[12618,1,"\u110E"],[12619,1,"\u110F"],[12620,1,"\u1110"],[12621,1,"\u1111"],[12622,1,"\u1112"],[12623,1,"\u1161"],[12624,1,"\u1162"],[12625,1,"\u1163"],[12626,1,"\u1164"],[12627,1,"\u1165"],[12628,1,"\u1166"],[12629,1,"\u1167"],[12630,1,"\u1168"],[12631,1,"\u1169"],[12632,1,"\u116A"],[12633,1,"\u116B"],[12634,1,"\u116C"],[12635,1,"\u116D"],[12636,1,"\u116E"],[12637,1,"\u116F"],[12638,1,"\u1170"],[12639,1,"\u1171"],[12640,1,"\u1172"],[12641,1,"\u1173"],[12642,1,"\u1174"],[12643,1,"\u1175"],[12644,7],[12645,1,"\u1114"],[12646,1,"\u1115"],[12647,1,"\u11C7"],[12648,1,"\u11C8"],[12649,1,"\u11CC"],[12650,1,"\u11CE"],[12651,1,"\u11D3"],[12652,1,"\u11D7"],[12653,1,"\u11D9"],[12654,1,"\u111C"],[12655,1,"\u11DD"],[12656,1,"\u11DF"],[12657,1,"\u111D"],[12658,1,"\u111E"],[12659,1,"\u1120"],[12660,1,"\u1122"],[12661,1,"\u1123"],[12662,1,"\u1127"],[12663,1,"\u1129"],[12664,1,"\u112B"],[12665,1,"\u112C"],[12666,1,"\u112D"],[12667,1,"\u112E"],[12668,1,"\u112F"],[12669,1,"\u1132"],[12670,1,"\u1136"],[12671,1,"\u1140"],[12672,1,"\u1147"],[12673,1,"\u114C"],[12674,1,"\u11F1"],[12675,1,"\u11F2"],[12676,1,"\u1157"],[12677,1,"\u1158"],[12678,1,"\u1159"],[12679,1,"\u1184"],[12680,1,"\u1185"],[12681,1,"\u1188"],[12682,1,"\u1191"],[12683,1,"\u1192"],[12684,1,"\u1194"],[12685,1,"\u119E"],[12686,1,"\u11A1"],[12687,3],[[12688,12689],2],[12690,1,"\u4E00"],[12691,1,"\u4E8C"],[12692,1,"\u4E09"],[12693,1,"\u56DB"],[12694,1,"\u4E0A"],[12695,1,"\u4E2D"],[12696,1,"\u4E0B"],[12697,1,"\u7532"],[12698,1,"\u4E59"],[12699,1,"\u4E19"],[12700,1,"\u4E01"],[12701,1,"\u5929"],[12702,1,"\u5730"],[12703,1,"\u4EBA"],[[12704,12727],2],[[12728,12730],2],[[12731,12735],2],[[12736,12751],2],[[12752,12771],2],[[12772,12773],2],[[12774,12782],3],[12783,3],[[12784,12799],2],[12800,1,"(\u1100)"],[12801,1,"(\u1102)"],[12802,1,"(\u1103)"],[12803,1,"(\u1105)"],[12804,1,"(\u1106)"],[12805,1,"(\u1107)"],[12806,1,"(\u1109)"],[12807,1,"(\u110B)"],[12808,1,"(\u110C)"],[12809,1,"(\u110E)"],[12810,1,"(\u110F)"],[12811,1,"(\u1110)"],[12812,1,"(\u1111)"],[12813,1,"(\u1112)"],[12814,1,"(\uAC00)"],[12815,1,"(\uB098)"],[12816,1,"(\uB2E4)"],[12817,1,"(\uB77C)"],[12818,1,"(\uB9C8)"],[12819,1,"(\uBC14)"],[12820,1,"(\uC0AC)"],[12821,1,"(\uC544)"],[12822,1,"(\uC790)"],[12823,1,"(\uCC28)"],[12824,1,"(\uCE74)"],[12825,1,"(\uD0C0)"],[12826,1,"(\uD30C)"],[12827,1,"(\uD558)"],[12828,1,"(\uC8FC)"],[12829,1,"(\uC624\uC804)"],[12830,1,"(\uC624\uD6C4)"],[12831,3],[12832,1,"(\u4E00)"],[12833,1,"(\u4E8C)"],[12834,1,"(\u4E09)"],[12835,1,"(\u56DB)"],[12836,1,"(\u4E94)"],[12837,1,"(\u516D)"],[12838,1,"(\u4E03)"],[12839,1,"(\u516B)"],[12840,1,"(\u4E5D)"],[12841,1,"(\u5341)"],[12842,1,"(\u6708)"],[12843,1,"(\u706B)"],[12844,1,"(\u6C34)"],[12845,1,"(\u6728)"],[12846,1,"(\u91D1)"],[12847,1,"(\u571F)"],[12848,1,"(\u65E5)"],[12849,1,"(\u682A)"],[12850,1,"(\u6709)"],[12851,1,"(\u793E)"],[12852,1,"(\u540D)"],[12853,1,"(\u7279)"],[12854,1,"(\u8CA1)"],[12855,1,"(\u795D)"],[12856,1,"(\u52B4)"],[12857,1,"(\u4EE3)"],[12858,1,"(\u547C)"],[12859,1,"(\u5B66)"],[12860,1,"(\u76E3)"],[12861,1,"(\u4F01)"],[12862,1,"(\u8CC7)"],[12863,1,"(\u5354)"],[12864,1,"(\u796D)"],[12865,1,"(\u4F11)"],[12866,1,"(\u81EA)"],[12867,1,"(\u81F3)"],[12868,1,"\u554F"],[12869,1,"\u5E7C"],[12870,1,"\u6587"],[12871,1,"\u7B8F"],[[12872,12879],2],[12880,1,"pte"],[12881,1,"21"],[12882,1,"22"],[12883,1,"23"],[12884,1,"24"],[12885,1,"25"],[12886,1,"26"],[12887,1,"27"],[12888,1,"28"],[12889,1,"29"],[12890,1,"30"],[12891,1,"31"],[12892,1,"32"],[12893,1,"33"],[12894,1,"34"],[12895,1,"35"],[12896,1,"\u1100"],[12897,1,"\u1102"],[12898,1,"\u1103"],[12899,1,"\u1105"],[12900,1,"\u1106"],[12901,1,"\u1107"],[12902,1,"\u1109"],[12903,1,"\u110B"],[12904,1,"\u110C"],[12905,1,"\u110E"],[12906,1,"\u110F"],[12907,1,"\u1110"],[12908,1,"\u1111"],[12909,1,"\u1112"],[12910,1,"\uAC00"],[12911,1,"\uB098"],[12912,1,"\uB2E4"],[12913,1,"\uB77C"],[12914,1,"\uB9C8"],[12915,1,"\uBC14"],[12916,1,"\uC0AC"],[12917,1,"\uC544"],[12918,1,"\uC790"],[12919,1,"\uCC28"],[12920,1,"\uCE74"],[12921,1,"\uD0C0"],[12922,1,"\uD30C"],[12923,1,"\uD558"],[12924,1,"\uCC38\uACE0"],[12925,1,"\uC8FC\uC758"],[12926,1,"\uC6B0"],[12927,2],[12928,1,"\u4E00"],[12929,1,"\u4E8C"],[12930,1,"\u4E09"],[12931,1,"\u56DB"],[12932,1,"\u4E94"],[12933,1,"\u516D"],[12934,1,"\u4E03"],[12935,1,"\u516B"],[12936,1,"\u4E5D"],[12937,1,"\u5341"],[12938,1,"\u6708"],[12939,1,"\u706B"],[12940,1,"\u6C34"],[12941,1,"\u6728"],[12942,1,"\u91D1"],[12943,1,"\u571F"],[12944,1,"\u65E5"],[12945,1,"\u682A"],[12946,1,"\u6709"],[12947,1,"\u793E"],[12948,1,"\u540D"],[12949,1,"\u7279"],[12950,1,"\u8CA1"],[12951,1,"\u795D"],[12952,1,"\u52B4"],[12953,1,"\u79D8"],[12954,1,"\u7537"],[12955,1,"\u5973"],[12956,1,"\u9069"],[12957,1,"\u512A"],[12958,1,"\u5370"],[12959,1,"\u6CE8"],[12960,1,"\u9805"],[12961,1,"\u4F11"],[12962,1,"\u5199"],[12963,1,"\u6B63"],[12964,1,"\u4E0A"],[12965,1,"\u4E2D"],[12966,1,"\u4E0B"],[12967,1,"\u5DE6"],[12968,1,"\u53F3"],[12969,1,"\u533B"],[12970,1,"\u5B97"],[12971,1,"\u5B66"],[12972,1,"\u76E3"],[12973,1,"\u4F01"],[12974,1,"\u8CC7"],[12975,1,"\u5354"],[12976,1,"\u591C"],[12977,1,"36"],[12978,1,"37"],[12979,1,"38"],[12980,1,"39"],[12981,1,"40"],[12982,1,"41"],[12983,1,"42"],[12984,1,"43"],[12985,1,"44"],[12986,1,"45"],[12987,1,"46"],[12988,1,"47"],[12989,1,"48"],[12990,1,"49"],[12991,1,"50"],[12992,1,"1\u6708"],[12993,1,"2\u6708"],[12994,1,"3\u6708"],[12995,1,"4\u6708"],[12996,1,"5\u6708"],[12997,1,"6\u6708"],[12998,1,"7\u6708"],[12999,1,"8\u6708"],[13e3,1,"9\u6708"],[13001,1,"10\u6708"],[13002,1,"11\u6708"],[13003,1,"12\u6708"],[13004,1,"hg"],[13005,1,"erg"],[13006,1,"ev"],[13007,1,"ltd"],[13008,1,"\u30A2"],[13009,1,"\u30A4"],[13010,1,"\u30A6"],[13011,1,"\u30A8"],[13012,1,"\u30AA"],[13013,1,"\u30AB"],[13014,1,"\u30AD"],[13015,1,"\u30AF"],[13016,1,"\u30B1"],[13017,1,"\u30B3"],[13018,1,"\u30B5"],[13019,1,"\u30B7"],[13020,1,"\u30B9"],[13021,1,"\u30BB"],[13022,1,"\u30BD"],[13023,1,"\u30BF"],[13024,1,"\u30C1"],[13025,1,"\u30C4"],[13026,1,"\u30C6"],[13027,1,"\u30C8"],[13028,1,"\u30CA"],[13029,1,"\u30CB"],[13030,1,"\u30CC"],[13031,1,"\u30CD"],[13032,1,"\u30CE"],[13033,1,"\u30CF"],[13034,1,"\u30D2"],[13035,1,"\u30D5"],[13036,1,"\u30D8"],[13037,1,"\u30DB"],[13038,1,"\u30DE"],[13039,1,"\u30DF"],[13040,1,"\u30E0"],[13041,1,"\u30E1"],[13042,1,"\u30E2"],[13043,1,"\u30E4"],[13044,1,"\u30E6"],[13045,1,"\u30E8"],[13046,1,"\u30E9"],[13047,1,"\u30EA"],[13048,1,"\u30EB"],[13049,1,"\u30EC"],[13050,1,"\u30ED"],[13051,1,"\u30EF"],[13052,1,"\u30F0"],[13053,1,"\u30F1"],[13054,1,"\u30F2"],[13055,1,"\u4EE4\u548C"],[13056,1,"\u30A2\u30D1\u30FC\u30C8"],[13057,1,"\u30A2\u30EB\u30D5\u30A1"],[13058,1,"\u30A2\u30F3\u30DA\u30A2"],[13059,1,"\u30A2\u30FC\u30EB"],[13060,1,"\u30A4\u30CB\u30F3\u30B0"],[13061,1,"\u30A4\u30F3\u30C1"],[13062,1,"\u30A6\u30A9\u30F3"],[13063,1,"\u30A8\u30B9\u30AF\u30FC\u30C9"],[13064,1,"\u30A8\u30FC\u30AB\u30FC"],[13065,1,"\u30AA\u30F3\u30B9"],[13066,1,"\u30AA\u30FC\u30E0"],[13067,1,"\u30AB\u30A4\u30EA"],[13068,1,"\u30AB\u30E9\u30C3\u30C8"],[13069,1,"\u30AB\u30ED\u30EA\u30FC"],[13070,1,"\u30AC\u30ED\u30F3"],[13071,1,"\u30AC\u30F3\u30DE"],[13072,1,"\u30AE\u30AC"],[13073,1,"\u30AE\u30CB\u30FC"],[13074,1,"\u30AD\u30E5\u30EA\u30FC"],[13075,1,"\u30AE\u30EB\u30C0\u30FC"],[13076,1,"\u30AD\u30ED"],[13077,1,"\u30AD\u30ED\u30B0\u30E9\u30E0"],[13078,1,"\u30AD\u30ED\u30E1\u30FC\u30C8\u30EB"],[13079,1,"\u30AD\u30ED\u30EF\u30C3\u30C8"],[13080,1,"\u30B0\u30E9\u30E0"],[13081,1,"\u30B0\u30E9\u30E0\u30C8\u30F3"],[13082,1,"\u30AF\u30EB\u30BC\u30A4\u30ED"],[13083,1,"\u30AF\u30ED\u30FC\u30CD"],[13084,1,"\u30B1\u30FC\u30B9"],[13085,1,"\u30B3\u30EB\u30CA"],[13086,1,"\u30B3\u30FC\u30DD"],[13087,1,"\u30B5\u30A4\u30AF\u30EB"],[13088,1,"\u30B5\u30F3\u30C1\u30FC\u30E0"],[13089,1,"\u30B7\u30EA\u30F3\u30B0"],[13090,1,"\u30BB\u30F3\u30C1"],[13091,1,"\u30BB\u30F3\u30C8"],[13092,1,"\u30C0\u30FC\u30B9"],[13093,1,"\u30C7\u30B7"],[13094,1,"\u30C9\u30EB"],[13095,1,"\u30C8\u30F3"],[13096,1,"\u30CA\u30CE"],[13097,1,"\u30CE\u30C3\u30C8"],[13098,1,"\u30CF\u30A4\u30C4"],[13099,1,"\u30D1\u30FC\u30BB\u30F3\u30C8"],[13100,1,"\u30D1\u30FC\u30C4"],[13101,1,"\u30D0\u30FC\u30EC\u30EB"],[13102,1,"\u30D4\u30A2\u30B9\u30C8\u30EB"],[13103,1,"\u30D4\u30AF\u30EB"],[13104,1,"\u30D4\u30B3"],[13105,1,"\u30D3\u30EB"],[13106,1,"\u30D5\u30A1\u30E9\u30C3\u30C9"],[13107,1,"\u30D5\u30A3\u30FC\u30C8"],[13108,1,"\u30D6\u30C3\u30B7\u30A7\u30EB"],[13109,1,"\u30D5\u30E9\u30F3"],[13110,1,"\u30D8\u30AF\u30BF\u30FC\u30EB"],[13111,1,"\u30DA\u30BD"],[13112,1,"\u30DA\u30CB\u30D2"],[13113,1,"\u30D8\u30EB\u30C4"],[13114,1,"\u30DA\u30F3\u30B9"],[13115,1,"\u30DA\u30FC\u30B8"],[13116,1,"\u30D9\u30FC\u30BF"],[13117,1,"\u30DD\u30A4\u30F3\u30C8"],[13118,1,"\u30DC\u30EB\u30C8"],[13119,1,"\u30DB\u30F3"],[13120,1,"\u30DD\u30F3\u30C9"],[13121,1,"\u30DB\u30FC\u30EB"],[13122,1,"\u30DB\u30FC\u30F3"],[13123,1,"\u30DE\u30A4\u30AF\u30ED"],[13124,1,"\u30DE\u30A4\u30EB"],[13125,1,"\u30DE\u30C3\u30CF"],[13126,1,"\u30DE\u30EB\u30AF"],[13127,1,"\u30DE\u30F3\u30B7\u30E7\u30F3"],[13128,1,"\u30DF\u30AF\u30ED\u30F3"],[13129,1,"\u30DF\u30EA"],[13130,1,"\u30DF\u30EA\u30D0\u30FC\u30EB"],[13131,1,"\u30E1\u30AC"],[13132,1,"\u30E1\u30AC\u30C8\u30F3"],[13133,1,"\u30E1\u30FC\u30C8\u30EB"],[13134,1,"\u30E4\u30FC\u30C9"],[13135,1,"\u30E4\u30FC\u30EB"],[13136,1,"\u30E6\u30A2\u30F3"],[13137,1,"\u30EA\u30C3\u30C8\u30EB"],[13138,1,"\u30EA\u30E9"],[13139,1,"\u30EB\u30D4\u30FC"],[13140,1,"\u30EB\u30FC\u30D6\u30EB"],[13141,1,"\u30EC\u30E0"],[13142,1,"\u30EC\u30F3\u30C8\u30B2\u30F3"],[13143,1,"\u30EF\u30C3\u30C8"],[13144,1,"0\u70B9"],[13145,1,"1\u70B9"],[13146,1,"2\u70B9"],[13147,1,"3\u70B9"],[13148,1,"4\u70B9"],[13149,1,"5\u70B9"],[13150,1,"6\u70B9"],[13151,1,"7\u70B9"],[13152,1,"8\u70B9"],[13153,1,"9\u70B9"],[13154,1,"10\u70B9"],[13155,1,"11\u70B9"],[13156,1,"12\u70B9"],[13157,1,"13\u70B9"],[13158,1,"14\u70B9"],[13159,1,"15\u70B9"],[13160,1,"16\u70B9"],[13161,1,"17\u70B9"],[13162,1,"18\u70B9"],[13163,1,"19\u70B9"],[13164,1,"20\u70B9"],[13165,1,"21\u70B9"],[13166,1,"22\u70B9"],[13167,1,"23\u70B9"],[13168,1,"24\u70B9"],[13169,1,"hpa"],[13170,1,"da"],[13171,1,"au"],[13172,1,"bar"],[13173,1,"ov"],[13174,1,"pc"],[13175,1,"dm"],[13176,1,"dm2"],[13177,1,"dm3"],[13178,1,"iu"],[13179,1,"\u5E73\u6210"],[13180,1,"\u662D\u548C"],[13181,1,"\u5927\u6B63"],[13182,1,"\u660E\u6CBB"],[13183,1,"\u682A\u5F0F\u4F1A\u793E"],[13184,1,"pa"],[13185,1,"na"],[13186,1,"\u03BCa"],[13187,1,"ma"],[13188,1,"ka"],[13189,1,"kb"],[13190,1,"mb"],[13191,1,"gb"],[13192,1,"cal"],[13193,1,"kcal"],[13194,1,"pf"],[13195,1,"nf"],[13196,1,"\u03BCf"],[13197,1,"\u03BCg"],[13198,1,"mg"],[13199,1,"kg"],[13200,1,"hz"],[13201,1,"khz"],[13202,1,"mhz"],[13203,1,"ghz"],[13204,1,"thz"],[13205,1,"\u03BCl"],[13206,1,"ml"],[13207,1,"dl"],[13208,1,"kl"],[13209,1,"fm"],[13210,1,"nm"],[13211,1,"\u03BCm"],[13212,1,"mm"],[13213,1,"cm"],[13214,1,"km"],[13215,1,"mm2"],[13216,1,"cm2"],[13217,1,"m2"],[13218,1,"km2"],[13219,1,"mm3"],[13220,1,"cm3"],[13221,1,"m3"],[13222,1,"km3"],[13223,1,"m\u2215s"],[13224,1,"m\u2215s2"],[13225,1,"pa"],[13226,1,"kpa"],[13227,1,"mpa"],[13228,1,"gpa"],[13229,1,"rad"],[13230,1,"rad\u2215s"],[13231,1,"rad\u2215s2"],[13232,1,"ps"],[13233,1,"ns"],[13234,1,"\u03BCs"],[13235,1,"ms"],[13236,1,"pv"],[13237,1,"nv"],[13238,1,"\u03BCv"],[13239,1,"mv"],[13240,1,"kv"],[13241,1,"mv"],[13242,1,"pw"],[13243,1,"nw"],[13244,1,"\u03BCw"],[13245,1,"mw"],[13246,1,"kw"],[13247,1,"mw"],[13248,1,"k\u03C9"],[13249,1,"m\u03C9"],[13250,3],[13251,1,"bq"],[13252,1,"cc"],[13253,1,"cd"],[13254,1,"c\u2215kg"],[13255,3],[13256,1,"db"],[13257,1,"gy"],[13258,1,"ha"],[13259,1,"hp"],[13260,1,"in"],[13261,1,"kk"],[13262,1,"km"],[13263,1,"kt"],[13264,1,"lm"],[13265,1,"ln"],[13266,1,"log"],[13267,1,"lx"],[13268,1,"mb"],[13269,1,"mil"],[13270,1,"mol"],[13271,1,"ph"],[13272,3],[13273,1,"ppm"],[13274,1,"pr"],[13275,1,"sr"],[13276,1,"sv"],[13277,1,"wb"],[13278,1,"v\u2215m"],[13279,1,"a\u2215m"],[13280,1,"1\u65E5"],[13281,1,"2\u65E5"],[13282,1,"3\u65E5"],[13283,1,"4\u65E5"],[13284,1,"5\u65E5"],[13285,1,"6\u65E5"],[13286,1,"7\u65E5"],[13287,1,"8\u65E5"],[13288,1,"9\u65E5"],[13289,1,"10\u65E5"],[13290,1,"11\u65E5"],[13291,1,"12\u65E5"],[13292,1,"13\u65E5"],[13293,1,"14\u65E5"],[13294,1,"15\u65E5"],[13295,1,"16\u65E5"],[13296,1,"17\u65E5"],[13297,1,"18\u65E5"],[13298,1,"19\u65E5"],[13299,1,"20\u65E5"],[13300,1,"21\u65E5"],[13301,1,"22\u65E5"],[13302,1,"23\u65E5"],[13303,1,"24\u65E5"],[13304,1,"25\u65E5"],[13305,1,"26\u65E5"],[13306,1,"27\u65E5"],[13307,1,"28\u65E5"],[13308,1,"29\u65E5"],[13309,1,"30\u65E5"],[13310,1,"31\u65E5"],[13311,1,"gal"],[[13312,19893],2],[[19894,19903],2],[[19904,19967],2],[[19968,40869],2],[[40870,40891],2],[[40892,40899],2],[[40900,40907],2],[40908,2],[[40909,40917],2],[[40918,40938],2],[[40939,40943],2],[[40944,40956],2],[[40957,40959],2],[[40960,42124],2],[[42125,42127],3],[[42128,42145],2],[[42146,42147],2],[[42148,42163],2],[42164,2],[[42165,42176],2],[42177,2],[[42178,42180],2],[42181,2],[42182,2],[[42183,42191],3],[[42192,42237],2],[[42238,42239],2],[[42240,42508],2],[[42509,42511],2],[[42512,42539],2],[[42540,42559],3],[42560,1,"\uA641"],[42561,2],[42562,1,"\uA643"],[42563,2],[42564,1,"\uA645"],[42565,2],[42566,1,"\uA647"],[42567,2],[42568,1,"\uA649"],[42569,2],[42570,1,"\uA64B"],[42571,2],[42572,1,"\uA64D"],[42573,2],[42574,1,"\uA64F"],[42575,2],[42576,1,"\uA651"],[42577,2],[42578,1,"\uA653"],[42579,2],[42580,1,"\uA655"],[42581,2],[42582,1,"\uA657"],[42583,2],[42584,1,"\uA659"],[42585,2],[42586,1,"\uA65B"],[42587,2],[42588,1,"\uA65D"],[42589,2],[42590,1,"\uA65F"],[42591,2],[42592,1,"\uA661"],[42593,2],[42594,1,"\uA663"],[42595,2],[42596,1,"\uA665"],[42597,2],[42598,1,"\uA667"],[42599,2],[42600,1,"\uA669"],[42601,2],[42602,1,"\uA66B"],[42603,2],[42604,1,"\uA66D"],[[42605,42607],2],[[42608,42611],2],[[42612,42619],2],[[42620,42621],2],[42622,2],[42623,2],[42624,1,"\uA681"],[42625,2],[42626,1,"\uA683"],[42627,2],[42628,1,"\uA685"],[42629,2],[42630,1,"\uA687"],[42631,2],[42632,1,"\uA689"],[42633,2],[42634,1,"\uA68B"],[42635,2],[42636,1,"\uA68D"],[42637,2],[42638,1,"\uA68F"],[42639,2],[42640,1,"\uA691"],[42641,2],[42642,1,"\uA693"],[42643,2],[42644,1,"\uA695"],[42645,2],[42646,1,"\uA697"],[42647,2],[42648,1,"\uA699"],[42649,2],[42650,1,"\uA69B"],[42651,2],[42652,1,"\u044A"],[42653,1,"\u044C"],[42654,2],[42655,2],[[42656,42725],2],[[42726,42735],2],[[42736,42737],2],[[42738,42743],2],[[42744,42751],3],[[42752,42774],2],[[42775,42778],2],[[42779,42783],2],[[42784,42785],2],[42786,1,"\uA723"],[42787,2],[42788,1,"\uA725"],[42789,2],[42790,1,"\uA727"],[42791,2],[42792,1,"\uA729"],[42793,2],[42794,1,"\uA72B"],[42795,2],[42796,1,"\uA72D"],[42797,2],[42798,1,"\uA72F"],[[42799,42801],2],[42802,1,"\uA733"],[42803,2],[42804,1,"\uA735"],[42805,2],[42806,1,"\uA737"],[42807,2],[42808,1,"\uA739"],[42809,2],[42810,1,"\uA73B"],[42811,2],[42812,1,"\uA73D"],[42813,2],[42814,1,"\uA73F"],[42815,2],[42816,1,"\uA741"],[42817,2],[42818,1,"\uA743"],[42819,2],[42820,1,"\uA745"],[42821,2],[42822,1,"\uA747"],[42823,2],[42824,1,"\uA749"],[42825,2],[42826,1,"\uA74B"],[42827,2],[42828,1,"\uA74D"],[42829,2],[42830,1,"\uA74F"],[42831,2],[42832,1,"\uA751"],[42833,2],[42834,1,"\uA753"],[42835,2],[42836,1,"\uA755"],[42837,2],[42838,1,"\uA757"],[42839,2],[42840,1,"\uA759"],[42841,2],[42842,1,"\uA75B"],[42843,2],[42844,1,"\uA75D"],[42845,2],[42846,1,"\uA75F"],[42847,2],[42848,1,"\uA761"],[42849,2],[42850,1,"\uA763"],[42851,2],[42852,1,"\uA765"],[42853,2],[42854,1,"\uA767"],[42855,2],[42856,1,"\uA769"],[42857,2],[42858,1,"\uA76B"],[42859,2],[42860,1,"\uA76D"],[42861,2],[42862,1,"\uA76F"],[42863,2],[42864,1,"\uA76F"],[[42865,42872],2],[42873,1,"\uA77A"],[42874,2],[42875,1,"\uA77C"],[42876,2],[42877,1,"\u1D79"],[42878,1,"\uA77F"],[42879,2],[42880,1,"\uA781"],[42881,2],[42882,1,"\uA783"],[42883,2],[42884,1,"\uA785"],[42885,2],[42886,1,"\uA787"],[[42887,42888],2],[[42889,42890],2],[42891,1,"\uA78C"],[42892,2],[42893,1,"\u0265"],[42894,2],[42895,2],[42896,1,"\uA791"],[42897,2],[42898,1,"\uA793"],[42899,2],[[42900,42901],2],[42902,1,"\uA797"],[42903,2],[42904,1,"\uA799"],[42905,2],[42906,1,"\uA79B"],[42907,2],[42908,1,"\uA79D"],[42909,2],[42910,1,"\uA79F"],[42911,2],[42912,1,"\uA7A1"],[42913,2],[42914,1,"\uA7A3"],[42915,2],[42916,1,"\uA7A5"],[42917,2],[42918,1,"\uA7A7"],[42919,2],[42920,1,"\uA7A9"],[42921,2],[42922,1,"\u0266"],[42923,1,"\u025C"],[42924,1,"\u0261"],[42925,1,"\u026C"],[42926,1,"\u026A"],[42927,2],[42928,1,"\u029E"],[42929,1,"\u0287"],[42930,1,"\u029D"],[42931,1,"\uAB53"],[42932,1,"\uA7B5"],[42933,2],[42934,1,"\uA7B7"],[42935,2],[42936,1,"\uA7B9"],[42937,2],[42938,1,"\uA7BB"],[42939,2],[42940,1,"\uA7BD"],[42941,2],[42942,1,"\uA7BF"],[42943,2],[42944,1,"\uA7C1"],[42945,2],[42946,1,"\uA7C3"],[42947,2],[42948,1,"\uA794"],[42949,1,"\u0282"],[42950,1,"\u1D8E"],[42951,1,"\uA7C8"],[42952,2],[42953,1,"\uA7CA"],[42954,2],[42955,1,"\u0264"],[42956,1,"\uA7CD"],[42957,2],[[42958,42959],3],[42960,1,"\uA7D1"],[42961,2],[42962,3],[42963,2],[42964,3],[42965,2],[42966,1,"\uA7D7"],[42967,2],[42968,1,"\uA7D9"],[42969,2],[42970,1,"\uA7DB"],[42971,2],[42972,1,"\u019B"],[[42973,42993],3],[42994,1,"c"],[42995,1,"f"],[42996,1,"q"],[42997,1,"\uA7F6"],[42998,2],[42999,2],[43e3,1,"\u0127"],[43001,1,"\u0153"],[43002,2],[[43003,43007],2],[[43008,43047],2],[[43048,43051],2],[43052,2],[[43053,43055],3],[[43056,43065],2],[[43066,43071],3],[[43072,43123],2],[[43124,43127],2],[[43128,43135],3],[[43136,43204],2],[43205,2],[[43206,43213],3],[[43214,43215],2],[[43216,43225],2],[[43226,43231],3],[[43232,43255],2],[[43256,43258],2],[43259,2],[43260,2],[43261,2],[[43262,43263],2],[[43264,43309],2],[[43310,43311],2],[[43312,43347],2],[[43348,43358],3],[43359,2],[[43360,43388],2],[[43389,43391],3],[[43392,43456],2],[[43457,43469],2],[43470,3],[[43471,43481],2],[[43482,43485],3],[[43486,43487],2],[[43488,43518],2],[43519,3],[[43520,43574],2],[[43575,43583],3],[[43584,43597],2],[[43598,43599],3],[[43600,43609],2],[[43610,43611],3],[[43612,43615],2],[[43616,43638],2],[[43639,43641],2],[[43642,43643],2],[[43644,43647],2],[[43648,43714],2],[[43715,43738],3],[[43739,43741],2],[[43742,43743],2],[[43744,43759],2],[[43760,43761],2],[[43762,43766],2],[[43767,43776],3],[[43777,43782],2],[[43783,43784],3],[[43785,43790],2],[[43791,43792],3],[[43793,43798],2],[[43799,43807],3],[[43808,43814],2],[43815,3],[[43816,43822],2],[43823,3],[[43824,43866],2],[43867,2],[43868,1,"\uA727"],[43869,1,"\uAB37"],[43870,1,"\u026B"],[43871,1,"\uAB52"],[[43872,43875],2],[[43876,43877],2],[[43878,43879],2],[43880,2],[43881,1,"\u028D"],[[43882,43883],2],[[43884,43887],3],[43888,1,"\u13A0"],[43889,1,"\u13A1"],[43890,1,"\u13A2"],[43891,1,"\u13A3"],[43892,1,"\u13A4"],[43893,1,"\u13A5"],[43894,1,"\u13A6"],[43895,1,"\u13A7"],[43896,1,"\u13A8"],[43897,1,"\u13A9"],[43898,1,"\u13AA"],[43899,1,"\u13AB"],[43900,1,"\u13AC"],[43901,1,"\u13AD"],[43902,1,"\u13AE"],[43903,1,"\u13AF"],[43904,1,"\u13B0"],[43905,1,"\u13B1"],[43906,1,"\u13B2"],[43907,1,"\u13B3"],[43908,1,"\u13B4"],[43909,1,"\u13B5"],[43910,1,"\u13B6"],[43911,1,"\u13B7"],[43912,1,"\u13B8"],[43913,1,"\u13B9"],[43914,1,"\u13BA"],[43915,1,"\u13BB"],[43916,1,"\u13BC"],[43917,1,"\u13BD"],[43918,1,"\u13BE"],[43919,1,"\u13BF"],[43920,1,"\u13C0"],[43921,1,"\u13C1"],[43922,1,"\u13C2"],[43923,1,"\u13C3"],[43924,1,"\u13C4"],[43925,1,"\u13C5"],[43926,1,"\u13C6"],[43927,1,"\u13C7"],[43928,1,"\u13C8"],[43929,1,"\u13C9"],[43930,1,"\u13CA"],[43931,1,"\u13CB"],[43932,1,"\u13CC"],[43933,1,"\u13CD"],[43934,1,"\u13CE"],[43935,1,"\u13CF"],[43936,1,"\u13D0"],[43937,1,"\u13D1"],[43938,1,"\u13D2"],[43939,1,"\u13D3"],[43940,1,"\u13D4"],[43941,1,"\u13D5"],[43942,1,"\u13D6"],[43943,1,"\u13D7"],[43944,1,"\u13D8"],[43945,1,"\u13D9"],[43946,1,"\u13DA"],[43947,1,"\u13DB"],[43948,1,"\u13DC"],[43949,1,"\u13DD"],[43950,1,"\u13DE"],[43951,1,"\u13DF"],[43952,1,"\u13E0"],[43953,1,"\u13E1"],[43954,1,"\u13E2"],[43955,1,"\u13E3"],[43956,1,"\u13E4"],[43957,1,"\u13E5"],[43958,1,"\u13E6"],[43959,1,"\u13E7"],[43960,1,"\u13E8"],[43961,1,"\u13E9"],[43962,1,"\u13EA"],[43963,1,"\u13EB"],[43964,1,"\u13EC"],[43965,1,"\u13ED"],[43966,1,"\u13EE"],[43967,1,"\u13EF"],[[43968,44010],2],[44011,2],[[44012,44013],2],[[44014,44015],3],[[44016,44025],2],[[44026,44031],3],[[44032,55203],2],[[55204,55215],3],[[55216,55238],2],[[55239,55242],3],[[55243,55291],2],[[55292,55295],3],[[55296,57343],3],[[57344,63743],3],[63744,1,"\u8C48"],[63745,1,"\u66F4"],[63746,1,"\u8ECA"],[63747,1,"\u8CC8"],[63748,1,"\u6ED1"],[63749,1,"\u4E32"],[63750,1,"\u53E5"],[[63751,63752],1,"\u9F9C"],[63753,1,"\u5951"],[63754,1,"\u91D1"],[63755,1,"\u5587"],[63756,1,"\u5948"],[63757,1,"\u61F6"],[63758,1,"\u7669"],[63759,1,"\u7F85"],[63760,1,"\u863F"],[63761,1,"\u87BA"],[63762,1,"\u88F8"],[63763,1,"\u908F"],[63764,1,"\u6A02"],[63765,1,"\u6D1B"],[63766,1,"\u70D9"],[63767,1,"\u73DE"],[63768,1,"\u843D"],[63769,1,"\u916A"],[63770,1,"\u99F1"],[63771,1,"\u4E82"],[63772,1,"\u5375"],[63773,1,"\u6B04"],[63774,1,"\u721B"],[63775,1,"\u862D"],[63776,1,"\u9E1E"],[63777,1,"\u5D50"],[63778,1,"\u6FEB"],[63779,1,"\u85CD"],[63780,1,"\u8964"],[63781,1,"\u62C9"],[63782,1,"\u81D8"],[63783,1,"\u881F"],[63784,1,"\u5ECA"],[63785,1,"\u6717"],[63786,1,"\u6D6A"],[63787,1,"\u72FC"],[63788,1,"\u90CE"],[63789,1,"\u4F86"],[63790,1,"\u51B7"],[63791,1,"\u52DE"],[63792,1,"\u64C4"],[63793,1,"\u6AD3"],[63794,1,"\u7210"],[63795,1,"\u76E7"],[63796,1,"\u8001"],[63797,1,"\u8606"],[63798,1,"\u865C"],[63799,1,"\u8DEF"],[63800,1,"\u9732"],[63801,1,"\u9B6F"],[63802,1,"\u9DFA"],[63803,1,"\u788C"],[63804,1,"\u797F"],[63805,1,"\u7DA0"],[63806,1,"\u83C9"],[63807,1,"\u9304"],[63808,1,"\u9E7F"],[63809,1,"\u8AD6"],[63810,1,"\u58DF"],[63811,1,"\u5F04"],[63812,1,"\u7C60"],[63813,1,"\u807E"],[63814,1,"\u7262"],[63815,1,"\u78CA"],[63816,1,"\u8CC2"],[63817,1,"\u96F7"],[63818,1,"\u58D8"],[63819,1,"\u5C62"],[63820,1,"\u6A13"],[63821,1,"\u6DDA"],[63822,1,"\u6F0F"],[63823,1,"\u7D2F"],[63824,1,"\u7E37"],[63825,1,"\u964B"],[63826,1,"\u52D2"],[63827,1,"\u808B"],[63828,1,"\u51DC"],[63829,1,"\u51CC"],[63830,1,"\u7A1C"],[63831,1,"\u7DBE"],[63832,1,"\u83F1"],[63833,1,"\u9675"],[63834,1,"\u8B80"],[63835,1,"\u62CF"],[63836,1,"\u6A02"],[63837,1,"\u8AFE"],[63838,1,"\u4E39"],[63839,1,"\u5BE7"],[63840,1,"\u6012"],[63841,1,"\u7387"],[63842,1,"\u7570"],[63843,1,"\u5317"],[63844,1,"\u78FB"],[63845,1,"\u4FBF"],[63846,1,"\u5FA9"],[63847,1,"\u4E0D"],[63848,1,"\u6CCC"],[63849,1,"\u6578"],[63850,1,"\u7D22"],[63851,1,"\u53C3"],[63852,1,"\u585E"],[63853,1,"\u7701"],[63854,1,"\u8449"],[63855,1,"\u8AAA"],[63856,1,"\u6BBA"],[63857,1,"\u8FB0"],[63858,1,"\u6C88"],[63859,1,"\u62FE"],[63860,1,"\u82E5"],[63861,1,"\u63A0"],[63862,1,"\u7565"],[63863,1,"\u4EAE"],[63864,1,"\u5169"],[63865,1,"\u51C9"],[63866,1,"\u6881"],[63867,1,"\u7CE7"],[63868,1,"\u826F"],[63869,1,"\u8AD2"],[63870,1,"\u91CF"],[63871,1,"\u52F5"],[63872,1,"\u5442"],[63873,1,"\u5973"],[63874,1,"\u5EEC"],[63875,1,"\u65C5"],[63876,1,"\u6FFE"],[63877,1,"\u792A"],[63878,1,"\u95AD"],[63879,1,"\u9A6A"],[63880,1,"\u9E97"],[63881,1,"\u9ECE"],[63882,1,"\u529B"],[63883,1,"\u66C6"],[63884,1,"\u6B77"],[63885,1,"\u8F62"],[63886,1,"\u5E74"],[63887,1,"\u6190"],[63888,1,"\u6200"],[63889,1,"\u649A"],[63890,1,"\u6F23"],[63891,1,"\u7149"],[63892,1,"\u7489"],[63893,1,"\u79CA"],[63894,1,"\u7DF4"],[63895,1,"\u806F"],[63896,1,"\u8F26"],[63897,1,"\u84EE"],[63898,1,"\u9023"],[63899,1,"\u934A"],[63900,1,"\u5217"],[63901,1,"\u52A3"],[63902,1,"\u54BD"],[63903,1,"\u70C8"],[63904,1,"\u88C2"],[63905,1,"\u8AAA"],[63906,1,"\u5EC9"],[63907,1,"\u5FF5"],[63908,1,"\u637B"],[63909,1,"\u6BAE"],[63910,1,"\u7C3E"],[63911,1,"\u7375"],[63912,1,"\u4EE4"],[63913,1,"\u56F9"],[63914,1,"\u5BE7"],[63915,1,"\u5DBA"],[63916,1,"\u601C"],[63917,1,"\u73B2"],[63918,1,"\u7469"],[63919,1,"\u7F9A"],[63920,1,"\u8046"],[63921,1,"\u9234"],[63922,1,"\u96F6"],[63923,1,"\u9748"],[63924,1,"\u9818"],[63925,1,"\u4F8B"],[63926,1,"\u79AE"],[63927,1,"\u91B4"],[63928,1,"\u96B8"],[63929,1,"\u60E1"],[63930,1,"\u4E86"],[63931,1,"\u50DA"],[63932,1,"\u5BEE"],[63933,1,"\u5C3F"],[63934,1,"\u6599"],[63935,1,"\u6A02"],[63936,1,"\u71CE"],[63937,1,"\u7642"],[63938,1,"\u84FC"],[63939,1,"\u907C"],[63940,1,"\u9F8D"],[63941,1,"\u6688"],[63942,1,"\u962E"],[63943,1,"\u5289"],[63944,1,"\u677B"],[63945,1,"\u67F3"],[63946,1,"\u6D41"],[63947,1,"\u6E9C"],[63948,1,"\u7409"],[63949,1,"\u7559"],[63950,1,"\u786B"],[63951,1,"\u7D10"],[63952,1,"\u985E"],[63953,1,"\u516D"],[63954,1,"\u622E"],[63955,1,"\u9678"],[63956,1,"\u502B"],[63957,1,"\u5D19"],[63958,1,"\u6DEA"],[63959,1,"\u8F2A"],[63960,1,"\u5F8B"],[63961,1,"\u6144"],[63962,1,"\u6817"],[63963,1,"\u7387"],[63964,1,"\u9686"],[63965,1,"\u5229"],[63966,1,"\u540F"],[63967,1,"\u5C65"],[63968,1,"\u6613"],[63969,1,"\u674E"],[63970,1,"\u68A8"],[63971,1,"\u6CE5"],[63972,1,"\u7406"],[63973,1,"\u75E2"],[63974,1,"\u7F79"],[63975,1,"\u88CF"],[63976,1,"\u88E1"],[63977,1,"\u91CC"],[63978,1,"\u96E2"],[63979,1,"\u533F"],[63980,1,"\u6EBA"],[63981,1,"\u541D"],[63982,1,"\u71D0"],[63983,1,"\u7498"],[63984,1,"\u85FA"],[63985,1,"\u96A3"],[63986,1,"\u9C57"],[63987,1,"\u9E9F"],[63988,1,"\u6797"],[63989,1,"\u6DCB"],[63990,1,"\u81E8"],[63991,1,"\u7ACB"],[63992,1,"\u7B20"],[63993,1,"\u7C92"],[63994,1,"\u72C0"],[63995,1,"\u7099"],[63996,1,"\u8B58"],[63997,1,"\u4EC0"],[63998,1,"\u8336"],[63999,1,"\u523A"],[64e3,1,"\u5207"],[64001,1,"\u5EA6"],[64002,1,"\u62D3"],[64003,1,"\u7CD6"],[64004,1,"\u5B85"],[64005,1,"\u6D1E"],[64006,1,"\u66B4"],[64007,1,"\u8F3B"],[64008,1,"\u884C"],[64009,1,"\u964D"],[64010,1,"\u898B"],[64011,1,"\u5ED3"],[64012,1,"\u5140"],[64013,1,"\u55C0"],[[64014,64015],2],[64016,1,"\u585A"],[64017,2],[64018,1,"\u6674"],[[64019,64020],2],[64021,1,"\u51DE"],[64022,1,"\u732A"],[64023,1,"\u76CA"],[64024,1,"\u793C"],[64025,1,"\u795E"],[64026,1,"\u7965"],[64027,1,"\u798F"],[64028,1,"\u9756"],[64029,1,"\u7CBE"],[64030,1,"\u7FBD"],[64031,2],[64032,1,"\u8612"],[64033,2],[64034,1,"\u8AF8"],[[64035,64036],2],[64037,1,"\u9038"],[64038,1,"\u90FD"],[[64039,64041],2],[64042,1,"\u98EF"],[64043,1,"\u98FC"],[64044,1,"\u9928"],[64045,1,"\u9DB4"],[64046,1,"\u90DE"],[64047,1,"\u96B7"],[64048,1,"\u4FAE"],[64049,1,"\u50E7"],[64050,1,"\u514D"],[64051,1,"\u52C9"],[64052,1,"\u52E4"],[64053,1,"\u5351"],[64054,1,"\u559D"],[64055,1,"\u5606"],[64056,1,"\u5668"],[64057,1,"\u5840"],[64058,1,"\u58A8"],[64059,1,"\u5C64"],[64060,1,"\u5C6E"],[64061,1,"\u6094"],[64062,1,"\u6168"],[64063,1,"\u618E"],[64064,1,"\u61F2"],[64065,1,"\u654F"],[64066,1,"\u65E2"],[64067,1,"\u6691"],[64068,1,"\u6885"],[64069,1,"\u6D77"],[64070,1,"\u6E1A"],[64071,1,"\u6F22"],[64072,1,"\u716E"],[64073,1,"\u722B"],[64074,1,"\u7422"],[64075,1,"\u7891"],[64076,1,"\u793E"],[64077,1,"\u7949"],[64078,1,"\u7948"],[64079,1,"\u7950"],[64080,1,"\u7956"],[64081,1,"\u795D"],[64082,1,"\u798D"],[64083,1,"\u798E"],[64084,1,"\u7A40"],[64085,1,"\u7A81"],[64086,1,"\u7BC0"],[64087,1,"\u7DF4"],[64088,1,"\u7E09"],[64089,1,"\u7E41"],[64090,1,"\u7F72"],[64091,1,"\u8005"],[64092,1,"\u81ED"],[[64093,64094],1,"\u8279"],[64095,1,"\u8457"],[64096,1,"\u8910"],[64097,1,"\u8996"],[64098,1,"\u8B01"],[64099,1,"\u8B39"],[64100,1,"\u8CD3"],[64101,1,"\u8D08"],[64102,1,"\u8FB6"],[64103,1,"\u9038"],[64104,1,"\u96E3"],[64105,1,"\u97FF"],[64106,1,"\u983B"],[64107,1,"\u6075"],[64108,1,"\u{242EE}"],[64109,1,"\u8218"],[[64110,64111],3],[64112,1,"\u4E26"],[64113,1,"\u51B5"],[64114,1,"\u5168"],[64115,1,"\u4F80"],[64116,1,"\u5145"],[64117,1,"\u5180"],[64118,1,"\u52C7"],[64119,1,"\u52FA"],[64120,1,"\u559D"],[64121,1,"\u5555"],[64122,1,"\u5599"],[64123,1,"\u55E2"],[64124,1,"\u585A"],[64125,1,"\u58B3"],[64126,1,"\u5944"],[64127,1,"\u5954"],[64128,1,"\u5A62"],[64129,1,"\u5B28"],[64130,1,"\u5ED2"],[64131,1,"\u5ED9"],[64132,1,"\u5F69"],[64133,1,"\u5FAD"],[64134,1,"\u60D8"],[64135,1,"\u614E"],[64136,1,"\u6108"],[64137,1,"\u618E"],[64138,1,"\u6160"],[64139,1,"\u61F2"],[64140,1,"\u6234"],[64141,1,"\u63C4"],[64142,1,"\u641C"],[64143,1,"\u6452"],[64144,1,"\u6556"],[64145,1,"\u6674"],[64146,1,"\u6717"],[64147,1,"\u671B"],[64148,1,"\u6756"],[64149,1,"\u6B79"],[64150,1,"\u6BBA"],[64151,1,"\u6D41"],[64152,1,"\u6EDB"],[64153,1,"\u6ECB"],[64154,1,"\u6F22"],[64155,1,"\u701E"],[64156,1,"\u716E"],[64157,1,"\u77A7"],[64158,1,"\u7235"],[64159,1,"\u72AF"],[64160,1,"\u732A"],[64161,1,"\u7471"],[64162,1,"\u7506"],[64163,1,"\u753B"],[64164,1,"\u761D"],[64165,1,"\u761F"],[64166,1,"\u76CA"],[64167,1,"\u76DB"],[64168,1,"\u76F4"],[64169,1,"\u774A"],[64170,1,"\u7740"],[64171,1,"\u78CC"],[64172,1,"\u7AB1"],[64173,1,"\u7BC0"],[64174,1,"\u7C7B"],[64175,1,"\u7D5B"],[64176,1,"\u7DF4"],[64177,1,"\u7F3E"],[64178,1,"\u8005"],[64179,1,"\u8352"],[64180,1,"\u83EF"],[64181,1,"\u8779"],[64182,1,"\u8941"],[64183,1,"\u8986"],[64184,1,"\u8996"],[64185,1,"\u8ABF"],[64186,1,"\u8AF8"],[64187,1,"\u8ACB"],[64188,1,"\u8B01"],[64189,1,"\u8AFE"],[64190,1,"\u8AED"],[64191,1,"\u8B39"],[64192,1,"\u8B8A"],[64193,1,"\u8D08"],[64194,1,"\u8F38"],[64195,1,"\u9072"],[64196,1,"\u9199"],[64197,1,"\u9276"],[64198,1,"\u967C"],[64199,1,"\u96E3"],[64200,1,"\u9756"],[64201,1,"\u97DB"],[64202,1,"\u97FF"],[64203,1,"\u980B"],[64204,1,"\u983B"],[64205,1,"\u9B12"],[64206,1,"\u9F9C"],[64207,1,"\u{2284A}"],[64208,1,"\u{22844}"],[64209,1,"\u{233D5}"],[64210,1,"\u3B9D"],[64211,1,"\u4018"],[64212,1,"\u4039"],[64213,1,"\u{25249}"],[64214,1,"\u{25CD0}"],[64215,1,"\u{27ED3}"],[64216,1,"\u9F43"],[64217,1,"\u9F8E"],[[64218,64255],3],[64256,1,"ff"],[64257,1,"fi"],[64258,1,"fl"],[64259,1,"ffi"],[64260,1,"ffl"],[[64261,64262],1,"st"],[[64263,64274],3],[64275,1,"\u0574\u0576"],[64276,1,"\u0574\u0565"],[64277,1,"\u0574\u056B"],[64278,1,"\u057E\u0576"],[64279,1,"\u0574\u056D"],[[64280,64284],3],[64285,1,"\u05D9\u05B4"],[64286,2],[64287,1,"\u05F2\u05B7"],[64288,1,"\u05E2"],[64289,1,"\u05D0"],[64290,1,"\u05D3"],[64291,1,"\u05D4"],[64292,1,"\u05DB"],[64293,1,"\u05DC"],[64294,1,"\u05DD"],[64295,1,"\u05E8"],[64296,1,"\u05EA"],[64297,1,"+"],[64298,1,"\u05E9\u05C1"],[64299,1,"\u05E9\u05C2"],[64300,1,"\u05E9\u05BC\u05C1"],[64301,1,"\u05E9\u05BC\u05C2"],[64302,1,"\u05D0\u05B7"],[64303,1,"\u05D0\u05B8"],[64304,1,"\u05D0\u05BC"],[64305,1,"\u05D1\u05BC"],[64306,1,"\u05D2\u05BC"],[64307,1,"\u05D3\u05BC"],[64308,1,"\u05D4\u05BC"],[64309,1,"\u05D5\u05BC"],[64310,1,"\u05D6\u05BC"],[64311,3],[64312,1,"\u05D8\u05BC"],[64313,1,"\u05D9\u05BC"],[64314,1,"\u05DA\u05BC"],[64315,1,"\u05DB\u05BC"],[64316,1,"\u05DC\u05BC"],[64317,3],[64318,1,"\u05DE\u05BC"],[64319,3],[64320,1,"\u05E0\u05BC"],[64321,1,"\u05E1\u05BC"],[64322,3],[64323,1,"\u05E3\u05BC"],[64324,1,"\u05E4\u05BC"],[64325,3],[64326,1,"\u05E6\u05BC"],[64327,1,"\u05E7\u05BC"],[64328,1,"\u05E8\u05BC"],[64329,1,"\u05E9\u05BC"],[64330,1,"\u05EA\u05BC"],[64331,1,"\u05D5\u05B9"],[64332,1,"\u05D1\u05BF"],[64333,1,"\u05DB\u05BF"],[64334,1,"\u05E4\u05BF"],[64335,1,"\u05D0\u05DC"],[[64336,64337],1,"\u0671"],[[64338,64341],1,"\u067B"],[[64342,64345],1,"\u067E"],[[64346,64349],1,"\u0680"],[[64350,64353],1,"\u067A"],[[64354,64357],1,"\u067F"],[[64358,64361],1,"\u0679"],[[64362,64365],1,"\u06A4"],[[64366,64369],1,"\u06A6"],[[64370,64373],1,"\u0684"],[[64374,64377],1,"\u0683"],[[64378,64381],1,"\u0686"],[[64382,64385],1,"\u0687"],[[64386,64387],1,"\u068D"],[[64388,64389],1,"\u068C"],[[64390,64391],1,"\u068E"],[[64392,64393],1,"\u0688"],[[64394,64395],1,"\u0698"],[[64396,64397],1,"\u0691"],[[64398,64401],1,"\u06A9"],[[64402,64405],1,"\u06AF"],[[64406,64409],1,"\u06B3"],[[64410,64413],1,"\u06B1"],[[64414,64415],1,"\u06BA"],[[64416,64419],1,"\u06BB"],[[64420,64421],1,"\u06C0"],[[64422,64425],1,"\u06C1"],[[64426,64429],1,"\u06BE"],[[64430,64431],1,"\u06D2"],[[64432,64433],1,"\u06D3"],[[64434,64449],2],[64450,2],[[64451,64466],3],[[64467,64470],1,"\u06AD"],[[64471,64472],1,"\u06C7"],[[64473,64474],1,"\u06C6"],[[64475,64476],1,"\u06C8"],[64477,1,"\u06C7\u0674"],[[64478,64479],1,"\u06CB"],[[64480,64481],1,"\u06C5"],[[64482,64483],1,"\u06C9"],[[64484,64487],1,"\u06D0"],[[64488,64489],1,"\u0649"],[[64490,64491],1,"\u0626\u0627"],[[64492,64493],1,"\u0626\u06D5"],[[64494,64495],1,"\u0626\u0648"],[[64496,64497],1,"\u0626\u06C7"],[[64498,64499],1,"\u0626\u06C6"],[[64500,64501],1,"\u0626\u06C8"],[[64502,64504],1,"\u0626\u06D0"],[[64505,64507],1,"\u0626\u0649"],[[64508,64511],1,"\u06CC"],[64512,1,"\u0626\u062C"],[64513,1,"\u0626\u062D"],[64514,1,"\u0626\u0645"],[64515,1,"\u0626\u0649"],[64516,1,"\u0626\u064A"],[64517,1,"\u0628\u062C"],[64518,1,"\u0628\u062D"],[64519,1,"\u0628\u062E"],[64520,1,"\u0628\u0645"],[64521,1,"\u0628\u0649"],[64522,1,"\u0628\u064A"],[64523,1,"\u062A\u062C"],[64524,1,"\u062A\u062D"],[64525,1,"\u062A\u062E"],[64526,1,"\u062A\u0645"],[64527,1,"\u062A\u0649"],[64528,1,"\u062A\u064A"],[64529,1,"\u062B\u062C"],[64530,1,"\u062B\u0645"],[64531,1,"\u062B\u0649"],[64532,1,"\u062B\u064A"],[64533,1,"\u062C\u062D"],[64534,1,"\u062C\u0645"],[64535,1,"\u062D\u062C"],[64536,1,"\u062D\u0645"],[64537,1,"\u062E\u062C"],[64538,1,"\u062E\u062D"],[64539,1,"\u062E\u0645"],[64540,1,"\u0633\u062C"],[64541,1,"\u0633\u062D"],[64542,1,"\u0633\u062E"],[64543,1,"\u0633\u0645"],[64544,1,"\u0635\u062D"],[64545,1,"\u0635\u0645"],[64546,1,"\u0636\u062C"],[64547,1,"\u0636\u062D"],[64548,1,"\u0636\u062E"],[64549,1,"\u0636\u0645"],[64550,1,"\u0637\u062D"],[64551,1,"\u0637\u0645"],[64552,1,"\u0638\u0645"],[64553,1,"\u0639\u062C"],[64554,1,"\u0639\u0645"],[64555,1,"\u063A\u062C"],[64556,1,"\u063A\u0645"],[64557,1,"\u0641\u062C"],[64558,1,"\u0641\u062D"],[64559,1,"\u0641\u062E"],[64560,1,"\u0641\u0645"],[64561,1,"\u0641\u0649"],[64562,1,"\u0641\u064A"],[64563,1,"\u0642\u062D"],[64564,1,"\u0642\u0645"],[64565,1,"\u0642\u0649"],[64566,1,"\u0642\u064A"],[64567,1,"\u0643\u0627"],[64568,1,"\u0643\u062C"],[64569,1,"\u0643\u062D"],[64570,1,"\u0643\u062E"],[64571,1,"\u0643\u0644"],[64572,1,"\u0643\u0645"],[64573,1,"\u0643\u0649"],[64574,1,"\u0643\u064A"],[64575,1,"\u0644\u062C"],[64576,1,"\u0644\u062D"],[64577,1,"\u0644\u062E"],[64578,1,"\u0644\u0645"],[64579,1,"\u0644\u0649"],[64580,1,"\u0644\u064A"],[64581,1,"\u0645\u062C"],[64582,1,"\u0645\u062D"],[64583,1,"\u0645\u062E"],[64584,1,"\u0645\u0645"],[64585,1,"\u0645\u0649"],[64586,1,"\u0645\u064A"],[64587,1,"\u0646\u062C"],[64588,1,"\u0646\u062D"],[64589,1,"\u0646\u062E"],[64590,1,"\u0646\u0645"],[64591,1,"\u0646\u0649"],[64592,1,"\u0646\u064A"],[64593,1,"\u0647\u062C"],[64594,1,"\u0647\u0645"],[64595,1,"\u0647\u0649"],[64596,1,"\u0647\u064A"],[64597,1,"\u064A\u062C"],[64598,1,"\u064A\u062D"],[64599,1,"\u064A\u062E"],[64600,1,"\u064A\u0645"],[64601,1,"\u064A\u0649"],[64602,1,"\u064A\u064A"],[64603,1,"\u0630\u0670"],[64604,1,"\u0631\u0670"],[64605,1,"\u0649\u0670"],[64606,1," \u064C\u0651"],[64607,1," \u064D\u0651"],[64608,1," \u064E\u0651"],[64609,1," \u064F\u0651"],[64610,1," \u0650\u0651"],[64611,1," \u0651\u0670"],[64612,1,"\u0626\u0631"],[64613,1,"\u0626\u0632"],[64614,1,"\u0626\u0645"],[64615,1,"\u0626\u0646"],[64616,1,"\u0626\u0649"],[64617,1,"\u0626\u064A"],[64618,1,"\u0628\u0631"],[64619,1,"\u0628\u0632"],[64620,1,"\u0628\u0645"],[64621,1,"\u0628\u0646"],[64622,1,"\u0628\u0649"],[64623,1,"\u0628\u064A"],[64624,1,"\u062A\u0631"],[64625,1,"\u062A\u0632"],[64626,1,"\u062A\u0645"],[64627,1,"\u062A\u0646"],[64628,1,"\u062A\u0649"],[64629,1,"\u062A\u064A"],[64630,1,"\u062B\u0631"],[64631,1,"\u062B\u0632"],[64632,1,"\u062B\u0645"],[64633,1,"\u062B\u0646"],[64634,1,"\u062B\u0649"],[64635,1,"\u062B\u064A"],[64636,1,"\u0641\u0649"],[64637,1,"\u0641\u064A"],[64638,1,"\u0642\u0649"],[64639,1,"\u0642\u064A"],[64640,1,"\u0643\u0627"],[64641,1,"\u0643\u0644"],[64642,1,"\u0643\u0645"],[64643,1,"\u0643\u0649"],[64644,1,"\u0643\u064A"],[64645,1,"\u0644\u0645"],[64646,1,"\u0644\u0649"],[64647,1,"\u0644\u064A"],[64648,1,"\u0645\u0627"],[64649,1,"\u0645\u0645"],[64650,1,"\u0646\u0631"],[64651,1,"\u0646\u0632"],[64652,1,"\u0646\u0645"],[64653,1,"\u0646\u0646"],[64654,1,"\u0646\u0649"],[64655,1,"\u0646\u064A"],[64656,1,"\u0649\u0670"],[64657,1,"\u064A\u0631"],[64658,1,"\u064A\u0632"],[64659,1,"\u064A\u0645"],[64660,1,"\u064A\u0646"],[64661,1,"\u064A\u0649"],[64662,1,"\u064A\u064A"],[64663,1,"\u0626\u062C"],[64664,1,"\u0626\u062D"],[64665,1,"\u0626\u062E"],[64666,1,"\u0626\u0645"],[64667,1,"\u0626\u0647"],[64668,1,"\u0628\u062C"],[64669,1,"\u0628\u062D"],[64670,1,"\u0628\u062E"],[64671,1,"\u0628\u0645"],[64672,1,"\u0628\u0647"],[64673,1,"\u062A\u062C"],[64674,1,"\u062A\u062D"],[64675,1,"\u062A\u062E"],[64676,1,"\u062A\u0645"],[64677,1,"\u062A\u0647"],[64678,1,"\u062B\u0645"],[64679,1,"\u062C\u062D"],[64680,1,"\u062C\u0645"],[64681,1,"\u062D\u062C"],[64682,1,"\u062D\u0645"],[64683,1,"\u062E\u062C"],[64684,1,"\u062E\u0645"],[64685,1,"\u0633\u062C"],[64686,1,"\u0633\u062D"],[64687,1,"\u0633\u062E"],[64688,1,"\u0633\u0645"],[64689,1,"\u0635\u062D"],[64690,1,"\u0635\u062E"],[64691,1,"\u0635\u0645"],[64692,1,"\u0636\u062C"],[64693,1,"\u0636\u062D"],[64694,1,"\u0636\u062E"],[64695,1,"\u0636\u0645"],[64696,1,"\u0637\u062D"],[64697,1,"\u0638\u0645"],[64698,1,"\u0639\u062C"],[64699,1,"\u0639\u0645"],[64700,1,"\u063A\u062C"],[64701,1,"\u063A\u0645"],[64702,1,"\u0641\u062C"],[64703,1,"\u0641\u062D"],[64704,1,"\u0641\u062E"],[64705,1,"\u0641\u0645"],[64706,1,"\u0642\u062D"],[64707,1,"\u0642\u0645"],[64708,1,"\u0643\u062C"],[64709,1,"\u0643\u062D"],[64710,1,"\u0643\u062E"],[64711,1,"\u0643\u0644"],[64712,1,"\u0643\u0645"],[64713,1,"\u0644\u062C"],[64714,1,"\u0644\u062D"],[64715,1,"\u0644\u062E"],[64716,1,"\u0644\u0645"],[64717,1,"\u0644\u0647"],[64718,1,"\u0645\u062C"],[64719,1,"\u0645\u062D"],[64720,1,"\u0645\u062E"],[64721,1,"\u0645\u0645"],[64722,1,"\u0646\u062C"],[64723,1,"\u0646\u062D"],[64724,1,"\u0646\u062E"],[64725,1,"\u0646\u0645"],[64726,1,"\u0646\u0647"],[64727,1,"\u0647\u062C"],[64728,1,"\u0647\u0645"],[64729,1,"\u0647\u0670"],[64730,1,"\u064A\u062C"],[64731,1,"\u064A\u062D"],[64732,1,"\u064A\u062E"],[64733,1,"\u064A\u0645"],[64734,1,"\u064A\u0647"],[64735,1,"\u0626\u0645"],[64736,1,"\u0626\u0647"],[64737,1,"\u0628\u0645"],[64738,1,"\u0628\u0647"],[64739,1,"\u062A\u0645"],[64740,1,"\u062A\u0647"],[64741,1,"\u062B\u0645"],[64742,1,"\u062B\u0647"],[64743,1,"\u0633\u0645"],[64744,1,"\u0633\u0647"],[64745,1,"\u0634\u0645"],[64746,1,"\u0634\u0647"],[64747,1,"\u0643\u0644"],[64748,1,"\u0643\u0645"],[64749,1,"\u0644\u0645"],[64750,1,"\u0646\u0645"],[64751,1,"\u0646\u0647"],[64752,1,"\u064A\u0645"],[64753,1,"\u064A\u0647"],[64754,1,"\u0640\u064E\u0651"],[64755,1,"\u0640\u064F\u0651"],[64756,1,"\u0640\u0650\u0651"],[64757,1,"\u0637\u0649"],[64758,1,"\u0637\u064A"],[64759,1,"\u0639\u0649"],[64760,1,"\u0639\u064A"],[64761,1,"\u063A\u0649"],[64762,1,"\u063A\u064A"],[64763,1,"\u0633\u0649"],[64764,1,"\u0633\u064A"],[64765,1,"\u0634\u0649"],[64766,1,"\u0634\u064A"],[64767,1,"\u062D\u0649"],[64768,1,"\u062D\u064A"],[64769,1,"\u062C\u0649"],[64770,1,"\u062C\u064A"],[64771,1,"\u062E\u0649"],[64772,1,"\u062E\u064A"],[64773,1,"\u0635\u0649"],[64774,1,"\u0635\u064A"],[64775,1,"\u0636\u0649"],[64776,1,"\u0636\u064A"],[64777,1,"\u0634\u062C"],[64778,1,"\u0634\u062D"],[64779,1,"\u0634\u062E"],[64780,1,"\u0634\u0645"],[64781,1,"\u0634\u0631"],[64782,1,"\u0633\u0631"],[64783,1,"\u0635\u0631"],[64784,1,"\u0636\u0631"],[64785,1,"\u0637\u0649"],[64786,1,"\u0637\u064A"],[64787,1,"\u0639\u0649"],[64788,1,"\u0639\u064A"],[64789,1,"\u063A\u0649"],[64790,1,"\u063A\u064A"],[64791,1,"\u0633\u0649"],[64792,1,"\u0633\u064A"],[64793,1,"\u0634\u0649"],[64794,1,"\u0634\u064A"],[64795,1,"\u062D\u0649"],[64796,1,"\u062D\u064A"],[64797,1,"\u062C\u0649"],[64798,1,"\u062C\u064A"],[64799,1,"\u062E\u0649"],[64800,1,"\u062E\u064A"],[64801,1,"\u0635\u0649"],[64802,1,"\u0635\u064A"],[64803,1,"\u0636\u0649"],[64804,1,"\u0636\u064A"],[64805,1,"\u0634\u062C"],[64806,1,"\u0634\u062D"],[64807,1,"\u0634\u062E"],[64808,1,"\u0634\u0645"],[64809,1,"\u0634\u0631"],[64810,1,"\u0633\u0631"],[64811,1,"\u0635\u0631"],[64812,1,"\u0636\u0631"],[64813,1,"\u0634\u062C"],[64814,1,"\u0634\u062D"],[64815,1,"\u0634\u062E"],[64816,1,"\u0634\u0645"],[64817,1,"\u0633\u0647"],[64818,1,"\u0634\u0647"],[64819,1,"\u0637\u0645"],[64820,1,"\u0633\u062C"],[64821,1,"\u0633\u062D"],[64822,1,"\u0633\u062E"],[64823,1,"\u0634\u062C"],[64824,1,"\u0634\u062D"],[64825,1,"\u0634\u062E"],[64826,1,"\u0637\u0645"],[64827,1,"\u0638\u0645"],[[64828,64829],1,"\u0627\u064B"],[[64830,64831],2],[[64832,64847],2],[64848,1,"\u062A\u062C\u0645"],[[64849,64850],1,"\u062A\u062D\u062C"],[64851,1,"\u062A\u062D\u0645"],[64852,1,"\u062A\u062E\u0645"],[64853,1,"\u062A\u0645\u062C"],[64854,1,"\u062A\u0645\u062D"],[64855,1,"\u062A\u0645\u062E"],[[64856,64857],1,"\u062C\u0645\u062D"],[64858,1,"\u062D\u0645\u064A"],[64859,1,"\u062D\u0645\u0649"],[64860,1,"\u0633\u062D\u062C"],[64861,1,"\u0633\u062C\u062D"],[64862,1,"\u0633\u062C\u0649"],[[64863,64864],1,"\u0633\u0645\u062D"],[64865,1,"\u0633\u0645\u062C"],[[64866,64867],1,"\u0633\u0645\u0645"],[[64868,64869],1,"\u0635\u062D\u062D"],[64870,1,"\u0635\u0645\u0645"],[[64871,64872],1,"\u0634\u062D\u0645"],[64873,1,"\u0634\u062C\u064A"],[[64874,64875],1,"\u0634\u0645\u062E"],[[64876,64877],1,"\u0634\u0645\u0645"],[64878,1,"\u0636\u062D\u0649"],[[64879,64880],1,"\u0636\u062E\u0645"],[[64881,64882],1,"\u0637\u0645\u062D"],[64883,1,"\u0637\u0645\u0645"],[64884,1,"\u0637\u0645\u064A"],[64885,1,"\u0639\u062C\u0645"],[[64886,64887],1,"\u0639\u0645\u0645"],[64888,1,"\u0639\u0645\u0649"],[64889,1,"\u063A\u0645\u0645"],[64890,1,"\u063A\u0645\u064A"],[64891,1,"\u063A\u0645\u0649"],[[64892,64893],1,"\u0641\u062E\u0645"],[64894,1,"\u0642\u0645\u062D"],[64895,1,"\u0642\u0645\u0645"],[64896,1,"\u0644\u062D\u0645"],[64897,1,"\u0644\u062D\u064A"],[64898,1,"\u0644\u062D\u0649"],[[64899,64900],1,"\u0644\u062C\u062C"],[[64901,64902],1,"\u0644\u062E\u0645"],[[64903,64904],1,"\u0644\u0645\u062D"],[64905,1,"\u0645\u062D\u062C"],[64906,1,"\u0645\u062D\u0645"],[64907,1,"\u0645\u062D\u064A"],[64908,1,"\u0645\u062C\u062D"],[64909,1,"\u0645\u062C\u0645"],[64910,1,"\u0645\u062E\u062C"],[64911,1,"\u0645\u062E\u0645"],[[64912,64913],3],[64914,1,"\u0645\u062C\u062E"],[64915,1,"\u0647\u0645\u062C"],[64916,1,"\u0647\u0645\u0645"],[64917,1,"\u0646\u062D\u0645"],[64918,1,"\u0646\u062D\u0649"],[[64919,64920],1,"\u0646\u062C\u0645"],[64921,1,"\u0646\u062C\u0649"],[64922,1,"\u0646\u0645\u064A"],[64923,1,"\u0646\u0645\u0649"],[[64924,64925],1,"\u064A\u0645\u0645"],[64926,1,"\u0628\u062E\u064A"],[64927,1,"\u062A\u062C\u064A"],[64928,1,"\u062A\u062C\u0649"],[64929,1,"\u062A\u062E\u064A"],[64930,1,"\u062A\u062E\u0649"],[64931,1,"\u062A\u0645\u064A"],[64932,1,"\u062A\u0645\u0649"],[64933,1,"\u062C\u0645\u064A"],[64934,1,"\u062C\u062D\u0649"],[64935,1,"\u062C\u0645\u0649"],[64936,1,"\u0633\u062E\u0649"],[64937,1,"\u0635\u062D\u064A"],[64938,1,"\u0634\u062D\u064A"],[64939,1,"\u0636\u062D\u064A"],[64940,1,"\u0644\u062C\u064A"],[64941,1,"\u0644\u0645\u064A"],[64942,1,"\u064A\u062D\u064A"],[64943,1,"\u064A\u062C\u064A"],[64944,1,"\u064A\u0645\u064A"],[64945,1,"\u0645\u0645\u064A"],[64946,1,"\u0642\u0645\u064A"],[64947,1,"\u0646\u062D\u064A"],[64948,1,"\u0642\u0645\u062D"],[64949,1,"\u0644\u062D\u0645"],[64950,1,"\u0639\u0645\u064A"],[64951,1,"\u0643\u0645\u064A"],[64952,1,"\u0646\u062C\u062D"],[64953,1,"\u0645\u062E\u064A"],[64954,1,"\u0644\u062C\u0645"],[64955,1,"\u0643\u0645\u0645"],[64956,1,"\u0644\u062C\u0645"],[64957,1,"\u0646\u062C\u062D"],[64958,1,"\u062C\u062D\u064A"],[64959,1,"\u062D\u062C\u064A"],[64960,1,"\u0645\u062C\u064A"],[64961,1,"\u0641\u0645\u064A"],[64962,1,"\u0628\u062D\u064A"],[64963,1,"\u0643\u0645\u0645"],[64964,1,"\u0639\u062C\u0645"],[64965,1,"\u0635\u0645\u0645"],[64966,1,"\u0633\u062E\u064A"],[64967,1,"\u0646\u062C\u064A"],[[64968,64974],3],[64975,2],[[64976,65007],3],[65008,1,"\u0635\u0644\u06D2"],[65009,1,"\u0642\u0644\u06D2"],[65010,1,"\u0627\u0644\u0644\u0647"],[65011,1,"\u0627\u0643\u0628\u0631"],[65012,1,"\u0645\u062D\u0645\u062F"],[65013,1,"\u0635\u0644\u0639\u0645"],[65014,1,"\u0631\u0633\u0648\u0644"],[65015,1,"\u0639\u0644\u064A\u0647"],[65016,1,"\u0648\u0633\u0644\u0645"],[65017,1,"\u0635\u0644\u0649"],[65018,1,"\u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u064A\u0647 \u0648\u0633\u0644\u0645"],[65019,1,"\u062C\u0644 \u062C\u0644\u0627\u0644\u0647"],[65020,1,"\u0631\u06CC\u0627\u0644"],[65021,2],[[65022,65023],2],[[65024,65039],7],[65040,1,","],[65041,1,"\u3001"],[65042,3],[65043,1,":"],[65044,1,";"],[65045,1,"!"],[65046,1,"?"],[65047,1,"\u3016"],[65048,1,"\u3017"],[65049,3],[[65050,65055],3],[[65056,65059],2],[[65060,65062],2],[[65063,65069],2],[[65070,65071],2],[65072,3],[65073,1,"\u2014"],[65074,1,"\u2013"],[[65075,65076],1,"_"],[65077,1,"("],[65078,1,")"],[65079,1,"{"],[65080,1,"}"],[65081,1,"\u3014"],[65082,1,"\u3015"],[65083,1,"\u3010"],[65084,1,"\u3011"],[65085,1,"\u300A"],[65086,1,"\u300B"],[65087,1,"\u3008"],[65088,1,"\u3009"],[65089,1,"\u300C"],[65090,1,"\u300D"],[65091,1,"\u300E"],[65092,1,"\u300F"],[[65093,65094],2],[65095,1,"["],[65096,1,"]"],[[65097,65100],1," \u0305"],[[65101,65103],1,"_"],[65104,1,","],[65105,1,"\u3001"],[65106,3],[65107,3],[65108,1,";"],[65109,1,":"],[65110,1,"?"],[65111,1,"!"],[65112,1,"\u2014"],[65113,1,"("],[65114,1,")"],[65115,1,"{"],[65116,1,"}"],[65117,1,"\u3014"],[65118,1,"\u3015"],[65119,1,"#"],[65120,1,"&"],[65121,1,"*"],[65122,1,"+"],[65123,1,"-"],[65124,1,"<"],[65125,1,">"],[65126,1,"="],[65127,3],[65128,1,"\\"],[65129,1,"$"],[65130,1,"%"],[65131,1,"@"],[[65132,65135],3],[65136,1," \u064B"],[65137,1,"\u0640\u064B"],[65138,1," \u064C"],[65139,2],[65140,1," \u064D"],[65141,3],[65142,1," \u064E"],[65143,1,"\u0640\u064E"],[65144,1," \u064F"],[65145,1,"\u0640\u064F"],[65146,1," \u0650"],[65147,1,"\u0640\u0650"],[65148,1," \u0651"],[65149,1,"\u0640\u0651"],[65150,1," \u0652"],[65151,1,"\u0640\u0652"],[65152,1,"\u0621"],[[65153,65154],1,"\u0622"],[[65155,65156],1,"\u0623"],[[65157,65158],1,"\u0624"],[[65159,65160],1,"\u0625"],[[65161,65164],1,"\u0626"],[[65165,65166],1,"\u0627"],[[65167,65170],1,"\u0628"],[[65171,65172],1,"\u0629"],[[65173,65176],1,"\u062A"],[[65177,65180],1,"\u062B"],[[65181,65184],1,"\u062C"],[[65185,65188],1,"\u062D"],[[65189,65192],1,"\u062E"],[[65193,65194],1,"\u062F"],[[65195,65196],1,"\u0630"],[[65197,65198],1,"\u0631"],[[65199,65200],1,"\u0632"],[[65201,65204],1,"\u0633"],[[65205,65208],1,"\u0634"],[[65209,65212],1,"\u0635"],[[65213,65216],1,"\u0636"],[[65217,65220],1,"\u0637"],[[65221,65224],1,"\u0638"],[[65225,65228],1,"\u0639"],[[65229,65232],1,"\u063A"],[[65233,65236],1,"\u0641"],[[65237,65240],1,"\u0642"],[[65241,65244],1,"\u0643"],[[65245,65248],1,"\u0644"],[[65249,65252],1,"\u0645"],[[65253,65256],1,"\u0646"],[[65257,65260],1,"\u0647"],[[65261,65262],1,"\u0648"],[[65263,65264],1,"\u0649"],[[65265,65268],1,"\u064A"],[[65269,65270],1,"\u0644\u0622"],[[65271,65272],1,"\u0644\u0623"],[[65273,65274],1,"\u0644\u0625"],[[65275,65276],1,"\u0644\u0627"],[[65277,65278],3],[65279,7],[65280,3],[65281,1,"!"],[65282,1,'"'],[65283,1,"#"],[65284,1,"$"],[65285,1,"%"],[65286,1,"&"],[65287,1,"'"],[65288,1,"("],[65289,1,")"],[65290,1,"*"],[65291,1,"+"],[65292,1,","],[65293,1,"-"],[65294,1,"."],[65295,1,"/"],[65296,1,"0"],[65297,1,"1"],[65298,1,"2"],[65299,1,"3"],[65300,1,"4"],[65301,1,"5"],[65302,1,"6"],[65303,1,"7"],[65304,1,"8"],[65305,1,"9"],[65306,1,":"],[65307,1,";"],[65308,1,"<"],[65309,1,"="],[65310,1,">"],[65311,1,"?"],[65312,1,"@"],[65313,1,"a"],[65314,1,"b"],[65315,1,"c"],[65316,1,"d"],[65317,1,"e"],[65318,1,"f"],[65319,1,"g"],[65320,1,"h"],[65321,1,"i"],[65322,1,"j"],[65323,1,"k"],[65324,1,"l"],[65325,1,"m"],[65326,1,"n"],[65327,1,"o"],[65328,1,"p"],[65329,1,"q"],[65330,1,"r"],[65331,1,"s"],[65332,1,"t"],[65333,1,"u"],[65334,1,"v"],[65335,1,"w"],[65336,1,"x"],[65337,1,"y"],[65338,1,"z"],[65339,1,"["],[65340,1,"\\"],[65341,1,"]"],[65342,1,"^"],[65343,1,"_"],[65344,1,"`"],[65345,1,"a"],[65346,1,"b"],[65347,1,"c"],[65348,1,"d"],[65349,1,"e"],[65350,1,"f"],[65351,1,"g"],[65352,1,"h"],[65353,1,"i"],[65354,1,"j"],[65355,1,"k"],[65356,1,"l"],[65357,1,"m"],[65358,1,"n"],[65359,1,"o"],[65360,1,"p"],[65361,1,"q"],[65362,1,"r"],[65363,1,"s"],[65364,1,"t"],[65365,1,"u"],[65366,1,"v"],[65367,1,"w"],[65368,1,"x"],[65369,1,"y"],[65370,1,"z"],[65371,1,"{"],[65372,1,"|"],[65373,1,"}"],[65374,1,"~"],[65375,1,"\u2985"],[65376,1,"\u2986"],[65377,1,"."],[65378,1,"\u300C"],[65379,1,"\u300D"],[65380,1,"\u3001"],[65381,1,"\u30FB"],[65382,1,"\u30F2"],[65383,1,"\u30A1"],[65384,1,"\u30A3"],[65385,1,"\u30A5"],[65386,1,"\u30A7"],[65387,1,"\u30A9"],[65388,1,"\u30E3"],[65389,1,"\u30E5"],[65390,1,"\u30E7"],[65391,1,"\u30C3"],[65392,1,"\u30FC"],[65393,1,"\u30A2"],[65394,1,"\u30A4"],[65395,1,"\u30A6"],[65396,1,"\u30A8"],[65397,1,"\u30AA"],[65398,1,"\u30AB"],[65399,1,"\u30AD"],[65400,1,"\u30AF"],[65401,1,"\u30B1"],[65402,1,"\u30B3"],[65403,1,"\u30B5"],[65404,1,"\u30B7"],[65405,1,"\u30B9"],[65406,1,"\u30BB"],[65407,1,"\u30BD"],[65408,1,"\u30BF"],[65409,1,"\u30C1"],[65410,1,"\u30C4"],[65411,1,"\u30C6"],[65412,1,"\u30C8"],[65413,1,"\u30CA"],[65414,1,"\u30CB"],[65415,1,"\u30CC"],[65416,1,"\u30CD"],[65417,1,"\u30CE"],[65418,1,"\u30CF"],[65419,1,"\u30D2"],[65420,1,"\u30D5"],[65421,1,"\u30D8"],[65422,1,"\u30DB"],[65423,1,"\u30DE"],[65424,1,"\u30DF"],[65425,1,"\u30E0"],[65426,1,"\u30E1"],[65427,1,"\u30E2"],[65428,1,"\u30E4"],[65429,1,"\u30E6"],[65430,1,"\u30E8"],[65431,1,"\u30E9"],[65432,1,"\u30EA"],[65433,1,"\u30EB"],[65434,1,"\u30EC"],[65435,1,"\u30ED"],[65436,1,"\u30EF"],[65437,1,"\u30F3"],[65438,1,"\u3099"],[65439,1,"\u309A"],[65440,7],[65441,1,"\u1100"],[65442,1,"\u1101"],[65443,1,"\u11AA"],[65444,1,"\u1102"],[65445,1,"\u11AC"],[65446,1,"\u11AD"],[65447,1,"\u1103"],[65448,1,"\u1104"],[65449,1,"\u1105"],[65450,1,"\u11B0"],[65451,1,"\u11B1"],[65452,1,"\u11B2"],[65453,1,"\u11B3"],[65454,1,"\u11B4"],[65455,1,"\u11B5"],[65456,1,"\u111A"],[65457,1,"\u1106"],[65458,1,"\u1107"],[65459,1,"\u1108"],[65460,1,"\u1121"],[65461,1,"\u1109"],[65462,1,"\u110A"],[65463,1,"\u110B"],[65464,1,"\u110C"],[65465,1,"\u110D"],[65466,1,"\u110E"],[65467,1,"\u110F"],[65468,1,"\u1110"],[65469,1,"\u1111"],[65470,1,"\u1112"],[[65471,65473],3],[65474,1,"\u1161"],[65475,1,"\u1162"],[65476,1,"\u1163"],[65477,1,"\u1164"],[65478,1,"\u1165"],[65479,1,"\u1166"],[[65480,65481],3],[65482,1,"\u1167"],[65483,1,"\u1168"],[65484,1,"\u1169"],[65485,1,"\u116A"],[65486,1,"\u116B"],[65487,1,"\u116C"],[[65488,65489],3],[65490,1,"\u116D"],[65491,1,"\u116E"],[65492,1,"\u116F"],[65493,1,"\u1170"],[65494,1,"\u1171"],[65495,1,"\u1172"],[[65496,65497],3],[65498,1,"\u1173"],[65499,1,"\u1174"],[65500,1,"\u1175"],[[65501,65503],3],[65504,1,"\xA2"],[65505,1,"\xA3"],[65506,1,"\xAC"],[65507,1," \u0304"],[65508,1,"\xA6"],[65509,1,"\xA5"],[65510,1,"\u20A9"],[65511,3],[65512,1,"\u2502"],[65513,1,"\u2190"],[65514,1,"\u2191"],[65515,1,"\u2192"],[65516,1,"\u2193"],[65517,1,"\u25A0"],[65518,1,"\u25CB"],[[65519,65528],3],[[65529,65531],3],[65532,3],[65533,3],[[65534,65535],3],[[65536,65547],2],[65548,3],[[65549,65574],2],[65575,3],[[65576,65594],2],[65595,3],[[65596,65597],2],[65598,3],[[65599,65613],2],[[65614,65615],3],[[65616,65629],2],[[65630,65663],3],[[65664,65786],2],[[65787,65791],3],[[65792,65794],2],[[65795,65798],3],[[65799,65843],2],[[65844,65846],3],[[65847,65855],2],[[65856,65930],2],[[65931,65932],2],[[65933,65934],2],[65935,3],[[65936,65947],2],[65948,2],[[65949,65951],3],[65952,2],[[65953,65999],3],[[66e3,66044],2],[66045,2],[[66046,66175],3],[[66176,66204],2],[[66205,66207],3],[[66208,66256],2],[[66257,66271],3],[66272,2],[[66273,66299],2],[[66300,66303],3],[[66304,66334],2],[66335,2],[[66336,66339],2],[[66340,66348],3],[[66349,66351],2],[[66352,66368],2],[66369,2],[[66370,66377],2],[66378,2],[[66379,66383],3],[[66384,66426],2],[[66427,66431],3],[[66432,66461],2],[66462,3],[66463,2],[[66464,66499],2],[[66500,66503],3],[[66504,66511],2],[[66512,66517],2],[[66518,66559],3],[66560,1,"\u{10428}"],[66561,1,"\u{10429}"],[66562,1,"\u{1042A}"],[66563,1,"\u{1042B}"],[66564,1,"\u{1042C}"],[66565,1,"\u{1042D}"],[66566,1,"\u{1042E}"],[66567,1,"\u{1042F}"],[66568,1,"\u{10430}"],[66569,1,"\u{10431}"],[66570,1,"\u{10432}"],[66571,1,"\u{10433}"],[66572,1,"\u{10434}"],[66573,1,"\u{10435}"],[66574,1,"\u{10436}"],[66575,1,"\u{10437}"],[66576,1,"\u{10438}"],[66577,1,"\u{10439}"],[66578,1,"\u{1043A}"],[66579,1,"\u{1043B}"],[66580,1,"\u{1043C}"],[66581,1,"\u{1043D}"],[66582,1,"\u{1043E}"],[66583,1,"\u{1043F}"],[66584,1,"\u{10440}"],[66585,1,"\u{10441}"],[66586,1,"\u{10442}"],[66587,1,"\u{10443}"],[66588,1,"\u{10444}"],[66589,1,"\u{10445}"],[66590,1,"\u{10446}"],[66591,1,"\u{10447}"],[66592,1,"\u{10448}"],[66593,1,"\u{10449}"],[66594,1,"\u{1044A}"],[66595,1,"\u{1044B}"],[66596,1,"\u{1044C}"],[66597,1,"\u{1044D}"],[66598,1,"\u{1044E}"],[66599,1,"\u{1044F}"],[[66600,66637],2],[[66638,66717],2],[[66718,66719],3],[[66720,66729],2],[[66730,66735],3],[66736,1,"\u{104D8}"],[66737,1,"\u{104D9}"],[66738,1,"\u{104DA}"],[66739,1,"\u{104DB}"],[66740,1,"\u{104DC}"],[66741,1,"\u{104DD}"],[66742,1,"\u{104DE}"],[66743,1,"\u{104DF}"],[66744,1,"\u{104E0}"],[66745,1,"\u{104E1}"],[66746,1,"\u{104E2}"],[66747,1,"\u{104E3}"],[66748,1,"\u{104E4}"],[66749,1,"\u{104E5}"],[66750,1,"\u{104E6}"],[66751,1,"\u{104E7}"],[66752,1,"\u{104E8}"],[66753,1,"\u{104E9}"],[66754,1,"\u{104EA}"],[66755,1,"\u{104EB}"],[66756,1,"\u{104EC}"],[66757,1,"\u{104ED}"],[66758,1,"\u{104EE}"],[66759,1,"\u{104EF}"],[66760,1,"\u{104F0}"],[66761,1,"\u{104F1}"],[66762,1,"\u{104F2}"],[66763,1,"\u{104F3}"],[66764,1,"\u{104F4}"],[66765,1,"\u{104F5}"],[66766,1,"\u{104F6}"],[66767,1,"\u{104F7}"],[66768,1,"\u{104F8}"],[66769,1,"\u{104F9}"],[66770,1,"\u{104FA}"],[66771,1,"\u{104FB}"],[[66772,66775],3],[[66776,66811],2],[[66812,66815],3],[[66816,66855],2],[[66856,66863],3],[[66864,66915],2],[[66916,66926],3],[66927,2],[66928,1,"\u{10597}"],[66929,1,"\u{10598}"],[66930,1,"\u{10599}"],[66931,1,"\u{1059A}"],[66932,1,"\u{1059B}"],[66933,1,"\u{1059C}"],[66934,1,"\u{1059D}"],[66935,1,"\u{1059E}"],[66936,1,"\u{1059F}"],[66937,1,"\u{105A0}"],[66938,1,"\u{105A1}"],[66939,3],[66940,1,"\u{105A3}"],[66941,1,"\u{105A4}"],[66942,1,"\u{105A5}"],[66943,1,"\u{105A6}"],[66944,1,"\u{105A7}"],[66945,1,"\u{105A8}"],[66946,1,"\u{105A9}"],[66947,1,"\u{105AA}"],[66948,1,"\u{105AB}"],[66949,1,"\u{105AC}"],[66950,1,"\u{105AD}"],[66951,1,"\u{105AE}"],[66952,1,"\u{105AF}"],[66953,1,"\u{105B0}"],[66954,1,"\u{105B1}"],[66955,3],[66956,1,"\u{105B3}"],[66957,1,"\u{105B4}"],[66958,1,"\u{105B5}"],[66959,1,"\u{105B6}"],[66960,1,"\u{105B7}"],[66961,1,"\u{105B8}"],[66962,1,"\u{105B9}"],[66963,3],[66964,1,"\u{105BB}"],[66965,1,"\u{105BC}"],[66966,3],[[66967,66977],2],[66978,3],[[66979,66993],2],[66994,3],[[66995,67001],2],[67002,3],[[67003,67004],2],[[67005,67007],3],[[67008,67059],2],[[67060,67071],3],[[67072,67382],2],[[67383,67391],3],[[67392,67413],2],[[67414,67423],3],[[67424,67431],2],[[67432,67455],3],[67456,2],[67457,1,"\u02D0"],[67458,1,"\u02D1"],[67459,1,"\xE6"],[67460,1,"\u0299"],[67461,1,"\u0253"],[67462,3],[67463,1,"\u02A3"],[67464,1,"\uAB66"],[67465,1,"\u02A5"],[67466,1,"\u02A4"],[67467,1,"\u0256"],[67468,1,"\u0257"],[67469,1,"\u1D91"],[67470,1,"\u0258"],[67471,1,"\u025E"],[67472,1,"\u02A9"],[67473,1,"\u0264"],[67474,1,"\u0262"],[67475,1,"\u0260"],[67476,1,"\u029B"],[67477,1,"\u0127"],[67478,1,"\u029C"],[67479,1,"\u0267"],[67480,1,"\u0284"],[67481,1,"\u02AA"],[67482,1,"\u02AB"],[67483,1,"\u026C"],[67484,1,"\u{1DF04}"],[67485,1,"\uA78E"],[67486,1,"\u026E"],[67487,1,"\u{1DF05}"],[67488,1,"\u028E"],[67489,1,"\u{1DF06}"],[67490,1,"\xF8"],[67491,1,"\u0276"],[67492,1,"\u0277"],[67493,1,"q"],[67494,1,"\u027A"],[67495,1,"\u{1DF08}"],[67496,1,"\u027D"],[67497,1,"\u027E"],[67498,1,"\u0280"],[67499,1,"\u02A8"],[67500,1,"\u02A6"],[67501,1,"\uAB67"],[67502,1,"\u02A7"],[67503,1,"\u0288"],[67504,1,"\u2C71"],[67505,3],[67506,1,"\u028F"],[67507,1,"\u02A1"],[67508,1,"\u02A2"],[67509,1,"\u0298"],[67510,1,"\u01C0"],[67511,1,"\u01C1"],[67512,1,"\u01C2"],[67513,1,"\u{1DF0A}"],[67514,1,"\u{1DF1E}"],[[67515,67583],3],[[67584,67589],2],[[67590,67591],3],[67592,2],[67593,3],[[67594,67637],2],[67638,3],[[67639,67640],2],[[67641,67643],3],[67644,2],[[67645,67646],3],[67647,2],[[67648,67669],2],[67670,3],[[67671,67679],2],[[67680,67702],2],[[67703,67711],2],[[67712,67742],2],[[67743,67750],3],[[67751,67759],2],[[67760,67807],3],[[67808,67826],2],[67827,3],[[67828,67829],2],[[67830,67834],3],[[67835,67839],2],[[67840,67861],2],[[67862,67865],2],[[67866,67867],2],[[67868,67870],3],[67871,2],[[67872,67897],2],[[67898,67902],3],[67903,2],[[67904,67967],3],[[67968,68023],2],[[68024,68027],3],[[68028,68029],2],[[68030,68031],2],[[68032,68047],2],[[68048,68049],3],[[68050,68095],2],[[68096,68099],2],[68100,3],[[68101,68102],2],[[68103,68107],3],[[68108,68115],2],[68116,3],[[68117,68119],2],[68120,3],[[68121,68147],2],[[68148,68149],2],[[68150,68151],3],[[68152,68154],2],[[68155,68158],3],[68159,2],[[68160,68167],2],[68168,2],[[68169,68175],3],[[68176,68184],2],[[68185,68191],3],[[68192,68220],2],[[68221,68223],2],[[68224,68252],2],[[68253,68255],2],[[68256,68287],3],[[68288,68295],2],[68296,2],[[68297,68326],2],[[68327,68330],3],[[68331,68342],2],[[68343,68351],3],[[68352,68405],2],[[68406,68408],3],[[68409,68415],2],[[68416,68437],2],[[68438,68439],3],[[68440,68447],2],[[68448,68466],2],[[68467,68471],3],[[68472,68479],2],[[68480,68497],2],[[68498,68504],3],[[68505,68508],2],[[68509,68520],3],[[68521,68527],2],[[68528,68607],3],[[68608,68680],2],[[68681,68735],3],[68736,1,"\u{10CC0}"],[68737,1,"\u{10CC1}"],[68738,1,"\u{10CC2}"],[68739,1,"\u{10CC3}"],[68740,1,"\u{10CC4}"],[68741,1,"\u{10CC5}"],[68742,1,"\u{10CC6}"],[68743,1,"\u{10CC7}"],[68744,1,"\u{10CC8}"],[68745,1,"\u{10CC9}"],[68746,1,"\u{10CCA}"],[68747,1,"\u{10CCB}"],[68748,1,"\u{10CCC}"],[68749,1,"\u{10CCD}"],[68750,1,"\u{10CCE}"],[68751,1,"\u{10CCF}"],[68752,1,"\u{10CD0}"],[68753,1,"\u{10CD1}"],[68754,1,"\u{10CD2}"],[68755,1,"\u{10CD3}"],[68756,1,"\u{10CD4}"],[68757,1,"\u{10CD5}"],[68758,1,"\u{10CD6}"],[68759,1,"\u{10CD7}"],[68760,1,"\u{10CD8}"],[68761,1,"\u{10CD9}"],[68762,1,"\u{10CDA}"],[68763,1,"\u{10CDB}"],[68764,1,"\u{10CDC}"],[68765,1,"\u{10CDD}"],[68766,1,"\u{10CDE}"],[68767,1,"\u{10CDF}"],[68768,1,"\u{10CE0}"],[68769,1,"\u{10CE1}"],[68770,1,"\u{10CE2}"],[68771,1,"\u{10CE3}"],[68772,1,"\u{10CE4}"],[68773,1,"\u{10CE5}"],[68774,1,"\u{10CE6}"],[68775,1,"\u{10CE7}"],[68776,1,"\u{10CE8}"],[68777,1,"\u{10CE9}"],[68778,1,"\u{10CEA}"],[68779,1,"\u{10CEB}"],[68780,1,"\u{10CEC}"],[68781,1,"\u{10CED}"],[68782,1,"\u{10CEE}"],[68783,1,"\u{10CEF}"],[68784,1,"\u{10CF0}"],[68785,1,"\u{10CF1}"],[68786,1,"\u{10CF2}"],[[68787,68799],3],[[68800,68850],2],[[68851,68857],3],[[68858,68863],2],[[68864,68903],2],[[68904,68911],3],[[68912,68921],2],[[68922,68927],3],[[68928,68943],2],[68944,1,"\u{10D70}"],[68945,1,"\u{10D71}"],[68946,1,"\u{10D72}"],[68947,1,"\u{10D73}"],[68948,1,"\u{10D74}"],[68949,1,"\u{10D75}"],[68950,1,"\u{10D76}"],[68951,1,"\u{10D77}"],[68952,1,"\u{10D78}"],[68953,1,"\u{10D79}"],[68954,1,"\u{10D7A}"],[68955,1,"\u{10D7B}"],[68956,1,"\u{10D7C}"],[68957,1,"\u{10D7D}"],[68958,1,"\u{10D7E}"],[68959,1,"\u{10D7F}"],[68960,1,"\u{10D80}"],[68961,1,"\u{10D81}"],[68962,1,"\u{10D82}"],[68963,1,"\u{10D83}"],[68964,1,"\u{10D84}"],[68965,1,"\u{10D85}"],[[68966,68968],3],[[68969,68973],2],[68974,2],[[68975,68997],2],[[68998,69005],3],[[69006,69007],2],[[69008,69215],3],[[69216,69246],2],[69247,3],[[69248,69289],2],[69290,3],[[69291,69292],2],[69293,2],[[69294,69295],3],[[69296,69297],2],[[69298,69313],3],[[69314,69316],2],[[69317,69371],3],[69372,2],[[69373,69375],2],[[69376,69404],2],[[69405,69414],2],[69415,2],[[69416,69423],3],[[69424,69456],2],[[69457,69465],2],[[69466,69487],3],[[69488,69509],2],[[69510,69513],2],[[69514,69551],3],[[69552,69572],2],[[69573,69579],2],[[69580,69599],3],[[69600,69622],2],[[69623,69631],3],[[69632,69702],2],[[69703,69709],2],[[69710,69713],3],[[69714,69733],2],[[69734,69743],2],[[69744,69749],2],[[69750,69758],3],[69759,2],[[69760,69818],2],[[69819,69820],2],[69821,3],[[69822,69825],2],[69826,2],[[69827,69836],3],[69837,3],[[69838,69839],3],[[69840,69864],2],[[69865,69871],3],[[69872,69881],2],[[69882,69887],3],[[69888,69940],2],[69941,3],[[69942,69951],2],[[69952,69955],2],[[69956,69958],2],[69959,2],[[69960,69967],3],[[69968,70003],2],[[70004,70005],2],[70006,2],[[70007,70015],3],[[70016,70084],2],[[70085,70088],2],[[70089,70092],2],[70093,2],[[70094,70095],2],[[70096,70105],2],[70106,2],[70107,2],[70108,2],[[70109,70111],2],[70112,3],[[70113,70132],2],[[70133,70143],3],[[70144,70161],2],[70162,3],[[70163,70199],2],[[70200,70205],2],[70206,2],[[70207,70209],2],[[70210,70271],3],[[70272,70278],2],[70279,3],[70280,2],[70281,3],[[70282,70285],2],[70286,3],[[70287,70301],2],[70302,3],[[70303,70312],2],[70313,2],[[70314,70319],3],[[70320,70378],2],[[70379,70383],3],[[70384,70393],2],[[70394,70399],3],[70400,2],[[70401,70403],2],[70404,3],[[70405,70412],2],[[70413,70414],3],[[70415,70416],2],[[70417,70418],3],[[70419,70440],2],[70441,3],[[70442,70448],2],[70449,3],[[70450,70451],2],[70452,3],[[70453,70457],2],[70458,3],[70459,2],[[70460,70468],2],[[70469,70470],3],[[70471,70472],2],[[70473,70474],3],[[70475,70477],2],[[70478,70479],3],[70480,2],[[70481,70486],3],[70487,2],[[70488,70492],3],[[70493,70499],2],[[70500,70501],3],[[70502,70508],2],[[70509,70511],3],[[70512,70516],2],[[70517,70527],3],[[70528,70537],2],[70538,3],[70539,2],[[70540,70541],3],[70542,2],[70543,3],[[70544,70581],2],[70582,3],[[70583,70592],2],[70593,3],[70594,2],[[70595,70596],3],[70597,2],[70598,3],[[70599,70602],2],[70603,3],[[70604,70611],2],[[70612,70613],2],[70614,3],[[70615,70616],2],[[70617,70624],3],[[70625,70626],2],[[70627,70655],3],[[70656,70730],2],[[70731,70735],2],[[70736,70745],2],[70746,2],[70747,2],[70748,3],[70749,2],[70750,2],[70751,2],[[70752,70753],2],[[70754,70783],3],[[70784,70853],2],[70854,2],[70855,2],[[70856,70863],3],[[70864,70873],2],[[70874,71039],3],[[71040,71093],2],[[71094,71095],3],[[71096,71104],2],[[71105,71113],2],[[71114,71127],2],[[71128,71133],2],[[71134,71167],3],[[71168,71232],2],[[71233,71235],2],[71236,2],[[71237,71247],3],[[71248,71257],2],[[71258,71263],3],[[71264,71276],2],[[71277,71295],3],[[71296,71351],2],[71352,2],[71353,2],[[71354,71359],3],[[71360,71369],2],[[71370,71375],3],[[71376,71395],2],[[71396,71423],3],[[71424,71449],2],[71450,2],[[71451,71452],3],[[71453,71467],2],[[71468,71471],3],[[71472,71481],2],[[71482,71487],2],[[71488,71494],2],[[71495,71679],3],[[71680,71738],2],[71739,2],[[71740,71839],3],[71840,1,"\u{118C0}"],[71841,1,"\u{118C1}"],[71842,1,"\u{118C2}"],[71843,1,"\u{118C3}"],[71844,1,"\u{118C4}"],[71845,1,"\u{118C5}"],[71846,1,"\u{118C6}"],[71847,1,"\u{118C7}"],[71848,1,"\u{118C8}"],[71849,1,"\u{118C9}"],[71850,1,"\u{118CA}"],[71851,1,"\u{118CB}"],[71852,1,"\u{118CC}"],[71853,1,"\u{118CD}"],[71854,1,"\u{118CE}"],[71855,1,"\u{118CF}"],[71856,1,"\u{118D0}"],[71857,1,"\u{118D1}"],[71858,1,"\u{118D2}"],[71859,1,"\u{118D3}"],[71860,1,"\u{118D4}"],[71861,1,"\u{118D5}"],[71862,1,"\u{118D6}"],[71863,1,"\u{118D7}"],[71864,1,"\u{118D8}"],[71865,1,"\u{118D9}"],[71866,1,"\u{118DA}"],[71867,1,"\u{118DB}"],[71868,1,"\u{118DC}"],[71869,1,"\u{118DD}"],[71870,1,"\u{118DE}"],[71871,1,"\u{118DF}"],[[71872,71913],2],[[71914,71922],2],[[71923,71934],3],[71935,2],[[71936,71942],2],[[71943,71944],3],[71945,2],[[71946,71947],3],[[71948,71955],2],[71956,3],[[71957,71958],2],[71959,3],[[71960,71989],2],[71990,3],[[71991,71992],2],[[71993,71994],3],[[71995,72003],2],[[72004,72006],2],[[72007,72015],3],[[72016,72025],2],[[72026,72095],3],[[72096,72103],2],[[72104,72105],3],[[72106,72151],2],[[72152,72153],3],[[72154,72161],2],[72162,2],[[72163,72164],2],[[72165,72191],3],[[72192,72254],2],[[72255,72262],2],[72263,2],[[72264,72271],3],[[72272,72323],2],[[72324,72325],2],[[72326,72345],2],[[72346,72348],2],[72349,2],[[72350,72354],2],[[72355,72367],3],[[72368,72383],2],[[72384,72440],2],[[72441,72447],3],[[72448,72457],2],[[72458,72639],3],[[72640,72672],2],[72673,2],[[72674,72687],3],[[72688,72697],2],[[72698,72703],3],[[72704,72712],2],[72713,3],[[72714,72758],2],[72759,3],[[72760,72768],2],[[72769,72773],2],[[72774,72783],3],[[72784,72793],2],[[72794,72812],2],[[72813,72815],3],[[72816,72817],2],[[72818,72847],2],[[72848,72849],3],[[72850,72871],2],[72872,3],[[72873,72886],2],[[72887,72959],3],[[72960,72966],2],[72967,3],[[72968,72969],2],[72970,3],[[72971,73014],2],[[73015,73017],3],[73018,2],[73019,3],[[73020,73021],2],[73022,3],[[73023,73031],2],[[73032,73039],3],[[73040,73049],2],[[73050,73055],3],[[73056,73061],2],[73062,3],[[73063,73064],2],[73065,3],[[73066,73102],2],[73103,3],[[73104,73105],2],[73106,3],[[73107,73112],2],[[73113,73119],3],[[73120,73129],2],[[73130,73439],3],[[73440,73462],2],[[73463,73464],2],[[73465,73471],3],[[73472,73488],2],[73489,3],[[73490,73530],2],[[73531,73533],3],[[73534,73538],2],[[73539,73551],2],[[73552,73561],2],[73562,2],[[73563,73647],3],[73648,2],[[73649,73663],3],[[73664,73713],2],[[73714,73726],3],[73727,2],[[73728,74606],2],[[74607,74648],2],[74649,2],[[74650,74751],3],[[74752,74850],2],[[74851,74862],2],[74863,3],[[74864,74867],2],[74868,2],[[74869,74879],3],[[74880,75075],2],[[75076,77711],3],[[77712,77808],2],[[77809,77810],2],[[77811,77823],3],[[77824,78894],2],[78895,2],[[78896,78904],3],[[78905,78911],3],[[78912,78933],2],[[78934,78943],3],[[78944,82938],2],[[82939,82943],3],[[82944,83526],2],[[83527,90367],3],[[90368,90425],2],[[90426,92159],3],[[92160,92728],2],[[92729,92735],3],[[92736,92766],2],[92767,3],[[92768,92777],2],[[92778,92781],3],[[92782,92783],2],[[92784,92862],2],[92863,3],[[92864,92873],2],[[92874,92879],3],[[92880,92909],2],[[92910,92911],3],[[92912,92916],2],[92917,2],[[92918,92927],3],[[92928,92982],2],[[92983,92991],2],[[92992,92995],2],[[92996,92997],2],[[92998,93007],3],[[93008,93017],2],[93018,3],[[93019,93025],2],[93026,3],[[93027,93047],2],[[93048,93052],3],[[93053,93071],2],[[93072,93503],3],[[93504,93548],2],[[93549,93551],2],[[93552,93561],2],[[93562,93759],3],[93760,1,"\u{16E60}"],[93761,1,"\u{16E61}"],[93762,1,"\u{16E62}"],[93763,1,"\u{16E63}"],[93764,1,"\u{16E64}"],[93765,1,"\u{16E65}"],[93766,1,"\u{16E66}"],[93767,1,"\u{16E67}"],[93768,1,"\u{16E68}"],[93769,1,"\u{16E69}"],[93770,1,"\u{16E6A}"],[93771,1,"\u{16E6B}"],[93772,1,"\u{16E6C}"],[93773,1,"\u{16E6D}"],[93774,1,"\u{16E6E}"],[93775,1,"\u{16E6F}"],[93776,1,"\u{16E70}"],[93777,1,"\u{16E71}"],[93778,1,"\u{16E72}"],[93779,1,"\u{16E73}"],[93780,1,"\u{16E74}"],[93781,1,"\u{16E75}"],[93782,1,"\u{16E76}"],[93783,1,"\u{16E77}"],[93784,1,"\u{16E78}"],[93785,1,"\u{16E79}"],[93786,1,"\u{16E7A}"],[93787,1,"\u{16E7B}"],[93788,1,"\u{16E7C}"],[93789,1,"\u{16E7D}"],[93790,1,"\u{16E7E}"],[93791,1,"\u{16E7F}"],[[93792,93823],2],[[93824,93850],2],[[93851,93951],3],[[93952,94020],2],[[94021,94026],2],[[94027,94030],3],[94031,2],[[94032,94078],2],[[94079,94087],2],[[94088,94094],3],[[94095,94111],2],[[94112,94175],3],[94176,2],[94177,2],[94178,2],[94179,2],[94180,2],[[94181,94191],3],[[94192,94193],2],[[94194,94207],3],[[94208,100332],2],[[100333,100337],2],[[100338,100343],2],[[100344,100351],3],[[100352,101106],2],[[101107,101589],2],[[101590,101630],3],[101631,2],[[101632,101640],2],[[101641,110575],3],[[110576,110579],2],[110580,3],[[110581,110587],2],[110588,3],[[110589,110590],2],[110591,3],[[110592,110593],2],[[110594,110878],2],[[110879,110882],2],[[110883,110897],3],[110898,2],[[110899,110927],3],[[110928,110930],2],[[110931,110932],3],[110933,2],[[110934,110947],3],[[110948,110951],2],[[110952,110959],3],[[110960,111355],2],[[111356,113663],3],[[113664,113770],2],[[113771,113775],3],[[113776,113788],2],[[113789,113791],3],[[113792,113800],2],[[113801,113807],3],[[113808,113817],2],[[113818,113819],3],[113820,2],[[113821,113822],2],[113823,2],[[113824,113827],7],[[113828,117759],3],[[117760,117973],2],[117974,1,"a"],[117975,1,"b"],[117976,1,"c"],[117977,1,"d"],[117978,1,"e"],[117979,1,"f"],[117980,1,"g"],[117981,1,"h"],[117982,1,"i"],[117983,1,"j"],[117984,1,"k"],[117985,1,"l"],[117986,1,"m"],[117987,1,"n"],[117988,1,"o"],[117989,1,"p"],[117990,1,"q"],[117991,1,"r"],[117992,1,"s"],[117993,1,"t"],[117994,1,"u"],[117995,1,"v"],[117996,1,"w"],[117997,1,"x"],[117998,1,"y"],[117999,1,"z"],[118e3,1,"0"],[118001,1,"1"],[118002,1,"2"],[118003,1,"3"],[118004,1,"4"],[118005,1,"5"],[118006,1,"6"],[118007,1,"7"],[118008,1,"8"],[118009,1,"9"],[[118010,118015],3],[[118016,118451],2],[[118452,118527],3],[[118528,118573],2],[[118574,118575],3],[[118576,118598],2],[[118599,118607],3],[[118608,118723],2],[[118724,118783],3],[[118784,119029],2],[[119030,119039],3],[[119040,119078],2],[[119079,119080],3],[119081,2],[[119082,119133],2],[119134,1,"\u{1D157}\u{1D165}"],[119135,1,"\u{1D158}\u{1D165}"],[119136,1,"\u{1D158}\u{1D165}\u{1D16E}"],[119137,1,"\u{1D158}\u{1D165}\u{1D16F}"],[119138,1,"\u{1D158}\u{1D165}\u{1D170}"],[119139,1,"\u{1D158}\u{1D165}\u{1D171}"],[119140,1,"\u{1D158}\u{1D165}\u{1D172}"],[[119141,119154],2],[[119155,119162],7],[[119163,119226],2],[119227,1,"\u{1D1B9}\u{1D165}"],[119228,1,"\u{1D1BA}\u{1D165}"],[119229,1,"\u{1D1B9}\u{1D165}\u{1D16E}"],[119230,1,"\u{1D1BA}\u{1D165}\u{1D16E}"],[119231,1,"\u{1D1B9}\u{1D165}\u{1D16F}"],[119232,1,"\u{1D1BA}\u{1D165}\u{1D16F}"],[[119233,119261],2],[[119262,119272],2],[[119273,119274],2],[[119275,119295],3],[[119296,119365],2],[[119366,119487],3],[[119488,119507],2],[[119508,119519],3],[[119520,119539],2],[[119540,119551],3],[[119552,119638],2],[[119639,119647],3],[[119648,119665],2],[[119666,119672],2],[[119673,119807],3],[119808,1,"a"],[119809,1,"b"],[119810,1,"c"],[119811,1,"d"],[119812,1,"e"],[119813,1,"f"],[119814,1,"g"],[119815,1,"h"],[119816,1,"i"],[119817,1,"j"],[119818,1,"k"],[119819,1,"l"],[119820,1,"m"],[119821,1,"n"],[119822,1,"o"],[119823,1,"p"],[119824,1,"q"],[119825,1,"r"],[119826,1,"s"],[119827,1,"t"],[119828,1,"u"],[119829,1,"v"],[119830,1,"w"],[119831,1,"x"],[119832,1,"y"],[119833,1,"z"],[119834,1,"a"],[119835,1,"b"],[119836,1,"c"],[119837,1,"d"],[119838,1,"e"],[119839,1,"f"],[119840,1,"g"],[119841,1,"h"],[119842,1,"i"],[119843,1,"j"],[119844,1,"k"],[119845,1,"l"],[119846,1,"m"],[119847,1,"n"],[119848,1,"o"],[119849,1,"p"],[119850,1,"q"],[119851,1,"r"],[119852,1,"s"],[119853,1,"t"],[119854,1,"u"],[119855,1,"v"],[119856,1,"w"],[119857,1,"x"],[119858,1,"y"],[119859,1,"z"],[119860,1,"a"],[119861,1,"b"],[119862,1,"c"],[119863,1,"d"],[119864,1,"e"],[119865,1,"f"],[119866,1,"g"],[119867,1,"h"],[119868,1,"i"],[119869,1,"j"],[119870,1,"k"],[119871,1,"l"],[119872,1,"m"],[119873,1,"n"],[119874,1,"o"],[119875,1,"p"],[119876,1,"q"],[119877,1,"r"],[119878,1,"s"],[119879,1,"t"],[119880,1,"u"],[119881,1,"v"],[119882,1,"w"],[119883,1,"x"],[119884,1,"y"],[119885,1,"z"],[119886,1,"a"],[119887,1,"b"],[119888,1,"c"],[119889,1,"d"],[119890,1,"e"],[119891,1,"f"],[119892,1,"g"],[119893,3],[119894,1,"i"],[119895,1,"j"],[119896,1,"k"],[119897,1,"l"],[119898,1,"m"],[119899,1,"n"],[119900,1,"o"],[119901,1,"p"],[119902,1,"q"],[119903,1,"r"],[119904,1,"s"],[119905,1,"t"],[119906,1,"u"],[119907,1,"v"],[119908,1,"w"],[119909,1,"x"],[119910,1,"y"],[119911,1,"z"],[119912,1,"a"],[119913,1,"b"],[119914,1,"c"],[119915,1,"d"],[119916,1,"e"],[119917,1,"f"],[119918,1,"g"],[119919,1,"h"],[119920,1,"i"],[119921,1,"j"],[119922,1,"k"],[119923,1,"l"],[119924,1,"m"],[119925,1,"n"],[119926,1,"o"],[119927,1,"p"],[119928,1,"q"],[119929,1,"r"],[119930,1,"s"],[119931,1,"t"],[119932,1,"u"],[119933,1,"v"],[119934,1,"w"],[119935,1,"x"],[119936,1,"y"],[119937,1,"z"],[119938,1,"a"],[119939,1,"b"],[119940,1,"c"],[119941,1,"d"],[119942,1,"e"],[119943,1,"f"],[119944,1,"g"],[119945,1,"h"],[119946,1,"i"],[119947,1,"j"],[119948,1,"k"],[119949,1,"l"],[119950,1,"m"],[119951,1,"n"],[119952,1,"o"],[119953,1,"p"],[119954,1,"q"],[119955,1,"r"],[119956,1,"s"],[119957,1,"t"],[119958,1,"u"],[119959,1,"v"],[119960,1,"w"],[119961,1,"x"],[119962,1,"y"],[119963,1,"z"],[119964,1,"a"],[119965,3],[119966,1,"c"],[119967,1,"d"],[[119968,119969],3],[119970,1,"g"],[[119971,119972],3],[119973,1,"j"],[119974,1,"k"],[[119975,119976],3],[119977,1,"n"],[119978,1,"o"],[119979,1,"p"],[119980,1,"q"],[119981,3],[119982,1,"s"],[119983,1,"t"],[119984,1,"u"],[119985,1,"v"],[119986,1,"w"],[119987,1,"x"],[119988,1,"y"],[119989,1,"z"],[119990,1,"a"],[119991,1,"b"],[119992,1,"c"],[119993,1,"d"],[119994,3],[119995,1,"f"],[119996,3],[119997,1,"h"],[119998,1,"i"],[119999,1,"j"],[12e4,1,"k"],[120001,1,"l"],[120002,1,"m"],[120003,1,"n"],[120004,3],[120005,1,"p"],[120006,1,"q"],[120007,1,"r"],[120008,1,"s"],[120009,1,"t"],[120010,1,"u"],[120011,1,"v"],[120012,1,"w"],[120013,1,"x"],[120014,1,"y"],[120015,1,"z"],[120016,1,"a"],[120017,1,"b"],[120018,1,"c"],[120019,1,"d"],[120020,1,"e"],[120021,1,"f"],[120022,1,"g"],[120023,1,"h"],[120024,1,"i"],[120025,1,"j"],[120026,1,"k"],[120027,1,"l"],[120028,1,"m"],[120029,1,"n"],[120030,1,"o"],[120031,1,"p"],[120032,1,"q"],[120033,1,"r"],[120034,1,"s"],[120035,1,"t"],[120036,1,"u"],[120037,1,"v"],[120038,1,"w"],[120039,1,"x"],[120040,1,"y"],[120041,1,"z"],[120042,1,"a"],[120043,1,"b"],[120044,1,"c"],[120045,1,"d"],[120046,1,"e"],[120047,1,"f"],[120048,1,"g"],[120049,1,"h"],[120050,1,"i"],[120051,1,"j"],[120052,1,"k"],[120053,1,"l"],[120054,1,"m"],[120055,1,"n"],[120056,1,"o"],[120057,1,"p"],[120058,1,"q"],[120059,1,"r"],[120060,1,"s"],[120061,1,"t"],[120062,1,"u"],[120063,1,"v"],[120064,1,"w"],[120065,1,"x"],[120066,1,"y"],[120067,1,"z"],[120068,1,"a"],[120069,1,"b"],[120070,3],[120071,1,"d"],[120072,1,"e"],[120073,1,"f"],[120074,1,"g"],[[120075,120076],3],[120077,1,"j"],[120078,1,"k"],[120079,1,"l"],[120080,1,"m"],[120081,1,"n"],[120082,1,"o"],[120083,1,"p"],[120084,1,"q"],[120085,3],[120086,1,"s"],[120087,1,"t"],[120088,1,"u"],[120089,1,"v"],[120090,1,"w"],[120091,1,"x"],[120092,1,"y"],[120093,3],[120094,1,"a"],[120095,1,"b"],[120096,1,"c"],[120097,1,"d"],[120098,1,"e"],[120099,1,"f"],[120100,1,"g"],[120101,1,"h"],[120102,1,"i"],[120103,1,"j"],[120104,1,"k"],[120105,1,"l"],[120106,1,"m"],[120107,1,"n"],[120108,1,"o"],[120109,1,"p"],[120110,1,"q"],[120111,1,"r"],[120112,1,"s"],[120113,1,"t"],[120114,1,"u"],[120115,1,"v"],[120116,1,"w"],[120117,1,"x"],[120118,1,"y"],[120119,1,"z"],[120120,1,"a"],[120121,1,"b"],[120122,3],[120123,1,"d"],[120124,1,"e"],[120125,1,"f"],[120126,1,"g"],[120127,3],[120128,1,"i"],[120129,1,"j"],[120130,1,"k"],[120131,1,"l"],[120132,1,"m"],[120133,3],[120134,1,"o"],[[120135,120137],3],[120138,1,"s"],[120139,1,"t"],[120140,1,"u"],[120141,1,"v"],[120142,1,"w"],[120143,1,"x"],[120144,1,"y"],[120145,3],[120146,1,"a"],[120147,1,"b"],[120148,1,"c"],[120149,1,"d"],[120150,1,"e"],[120151,1,"f"],[120152,1,"g"],[120153,1,"h"],[120154,1,"i"],[120155,1,"j"],[120156,1,"k"],[120157,1,"l"],[120158,1,"m"],[120159,1,"n"],[120160,1,"o"],[120161,1,"p"],[120162,1,"q"],[120163,1,"r"],[120164,1,"s"],[120165,1,"t"],[120166,1,"u"],[120167,1,"v"],[120168,1,"w"],[120169,1,"x"],[120170,1,"y"],[120171,1,"z"],[120172,1,"a"],[120173,1,"b"],[120174,1,"c"],[120175,1,"d"],[120176,1,"e"],[120177,1,"f"],[120178,1,"g"],[120179,1,"h"],[120180,1,"i"],[120181,1,"j"],[120182,1,"k"],[120183,1,"l"],[120184,1,"m"],[120185,1,"n"],[120186,1,"o"],[120187,1,"p"],[120188,1,"q"],[120189,1,"r"],[120190,1,"s"],[120191,1,"t"],[120192,1,"u"],[120193,1,"v"],[120194,1,"w"],[120195,1,"x"],[120196,1,"y"],[120197,1,"z"],[120198,1,"a"],[120199,1,"b"],[120200,1,"c"],[120201,1,"d"],[120202,1,"e"],[120203,1,"f"],[120204,1,"g"],[120205,1,"h"],[120206,1,"i"],[120207,1,"j"],[120208,1,"k"],[120209,1,"l"],[120210,1,"m"],[120211,1,"n"],[120212,1,"o"],[120213,1,"p"],[120214,1,"q"],[120215,1,"r"],[120216,1,"s"],[120217,1,"t"],[120218,1,"u"],[120219,1,"v"],[120220,1,"w"],[120221,1,"x"],[120222,1,"y"],[120223,1,"z"],[120224,1,"a"],[120225,1,"b"],[120226,1,"c"],[120227,1,"d"],[120228,1,"e"],[120229,1,"f"],[120230,1,"g"],[120231,1,"h"],[120232,1,"i"],[120233,1,"j"],[120234,1,"k"],[120235,1,"l"],[120236,1,"m"],[120237,1,"n"],[120238,1,"o"],[120239,1,"p"],[120240,1,"q"],[120241,1,"r"],[120242,1,"s"],[120243,1,"t"],[120244,1,"u"],[120245,1,"v"],[120246,1,"w"],[120247,1,"x"],[120248,1,"y"],[120249,1,"z"],[120250,1,"a"],[120251,1,"b"],[120252,1,"c"],[120253,1,"d"],[120254,1,"e"],[120255,1,"f"],[120256,1,"g"],[120257,1,"h"],[120258,1,"i"],[120259,1,"j"],[120260,1,"k"],[120261,1,"l"],[120262,1,"m"],[120263,1,"n"],[120264,1,"o"],[120265,1,"p"],[120266,1,"q"],[120267,1,"r"],[120268,1,"s"],[120269,1,"t"],[120270,1,"u"],[120271,1,"v"],[120272,1,"w"],[120273,1,"x"],[120274,1,"y"],[120275,1,"z"],[120276,1,"a"],[120277,1,"b"],[120278,1,"c"],[120279,1,"d"],[120280,1,"e"],[120281,1,"f"],[120282,1,"g"],[120283,1,"h"],[120284,1,"i"],[120285,1,"j"],[120286,1,"k"],[120287,1,"l"],[120288,1,"m"],[120289,1,"n"],[120290,1,"o"],[120291,1,"p"],[120292,1,"q"],[120293,1,"r"],[120294,1,"s"],[120295,1,"t"],[120296,1,"u"],[120297,1,"v"],[120298,1,"w"],[120299,1,"x"],[120300,1,"y"],[120301,1,"z"],[120302,1,"a"],[120303,1,"b"],[120304,1,"c"],[120305,1,"d"],[120306,1,"e"],[120307,1,"f"],[120308,1,"g"],[120309,1,"h"],[120310,1,"i"],[120311,1,"j"],[120312,1,"k"],[120313,1,"l"],[120314,1,"m"],[120315,1,"n"],[120316,1,"o"],[120317,1,"p"],[120318,1,"q"],[120319,1,"r"],[120320,1,"s"],[120321,1,"t"],[120322,1,"u"],[120323,1,"v"],[120324,1,"w"],[120325,1,"x"],[120326,1,"y"],[120327,1,"z"],[120328,1,"a"],[120329,1,"b"],[120330,1,"c"],[120331,1,"d"],[120332,1,"e"],[120333,1,"f"],[120334,1,"g"],[120335,1,"h"],[120336,1,"i"],[120337,1,"j"],[120338,1,"k"],[120339,1,"l"],[120340,1,"m"],[120341,1,"n"],[120342,1,"o"],[120343,1,"p"],[120344,1,"q"],[120345,1,"r"],[120346,1,"s"],[120347,1,"t"],[120348,1,"u"],[120349,1,"v"],[120350,1,"w"],[120351,1,"x"],[120352,1,"y"],[120353,1,"z"],[120354,1,"a"],[120355,1,"b"],[120356,1,"c"],[120357,1,"d"],[120358,1,"e"],[120359,1,"f"],[120360,1,"g"],[120361,1,"h"],[120362,1,"i"],[120363,1,"j"],[120364,1,"k"],[120365,1,"l"],[120366,1,"m"],[120367,1,"n"],[120368,1,"o"],[120369,1,"p"],[120370,1,"q"],[120371,1,"r"],[120372,1,"s"],[120373,1,"t"],[120374,1,"u"],[120375,1,"v"],[120376,1,"w"],[120377,1,"x"],[120378,1,"y"],[120379,1,"z"],[120380,1,"a"],[120381,1,"b"],[120382,1,"c"],[120383,1,"d"],[120384,1,"e"],[120385,1,"f"],[120386,1,"g"],[120387,1,"h"],[120388,1,"i"],[120389,1,"j"],[120390,1,"k"],[120391,1,"l"],[120392,1,"m"],[120393,1,"n"],[120394,1,"o"],[120395,1,"p"],[120396,1,"q"],[120397,1,"r"],[120398,1,"s"],[120399,1,"t"],[120400,1,"u"],[120401,1,"v"],[120402,1,"w"],[120403,1,"x"],[120404,1,"y"],[120405,1,"z"],[120406,1,"a"],[120407,1,"b"],[120408,1,"c"],[120409,1,"d"],[120410,1,"e"],[120411,1,"f"],[120412,1,"g"],[120413,1,"h"],[120414,1,"i"],[120415,1,"j"],[120416,1,"k"],[120417,1,"l"],[120418,1,"m"],[120419,1,"n"],[120420,1,"o"],[120421,1,"p"],[120422,1,"q"],[120423,1,"r"],[120424,1,"s"],[120425,1,"t"],[120426,1,"u"],[120427,1,"v"],[120428,1,"w"],[120429,1,"x"],[120430,1,"y"],[120431,1,"z"],[120432,1,"a"],[120433,1,"b"],[120434,1,"c"],[120435,1,"d"],[120436,1,"e"],[120437,1,"f"],[120438,1,"g"],[120439,1,"h"],[120440,1,"i"],[120441,1,"j"],[120442,1,"k"],[120443,1,"l"],[120444,1,"m"],[120445,1,"n"],[120446,1,"o"],[120447,1,"p"],[120448,1,"q"],[120449,1,"r"],[120450,1,"s"],[120451,1,"t"],[120452,1,"u"],[120453,1,"v"],[120454,1,"w"],[120455,1,"x"],[120456,1,"y"],[120457,1,"z"],[120458,1,"a"],[120459,1,"b"],[120460,1,"c"],[120461,1,"d"],[120462,1,"e"],[120463,1,"f"],[120464,1,"g"],[120465,1,"h"],[120466,1,"i"],[120467,1,"j"],[120468,1,"k"],[120469,1,"l"],[120470,1,"m"],[120471,1,"n"],[120472,1,"o"],[120473,1,"p"],[120474,1,"q"],[120475,1,"r"],[120476,1,"s"],[120477,1,"t"],[120478,1,"u"],[120479,1,"v"],[120480,1,"w"],[120481,1,"x"],[120482,1,"y"],[120483,1,"z"],[120484,1,"\u0131"],[120485,1,"\u0237"],[[120486,120487],3],[120488,1,"\u03B1"],[120489,1,"\u03B2"],[120490,1,"\u03B3"],[120491,1,"\u03B4"],[120492,1,"\u03B5"],[120493,1,"\u03B6"],[120494,1,"\u03B7"],[120495,1,"\u03B8"],[120496,1,"\u03B9"],[120497,1,"\u03BA"],[120498,1,"\u03BB"],[120499,1,"\u03BC"],[120500,1,"\u03BD"],[120501,1,"\u03BE"],[120502,1,"\u03BF"],[120503,1,"\u03C0"],[120504,1,"\u03C1"],[120505,1,"\u03B8"],[120506,1,"\u03C3"],[120507,1,"\u03C4"],[120508,1,"\u03C5"],[120509,1,"\u03C6"],[120510,1,"\u03C7"],[120511,1,"\u03C8"],[120512,1,"\u03C9"],[120513,1,"\u2207"],[120514,1,"\u03B1"],[120515,1,"\u03B2"],[120516,1,"\u03B3"],[120517,1,"\u03B4"],[120518,1,"\u03B5"],[120519,1,"\u03B6"],[120520,1,"\u03B7"],[120521,1,"\u03B8"],[120522,1,"\u03B9"],[120523,1,"\u03BA"],[120524,1,"\u03BB"],[120525,1,"\u03BC"],[120526,1,"\u03BD"],[120527,1,"\u03BE"],[120528,1,"\u03BF"],[120529,1,"\u03C0"],[120530,1,"\u03C1"],[[120531,120532],1,"\u03C3"],[120533,1,"\u03C4"],[120534,1,"\u03C5"],[120535,1,"\u03C6"],[120536,1,"\u03C7"],[120537,1,"\u03C8"],[120538,1,"\u03C9"],[120539,1,"\u2202"],[120540,1,"\u03B5"],[120541,1,"\u03B8"],[120542,1,"\u03BA"],[120543,1,"\u03C6"],[120544,1,"\u03C1"],[120545,1,"\u03C0"],[120546,1,"\u03B1"],[120547,1,"\u03B2"],[120548,1,"\u03B3"],[120549,1,"\u03B4"],[120550,1,"\u03B5"],[120551,1,"\u03B6"],[120552,1,"\u03B7"],[120553,1,"\u03B8"],[120554,1,"\u03B9"],[120555,1,"\u03BA"],[120556,1,"\u03BB"],[120557,1,"\u03BC"],[120558,1,"\u03BD"],[120559,1,"\u03BE"],[120560,1,"\u03BF"],[120561,1,"\u03C0"],[120562,1,"\u03C1"],[120563,1,"\u03B8"],[120564,1,"\u03C3"],[120565,1,"\u03C4"],[120566,1,"\u03C5"],[120567,1,"\u03C6"],[120568,1,"\u03C7"],[120569,1,"\u03C8"],[120570,1,"\u03C9"],[120571,1,"\u2207"],[120572,1,"\u03B1"],[120573,1,"\u03B2"],[120574,1,"\u03B3"],[120575,1,"\u03B4"],[120576,1,"\u03B5"],[120577,1,"\u03B6"],[120578,1,"\u03B7"],[120579,1,"\u03B8"],[120580,1,"\u03B9"],[120581,1,"\u03BA"],[120582,1,"\u03BB"],[120583,1,"\u03BC"],[120584,1,"\u03BD"],[120585,1,"\u03BE"],[120586,1,"\u03BF"],[120587,1,"\u03C0"],[120588,1,"\u03C1"],[[120589,120590],1,"\u03C3"],[120591,1,"\u03C4"],[120592,1,"\u03C5"],[120593,1,"\u03C6"],[120594,1,"\u03C7"],[120595,1,"\u03C8"],[120596,1,"\u03C9"],[120597,1,"\u2202"],[120598,1,"\u03B5"],[120599,1,"\u03B8"],[120600,1,"\u03BA"],[120601,1,"\u03C6"],[120602,1,"\u03C1"],[120603,1,"\u03C0"],[120604,1,"\u03B1"],[120605,1,"\u03B2"],[120606,1,"\u03B3"],[120607,1,"\u03B4"],[120608,1,"\u03B5"],[120609,1,"\u03B6"],[120610,1,"\u03B7"],[120611,1,"\u03B8"],[120612,1,"\u03B9"],[120613,1,"\u03BA"],[120614,1,"\u03BB"],[120615,1,"\u03BC"],[120616,1,"\u03BD"],[120617,1,"\u03BE"],[120618,1,"\u03BF"],[120619,1,"\u03C0"],[120620,1,"\u03C1"],[120621,1,"\u03B8"],[120622,1,"\u03C3"],[120623,1,"\u03C4"],[120624,1,"\u03C5"],[120625,1,"\u03C6"],[120626,1,"\u03C7"],[120627,1,"\u03C8"],[120628,1,"\u03C9"],[120629,1,"\u2207"],[120630,1,"\u03B1"],[120631,1,"\u03B2"],[120632,1,"\u03B3"],[120633,1,"\u03B4"],[120634,1,"\u03B5"],[120635,1,"\u03B6"],[120636,1,"\u03B7"],[120637,1,"\u03B8"],[120638,1,"\u03B9"],[120639,1,"\u03BA"],[120640,1,"\u03BB"],[120641,1,"\u03BC"],[120642,1,"\u03BD"],[120643,1,"\u03BE"],[120644,1,"\u03BF"],[120645,1,"\u03C0"],[120646,1,"\u03C1"],[[120647,120648],1,"\u03C3"],[120649,1,"\u03C4"],[120650,1,"\u03C5"],[120651,1,"\u03C6"],[120652,1,"\u03C7"],[120653,1,"\u03C8"],[120654,1,"\u03C9"],[120655,1,"\u2202"],[120656,1,"\u03B5"],[120657,1,"\u03B8"],[120658,1,"\u03BA"],[120659,1,"\u03C6"],[120660,1,"\u03C1"],[120661,1,"\u03C0"],[120662,1,"\u03B1"],[120663,1,"\u03B2"],[120664,1,"\u03B3"],[120665,1,"\u03B4"],[120666,1,"\u03B5"],[120667,1,"\u03B6"],[120668,1,"\u03B7"],[120669,1,"\u03B8"],[120670,1,"\u03B9"],[120671,1,"\u03BA"],[120672,1,"\u03BB"],[120673,1,"\u03BC"],[120674,1,"\u03BD"],[120675,1,"\u03BE"],[120676,1,"\u03BF"],[120677,1,"\u03C0"],[120678,1,"\u03C1"],[120679,1,"\u03B8"],[120680,1,"\u03C3"],[120681,1,"\u03C4"],[120682,1,"\u03C5"],[120683,1,"\u03C6"],[120684,1,"\u03C7"],[120685,1,"\u03C8"],[120686,1,"\u03C9"],[120687,1,"\u2207"],[120688,1,"\u03B1"],[120689,1,"\u03B2"],[120690,1,"\u03B3"],[120691,1,"\u03B4"],[120692,1,"\u03B5"],[120693,1,"\u03B6"],[120694,1,"\u03B7"],[120695,1,"\u03B8"],[120696,1,"\u03B9"],[120697,1,"\u03BA"],[120698,1,"\u03BB"],[120699,1,"\u03BC"],[120700,1,"\u03BD"],[120701,1,"\u03BE"],[120702,1,"\u03BF"],[120703,1,"\u03C0"],[120704,1,"\u03C1"],[[120705,120706],1,"\u03C3"],[120707,1,"\u03C4"],[120708,1,"\u03C5"],[120709,1,"\u03C6"],[120710,1,"\u03C7"],[120711,1,"\u03C8"],[120712,1,"\u03C9"],[120713,1,"\u2202"],[120714,1,"\u03B5"],[120715,1,"\u03B8"],[120716,1,"\u03BA"],[120717,1,"\u03C6"],[120718,1,"\u03C1"],[120719,1,"\u03C0"],[120720,1,"\u03B1"],[120721,1,"\u03B2"],[120722,1,"\u03B3"],[120723,1,"\u03B4"],[120724,1,"\u03B5"],[120725,1,"\u03B6"],[120726,1,"\u03B7"],[120727,1,"\u03B8"],[120728,1,"\u03B9"],[120729,1,"\u03BA"],[120730,1,"\u03BB"],[120731,1,"\u03BC"],[120732,1,"\u03BD"],[120733,1,"\u03BE"],[120734,1,"\u03BF"],[120735,1,"\u03C0"],[120736,1,"\u03C1"],[120737,1,"\u03B8"],[120738,1,"\u03C3"],[120739,1,"\u03C4"],[120740,1,"\u03C5"],[120741,1,"\u03C6"],[120742,1,"\u03C7"],[120743,1,"\u03C8"],[120744,1,"\u03C9"],[120745,1,"\u2207"],[120746,1,"\u03B1"],[120747,1,"\u03B2"],[120748,1,"\u03B3"],[120749,1,"\u03B4"],[120750,1,"\u03B5"],[120751,1,"\u03B6"],[120752,1,"\u03B7"],[120753,1,"\u03B8"],[120754,1,"\u03B9"],[120755,1,"\u03BA"],[120756,1,"\u03BB"],[120757,1,"\u03BC"],[120758,1,"\u03BD"],[120759,1,"\u03BE"],[120760,1,"\u03BF"],[120761,1,"\u03C0"],[120762,1,"\u03C1"],[[120763,120764],1,"\u03C3"],[120765,1,"\u03C4"],[120766,1,"\u03C5"],[120767,1,"\u03C6"],[120768,1,"\u03C7"],[120769,1,"\u03C8"],[120770,1,"\u03C9"],[120771,1,"\u2202"],[120772,1,"\u03B5"],[120773,1,"\u03B8"],[120774,1,"\u03BA"],[120775,1,"\u03C6"],[120776,1,"\u03C1"],[120777,1,"\u03C0"],[[120778,120779],1,"\u03DD"],[[120780,120781],3],[120782,1,"0"],[120783,1,"1"],[120784,1,"2"],[120785,1,"3"],[120786,1,"4"],[120787,1,"5"],[120788,1,"6"],[120789,1,"7"],[120790,1,"8"],[120791,1,"9"],[120792,1,"0"],[120793,1,"1"],[120794,1,"2"],[120795,1,"3"],[120796,1,"4"],[120797,1,"5"],[120798,1,"6"],[120799,1,"7"],[120800,1,"8"],[120801,1,"9"],[120802,1,"0"],[120803,1,"1"],[120804,1,"2"],[120805,1,"3"],[120806,1,"4"],[120807,1,"5"],[120808,1,"6"],[120809,1,"7"],[120810,1,"8"],[120811,1,"9"],[120812,1,"0"],[120813,1,"1"],[120814,1,"2"],[120815,1,"3"],[120816,1,"4"],[120817,1,"5"],[120818,1,"6"],[120819,1,"7"],[120820,1,"8"],[120821,1,"9"],[120822,1,"0"],[120823,1,"1"],[120824,1,"2"],[120825,1,"3"],[120826,1,"4"],[120827,1,"5"],[120828,1,"6"],[120829,1,"7"],[120830,1,"8"],[120831,1,"9"],[[120832,121343],2],[[121344,121398],2],[[121399,121402],2],[[121403,121452],2],[[121453,121460],2],[121461,2],[[121462,121475],2],[121476,2],[[121477,121483],2],[[121484,121498],3],[[121499,121503],2],[121504,3],[[121505,121519],2],[[121520,122623],3],[[122624,122654],2],[[122655,122660],3],[[122661,122666],2],[[122667,122879],3],[[122880,122886],2],[122887,3],[[122888,122904],2],[[122905,122906],3],[[122907,122913],2],[122914,3],[[122915,122916],2],[122917,3],[[122918,122922],2],[[122923,122927],3],[122928,1,"\u0430"],[122929,1,"\u0431"],[122930,1,"\u0432"],[122931,1,"\u0433"],[122932,1,"\u0434"],[122933,1,"\u0435"],[122934,1,"\u0436"],[122935,1,"\u0437"],[122936,1,"\u0438"],[122937,1,"\u043A"],[122938,1,"\u043B"],[122939,1,"\u043C"],[122940,1,"\u043E"],[122941,1,"\u043F"],[122942,1,"\u0440"],[122943,1,"\u0441"],[122944,1,"\u0442"],[122945,1,"\u0443"],[122946,1,"\u0444"],[122947,1,"\u0445"],[122948,1,"\u0446"],[122949,1,"\u0447"],[122950,1,"\u0448"],[122951,1,"\u044B"],[122952,1,"\u044D"],[122953,1,"\u044E"],[122954,1,"\uA689"],[122955,1,"\u04D9"],[122956,1,"\u0456"],[122957,1,"\u0458"],[122958,1,"\u04E9"],[122959,1,"\u04AF"],[122960,1,"\u04CF"],[122961,1,"\u0430"],[122962,1,"\u0431"],[122963,1,"\u0432"],[122964,1,"\u0433"],[122965,1,"\u0434"],[122966,1,"\u0435"],[122967,1,"\u0436"],[122968,1,"\u0437"],[122969,1,"\u0438"],[122970,1,"\u043A"],[122971,1,"\u043B"],[122972,1,"\u043E"],[122973,1,"\u043F"],[122974,1,"\u0441"],[122975,1,"\u0443"],[122976,1,"\u0444"],[122977,1,"\u0445"],[122978,1,"\u0446"],[122979,1,"\u0447"],[122980,1,"\u0448"],[122981,1,"\u044A"],[122982,1,"\u044B"],[122983,1,"\u0491"],[122984,1,"\u0456"],[122985,1,"\u0455"],[122986,1,"\u045F"],[122987,1,"\u04AB"],[122988,1,"\uA651"],[122989,1,"\u04B1"],[[122990,123022],3],[123023,2],[[123024,123135],3],[[123136,123180],2],[[123181,123183],3],[[123184,123197],2],[[123198,123199],3],[[123200,123209],2],[[123210,123213],3],[123214,2],[123215,2],[[123216,123535],3],[[123536,123566],2],[[123567,123583],3],[[123584,123641],2],[[123642,123646],3],[123647,2],[[123648,124111],3],[[124112,124153],2],[[124154,124367],3],[[124368,124410],2],[[124411,124414],3],[124415,2],[[124416,124895],3],[[124896,124902],2],[124903,3],[[124904,124907],2],[124908,3],[[124909,124910],2],[124911,3],[[124912,124926],2],[124927,3],[[124928,125124],2],[[125125,125126],3],[[125127,125135],2],[[125136,125142],2],[[125143,125183],3],[125184,1,"\u{1E922}"],[125185,1,"\u{1E923}"],[125186,1,"\u{1E924}"],[125187,1,"\u{1E925}"],[125188,1,"\u{1E926}"],[125189,1,"\u{1E927}"],[125190,1,"\u{1E928}"],[125191,1,"\u{1E929}"],[125192,1,"\u{1E92A}"],[125193,1,"\u{1E92B}"],[125194,1,"\u{1E92C}"],[125195,1,"\u{1E92D}"],[125196,1,"\u{1E92E}"],[125197,1,"\u{1E92F}"],[125198,1,"\u{1E930}"],[125199,1,"\u{1E931}"],[125200,1,"\u{1E932}"],[125201,1,"\u{1E933}"],[125202,1,"\u{1E934}"],[125203,1,"\u{1E935}"],[125204,1,"\u{1E936}"],[125205,1,"\u{1E937}"],[125206,1,"\u{1E938}"],[125207,1,"\u{1E939}"],[125208,1,"\u{1E93A}"],[125209,1,"\u{1E93B}"],[125210,1,"\u{1E93C}"],[125211,1,"\u{1E93D}"],[125212,1,"\u{1E93E}"],[125213,1,"\u{1E93F}"],[125214,1,"\u{1E940}"],[125215,1,"\u{1E941}"],[125216,1,"\u{1E942}"],[125217,1,"\u{1E943}"],[[125218,125258],2],[125259,2],[[125260,125263],3],[[125264,125273],2],[[125274,125277],3],[[125278,125279],2],[[125280,126064],3],[[126065,126132],2],[[126133,126208],3],[[126209,126269],2],[[126270,126463],3],[126464,1,"\u0627"],[126465,1,"\u0628"],[126466,1,"\u062C"],[126467,1,"\u062F"],[126468,3],[126469,1,"\u0648"],[126470,1,"\u0632"],[126471,1,"\u062D"],[126472,1,"\u0637"],[126473,1,"\u064A"],[126474,1,"\u0643"],[126475,1,"\u0644"],[126476,1,"\u0645"],[126477,1,"\u0646"],[126478,1,"\u0633"],[126479,1,"\u0639"],[126480,1,"\u0641"],[126481,1,"\u0635"],[126482,1,"\u0642"],[126483,1,"\u0631"],[126484,1,"\u0634"],[126485,1,"\u062A"],[126486,1,"\u062B"],[126487,1,"\u062E"],[126488,1,"\u0630"],[126489,1,"\u0636"],[126490,1,"\u0638"],[126491,1,"\u063A"],[126492,1,"\u066E"],[126493,1,"\u06BA"],[126494,1,"\u06A1"],[126495,1,"\u066F"],[126496,3],[126497,1,"\u0628"],[126498,1,"\u062C"],[126499,3],[126500,1,"\u0647"],[[126501,126502],3],[126503,1,"\u062D"],[126504,3],[126505,1,"\u064A"],[126506,1,"\u0643"],[126507,1,"\u0644"],[126508,1,"\u0645"],[126509,1,"\u0646"],[126510,1,"\u0633"],[126511,1,"\u0639"],[126512,1,"\u0641"],[126513,1,"\u0635"],[126514,1,"\u0642"],[126515,3],[126516,1,"\u0634"],[126517,1,"\u062A"],[126518,1,"\u062B"],[126519,1,"\u062E"],[126520,3],[126521,1,"\u0636"],[126522,3],[126523,1,"\u063A"],[[126524,126529],3],[126530,1,"\u062C"],[[126531,126534],3],[126535,1,"\u062D"],[126536,3],[126537,1,"\u064A"],[126538,3],[126539,1,"\u0644"],[126540,3],[126541,1,"\u0646"],[126542,1,"\u0633"],[126543,1,"\u0639"],[126544,3],[126545,1,"\u0635"],[126546,1,"\u0642"],[126547,3],[126548,1,"\u0634"],[[126549,126550],3],[126551,1,"\u062E"],[126552,3],[126553,1,"\u0636"],[126554,3],[126555,1,"\u063A"],[126556,3],[126557,1,"\u06BA"],[126558,3],[126559,1,"\u066F"],[126560,3],[126561,1,"\u0628"],[126562,1,"\u062C"],[126563,3],[126564,1,"\u0647"],[[126565,126566],3],[126567,1,"\u062D"],[126568,1,"\u0637"],[126569,1,"\u064A"],[126570,1,"\u0643"],[126571,3],[126572,1,"\u0645"],[126573,1,"\u0646"],[126574,1,"\u0633"],[126575,1,"\u0639"],[126576,1,"\u0641"],[126577,1,"\u0635"],[126578,1,"\u0642"],[126579,3],[126580,1,"\u0634"],[126581,1,"\u062A"],[126582,1,"\u062B"],[126583,1,"\u062E"],[126584,3],[126585,1,"\u0636"],[126586,1,"\u0638"],[126587,1,"\u063A"],[126588,1,"\u066E"],[126589,3],[126590,1,"\u06A1"],[126591,3],[126592,1,"\u0627"],[126593,1,"\u0628"],[126594,1,"\u062C"],[126595,1,"\u062F"],[126596,1,"\u0647"],[126597,1,"\u0648"],[126598,1,"\u0632"],[126599,1,"\u062D"],[126600,1,"\u0637"],[126601,1,"\u064A"],[126602,3],[126603,1,"\u0644"],[126604,1,"\u0645"],[126605,1,"\u0646"],[126606,1,"\u0633"],[126607,1,"\u0639"],[126608,1,"\u0641"],[126609,1,"\u0635"],[126610,1,"\u0642"],[126611,1,"\u0631"],[126612,1,"\u0634"],[126613,1,"\u062A"],[126614,1,"\u062B"],[126615,1,"\u062E"],[126616,1,"\u0630"],[126617,1,"\u0636"],[126618,1,"\u0638"],[126619,1,"\u063A"],[[126620,126624],3],[126625,1,"\u0628"],[126626,1,"\u062C"],[126627,1,"\u062F"],[126628,3],[126629,1,"\u0648"],[126630,1,"\u0632"],[126631,1,"\u062D"],[126632,1,"\u0637"],[126633,1,"\u064A"],[126634,3],[126635,1,"\u0644"],[126636,1,"\u0645"],[126637,1,"\u0646"],[126638,1,"\u0633"],[126639,1,"\u0639"],[126640,1,"\u0641"],[126641,1,"\u0635"],[126642,1,"\u0642"],[126643,1,"\u0631"],[126644,1,"\u0634"],[126645,1,"\u062A"],[126646,1,"\u062B"],[126647,1,"\u062E"],[126648,1,"\u0630"],[126649,1,"\u0636"],[126650,1,"\u0638"],[126651,1,"\u063A"],[[126652,126703],3],[[126704,126705],2],[[126706,126975],3],[[126976,127019],2],[[127020,127023],3],[[127024,127123],2],[[127124,127135],3],[[127136,127150],2],[[127151,127152],3],[[127153,127166],2],[127167,2],[127168,3],[[127169,127183],2],[127184,3],[[127185,127199],2],[[127200,127221],2],[[127222,127231],3],[127232,3],[127233,1,"0,"],[127234,1,"1,"],[127235,1,"2,"],[127236,1,"3,"],[127237,1,"4,"],[127238,1,"5,"],[127239,1,"6,"],[127240,1,"7,"],[127241,1,"8,"],[127242,1,"9,"],[[127243,127244],2],[[127245,127247],2],[127248,1,"(a)"],[127249,1,"(b)"],[127250,1,"(c)"],[127251,1,"(d)"],[127252,1,"(e)"],[127253,1,"(f)"],[127254,1,"(g)"],[127255,1,"(h)"],[127256,1,"(i)"],[127257,1,"(j)"],[127258,1,"(k)"],[127259,1,"(l)"],[127260,1,"(m)"],[127261,1,"(n)"],[127262,1,"(o)"],[127263,1,"(p)"],[127264,1,"(q)"],[127265,1,"(r)"],[127266,1,"(s)"],[127267,1,"(t)"],[127268,1,"(u)"],[127269,1,"(v)"],[127270,1,"(w)"],[127271,1,"(x)"],[127272,1,"(y)"],[127273,1,"(z)"],[127274,1,"\u3014s\u3015"],[127275,1,"c"],[127276,1,"r"],[127277,1,"cd"],[127278,1,"wz"],[127279,2],[127280,1,"a"],[127281,1,"b"],[127282,1,"c"],[127283,1,"d"],[127284,1,"e"],[127285,1,"f"],[127286,1,"g"],[127287,1,"h"],[127288,1,"i"],[127289,1,"j"],[127290,1,"k"],[127291,1,"l"],[127292,1,"m"],[127293,1,"n"],[127294,1,"o"],[127295,1,"p"],[127296,1,"q"],[127297,1,"r"],[127298,1,"s"],[127299,1,"t"],[127300,1,"u"],[127301,1,"v"],[127302,1,"w"],[127303,1,"x"],[127304,1,"y"],[127305,1,"z"],[127306,1,"hv"],[127307,1,"mv"],[127308,1,"sd"],[127309,1,"ss"],[127310,1,"ppv"],[127311,1,"wc"],[[127312,127318],2],[127319,2],[[127320,127326],2],[127327,2],[[127328,127337],2],[127338,1,"mc"],[127339,1,"md"],[127340,1,"mr"],[[127341,127343],2],[[127344,127352],2],[127353,2],[127354,2],[[127355,127356],2],[[127357,127358],2],[127359,2],[[127360,127369],2],[[127370,127373],2],[[127374,127375],2],[127376,1,"dj"],[[127377,127386],2],[[127387,127404],2],[127405,2],[[127406,127461],3],[[127462,127487],2],[127488,1,"\u307B\u304B"],[127489,1,"\u30B3\u30B3"],[127490,1,"\u30B5"],[[127491,127503],3],[127504,1,"\u624B"],[127505,1,"\u5B57"],[127506,1,"\u53CC"],[127507,1,"\u30C7"],[127508,1,"\u4E8C"],[127509,1,"\u591A"],[127510,1,"\u89E3"],[127511,1,"\u5929"],[127512,1,"\u4EA4"],[127513,1,"\u6620"],[127514,1,"\u7121"],[127515,1,"\u6599"],[127516,1,"\u524D"],[127517,1,"\u5F8C"],[127518,1,"\u518D"],[127519,1,"\u65B0"],[127520,1,"\u521D"],[127521,1,"\u7D42"],[127522,1,"\u751F"],[127523,1,"\u8CA9"],[127524,1,"\u58F0"],[127525,1,"\u5439"],[127526,1,"\u6F14"],[127527,1,"\u6295"],[127528,1,"\u6355"],[127529,1,"\u4E00"],[127530,1,"\u4E09"],[127531,1,"\u904A"],[127532,1,"\u5DE6"],[127533,1,"\u4E2D"],[127534,1,"\u53F3"],[127535,1,"\u6307"],[127536,1,"\u8D70"],[127537,1,"\u6253"],[127538,1,"\u7981"],[127539,1,"\u7A7A"],[127540,1,"\u5408"],[127541,1,"\u6E80"],[127542,1,"\u6709"],[127543,1,"\u6708"],[127544,1,"\u7533"],[127545,1,"\u5272"],[127546,1,"\u55B6"],[127547,1,"\u914D"],[[127548,127551],3],[127552,1,"\u3014\u672C\u3015"],[127553,1,"\u3014\u4E09\u3015"],[127554,1,"\u3014\u4E8C\u3015"],[127555,1,"\u3014\u5B89\u3015"],[127556,1,"\u3014\u70B9\u3015"],[127557,1,"\u3014\u6253\u3015"],[127558,1,"\u3014\u76D7\u3015"],[127559,1,"\u3014\u52DD\u3015"],[127560,1,"\u3014\u6557\u3015"],[[127561,127567],3],[127568,1,"\u5F97"],[127569,1,"\u53EF"],[[127570,127583],3],[[127584,127589],2],[[127590,127743],3],[[127744,127776],2],[[127777,127788],2],[[127789,127791],2],[[127792,127797],2],[127798,2],[[127799,127868],2],[127869,2],[[127870,127871],2],[[127872,127891],2],[[127892,127903],2],[[127904,127940],2],[127941,2],[[127942,127946],2],[[127947,127950],2],[[127951,127955],2],[[127956,127967],2],[[127968,127984],2],[[127985,127991],2],[[127992,127999],2],[[128e3,128062],2],[128063,2],[128064,2],[128065,2],[[128066,128247],2],[128248,2],[[128249,128252],2],[[128253,128254],2],[128255,2],[[128256,128317],2],[[128318,128319],2],[[128320,128323],2],[[128324,128330],2],[[128331,128335],2],[[128336,128359],2],[[128360,128377],2],[128378,2],[[128379,128419],2],[128420,2],[[128421,128506],2],[[128507,128511],2],[128512,2],[[128513,128528],2],[128529,2],[[128530,128532],2],[128533,2],[128534,2],[128535,2],[128536,2],[128537,2],[128538,2],[128539,2],[[128540,128542],2],[128543,2],[[128544,128549],2],[[128550,128551],2],[[128552,128555],2],[128556,2],[128557,2],[[128558,128559],2],[[128560,128563],2],[128564,2],[[128565,128576],2],[[128577,128578],2],[[128579,128580],2],[[128581,128591],2],[[128592,128639],2],[[128640,128709],2],[[128710,128719],2],[128720,2],[[128721,128722],2],[[128723,128724],2],[128725,2],[[128726,128727],2],[[128728,128731],3],[128732,2],[[128733,128735],2],[[128736,128748],2],[[128749,128751],3],[[128752,128755],2],[[128756,128758],2],[[128759,128760],2],[128761,2],[128762,2],[[128763,128764],2],[[128765,128767],3],[[128768,128883],2],[[128884,128886],2],[[128887,128890],3],[[128891,128895],2],[[128896,128980],2],[[128981,128984],2],[128985,2],[[128986,128991],3],[[128992,129003],2],[[129004,129007],3],[129008,2],[[129009,129023],3],[[129024,129035],2],[[129036,129039],3],[[129040,129095],2],[[129096,129103],3],[[129104,129113],2],[[129114,129119],3],[[129120,129159],2],[[129160,129167],3],[[129168,129197],2],[[129198,129199],3],[[129200,129201],2],[[129202,129211],2],[[129212,129215],3],[[129216,129217],2],[[129218,129279],3],[[129280,129291],2],[129292,2],[[129293,129295],2],[[129296,129304],2],[[129305,129310],2],[129311,2],[[129312,129319],2],[[129320,129327],2],[129328,2],[[129329,129330],2],[[129331,129342],2],[129343,2],[[129344,129355],2],[129356,2],[[129357,129359],2],[[129360,129374],2],[[129375,129387],2],[[129388,129392],2],[129393,2],[129394,2],[[129395,129398],2],[[129399,129400],2],[129401,2],[129402,2],[129403,2],[[129404,129407],2],[[129408,129412],2],[[129413,129425],2],[[129426,129431],2],[[129432,129442],2],[[129443,129444],2],[[129445,129450],2],[[129451,129453],2],[[129454,129455],2],[[129456,129465],2],[[129466,129471],2],[129472,2],[[129473,129474],2],[[129475,129482],2],[129483,2],[129484,2],[[129485,129487],2],[[129488,129510],2],[[129511,129535],2],[[129536,129619],2],[[129620,129631],3],[[129632,129645],2],[[129646,129647],3],[[129648,129651],2],[129652,2],[[129653,129655],2],[[129656,129658],2],[[129659,129660],2],[[129661,129663],3],[[129664,129666],2],[[129667,129670],2],[[129671,129672],2],[129673,2],[[129674,129678],3],[129679,2],[[129680,129685],2],[[129686,129704],2],[[129705,129708],2],[[129709,129711],2],[[129712,129718],2],[[129719,129722],2],[[129723,129725],2],[129726,2],[129727,2],[[129728,129730],2],[[129731,129733],2],[129734,2],[[129735,129741],3],[[129742,129743],2],[[129744,129750],2],[[129751,129753],2],[[129754,129755],2],[129756,2],[[129757,129758],3],[129759,2],[[129760,129767],2],[129768,2],[129769,2],[[129770,129775],3],[[129776,129782],2],[[129783,129784],2],[[129785,129791],3],[[129792,129938],2],[129939,3],[[129940,129994],2],[[129995,130031],2],[130032,1,"0"],[130033,1,"1"],[130034,1,"2"],[130035,1,"3"],[130036,1,"4"],[130037,1,"5"],[130038,1,"6"],[130039,1,"7"],[130040,1,"8"],[130041,1,"9"],[[130042,131069],3],[[131070,131071],3],[[131072,173782],2],[[173783,173789],2],[[173790,173791],2],[[173792,173823],3],[[173824,177972],2],[[177973,177976],2],[177977,2],[[177978,177983],3],[[177984,178205],2],[[178206,178207],3],[[178208,183969],2],[[183970,183983],3],[[183984,191456],2],[[191457,191471],3],[[191472,192093],2],[[192094,194559],3],[194560,1,"\u4E3D"],[194561,1,"\u4E38"],[194562,1,"\u4E41"],[194563,1,"\u{20122}"],[194564,1,"\u4F60"],[194565,1,"\u4FAE"],[194566,1,"\u4FBB"],[194567,1,"\u5002"],[194568,1,"\u507A"],[194569,1,"\u5099"],[194570,1,"\u50E7"],[194571,1,"\u50CF"],[194572,1,"\u349E"],[194573,1,"\u{2063A}"],[194574,1,"\u514D"],[194575,1,"\u5154"],[194576,1,"\u5164"],[194577,1,"\u5177"],[194578,1,"\u{2051C}"],[194579,1,"\u34B9"],[194580,1,"\u5167"],[194581,1,"\u518D"],[194582,1,"\u{2054B}"],[194583,1,"\u5197"],[194584,1,"\u51A4"],[194585,1,"\u4ECC"],[194586,1,"\u51AC"],[194587,1,"\u51B5"],[194588,1,"\u{291DF}"],[194589,1,"\u51F5"],[194590,1,"\u5203"],[194591,1,"\u34DF"],[194592,1,"\u523B"],[194593,1,"\u5246"],[194594,1,"\u5272"],[194595,1,"\u5277"],[194596,1,"\u3515"],[194597,1,"\u52C7"],[194598,1,"\u52C9"],[194599,1,"\u52E4"],[194600,1,"\u52FA"],[194601,1,"\u5305"],[194602,1,"\u5306"],[194603,1,"\u5317"],[194604,1,"\u5349"],[194605,1,"\u5351"],[194606,1,"\u535A"],[194607,1,"\u5373"],[194608,1,"\u537D"],[[194609,194611],1,"\u537F"],[194612,1,"\u{20A2C}"],[194613,1,"\u7070"],[194614,1,"\u53CA"],[194615,1,"\u53DF"],[194616,1,"\u{20B63}"],[194617,1,"\u53EB"],[194618,1,"\u53F1"],[194619,1,"\u5406"],[194620,1,"\u549E"],[194621,1,"\u5438"],[194622,1,"\u5448"],[194623,1,"\u5468"],[194624,1,"\u54A2"],[194625,1,"\u54F6"],[194626,1,"\u5510"],[194627,1,"\u5553"],[194628,1,"\u5563"],[[194629,194630],1,"\u5584"],[194631,1,"\u5599"],[194632,1,"\u55AB"],[194633,1,"\u55B3"],[194634,1,"\u55C2"],[194635,1,"\u5716"],[194636,1,"\u5606"],[194637,1,"\u5717"],[194638,1,"\u5651"],[194639,1,"\u5674"],[194640,1,"\u5207"],[194641,1,"\u58EE"],[194642,1,"\u57CE"],[194643,1,"\u57F4"],[194644,1,"\u580D"],[194645,1,"\u578B"],[194646,1,"\u5832"],[194647,1,"\u5831"],[194648,1,"\u58AC"],[194649,1,"\u{214E4}"],[194650,1,"\u58F2"],[194651,1,"\u58F7"],[194652,1,"\u5906"],[194653,1,"\u591A"],[194654,1,"\u5922"],[194655,1,"\u5962"],[194656,1,"\u{216A8}"],[194657,1,"\u{216EA}"],[194658,1,"\u59EC"],[194659,1,"\u5A1B"],[194660,1,"\u5A27"],[194661,1,"\u59D8"],[194662,1,"\u5A66"],[194663,1,"\u36EE"],[194664,1,"\u36FC"],[194665,1,"\u5B08"],[[194666,194667],1,"\u5B3E"],[194668,1,"\u{219C8}"],[194669,1,"\u5BC3"],[194670,1,"\u5BD8"],[194671,1,"\u5BE7"],[194672,1,"\u5BF3"],[194673,1,"\u{21B18}"],[194674,1,"\u5BFF"],[194675,1,"\u5C06"],[194676,1,"\u5F53"],[194677,1,"\u5C22"],[194678,1,"\u3781"],[194679,1,"\u5C60"],[194680,1,"\u5C6E"],[194681,1,"\u5CC0"],[194682,1,"\u5C8D"],[194683,1,"\u{21DE4}"],[194684,1,"\u5D43"],[194685,1,"\u{21DE6}"],[194686,1,"\u5D6E"],[194687,1,"\u5D6B"],[194688,1,"\u5D7C"],[194689,1,"\u5DE1"],[194690,1,"\u5DE2"],[194691,1,"\u382F"],[194692,1,"\u5DFD"],[194693,1,"\u5E28"],[194694,1,"\u5E3D"],[194695,1,"\u5E69"],[194696,1,"\u3862"],[194697,1,"\u{22183}"],[194698,1,"\u387C"],[194699,1,"\u5EB0"],[194700,1,"\u5EB3"],[194701,1,"\u5EB6"],[194702,1,"\u5ECA"],[194703,1,"\u{2A392}"],[194704,1,"\u5EFE"],[[194705,194706],1,"\u{22331}"],[194707,1,"\u8201"],[[194708,194709],1,"\u5F22"],[194710,1,"\u38C7"],[194711,1,"\u{232B8}"],[194712,1,"\u{261DA}"],[194713,1,"\u5F62"],[194714,1,"\u5F6B"],[194715,1,"\u38E3"],[194716,1,"\u5F9A"],[194717,1,"\u5FCD"],[194718,1,"\u5FD7"],[194719,1,"\u5FF9"],[194720,1,"\u6081"],[194721,1,"\u393A"],[194722,1,"\u391C"],[194723,1,"\u6094"],[194724,1,"\u{226D4}"],[194725,1,"\u60C7"],[194726,1,"\u6148"],[194727,1,"\u614C"],[194728,1,"\u614E"],[194729,1,"\u614C"],[194730,1,"\u617A"],[194731,1,"\u618E"],[194732,1,"\u61B2"],[194733,1,"\u61A4"],[194734,1,"\u61AF"],[194735,1,"\u61DE"],[194736,1,"\u61F2"],[194737,1,"\u61F6"],[194738,1,"\u6210"],[194739,1,"\u621B"],[194740,1,"\u625D"],[194741,1,"\u62B1"],[194742,1,"\u62D4"],[194743,1,"\u6350"],[194744,1,"\u{22B0C}"],[194745,1,"\u633D"],[194746,1,"\u62FC"],[194747,1,"\u6368"],[194748,1,"\u6383"],[194749,1,"\u63E4"],[194750,1,"\u{22BF1}"],[194751,1,"\u6422"],[194752,1,"\u63C5"],[194753,1,"\u63A9"],[194754,1,"\u3A2E"],[194755,1,"\u6469"],[194756,1,"\u647E"],[194757,1,"\u649D"],[194758,1,"\u6477"],[194759,1,"\u3A6C"],[194760,1,"\u654F"],[194761,1,"\u656C"],[194762,1,"\u{2300A}"],[194763,1,"\u65E3"],[194764,1,"\u66F8"],[194765,1,"\u6649"],[194766,1,"\u3B19"],[194767,1,"\u6691"],[194768,1,"\u3B08"],[194769,1,"\u3AE4"],[194770,1,"\u5192"],[194771,1,"\u5195"],[194772,1,"\u6700"],[194773,1,"\u669C"],[194774,1,"\u80AD"],[194775,1,"\u43D9"],[194776,1,"\u6717"],[194777,1,"\u671B"],[194778,1,"\u6721"],[194779,1,"\u675E"],[194780,1,"\u6753"],[194781,1,"\u{233C3}"],[194782,1,"\u3B49"],[194783,1,"\u67FA"],[194784,1,"\u6785"],[194785,1,"\u6852"],[194786,1,"\u6885"],[194787,1,"\u{2346D}"],[194788,1,"\u688E"],[194789,1,"\u681F"],[194790,1,"\u6914"],[194791,1,"\u3B9D"],[194792,1,"\u6942"],[194793,1,"\u69A3"],[194794,1,"\u69EA"],[194795,1,"\u6AA8"],[194796,1,"\u{236A3}"],[194797,1,"\u6ADB"],[194798,1,"\u3C18"],[194799,1,"\u6B21"],[194800,1,"\u{238A7}"],[194801,1,"\u6B54"],[194802,1,"\u3C4E"],[194803,1,"\u6B72"],[194804,1,"\u6B9F"],[194805,1,"\u6BBA"],[194806,1,"\u6BBB"],[194807,1,"\u{23A8D}"],[194808,1,"\u{21D0B}"],[194809,1,"\u{23AFA}"],[194810,1,"\u6C4E"],[194811,1,"\u{23CBC}"],[194812,1,"\u6CBF"],[194813,1,"\u6CCD"],[194814,1,"\u6C67"],[194815,1,"\u6D16"],[194816,1,"\u6D3E"],[194817,1,"\u6D77"],[194818,1,"\u6D41"],[194819,1,"\u6D69"],[194820,1,"\u6D78"],[194821,1,"\u6D85"],[194822,1,"\u{23D1E}"],[194823,1,"\u6D34"],[194824,1,"\u6E2F"],[194825,1,"\u6E6E"],[194826,1,"\u3D33"],[194827,1,"\u6ECB"],[194828,1,"\u6EC7"],[194829,1,"\u{23ED1}"],[194830,1,"\u6DF9"],[194831,1,"\u6F6E"],[194832,1,"\u{23F5E}"],[194833,1,"\u{23F8E}"],[194834,1,"\u6FC6"],[194835,1,"\u7039"],[194836,1,"\u701E"],[194837,1,"\u701B"],[194838,1,"\u3D96"],[194839,1,"\u704A"],[194840,1,"\u707D"],[194841,1,"\u7077"],[194842,1,"\u70AD"],[194843,1,"\u{20525}"],[194844,1,"\u7145"],[194845,1,"\u{24263}"],[194846,1,"\u719C"],[194847,1,"\u{243AB}"],[194848,1,"\u7228"],[194849,1,"\u7235"],[194850,1,"\u7250"],[194851,1,"\u{24608}"],[194852,1,"\u7280"],[194853,1,"\u7295"],[194854,1,"\u{24735}"],[194855,1,"\u{24814}"],[194856,1,"\u737A"],[194857,1,"\u738B"],[194858,1,"\u3EAC"],[194859,1,"\u73A5"],[[194860,194861],1,"\u3EB8"],[194862,1,"\u7447"],[194863,1,"\u745C"],[194864,1,"\u7471"],[194865,1,"\u7485"],[194866,1,"\u74CA"],[194867,1,"\u3F1B"],[194868,1,"\u7524"],[194869,1,"\u{24C36}"],[194870,1,"\u753E"],[194871,1,"\u{24C92}"],[194872,1,"\u7570"],[194873,1,"\u{2219F}"],[194874,1,"\u7610"],[194875,1,"\u{24FA1}"],[194876,1,"\u{24FB8}"],[194877,1,"\u{25044}"],[194878,1,"\u3FFC"],[194879,1,"\u4008"],[194880,1,"\u76F4"],[194881,1,"\u{250F3}"],[194882,1,"\u{250F2}"],[194883,1,"\u{25119}"],[194884,1,"\u{25133}"],[194885,1,"\u771E"],[[194886,194887],1,"\u771F"],[194888,1,"\u774A"],[194889,1,"\u4039"],[194890,1,"\u778B"],[194891,1,"\u4046"],[194892,1,"\u4096"],[194893,1,"\u{2541D}"],[194894,1,"\u784E"],[194895,1,"\u788C"],[194896,1,"\u78CC"],[194897,1,"\u40E3"],[194898,1,"\u{25626}"],[194899,1,"\u7956"],[194900,1,"\u{2569A}"],[194901,1,"\u{256C5}"],[194902,1,"\u798F"],[194903,1,"\u79EB"],[194904,1,"\u412F"],[194905,1,"\u7A40"],[194906,1,"\u7A4A"],[194907,1,"\u7A4F"],[194908,1,"\u{2597C}"],[[194909,194910],1,"\u{25AA7}"],[194911,1,"\u7AEE"],[194912,1,"\u4202"],[194913,1,"\u{25BAB}"],[194914,1,"\u7BC6"],[194915,1,"\u7BC9"],[194916,1,"\u4227"],[194917,1,"\u{25C80}"],[194918,1,"\u7CD2"],[194919,1,"\u42A0"],[194920,1,"\u7CE8"],[194921,1,"\u7CE3"],[194922,1,"\u7D00"],[194923,1,"\u{25F86}"],[194924,1,"\u7D63"],[194925,1,"\u4301"],[194926,1,"\u7DC7"],[194927,1,"\u7E02"],[194928,1,"\u7E45"],[194929,1,"\u4334"],[194930,1,"\u{26228}"],[194931,1,"\u{26247}"],[194932,1,"\u4359"],[194933,1,"\u{262D9}"],[194934,1,"\u7F7A"],[194935,1,"\u{2633E}"],[194936,1,"\u7F95"],[194937,1,"\u7FFA"],[194938,1,"\u8005"],[194939,1,"\u{264DA}"],[194940,1,"\u{26523}"],[194941,1,"\u8060"],[194942,1,"\u{265A8}"],[194943,1,"\u8070"],[194944,1,"\u{2335F}"],[194945,1,"\u43D5"],[194946,1,"\u80B2"],[194947,1,"\u8103"],[194948,1,"\u440B"],[194949,1,"\u813E"],[194950,1,"\u5AB5"],[194951,1,"\u{267A7}"],[194952,1,"\u{267B5}"],[194953,1,"\u{23393}"],[194954,1,"\u{2339C}"],[194955,1,"\u8201"],[194956,1,"\u8204"],[194957,1,"\u8F9E"],[194958,1,"\u446B"],[194959,1,"\u8291"],[194960,1,"\u828B"],[194961,1,"\u829D"],[194962,1,"\u52B3"],[194963,1,"\u82B1"],[194964,1,"\u82B3"],[194965,1,"\u82BD"],[194966,1,"\u82E6"],[194967,1,"\u{26B3C}"],[194968,1,"\u82E5"],[194969,1,"\u831D"],[194970,1,"\u8363"],[194971,1,"\u83AD"],[194972,1,"\u8323"],[194973,1,"\u83BD"],[194974,1,"\u83E7"],[194975,1,"\u8457"],[194976,1,"\u8353"],[194977,1,"\u83CA"],[194978,1,"\u83CC"],[194979,1,"\u83DC"],[194980,1,"\u{26C36}"],[194981,1,"\u{26D6B}"],[194982,1,"\u{26CD5}"],[194983,1,"\u452B"],[194984,1,"\u84F1"],[194985,1,"\u84F3"],[194986,1,"\u8516"],[194987,1,"\u{273CA}"],[194988,1,"\u8564"],[194989,1,"\u{26F2C}"],[194990,1,"\u455D"],[194991,1,"\u4561"],[194992,1,"\u{26FB1}"],[194993,1,"\u{270D2}"],[194994,1,"\u456B"],[194995,1,"\u8650"],[194996,1,"\u865C"],[194997,1,"\u8667"],[194998,1,"\u8669"],[194999,1,"\u86A9"],[195e3,1,"\u8688"],[195001,1,"\u870E"],[195002,1,"\u86E2"],[195003,1,"\u8779"],[195004,1,"\u8728"],[195005,1,"\u876B"],[195006,1,"\u8786"],[195007,1,"\u45D7"],[195008,1,"\u87E1"],[195009,1,"\u8801"],[195010,1,"\u45F9"],[195011,1,"\u8860"],[195012,1,"\u8863"],[195013,1,"\u{27667}"],[195014,1,"\u88D7"],[195015,1,"\u88DE"],[195016,1,"\u4635"],[195017,1,"\u88FA"],[195018,1,"\u34BB"],[195019,1,"\u{278AE}"],[195020,1,"\u{27966}"],[195021,1,"\u46BE"],[195022,1,"\u46C7"],[195023,1,"\u8AA0"],[195024,1,"\u8AED"],[195025,1,"\u8B8A"],[195026,1,"\u8C55"],[195027,1,"\u{27CA8}"],[195028,1,"\u8CAB"],[195029,1,"\u8CC1"],[195030,1,"\u8D1B"],[195031,1,"\u8D77"],[195032,1,"\u{27F2F}"],[195033,1,"\u{20804}"],[195034,1,"\u8DCB"],[195035,1,"\u8DBC"],[195036,1,"\u8DF0"],[195037,1,"\u{208DE}"],[195038,1,"\u8ED4"],[195039,1,"\u8F38"],[195040,1,"\u{285D2}"],[195041,1,"\u{285ED}"],[195042,1,"\u9094"],[195043,1,"\u90F1"],[195044,1,"\u9111"],[195045,1,"\u{2872E}"],[195046,1,"\u911B"],[195047,1,"\u9238"],[195048,1,"\u92D7"],[195049,1,"\u92D8"],[195050,1,"\u927C"],[195051,1,"\u93F9"],[195052,1,"\u9415"],[195053,1,"\u{28BFA}"],[195054,1,"\u958B"],[195055,1,"\u4995"],[195056,1,"\u95B7"],[195057,1,"\u{28D77}"],[195058,1,"\u49E6"],[195059,1,"\u96C3"],[195060,1,"\u5DB2"],[195061,1,"\u9723"],[195062,1,"\u{29145}"],[195063,1,"\u{2921A}"],[195064,1,"\u4A6E"],[195065,1,"\u4A76"],[195066,1,"\u97E0"],[195067,1,"\u{2940A}"],[195068,1,"\u4AB2"],[195069,1,"\u{29496}"],[[195070,195071],1,"\u980B"],[195072,1,"\u9829"],[195073,1,"\u{295B6}"],[195074,1,"\u98E2"],[195075,1,"\u4B33"],[195076,1,"\u9929"],[195077,1,"\u99A7"],[195078,1,"\u99C2"],[195079,1,"\u99FE"],[195080,1,"\u4BCE"],[195081,1,"\u{29B30}"],[195082,1,"\u9B12"],[195083,1,"\u9C40"],[195084,1,"\u9CFD"],[195085,1,"\u4CCE"],[195086,1,"\u4CED"],[195087,1,"\u9D67"],[195088,1,"\u{2A0CE}"],[195089,1,"\u4CF8"],[195090,1,"\u{2A105}"],[195091,1,"\u{2A20E}"],[195092,1,"\u{2A291}"],[195093,1,"\u9EBB"],[195094,1,"\u4D56"],[195095,1,"\u9EF9"],[195096,1,"\u9EFE"],[195097,1,"\u9F05"],[195098,1,"\u9F0F"],[195099,1,"\u9F16"],[195100,1,"\u9F3B"],[195101,1,"\u{2A600}"],[[195102,196605],3],[[196606,196607],3],[[196608,201546],2],[[201547,201551],3],[[201552,205743],2],[[205744,262141],3],[[262142,262143],3],[[262144,327677],3],[[327678,327679],3],[[327680,393213],3],[[393214,393215],3],[[393216,458749],3],[[458750,458751],3],[[458752,524285],3],[[524286,524287],3],[[524288,589821],3],[[589822,589823],3],[[589824,655357],3],[[655358,655359],3],[[655360,720893],3],[[720894,720895],3],[[720896,786429],3],[[786430,786431],3],[[786432,851965],3],[[851966,851967],3],[[851968,917501],3],[[917502,917503],3],[917504,3],[917505,3],[[917506,917535],3],[[917536,917631],3],[[917632,917759],3],[[917760,917999],7],[[918e3,983037],3],[[983038,983039],3],[[983040,1048573],3],[[1048574,1048575],3],[[1048576,1114109],3],[[1114110,1114111],3]]});var v$=m((JNe,C$)=>{"use strict";C$.exports.STATUS_MAPPING={mapped:1,valid:2,disallowed:3,deviation:6,ignored:7}});var P$=m((YNe,M$)=>{"use strict";var dC=w$(),Ns=A$(),x$=O$(),{STATUS_MAPPING:ja}=v$();function pC(t){return/[^\x00-\x7F]/u.test(t)}function T$(t){let e=0,r=x$.length-1;for(;e<=r;){let n=Math.floor((e+r)/2),s=x$[n],i=Array.isArray(s[0])?s[0][0]:s[0],o=Array.isArray(s[0])?s[0][1]:s[0];if(i<=t&&o>=t)return s.slice(1);i>t?r=n-1:e=n+1}return null}function m2e(t,{transitionalProcessing:e}){let r="";for(let n of t){let[s,i]=T$(n.codePointAt(0));switch(s){case ja.disallowed:r+=n;break;case ja.ignored:break;case ja.mapped:e&&n==="\u1E9E"?r+="ss":r+=i;break;case ja.deviation:e?r+=i:r+=n;break;case ja.valid:r+=n;break}}return r}function y2e(t,{checkHyphens:e,checkBidi:r,checkJoiners:n,transitionalProcessing:s,useSTD3ASCIIRules:i,isBidi:o}){if(t.length===0)return!0;if(t.normalize("NFC")!==t)return!1;let a=Array.from(t);if(e&&(a[2]==="-"&&a[3]==="-"||t.startsWith("-")||t.endsWith("-"))||!e&&t.startsWith("xn--")||t.includes(".")||Ns.combiningMarks.test(a[0]))return!1;for(let u of a){let c=u.codePointAt(0),[l]=T$(c);if(s){if(l!==ja.valid)return!1}else if(l!==ja.valid&&l!==ja.deviation)return!1;if(i&&c<=127&&!/^(?:[a-z]|[0-9]|-)$/u.test(u))return!1}if(n){let u=0;for(let[c,l]of a.entries())if(l==="\u200C"||l==="\u200D"){if(c>0){if(Ns.combiningClassVirama.test(a[c-1]))continue;if(l==="\u200C"){let p=a.indexOf("\u200C",c+1),d=p<0?a.slice(u):a.slice(u,p);if(Ns.validZWNJ.test(d.join(""))){u=c+1;continue}}}return!1}}if(r&&o){let u;if(Ns.bidiS1LTR.test(a[0]))u=!1;else if(Ns.bidiS1RTL.test(a[0]))u=!0;else return!1;if(u){if(!Ns.bidiS2.test(t)||!Ns.bidiS3.test(t)||Ns.bidiS4EN.test(t)&&Ns.bidiS4AN.test(t))return!1}else if(!Ns.bidiS5.test(t)||!Ns.bidiS6.test(t))return!1}return!0}function g2e(t){let e=t.map(r=>{if(r.startsWith("xn--"))try{return dC.decode(r.substring(4))}catch{return""}return r}).join(".");return Ns.bidiDomain.test(e)}function D$(t,e){let r=m2e(t,e);r=r.normalize("NFC");let n=r.split("."),s=g2e(n),i=!1;for(let[o,a]of n.entries()){let u=a,c=e.transitionalProcessing;if(u.startsWith("xn--")){if(pC(u)){i=!0;continue}try{u=dC.decode(u.substring(4))}catch{if(!e.ignoreInvalidPunycode){i=!0;continue}}n[o]=u,(u===""||!pC(u))&&(i=!0),c=!1}if(i)continue;y2e(u,{...e,transitionalProcessing:c,isBidi:s})||(i=!0)}return{string:n.join("."),error:i}}function _2e(t,{checkHyphens:e=!1,checkBidi:r=!1,checkJoiners:n=!1,useSTD3ASCIIRules:s=!1,verifyDNSLength:i=!1,transitionalProcessing:o=!1,ignoreInvalidPunycode:a=!1}={}){let u=D$(t,{checkHyphens:e,checkBidi:r,checkJoiners:n,useSTD3ASCIIRules:s,transitionalProcessing:o,ignoreInvalidPunycode:a}),c=u.string.split(".");if(c=c.map(l=>{if(pC(l))try{return`xn--${dC.encode(l)}`}catch{u.error=!0}return l}),i){let l=c.join(".").length;(l>253||l===0)&&(u.error=!0);for(let p=0;p<c.length;++p)if(c[p].length>63||c[p].length===0){u.error=!0;break}}return u.error?null:c.join(".")}function E2e(t,{checkHyphens:e=!1,checkBidi:r=!1,checkJoiners:n=!1,useSTD3ASCIIRules:s=!1,transitionalProcessing:i=!1,ignoreInvalidPunycode:o=!1}={}){let a=D$(t,{checkHyphens:e,checkBidi:r,checkJoiners:n,useSTD3ASCIIRules:s,transitionalProcessing:i,ignoreInvalidPunycode:o});return{domain:a.string,error:a.error}}M$.exports={toASCII:_2e,toUnicode:E2e}});var fC=m((QNe,I$)=>{"use strict";function hC(t){return t>=48&&t<=57}function B$(t){return t>=65&&t<=90||t>=97&&t<=122}function b2e(t){return B$(t)||hC(t)}function w2e(t){return hC(t)||t>=65&&t<=70||t>=97&&t<=102}I$.exports={isASCIIDigit:hC,isASCIIAlpha:B$,isASCIIAlphanumeric:b2e,isASCIIHex:w2e}});var Lg=m((XNe,N$)=>{"use strict";var S2e=new TextEncoder,A2e=new TextDecoder("utf-8",{ignoreBOM:!0});function O2e(t){return S2e.encode(t)}function C2e(t){return A2e.decode(t)}N$.exports={utf8Encode:O2e,utf8DecodeWithoutBOM:C2e}});var Ug=m((ZNe,L$)=>{"use strict";var{isASCIIHex:k$}=fC(),{utf8Encode:R$}=Lg();function Ie(t){return t.codePointAt(0)}function v2e(t){let e=t.toString(16).toUpperCase();return e.length===1&&(e=`0${e}`),`%${e}`}function F$(t){let e=new Uint8Array(t.byteLength),r=0;for(let n=0;n<t.byteLength;++n){let s=t[n];if(s!==37)e[r++]=s;else if(s===37&&(!k$(t[n+1])||!k$(t[n+2])))e[r++]=s;else{let i=parseInt(String.fromCodePoint(t[n+1],t[n+2]),16);e[r++]=i,n+=2}}return e.slice(0,r)}function x2e(t){let e=R$(t);return F$(e)}function mC(t){return t<=31||t>126}var T2e=new Set([Ie(" "),Ie('"'),Ie("<"),Ie(">"),Ie("`")]);function D2e(t){return mC(t)||T2e.has(t)}var M2e=new Set([Ie(" "),Ie('"'),Ie("#"),Ie("<"),Ie(">")]);function yC(t){return mC(t)||M2e.has(t)}function P2e(t){return yC(t)||t===Ie("'")}var B2e=new Set([Ie("?"),Ie("`"),Ie("{"),Ie("}"),Ie("^")]);function $$(t){return yC(t)||B2e.has(t)}var I2e=new Set([Ie("/"),Ie(":"),Ie(";"),Ie("="),Ie("@"),Ie("["),Ie("\\"),Ie("]"),Ie("|")]);function q$(t){return $$(t)||I2e.has(t)}var N2e=new Set([Ie("$"),Ie("%"),Ie("&"),Ie("+"),Ie(",")]);function k2e(t){return q$(t)||N2e.has(t)}var R2e=new Set([Ie("!"),Ie("'"),Ie("("),Ie(")"),Ie("~")]);function F2e(t){return k2e(t)||R2e.has(t)}function j$(t,e){let r=R$(t),n="";for(let s of r)e(s)?n+=v2e(s):n+=String.fromCharCode(s);return n}function $2e(t,e){return j$(String.fromCodePoint(t),e)}function q2e(t,e,r=!1){let n="";for(let s of t)r&&s===" "?n+="+":n+=j$(s,e);return n}L$.exports={isC0ControlPercentEncode:mC,isFragmentPercentEncode:D2e,isQueryPercentEncode:yC,isSpecialQueryPercentEncode:P2e,isPathPercentEncode:$$,isUserinfoPercentEncode:q$,isURLEncodedPercentEncode:F2e,percentDecodeString:x2e,percentDecodeBytes:F$,utf8PercentEncodeString:q2e,utf8PercentEncodeCodePoint:$2e}});var SC=m((eke,gn)=>{"use strict";var j2e=P$(),Br=fC(),{utf8DecodeWithoutBOM:L2e}=Lg(),{percentDecodeString:U2e,utf8PercentEncodeCodePoint:Wg,utf8PercentEncodeString:zg,isC0ControlPercentEncode:z$,isFragmentPercentEncode:V2e,isQueryPercentEncode:W2e,isSpecialQueryPercentEncode:z2e,isPathPercentEncode:K2e,isUserinfoPercentEncode:EC}=Ug();function V(t){return t.codePointAt(0)}var K$={ftp:21,file:null,http:80,https:443,ws:80,wss:443},_e=Symbol("failure");function U$(t){return[...t].length}function V$(t,e){let r=t[e];return isNaN(r)?void 0:String.fromCodePoint(r)}function W$(t){return t==="."||t.toLowerCase()==="%2e"}function H2e(t){return t=t.toLowerCase(),t===".."||t==="%2e."||t===".%2e"||t==="%2e%2e"}function G2e(t,e){return Br.isASCIIAlpha(t)&&(e===V(":")||e===V("|"))}function H$(t){return t.length===2&&Br.isASCIIAlpha(t.codePointAt(0))&&(t[1]===":"||t[1]==="|")}function J2e(t){return t.length===2&&Br.isASCIIAlpha(t.codePointAt(0))&&t[1]===":"}function G$(t){return t.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|<|>|\?|@|\[|\\|\]|\^|\|/u)!==-1}function Y2e(t){return G$(t)||t.search(/[\u0000-\u001F]|%|\u007F/u)!==-1}function Vg(t){return K$[t]!==void 0}function Pr(t){return Vg(t.scheme)}function gC(t){return!Vg(t.scheme)}function J$(t){return K$[t]}function Y$(t){if(t==="")return _e;let e=10;if(t.length>=2&&t.charAt(0)==="0"&&t.charAt(1).toLowerCase()==="x"?(t=t.substring(2),e=16):t.length>=2&&t.charAt(0)==="0"&&(t=t.substring(1),e=8),t==="")return 0;let r=/[^0-7]/u;return e===10&&(r=/[^0-9]/u),e===16&&(r=/[^0-9A-Fa-f]/u),r.test(t)?_e:parseInt(t,e)}function Q2e(t){let e=t.split(".");if(e[e.length-1]===""&&e.length>1&&e.pop(),e.length>4)return _e;let r=[];for(let i of e){let o=Y$(i);if(o===_e)return _e;r.push(o)}for(let i=0;i<r.length-1;++i)if(r[i]>255)return _e;if(r[r.length-1]>=256**(5-r.length))return _e;let n=r.pop(),s=0;for(let i of r)n+=i*256**(3-s),++s;return n}function X2e(t){let e="",r=t;for(let n=1;n<=4;++n)e=String(r%256)+e,n!==4&&(e=`.${e}`),r=Math.floor(r/256);return e}function Z2e(t){let e=[0,0,0,0,0,0,0,0],r=0,n=null,s=0;if(t=Array.from(t,i=>i.codePointAt(0)),t[s]===V(":")){if(t[s+1]!==V(":"))return _e;s+=2,++r,n=r}for(;s<t.length;){if(r===8)return _e;if(t[s]===V(":")){if(n!==null)return _e;++s,++r,n=r;continue}let i=0,o=0;for(;o<4&&Br.isASCIIHex(t[s]);)i=i*16+parseInt(V$(t,s),16),++s,++o;if(t[s]===V(".")){if(o===0||(s-=o,r>6))return _e;let a=0;for(;t[s]!==void 0;){let u=null;if(a>0)if(t[s]===V(".")&&a<4)++s;else return _e;if(!Br.isASCIIDigit(t[s]))return _e;for(;Br.isASCIIDigit(t[s]);){let c=parseInt(V$(t,s));if(u===null)u=c;else{if(u===0)return _e;u=u*10+c}if(u>255)return _e;++s}e[r]=e[r]*256+u,++a,(a===2||a===4)&&++r}if(a!==4)return _e;break}else if(t[s]===V(":")){if(++s,t[s]===void 0)return _e}else if(t[s]!==void 0)return _e;e[r]=i,++r}if(n!==null){let i=r-n;for(r=7;r!==0&&i>0;){let o=e[n+i-1];e[n+i-1]=e[r],e[r]=o,--r,--i}}else if(n===null&&r!==8)return _e;return e}function e_e(t){let e="",r=n_e(t),n=!1;for(let s=0;s<=7;++s)if(!(n&&t[s]===0)){if(n&&(n=!1),r===s){e+=s===0?"::":":",n=!0;continue}e+=t[s].toString(16),s!==7&&(e+=":")}return e}function _C(t,e=!1){if(t[0]==="[")return t[t.length-1]!=="]"?_e:Z2e(t.substring(1,t.length-1));if(e)return r_e(t);let r=L2e(U2e(t)),n=s_e(r);return n===_e?_e:t_e(n)?Q2e(n):n}function t_e(t){let e=t.split(".");if(e[e.length-1]===""){if(e.length===1)return!1;e.pop()}let r=e[e.length-1];return!!(Y$(r)!==_e||/^[0-9]+$/u.test(r))}function r_e(t){return G$(t)?_e:zg(t,z$)}function n_e(t){let e=null,r=1,n=null,s=0;for(let i=0;i<t.length;++i)t[i]!==0?(s>r&&(e=n,r=s),n=null,s=0):(n===null&&(n=i),++s);return s>r?n:e}function bC(t){return typeof t=="number"?X2e(t):t instanceof Array?`[${e_e(t)}]`:t}function s_e(t,e=!1){let r=j2e.toASCII(t,{checkHyphens:e,checkBidi:!0,checkJoiners:!0,useSTD3ASCIIRules:e,transitionalProcessing:!1,verifyDNSLength:e,ignoreInvalidPunycode:!1});return r===null||!e&&(r===""||Y2e(r))?_e:r}function i_e(t){let e=0,r=t.length;for(;e<r&&!(t.charCodeAt(e)>32);++e);for(;r>e&&!(t.charCodeAt(r-1)>32);--r);return t.substring(e,r)}function o_e(t){return t.replace(/\u0009|\u000A|\u000D/ug,"")}function Q$(t){let{path:e}=t;e.length!==0&&(t.scheme==="file"&&e.length===1&&u_e(e[0])||e.pop())}function X$(t){return t.username!==""||t.password!==""}function a_e(t){return t.host===null||t.host===""||t.scheme==="file"}function Zd(t){return typeof t.path=="string"}function u_e(t){return/^[A-Za-z]:$/u.test(t)}function It(t,e,r,n,s){if(this.pointer=0,this.input=t,this.base=e||null,this.encodingOverride=r||"utf-8",this.stateOverride=s,this.url=n,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null};let o=i_e(this.input);o!==this.input&&(this.parseError=!0),this.input=o}let i=o_e(this.input);for(i!==this.input&&(this.parseError=!0),this.input=i,this.state=s||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=Array.from(this.input,o=>o.codePointAt(0));this.pointer<=this.input.length;++this.pointer){let o=this.input[this.pointer],a=isNaN(o)?void 0:String.fromCodePoint(o),u=this[`parse ${this.state}`](o,a);if(u){if(u===_e){this.failure=!0;break}}else break}}It.prototype["parse scheme start"]=function(e,r){if(Br.isASCIIAlpha(e))this.buffer+=r.toLowerCase(),this.state="scheme";else if(!this.stateOverride)this.state="no scheme",--this.pointer;else return this.parseError=!0,_e;return!0};It.prototype["parse scheme"]=function(e,r){if(Br.isASCIIAlphanumeric(e)||e===V("+")||e===V("-")||e===V("."))this.buffer+=r.toLowerCase();else if(e===V(":")){if(this.stateOverride&&(Pr(this.url)&&!Vg(this.buffer)||!Pr(this.url)&&Vg(this.buffer)||(X$(this.url)||this.url.port!==null)&&this.buffer==="file"||this.url.scheme==="file"&&this.url.host===""))return!1;if(this.url.scheme=this.buffer,this.stateOverride)return this.url.port===J$(this.url.scheme)&&(this.url.port=null),!1;this.buffer="",this.url.scheme==="file"?((this.input[this.pointer+1]!==V("/")||this.input[this.pointer+2]!==V("/"))&&(this.parseError=!0),this.state="file"):Pr(this.url)&&this.base!==null&&this.base.scheme===this.url.scheme?this.state="special relative or authority":Pr(this.url)?this.state="special authority slashes":this.input[this.pointer+1]===V("/")?(this.state="path or authority",++this.pointer):(this.url.path="",this.state="opaque path")}else if(!this.stateOverride)this.buffer="",this.state="no scheme",this.pointer=-1;else return this.parseError=!0,_e;return!0};It.prototype["parse no scheme"]=function(e){return this.base===null||Zd(this.base)&&e!==V("#")?_e:(Zd(this.base)&&e===V("#")?(this.url.scheme=this.base.scheme,this.url.path=this.base.path,this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):this.base.scheme==="file"?(this.state="file",--this.pointer):(this.state="relative",--this.pointer),!0)};It.prototype["parse special relative or authority"]=function(e){return e===V("/")&&this.input[this.pointer+1]===V("/")?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="relative",--this.pointer),!0};It.prototype["parse path or authority"]=function(e){return e===V("/")?this.state="authority":(this.state="path",--this.pointer),!0};It.prototype["parse relative"]=function(e){return this.url.scheme=this.base.scheme,e===V("/")?this.state="relative slash":Pr(this.url)&&e===V("\\")?(this.parseError=!0,this.state="relative slash"):(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,e===V("?")?(this.url.query="",this.state="query"):e===V("#")?(this.url.fragment="",this.state="fragment"):isNaN(e)||(this.url.query=null,this.url.path.pop(),this.state="path",--this.pointer)),!0};It.prototype["parse relative slash"]=function(e){return Pr(this.url)&&(e===V("/")||e===V("\\"))?(e===V("\\")&&(this.parseError=!0),this.state="special authority ignore slashes"):e===V("/")?this.state="authority":(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer),!0};It.prototype["parse special authority slashes"]=function(e){return e===V("/")&&this.input[this.pointer+1]===V("/")?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="special authority ignore slashes",--this.pointer),!0};It.prototype["parse special authority ignore slashes"]=function(e){return e!==V("/")&&e!==V("\\")?(this.state="authority",--this.pointer):this.parseError=!0,!0};It.prototype["parse authority"]=function(e,r){if(e===V("@")){this.parseError=!0,this.atFlag&&(this.buffer=`%40${this.buffer}`),this.atFlag=!0;let n=U$(this.buffer);for(let s=0;s<n;++s){let i=this.buffer.codePointAt(s);if(i===V(":")&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}let o=Wg(i,EC);this.passwordTokenSeenFlag?this.url.password+=o:this.url.username+=o}this.buffer=""}else if(isNaN(e)||e===V("/")||e===V("?")||e===V("#")||Pr(this.url)&&e===V("\\")){if(this.atFlag&&this.buffer==="")return this.parseError=!0,_e;this.pointer-=U$(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=r;return!0};It.prototype["parse hostname"]=It.prototype["parse host"]=function(e,r){if(this.stateOverride&&this.url.scheme==="file")--this.pointer,this.state="file host";else if(e===V(":")&&!this.arrFlag){if(this.buffer==="")return this.parseError=!0,_e;if(this.stateOverride==="hostname")return!1;let n=_C(this.buffer,gC(this.url));if(n===_e)return _e;this.url.host=n,this.buffer="",this.state="port"}else if(isNaN(e)||e===V("/")||e===V("?")||e===V("#")||Pr(this.url)&&e===V("\\")){if(--this.pointer,Pr(this.url)&&this.buffer==="")return this.parseError=!0,_e;if(this.stateOverride&&this.buffer===""&&(X$(this.url)||this.url.port!==null))return this.parseError=!0,!1;let n=_C(this.buffer,gC(this.url));if(n===_e)return _e;if(this.url.host=n,this.buffer="",this.state="path start",this.stateOverride)return!1}else e===V("[")?this.arrFlag=!0:e===V("]")&&(this.arrFlag=!1),this.buffer+=r;return!0};It.prototype["parse port"]=function(e,r){if(Br.isASCIIDigit(e))this.buffer+=r;else if(isNaN(e)||e===V("/")||e===V("?")||e===V("#")||Pr(this.url)&&e===V("\\")||this.stateOverride){if(this.buffer!==""){let n=parseInt(this.buffer);if(n>2**16-1)return this.parseError=!0,_e;this.url.port=n===J$(this.url.scheme)?null:n,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}else return this.parseError=!0,_e;return!0};var c_e=new Set([V("/"),V("\\"),V("?"),V("#")]);function Z$(t,e){let r=t.length-e;return r>=2&&G2e(t[e],t[e+1])&&(r===2||c_e.has(t[e+2]))}It.prototype["parse file"]=function(e){return this.url.scheme="file",this.url.host="",e===V("/")||e===V("\\")?(e===V("\\")&&(this.parseError=!0),this.state="file slash"):this.base!==null&&this.base.scheme==="file"?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,e===V("?")?(this.url.query="",this.state="query"):e===V("#")?(this.url.fragment="",this.state="fragment"):isNaN(e)||(this.url.query=null,Z$(this.input,this.pointer)?(this.parseError=!0,this.url.path=[]):Q$(this.url),this.state="path",--this.pointer)):(this.state="path",--this.pointer),!0};It.prototype["parse file slash"]=function(e){return e===V("/")||e===V("\\")?(e===V("\\")&&(this.parseError=!0),this.state="file host"):(this.base!==null&&this.base.scheme==="file"&&(!Z$(this.input,this.pointer)&&J2e(this.base.path[0])&&this.url.path.push(this.base.path[0]),this.url.host=this.base.host),this.state="path",--this.pointer),!0};It.prototype["parse file host"]=function(e,r){if(isNaN(e)||e===V("/")||e===V("\\")||e===V("?")||e===V("#"))if(--this.pointer,!this.stateOverride&&H$(this.buffer))this.parseError=!0,this.state="path";else if(this.buffer===""){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let n=_C(this.buffer,gC(this.url));if(n===_e)return _e;if(n==="localhost"&&(n=""),this.url.host=n,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=r;return!0};It.prototype["parse path start"]=function(e){return Pr(this.url)?(e===V("\\")&&(this.parseError=!0),this.state="path",e!==V("/")&&e!==V("\\")&&--this.pointer):!this.stateOverride&&e===V("?")?(this.url.query="",this.state="query"):!this.stateOverride&&e===V("#")?(this.url.fragment="",this.state="fragment"):e!==void 0?(this.state="path",e!==V("/")&&--this.pointer):this.stateOverride&&this.url.host===null&&this.url.path.push(""),!0};It.prototype["parse path"]=function(e){return isNaN(e)||e===V("/")||Pr(this.url)&&e===V("\\")||!this.stateOverride&&(e===V("?")||e===V("#"))?(Pr(this.url)&&e===V("\\")&&(this.parseError=!0),H2e(this.buffer)?(Q$(this.url),e!==V("/")&&!(Pr(this.url)&&e===V("\\"))&&this.url.path.push("")):W$(this.buffer)&&e!==V("/")&&!(Pr(this.url)&&e===V("\\"))?this.url.path.push(""):W$(this.buffer)||(this.url.scheme==="file"&&this.url.path.length===0&&H$(this.buffer)&&(this.buffer=`${this.buffer[0]}:`),this.url.path.push(this.buffer)),this.buffer="",e===V("?")&&(this.url.query="",this.state="query"),e===V("#")&&(this.url.fragment="",this.state="fragment")):(e===V("%")&&(!Br.isASCIIHex(this.input[this.pointer+1])||!Br.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=Wg(e,K2e)),!0};It.prototype["parse opaque path"]=function(e){if(e===V("?"))this.url.query="",this.state="query";else if(e===V("#"))this.url.fragment="",this.state="fragment";else if(e===V(" ")){let r=this.input[this.pointer+1];r===V("?")||r===V("#")?this.url.path+="%20":this.url.path+=" "}else!isNaN(e)&&e!==V("%")&&(this.parseError=!0),e===V("%")&&(!Br.isASCIIHex(this.input[this.pointer+1])||!Br.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),isNaN(e)||(this.url.path+=Wg(e,z$));return!0};It.prototype["parse query"]=function(e,r){if((!Pr(this.url)||this.url.scheme==="ws"||this.url.scheme==="wss")&&(this.encodingOverride="utf-8"),!this.stateOverride&&e===V("#")||isNaN(e)){let n=Pr(this.url)?z2e:W2e;this.url.query+=zg(this.buffer,n),this.buffer="",e===V("#")&&(this.url.fragment="",this.state="fragment")}else isNaN(e)||(e===V("%")&&(!Br.isASCIIHex(this.input[this.pointer+1])||!Br.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=r);return!0};It.prototype["parse fragment"]=function(e){return isNaN(e)||(e===V("%")&&(!Br.isASCIIHex(this.input[this.pointer+1])||!Br.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.url.fragment+=Wg(e,V2e)),!0};function l_e(t,e){let r=`${t.scheme}:`;return t.host!==null&&(r+="//",(t.username!==""||t.password!=="")&&(r+=t.username,t.password!==""&&(r+=`:${t.password}`),r+="@"),r+=bC(t.host),t.port!==null&&(r+=`:${t.port}`)),t.host===null&&!Zd(t)&&t.path.length>1&&t.path[0]===""&&(r+="/."),r+=wC(t),t.query!==null&&(r+=`?${t.query}`),!e&&t.fragment!==null&&(r+=`#${t.fragment}`),r}function p_e(t){let e=`${t.scheme}://`;return e+=bC(t.host),t.port!==null&&(e+=`:${t.port}`),e}function wC(t){if(Zd(t))return t.path;let e="";for(let r of t.path)e+=`/${r}`;return e}gn.exports.serializeURL=l_e;gn.exports.serializePath=wC;gn.exports.serializeURLOrigin=function(t){switch(t.scheme){case"blob":{let e=gn.exports.parseURL(wC(t));return e===null||e.scheme!=="http"&&e.scheme!=="https"?"null":gn.exports.serializeURLOrigin(e)}case"ftp":case"http":case"https":case"ws":case"wss":return p_e({scheme:t.scheme,host:t.host,port:t.port});case"file":return"null";default:return"null"}};gn.exports.basicURLParse=function(t,e){e===void 0&&(e={});let r=new It(t,e.baseURL,e.encodingOverride,e.url,e.stateOverride);return r.failure?null:r.url};gn.exports.setTheUsername=function(t,e){t.username=zg(e,EC)};gn.exports.setThePassword=function(t,e){t.password=zg(e,EC)};gn.exports.serializeHost=bC;gn.exports.cannotHaveAUsernamePasswordPort=a_e;gn.exports.hasAnOpaquePath=Zd;gn.exports.serializeInteger=function(t){return String(t)};gn.exports.parseURL=function(t,e){return e===void 0&&(e={}),gn.exports.basicURLParse(t,{baseURL:e.baseURL,encodingOverride:e.encodingOverride})}});var AC=m((tke,oq)=>{"use strict";var{utf8Encode:d_e,utf8DecodeWithoutBOM:eq}=Lg(),{percentDecodeBytes:tq,utf8PercentEncodeString:rq,isURLEncodedPercentEncode:nq}=Ug();function sq(t){return t.codePointAt(0)}function h_e(t){let e=y_e(t,sq("&")),r=[];for(let n of e){if(n.length===0)continue;let s,i,o=n.indexOf(sq("="));o>=0?(s=n.slice(0,o),i=n.slice(o+1)):(s=n,i=new Uint8Array(0)),s=iq(s,43,32),i=iq(i,43,32);let a=eq(tq(s)),u=eq(tq(i));r.push([a,u])}return r}function f_e(t){return h_e(d_e(t))}function m_e(t){let e="";for(let[r,n]of t.entries()){let s=rq(n[0],nq,!0),i=rq(n[1],nq,!0);r!==0&&(e+="&"),e+=`${s}=${i}`}return e}function y_e(t,e){let r=[],n=0,s=t.indexOf(e);for(;s>=0;)r.push(t.slice(n,s)),n=s+1,s=t.indexOf(e,n);return n!==t.length&&r.push(t.slice(n)),r}function iq(t,e,r){let n=t.indexOf(e);for(;n>=0;)t[n]=r,n=t.indexOf(e,n+1);return t}oq.exports={parseUrlencodedString:f_e,serializeUrlencoded:m_e}});var cq=m(uq=>{"use strict";var aq=$g(),Kg=jg();uq.convert=(t,e,{context:r="The provided value"}={})=>{if(typeof e!="function")throw new t.TypeError(r+" is not a function");function n(...s){let i=Kg.tryWrapperForImpl(this),o;for(let a=0;a<s.length;a++)s[a]=Kg.tryWrapperForImpl(s[a]);return o=Reflect.apply(e,i,s),o=aq.any(o,{context:r,globals:t}),o}return n.construct=(...s)=>{for(let o=0;o<s.length;o++)s[o]=Kg.tryWrapperForImpl(s[o]);let i=Reflect.construct(e,s);return i=aq.any(i,{context:r,globals:t}),i},n[Kg.wrapperSymbol]=e,n.objectReference=e,n}});var pq=m(lq=>{"use strict";var OC=AC();lq.implementation=class{constructor(e,r,{doNotStripQMark:n=!1}){let s=r[0];if(this._list=[],this._url=null,!n&&typeof s=="string"&&s[0]==="?"&&(s=s.slice(1)),Array.isArray(s))for(let i of s){if(i.length!==2)throw new TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element does not contain exactly two elements.");this._list.push([i[0],i[1]])}else if(typeof s=="object"&&Object.getPrototypeOf(s)===null)for(let i of Object.keys(s)){let o=s[i];this._list.push([i,o])}else this._list=OC.parseUrlencodedString(s)}_updateSteps(){if(this._url!==null){let e=OC.serializeUrlencoded(this._list);e===""&&(e=null),this._url._url.query=e}}get size(){return this._list.length}append(e,r){this._list.push([e,r]),this._updateSteps()}delete(e,r){let n=0;for(;n<this._list.length;)this._list[n][0]===e&&(r===void 0||this._list[n][1]===r)?this._list.splice(n,1):n++;this._updateSteps()}get(e){for(let r of this._list)if(r[0]===e)return r[1];return null}getAll(e){let r=[];for(let n of this._list)n[0]===e&&r.push(n[1]);return r}has(e,r){for(let n of this._list)if(n[0]===e&&(r===void 0||n[1]===r))return!0;return!1}set(e,r){let n=!1,s=0;for(;s<this._list.length;)this._list[s][0]===e?n?this._list.splice(s,1):(n=!0,this._list[s][1]=r,s++):s++;n||this._list.push([e,r]),this._updateSteps()}sort(){this._list.sort((e,r)=>e[0]<r[0]?-1:e[0]>r[0]?1:0),this._updateSteps()}[Symbol.iterator](){return this._list[Symbol.iterator]()}toString(){return OC.serializeUrlencoded(this._list)}}});var CC=m(Ue=>{"use strict";var Dn=$g(),st=jg(),g_e=cq(),dq=st.newObjectInRealm,Wt=st.implSymbol,fq=st.ctorRegistrySymbol,hq="URLSearchParams";Ue.is=t=>st.isObject(t)&&st.hasOwn(t,Wt)&&t[Wt]instanceof La.implementation;Ue.isImpl=t=>st.isObject(t)&&t instanceof La.implementation;Ue.convert=(t,e,{context:r="The provided value"}={})=>{if(Ue.is(e))return st.implForWrapper(e);throw new t.TypeError(`${r} is not of type 'URLSearchParams'.`)};Ue.createDefaultIterator=(t,e,r)=>{let s=t[fq]["URLSearchParams Iterator"],i=Object.create(s);return Object.defineProperty(i,st.iterInternalSymbol,{value:{target:e,kind:r,index:0},configurable:!0}),i};function mq(t,e){let r;return e!==void 0&&(r=e.prototype),st.isObject(r)||(r=t[fq].URLSearchParams.prototype),Object.create(r)}Ue.create=(t,e,r)=>{let n=mq(t);return Ue.setup(n,t,e,r)};Ue.createImpl=(t,e,r)=>{let n=Ue.create(t,e,r);return st.implForWrapper(n)};Ue._internalSetup=(t,e)=>{};Ue.setup=(t,e,r=[],n={})=>(n.wrapper=t,Ue._internalSetup(t,e),Object.defineProperty(t,Wt,{value:new La.implementation(e,r,n),configurable:!0}),t[Wt][st.wrapperSymbol]=t,La.init&&La.init(t[Wt]),t);Ue.new=(t,e)=>{let r=mq(t,e);return Ue._internalSetup(r,t),Object.defineProperty(r,Wt,{value:Object.create(La.implementation.prototype),configurable:!0}),r[Wt][st.wrapperSymbol]=r,La.init&&La.init(r[Wt]),r[Wt]};var __e=new Set(["Window","Worker"]);Ue.install=(t,e)=>{if(!e.some(s=>__e.has(s)))return;let r=st.initCtorRegistry(t);class n{constructor(){let i=[];{let o=arguments[0];if(o!==void 0)if(st.isObject(o))if(o[Symbol.iterator]!==void 0)if(st.isObject(o)){let a=[],u=o;for(let c of u){if(st.isObject(c)){let l=[],p=c;for(let d of p)d=Dn.USVString(d,{context:"Failed to construct 'URLSearchParams': parameter 1 sequence's element's element",globals:t}),l.push(d);c=l}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element is not an iterable object.");a.push(c)}o=a}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence is not an iterable object.");else if(st.isObject(o)){let a=Object.create(null);for(let u of Reflect.ownKeys(o)){let c=Object.getOwnPropertyDescriptor(o,u);if(c&&c.enumerable){let l=u;l=Dn.USVString(l,{context:"Failed to construct 'URLSearchParams': parameter 1 record's key",globals:t});let p=o[u];p=Dn.USVString(p,{context:"Failed to construct 'URLSearchParams': parameter 1 record's value",globals:t}),a[l]=p}}o=a}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 record is not an object.");else o=Dn.USVString(o,{context:"Failed to construct 'URLSearchParams': parameter 1",globals:t});else o="";i.push(o)}return Ue.setup(Object.create(new.target.prototype),t,i)}append(i,o){let a=this!==null&&this!==void 0?this:t;if(!Ue.is(a))throw new t.TypeError("'append' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new t.TypeError(`Failed to execute 'append' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let u=[];{let c=arguments[0];c=Dn.USVString(c,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 1",globals:t}),u.push(c)}{let c=arguments[1];c=Dn.USVString(c,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 2",globals:t}),u.push(c)}return st.tryWrapperForImpl(a[Wt].append(...u))}delete(i){let o=this!==null&&this!==void 0?this:t;if(!Ue.is(o))throw new t.TypeError("'delete' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'delete' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let a=[];{let u=arguments[0];u=Dn.USVString(u,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 1",globals:t}),a.push(u)}{let u=arguments[1];u!==void 0&&(u=Dn.USVString(u,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 2",globals:t})),a.push(u)}return st.tryWrapperForImpl(o[Wt].delete(...a))}get(i){let o=this!==null&&this!==void 0?this:t;if(!Ue.is(o))throw new t.TypeError("'get' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'get' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let a=[];{let u=arguments[0];u=Dn.USVString(u,{context:"Failed to execute 'get' on 'URLSearchParams': parameter 1",globals:t}),a.push(u)}return o[Wt].get(...a)}getAll(i){let o=this!==null&&this!==void 0?this:t;if(!Ue.is(o))throw new t.TypeError("'getAll' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'getAll' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let a=[];{let u=arguments[0];u=Dn.USVString(u,{context:"Failed to execute 'getAll' on 'URLSearchParams': parameter 1",globals:t}),a.push(u)}return st.tryWrapperForImpl(o[Wt].getAll(...a))}has(i){let o=this!==null&&this!==void 0?this:t;if(!Ue.is(o))throw new t.TypeError("'has' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'has' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let a=[];{let u=arguments[0];u=Dn.USVString(u,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 1",globals:t}),a.push(u)}{let u=arguments[1];u!==void 0&&(u=Dn.USVString(u,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 2",globals:t})),a.push(u)}return o[Wt].has(...a)}set(i,o){let a=this!==null&&this!==void 0?this:t;if(!Ue.is(a))throw new t.TypeError("'set' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new t.TypeError(`Failed to execute 'set' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let u=[];{let c=arguments[0];c=Dn.USVString(c,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 1",globals:t}),u.push(c)}{let c=arguments[1];c=Dn.USVString(c,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 2",globals:t}),u.push(c)}return st.tryWrapperForImpl(a[Wt].set(...u))}sort(){let i=this!==null&&this!==void 0?this:t;if(!Ue.is(i))throw new t.TypeError("'sort' called on an object that is not a valid instance of URLSearchParams.");return st.tryWrapperForImpl(i[Wt].sort())}toString(){let i=this!==null&&this!==void 0?this:t;if(!Ue.is(i))throw new t.TypeError("'toString' called on an object that is not a valid instance of URLSearchParams.");return i[Wt].toString()}keys(){if(!Ue.is(this))throw new t.TypeError("'keys' called on an object that is not a valid instance of URLSearchParams.");return Ue.createDefaultIterator(t,this,"key")}values(){if(!Ue.is(this))throw new t.TypeError("'values' called on an object that is not a valid instance of URLSearchParams.");return Ue.createDefaultIterator(t,this,"value")}entries(){if(!Ue.is(this))throw new t.TypeError("'entries' called on an object that is not a valid instance of URLSearchParams.");return Ue.createDefaultIterator(t,this,"key+value")}forEach(i){if(!Ue.is(this))throw new t.TypeError("'forEach' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError("Failed to execute 'forEach' on 'iterable': 1 argument required, but only 0 present.");i=g_e.convert(t,i,{context:"Failed to execute 'forEach' on 'iterable': The callback provided as parameter 1"});let o=arguments[1],a=Array.from(this[Wt]),u=0;for(;u<a.length;){let[c,l]=a[u].map(st.tryWrapperForImpl);i.call(o,l,c,this),a=Array.from(this[Wt]),u++}}get size(){let i=this!==null&&this!==void 0?this:t;if(!Ue.is(i))throw new t.TypeError("'get size' called on an object that is not a valid instance of URLSearchParams.");return i[Wt].size}}Object.defineProperties(n.prototype,{append:{enumerable:!0},delete:{enumerable:!0},get:{enumerable:!0},getAll:{enumerable:!0},has:{enumerable:!0},set:{enumerable:!0},sort:{enumerable:!0},toString:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0},forEach:{enumerable:!0},size:{enumerable:!0},[Symbol.toStringTag]:{value:"URLSearchParams",configurable:!0},[Symbol.iterator]:{value:n.prototype.entries,configurable:!0,writable:!0}}),r[hq]=n,r["URLSearchParams Iterator"]=Object.create(r["%IteratorPrototype%"],{[Symbol.toStringTag]:{configurable:!0,value:"URLSearchParams Iterator"}}),st.define(r["URLSearchParams Iterator"],{next(){let s=this&&this[st.iterInternalSymbol];if(!s)throw new t.TypeError("next() called on a value that is not a URLSearchParams iterator object");let{target:i,kind:o,index:a}=s,u=Array.from(i[Wt]),c=u.length;if(a>=c)return dq(t,{value:void 0,done:!0});let l=u[a];return s.index=a+1,dq(t,st.iteratorResult(l.map(st.tryWrapperForImpl),o))}}),Object.defineProperty(t,hq,{configurable:!0,writable:!0,value:n})};var La=pq()});var Eq=m(_q=>{"use strict";var tt=SC(),yq=AC(),E_e=CC();_q.implementation=class gq{constructor(e,[r,n]){let s=null;if(n!==void 0&&(s=tt.basicURLParse(n),s===null))throw new TypeError(`Invalid base URL: ${n}`);let i=tt.basicURLParse(r,{baseURL:s});if(i===null)throw new TypeError(`Invalid URL: ${r}`);let o=i.query!==null?i.query:"";this._url=i,this._query=E_e.createImpl(e,[o],{doNotStripQMark:!0}),this._query._url=this}static parse(e,r,n){try{return new gq(e,[r,n])}catch{return null}}static canParse(e,r){let n=null;return!(r!==void 0&&(n=tt.basicURLParse(r),n===null)||tt.basicURLParse(e,{baseURL:n})===null)}get href(){return tt.serializeURL(this._url)}set href(e){let r=tt.basicURLParse(e);if(r===null)throw new TypeError(`Invalid URL: ${e}`);this._url=r,this._query._list.splice(0);let{query:n}=r;n!==null&&(this._query._list=yq.parseUrlencodedString(n))}get origin(){return tt.serializeURLOrigin(this._url)}get protocol(){return`${this._url.scheme}:`}set protocol(e){tt.basicURLParse(`${e}:`,{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(e){tt.cannotHaveAUsernamePasswordPort(this._url)||tt.setTheUsername(this._url,e)}get password(){return this._url.password}set password(e){tt.cannotHaveAUsernamePasswordPort(this._url)||tt.setThePassword(this._url,e)}get host(){let e=this._url;return e.host===null?"":e.port===null?tt.serializeHost(e.host):`${tt.serializeHost(e.host)}:${tt.serializeInteger(e.port)}`}set host(e){tt.hasAnOpaquePath(this._url)||tt.basicURLParse(e,{url:this._url,stateOverride:"host"})}get hostname(){return this._url.host===null?"":tt.serializeHost(this._url.host)}set hostname(e){tt.hasAnOpaquePath(this._url)||tt.basicURLParse(e,{url:this._url,stateOverride:"hostname"})}get port(){return this._url.port===null?"":tt.serializeInteger(this._url.port)}set port(e){tt.cannotHaveAUsernamePasswordPort(this._url)||(e===""?this._url.port=null:tt.basicURLParse(e,{url:this._url,stateOverride:"port"}))}get pathname(){return tt.serializePath(this._url)}set pathname(e){tt.hasAnOpaquePath(this._url)||(this._url.path=[],tt.basicURLParse(e,{url:this._url,stateOverride:"path start"}))}get search(){return this._url.query===null||this._url.query===""?"":`?${this._url.query}`}set search(e){let r=this._url;if(e===""){r.query=null,this._query._list=[];return}let n=e[0]==="?"?e.substring(1):e;r.query="",tt.basicURLParse(n,{url:r,stateOverride:"query"}),this._query._list=yq.parseUrlencodedString(n)}get searchParams(){return this._query}get hash(){return this._url.fragment===null||this._url.fragment===""?"":`#${this._url.fragment}`}set hash(e){if(e===""){this._url.fragment=null;return}let r=e[0]==="#"?e.substring(1):e;this._url.fragment="",tt.basicURLParse(r,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}}});var Sq=m(Ae=>{"use strict";var Zr=$g(),Mn=jg(),Ve=Mn.implSymbol,b_e=Mn.ctorRegistrySymbol,bq="URL";Ae.is=t=>Mn.isObject(t)&&Mn.hasOwn(t,Ve)&&t[Ve]instanceof Hi.implementation;Ae.isImpl=t=>Mn.isObject(t)&&t instanceof Hi.implementation;Ae.convert=(t,e,{context:r="The provided value"}={})=>{if(Ae.is(e))return Mn.implForWrapper(e);throw new t.TypeError(`${r} is not of type 'URL'.`)};function wq(t,e){let r;return e!==void 0&&(r=e.prototype),Mn.isObject(r)||(r=t[b_e].URL.prototype),Object.create(r)}Ae.create=(t,e,r)=>{let n=wq(t);return Ae.setup(n,t,e,r)};Ae.createImpl=(t,e,r)=>{let n=Ae.create(t,e,r);return Mn.implForWrapper(n)};Ae._internalSetup=(t,e)=>{};Ae.setup=(t,e,r=[],n={})=>(n.wrapper=t,Ae._internalSetup(t,e),Object.defineProperty(t,Ve,{value:new Hi.implementation(e,r,n),configurable:!0}),t[Ve][Mn.wrapperSymbol]=t,Hi.init&&Hi.init(t[Ve]),t);Ae.new=(t,e)=>{let r=wq(t,e);return Ae._internalSetup(r,t),Object.defineProperty(r,Ve,{value:Object.create(Hi.implementation.prototype),configurable:!0}),r[Ve][Mn.wrapperSymbol]=r,Hi.init&&Hi.init(r[Ve]),r[Ve]};var w_e=new Set(["Window","Worker"]);Ae.install=(t,e)=>{if(!e.some(s=>w_e.has(s)))return;let r=Mn.initCtorRegistry(t);class n{constructor(i){if(arguments.length<1)throw new t.TypeError(`Failed to construct 'URL': 1 argument required, but only ${arguments.length} present.`);let o=[];{let a=arguments[0];a=Zr.USVString(a,{context:"Failed to construct 'URL': parameter 1",globals:t}),o.push(a)}{let a=arguments[1];a!==void 0&&(a=Zr.USVString(a,{context:"Failed to construct 'URL': parameter 2",globals:t})),o.push(a)}return Ae.setup(Object.create(new.target.prototype),t,o)}toJSON(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'toJSON' called on an object that is not a valid instance of URL.");return i[Ve].toJSON()}get href(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get href' called on an object that is not a valid instance of URL.");return i[Ve].href}set href(i){let o=this!==null&&this!==void 0?this:t;if(!Ae.is(o))throw new t.TypeError("'set href' called on an object that is not a valid instance of URL.");i=Zr.USVString(i,{context:"Failed to set the 'href' property on 'URL': The provided value",globals:t}),o[Ve].href=i}toString(){let i=this;if(!Ae.is(i))throw new t.TypeError("'toString' called on an object that is not a valid instance of URL.");return i[Ve].href}get origin(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get origin' called on an object that is not a valid instance of URL.");return i[Ve].origin}get protocol(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get protocol' called on an object that is not a valid instance of URL.");return i[Ve].protocol}set protocol(i){let o=this!==null&&this!==void 0?this:t;if(!Ae.is(o))throw new t.TypeError("'set protocol' called on an object that is not a valid instance of URL.");i=Zr.USVString(i,{context:"Failed to set the 'protocol' property on 'URL': The provided value",globals:t}),o[Ve].protocol=i}get username(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get username' called on an object that is not a valid instance of URL.");return i[Ve].username}set username(i){let o=this!==null&&this!==void 0?this:t;if(!Ae.is(o))throw new t.TypeError("'set username' called on an object that is not a valid instance of URL.");i=Zr.USVString(i,{context:"Failed to set the 'username' property on 'URL': The provided value",globals:t}),o[Ve].username=i}get password(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get password' called on an object that is not a valid instance of URL.");return i[Ve].password}set password(i){let o=this!==null&&this!==void 0?this:t;if(!Ae.is(o))throw new t.TypeError("'set password' called on an object that is not a valid instance of URL.");i=Zr.USVString(i,{context:"Failed to set the 'password' property on 'URL': The provided value",globals:t}),o[Ve].password=i}get host(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get host' called on an object that is not a valid instance of URL.");return i[Ve].host}set host(i){let o=this!==null&&this!==void 0?this:t;if(!Ae.is(o))throw new t.TypeError("'set host' called on an object that is not a valid instance of URL.");i=Zr.USVString(i,{context:"Failed to set the 'host' property on 'URL': The provided value",globals:t}),o[Ve].host=i}get hostname(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get hostname' called on an object that is not a valid instance of URL.");return i[Ve].hostname}set hostname(i){let o=this!==null&&this!==void 0?this:t;if(!Ae.is(o))throw new t.TypeError("'set hostname' called on an object that is not a valid instance of URL.");i=Zr.USVString(i,{context:"Failed to set the 'hostname' property on 'URL': The provided value",globals:t}),o[Ve].hostname=i}get port(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get port' called on an object that is not a valid instance of URL.");return i[Ve].port}set port(i){let o=this!==null&&this!==void 0?this:t;if(!Ae.is(o))throw new t.TypeError("'set port' called on an object that is not a valid instance of URL.");i=Zr.USVString(i,{context:"Failed to set the 'port' property on 'URL': The provided value",globals:t}),o[Ve].port=i}get pathname(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get pathname' called on an object that is not a valid instance of URL.");return i[Ve].pathname}set pathname(i){let o=this!==null&&this!==void 0?this:t;if(!Ae.is(o))throw new t.TypeError("'set pathname' called on an object that is not a valid instance of URL.");i=Zr.USVString(i,{context:"Failed to set the 'pathname' property on 'URL': The provided value",globals:t}),o[Ve].pathname=i}get search(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get search' called on an object that is not a valid instance of URL.");return i[Ve].search}set search(i){let o=this!==null&&this!==void 0?this:t;if(!Ae.is(o))throw new t.TypeError("'set search' called on an object that is not a valid instance of URL.");i=Zr.USVString(i,{context:"Failed to set the 'search' property on 'URL': The provided value",globals:t}),o[Ve].search=i}get searchParams(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get searchParams' called on an object that is not a valid instance of URL.");return Mn.getSameObject(this,"searchParams",()=>Mn.tryWrapperForImpl(i[Ve].searchParams))}get hash(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get hash' called on an object that is not a valid instance of URL.");return i[Ve].hash}set hash(i){let o=this!==null&&this!==void 0?this:t;if(!Ae.is(o))throw new t.TypeError("'set hash' called on an object that is not a valid instance of URL.");i=Zr.USVString(i,{context:"Failed to set the 'hash' property on 'URL': The provided value",globals:t}),o[Ve].hash=i}static parse(i){if(arguments.length<1)throw new t.TypeError(`Failed to execute 'parse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let o=[];{let a=arguments[0];a=Zr.USVString(a,{context:"Failed to execute 'parse' on 'URL': parameter 1",globals:t}),o.push(a)}{let a=arguments[1];a!==void 0&&(a=Zr.USVString(a,{context:"Failed to execute 'parse' on 'URL': parameter 2",globals:t})),o.push(a)}return Mn.tryWrapperForImpl(Hi.implementation.parse(t,...o))}static canParse(i){if(arguments.length<1)throw new t.TypeError(`Failed to execute 'canParse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let o=[];{let a=arguments[0];a=Zr.USVString(a,{context:"Failed to execute 'canParse' on 'URL': parameter 1",globals:t}),o.push(a)}{let a=arguments[1];a!==void 0&&(a=Zr.USVString(a,{context:"Failed to execute 'canParse' on 'URL': parameter 2",globals:t})),o.push(a)}return Hi.implementation.canParse(...o)}}Object.defineProperties(n.prototype,{toJSON:{enumerable:!0},href:{enumerable:!0},toString:{enumerable:!0},origin:{enumerable:!0},protocol:{enumerable:!0},username:{enumerable:!0},password:{enumerable:!0},host:{enumerable:!0},hostname:{enumerable:!0},port:{enumerable:!0},pathname:{enumerable:!0},search:{enumerable:!0},searchParams:{enumerable:!0},hash:{enumerable:!0},[Symbol.toStringTag]:{value:"URL",configurable:!0}}),Object.defineProperties(n,{parse:{enumerable:!0},canParse:{enumerable:!0}}),r[bq]=n,Object.defineProperty(t,bq,{configurable:!0,writable:!0,value:n}),e.includes("Window")&&Object.defineProperty(t,"webkitURL",{configurable:!0,writable:!0,value:n})};var Hi=Eq()});var Aq=m(vC=>{"use strict";var S_e=Sq(),A_e=CC();vC.URL=S_e;vC.URLSearchParams=A_e});var Cq=m(en=>{"use strict";var{URL:O_e,URLSearchParams:C_e}=Aq(),hi=SC(),Oq=Ug(),Hg={Array,Object,Promise,String,TypeError};O_e.install(Hg,["Window"]);C_e.install(Hg,["Window"]);en.URL=Hg.URL;en.URLSearchParams=Hg.URLSearchParams;en.parseURL=hi.parseURL;en.basicURLParse=hi.basicURLParse;en.serializeURL=hi.serializeURL;en.serializePath=hi.serializePath;en.serializeHost=hi.serializeHost;en.serializeInteger=hi.serializeInteger;en.serializeURLOrigin=hi.serializeURLOrigin;en.setTheUsername=hi.setTheUsername;en.setThePassword=hi.setThePassword;en.cannotHaveAUsernamePasswordPort=hi.cannotHaveAUsernamePasswordPort;en.hasAnOpaquePath=hi.hasAnOpaquePath;en.percentDecodeString=Oq.percentDecodeString;en.percentDecodeBytes=Oq.percentDecodeBytes});var xq=m(Gi=>{"use strict";var v_e=Gi&&Gi.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),x_e=Gi&&Gi.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),T_e=Gi&&Gi.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[n.length]=s);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),s=0;s<n.length;s++)n[s]!=="default"&&v_e(r,e,n[s]);return x_e(r,e),r}})();Object.defineProperty(Gi,"__esModule",{value:!0});Gi.redactValidConnectionString=D_e;Gi.redactConnectionString=M_e;var vq=T_e(xC());function D_e(t,e){let r=t.clone(),n=e?.replacementString??"_credentials_",s=e?.redactUsernames??!0;if((r.username||r.password)&&s?(r.username=n,r.password=""):r.password&&(r.password=n),r.searchParams.has("authMechanismProperties")){let i=new vq.CommaAndColonSeparatedRecord(r.searchParams.get("authMechanismProperties"));i.get("AWS_SESSION_TOKEN")&&(i.set("AWS_SESSION_TOKEN",n),r.searchParams.set("authMechanismProperties",i.toString()))}return r.searchParams.has("tlsCertificateKeyFilePassword")&&r.searchParams.set("tlsCertificateKeyFilePassword",n),r.searchParams.has("proxyUsername")&&s&&r.searchParams.set("proxyUsername",n),r.searchParams.has("proxyPassword")&&r.searchParams.set("proxyPassword",n),r}function M_e(t,e){let r=e?.replacementString??"<credentials>",n=e?.redactUsernames??!0,s;try{s=new vq.default(t)}catch{}if(s)return e={...e,replacementString:"___credentials___"},s.redact(e).toString().replace(/___credentials___/g,r);let i=r,o=[a=>a.replace(n?/(\/\/)(.*)(@)/g:/(\/\/[^@]*:)(.*)(@)/g,`$1${i}$3`),a=>a.replace(/(AWS_SESSION_TOKEN(:|%3A))([^,&]+)/gi,`$1${i}`),a=>a.replace(/(tlsCertificateKeyFilePassword=)([^&]+)/gi,`$1${i}`),a=>n?a.replace(/(proxyUsername=)([^&]+)/gi,`$1${i}`):a,a=>a.replace(/(proxyPassword=)([^&]+)/gi,`$1${i}`)];for(let a of o)t=a(t);return t}});var xC=m(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.CommaAndColonSeparatedRecord=Oo.ConnectionString=Oo.redactConnectionString=void 0;var P_e=Cq(),Tq=xq();Object.defineProperty(Oo,"redactConnectionString",{enumerable:!0,get:function(){return Tq.redactConnectionString}});var eh="__this_is_a_placeholder__";function B_e(t){return t.startsWith("mongodb://")||t.startsWith("mongodb+srv://")}var I_e=/^(?<protocol>[^/]+):\/\/(?:(?<username>[^:@]*)(?::(?<password>[^@]*))?@)?(?<hosts>(?!:)[^/?@]*)(?<rest>.*)/,Gg=class extends Map{delete(e){return super.delete(this._normalizeKey(e))}get(e){return super.get(this._normalizeKey(e))}has(e){return super.has(this._normalizeKey(e))}set(e,r){return super.set(this._normalizeKey(e),r)}_normalizeKey(e){e=`${e}`;for(let r of this.keys())if(r.toLowerCase()===e.toLowerCase()){e=r;break}return e}};function N_e(t){return class extends t{append(r,n){return super.append(this._normalizeKey(r),n)}delete(r){return super.delete(this._normalizeKey(r))}get(r){return super.get(this._normalizeKey(r))}getAll(r){return super.getAll(this._normalizeKey(r))}has(r){return super.has(this._normalizeKey(r))}set(r,n){return super.set(this._normalizeKey(r),n)}keys(){return super.keys()}values(){return super.values()}entries(){return super.entries()}[Symbol.iterator](){return super[Symbol.iterator]()}_normalizeKey(r){return Gg.prototype._normalizeKey.call(this,r)}}}var TC=class extends P_e.URL{},fi=class extends Error{get name(){return"MongoParseError"}},Jg=class t extends TC{_hosts;constructor(e,r={}){let{looseValidation:n}=r;if(!n&&!B_e(e))throw new fi('Invalid scheme, expected connection string to start with "mongodb://" or "mongodb+srv://"');let s=e.match(I_e);if(!s)throw new fi(`Invalid connection string "${e}"`);let{protocol:i,username:o,password:a,hosts:u,rest:c}=s.groups??{};if(!n){if(!i||!u)throw new fi(`Protocol and host list are required in "${e}"`);try{decodeURIComponent(o??""),decodeURIComponent(a??"")}catch(d){throw new fi(d.message)}let p=/[:/?#[\]@]/gi;if(o?.match(p))throw new fi(`Username contains unescaped characters ${o}`);if(!o||!a){let d=e.replace(`${i}://`,"");if(d.startsWith("@")||d.startsWith(":"))throw new fi("URI contained empty userinfo section")}if(a?.match(p))throw new fi("Password contains unescaped characters")}let l="";typeof o=="string"&&(l+=o),typeof a=="string"&&(l+=`:${a}`),l&&(l+="@");try{super(`${i.toLowerCase()}://${l}${eh}${c}`)}catch(p){throw n&&new t(e,{...r,looseValidation:!1}),typeof p.message=="string"&&(p.message=p.message.replace(eh,u)),p}if(this._hosts=u.split(","),!n){if(this.isSRV&&this.hosts.length!==1)throw new fi("mongodb+srv URI cannot have multiple service names");if(this.isSRV&&this.hosts.some(p=>p.includes(":")))throw new fi("mongodb+srv URI cannot have port number")}this.pathname||(this.pathname="/"),Object.setPrototypeOf(this.searchParams,N_e(this.searchParams.constructor).prototype)}get host(){return eh}set host(e){throw new Error("No single host for connection string")}get hostname(){return eh}set hostname(e){throw new Error("No single host for connection string")}get port(){return""}set port(e){throw new Error("No single host for connection string")}get href(){return this.toString()}set href(e){throw new Error("Cannot set href for connection strings")}get isSRV(){return this.protocol.includes("srv")}get hosts(){return this._hosts}set hosts(e){this._hosts=e}toString(){return super.toString().replace(eh,this.hosts.join(","))}clone(){return new t(this.toString(),{looseValidation:!0})}redact(e){return(0,Tq.redactValidConnectionString)(this,e)}typedSearchParams(){return this.searchParams}[Symbol.for("nodejs.util.inspect.custom")](){let{href:e,origin:r,protocol:n,username:s,password:i,hosts:o,pathname:a,search:u,searchParams:c,hash:l}=this;return{href:e,origin:r,protocol:n,username:s,password:i,hosts:o,pathname:a,search:u,searchParams:c,hash:l}}};Oo.ConnectionString=Jg;var DC=class extends Gg{constructor(e){super();for(let r of(e??"").split(",")){if(!r)continue;let n=r.indexOf(":");n===-1?this.set(r,""):this.set(r.slice(0,n),r.slice(n+1))}}toString(){return[...this].map(e=>e.join(":")).join(",")}};Oo.CommaAndColonSeparatedRecord=DC;Oo.default=Jg});var rh=m(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.OpCompressedRequest=Pn.OpMsgResponse=Pn.OpMsgRequest=Pn.DocumentSequence=Pn.OpReply=Pn.OpQueryRequest=void 0;var gp=pe(),th=z(),MC=nh(),mp=Eo(),yp=0,k_e=2,R_e=4,F_e=8,$_e=16,q_e=32,j_e=64,L_e=128,U_e=1,V_e=2,W_e=4,z_e=8,K_e=gp.BSON.onDemand.ByteUtils.encodeUTF8Into,BC=class t{constructor(e,r,n){this.moreToCome=!1;let s=`${e}.$cmd`;if(typeof e!="string")throw new th.MongoRuntimeError("Database name must be a string for a query");if(r==null)throw new th.MongoRuntimeError("A query document must be specified for query");if(s.indexOf("\0")!==-1)throw new th.MongoRuntimeError("Namespace cannot contain a null character");this.databaseName=e,this.query=r,this.ns=s,this.numberToSkip=n.numberToSkip||0,this.numberToReturn=n.numberToReturn||0,this.returnFieldSelector=n.returnFieldSelector||void 0,this.requestId=n.requestId??t.getRequestId(),this.pre32Limit=n.pre32Limit,this.serializeFunctions=typeof n.serializeFunctions=="boolean"?n.serializeFunctions:!1,this.ignoreUndefined=typeof n.ignoreUndefined=="boolean"?n.ignoreUndefined:!1,this.maxBsonSize=n.maxBsonSize||1024*1024*16,this.checkKeys=typeof n.checkKeys=="boolean"?n.checkKeys:!1,this.batchSize=this.numberToReturn,this.tailable=!1,this.secondaryOk=typeof n.secondaryOk=="boolean"?n.secondaryOk:!1,this.oplogReplay=!1,this.noCursorTimeout=!1,this.awaitData=!1,this.exhaust=!1,this.partial=!1}incRequestId(){this.requestId=yp++}nextRequestId(){return yp+1}static getRequestId(){return++yp}toBin(){let e=[],r=null,n=0;this.tailable&&(n|=k_e),this.secondaryOk&&(n|=R_e),this.oplogReplay&&(n|=F_e),this.noCursorTimeout&&(n|=$_e),this.awaitData&&(n|=q_e),this.exhaust&&(n|=j_e),this.partial&&(n|=L_e),this.batchSize!==this.numberToReturn&&(this.numberToReturn=this.batchSize);let s=Buffer.alloc(20+Buffer.byteLength(this.ns)+1+4+4);e.push(s);let i=gp.serialize(this.query,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});e.push(i),this.returnFieldSelector&&Object.keys(this.returnFieldSelector).length>0&&(r=gp.serialize(this.returnFieldSelector,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined}),e.push(r));let o=s.length+i.length+(r?r.length:0),a=4;return s[3]=o>>24&255,s[2]=o>>16&255,s[1]=o>>8&255,s[0]=o&255,s[a+3]=this.requestId>>24&255,s[a+2]=this.requestId>>16&255,s[a+1]=this.requestId>>8&255,s[a]=this.requestId&255,a=a+4,s[a+3]=0,s[a+2]=0,s[a+1]=0,s[a]=0,a=a+4,s[a+3]=mp.OP_QUERY>>24&255,s[a+2]=mp.OP_QUERY>>16&255,s[a+1]=mp.OP_QUERY>>8&255,s[a]=mp.OP_QUERY&255,a=a+4,s[a+3]=n>>24&255,s[a+2]=n>>16&255,s[a+1]=n>>8&255,s[a]=n&255,a=a+4,a=a+s.write(this.ns,a,"utf8")+1,s[a-1]=0,s[a+3]=this.numberToSkip>>24&255,s[a+2]=this.numberToSkip>>16&255,s[a+1]=this.numberToSkip>>8&255,s[a]=this.numberToSkip&255,a=a+4,s[a+3]=this.numberToReturn>>24&255,s[a+2]=this.numberToReturn>>16&255,s[a+1]=this.numberToReturn>>8&255,s[a]=this.numberToReturn&255,a=a+4,e}};Pn.OpQueryRequest=BC;var IC=class{constructor(e,r,n,s){this.index=0,this.sections=[],this.moreToCome=!1,this.parsed=!1,this.raw=e,this.data=n,this.opts=s??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=r.length,this.requestId=r.requestId,this.responseTo=r.responseTo,this.opCode=r.opCode,this.fromCompressed=r.fromCompressed,this.useBigInt64=typeof this.opts.useBigInt64=="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs=="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues=="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers=="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp=="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];if(this.index=20,this.responseFlags=this.data.readInt32LE(0),this.cursorId=new gp.Long(this.data.readInt32LE(4),this.data.readInt32LE(8)),this.startingFrom=this.data.readInt32LE(12),this.numberReturned=this.data.readInt32LE(16),this.numberReturned<0||this.numberReturned>2**32-1)throw new RangeError(`OP_REPLY numberReturned is an invalid array length ${this.numberReturned}`);this.cursorNotFound=(this.responseFlags&U_e)!==0,this.queryFailure=(this.responseFlags&V_e)!==0,this.shardConfigStale=(this.responseFlags&W_e)!==0,this.awaitCapable=(this.responseFlags&z_e)!==0;for(let e=0;e<this.numberReturned;e++){let r=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24,n=this.data.subarray(this.index,this.index+r);this.sections.push(n),this.index=this.index+r}return this.parsed=!0,this.sections[0]}};Pn.OpReply=IC;var Mq=1,Pq=2,Bq=65536,Yg=class{constructor(e,r){this.field=e,this.documents=[],this.chunks=[],this.serializedDocumentsLength=0;let n=Buffer.allocUnsafe(5+this.field.length+1);if(n[0]=1,K_e(n,`${this.field}\0`,5),this.chunks.push(n),this.header=n,r)for(let s of r)this.push(s,gp.serialize(s))}push(e,r){return this.serializedDocumentsLength+=r.length,this.documents.push(e),this.chunks.push(r),this.header?.writeInt32LE(4+this.field.length+1+this.serializedDocumentsLength,1),this.serializedDocumentsLength+this.header.length}toBin(){return Buffer.concat(this.chunks)}};Pn.DocumentSequence=Yg;var Qg=class t{constructor(e,r,n){if(r==null)throw new th.MongoInvalidArgumentError("Query document must be specified for query");this.databaseName=e,this.command=r,this.command.$db=e,this.options=n??{},this.requestId=n.requestId?n.requestId:t.getRequestId(),this.serializeFunctions=typeof n.serializeFunctions=="boolean"?n.serializeFunctions:!1,this.ignoreUndefined=typeof n.ignoreUndefined=="boolean"?n.ignoreUndefined:!1,this.checkKeys=typeof n.checkKeys=="boolean"?n.checkKeys:!1,this.maxBsonSize=n.maxBsonSize||1024*1024*16,this.checksumPresent=!1,this.moreToCome=n.moreToCome??r.writeConcern?.w===0,this.exhaustAllowed=typeof n.exhaustAllowed=="boolean"?n.exhaustAllowed:!1}toBin(){let e=[],r=0;this.checksumPresent&&(r|=Mq),this.moreToCome&&(r|=Pq),this.exhaustAllowed&&(r|=Bq);let n=Buffer.alloc(20);e.push(n);let s=n.length,i=this.command;return s+=this.makeSections(e,i),n.writeInt32LE(s,0),n.writeInt32LE(this.requestId,4),n.writeInt32LE(0,8),n.writeInt32LE(mp.OP_MSG,12),n.writeUInt32LE(r,16),e}makeSections(e,r){let n=this.extractDocumentSequences(r),s=Buffer.allocUnsafe(1);s[0]=0;let i=this.serializeBson(r);return e.push(s),e.push(i),e.push(n),s.length+i.length+n.length}extractDocumentSequences(e){let r=[];for(let[n,s]of Object.entries(e))s instanceof Yg&&(r.push(s.toBin()),delete e[n]);return r.length>0?Buffer.concat(r):Buffer.alloc(0)}serializeBson(e){return gp.serialize(e,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined})}static getRequestId(){return yp=yp+1&2147483647,yp}};Pn.OpMsgRequest=Qg;var NC=class{constructor(e,r,n,s){this.index=0,this.sections=[],this.parsed=!1,this.raw=e,this.data=n,this.opts=s??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=r.length,this.requestId=r.requestId,this.responseTo=r.responseTo,this.opCode=r.opCode,this.fromCompressed=r.fromCompressed,this.responseFlags=n.readInt32LE(0),this.checksumPresent=(this.responseFlags&Mq)!==0,this.moreToCome=(this.responseFlags&Pq)!==0,this.exhaustAllowed=(this.responseFlags&Bq)!==0,this.useBigInt64=typeof this.opts.useBigInt64=="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs=="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues=="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers=="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp=="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];for(this.index=4;this.index<this.data.length;){let e=this.data.readUInt8(this.index++);if(e===0){let r=this.data.readUInt32LE(this.index),n=this.data.subarray(this.index,this.index+r);this.sections.push(n),this.index+=r}else if(e===1)throw new th.MongoRuntimeError("OP_MSG Payload Type 1 detected unsupported protocol")}return this.parsed=!0,this.sections[0]}};Pn.OpMsgResponse=NC;var PC=16,Dq=9,kC=class{constructor(e,r){this.command=e,this.options={zlibCompressionLevel:r.zlibCompressionLevel,agreedCompressor:r.agreedCompressor}}static canCompress(e){let r=e instanceof Qg?e.command:e.query,n=Object.keys(r)[0];return!MC.uncompressibleCommands.has(n)}async toBin(){let e=Buffer.concat(this.command.toBin()),r=e.slice(PC),n=e.readInt32LE(12),s=await(0,MC.compress)(this.options,r),i=Buffer.alloc(PC);i.writeInt32LE(PC+Dq+s.length,0),i.writeInt32LE(this.command.requestId,4),i.writeInt32LE(0,8),i.writeInt32LE(mp.OP_COMPRESSED,12);let o=Buffer.alloc(Dq);return o.writeInt32LE(n,0),o.writeInt32LE(r.length,4),o.writeUInt8(MC.Compressor[this.options.agreedCompressor],8),[i,o,s]}};Pn.OpCompressedRequest=kC});var nh=m(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.uncompressibleCommands=Ir.Compressor=void 0;Ir.compress=Q_e;Ir.decompress=Rq;Ir.compressCommand=X_e;Ir.decompressResponse=Z_e;var Iq=require("util"),Xg=require("zlib"),H_e=Lt(),Nq=pi(),FC=z(),_p=rh(),RC=Eo();Ir.Compressor=Object.freeze({none:0,snappy:1,zlib:2,zstd:3});Ir.uncompressibleCommands=new Set([H_e.LEGACY_HELLO_COMMAND,"saslStart","saslContinue","getnonce","authenticate","createUser","updateUser","copydbSaslStart","copydbgetnonce","copydb"]);var G_e=3,J_e=(0,Iq.promisify)(Xg.inflate.bind(Xg)),Y_e=(0,Iq.promisify)(Xg.deflate.bind(Xg)),Ua,Zu=null;function kq(){if(Zu==null){let t=(0,Nq.getSnappy)();if("kModuleError"in t)throw t.kModuleError;Zu=t}return Zu}async function Q_e(t,e){let r={};switch(t.agreedCompressor){case"snappy":return Zu??=kq(),await Zu.compress(e);case"zstd":{if(Fq(),"kModuleError"in Ua)throw Ua.kModuleError;return await Ua.compress(e,G_e)}case"zlib":return t.zlibCompressionLevel&&(r.level=t.zlibCompressionLevel),await Y_e(e,r);default:throw new FC.MongoInvalidArgumentError(`Unknown compressor ${t.agreedCompressor} failed to compress`)}}async function Rq(t,e){if(t!==Ir.Compressor.snappy&&t!==Ir.Compressor.zstd&&t!==Ir.Compressor.zlib&&t!==Ir.Compressor.none)throw new FC.MongoDecompressionError(`Server sent message compressed using an unsupported compressor. (Received compressor ID ${t})`);switch(t){case Ir.Compressor.snappy:return Zu??=kq(),await Zu.uncompress(e,{asBuffer:!0});case Ir.Compressor.zstd:{if(Fq(),"kModuleError"in Ua)throw Ua.kModuleError;return await Ua.decompress(e)}case Ir.Compressor.zlib:return await J_e(e);default:return e}}function Fq(){Ua||(Ua=(0,Nq.getZstdLibrary)())}var ih=16;async function X_e(t,e){let n=await(e.agreedCompressor==="none"||!_p.OpCompressedRequest.canCompress(t)?t:new _p.OpCompressedRequest(t,{agreedCompressor:e.agreedCompressor??"none",zlibCompressionLevel:e.zlibCompressionLevel??0})).toBin();return Buffer.concat(n)}async function Z_e(t){let e={length:t.readInt32LE(0),requestId:t.readInt32LE(4),responseTo:t.readInt32LE(8),opCode:t.readInt32LE(12)};if(e.opCode!==RC.OP_COMPRESSED){let a=e.opCode===RC.OP_MSG?_p.OpMsgResponse:_p.OpReply,u=t.subarray(ih);return new a(t,e,u)}let r={...e,fromCompressed:!0,opCode:t.readInt32LE(ih),length:t.readInt32LE(ih+4)},n=t[ih+8],s=t.slice(ih+9),i=r.opCode===RC.OP_MSG?_p.OpMsgResponse:_p.OpReply,o=await Rq(n,s);if(o.length!==r.length)throw new FC.MongoDecompressionError("Message body and message header must be the same length");return new i(t,r,o)}});var Ep=m(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.MongoCryptKMSRequestNetworkTimeoutError=tn.MongoCryptAzureKMSRequestError=tn.MongoCryptCreateEncryptedCollectionError=tn.MongoCryptCreateDataKeyError=tn.MongoCryptInvalidArgumentError=tn.defaultErrorWrapper=tn.MongoCryptError=void 0;var eEe=z(),Co=class extends eEe.MongoError{constructor(e,r={}){super(e,r)}get name(){return"MongoCryptError"}};tn.MongoCryptError=Co;var tEe=t=>new Co(t.message,{cause:t});tn.defaultErrorWrapper=tEe;var $C=class extends Co{constructor(e){super(e)}get name(){return"MongoCryptInvalidArgumentError"}};tn.MongoCryptInvalidArgumentError=$C;var qC=class extends Co{constructor(e,{cause:r}){super(`Unable to complete creating data keys: ${r.message}`,{cause:r}),this.encryptedFields=e}get name(){return"MongoCryptCreateDataKeyError"}};tn.MongoCryptCreateDataKeyError=qC;var jC=class extends Co{constructor(e,{cause:r}){super(`Unable to create collection: ${r.message}`,{cause:r}),this.encryptedFields=e}get name(){return"MongoCryptCreateEncryptedCollectionError"}};tn.MongoCryptCreateEncryptedCollectionError=jC;var LC=class extends Co{constructor(e,r){super(e),this.body=r}get name(){return"MongoCryptAzureKMSRequestError"}};tn.MongoCryptAzureKMSRequestError=LC;var UC=class extends Co{get name(){return"MongoCryptKMSRequestNetworkTimeoutError"}};tn.MongoCryptKMSRequestNetworkTimeoutError=UC});var WC=m(Zg=>{"use strict";Object.defineProperty(Zg,"__esModule",{value:!0});Zg.AWSSDKCredentialProvider=void 0;var rEe=pi(),nEe=z(),VC=class t{constructor(e){e&&(this._provider=e)}static get awsSDK(){return t._awsSDK??=(0,rEe.getAwsCredentialProvider)(),t._awsSDK}get provider(){if("kModuleError"in t.awsSDK)throw t.awsSDK.kModuleError;if(this._provider)return this._provider;let{AWS_STS_REGIONAL_ENDPOINTS:e="",AWS_REGION:r=""}=process.env;e=e.toLowerCase(),r=r.toLowerCase();let n=r.length!==0&&e.length!==0,i=e==="regional"||e==="legacy"&&!new Set(["ap-northeast-1","ap-south-1","ap-southeast-1","ap-southeast-2","aws-global","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]).has(r);return this._provider=n&&i?t.awsSDK.fromNodeProviderChain({clientConfig:{region:r}}):t.awsSDK.fromNodeProviderChain(),this._provider}async getCredentials(){try{let e=await this.provider();return{AccessKeyId:e.accessKeyId,SecretAccessKey:e.secretAccessKey,Token:e.sessionToken,Expiration:e.expiration}}catch(e){throw new nEe.MongoAWSError(e.message,{cause:e})}}};Zg.AWSSDKCredentialProvider=VC});var $q=m(zC=>{"use strict";Object.defineProperty(zC,"__esModule",{value:!0});zC.loadAWSCredentials=iEe;var sEe=WC();async function iEe(t,e){let r=new sEe.AWSSDKCredentialProvider(e),{SecretAccessKey:n="",AccessKeyId:s="",Token:i}=await r.getCredentials(),o={secretAccessKey:n,accessKeyId:s};return i!=null&&(o.sessionToken=i),{...t,aws:o}}});var KC=m(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.tokenCache=Bn.AzureCredentialCache=Bn.AZURE_BASE_URL=void 0;Bn.addAzureParams=qq;Bn.prepareRequest=jq;Bn.fetchAzureKMSToken=Lq;Bn.loadAzureCredentials=lEe;var oEe=z(),aEe=X(),bp=Ep(),uEe=6e3;Bn.AZURE_BASE_URL="http://169.254.169.254/metadata/identity/oauth2/token?";var e2=class{constructor(){this.cachedToken=null}async getToken(){return(this.cachedToken==null||this.needsRefresh(this.cachedToken))&&(this.cachedToken=await this._getToken()),{accessToken:this.cachedToken.accessToken}}needsRefresh(e){return e.expiresOnTimestamp-Date.now()<=uEe}resetCache(){this.cachedToken=null}_getToken(){return Lq()}};Bn.AzureCredentialCache=e2;Bn.tokenCache=new e2;async function cEe(t){let{status:e,body:r}=t,n=(()=>{try{return JSON.parse(r)}catch{throw new bp.MongoCryptAzureKMSRequestError("Malformed JSON body in GET request.")}})();if(e!==200)throw new bp.MongoCryptAzureKMSRequestError("Unable to complete request.",n);if(!n.access_token)throw new bp.MongoCryptAzureKMSRequestError("Malformed response body - missing field `access_token`.");if(!n.expires_in)throw new bp.MongoCryptAzureKMSRequestError("Malformed response body - missing field `expires_in`.");let s=Number(n.expires_in)*1e3;if(Number.isNaN(s))throw new bp.MongoCryptAzureKMSRequestError("Malformed response body - unable to parse int from `expires_in` field.");return{accessToken:n.access_token,expiresOnTimestamp:Date.now()+s}}function qq(t,e,r){return t.searchParams.append("api-version","2018-02-01"),t.searchParams.append("resource",e),r&&t.searchParams.append("client_id",r),t}function jq(t){let e=new URL(t.url?.toString()??Bn.AZURE_BASE_URL);return qq(e,"https://vault.azure.net"),{headers:{...t.headers,"Content-Type":"application/json",Metadata:!0},url:e}}async function Lq(t={}){let{headers:e,url:r}=jq(t);try{let n=await(0,aEe.get)(r,{headers:e});return await cEe(n)}catch(n){throw n instanceof oEe.MongoNetworkTimeoutError?new bp.MongoCryptAzureKMSRequestError(`[Azure KMS] ${n.message}`):n}}async function lEe(t){let e=await Bn.tokenCache.getToken();return{...t,azure:e}}});var Uq=m(HC=>{"use strict";Object.defineProperty(HC,"__esModule",{value:!0});HC.loadGCPCredentials=dEe;var pEe=pi();async function dEe(t){let e=(0,pEe.getGcpMetadata)();if("kModuleError"in e)return t;let{access_token:r}=await e.instance({property:"service-accounts/default/token"});return{...t,gcp:{accessToken:r}}}});var GC=m(r2=>{"use strict";Object.defineProperty(r2,"__esModule",{value:!0});r2.isEmptyCredentials=t2;r2.refreshKMSCredentials=yEe;var hEe=$q(),fEe=KC(),mEe=Uq();function t2(t,e){let r=e[t];return r==null?!1:typeof r=="object"&&Object.keys(r).length===0}async function yEe(t,e){let r=t;return t2("aws",t)&&(r=await(0,hEe.loadAWSCredentials)(r,e?.aws)),t2("gcp",t)&&(r=await(0,mEe.loadGCPCredentials)(r)),t2("azure",t)&&(r=await(0,fEe.loadAzureCredentials)(r)),r}});var YC=m(n2=>{"use strict";Object.defineProperty(n2,"__esModule",{value:!0});n2.StateMachine=void 0;var Vq=require("fs/promises"),gEe=require("net"),_Ee=require("tls"),vo=pe(),Wq=Xr(),EEe=pi(),bEe=z(),zq=ir(),Va=X(),wEe=s2(),Wa=Ep(),oh=null;function SEe(){if(oh==null){let t=(0,EEe.getSocks)();if("kModuleError"in t)throw t.kModuleError;oh=t}return oh}var ec=0,Hq=1,Gq=2,Jq=3,Yq=7,Qq=4,Xq=5,Zq=6,AEe=443,OEe=new Map([[ec,"MONGOCRYPT_CTX_ERROR"],[Hq,"MONGOCRYPT_CTX_NEED_MONGO_COLLINFO"],[Gq,"MONGOCRYPT_CTX_NEED_MONGO_MARKINGS"],[Jq,"MONGOCRYPT_CTX_NEED_MONGO_KEYS"],[Yq,"MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS"],[Qq,"MONGOCRYPT_CTX_NEED_KMS"],[Xq,"MONGOCRYPT_CTX_READY"],[Zq,"MONGOCRYPT_CTX_DONE"]]),CEe=["tlsInsecure","tlsAllowInvalidCertificates","tlsAllowInvalidHostnames"];function Kq(t){process.env.MONGODB_CRYPT_DEBUG&&console.error(t)}var vEe,JC=class{constructor(e,r=(0,vo.pluckBSONSerializeOptions)(e)){this.options=e,this.bsonOptions=r}async execute(e,r,n){let s=e._keyVaultNamespace,i=e._keyVaultClient,o=e._metaDataClient,a=e._mongocryptdClient,u=e._mongocryptdManager,c=null,l=()=>r.status,p=()=>r.state;for(;p()!==Zq&&p()!==ec;)switch(n.signal?.throwIfAborted(),Kq(`[context#${r.id}] ${OEe.get(p())||p()}`),p()){case Hq:{let d=(0,vo.deserialize)(r.nextMongoOperation());if(!o)throw new Wa.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_COLLINFO but metadata client is undefined");let h=this.fetchCollectionInfo(o,r.ns,d,n);for await(let f of h)if(r.addMongoOperationResponse((0,vo.serialize)(f)),p()===ec)break;if(p()===ec)break;r.finishMongoOperation();break}case Gq:{let d=r.nextMongoOperation();if(p()===ec)break;if(!a)throw new Wa.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_MARKINGS but mongocryptdClient is undefined");let h=u?await u.withRespawn(this.markCommand.bind(this,a,r.ns,d,n)):await this.markCommand(a,r.ns,d,n);r.addMongoOperationResponse(h),r.finishMongoOperation();break}case Jq:{let d=r.nextMongoOperation(),h=await this.fetchKeys(i,s,d,n);h.length===0&&(c=vEe??=(0,vo.serialize)({v:[]}));for(let f of h)r.addMongoOperationResponse((0,vo.serialize)(f));r.finishMongoOperation();break}case Yq:{let d=await e.askForKMSCredentials();r.provideKMSProviders((0,vo.serialize)(d));break}case Qq:{await Promise.all(this.requests(r,n)),r.finishKMSRequests();break}case Xq:{let d=r.finalize();if(p()===ec){let h=l().message||"Finalization error";throw new Wa.MongoCryptError(h)}c=d;break}default:throw new Wa.MongoCryptError(`Unknown state: ${p()}`)}if(p()===ec||c==null){let d=l().message;throw d||Kq("unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message."),new Wa.MongoCryptError(d??"unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.")}return c}async kmsRequest(e,r){let n=e.endpoint.split(":"),s=n[1]!=null?Number.parseInt(n[1],10):AEe,i={host:n[0],servername:n[0],port:s,...(0,wEe.autoSelectSocketOptions)(this.options.socketOptions||{})},o=e.message,a=new Va.BufferPool,u,c;function l(){for(let y of[c,u])y&&y.destroy()}function p(y){return new Wa.MongoCryptError("KMS request failed",{cause:y})}function d(){return new Wa.MongoCryptError("KMS request closed")}let h=this.options.tlsOptions;if(h){let y=e.kmsProvider,g=h[y];if(g){let _=this.validateTlsOptions(y,g);if(_)throw _;try{await this.setTlsOptions(g,i)}catch(w){throw p(w)}}}let f;try{if(this.options.proxyOptions&&this.options.proxyOptions.proxyHost){u=new gEe.Socket;let{promise:w,reject:O,resolve:E}=(0,Va.promiseWithResolvers)();u.once("error",x=>O(p(x))).once("close",()=>O(d())).once("connect",()=>E());let A={...i,host:this.options.proxyOptions.proxyHost,port:this.options.proxyOptions.proxyPort||1080};u.connect(A),await w;try{oh??=SEe(),i.socket=(await oh.SocksClient.createConnection({existing_socket:u,command:"connect",destination:{host:i.host,port:i.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:this.options.proxyOptions.proxyUsername,password:this.options.proxyOptions.proxyPassword}})).socket}catch(x){throw p(x)}}c=_Ee.connect(i,()=>{c.write(o)});let{promise:y,reject:g,resolve:_}=(0,Va.promiseWithResolvers)();f=(0,Va.addAbortListener)(r?.signal,function(){l(),g(this.reason)}),c.once("error",w=>g(p(w))).once("close",()=>g(d())).on("data",w=>{for(a.append(w);e.bytesNeeded>0&&a.length;){let O=Math.min(e.bytesNeeded,a.length);e.addResponse(a.read(O))}e.bytesNeeded<=0&&_()}),await(r?.timeoutContext?.csotEnabled()?Promise.all([y,zq.Timeout.expires(r.timeoutContext?.remainingTimeMS)]):y)}catch(y){throw y instanceof zq.TimeoutError?new bEe.MongoOperationTimeoutError("KMS request timed out"):y}finally{l(),f?.[Va.kDispose]()}}*requests(e,r){for(let n=e.nextKMSRequest();n!=null;n=e.nextKMSRequest())yield this.kmsRequest(n,r)}validateTlsOptions(e,r){let n=Object.keys(r);for(let s of CEe)if(n.includes(s))return new Wa.MongoCryptError(`Insecure TLS options prohibited for ${e}: ${s}`)}async setTlsOptions(e,r){if(e.secureContext&&(r.secureContext=e.secureContext),e.tlsCertificateKeyFile){let n=await Vq.readFile(e.tlsCertificateKeyFile);r.cert=r.key=n}e.tlsCAFile&&(r.ca=await Vq.readFile(e.tlsCAFile)),e.tlsCertificateKeyFilePassword&&(r.passphrase=e.tlsCertificateKeyFilePassword)}fetchCollectionInfo(e,r,n,s){let{db:i}=Va.MongoDBCollectionNamespace.fromString(r);return e.db(i).listCollections(n,{promoteLongs:!1,promoteValues:!1,timeoutContext:s?.timeoutContext&&new Wq.CursorTimeoutContext(s?.timeoutContext,Symbol()),signal:s?.signal,nameOnly:!1})}async markCommand(e,r,n,s){let{db:i}=Va.MongoDBCollectionNamespace.fromString(r),o={promoteLongs:!1,promoteValues:!1},a=(0,vo.deserialize)(n,o),u={timeoutMS:void 0,signal:void 0};s?.timeoutContext?.csotEnabled()&&(u.timeoutMS=s.timeoutContext.remainingTimeMS),s?.signal&&(u.signal=s.signal);let c=await e.db(i).command(a,{...o,...u});return(0,vo.serialize)(c,this.bsonOptions)}fetchKeys(e,r,n,s){let{db:i,collection:o}=Va.MongoDBCollectionNamespace.fromString(r),a={timeoutContext:void 0,signal:void 0};return s?.timeoutContext!=null&&(a.timeoutContext=new Wq.CursorTimeoutContext(s.timeoutContext,Symbol())),s?.signal!=null&&(a.signal=s.signal),e.db(i).collection(o,{readConcern:{level:"majority"}}).find((0,vo.deserialize)(n),a).toArray()}};n2.StateMachine=JC});var s2=m(ch=>{"use strict";Object.defineProperty(ch,"__esModule",{value:!0});ch.ClientEncryption=void 0;ch.autoSelectSocketOptions=uh;var _n=pe(),xEe=pi(),ah=ir(),In=X(),xo=Ep(),ej=GC(),i2=YC(),QC=class t{static getMongoCrypt(){let e=(0,xEe.getMongoDBClientEncryption)();if("kModuleError"in e)throw e.kModuleError;return e.MongoCrypt}constructor(e,r){this._client=e,this._proxyOptions=r.proxyOptions??{},this._tlsOptions=r.tlsOptions??{},this._kmsProviders=r.kmsProviders||{};let{timeoutMS:n}=(0,In.resolveTimeoutOptions)(e,r);if(this._timeoutMS=n,this._credentialProviders=r.credentialProviders,r.credentialProviders?.aws&&!(0,ej.isEmptyCredentials)("aws",this._kmsProviders))throw new xo.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");if(r.keyVaultNamespace==null)throw new xo.MongoCryptInvalidArgumentError("Missing required option `keyVaultNamespace`");let s={...r,kmsProviders:Buffer.isBuffer(this._kmsProviders)?this._kmsProviders:(0,_n.serialize)(this._kmsProviders),errorWrapper:xo.defaultErrorWrapper};this._keyVaultNamespace=r.keyVaultNamespace,this._keyVaultClient=r.keyVaultClient||e;let i=t.getMongoCrypt();this._mongoCrypt=new i(s)}async createDataKey(e,r={}){if(r.keyAltNames&&!Array.isArray(r.keyAltNames))throw new xo.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but was of type ${typeof r.keyAltNames}.`);let n;r.keyAltNames&&r.keyAltNames.length>0&&(n=r.keyAltNames.map((h,f)=>{if(typeof h!="string")throw new xo.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but item at index ${f} was of type ${typeof h}`);return(0,_n.serialize)({keyAltName:h})}));let s;r.keyMaterial&&(s=(0,_n.serialize)({keyMaterial:r.keyMaterial}));let i=(0,_n.serialize)({provider:e,...r.masterKey}),o=this._mongoCrypt.makeDataKeyContext(i,{keyAltNames:n,keyMaterial:s}),a=new i2.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:uh(this._client.s.options)}),u=r?.timeoutContext??ah.TimeoutContext.create((0,In.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})),c=(0,_n.deserialize)(await a.execute(this,o,{timeoutContext:u})),{db:l,collection:p}=In.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),{insertedId:d}=await this._keyVaultClient.db(l).collection(p).insertOne(c,{writeConcern:{w:"majority"},timeoutMS:u?.csotEnabled()?u?.getRemainingTimeMSOrThrow():void 0});return d}async rewrapManyDataKey(e,r){let n;if(r){let h=Object.assign({provider:r.provider},r.masterKey);n=(0,_n.serialize)(h)}let s=(0,_n.serialize)(e),i=this._mongoCrypt.makeRewrapManyDataKeyContext(s,n),o=new i2.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:uh(this._client.s.options)}),a=ah.TimeoutContext.create((0,In.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})),{v:u}=(0,_n.deserialize)(await o.execute(this,i,{timeoutContext:a}));if(u.length===0)return{};let{db:c,collection:l}=In.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),p=u.map(h=>({updateOne:{filter:{_id:h._id},update:{$set:{masterKey:h.masterKey,keyMaterial:h.keyMaterial},$currentDate:{updateDate:!0}}}}));return{bulkWriteResult:await this._keyVaultClient.db(c).collection(l).bulkWrite(p,{writeConcern:{w:"majority"},timeoutMS:a.csotEnabled()?a?.remainingTimeMS:void 0})}}async deleteKey(e){let{db:r,collection:n}=In.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).deleteOne({_id:e},{writeConcern:{w:"majority"},timeoutMS:this._timeoutMS})}getKeys(){let{db:e,collection:r}=In.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return this._keyVaultClient.db(e).collection(r).find({},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKey(e){let{db:r,collection:n}=In.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).findOne({_id:e},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKeyByAltName(e){let{db:r,collection:n}=In.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).findOne({keyAltNames:e},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async addKeyAltName(e,r){let{db:n,collection:s}=In.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(n).collection(s).findOneAndUpdate({_id:e},{$addToSet:{keyAltNames:r}},{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async removeKeyAltName(e,r){let{db:n,collection:s}=In.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),i=[{$set:{keyAltNames:{$cond:[{$eq:["$keyAltNames",[r]]},"$$REMOVE",{$filter:{input:"$keyAltNames",cond:{$ne:["$$this",r]}}}]}}}];return await this._keyVaultClient.db(n).collection(s).findOneAndUpdate({_id:e},i,{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async createEncryptedCollection(e,r,n){let{provider:s,masterKey:i,createCollectionOptions:{encryptedFields:{...o},...a}}=n,u=this._timeoutMS!=null?ah.TimeoutContext.create((0,In.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0;if(Array.isArray(o.fields)){let c=o.fields.map(async d=>d==null||typeof d!="object"||d.keyId!=null?d:{...d,keyId:await this.createDataKey(s,{masterKey:i,timeoutContext:u?.csotEnabled()?u?.clone():void 0})}),l=await Promise.allSettled(c);o.fields=l.map((d,h)=>d.status==="fulfilled"?d.value:o.fields[h]);let p=l.find(d=>d.status==="rejected");if(p!=null)throw new xo.MongoCryptCreateDataKeyError(o,{cause:p.reason})}try{return{collection:await e.createCollection(r,{...a,encryptedFields:o,timeoutMS:u?.csotEnabled()?u?.getRemainingTimeMSOrThrow():void 0}),encryptedFields:o}}catch(c){throw new xo.MongoCryptCreateEncryptedCollectionError(o,{cause:c})}}async encrypt(e,r){return await this._encrypt(e,!1,r)}async encryptExpression(e,r){return await this._encrypt(e,!0,r)}async decrypt(e){let r=(0,_n.serialize)({v:e}),n=this._mongoCrypt.makeExplicitDecryptionContext(r),s=new i2.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:uh(this._client.s.options)}),i=this._timeoutMS!=null?ah.TimeoutContext.create((0,In.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:o}=(0,_n.deserialize)(await s.execute(this,n,{timeoutContext:i}));return o}async askForKMSCredentials(){return await(0,ej.refreshKMSCredentials)(this._kmsProviders,this._credentialProviders)}static get libmongocryptVersion(){return t.getMongoCrypt().libmongocryptVersion}async _encrypt(e,r,n){let{algorithm:s,keyId:i,keyAltName:o,contentionFactor:a,queryType:u,rangeOptions:c,textOptions:l}=n,p={expressionMode:r,algorithm:s};if(i&&(p.keyId=i.buffer),o){if(i)throw new xo.MongoCryptInvalidArgumentError('"options" cannot contain both "keyId" and "keyAltName"');if(typeof o!="string")throw new xo.MongoCryptInvalidArgumentError(`"options.keyAltName" must be of type string, but was of type ${typeof o}`);p.keyAltName=(0,_n.serialize)({keyAltName:o})}(typeof a=="number"||typeof a=="bigint")&&(p.contentionFactor=a),typeof u=="string"&&(p.queryType=u),typeof c=="object"&&(p.rangeOptions=(0,_n.serialize)(c)),typeof l=="object"&&(p.textOptions=(0,_n.serialize)(l));let d=(0,_n.serialize)({v:e}),h=new i2.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:uh(this._client.s.options)}),f=this._mongoCrypt.makeExplicitEncryptionContext(d,p),y=this._timeoutMS!=null?ah.TimeoutContext.create((0,In.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:g}=(0,_n.deserialize)(await h.execute(this,f,{timeoutContext:y}));return g}};ch.ClientEncryption=QC;function uh(t){let e={autoSelectFamily:!0};return"autoSelectFamily"in t&&(e.autoSelectFamily=t.autoSelectFamily),"autoSelectFamilyAttemptTimeout"in t&&(e.autoSelectFamilyAttemptTimeout=t.autoSelectFamilyAttemptTimeout),e}});var tj=m(o2=>{"use strict";Object.defineProperty(o2,"__esModule",{value:!0});o2.MongocryptdManager=void 0;var TEe=z(),XC=class t{static{this.DEFAULT_MONGOCRYPTD_URI="mongodb://localhost:27020"}constructor(e={}){this.spawnPath="",this.spawnArgs=[],this.uri=typeof e.mongocryptdURI=="string"&&e.mongocryptdURI.length>0?e.mongocryptdURI:t.DEFAULT_MONGOCRYPTD_URI,this.bypassSpawn=!!e.mongocryptdBypassSpawn,Object.hasOwn(e,"mongocryptdSpawnPath")&&e.mongocryptdSpawnPath&&(this.spawnPath=e.mongocryptdSpawnPath),Object.hasOwn(e,"mongocryptdSpawnArgs")&&Array.isArray(e.mongocryptdSpawnArgs)&&(this.spawnArgs=this.spawnArgs.concat(e.mongocryptdSpawnArgs)),this.spawnArgs.filter(r=>typeof r=="string").every(r=>r.indexOf("--idleShutdownTimeoutSecs")<0)&&this.spawnArgs.push("--idleShutdownTimeoutSecs","60")}async spawn(){let e=this.spawnPath||"mongocryptd",{spawn:r}=require("child_process");this._child=r(e,this.spawnArgs,{stdio:"ignore",detached:!0}),this._child.on("error",()=>{}),this._child.unref()}async withRespawn(e){try{return await e()}catch(n){if(!(n instanceof TEe.MongoNetworkTimeoutError&&!this.bypassSpawn))throw n}return await this.spawn(),await e()}};o2.MongocryptdManager=XC});var nv=m(wp=>{"use strict";var rj;Object.defineProperty(wp,"__esModule",{value:!0});wp.AutoEncrypter=wp.AutoEncryptionLoggerLevel=void 0;var nj=require("net"),lh=pe(),DEe=Lt(),MEe=pi(),ZC=z(),PEe=tc(),BEe=X(),ev=s2(),tv=Ep(),IEe=tj(),sj=GC(),ij=YC();wp.AutoEncryptionLoggerLevel=Object.freeze({FatalError:0,Error:1,Warning:2,Info:3,Trace:4});var rv=class t{static{rj=DEe.kDecorateResult}static getMongoCrypt(){let e=(0,MEe.getMongoDBClientEncryption)();if("kModuleError"in e)throw e.kModuleError;return e.MongoCrypt}constructor(e,r){if(this[rj]=!1,this._client=e,this._bypassEncryption=r.bypassAutoEncryption===!0,this._keyVaultNamespace=r.keyVaultNamespace||"admin.datakeys",this._keyVaultClient=r.keyVaultClient||e,this._metaDataClient=r.metadataClient||e,this._proxyOptions=r.proxyOptions||{},this._tlsOptions=r.tlsOptions||{},this._kmsProviders=r.kmsProviders||{},this._credentialProviders=r.credentialProviders,r.credentialProviders?.aws&&!(0,sj.isEmptyCredentials)("aws",this._kmsProviders))throw new tv.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");let n={errorWrapper:tv.defaultErrorWrapper};r.schemaMap&&(n.schemaMap=Buffer.isBuffer(r.schemaMap)?r.schemaMap:(0,lh.serialize)(r.schemaMap)),r.encryptedFieldsMap&&(n.encryptedFieldsMap=Buffer.isBuffer(r.encryptedFieldsMap)?r.encryptedFieldsMap:(0,lh.serialize)(r.encryptedFieldsMap)),n.kmsProviders=Buffer.isBuffer(this._kmsProviders)?this._kmsProviders:(0,lh.serialize)(this._kmsProviders),r.options?.logger&&(n.logger=r.options.logger),r.extraOptions&&r.extraOptions.cryptSharedLibPath&&(n.cryptSharedLibPath=r.extraOptions.cryptSharedLibPath),r.bypassQueryAnalysis&&(n.bypassQueryAnalysis=r.bypassQueryAnalysis),r.keyExpirationMS!=null&&(n.keyExpirationMS=r.keyExpirationMS),this._bypassMongocryptdAndCryptShared=this._bypassEncryption||!!r.bypassQueryAnalysis,r.extraOptions&&r.extraOptions.cryptSharedLibSearchPaths?n.cryptSharedLibSearchPaths=r.extraOptions.cryptSharedLibSearchPaths:this._bypassMongocryptdAndCryptShared||(n.cryptSharedLibSearchPaths=["$SYSTEM"]);let s=t.getMongoCrypt();if(this._mongocrypt=new s(n),this._contextCounter=0,r.extraOptions&&r.extraOptions.cryptSharedLibRequired&&!this.cryptSharedLibVersionInfo)throw new tv.MongoCryptInvalidArgumentError("`cryptSharedLibRequired` set but no crypt_shared library loaded");if(!this._bypassMongocryptdAndCryptShared&&!this.cryptSharedLibVersionInfo){this._mongocryptdManager=new IEe.MongocryptdManager(r.extraOptions);let i={serverSelectionTimeoutMS:1e4};(r.extraOptions==null||typeof r.extraOptions.mongocryptdURI!="string")&&!nj.getDefaultAutoSelectFamily&&(i.family=4),nj.getDefaultAutoSelectFamily&&Object.assign(i,(0,ev.autoSelectSocketOptions)(this._client.s?.options??{})),this._mongocryptdClient=new PEe.MongoClient(this._mongocryptdManager.uri,i)}}async init(){if(!(this._bypassMongocryptdAndCryptShared||this.cryptSharedLibVersionInfo)){if(!this._mongocryptdManager)throw new ZC.MongoRuntimeError("Reached impossible state: mongocryptdManager is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdClient)throw new ZC.MongoRuntimeError("Reached impossible state: mongocryptdClient is undefined when neither bypassSpawn nor the shared lib are specified.");this._mongocryptdManager.bypassSpawn||await this._mongocryptdManager.spawn();try{return await this._mongocryptdClient.connect()}catch(e){throw new ZC.MongoRuntimeError("Unable to connect to `mongocryptd`, please make sure it is running or in your PATH for auto-spawn",{cause:e})}}}async close(){await this._mongocryptdClient?.close()}async encrypt(e,r,n={}){if(n.signal?.throwIfAborted(),this._bypassEncryption)return r;let s=Buffer.isBuffer(r)?r:(0,lh.serialize)(r,n),i=this._mongocrypt.makeEncryptionContext(BEe.MongoDBCollectionNamespace.fromString(e).db,s);i.id=this._contextCounter++,i.ns=e,i.document=r;let o=new ij.StateMachine({promoteValues:!1,promoteLongs:!1,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:(0,ev.autoSelectSocketOptions)(this._client.s.options)});return(0,lh.deserialize)(await o.execute(this,i,n),{promoteValues:!1,promoteLongs:!1})}async decrypt(e,r={}){r.signal?.throwIfAborted();let n=this._mongocrypt.makeDecryptionContext(e);return n.id=this._contextCounter++,await new ij.StateMachine({...r,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:(0,ev.autoSelectSocketOptions)(this._client.s.options)}).execute(this,n,r)}async askForKMSCredentials(){return await(0,sj.refreshKMSCredentials)(this._kmsProviders,this._credentialProviders)}get cryptSharedLibVersionInfo(){return this._mongocrypt.cryptSharedLibVersionInfo}static get libmongocryptVersion(){return t.getMongoCrypt().libmongocryptVersion}};wp.AutoEncrypter=rv});var aj=m(a2=>{"use strict";Object.defineProperty(a2,"__esModule",{value:!0});a2.Encrypter=void 0;var NEe=nv(),kEe=Lt(),REe=pi(),oj=z(),FEe=tc(),sv=class{constructor(e,r,n){if(typeof n.autoEncryption!="object")throw new oj.MongoInvalidArgumentError('Option "autoEncryption" must be specified');this.internalClient=null,this.bypassAutoEncryption=!!n.autoEncryption.bypassAutoEncryption,this.needsConnecting=!1,n.maxPoolSize===0&&n.autoEncryption.keyVaultClient==null?n.autoEncryption.keyVaultClient=e:n.autoEncryption.keyVaultClient==null&&(n.autoEncryption.keyVaultClient=this.getInternalClient(e,r,n)),this.bypassAutoEncryption?n.autoEncryption.metadataClient=void 0:n.maxPoolSize===0?n.autoEncryption.metadataClient=e:n.autoEncryption.metadataClient=this.getInternalClient(e,r,n),n.proxyHost&&(n.autoEncryption.proxyOptions={proxyHost:n.proxyHost,proxyPort:n.proxyPort,proxyUsername:n.proxyUsername,proxyPassword:n.proxyPassword}),this.autoEncrypter=new NEe.AutoEncrypter(e,n.autoEncryption)}getInternalClient(e,r,n){let s=this.internalClient;if(s==null){let i={};for(let o of[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)])["autoEncryption","minPoolSize","servers","caseTranslate","dbName"].includes(o)||Reflect.set(i,o,Reflect.get(n,o));i.minPoolSize=0,s=new FEe.MongoClient(r,i),this.internalClient=s;for(let o of kEe.MONGO_CLIENT_EVENTS)for(let a of e.listeners(o))s.on(o,a);e.on("newListener",(o,a)=>{s?.on(o,a)}),this.needsConnecting=!0}return s}async connectInternalClient(){let e=this.internalClient;this.needsConnecting&&e!=null&&(this.needsConnecting=!1,await e.connect())}async close(e){let r;try{await this.autoEncrypter.close()}catch(s){r=s}let n=this.internalClient;if(n!=null&&e!==n)return await n.close();if(r!=null)throw r}static checkForMongoCrypt(){let e=(0,REe.getMongoDBClientEncryption)();if("kModuleError"in e)throw new oj.MongoMissingDependencyError("Auto-encryption requested, but the module is not installed. Please add `mongodb-client-encryption` as a dependency of your project",{cause:e.kModuleError,dependencyName:"mongodb-client-encryption"})}};a2.Encrypter=sv});var hv=m(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.SENSITIVE_COMMANDS=ks.CommandFailedEvent=ks.CommandSucceededEvent=ks.CommandStartedEvent=void 0;var ph=Lt(),lj=X(),iv=rh(),ov=class{constructor(e,r,n){this.name=ph.COMMAND_STARTED;let s=pv(r),i=cv(s),{address:o,connectionId:a,serviceId:u}=dv(e);ks.SENSITIVE_COMMANDS.has(i)&&(this.commandObj={},this.commandObj[i]=!0),this.address=o,this.connectionId=a,this.serviceId=u,this.requestId=r.requestId,this.databaseName=r.databaseName,this.commandName=i,this.command=lv(i,s,s),this.serverConnectionId=n}get hasServiceId(){return!!this.serviceId}};ks.CommandStartedEvent=ov;var av=class{constructor(e,r,n,s,i){this.name=ph.COMMAND_SUCCEEDED;let o=pv(r),a=cv(o),{address:u,connectionId:c,serviceId:l}=dv(e);this.address=u,this.connectionId=c,this.serviceId=l,this.requestId=r.requestId,this.commandName=a,this.duration=(0,lj.calculateDurationInMs)(s),this.reply=lv(a,o,jEe(n)),this.serverConnectionId=i,this.databaseName=r.databaseName}get hasServiceId(){return!!this.serviceId}};ks.CommandSucceededEvent=av;var uv=class{constructor(e,r,n,s,i){this.name=ph.COMMAND_FAILED;let o=pv(r),a=cv(o),{address:u,connectionId:c,serviceId:l}=dv(e);this.address=u,this.connectionId=c,this.serviceId=l,this.requestId=r.requestId,this.commandName=a,this.duration=(0,lj.calculateDurationInMs)(s),this.failure=lv(a,o,n),this.serverConnectionId=i,this.databaseName=r.databaseName}get hasServiceId(){return!!this.serviceId}};ks.CommandFailedEvent=uv;ks.SENSITIVE_COMMANDS=new Set(["authenticate","saslStart","saslContinue","getnonce","createUser","updateUser","copydbgetnonce","copydbsaslstart","copydb"]);var $Ee=new Set(["hello",ph.LEGACY_HELLO_COMMAND,ph.LEGACY_HELLO_COMMAND_CAMEL_CASE]),cv=t=>Object.keys(t)[0],qEe=t=>t.ns.split(".")[1],lv=(t,e,r)=>ks.SENSITIVE_COMMANDS.has(t)||$Ee.has(t)&&e.speculativeAuthenticate?{}:r,uj={$query:"filter",$orderby:"sort",$hint:"hint",$comment:"comment",$maxScan:"maxScan",$max:"max",$min:"min",$returnKey:"returnKey",$showDiskLoc:"showRecordId",$maxTimeMS:"maxTimeMS",$snapshot:"snapshot"},cj={numberToSkip:"skip",numberToReturn:"batchSize",returnFieldSelector:"projection"};function pv(t){if(t instanceof iv.OpMsgRequest){let n={...t.command};return n.ops instanceof iv.DocumentSequence&&(n.ops=n.ops.documents),n.nsInfo instanceof iv.DocumentSequence&&(n.nsInfo=n.nsInfo.documents),n}if(t.query?.$query){let n;return t.ns==="admin.$cmd"?n=Object.assign({},t.query.$query):(n={find:qEe(t)},Object.keys(uj).forEach(s=>{t.query[s]!=null&&(n[uj[s]]={...t.query[s]})})),Object.keys(cj).forEach(s=>{let i=s;t[i]!=null&&(n[cj[i]]=t[i])}),n}let e={},r={...t};return t.query&&(e={...t.query},r.query=e),t.query?e:r}function jEe(t){return t&&(t.result?t.result:t)}function dv(t){let e;return"id"in t&&(e=t.id),{address:t.address,serviceId:t.serviceId,connectionId:e}}});var dh=m(Op=>{"use strict";Object.defineProperty(Op,"__esModule",{value:!0});Op.ServerDescription=void 0;Op.parseServerType=pj;Op.compareTopologyVersion=dj;var Sp=pe(),LEe=z(),Ap=X(),Qt=ts(),UEe=new Set([Qt.ServerType.RSPrimary,Qt.ServerType.Standalone,Qt.ServerType.Mongos,Qt.ServerType.LoadBalancer]),VEe=new Set([Qt.ServerType.RSPrimary,Qt.ServerType.RSSecondary,Qt.ServerType.Mongos,Qt.ServerType.Standalone,Qt.ServerType.LoadBalancer]),fv=class{constructor(e,r,n={}){if(e==null||e==="")throw new LEe.MongoRuntimeError("ServerDescription must be provided with a non-empty address");this.address=typeof e=="string"?Ap.HostAddress.fromString(e).toString():e.toString(),this.type=pj(r,n),this.hosts=r?.hosts?.map(s=>s.toLowerCase())??[],this.passives=r?.passives?.map(s=>s.toLowerCase())??[],this.arbiters=r?.arbiters?.map(s=>s.toLowerCase())??[],this.tags=r?.tags??{},this.minWireVersion=r?.minWireVersion??0,this.maxWireVersion=r?.maxWireVersion??0,this.roundTripTime=n?.roundTripTime??-1,this.minRoundTripTime=n?.minRoundTripTime??0,this.lastUpdateTime=(0,Ap.now)(),this.lastWriteDate=r?.lastWrite?.lastWriteDate??0,this.error=n.error??null,this.error?.stack,this.topologyVersion=this.error?.topologyVersion??r?.topologyVersion??null,this.setName=r?.setName??null,this.setVersion=r?.setVersion??null,this.electionId=r?.electionId??null,this.logicalSessionTimeoutMinutes=r?.logicalSessionTimeoutMinutes??null,this.maxMessageSizeBytes=r?.maxMessageSizeBytes??null,this.maxWriteBatchSize=r?.maxWriteBatchSize??null,this.maxBsonObjectSize=r?.maxBsonObjectSize??null,this.primary=r?.primary??null,this.me=r?.me?.toLowerCase()??null,this.$clusterTime=r?.$clusterTime??null,this.iscryptd=!!r?.iscryptd}get hostAddress(){return Ap.HostAddress.fromString(this.address)}get allHosts(){return this.hosts.concat(this.arbiters).concat(this.passives)}get isReadable(){return this.type===Qt.ServerType.RSSecondary||this.isWritable}get isDataBearing(){return VEe.has(this.type)}get isWritable(){return UEe.has(this.type)}get host(){let e=`:${this.port}`.length;return this.address.slice(0,-e)}get port(){let e=this.address.split(":").pop();return e?Number.parseInt(e,10):27017}equals(e){let r=this.topologyVersion===e?.topologyVersion||dj(this.topologyVersion,e?.topologyVersion)===0,n=this.electionId!=null&&e?.electionId!=null?(0,Ap.compareObjectId)(this.electionId,e.electionId)===0:this.electionId===e?.electionId;return e!=null&&e.iscryptd===this.iscryptd&&(0,Ap.errorStrictEqual)(this.error,e.error)&&this.type===e.type&&this.minWireVersion===e.minWireVersion&&(0,Ap.arrayStrictEqual)(this.hosts,e.hosts)&&WEe(this.tags,e.tags)&&this.setName===e.setName&&this.setVersion===e.setVersion&&n&&this.primary===e.primary&&this.logicalSessionTimeoutMinutes===e.logicalSessionTimeoutMinutes&&r}};Op.ServerDescription=fv;function pj(t,e){return e?.loadBalanced?Qt.ServerType.LoadBalancer:!t||!t.ok?Qt.ServerType.Unknown:t.isreplicaset?Qt.ServerType.RSGhost:t.msg&&t.msg==="isdbgrid"?Qt.ServerType.Mongos:t.setName?t.hidden?Qt.ServerType.RSOther:t.isWritablePrimary?Qt.ServerType.RSPrimary:t.secondary?Qt.ServerType.RSSecondary:t.arbiterOnly?Qt.ServerType.RSArbiter:Qt.ServerType.RSOther:Qt.ServerType.Standalone}function WEe(t,e){let r=Object.keys(t),n=Object.keys(e);return r.length===n.length&&r.every(s=>e[s]===t[s])}function dj(t,e){if(t==null||e==null||!t.processId.equals(e.processId))return-1;let r=typeof t.counter=="bigint"?Sp.Long.fromBigInt(t.counter):Sp.Long.isLong(t.counter)?t.counter:Sp.Long.fromNumber(t.counter),n=typeof e.counter=="bigint"?Sp.Long.fromBigInt(e.counter):Sp.Long.isLong(e.counter)?e.counter:Sp.Long.fromNumber(e.counter);return r.compare(n)}});var hj=m(u2=>{"use strict";Object.defineProperty(u2,"__esModule",{value:!0});u2.StreamDescription=void 0;var zEe=pe(),KEe=ts(),HEe=dh(),GEe=["minWireVersion","maxWireVersion","maxBsonObjectSize","maxMessageSizeBytes","maxWriteBatchSize","logicalSessionTimeoutMinutes"],mv=class{constructor(e,r){this.hello=null,this.address=e,this.type=KEe.ServerType.Unknown,this.minWireVersion=void 0,this.maxWireVersion=void 0,this.maxBsonObjectSize=16777216,this.maxMessageSizeBytes=48e6,this.maxWriteBatchSize=1e5,this.logicalSessionTimeoutMinutes=r?.logicalSessionTimeoutMinutes,this.loadBalanced=!!r?.loadBalanced,this.compressors=r&&r.compressors&&Array.isArray(r.compressors)?r.compressors:[],this.serverConnectionId=null}receiveResponse(e){if(e!=null){this.hello=e,this.type=(0,HEe.parseServerType)(e),"connectionId"in e?this.serverConnectionId=this.parseServerConnectionID(e.connectionId):this.serverConnectionId=null;for(let r of GEe)e[r]!=null&&(this[r]=e[r]),"__nodejs_mock_server__"in e&&(this.__nodejs_mock_server__=e.__nodejs_mock_server__);e.compression&&(this.compressor=this.compressors.filter(r=>e.compression?.includes(r))[0])}}parseServerConnectionID(e){return zEe.Long.isLong(e)?e.toBigInt():BigInt(e)}};u2.StreamDescription=mv});var fj=m(yv=>{"use strict";Object.defineProperty(yv,"__esModule",{value:!0});yv.onData=JEe;var hh=X();function JEe(t,{timeoutContext:e,signal:r}){r?.throwIfAborted();let n=new hh.List,s=new hh.List,i=null,o=!1,a={next(){let h=n.shift();if(h!=null)return Promise.resolve({value:h,done:!1});if(i!=null){let _=Promise.reject(i);return i=null,_}if(o)return d();let{promise:f,resolve:y,reject:g}=(0,hh.promiseWithResolvers)();return s.push({resolve:y,reject:g}),f},return(){return d()},throw(h){return p(h),Promise.resolve({value:void 0,done:!0})},[Symbol.asyncIterator](){return this},async[Symbol.asyncDispose](){await d()}};t.on("data",l),t.on("error",p);let u=(0,hh.addAbortListener)(r,function(){p(this.reason)}),c=e?.timeoutForSocketRead;return c?.throwIfExpired(),c?.then(void 0,p),a;function l(h){let f=s.shift();f!=null?f.resolve({value:h,done:!1}):n.push(h)}function p(h){let f=s.shift();f!=null?f.reject(h):i=h,d()}function d(){t.off("data",l),t.off("error",p),u?.[hh.kDispose](),o=!0,c?.clear();let h={value:void 0,done:o};for(let f of s)f.resolve(h);return Promise.resolve(h)}}});var Ev=m(p2=>{"use strict";Object.defineProperty(p2,"__esModule",{value:!0});p2.TopologyDescription=void 0;var YEe=pe(),l2=Eo(),c2=z(),gv=X(),Be=ts(),za=dh(),QEe=l2.MIN_SUPPORTED_SERVER_VERSION,XEe=l2.MAX_SUPPORTED_SERVER_VERSION,mj=l2.MIN_SUPPORTED_WIRE_VERSION,yj=l2.MAX_SUPPORTED_WIRE_VERSION,ZEe=new Set([Be.ServerType.Mongos,Be.ServerType.Unknown]),gj=new Set([Be.ServerType.Mongos,Be.ServerType.Standalone]),_j=new Set([Be.ServerType.RSSecondary,Be.ServerType.RSArbiter,Be.ServerType.RSOther]),_v=class t{constructor(e,r=null,n=null,s=null,i=null,o=null,a=null){a=a??{},this.type=e??Be.TopologyType.Unknown,this.servers=r??new Map,this.stale=!1,this.compatible=!0,this.heartbeatFrequencyMS=a.heartbeatFrequencyMS??0,this.localThresholdMS=a.localThresholdMS??15,this.setName=n??null,this.maxElectionId=i??null,this.maxSetVersion=s??null,this.commonWireVersion=o??0;for(let u of this.servers.values())if(!(u.type===Be.ServerType.Unknown||u.type===Be.ServerType.LoadBalancer)&&(u.minWireVersion>yj&&(this.compatible=!1,this.compatibilityError=`Server at ${u.address} requires wire version ${u.minWireVersion}, but this version of the driver only supports up to ${yj} (MongoDB ${XEe})`),u.maxWireVersion<mj)){this.compatible=!1,this.compatibilityError=`Server at ${u.address} reports wire version ${u.maxWireVersion}, but this version of the driver requires at least ${mj} (MongoDB ${QEe}).`;break}this.logicalSessionTimeoutMinutes=null;for(let[,u]of this.servers)if(u.isReadable){if(u.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=null;break}if(this.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=u.logicalSessionTimeoutMinutes;continue}this.logicalSessionTimeoutMinutes=Math.min(this.logicalSessionTimeoutMinutes,u.logicalSessionTimeoutMinutes)}}updateFromSrvPollingEvent(e,r=0){let n=e.hostnames(),s=new Set(this.servers.keys()),i=new Set(n),o=new Set;for(let u of s)i.delete(u),n.has(u)||o.add(u);if(i.size===0&&o.size===0)return this;let a=new Map(this.servers);for(let u of o)a.delete(u);if(i.size>0){if(r===0)for(let u of i)a.set(u,new za.ServerDescription(u));else if(a.size<r){let u=(0,gv.shuffle)(i,r-a.size);for(let c of u)a.set(c,new za.ServerDescription(c))}}return new t(this.type,a,this.setName,this.maxSetVersion,this.maxElectionId,this.commonWireVersion,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}update(e){let r=e.address,{type:n,setName:s,maxSetVersion:i,maxElectionId:o,commonWireVersion:a}=this,u=e.type,c=new Map(this.servers);if(e.maxWireVersion!==0&&(a==null?a=e.maxWireVersion:a=Math.min(a,e.maxWireVersion)),typeof e.setName=="string"&&typeof s=="string"&&e.setName!==s&&(n===Be.TopologyType.Single?e=new za.ServerDescription(r):c.delete(r)),c.set(r,e),n===Be.TopologyType.Single)return new t(Be.TopologyType.Single,c,s,i,o,a,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS});if(n===Be.TopologyType.Unknown&&(u===Be.ServerType.Standalone&&this.servers.size!==1?c.delete(r):n=ebe(u)),n===Be.TopologyType.Sharded&&(ZEe.has(u)||c.delete(r)),n===Be.TopologyType.ReplicaSetNoPrimary){if(gj.has(u)&&c.delete(r),u===Be.ServerType.RSPrimary){let l=Ej(c,e,s,i,o);n=l[0],s=l[1],i=l[2],o=l[3]}else if(_j.has(u)){let l=rbe(c,e,s);n=l[0],s=l[1]}}if(n===Be.TopologyType.ReplicaSetWithPrimary)if(gj.has(u))c.delete(r),n=rc(c);else if(u===Be.ServerType.RSPrimary){let l=Ej(c,e,s,i,o);n=l[0],s=l[1],i=l[2],o=l[3]}else _j.has(u)?n=tbe(c,e,s):n=rc(c);return new t(n,c,s,i,o,a,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}get error(){let e=Array.from(this.servers.values()).filter(r=>r.error);return e.length>0?e[0].error:null}get hasKnownServers(){return Array.from(this.servers.values()).some(e=>e.type!==Be.ServerType.Unknown)}get hasDataBearingServers(){return Array.from(this.servers.values()).some(e=>e.isDataBearing)}hasServer(e){return this.servers.has(e)}toJSON(){return YEe.EJSON.serialize(this)}};p2.TopologyDescription=_v;function ebe(t){switch(t){case Be.ServerType.Standalone:return Be.TopologyType.Single;case Be.ServerType.Mongos:return Be.TopologyType.Sharded;case Be.ServerType.RSPrimary:return Be.TopologyType.ReplicaSetWithPrimary;case Be.ServerType.RSOther:case Be.ServerType.RSSecondary:return Be.TopologyType.ReplicaSetNoPrimary;default:return Be.TopologyType.Unknown}}function Ej(t,e,r=null,n=null,s=null){let i=(u,c,l)=>`primary marked stale due to electionId/setVersion mismatch: server setVersion: ${u.setVersion}, server electionId: ${u.electionId}, topology setVersion: ${c}, topology electionId: ${l}`;if(r=r||e.setName,r!==e.setName)return t.delete(e.address),[rc(t),r,n,s];if(e.maxWireVersion>=17){let u=(0,gv.compareObjectId)(s,e.electionId),c=u===0,l=u===-1,p=(n??-1)<=(e.setVersion??-1);if(l||c&&p)s=e.electionId,n=e.setVersion;else return t.set(e.address,new za.ServerDescription(e.address,void 0,{error:new c2.MongoStalePrimaryError(i(e,n,s))})),[rc(t),r,n,s]}else{let u=e.electionId?e.electionId:null;if(e.setVersion&&u){if(n&&s&&(n>e.setVersion||(0,gv.compareObjectId)(s,u)>0))return t.set(e.address,new za.ServerDescription(e.address,void 0,{error:new c2.MongoStalePrimaryError(i(e,n,s))})),[rc(t),r,n,s];s=e.electionId}e.setVersion!=null&&(n==null||e.setVersion>n)&&(n=e.setVersion)}for(let[u,c]of t)if(c.type===Be.ServerType.RSPrimary&&c.address!==e.address){t.set(u,new za.ServerDescription(c.address,void 0,{error:new c2.MongoStalePrimaryError("primary marked stale due to discovery of newer primary")}));break}e.allHosts.forEach(u=>{t.has(u)||t.set(u,new za.ServerDescription(u))});let o=Array.from(t.keys()),a=e.allHosts;return o.filter(u=>a.indexOf(u)===-1).forEach(u=>{t.delete(u)}),[rc(t),r,n,s]}function tbe(t,e,r=null){if(r==null)throw new c2.MongoRuntimeError('Argument "setName" is required if connected to a replica set');return(r!==e.setName||e.me&&e.address!==e.me)&&t.delete(e.address),rc(t)}function rbe(t,e,r=null){let n=Be.TopologyType.ReplicaSetNoPrimary;return r=r??e.setName,r!==e.setName?(t.delete(e.address),[n,r]):(e.allHosts.forEach(s=>{t.has(s)||t.set(s,new za.ServerDescription(s))}),e.me&&e.address!==e.me&&t.delete(e.address),[n,r])}function rc(t){for(let e of t.values())if(e.type===Be.ServerType.RSPrimary)return Be.TopologyType.ReplicaSetWithPrimary;return Be.TopologyType.ReplicaSetNoPrimary}});var wj=m(d2=>{"use strict";Object.defineProperty(d2,"__esModule",{value:!0});d2.getReadPreference=ibe;d2.isSharded=obe;var nbe=z(),bv=sr(),bj=ts(),sbe=Ev();function ibe(t){let e=t?.readPreference??bv.ReadPreference.primary;if(typeof e=="string"&&(e=bv.ReadPreference.fromString(e)),!(e instanceof bv.ReadPreference))throw new nbe.MongoInvalidArgumentError('Option "readPreference" must be a ReadPreference instance');return e}function obe(t){return t==null?!1:t.description&&t.description.type===bj.ServerType.Mongos?!0:t.description&&t.description instanceof sbe.TopologyDescription?Array.from(t.description.servers.values()).some(r=>r.type===bj.ServerType.Mongos):!1}});var y2=m(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});To.CryptoConnection=To.SizedMessageTransform=To.Connection=void 0;To.hasSessionSupport=mbe;var abe=require("stream"),Cj=require("timers"),ube=pe(),Ka=Lt(),gt=z(),Sj=Ba(),cbe=is(),lbe=sr(),pbe=ts(),Aj=$d(),Oj=ir(),us=X(),wv=hv(),h2=rh(),dbe=hj(),hbe=nh(),fbe=fj(),fh=ze(),Sv=wj();function mbe(t){return t.description.logicalSessionTimeoutMinutes!=null}function ybe(t,e){if(e.proxyHost)return e.hostAddress.toString();let{remoteAddress:r,remotePort:n}=t;return typeof r=="string"&&typeof n=="number"?us.HostAddress.fromHostPort(r,n).toString():(0,us.uuidV4)().toString("hex")}var f2=class t extends cbe.TypedEventEmitter{static{this.COMMAND_STARTED=Ka.COMMAND_STARTED}static{this.COMMAND_SUCCEEDED=Ka.COMMAND_SUCCEEDED}static{this.COMMAND_FAILED=Ka.COMMAND_FAILED}static{this.CLUSTER_TIME_RECEIVED=Ka.CLUSTER_TIME_RECEIVED}static{this.CLOSE=Ka.CLOSE}static{this.PINNED=Ka.PINNED}static{this.UNPINNED=Ka.UNPINNED}constructor(e,r){super(),this.lastHelloMS=-1,this.helloOk=!1,this.delayedTimeoutId=null,this.closed=!1,this.clusterTime=null,this.error=null,this.dataEvents=null,this.on("error",us.noop),this.socket=e,this.id=r.id,this.address=ybe(e,r),this.socketTimeoutMS=r.socketTimeoutMS??0,this.monitorCommands=r.monitorCommands,this.serverApi=r.serverApi,this.mongoLogger=r.mongoLogger,this.established=!1,this.description=new dbe.StreamDescription(this.address,r),this.generation=r.generation,this.lastUseTime=(0,us.now)(),this.messageStream=this.socket.on("error",this.onSocketError.bind(this)).pipe(new m2({connection:this})).on("error",this.onTransformError.bind(this)),this.socket.on("close",this.onClose.bind(this)),this.socket.on("timeout",this.onTimeout.bind(this)),this.messageStream.pause()}get hello(){return this.description.hello}set hello(e){this.description.receiveResponse(e),Object.freeze(this.description)}get serviceId(){return this.hello?.serviceId}get loadBalanced(){return this.description.loadBalanced}get idleTime(){return(0,us.calculateDurationInMs)(this.lastUseTime)}get hasSessionSupport(){return this.description.logicalSessionTimeoutMinutes!=null}get supportsOpMsg(){return this.description!=null&&(0,us.maxWireVersion)(this)>=6&&!this.description.__nodejs_mock_server__}get shouldEmitAndLogCommand(){return(this.monitorCommands||this.established&&!this.authContext?.reauthenticating&&this.mongoLogger?.willLog(Sj.MongoLoggableComponent.COMMAND,Sj.SeverityLevel.DEBUG))??!1}markAvailable(){this.lastUseTime=(0,us.now)()}onSocketError(e){this.onError(new gt.MongoNetworkError(e.message,{cause:e}))}onTransformError(e){this.onError(e)}onError(e){this.cleanup(e)}onClose(){let e=`connection ${this.id} to ${this.address} closed`;this.cleanup(new gt.MongoNetworkError(e))}onTimeout(){this.delayedTimeoutId=(0,Cj.setTimeout)(()=>{let e=`connection ${this.id} to ${this.address} timed out`,r=this.hello==null;this.cleanup(new gt.MongoNetworkTimeoutError(e,{beforeHandshake:r}))},1).unref()}destroy(){if(this.closed)return;this.removeAllListeners(t.PINNED),this.removeAllListeners(t.UNPINNED);let e=`connection ${this.id} to ${this.address} closed`;this.cleanup(new gt.MongoNetworkError(e))}cleanup(e){this.closed||(this.socket.destroy(),this.error=e,this.dataEvents?.throw(e).then(void 0,us.squashError),this.closed=!0,this.emit(t.CLOSE))}prepareCommand(e,r,n){let s={...r},i=(0,Sv.getReadPreference)(n),o=n?.session,a=this.clusterTime;if(this.serverApi){let{version:l,strict:p,deprecationErrors:d}=this.serverApi;s.apiVersion=l,p!=null&&(s.apiStrict=p),d!=null&&(s.apiDeprecationErrors=d)}if(this.hasSessionSupport&&o){o.clusterTime&&a&&o.clusterTime.clusterTime.greaterThan(a.clusterTime)&&(a=o.clusterTime);let l=(0,Aj.applySession)(o,s,n);if(l)throw l}else if(o?.explicit)throw new gt.MongoCompatibilityError("Current topology does not support sessions");a&&(s.$clusterTime=a),this.description.type!==pbe.ServerType.Standalone&&(!(0,Sv.isSharded)(this)&&!this.description.loadBalanced&&this.supportsOpMsg&&n.directConnection===!0&&i?.mode==="primary"?s.$readPreference=lbe.ReadPreference.primaryPreferred.toJSON():(0,Sv.isSharded)(this)&&!this.supportsOpMsg&&i?.mode!=="primary"?s={$query:s,$readPreference:i.toJSON()}:i?.mode!=="primary"&&(s.$readPreference=i.toJSON()));let u={numberToSkip:0,numberToReturn:-1,checkKeys:!1,secondaryOk:i.secondaryOk(),...n};return n.timeoutContext?.addMaxTimeMSToCommand(s,n),this.supportsOpMsg?new h2.OpMsgRequest(e,s,u):new h2.OpQueryRequest(e,s,u)}async*sendWire(e,r,n){this.throwIfAborted();let s=r.socketTimeoutMS??r?.timeoutContext?.getSocketTimeoutMS()??this.socketTimeoutMS;this.socket.setTimeout(s);try{if(await this.writeCommand(e,{agreedCompressor:this.description.compressor??"none",zlibCompressionLevel:this.description.zlibCompressionLevel,timeoutContext:r.timeoutContext,signal:r.signal}),e.moreToCome){yield fh.MongoDBResponse.empty;return}if(this.throwIfAborted(),r.timeoutContext?.csotEnabled()&&r.timeoutContext.minRoundTripTime!=null&&r.timeoutContext.remainingTimeMS<r.timeoutContext.minRoundTripTime)throw new gt.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining");for await(let i of this.readMany(r)){this.socket.setTimeout(0);let o=i.parse();yield(n??fh.MongoDBResponse).make(o),this.throwIfAborted(),this.socket.setTimeout(s)}}finally{this.socket.setTimeout(0)}}async*sendCommand(e,r,n,s){n?.signal?.throwIfAborted();let i=this.prepareCommand(e.db,r,n),o=0;this.shouldEmitAndLogCommand&&(o=(0,us.now)(),this.emitAndLogCommand(this.monitorCommands,t.COMMAND_STARTED,i.databaseName,this.established,new wv.CommandStartedEvent(this,i,this.description.serverConnectionId)));let a=n.documentsReturnedIn==null||!n.raw?n:{...n,raw:!1,fieldsAsRaw:{[n.documentsReturnedIn]:!0}},u,c;try{this.throwIfAborted();for await(u of this.sendWire(i,n,s)){if(c=void 0,n.session!=null&&(0,Aj.updateSessionFromResponse)(n.session,u),u.$clusterTime&&(this.clusterTime=u.$clusterTime,this.emit(t.CLUSTER_TIME_RECEIVED,u.$clusterTime)),u.ok===0)throw n.timeoutContext?.csotEnabled()&&u.isMaxTimeExpiredError?new gt.MongoOperationTimeoutError("Server reported a timeout error",{cause:new gt.MongoServerError(c??=u.toObject(a))}):new gt.MongoServerError(c??=u.toObject(a));this.shouldEmitAndLogCommand&&this.emitAndLogCommand(this.monitorCommands,t.COMMAND_SUCCEEDED,i.databaseName,this.established,new wv.CommandSucceededEvent(this,i,i.moreToCome?{ok:1}:c??=u.toObject(a),o,this.description.serverConnectionId)),s==null?yield c??=u.toObject(a):yield u,this.throwIfAborted()}}catch(l){throw this.shouldEmitAndLogCommand&&this.emitAndLogCommand(this.monitorCommands,t.COMMAND_FAILED,i.databaseName,this.established,new wv.CommandFailedEvent(this,i,l,o,this.description.serverConnectionId)),l}}async command(e,r,n={},s){this.throwIfAborted(),n.signal?.throwIfAborted();for await(let i of this.sendCommand(e,r,n,s)){if(n.timeoutContext?.csotEnabled()){if(fh.MongoDBResponse.is(i)){if(i.isMaxTimeExpiredError)throw new gt.MongoOperationTimeoutError("Server reported a timeout error",{cause:new gt.MongoServerError(i.toObject())})}else if(Array.isArray(i?.writeErrors)&&i.writeErrors.some(o=>o?.code===gt.MONGODB_ERROR_CODES.MaxTimeMSExpired)||i?.writeConcernError?.code===gt.MONGODB_ERROR_CODES.MaxTimeMSExpired)throw new gt.MongoOperationTimeoutError("Server reported a timeout error",{cause:new gt.MongoServerError(i)})}return i}throw new gt.MongoUnexpectedServerResponseError("Unable to get response from server")}exhaustCommand(e,r,n,s){(async()=>{this.throwIfAborted();for await(let o of this.sendCommand(e,r,n))s(void 0,o),this.throwIfAborted();throw new gt.MongoUnexpectedServerResponseError("Server ended moreToCome unexpectedly")})().then(void 0,s)}throwIfAborted(){if(this.error)throw this.error}async writeCommand(e,r){let n=r.agreedCompressor==="none"||!h2.OpCompressedRequest.canCompress(e)?e:new h2.OpCompressedRequest(e,{agreedCompressor:r.agreedCompressor??"none",zlibCompressionLevel:r.zlibCompressionLevel??0}),s=Buffer.concat(await n.toBin());if(r.timeoutContext?.csotEnabled()&&r.timeoutContext.minRoundTripTime!=null&&r.timeoutContext.remainingTimeMS<r.timeoutContext.minRoundTripTime)throw new gt.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining");try{if(this.socket.write(s))return}catch(u){let c=new gt.MongoNetworkError("unexpected error writing to socket",{cause:u});throw this.onError(c),c}let i=(0,us.once)(this.socket,"drain",r),o=r?.timeoutContext?.timeoutForSocketWrite,a=o?Promise.race([i,o]):i;try{return await a}catch(u){if(Oj.TimeoutError.is(u)){let c=new gt.MongoOperationTimeoutError("Timed out at socket write");throw this.onError(c),c}else u===r.signal?.reason&&this.onError(u);throw u}finally{o?.clear()}}async*readMany(e){try{this.dataEvents=(0,fbe.onData)(this.messageStream,e),this.messageStream.resume();for await(let r of this.dataEvents){let n=await(0,hbe.decompressResponse)(r);if(yield n,!n.moreToCome)return}}catch(r){if(Oj.TimeoutError.is(r)){let n=new gt.MongoOperationTimeoutError(`Timed out during socket read (${r.duration}ms)`);throw this.dataEvents=null,this.onError(n),n}else r===e.signal?.reason&&this.onError(r);throw r}finally{this.dataEvents=null,this.messageStream.pause()}}};To.Connection=f2;var m2=class extends abe.Transform{constructor({connection:e}){super({writableObjectMode:!1,readableObjectMode:!0}),this.bufferPool=new us.BufferPool,this.connection=e}_transform(e,r,n){for(this.connection.delayedTimeoutId!=null&&((0,Cj.clearTimeout)(this.connection.delayedTimeoutId),this.connection.delayedTimeoutId=null),this.bufferPool.append(e);this.bufferPool.length;){let s=this.bufferPool.getInt32();if(s==null)break;if(s<0)return n(new gt.MongoParseError(`Message size cannot be negative: ${s}`));if(s>this.bufferPool.length)break;let i=this.bufferPool.read(s);if(!this.push(i))return n(new gt.MongoRuntimeError("SizedMessageTransform does not support backpressure"))}n()}};To.SizedMessageTransform=m2;var Av=class extends f2{constructor(e,r){super(e,r),this.autoEncrypter=r.autoEncrypter}async command(e,r,n,s){let{autoEncrypter:i}=this;if(!i)throw new gt.MongoRuntimeError("No AutoEncrypter available for encryption");if((0,us.maxWireVersion)(this)===0)return await super.command(e,r,n,s);let a=r.find||r.findAndModify?r.sort:null,u=r.createIndexes?r.indexes.map(h=>h.key):null,c=await i.encrypt(e.toString(),r,n);if(a!=null&&(r.find||r.findAndModify)&&(c.sort=a),u!=null&&r.createIndexes)for(let[h,f]of u.entries())c.indexes[h].key=f;let l=await super.command(e,c,n,s??fh.MongoDBResponse),p=await i.decrypt(l.toBytes(),n),d=s?.make(p)??(0,ube.deserialize)(p,n);return i[Ka.kDecorateResult]&&(s==null?(0,us.decorateDecryptionResult)(d,l.toObject(),!0):d instanceof fh.CursorResponse&&(d.encryptedResponse=l)),d}};To.CryptoConnection=Av});var vv=m(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs.LEGAL_TCP_SOCKET_OPTIONS=cs.LEGAL_TLS_SOCKET_OPTIONS=void 0;cs.connect=bbe;cs.makeConnection=Dj;cs.performInitialHandshake=Mj;cs.prepareHandshakeDocument=Pj;cs.makeSocket=_2;var xj=require("net"),gbe=require("tls"),Tj=Lt(),_be=pi(),Ot=z(),Ov=X(),Ebe=$a(),g2=zi(),vj=y2(),Cp=Eo();async function bbe(t){let e=null;try{let r=await _2(t);return e=Dj(t,r),await Mj(e,t),e}catch(r){throw e?.destroy(),r}}function Dj(t,e){let r=t.connectionType??vj.Connection;return t.autoEncrypter&&(r=vj.CryptoConnection),new r(e,t)}function wbe(t,e){let r=Number(t.maxWireVersion),n=Number(t.minWireVersion),s=!Number.isNaN(r)&&r>=Cp.MIN_SUPPORTED_WIRE_VERSION,i=!Number.isNaN(n)&&n<=Cp.MAX_SUPPORTED_WIRE_VERSION;if(s){if(i)return null;let a=`Server at ${e.hostAddress} reports minimum wire version ${JSON.stringify(t.minWireVersion)}, but this version of the Node.js Driver requires at most ${Cp.MAX_SUPPORTED_WIRE_VERSION} (MongoDB ${Cp.MAX_SUPPORTED_SERVER_VERSION})`;return new Ot.MongoCompatibilityError(a)}let o=`Server at ${e.hostAddress} reports maximum wire version ${JSON.stringify(t.maxWireVersion)??0}, but this version of the Node.js Driver requires at least ${Cp.MIN_SUPPORTED_WIRE_VERSION} (MongoDB ${Cp.MIN_SUPPORTED_SERVER_VERSION})`;return new Ot.MongoCompatibilityError(o)}async function Mj(t,e){let r=e.credentials;if(r&&r.mechanism!==g2.AuthMechanism.MONGODB_DEFAULT&&!e.authProviders.getOrCreateProvider(r.mechanism,r.mechanismProperties))throw new Ot.MongoInvalidArgumentError(`AuthMechanism '${r.mechanism}' not supported`);let n=new Ebe.AuthContext(t,r,e);t.authContext=n;let s=await Pj(n),i={...e,raw:!1};typeof e.connectTimeoutMS=="number"&&(i.socketTimeoutMS=e.connectTimeoutMS);let o=new Date().getTime(),a=await c(s,i);"isWritablePrimary"in a||(a.isWritablePrimary=a[Tj.LEGACY_HELLO_COMMAND]),a.helloOk&&(t.helloOk=!0);let u=wbe(a,e);if(u)throw u;if(e.loadBalanced&&!a.serviceId)throw new Ot.MongoCompatibilityError("Driver attempted to initialize in load balancing mode, but the server does not support this mode.");if(t.hello=a,t.lastHelloMS=new Date().getTime()-o,!a.arbiterOnly&&r){n.response=a;let l=r.resolveAuthMechanism(a),p=e.authProviders.getOrCreateProvider(l.mechanism,l.mechanismProperties);if(!p)throw new Ot.MongoInvalidArgumentError(`No AuthProvider for ${l.mechanism} defined.`);try{await p.auth(n)}catch(d){throw d instanceof Ot.MongoError&&(d.addErrorLabel(Ot.MongoErrorLabel.HandshakeError),(0,Ot.needsRetryableWriteLabel)(d,a.maxWireVersion,t.description.type)&&d.addErrorLabel(Ot.MongoErrorLabel.RetryableWriteError)),d}}t.established=!0;async function c(l,p){try{return await t.command((0,Ov.ns)("admin.$cmd"),l,p)}catch(d){throw d instanceof Ot.MongoError&&d.addErrorLabel(Ot.MongoErrorLabel.HandshakeError),d}}}async function Pj(t){let e=t.options,r=e.compressors?e.compressors:[],{serverApi:n}=t.connection,s=await e.metadata,i={[n?.version||e.loadBalanced===!0?"hello":Tj.LEGACY_HELLO_COMMAND]:1,helloOk:!0,client:s,compression:r};e.loadBalanced===!0&&(i.loadBalanced=!0);let o=t.credentials;if(o){if(o.mechanism===g2.AuthMechanism.MONGODB_DEFAULT&&o.username){i.saslSupportedMechs=`${o.source}.${o.username}`;let u=t.options.authProviders.getOrCreateProvider(g2.AuthMechanism.MONGODB_SCRAM_SHA256,o.mechanismProperties);if(!u)throw new Ot.MongoInvalidArgumentError(`No AuthProvider for ${g2.AuthMechanism.MONGODB_SCRAM_SHA256} defined.`);return await u.prepare(i,t)}let a=t.options.authProviders.getOrCreateProvider(o.mechanism,o.mechanismProperties);if(!a)throw new Ot.MongoInvalidArgumentError(`No AuthProvider for ${o.mechanism} defined.`);return await a.prepare(i,t)}return i}cs.LEGAL_TLS_SOCKET_OPTIONS=["allowPartialTrustChain","ALPNProtocols","ca","cert","checkServerIdentity","ciphers","crl","ecdhCurve","key","minDHSize","passphrase","pfx","rejectUnauthorized","secureContext","secureProtocol","servername","session"];cs.LEGAL_TCP_SOCKET_OPTIONS=["autoSelectFamily","autoSelectFamilyAttemptTimeout","keepAliveInitialDelay","family","hints","localAddress","localPort","lookup"];function Cv(t){let e=t.hostAddress;if(!e)throw new Ot.MongoInvalidArgumentError('Option "hostAddress" is required');let r={};for(let n of cs.LEGAL_TCP_SOCKET_OPTIONS)t[n]!=null&&(r[n]=t[n]);if(r.keepAliveInitialDelay??=12e4,r.keepAlive=!0,r.noDelay=t.noDelay??!0,typeof e.socketPath=="string")return r.path=e.socketPath,r;if(typeof e.host=="string")return r.host=e.host,r.port=e.port,r;throw new Ot.MongoRuntimeError(`Unexpected HostAddress ${JSON.stringify(e)}`)}function Sbe(t){let e=Cv(t);for(let r of cs.LEGAL_TLS_SOCKET_OPTIONS)t[r]!=null&&(e[r]=t[r]);return t.existingSocket&&(e.socket=t.existingSocket),e.servername==null&&e.host&&!xj.isIP(e.host)&&(e.servername=e.host),e}async function _2(t){let e=t.tls??!1,r=t.connectTimeoutMS??3e4,n=t.existingSocket,s;if(t.proxyHost!=null)return await Obe({...t,connectTimeoutMS:r});if(e){let c=gbe.connect(Sbe(t));typeof c.disableRenegotiation=="function"&&c.disableRenegotiation(),s=c}else n?s=n:s=xj.createConnection(Cv(t));s.setTimeout(r);let i=null,{promise:o,resolve:a,reject:u}=(0,Ov.promiseWithResolvers)();if(n)a(s);else{let c=performance.now(),l=e?"secureConnect":"connect";s.once(l,()=>a(s)).once("error",p=>u(new Ot.MongoNetworkError(Ot.MongoError.buildErrorMessage(p),{cause:p}))).once("timeout",()=>{u(new Ot.MongoNetworkTimeoutError(`Socket '${l}' timed out after ${performance.now()-c|0}ms (connectTimeoutMS: ${r})`))}).once("close",()=>u(new Ot.MongoNetworkError(`Socket closed after ${performance.now()-c|0} during connection establishment`))),t.cancellationToken!=null&&(i=()=>u(new Ot.MongoNetworkError(`Socket connection establishment was cancelled after ${performance.now()-c|0}`)),t.cancellationToken.once("cancel",i))}try{return s=await o,s}catch(c){throw s.destroy(),c}finally{s.setTimeout(0),i!=null&&t.cancellationToken?.removeListener("cancel",i)}}var mh=null;function Abe(){if(mh==null){let t=(0,_be.getSocks)();if("kModuleError"in t)throw t.kModuleError;mh=t}return mh}async function Obe(t){let e=Ov.HostAddress.fromHostPort(t.proxyHost??"",t.proxyPort??1080),r=await _2({...t,hostAddress:e,tls:!1,proxyHost:void 0}),n=Cv(t);if(typeof n.host!="string"||typeof n.port!="number")throw new Ot.MongoInvalidArgumentError("Can only make Socks5 connections to TCP hosts");mh??=Abe();let s;try{s=(await mh.SocksClient.createConnection({existing_socket:r,timeout:t.connectTimeoutMS,command:"connect",destination:{host:n.host,port:n.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:t.proxyUsername||void 0,password:t.proxyPassword||void 0}})).socket}catch(i){throw new Ot.MongoNetworkError(Ot.MongoError.buildErrorMessage(i),{cause:i})}return await _2({...t,existingSocket:s,proxyHost:void 0})}});var E2=m(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.ServerHeartbeatFailedEvent=Xt.ServerHeartbeatSucceededEvent=Xt.ServerHeartbeatStartedEvent=Xt.TopologyClosedEvent=Xt.TopologyOpeningEvent=Xt.TopologyDescriptionChangedEvent=Xt.ServerClosedEvent=Xt.ServerOpeningEvent=Xt.ServerDescriptionChangedEvent=void 0;var Do=Lt(),xv=class{constructor(e,r,n,s){this.name=Do.SERVER_DESCRIPTION_CHANGED,this.topologyId=e,this.address=r,this.previousDescription=n,this.newDescription=s}};Xt.ServerDescriptionChangedEvent=xv;var Tv=class{constructor(e,r){this.name=Do.SERVER_OPENING,this.topologyId=e,this.address=r}};Xt.ServerOpeningEvent=Tv;var Dv=class{constructor(e,r){this.name=Do.SERVER_CLOSED,this.topologyId=e,this.address=r}};Xt.ServerClosedEvent=Dv;var Mv=class{constructor(e,r,n){this.name=Do.TOPOLOGY_DESCRIPTION_CHANGED,this.topologyId=e,this.previousDescription=r,this.newDescription=n}};Xt.TopologyDescriptionChangedEvent=Mv;var Pv=class{constructor(e){this.name=Do.TOPOLOGY_OPENING,this.topologyId=e}};Xt.TopologyOpeningEvent=Pv;var Bv=class{constructor(e){this.name=Do.TOPOLOGY_CLOSED,this.topologyId=e}};Xt.TopologyClosedEvent=Bv;var Iv=class{constructor(e,r){this.name=Do.SERVER_HEARTBEAT_STARTED,this.connectionId=e,this.awaited=r}};Xt.ServerHeartbeatStartedEvent=Iv;var Nv=class{constructor(e,r,n,s){this.name=Do.SERVER_HEARTBEAT_SUCCEEDED,this.connectionId=e,this.duration=r,this.reply=n??{},this.awaited=s}};Xt.ServerHeartbeatSucceededEvent=Nv;var kv=class{constructor(e,r,n,s){this.name=Do.SERVER_HEARTBEAT_FAILED,this.connectionId=e,this.duration=r,this.failure=n,this.awaited=s}};Xt.ServerHeartbeatFailedEvent=kv});var Gv=m(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.ConnectionPoolClearedEvent=ut.ConnectionCheckedInEvent=ut.ConnectionCheckedOutEvent=ut.ConnectionCheckOutFailedEvent=ut.ConnectionCheckOutStartedEvent=ut.ConnectionClosedEvent=ut.ConnectionReadyEvent=ut.ConnectionCreatedEvent=ut.ConnectionPoolClosedEvent=ut.ConnectionPoolReadyEvent=ut.ConnectionPoolCreatedEvent=ut.ConnectionPoolMonitoringEvent=void 0;var mi=Lt(),Hv=X(),Nn=class{constructor(e){this.time=new Date,this.address=e.address}};ut.ConnectionPoolMonitoringEvent=Nn;var Rv=class extends Nn{constructor(e){super(e),this.name=mi.CONNECTION_POOL_CREATED;let{maxConnecting:r,maxPoolSize:n,minPoolSize:s,maxIdleTimeMS:i,waitQueueTimeoutMS:o}=e.options;this.options={maxConnecting:r,maxPoolSize:n,minPoolSize:s,maxIdleTimeMS:i,waitQueueTimeoutMS:o}}};ut.ConnectionPoolCreatedEvent=Rv;var Fv=class extends Nn{constructor(e){super(e),this.name=mi.CONNECTION_POOL_READY}};ut.ConnectionPoolReadyEvent=Fv;var $v=class extends Nn{constructor(e){super(e),this.name=mi.CONNECTION_POOL_CLOSED}};ut.ConnectionPoolClosedEvent=$v;var qv=class extends Nn{constructor(e,r){super(e),this.name=mi.CONNECTION_CREATED,this.connectionId=r.id}};ut.ConnectionCreatedEvent=qv;var jv=class extends Nn{constructor(e,r,n){super(e),this.name=mi.CONNECTION_READY,this.durationMS=(0,Hv.now)()-n,this.connectionId=r.id}};ut.ConnectionReadyEvent=jv;var Lv=class extends Nn{constructor(e,r,n,s){super(e),this.name=mi.CONNECTION_CLOSED,this.connectionId=r.id,this.reason=n,this.serviceId=r.serviceId,this.error=s??null}};ut.ConnectionClosedEvent=Lv;var Uv=class extends Nn{constructor(e){super(e),this.name=mi.CONNECTION_CHECK_OUT_STARTED}};ut.ConnectionCheckOutStartedEvent=Uv;var Vv=class extends Nn{constructor(e,r,n,s){super(e),this.name=mi.CONNECTION_CHECK_OUT_FAILED,this.durationMS=(0,Hv.now)()-n,this.reason=r,this.error=s}};ut.ConnectionCheckOutFailedEvent=Vv;var Wv=class extends Nn{constructor(e,r,n){super(e),this.name=mi.CONNECTION_CHECKED_OUT,this.durationMS=(0,Hv.now)()-n,this.connectionId=r.id}};ut.ConnectionCheckedOutEvent=Wv;var zv=class extends Nn{constructor(e,r){super(e),this.name=mi.CONNECTION_CHECKED_IN,this.connectionId=r.id}};ut.ConnectionCheckedInEvent=zv;var Kv=class extends Nn{constructor(e,r={}){super(e),this.name=mi.CONNECTION_POOL_CLEARED,this.serviceId=r.serviceId,this.interruptInUseConnections=r.interruptInUseConnections}};ut.ConnectionPoolClearedEvent=Kv});var Xv=m(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.WaitQueueTimeoutError=Ji.PoolClearedOnNetworkError=Ji.PoolClearedError=Ji.PoolClosedError=void 0;var b2=z(),Jv=class extends b2.MongoDriverError{constructor(e){super("Attempted to check out a connection from closed connection pool"),this.address=e.address}get name(){return"MongoPoolClosedError"}};Ji.PoolClosedError=Jv;var w2=class extends b2.MongoNetworkError{constructor(e,r){let n=r||`Connection pool for ${e.address} was cleared because another operation failed with: "${e.serverError?.message}"`;super(n,e.serverError?{cause:e.serverError}:void 0),this.address=e.address,this.addErrorLabel(b2.MongoErrorLabel.PoolRequestedRetry)}get name(){return"MongoPoolClearedError"}};Ji.PoolClearedError=w2;var Yv=class extends w2{constructor(e){super(e,`Connection to ${e.address} interrupted due to server monitor timeout`)}get name(){return"PoolClearedOnNetworkError"}};Ji.PoolClearedOnNetworkError=Yv;var Qv=class extends b2.MongoDriverError{constructor(e,r){super(e),this.address=r}get name(){return"MongoWaitQueueTimeoutError"}};Ji.WaitQueueTimeoutError=Qv});var Ij=m(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.ConnectionPool=kr.PoolState=void 0;var vp=require("timers"),Rs=Lt(),yi=z(),Bj=is(),Cbe=ir(),Mo=X(),vbe=vv(),S2=y2(),Nr=Gv(),xp=Xv(),xbe=n4();kr.PoolState=Object.freeze({paused:"paused",ready:"ready",closed:"closed"});var Zv=class t extends Bj.TypedEventEmitter{static{this.CONNECTION_POOL_CREATED=Rs.CONNECTION_POOL_CREATED}static{this.CONNECTION_POOL_CLOSED=Rs.CONNECTION_POOL_CLOSED}static{this.CONNECTION_POOL_CLEARED=Rs.CONNECTION_POOL_CLEARED}static{this.CONNECTION_POOL_READY=Rs.CONNECTION_POOL_READY}static{this.CONNECTION_CREATED=Rs.CONNECTION_CREATED}static{this.CONNECTION_READY=Rs.CONNECTION_READY}static{this.CONNECTION_CLOSED=Rs.CONNECTION_CLOSED}static{this.CONNECTION_CHECK_OUT_STARTED=Rs.CONNECTION_CHECK_OUT_STARTED}static{this.CONNECTION_CHECK_OUT_FAILED=Rs.CONNECTION_CHECK_OUT_FAILED}static{this.CONNECTION_CHECKED_OUT=Rs.CONNECTION_CHECKED_OUT}static{this.CONNECTION_CHECKED_IN=Rs.CONNECTION_CHECKED_IN}constructor(e,r){if(super(),this.on("error",Mo.noop),this.options=Object.freeze({connectionType:S2.Connection,...r,maxPoolSize:r.maxPoolSize??100,minPoolSize:r.minPoolSize??0,maxConnecting:r.maxConnecting??2,maxIdleTimeMS:r.maxIdleTimeMS??0,waitQueueTimeoutMS:r.waitQueueTimeoutMS??0,minPoolSizeCheckFrequencyMS:r.minPoolSizeCheckFrequencyMS??100,autoEncrypter:r.autoEncrypter}),this.options.minPoolSize>this.options.maxPoolSize)throw new yi.MongoInvalidArgumentError("Connection pool minimum size must not be greater than maximum pool size");this.poolState=kr.PoolState.paused,this.server=e,this.connections=new Mo.List,this.pending=0,this.checkedOut=new Set,this.minPoolSizeTimer=void 0,this.generation=0,this.serviceGenerations=new Map,this.connectionCounter=(0,Mo.makeCounter)(1),this.cancellationToken=new Bj.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.waitQueue=new Mo.List,this.metrics=new xbe.ConnectionPoolMetrics,this.processingWaitQueue=!1,this.mongoLogger=this.server.topology.client?.mongoLogger,this.component="connection",process.nextTick(()=>{this.emitAndLog(t.CONNECTION_POOL_CREATED,new Nr.ConnectionPoolCreatedEvent(this))})}get address(){return this.options.hostAddress.toString()}get closed(){return this.poolState===kr.PoolState.closed}get totalConnectionCount(){return this.availableConnectionCount+this.pendingConnectionCount+this.currentCheckedOutCount}get availableConnectionCount(){return this.connections.length}get pendingConnectionCount(){return this.pending}get currentCheckedOutCount(){return this.checkedOut.size}get waitQueueSize(){return this.waitQueue.length}get loadBalanced(){return this.options.loadBalanced}get serverError(){return this.server.description.error}get checkedOutConnections(){return this.checkedOut}waitQueueErrorMetrics(){return this.metrics.info(this.options.maxPoolSize)}ready(){this.poolState===kr.PoolState.paused&&(this.poolState=kr.PoolState.ready,this.emitAndLog(t.CONNECTION_POOL_READY,new Nr.ConnectionPoolReadyEvent(this)),(0,vp.clearTimeout)(this.minPoolSizeTimer),this.ensureMinPoolSize())}async checkOut(e){let r=(0,Mo.now)();this.emitAndLog(t.CONNECTION_CHECK_OUT_STARTED,new Nr.ConnectionCheckOutStartedEvent(this));let{promise:n,resolve:s,reject:i}=(0,Mo.promiseWithResolvers)(),o=e.timeoutContext.connectionCheckoutTimeout,a={resolve:s,reject:i,cancelled:!1,checkoutTime:r},u=(0,Mo.addAbortListener)(e.signal,function(){a.cancelled=!0,i(this.reason)});this.waitQueue.push(a),process.nextTick(()=>this.processWaitQueue());try{return o?.throwIfExpired(),await(o?Promise.race([n,o]):n)}catch(c){if(Cbe.TimeoutError.is(c)){o?.clear(),a.cancelled=!0,this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new Nr.ConnectionCheckOutFailedEvent(this,"timeout",a.checkoutTime));let l=new xp.WaitQueueTimeoutError(this.loadBalanced?this.waitQueueErrorMetrics():"Timed out while checking out a connection from connection pool",this.address);throw e.timeoutContext.csotEnabled()?new yi.MongoOperationTimeoutError("Timed out during connection checkout",{cause:l}):l}throw c}finally{u?.[Mo.kDispose](),o?.clear()}}checkIn(e){if(!this.checkedOut.has(e))return;let r=this.closed,n=this.connectionIsStale(e),s=!!(r||n||e.closed);if(s||(e.markAvailable(),this.connections.unshift(e)),this.checkedOut.delete(e),this.emitAndLog(t.CONNECTION_CHECKED_IN,new Nr.ConnectionCheckedInEvent(this,e)),s){let i=e.closed?"error":r?"poolClosed":"stale";this.destroyConnection(e,i)}process.nextTick(()=>this.processWaitQueue())}clear(e={}){if(this.closed)return;if(this.loadBalanced){let{serviceId:i}=e;if(!i)throw new yi.MongoRuntimeError("ConnectionPool.clear() called in load balanced mode with no serviceId.");let o=i.toHexString(),a=this.serviceGenerations.get(o);if(a==null)throw new yi.MongoRuntimeError("Service generations are required in load balancer mode.");this.serviceGenerations.set(o,a+1),this.emitAndLog(t.CONNECTION_POOL_CLEARED,new Nr.ConnectionPoolClearedEvent(this,{serviceId:i}));return}let r=e.interruptInUseConnections??!1,n=this.generation;this.generation+=1;let s=this.poolState===kr.PoolState.paused;this.poolState=kr.PoolState.paused,this.clearMinPoolSizeTimer(),s||this.emitAndLog(t.CONNECTION_POOL_CLEARED,new Nr.ConnectionPoolClearedEvent(this,{interruptInUseConnections:r})),r&&process.nextTick(()=>this.interruptInUseConnections(n)),this.processWaitQueue()}interruptInUseConnections(e){for(let r of this.checkedOut)r.generation<=e&&r.onError(new xp.PoolClearedOnNetworkError(this))}closeCheckedOutConnections(){for(let e of this.checkedOut)e.onError(new yi.MongoClientClosedError)}close(){if(!this.closed){this.cancellationToken.emit("cancel"),typeof this.connectionCounter.return=="function"&&this.connectionCounter.return(void 0),this.poolState=kr.PoolState.closed,this.clearMinPoolSizeTimer(),this.processWaitQueue();for(let e of this.connections)this.emitAndLog(t.CONNECTION_CLOSED,new Nr.ConnectionClosedEvent(this,e,"poolClosed")),e.destroy();this.connections.clear(),this.emitAndLog(t.CONNECTION_POOL_CLOSED,new Nr.ConnectionPoolClosedEvent(this))}}async reauthenticate(e){let r=e.authContext;if(!r)throw new yi.MongoRuntimeError("No auth context found on connection.");let n=r.credentials;if(!n)throw new yi.MongoMissingCredentialsError("Connection is missing credentials when asked to reauthenticate");let s=n.resolveAuthMechanism(e.hello),i=this.server.topology.client.s.authProviders.getOrCreateProvider(s.mechanism,s.mechanismProperties);if(!i)throw new yi.MongoMissingCredentialsError(`Reauthenticate failed due to no auth provider for ${n.mechanism}`);await i.reauth(r)}clearMinPoolSizeTimer(){let e=this.minPoolSizeTimer;e&&(0,vp.clearTimeout)(e)}destroyConnection(e,r){this.emitAndLog(t.CONNECTION_CLOSED,new Nr.ConnectionClosedEvent(this,e,r)),e.destroy()}connectionIsStale(e){let r=e.serviceId;if(this.loadBalanced&&r){let n=r.toHexString(),s=this.serviceGenerations.get(n);return e.generation!==s}return e.generation!==this.generation}connectionIsIdle(e){return!!(this.options.maxIdleTimeMS&&e.idleTime>this.options.maxIdleTimeMS)}destroyConnectionIfPerished(e){let r=this.connectionIsStale(e),n=this.connectionIsIdle(e);if(!r&&!n&&!e.closed)return!1;let s=e.closed?"error":r?"stale":"idle";return this.destroyConnection(e,s),!0}createConnection(e){let r={...this.options,id:this.connectionCounter.next().value,generation:this.generation,cancellationToken:this.cancellationToken,mongoLogger:this.mongoLogger,authProviders:this.server.topology.client.s.authProviders,metadata:this.server.topology.client.options.metadata};this.pending++;let n=(0,Mo.now)();this.emitAndLog(t.CONNECTION_CREATED,new Nr.ConnectionCreatedEvent(this,{id:r.id})),(0,vbe.connect)(r).then(s=>{if(this.poolState!==kr.PoolState.ready){this.pending--,s.destroy(),e(this.closed?new xp.PoolClosedError(this):new xp.PoolClearedError(this));return}for(let i of[...Rs.APM_EVENTS,S2.Connection.CLUSTER_TIME_RECEIVED])s.on(i,o=>this.emit(i,o));if(this.loadBalanced){s.on(S2.Connection.PINNED,o=>this.metrics.markPinned(o)),s.on(S2.Connection.UNPINNED,o=>this.metrics.markUnpinned(o));let i=s.serviceId;if(i){let o,a=i.toHexString();(o=this.serviceGenerations.get(a))?s.generation=o:(this.serviceGenerations.set(a,0),s.generation=0)}}s.markAvailable(),this.emitAndLog(t.CONNECTION_READY,new Nr.ConnectionReadyEvent(this,s,n)),this.pending--,e(void 0,s)},s=>{this.pending--,this.server.handleError(s),this.emitAndLog(t.CONNECTION_CLOSED,new Nr.ConnectionClosedEvent(this,{id:r.id,serviceId:void 0},"error",s)),(s instanceof yi.MongoNetworkError||s instanceof yi.MongoServerError)&&(s.connectionGeneration=r.generation),e(s??new yi.MongoRuntimeError("Connection creation failed without error"))})}ensureMinPoolSize(){let e=this.options.minPoolSize;this.poolState===kr.PoolState.ready&&(this.connections.prune(r=>this.destroyConnectionIfPerished(r)),this.totalConnectionCount<e&&this.pendingConnectionCount<this.options.maxConnecting?this.createConnection((r,n)=>{!r&&n&&(this.connections.push(n),process.nextTick(()=>this.processWaitQueue())),this.poolState===kr.PoolState.ready&&((0,vp.clearTimeout)(this.minPoolSizeTimer),this.minPoolSizeTimer=(0,vp.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS))}):((0,vp.clearTimeout)(this.minPoolSizeTimer),this.minPoolSizeTimer=(0,vp.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)))}processWaitQueue(){if(this.processingWaitQueue)return;for(this.processingWaitQueue=!0;this.waitQueueSize;){let n=this.waitQueue.first();if(!n){this.waitQueue.shift();continue}if(n.cancelled){this.waitQueue.shift();continue}if(this.poolState!==kr.PoolState.ready){let i=this.closed?"poolClosed":"connectionError",o=this.closed?new xp.PoolClosedError(this):new xp.PoolClearedError(this);this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new Nr.ConnectionCheckOutFailedEvent(this,i,n.checkoutTime,o)),this.waitQueue.shift(),n.reject(o);continue}if(!this.availableConnectionCount)break;let s=this.connections.shift();if(!s)break;this.destroyConnectionIfPerished(s)||(this.checkedOut.add(s),this.emitAndLog(t.CONNECTION_CHECKED_OUT,new Nr.ConnectionCheckedOutEvent(this,s,n.checkoutTime)),this.waitQueue.shift(),n.resolve(s))}let{maxPoolSize:e,maxConnecting:r}=this.options;for(;this.waitQueueSize>0&&this.pendingConnectionCount<r&&(e===0||this.totalConnectionCount<e);){let n=this.waitQueue.shift();!n||n.cancelled||this.createConnection((s,i)=>{n.cancelled?!s&&i&&this.connections.push(i):s?(this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new Nr.ConnectionCheckOutFailedEvent(this,"connectionError",n.checkoutTime,s)),n.reject(s)):i&&(this.checkedOut.add(i),this.emitAndLog(t.CONNECTION_CHECKED_OUT,new Nr.ConnectionCheckedOutEvent(this,i,n.checkoutTime)),n.resolve(i)),process.nextTick(()=>this.processWaitQueue())})}this.processingWaitQueue=!1}};kr.ConnectionPool=Zv});var s9=m(O2=>{"use strict";Object.defineProperty(O2,"__esModule",{value:!0});O2.Server=void 0;var Tbe=y2(),Dbe=Ij(),Mbe=Xv(),Yi=Lt(),_t=z(),Pbe=is(),Bbe=Md(),r9=i4(),nc=X(),Nj=hn(),it=ts(),Ibe=i9(),n9=dh(),Nbe=xd(),yh=(0,nc.makeStateMachine)({[it.STATE_CLOSED]:[it.STATE_CLOSED,it.STATE_CONNECTING],[it.STATE_CONNECTING]:[it.STATE_CONNECTING,it.STATE_CLOSING,it.STATE_CONNECTED,it.STATE_CLOSED],[it.STATE_CONNECTED]:[it.STATE_CONNECTED,it.STATE_CLOSING,it.STATE_CLOSED],[it.STATE_CLOSING]:[it.STATE_CLOSING,it.STATE_CLOSED]}),A2=class t extends Pbe.TypedEventEmitter{static{this.SERVER_HEARTBEAT_STARTED=Yi.SERVER_HEARTBEAT_STARTED}static{this.SERVER_HEARTBEAT_SUCCEEDED=Yi.SERVER_HEARTBEAT_SUCCEEDED}static{this.SERVER_HEARTBEAT_FAILED=Yi.SERVER_HEARTBEAT_FAILED}static{this.CONNECT=Yi.CONNECT}static{this.DESCRIPTION_RECEIVED=Yi.DESCRIPTION_RECEIVED}static{this.CLOSED=Yi.CLOSED}static{this.ENDED=Yi.ENDED}constructor(e,r,n){super(),this.on("error",nc.noop),this.serverApi=n.serverApi;let s={hostAddress:r.hostAddress,...n};this.topology=e,this.pool=new Dbe.ConnectionPool(this,s),this.s={description:r,options:n,state:it.STATE_CLOSED,operationCount:0};for(let i of[...Yi.CMAP_EVENTS,...Yi.APM_EVENTS])this.pool.on(i,o=>this.emit(i,o));if(this.pool.on(Tbe.Connection.CLUSTER_TIME_RECEIVED,i=>{this.clusterTime=i}),this.loadBalanced){this.monitor=null;return}this.monitor=new Ibe.Monitor(this,this.s.options);for(let i of Yi.HEARTBEAT_EVENTS)this.monitor.on(i,o=>this.emit(i,o));this.monitor.on("resetServer",i=>e9(this,i)),this.monitor.on(t.SERVER_HEARTBEAT_SUCCEEDED,i=>{this.emit(t.DESCRIPTION_RECEIVED,new n9.ServerDescription(this.description.hostAddress,i.reply,{roundTripTime:this.monitor?.roundTripTime,minRoundTripTime:this.monitor?.minRoundTripTime})),this.s.state===it.STATE_CONNECTING&&(yh(this,it.STATE_CONNECTED),this.emit(t.CONNECT,this))})}get clusterTime(){return this.topology.clusterTime}set clusterTime(e){this.topology.clusterTime=e}get description(){return this.s.description}get name(){return this.s.description.address}get autoEncrypter(){if(this.s.options&&this.s.options.autoEncrypter)return this.s.options.autoEncrypter}get loadBalanced(){return this.topology.description.type===it.TopologyType.LoadBalanced}connect(){this.s.state===it.STATE_CLOSED&&(yh(this,it.STATE_CONNECTING),this.loadBalanced?(yh(this,it.STATE_CONNECTED),this.emit(t.CONNECT,this)):this.monitor?.connect())}closeCheckedOutConnections(){return this.pool.closeCheckedOutConnections()}close(){this.s.state!==it.STATE_CLOSED&&(yh(this,it.STATE_CLOSING),this.loadBalanced||this.monitor?.close(),this.pool.close(),yh(this,it.STATE_CLOSED),this.emit("closed"))}requestCheck(){this.loadBalanced||this.monitor?.requestCheck()}async command(e,r){if(this.s.state===it.STATE_CLOSING||this.s.state===it.STATE_CLOSED)throw new _t.MongoServerClosedError;let n=e.session,s=n?.pinnedConnection;if(this.incrementOperationCount(),s==null)try{s=await this.pool.checkOut({timeoutContext:r,signal:e.options.signal})}catch(p){throw this.decrementOperationCount(),p instanceof Mbe.PoolClearedError||this.handleError(p),p}let i=null,o=()=>{if(this.decrementOperationCount(),n?.pinnedConnection!==s)if(i!=null){let p=()=>{this.pool.checkIn(s)};i.then(p,p)}else this.pool.checkIn(s)},a;try{a=e.buildCommand(s,n)}catch(p){throw o(),p}let u=e.buildOptions(r),c=e.ns;this.loadBalanced&&kbe(a,n)&&!n?.pinnedConnection&&n?.pin(s),u.directConnection=this.topology.s.options.directConnection,e instanceof Bbe.AggregateOperation&&e.hasWriteStage&&(0,nc.maxWireVersion)(s)<Nbe.MIN_SECONDARY_WRITE_WIRE_VERSION&&delete u.readPreference,this.description.iscryptd&&(u.omitMaxTimeMS=!0);try{try{let p=await s.command(c,a,u,e.SERVER_COMMAND_RESPONSE_TYPE);return(0,Nj.throwIfWriteConcernError)(p),p}catch(p){throw this.decorateCommandError(s,a,u,p)}}catch(p){if(p instanceof _t.MongoError&&p.code===_t.MONGODB_ERROR_CODES.Reauthenticate){i=this.pool.reauthenticate(s),i.then(void 0,d=>{i=null,(0,nc.squashError)(d)}),await(0,nc.abortable)(i,u),i=null;try{let d=await s.command(c,a,u,e.SERVER_COMMAND_RESPONSE_TYPE);return(0,Nj.throwIfWriteConcernError)(d),d}catch(d){throw this.decorateCommandError(s,a,u,d)}}else throw p}finally{o()}}handleError(e,r){if(!(e instanceof _t.MongoError)||e.connectionGeneration&&e.connectionGeneration<this.pool.generation)return;let s=e instanceof _t.MongoNetworkError&&!(e instanceof _t.MongoNetworkTimeoutError),i=e instanceof _t.MongoNetworkError&&e.beforeHandshake,o=e.hasErrorLabel(_t.MongoErrorLabel.HandshakeError);if(s||i||o)this.loadBalanced?r&&this.pool.clear({serviceId:r.serviceId}):(e.addErrorLabel(_t.MongoErrorLabel.ResetPool),e9(this,e));else if((0,_t.isSDAMUnrecoverableError)(e)&&Fbe(this,e)){let a=(0,_t.isNodeShuttingDownError)(e);this.loadBalanced&&r&&a&&this.pool.clear({serviceId:r.serviceId}),this.loadBalanced||(a&&e.addErrorLabel(_t.MongoErrorLabel.ResetPool),e9(this,e),process.nextTick(()=>this.requestCheck()))}}decorateCommandError(e,r,n,s){if(typeof s!="object"||s==null||!("name"in s))throw new _t.MongoRuntimeError("An unexpected error type: "+typeof s);if(s.name==="AbortError"&&"cause"in s&&s.cause instanceof _t.MongoError&&(s=s.cause),!(s instanceof _t.MongoError)||Rbe(this.pool,e))return s;let i=n?.session;return s instanceof _t.MongoNetworkError?(i&&!i.hasEnded&&i.serverSession&&(i.serverSession.isDirty=!0),t9(i,r)&&!s.hasErrorLabel(_t.MongoErrorLabel.TransientTransactionError)&&s.addErrorLabel(_t.MongoErrorLabel.TransientTransactionError),(kj(this.topology)||(0,r9.isTransactionCommand)(r))&&(0,nc.supportsRetryableWrites)(this)&&!t9(i,r)&&s.addErrorLabel(_t.MongoErrorLabel.RetryableWriteError)):(kj(this.topology)||(0,r9.isTransactionCommand)(r))&&(0,_t.needsRetryableWriteLabel)(s,(0,nc.maxWireVersion)(this),this.description.type)&&!t9(i,r)&&s.addErrorLabel(_t.MongoErrorLabel.RetryableWriteError),i&&i.isPinned&&s.hasErrorLabel(_t.MongoErrorLabel.TransientTransactionError)&&i.unpin({force:!0}),this.handleError(s,e),s}decrementOperationCount(){return this.s.operationCount-=1}incrementOperationCount(){return this.s.operationCount+=1}};O2.Server=A2;function e9(t,e){t.loadBalanced||(e instanceof _t.MongoNetworkError&&!(e instanceof _t.MongoNetworkTimeoutError)&&t.monitor?.reset(),t.emit(A2.DESCRIPTION_RECEIVED,new n9.ServerDescription(t.description.hostAddress,void 0,{error:e})))}function kbe(t,e){return e?e.inTransaction()||e.transaction.isCommitted&&"commitTransaction"in t||"aggregate"in t||"find"in t||"getMore"in t||"listCollections"in t||"listIndexes"in t||"bulkWrite"in t:!1}function Rbe(t,e){return e.serviceId?e.generation!==t.serviceGenerations.get(e.serviceId.toHexString()):e.generation!==t.generation}function Fbe(t,e){let r=e.topologyVersion,n=t.description.topologyVersion;return(0,n9.compareTopologyVersion)(n,r)<0}function t9(t,e){return t&&t.inTransaction()&&!(0,r9.isTransactionCommand)(e)}function kj(t){return t.s.options.retryWrites!==!1}});var i9=m(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.RTTSampler=kn.MonitorInterval=kn.RTTPinger=kn.Monitor=kn.ServerMonitoringMode=void 0;var Ha=require("timers"),Rj=pe(),C2=vv(),$be=aC(),o9=Lt(),Tp=z(),qbe=Ba(),Fj=is(),Rr=X(),Fr=ts(),gh=E2(),_h=s9(),Dp="idle",sc="monitoring",Mp=(0,Rr.makeStateMachine)({[Fr.STATE_CLOSING]:[Fr.STATE_CLOSING,Dp,Fr.STATE_CLOSED],[Fr.STATE_CLOSED]:[Fr.STATE_CLOSED,sc],[Dp]:[Dp,sc,Fr.STATE_CLOSING],[sc]:[sc,Dp,Fr.STATE_CLOSING]}),jbe=new Set([Fr.STATE_CLOSING,Fr.STATE_CLOSED,sc]);function Eh(t){return t.s.state===Fr.STATE_CLOSED||t.s.state===Fr.STATE_CLOSING}kn.ServerMonitoringMode=Object.freeze({auto:"auto",poll:"poll",stream:"stream"});var a9=class extends Fj.TypedEventEmitter{constructor(e,r){super(),this.component=qbe.MongoLoggableComponent.TOPOLOGY,this.on("error",Rr.noop),this.server=e,this.connection=null,this.cancellationToken=new Fj.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.monitorId=void 0,this.s={state:Fr.STATE_CLOSED},this.address=e.description.address,this.options=Object.freeze({connectTimeoutMS:r.connectTimeoutMS??1e4,heartbeatFrequencyMS:r.heartbeatFrequencyMS??1e4,minHeartbeatFrequencyMS:r.minHeartbeatFrequencyMS??500,serverMonitoringMode:r.serverMonitoringMode}),this.isRunningInFaasEnv=(0,$be.getFAASEnv)()!=null,this.mongoLogger=this.server.topology.client?.mongoLogger,this.rttSampler=new x2(10);let n=this.cancellationToken,s={id:"<monitor>",generation:e.pool.generation,cancellationToken:n,hostAddress:e.description.hostAddress,...r,raw:!1,useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!0};delete s.credentials,s.autoEncrypter&&delete s.autoEncrypter,this.connectOptions=Object.freeze(s)}connect(){if(this.s.state!==Fr.STATE_CLOSED)return;let e=this.options.heartbeatFrequencyMS,r=this.options.minHeartbeatFrequencyMS;this.monitorId=new bh(qj(this),{heartbeatFrequencyMS:e,minHeartbeatFrequencyMS:r,immediate:!0})}requestCheck(){jbe.has(this.s.state)||this.monitorId?.wake()}reset(){let e=this.server.description.topologyVersion;if(Eh(this)||e==null)return;Mp(this,Fr.STATE_CLOSING),$j(this),Mp(this,Dp);let r=this.options.heartbeatFrequencyMS,n=this.options.minHeartbeatFrequencyMS;this.monitorId=new bh(qj(this),{heartbeatFrequencyMS:r,minHeartbeatFrequencyMS:n})}close(){Eh(this)||(Mp(this,Fr.STATE_CLOSING),$j(this),this.emit("close"),Mp(this,Fr.STATE_CLOSED))}get roundTripTime(){return this.rttSampler.average()}get minRoundTripTime(){return this.rttSampler.min()}get latestRtt(){return this.rttSampler.last}addRttSample(e){this.rttSampler.addSample(e)}clearRttSamples(){this.rttSampler.clear()}};kn.Monitor=a9;function $j(t){t.monitorId?.stop(),t.monitorId=void 0,t.rttPinger?.close(),t.rttPinger=void 0,t.cancellationToken.emit("cancel"),t.connection?.destroy(),t.connection=null,t.clearRttSamples()}function u9(t,e){if(e==null)return!1;let r=t.options.serverMonitoringMode;return r===kn.ServerMonitoringMode.poll?!1:r===kn.ServerMonitoringMode.stream?!0:!t.isRunningInFaasEnv}function Lbe(t,e){let r,n,s=t.server.description.topologyVersion,i=u9(t,s);t.emitAndLogHeartbeat(_h.Server.SERVER_HEARTBEAT_STARTED,t.server.topology.s.id,void 0,new gh.ServerHeartbeatStartedEvent(t.address,i));function o(c){t.connection?.destroy(),t.connection=null,t.emitAndLogHeartbeat(_h.Server.SERVER_HEARTBEAT_FAILED,t.server.topology.s.id,void 0,new gh.ServerHeartbeatFailedEvent(t.address,(0,Rr.calculateDurationInMs)(r),c,n));let l=c instanceof Tp.MongoError?c:new Tp.MongoError(Tp.MongoError.buildErrorMessage(c),{cause:c});l.addErrorLabel(Tp.MongoErrorLabel.ResetPool),l instanceof Tp.MongoNetworkTimeoutError&&l.addErrorLabel(Tp.MongoErrorLabel.InterruptInUseConnections),t.emit("resetServer",l),e(c)}function a(c){"isWritablePrimary"in c||(c.isWritablePrimary=c[o9.LEGACY_HELLO_COMMAND]);let l=i&&t.rttPinger?t.rttPinger.latestRtt??(0,Rr.calculateDurationInMs)(r):(0,Rr.calculateDurationInMs)(r);t.addRttSample(l),t.emitAndLogHeartbeat(_h.Server.SERVER_HEARTBEAT_SUCCEEDED,t.server.topology.s.id,c.connectionId,new gh.ServerHeartbeatSucceededEvent(t.address,l,c,i)),i?(t.emitAndLogHeartbeat(_h.Server.SERVER_HEARTBEAT_STARTED,t.server.topology.s.id,void 0,new gh.ServerHeartbeatStartedEvent(t.address,!0)),r=(0,Rr.now)()):(t.rttPinger?.close(),t.rttPinger=void 0,e(void 0,c))}let{connection:u}=t;if(u&&!u.closed){let{serverApi:c,helloOk:l}=u,p=t.options.connectTimeoutMS,d=t.options.heartbeatFrequencyMS,h={[c?.version||l?"hello":o9.LEGACY_HELLO_COMMAND]:1,...i&&s?{maxAwaitTimeMS:d,topologyVersion:Ube(s)}:{}},f=i?{socketTimeoutMS:p?p+d:0,exhaustAllowed:!0}:{socketTimeoutMS:p};if(i&&t.rttPinger==null&&(t.rttPinger=new v2(t)),r=(0,Rr.now)(),i)return n=!0,u.exhaustCommand((0,Rr.ns)("admin.$cmd"),h,f,(y,g)=>y?o(y):a(g));n=!1,u.command((0,Rr.ns)("admin.$cmd"),h,f).then(a,o);return}(async()=>{let c=await(0,C2.makeSocket)(t.connectOptions),l=(0,C2.makeConnection)(t.connectOptions,c);r=(0,Rr.now)();try{return await(0,C2.performInitialHandshake)(l,t.connectOptions),l}catch(p){throw l.destroy(),p}})().then(c=>{if(Eh(t)){c.destroy();return}let l=(0,Rr.calculateDurationInMs)(r);t.addRttSample(l),t.connection=c,t.emitAndLogHeartbeat(_h.Server.SERVER_HEARTBEAT_SUCCEEDED,t.server.topology.s.id,c.hello?.connectionId,new gh.ServerHeartbeatSucceededEvent(t.address,l,c.hello,u9(t,c.hello?.topologyVersion))),e(void 0,c.hello)},c=>{t.connection=null,n=!1,o(c)})}function qj(t){return e=>{if(t.s.state===sc){process.nextTick(e);return}Mp(t,sc);function r(){Eh(t)||Mp(t,Dp),e()}Lbe(t,(n,s)=>{if(n&&t.server.description.type===Fr.ServerType.Unknown)return r();u9(t,s?.topologyVersion)&&(0,Ha.setTimeout)(()=>{Eh(t)||t.monitorId?.wake()},0),r()})}}function Ube(t){return{processId:t.processId,counter:Rj.Long.isLong(t.counter)?t.counter:Rj.Long.fromNumber(t.counter)}}var v2=class{constructor(e){this.connection=void 0,this.cancellationToken=e.cancellationToken,this.closed=!1,this.monitor=e,this.latestRtt=e.latestRtt??void 0;let r=e.options.heartbeatFrequencyMS;this.monitorId=(0,Ha.setTimeout)(()=>this.measureRoundTripTime(),r)}get roundTripTime(){return this.monitor.roundTripTime}get minRoundTripTime(){return this.monitor.minRoundTripTime}close(){this.closed=!0,(0,Ha.clearTimeout)(this.monitorId),this.connection?.destroy(),this.connection=void 0}measureAndReschedule(e,r){if(this.closed){r?.destroy();return}this.connection==null&&(this.connection=r),this.latestRtt=(0,Rr.calculateDurationInMs)(e),this.monitorId=(0,Ha.setTimeout)(()=>this.measureRoundTripTime(),this.monitor.options.heartbeatFrequencyMS)}measureRoundTripTime(){let e=(0,Rr.now)();if(this.closed)return;let r=this.connection;if(r==null){(0,C2.connect)(this.monitor.connectOptions).then(s=>{this.measureAndReschedule(e,s)},()=>{this.connection=void 0});return}let n=r.serverApi?.version||r.helloOk?"hello":o9.LEGACY_HELLO_COMMAND;r.command((0,Rr.ns)("admin.$cmd"),{[n]:1},void 0).then(()=>this.measureAndReschedule(e),()=>{this.connection?.destroy(),this.connection=void 0})}};kn.RTTPinger=v2;var bh=class{constructor(e,r={}){this.isExpeditedCallToFnScheduled=!1,this.stopped=!1,this.isExecutionInProgress=!1,this.hasExecutedOnce=!1,this._executeAndReschedule=()=>{this.stopped||(this.timerId&&(0,Ha.clearTimeout)(this.timerId),this.isExpeditedCallToFnScheduled=!1,this.isExecutionInProgress=!0,this.fn(()=>{this.lastExecutionEnded=(0,Rr.now)(),this.isExecutionInProgress=!1,this._reschedule(this.heartbeatFrequencyMS)}))},this.fn=e,this.lastExecutionEnded=-1/0,this.heartbeatFrequencyMS=r.heartbeatFrequencyMS??1e3,this.minHeartbeatFrequencyMS=r.minHeartbeatFrequencyMS??500,r.immediate?this._executeAndReschedule():this._reschedule(void 0)}wake(){let r=(0,Rr.now)()-this.lastExecutionEnded;if(r<0)return this._executeAndReschedule();if(!this.isExecutionInProgress&&!this.isExpeditedCallToFnScheduled){if(r<this.minHeartbeatFrequencyMS){this.isExpeditedCallToFnScheduled=!0,this._reschedule(this.minHeartbeatFrequencyMS-r);return}this._executeAndReschedule()}}stop(){this.stopped=!0,this.timerId&&((0,Ha.clearTimeout)(this.timerId),this.timerId=void 0),this.lastExecutionEnded=-1/0,this.isExpeditedCallToFnScheduled=!1}toString(){return JSON.stringify(this)}toJSON(){let e=(0,Rr.now)(),r=e-this.lastExecutionEnded;return{timerId:this.timerId!=null?"set":"cleared",lastCallTime:this.lastExecutionEnded,isExpeditedCheckScheduled:this.isExpeditedCallToFnScheduled,stopped:this.stopped,heartbeatFrequencyMS:this.heartbeatFrequencyMS,minHeartbeatFrequencyMS:this.minHeartbeatFrequencyMS,currentTime:e,timeSinceLastCall:r}}_reschedule(e){this.stopped||(this.timerId&&(0,Ha.clearTimeout)(this.timerId),this.timerId=(0,Ha.setTimeout)(this._executeAndReschedule,e||this.heartbeatFrequencyMS))}};kn.MonitorInterval=bh;var x2=class{constructor(e=10){this.rttSamples=new Float64Array(e),this.length=0,this.writeIndex=0}addSample(e){this.rttSamples[this.writeIndex++]=e,this.length<this.rttSamples.length&&this.length++,this.writeIndex%=this.rttSamples.length}min(){if(this.length<2)return 0;let e=this.rttSamples[0];for(let r=1;r<this.length;r++)this.rttSamples[r]<e&&(e=this.rttSamples[r]);return e}average(){if(this.length===0)return 0;let e=0;for(let r=0;r<this.length;r++)e+=this.rttSamples[r];return e/this.length}get last(){return this.length===0?null:this.rttSamples[this.writeIndex===0?this.length-1:this.writeIndex-1]}clear(){this.length=0,this.writeIndex=0}};kn.RTTSampler=x2});var m9=m(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});ls.DEFAULT_OPTIONS=ls.OPTIONS=void 0;ls.resolveSRVRecord=Qbe;ls.parseOptions=Zbe;var c9=require("dns"),Vbe=xC(),Wbe=require("url"),Pp=Rg(),Qi=zi(),jj=nh(),Lj=aj(),ee=z(),T2=tc(),d9=Ba(),l9=si(),Ga=sr(),zbe=i9(),rn=X(),Po=hn(),p9=["authSource","replicaSet","loadBalanced"],Kbe="loadBalanced option only supported with a single host in the URI",Hbe="loadBalanced option not supported with a replicaSet option",Gbe="loadBalanced option not supported when directConnection is provided";function Wj(t){return async function(r){try{return await c9.promises[t](r)}catch(n){if(n.code===c9.TIMEOUT)return await c9.promises[t](r);throw n}}}var Jbe=Wj("resolveSrv"),Ybe=Wj("resolveTxt");async function Qbe(t){if(typeof t.srvHost!="string")throw new ee.MongoAPIError('Option "srvHost" must not be empty');let e=t.srvHost,r=Ybe(e);r.then(void 0,rn.squashError);let n=`_${t.srvServiceName}._tcp.${e}`,s=await Jbe(n);if(s.length===0)throw new ee.MongoAPIError("No addresses found at host");for(let{name:d}of s)(0,rn.checkParentDomainMatch)(d,e);let i=s.map(d=>rn.HostAddress.fromString(`${d.name}:${d.port??27017}`));h9(i,t,!0);let o;try{o=await r}catch(d){if(d.code!=="ENODATA"&&d.code!=="ENOTFOUND")throw d;return i}if(o.length>1)throw new ee.MongoParseError("Multiple text records not allowed");let a=new Wbe.URLSearchParams(o[0].join(""));if([...a.keys()].some(d=>!p9.includes(d)))throw new ee.MongoParseError(`Text record may only set any of: ${p9.join(", ")}`);if(p9.some(d=>a.get(d)===""))throw new ee.MongoParseError("Cannot have empty URI params in DNS TXT Record");let c=a.get("authSource")??void 0,l=a.get("replicaSet")??void 0,p=a.get("loadBalanced")??void 0;if(!t.userSpecifiedAuthSource&&c&&t.credentials&&!Qi.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(t.credentials.mechanism)&&(t.credentials=Pp.MongoCredentials.merge(t.credentials,{source:c})),!t.userSpecifiedReplicaSet&&l&&(t.replicaSet=l),p==="true"&&(t.loadBalanced=!0),t.replicaSet&&t.srvMaxHosts>0)throw new ee.MongoParseError("Cannot combine replicaSet option with srvMaxHosts");return h9(i,t,!0),i}function Xbe(t){if(!t)return;let e=(r,n)=>{if(t.has(r)&&t.has(n))throw new ee.MongoAPIError(`The '${r}' option cannot be used with the '${n}' option`)};e("tlsInsecure","tlsAllowInvalidCertificates"),e("tlsInsecure","tlsAllowInvalidHostnames")}function Bo(t,e){if(typeof e=="boolean")return e;switch(e){case"true":return!0;case"false":return!1;default:throw new ee.MongoParseError(`${t} must be either "true" or "false"`)}}function f9(t,e){let r=(0,rn.parseInteger)(e);if(r!=null)return r;throw new ee.MongoParseError(`Expected ${t} to be stringified int value, got: ${e}`)}function wh(t,e){let r=f9(t,e);if(r<0)throw new ee.MongoParseError(`${t} can only be a positive int value, got: ${e}`);return r}function*Uj(t){if(t==="")return;let e=t.split(",");for(let r of e){let[n,s]=r.split(/:(.*)/);if(s==null)throw new ee.MongoParseError("Cannot have undefined values in key value pairs");yield[n,s]}}var Bp=class extends Map{constructor(e=[]){super(e.map(([r,n])=>[r.toLowerCase(),n]))}has(e){return super.has(e.toLowerCase())}get(e){return super.get(e.toLowerCase())}set(e,r){return super.set(e.toLowerCase(),r)}delete(e){return super.delete(e.toLowerCase())}};function Zbe(t,e=void 0,r={}){if(e!=null&&!(e instanceof T2.MongoClient)&&(r=e,e=void 0),r.useBigInt64&&typeof r.promoteLongs=="boolean"&&!r.promoteLongs)throw new ee.MongoAPIError("Must request either bigint or Long for int64 deserialization");if(r.useBigInt64&&typeof r.promoteValues=="boolean"&&!r.promoteValues)throw new ee.MongoAPIError("Must request either bigint or Long for int64 deserialization");let n=new Vbe.default(t),{hosts:s,isSRV:i}=n,o=Object.create(null);o.hosts=i?[]:s.map(rn.HostAddress.fromString);let a=new Bp;if(n.pathname!=="/"&&n.pathname!==""){let f=decodeURIComponent(n.pathname[0]==="/"?n.pathname.slice(1):n.pathname);f&&a.set("dbName",[f])}if(n.username!==""){let f={username:decodeURIComponent(n.username)};typeof n.password=="string"&&(f.password=decodeURIComponent(n.password)),a.set("auth",[f])}for(let f of n.searchParams.keys()){let y=n.searchParams.getAll(f),g=/readPreferenceTags/i.test(f);if(!g&&y.length>1)throw new ee.MongoInvalidArgumentError(`URI option "${f}" cannot appear more than once in the connection string`);if(!g&&y.includes(""))throw new ee.MongoAPIError(`URI option "${f}" cannot be specified with no value`);a.has(f)||a.set(f,y)}let u=new Bp(Object.entries(r).filter(([,f])=>f!=null));if(a.has("serverApi"))throw new ee.MongoParseError("URI cannot contain `serverApi`, it can only be passed to the client");let c=a.get("authMechanismProperties");if(c){for(let f of c)if(/(^|,)ALLOWED_HOSTS:/.test(f))throw new ee.MongoParseError("Auth mechanism property ALLOWED_HOSTS is not allowed in the connection string.")}if(u.has("loadBalanced"))throw new ee.MongoParseError("loadBalanced is only a valid option in the URI");let l=new Bp,p=new Set([...a.keys(),...u.keys()]);for(let f of p){let y=[],g=u.get(f);g!=null&&y.push(g);let _=a.get(f)??[];y.push(..._),l.set(f,y)}if(l.has("tls")||l.has("ssl")){let f=(l.get("tls")||[]).concat(l.get("ssl")||[]).map(Bo.bind(null,"tls/ssl"));if(new Set(f).size!==1)throw new ee.MongoParseError("All values of tls/ssl must be the same.")}Xbe(l);let d=(0,rn.setDifference)(p,Array.from(Object.keys(ls.OPTIONS)).map(f=>f.toLowerCase()));if(d.size!==0){let f=d.size>1?"options":"option",y=d.size>1?"are":"is";throw new ee.MongoParseError(`${f} ${Array.from(d).join(", ")} ${y} not supported`)}for(let[f,y]of Object.entries(ls.OPTIONS)){let g=l.get(f);if(!g||g.length===0)ls.DEFAULT_OPTIONS.has(f)&&Vj(o,f,y,[ls.DEFAULT_OPTIONS.get(f)]);else{let{deprecated:_}=y;if(_){let w=typeof _=="string"?`: ${_}`:"";(0,rn.emitWarning)(`${f} is a deprecated option${w}`)}Vj(o,f,y,g)}}if(o.credentials){let f=o.credentials.mechanism===Qi.AuthMechanism.MONGODB_GSSAPI,y=o.credentials.mechanism===Qi.AuthMechanism.MONGODB_X509,g=o.credentials.mechanism===Qi.AuthMechanism.MONGODB_AWS,_=o.credentials.mechanism===Qi.AuthMechanism.MONGODB_OIDC;if((f||y)&&l.has("authSource")&&o.credentials.source!=="$external")throw new ee.MongoParseError(`authMechanism ${o.credentials.mechanism} requires an authSource of '$external'`);if(!(f||y||g||_)&&o.dbName&&!l.has("authSource")&&(o.credentials=Pp.MongoCredentials.merge(o.credentials,{source:o.dbName})),g){let{username:w,password:O}=o.credentials;if(w||O)throw new ee.MongoAPIError("username and password cannot be provided when using MONGODB-AWS. Credentials must be provided in a manner that can be read by the AWS SDK.");if(o.credentials.mechanismProperties.AWS_SESSION_TOKEN)throw new ee.MongoAPIError("AWS_SESSION_TOKEN cannot be provided when using MONGODB-AWS. Credentials must be provided in a manner that can be read by the AWS SDK.")}o.credentials.validate(),o.credentials.password===""&&o.credentials.username===""&&o.credentials.mechanism===Qi.AuthMechanism.MONGODB_DEFAULT&&Object.keys(o.credentials.mechanismProperties).length===0&&delete o.credentials}if(o.dbName||(o.dbName="test"),h9(s,o,i),e&&o.autoEncryption&&(Lj.Encrypter.checkForMongoCrypt(),o.encrypter=new Lj.Encrypter(e,t,r),o.autoEncrypter=o.encrypter.autoEncrypter),o.userSpecifiedAuthSource=u.has("authSource")||a.has("authSource"),o.userSpecifiedReplicaSet=u.has("replicaSet")||a.has("replicaSet"),i){if(o.srvHost=s[0],o.directConnection)throw new ee.MongoAPIError("SRV URI does not support directConnection");if(o.srvMaxHosts>0&&typeof o.replicaSet=="string")throw new ee.MongoParseError("Cannot use srvMaxHosts option with replicaSet");let f=!u.has("tls")&&!a.has("tls"),y=!u.has("ssl")&&!a.has("ssl");f&&y&&(o.tls=!0)}else if(a.has("srvMaxHosts")||u.has("srvMaxHosts")||a.has("srvServiceName")||u.has("srvServiceName"))throw new ee.MongoParseError("Cannot use srvMaxHosts or srvServiceName with a non-srv connection string");if(o.directConnection&&o.hosts.length!==1)throw new ee.MongoParseError("directConnection option requires exactly one host");if(!o.proxyHost&&(o.proxyPort||o.proxyUsername||o.proxyPassword))throw new ee.MongoParseError("Must specify proxyHost if other proxy options are passed");if(o.proxyUsername&&!o.proxyPassword||!o.proxyUsername&&o.proxyPassword)throw new ee.MongoParseError("Can only specify both of proxy username/password or neither");if(["proxyHost","proxyPort","proxyUsername","proxyPassword"].map(f=>a.get(f)??[]).some(f=>f.length>1))throw new ee.MongoParseError("Proxy options cannot be specified multiple times in the connection string");return o.mongoLoggerOptions=d9.MongoLogger.resolveOptions({MONGODB_LOG_COMMAND:process.env.MONGODB_LOG_COMMAND,MONGODB_LOG_TOPOLOGY:process.env.MONGODB_LOG_TOPOLOGY,MONGODB_LOG_SERVER_SELECTION:process.env.MONGODB_LOG_SERVER_SELECTION,MONGODB_LOG_CONNECTION:process.env.MONGODB_LOG_CONNECTION,MONGODB_LOG_CLIENT:process.env.MONGODB_LOG_CLIENT,MONGODB_LOG_ALL:process.env.MONGODB_LOG_ALL,MONGODB_LOG_MAX_DOCUMENT_LENGTH:process.env.MONGODB_LOG_MAX_DOCUMENT_LENGTH,MONGODB_LOG_PATH:process.env.MONGODB_LOG_PATH},{mongodbLogPath:o.mongodbLogPath,mongodbLogComponentSeverities:o.mongodbLogComponentSeverities,mongodbLogMaxDocumentLength:o.mongodbLogMaxDocumentLength}),o}function h9(t,e,r){if(e.loadBalanced){if(t.length>1)throw new ee.MongoParseError(Kbe);if(e.replicaSet)throw new ee.MongoParseError(Hbe);if(e.directConnection)throw new ee.MongoParseError(Gbe);if(r&&e.srvMaxHosts>0)throw new ee.MongoParseError("Cannot limit srv hosts with loadBalanced enabled")}}function Vj(t,e,r,n){let{target:s,type:i,transform:o}=r,a=s??e;switch(i){case"boolean":t[a]=Bo(a,n[0]);break;case"int":t[a]=f9(a,n[0]);break;case"uint":t[a]=wh(a,n[0]);break;case"string":if(n[0]==null)break;t[a]=String(n[0]);break;case"record":if(!(0,rn.isRecord)(n[0]))throw new ee.MongoParseError(`${a} must be an object`);t[a]=n[0];break;case"any":t[a]=n[0];break;default:{if(!o)throw new ee.MongoParseError("Descriptors missing a type must define a transform");let u=o({name:a,options:t,values:n});t[a]=u;break}}}ls.OPTIONS={appName:{type:"string"},auth:{target:"credentials",transform({name:t,options:e,values:[r]}){if(!(0,rn.isRecord)(r,["username","password"]))throw new ee.MongoParseError(`${t} must be an object with 'username' and 'password' properties`);return Pp.MongoCredentials.merge(e.credentials,{username:r.username,password:r.password})}},authMechanism:{target:"credentials",transform({options:t,values:[e]}){let r=Object.values(Qi.AuthMechanism),[n]=r.filter(o=>o.match(RegExp(String.raw`\b${e}\b`,"i")));if(!n)throw new ee.MongoParseError(`authMechanism one of ${r}, got ${e}`);let s=t.credentials?.source;(n===Qi.AuthMechanism.MONGODB_PLAIN||Qi.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(n))&&(s="$external");let i=t.credentials?.password;return n===Qi.AuthMechanism.MONGODB_X509&&i===""&&(i=void 0),Pp.MongoCredentials.merge(t.credentials,{mechanism:n,source:s,password:i})}},authMechanismProperties:{target:"credentials",transform({options:t,values:e}){let r=Object.create(null);for(let n of e)if(typeof n=="string")for(let[s,i]of Uj(n))try{r[s]=Bo(s,i)}catch{r[s]=i}else{if(!(0,rn.isRecord)(n))throw new ee.MongoParseError("AuthMechanismProperties must be an object");r={...n}}return Pp.MongoCredentials.merge(t.credentials,{mechanismProperties:r})}},authSource:{target:"credentials",transform({options:t,values:[e]}){let r=String(e);return Pp.MongoCredentials.merge(t.credentials,{source:r})}},autoEncryption:{type:"record"},autoSelectFamily:{type:"boolean",default:!0},autoSelectFamilyAttemptTimeout:{type:"uint"},bsonRegExp:{type:"boolean"},serverApi:{target:"serverApi",transform({values:[t]}){let e=typeof t=="string"?{version:t}:t,r=e&&e.version;if(!r)throw new ee.MongoParseError(`Invalid \`serverApi\` property; must specify a version from the following enum: ["${Object.values(T2.ServerApiVersion).join('", "')}"]`);if(!Object.values(T2.ServerApiVersion).some(n=>n===r))throw new ee.MongoParseError(`Invalid server API version=${r}; must be in the following enum: ["${Object.values(T2.ServerApiVersion).join('", "')}"]`);return e}},checkKeys:{type:"boolean"},compressors:{default:"none",target:"compressors",transform({values:t}){let e=new Set;for(let r of t){let n=typeof r=="string"?r.split(","):r;if(!Array.isArray(n))throw new ee.MongoInvalidArgumentError("compressors must be an array or a comma-delimited list of strings");for(let s of n)if(Object.keys(jj.Compressor).includes(String(s)))e.add(String(s));else throw new ee.MongoInvalidArgumentError(`${s} is not a valid compression mechanism. Must be one of: ${Object.keys(jj.Compressor)}.`)}return[...e]}},connectTimeoutMS:{default:3e4,type:"uint"},dbName:{type:"string"},directConnection:{default:!1,type:"boolean"},driverInfo:{default:{},type:"record"},enableUtf8Validation:{type:"boolean",default:!0},family:{transform({name:t,values:[e]}){let r=f9(t,e);if(r===4||r===6)return r;throw new ee.MongoParseError(`Option 'family' must be 4 or 6 got ${r}.`)}},fieldsAsRaw:{type:"record"},forceServerObjectId:{default:!1,type:"boolean"},fsync:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=Po.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,fsync:Bo(t,r)}});if(!n)throw new ee.MongoParseError(`Unable to make a writeConcern from fsync=${r}`);return n}},heartbeatFrequencyMS:{default:1e4,type:"uint"},ignoreUndefined:{type:"boolean"},j:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=Po.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,journal:Bo(t,r)}});if(!n)throw new ee.MongoParseError(`Unable to make a writeConcern from journal=${r}`);return n}},journal:{target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=Po.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,journal:Bo(t,r)}});if(!n)throw new ee.MongoParseError(`Unable to make a writeConcern from journal=${r}`);return n}},loadBalanced:{default:!1,type:"boolean"},localThresholdMS:{default:15,type:"uint"},maxConnecting:{default:2,transform({name:t,values:[e]}){let r=wh(t,e);if(r===0)throw new ee.MongoInvalidArgumentError("maxConnecting must be > 0 if specified");return r}},maxIdleTimeMS:{default:0,type:"uint"},maxPoolSize:{default:100,type:"uint"},maxStalenessSeconds:{target:"readPreference",transform({name:t,options:e,values:[r]}){let n=wh(t,r);return e.readPreference?Ga.ReadPreference.fromOptions({readPreference:{...e.readPreference,maxStalenessSeconds:n}}):new Ga.ReadPreference("secondary",void 0,{maxStalenessSeconds:n})}},minInternalBufferSize:{type:"uint"},minPoolSize:{default:0,type:"uint"},minHeartbeatFrequencyMS:{default:500,type:"uint"},monitorCommands:{default:!1,type:"boolean"},name:{target:"driverInfo",transform({values:[t],options:e}){return{...e.driverInfo,name:String(t)}}},noDelay:{default:!0,type:"boolean"},pkFactory:{default:rn.DEFAULT_PK_FACTORY,transform({values:[t]}){if((0,rn.isRecord)(t,["createPk"])&&typeof t.createPk=="function")return t;throw new ee.MongoParseError(`Option pkFactory must be an object with a createPk function, got ${t}`)}},promoteBuffers:{type:"boolean"},promoteLongs:{type:"boolean"},promoteValues:{type:"boolean"},useBigInt64:{type:"boolean"},proxyHost:{type:"string"},proxyPassword:{type:"string"},proxyPort:{type:"uint"},proxyUsername:{type:"string"},raw:{default:!1,type:"boolean"},readConcern:{transform({values:[t],options:e}){if(t instanceof l9.ReadConcern||(0,rn.isRecord)(t,["level"]))return l9.ReadConcern.fromOptions({...e.readConcern,...t});throw new ee.MongoParseError(`ReadConcern must be an object, got ${JSON.stringify(t)}`)}},readConcernLevel:{target:"readConcern",transform({values:[t],options:e}){return l9.ReadConcern.fromOptions({...e.readConcern,level:t})}},readPreference:{default:Ga.ReadPreference.primary,transform({values:[t],options:e}){if(t instanceof Ga.ReadPreference)return Ga.ReadPreference.fromOptions({readPreference:{...e.readPreference,...t},...t});if((0,rn.isRecord)(t,["mode"])){let r=Ga.ReadPreference.fromOptions({readPreference:{...e.readPreference,...t},...t});if(r)return r;throw new ee.MongoParseError(`Cannot make read preference from ${JSON.stringify(t)}`)}if(typeof t=="string"){let r={hedge:e.readPreference?.hedge,maxStalenessSeconds:e.readPreference?.maxStalenessSeconds};return new Ga.ReadPreference(t,e.readPreference?.tags,r)}throw new ee.MongoParseError(`Unknown ReadPreference value: ${t}`)}},readPreferenceTags:{target:"readPreference",transform({values:t,options:e}){let r=Array.isArray(t[0])?t[0]:t,n=[];for(let s of r){let i=Object.create(null);if(typeof s=="string")for(let[o,a]of Uj(s))i[o]=a;if((0,rn.isRecord)(s))for(let[o,a]of Object.entries(s))i[o]=a;n.push(i)}return Ga.ReadPreference.fromOptions({readPreference:e.readPreference,readPreferenceTags:n})}},replicaSet:{type:"string"},retryReads:{default:!0,type:"boolean"},retryWrites:{default:!0,type:"boolean"},serializeFunctions:{type:"boolean"},serverMonitoringMode:{default:"auto",transform({values:[t]}){if(!Object.values(zbe.ServerMonitoringMode).includes(t))throw new ee.MongoParseError("serverMonitoringMode must be one of `auto`, `poll`, or `stream`");return t}},serverSelectionTimeoutMS:{default:3e4,type:"uint"},servername:{type:"string"},socketTimeoutMS:{default:0,type:"uint"},srvMaxHosts:{type:"uint",default:0},srvServiceName:{type:"string",default:"mongodb"},ssl:{target:"tls",type:"boolean"},timeoutMS:{type:"uint"},tls:{type:"boolean"},tlsAllowInvalidCertificates:{target:"rejectUnauthorized",transform({name:t,values:[e]}){return!Bo(t,e)}},tlsAllowInvalidHostnames:{target:"checkServerIdentity",transform({name:t,values:[e]}){return Bo(t,e)?()=>{}:void 0}},tlsCAFile:{type:"string"},tlsCRLFile:{type:"string"},tlsCertificateKeyFile:{type:"string"},tlsCertificateKeyFilePassword:{target:"passphrase",type:"any"},tlsInsecure:{transform({name:t,options:e,values:[r]}){let n=Bo(t,r);return n?(e.checkServerIdentity=()=>{},e.rejectUnauthorized=!1):(e.checkServerIdentity=e.tlsAllowInvalidHostnames?()=>{}:void 0,e.rejectUnauthorized=!e.tlsAllowInvalidCertificates),n}},w:{target:"writeConcern",transform({values:[t],options:e}){return Po.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,w:t}})}},waitQueueTimeoutMS:{default:0,type:"uint"},writeConcern:{target:"writeConcern",transform({values:[t],options:e}){if((0,rn.isRecord)(t)||t instanceof Po.WriteConcern)return Po.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,...t}});if(t==="majority"||typeof t=="number")return Po.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,w:t}});throw new ee.MongoParseError(`Invalid WriteConcern cannot parse: ${JSON.stringify(t)}`)}},wtimeout:{deprecated:"Please use wtimeoutMS instead",target:"writeConcern",transform({values:[t],options:e}){let r=Po.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,wtimeout:wh("wtimeout",t)}});if(r)return r;throw new ee.MongoParseError("Cannot make WriteConcern from wtimeout")}},wtimeoutMS:{target:"writeConcern",transform({values:[t],options:e}){let r=Po.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,wtimeoutMS:wh("wtimeoutMS",t)}});if(r)return r;throw new ee.MongoParseError("Cannot make WriteConcern from wtimeout")}},zlibCompressionLevel:{default:0,type:"int"},mongodbLogPath:{transform({values:[t]}){if(!(typeof t=="string"&&["stderr","stdout"].includes(t)||t&&typeof t=="object"&&"write"in t&&typeof t.write=="function"))throw new ee.MongoAPIError("Option 'mongodbLogPath' must be of type 'stderr' | 'stdout' | MongoDBLogWritable");return t}},mongodbLogComponentSeverities:{transform({values:[t]}){if(typeof t!="object"||!t)throw new ee.MongoAPIError("Option 'mongodbLogComponentSeverities' must be a non-null object");for(let[e,r]of Object.entries(t)){if(typeof r!="string"||typeof e!="string")throw new ee.MongoAPIError("User input for option 'mongodbLogComponentSeverities' object cannot include a non-string key or value");if(!Object.values(d9.MongoLoggableComponent).some(n=>n===e)&&e!=="default")throw new ee.MongoAPIError(`User input for option 'mongodbLogComponentSeverities' contains invalid key: ${e}`);if(!Object.values(d9.SeverityLevel).some(n=>n===r))throw new ee.MongoAPIError(`Option 'mongodbLogComponentSeverities' does not support ${r} as a value for ${e}`)}return t}},mongodbLogMaxDocumentLength:{type:"uint"},connectionType:{type:"any"},srvPoller:{type:"any"},allowPartialTrustChain:{type:"any"},minDHSize:{type:"any"},pskCallback:{type:"any"},secureContext:{type:"any"},enableTrace:{type:"any"},requestCert:{type:"any"},rejectUnauthorized:{type:"any"},checkServerIdentity:{type:"any"},keepAliveInitialDelay:{type:"any"},ALPNProtocols:{type:"any"},SNICallback:{type:"any"},session:{type:"any"},requestOCSP:{type:"any"},localAddress:{type:"any"},localPort:{type:"any"},hints:{type:"any"},lookup:{type:"any"},ca:{type:"any"},cert:{type:"any"},ciphers:{type:"any"},crl:{type:"any"},ecdhCurve:{type:"any"},key:{type:"any"},passphrase:{type:"any"},pfx:{type:"any"},secureProtocol:{type:"any"},index:{type:"any"},__skipPingOnConnect:{type:"boolean"}};ls.DEFAULT_OPTIONS=new Bp(Object.entries(ls.OPTIONS).filter(([,t])=>t.default!=null).map(([t,e])=>[t,e.default]))});var zj=m(D2=>{"use strict";Object.defineProperty(D2,"__esModule",{value:!0});D2.MongoDBAWS=void 0;var y9=pe(),g9=pi(),Np=z(),Ip=X(),ewe=$a(),twe=WC(),rwe=Rg(),nwe=zi(),swe=110,_9={useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},E9=class extends ewe.AuthProvider{constructor(e){super(),this.credentialFetcher=new twe.AWSSDKCredentialProvider(e)}async auth(e){let{connection:r}=e;if(!e.credentials)throw new Np.MongoMissingCredentialsError("AuthContext must provide credentials.");if("kModuleError"in g9.aws4)throw g9.aws4.kModuleError;let{sign:n}=g9.aws4;if((0,Ip.maxWireVersion)(r)<9)throw new Np.MongoCompatibilityError("MONGODB-AWS authentication requires MongoDB version 4.4 or later");e.credentials=await iwe(e.credentials,this.credentialFetcher);let{credentials:s}=e,i=s.username,o=s.password,a=s.mechanismProperties.AWS_SESSION_TOKEN,u=i&&o&&a?{accessKeyId:i,secretAccessKey:o,sessionToken:a}:i&&o?{accessKeyId:i,secretAccessKey:o}:void 0,c=s.source,l=await(0,Ip.randomBytes)(32),p={saslStart:1,mechanism:"MONGODB-AWS",payload:y9.serialize({r:l,p:swe},_9)},d=await r.command((0,Ip.ns)(`${c}.$cmd`),p,void 0),h=y9.deserialize(d.payload.buffer,_9),f=h.h,y=h.s.buffer;if(y.length!==64)throw new Np.MongoRuntimeError(`Invalid server nonce length ${y.length}, expected 64`);if(!Ip.ByteUtils.equals(y.subarray(0,l.byteLength),l))throw new Np.MongoRuntimeError("Server nonce does not begin with client nonce");if(f.length<1||f.length>255||f.indexOf("..")!==-1)throw new Np.MongoRuntimeError(`Server returned an invalid host: "${f}"`);let g="Action=GetCallerIdentity&Version=2011-06-15",_=n({method:"POST",host:f,region:owe(h.h),service:"sts",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":g.length,"X-MongoDB-Server-Nonce":Ip.ByteUtils.toBase64(y),"X-MongoDB-GS2-CB-Flag":"n"},path:"/",body:g},u),w={a:_.headers.Authorization,d:_.headers["X-Amz-Date"]};a&&(w.t=a);let O={saslContinue:1,conversationId:d.conversationId,payload:y9.serialize(w,_9)};await r.command((0,Ip.ns)(`${c}.$cmd`),O,void 0)}};D2.MongoDBAWS=E9;async function iwe(t,e){function r(s){if(!s.AccessKeyId||!s.SecretAccessKey)throw new Np.MongoMissingCredentialsError("Could not obtain temporary MONGODB-AWS credentials");return new rwe.MongoCredentials({username:s.AccessKeyId,password:s.SecretAccessKey,source:t.source,mechanism:nwe.AuthMechanism.MONGODB_AWS,mechanismProperties:{AWS_SESSION_TOKEN:s.Token}})}let n=await e.getCredentials();return r(n)}function owe(t){let e=t.split(".");return e.length===1||e[1]==="amazonaws"?"us-east-1":e[1]}});var Hj=m(M2=>{"use strict";Object.defineProperty(M2,"__esModule",{value:!0});M2.finishCommandDocument=awe;M2.startCommandDocument=uwe;var kp=pe(),Kj=zi();function awe(t,e){return e!=null?{saslContinue:1,conversationId:e,payload:new kp.Binary(kp.BSON.serialize({jwt:t}))}:{saslStart:1,mechanism:Kj.AuthMechanism.MONGODB_OIDC,payload:new kp.Binary(kp.BSON.serialize({jwt:t}))}}function uwe(t){let e={};return t.username&&(e.n=t.username),{saslStart:1,autoAuthorize:1,mechanism:Kj.AuthMechanism.MONGODB_OIDC,payload:new kp.Binary(kp.BSON.serialize(e))}}});var A9=m(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});Ja.CallbackWorkflow=Ja.AUTOMATED_TIMEOUT_MS=Ja.HUMAN_TIMEOUT_MS=void 0;var cwe=require("timers/promises"),lwe=z(),Gj=X(),b9=Hj();Ja.HUMAN_TIMEOUT_MS=3e5;Ja.AUTOMATED_TIMEOUT_MS=6e4;var pwe=["accessToken","expiresInSeconds","refreshToken"],dwe="User provided OIDC callbacks must return a valid object with an accessToken.",w9=100,S9=class{constructor(e,r){this.cache=e,this.callback=this.withLock(r),this.lastExecutionTime=Date.now()-w9}async speculativeAuth(e,r){if(this.cache.hasAccessToken){let n=this.cache.getAccessToken();e.accessToken=n;let s=(0,b9.finishCommandDocument)(n);return s.db=r.source,{speculativeAuthenticate:s}}return{}}async reauthenticate(e,r){this.cache.hasAccessToken&&(e.accessToken===this.cache.getAccessToken()?(this.cache.removeAccessToken(),delete e.accessToken):e.accessToken=this.cache.getAccessToken()),await this.execute(e,r)}async startAuthentication(e,r,n){let s;return n?.speculativeAuthenticate?s=n.speculativeAuthenticate:s=await e.command((0,Gj.ns)(r.source),(0,b9.startCommandDocument)(r),void 0),s}async finishAuthentication(e,r,n,s){await e.command((0,Gj.ns)(r.source),(0,b9.finishCommandDocument)(n,s),void 0)}async executeAndValidateCallback(e){let r=await this.callback(e);if(hwe(r))throw new lwe.MongoMissingCredentialsError(dwe);return r}withLock(e){let r=Promise.resolve();return async n=>(await r,r=r.catch(()=>null).then(async()=>{let s=Date.now()-this.lastExecutionTime;return s<=w9&&await(0,cwe.setTimeout)(w9-s,{signal:n.timeoutContext}),this.lastExecutionTime=Date.now(),await e(n)}),await r)}};Ja.CallbackWorkflow=S9;function hwe(t){return t==null||typeof t!="object"||!("accessToken"in t)?!0:!Object.getOwnPropertyNames(t).every(e=>pwe.includes(e))}});var x9=m(P2=>{"use strict";Object.defineProperty(P2,"__esModule",{value:!0});P2.AutomatedCallbackWorkflow=void 0;var O9=z(),Jj=ir(),fwe=B2(),C9=A9(),v9=class extends C9.CallbackWorkflow{constructor(e,r){super(e,r)}async execute(e,r){if(this.cache.hasAccessToken){let s=this.cache.getAccessToken();e.accessToken||(e.accessToken=s);try{return await this.finishAuthentication(e,r,s)}catch(i){if(i instanceof O9.MongoError&&i.code===O9.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),await this.execute(e,r);throw i}}let n=await this.fetchAccessToken(r);this.cache.put(n),e.accessToken=n.accessToken,await this.finishAuthentication(e,r,n.accessToken)}async fetchAccessToken(e){let r=new AbortController,n={timeoutContext:r.signal,version:fwe.OIDC_VERSION};e.username&&(n.username=e.username),e.mechanismProperties.TOKEN_RESOURCE&&(n.tokenAudience=e.mechanismProperties.TOKEN_RESOURCE);let s=Jj.Timeout.expires(C9.AUTOMATED_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(n),s])}catch(i){throw Jj.TimeoutError.is(i)?(r.abort(),new O9.MongoOIDCError(`OIDC callback timed out after ${C9.AUTOMATED_TIMEOUT_MS}ms.`)):i}finally{s.clear()}}};P2.AutomatedCallbackWorkflow=v9});var Qj=m(I2=>{"use strict";Object.defineProperty(I2,"__esModule",{value:!0});I2.callback=void 0;var Yj=KC(),T9=z(),mwe=X(),ywe=Object.freeze({Metadata:"true",Accept:"application/json"}),gwe="Azure endpoint did not return a value with only access_token and expires_in properties",_we="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure.",Ewe=async t=>{let e=t.tokenAudience,r=t.username;if(!e)throw new T9.MongoAzureError(_we);let n=await bwe(e,r);if(!wwe(n))throw new T9.MongoAzureError(gwe);return n};I2.callback=Ewe;async function bwe(t,e){let r=new URL(Yj.AZURE_BASE_URL);(0,Yj.addAzureParams)(r,t,e);let n=await(0,mwe.get)(r,{headers:ywe});if(n.status!==200)throw new T9.MongoAzureError(`Status code ${n.status} returned from the Azure endpoint. Response body: ${n.body}`);let s=JSON.parse(n.body);return{accessToken:s.access_token,expiresInSeconds:Number(s.expires_in)}}function wwe(t){return t==null||typeof t!="object"?!1:"accessToken"in t&&typeof t.accessToken=="string"&&"expiresInSeconds"in t&&typeof t.expiresInSeconds=="number"}});var Zj=m(N2=>{"use strict";Object.defineProperty(N2,"__esModule",{value:!0});N2.callback=void 0;var Xj=z(),Swe=X(),Awe="http://metadata/computeMetadata/v1/instance/service-accounts/default/identity",Owe=Object.freeze({"Metadata-Flavor":"Google"}),Cwe="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is gcp.",vwe=async t=>{let e=t.tokenAudience;if(!e)throw new Xj.MongoGCPError(Cwe);return await xwe(e)};N2.callback=vwe;async function xwe(t){let e=new URL(Awe);e.searchParams.append("audience",t);let r=await(0,Swe.get)(e,{headers:Owe});if(r.status!==200)throw new Xj.MongoGCPError(`Status code ${r.status} returned from the GCP endpoint. Response body: ${r.body}`);return{accessToken:r.body}}});var rL=m(k2=>{"use strict";Object.defineProperty(k2,"__esModule",{value:!0});k2.callback=void 0;var Twe=require("fs/promises"),Dwe="/var/run/secrets/kubernetes.io/serviceaccount/token",eL="AZURE_FEDERATED_TOKEN_FILE",tL="AWS_WEB_IDENTITY_TOKEN_FILE",Mwe=async()=>{let t;return process.env[eL]?t=process.env[eL]:process.env[tL]?t=process.env[tL]:t=Dwe,{accessToken:await(0,Twe.readFile)(t,"utf8")}};k2.callback=Mwe});var M9=m(R2=>{"use strict";Object.defineProperty(R2,"__esModule",{value:!0});R2.TokenCache=void 0;var Pwe=z(),Sh=class extends Pwe.MongoDriverError{},D9=class{get hasAccessToken(){return!!this.accessToken}get hasRefreshToken(){return!!this.refreshToken}get hasIdpInfo(){return!!this.idpInfo}getAccessToken(){if(!this.accessToken)throw new Sh("Attempted to get an access token when none exists.");return this.accessToken}getRefreshToken(){if(!this.refreshToken)throw new Sh("Attempted to get a refresh token when none exists.");return this.refreshToken}getIdpInfo(){if(!this.idpInfo)throw new Sh("Attempted to get IDP information when none exists.");return this.idpInfo}put(e,r){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expiresInSeconds=e.expiresInSeconds,r&&(this.idpInfo=r)}removeAccessToken(){this.accessToken=void 0}removeRefreshToken(){this.refreshToken=void 0}};R2.TokenCache=D9});var nL=m(F2=>{"use strict";Object.defineProperty(F2,"__esModule",{value:!0});F2.callback=void 0;var Bwe=require("fs"),Iwe=z(),Nwe="OIDC_TOKEN_FILE must be set in the environment.",kwe=async()=>{let t=process.env.OIDC_TOKEN_FILE;if(!t)throw new Iwe.MongoAWSError(Nwe);return{accessToken:await Bwe.promises.readFile(t,"utf8")}};F2.callback=kwe});var B2=m(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.MongoDBOIDC=Fs.OIDC_WORKFLOWS=Fs.OIDC_VERSION=void 0;var iL=z(),Rwe=$a(),$2=x9(),Fwe=Qj(),$we=Zj(),qwe=rL(),q2=M9(),jwe=nL(),Lwe="AuthContext must provide credentials.";Fs.OIDC_VERSION=1;Fs.OIDC_WORKFLOWS=new Map;Fs.OIDC_WORKFLOWS.set("test",()=>new $2.AutomatedCallbackWorkflow(new q2.TokenCache,jwe.callback));Fs.OIDC_WORKFLOWS.set("azure",()=>new $2.AutomatedCallbackWorkflow(new q2.TokenCache,Fwe.callback));Fs.OIDC_WORKFLOWS.set("gcp",()=>new $2.AutomatedCallbackWorkflow(new q2.TokenCache,$we.callback));Fs.OIDC_WORKFLOWS.set("k8s",()=>new $2.AutomatedCallbackWorkflow(new q2.TokenCache,qwe.callback));var P9=class extends Rwe.AuthProvider{constructor(e){if(super(),!e)throw new iL.MongoInvalidArgumentError("No workflow provided to the OIDC auth provider.");this.workflow=e}async auth(e){let{connection:r,reauthenticating:n,response:s}=e;if(s?.speculativeAuthenticate?.done&&!n)return;let i=sL(e);n?await this.workflow.reauthenticate(r,i):await this.workflow.execute(r,i,s)}async prepare(e,r){let{connection:n}=r,s=sL(r),i=await this.workflow.speculativeAuth(n,s);return{...e,...i}}};Fs.MongoDBOIDC=P9;function sL(t){let{credentials:e}=t;if(!e)throw new iL.MongoMissingCredentialsError(Lwe);return e}});var aL=m(j2=>{"use strict";Object.defineProperty(j2,"__esModule",{value:!0});j2.HumanCallbackWorkflow=void 0;var Uwe=pe(),Ah=z(),oL=ir(),Vwe=B2(),B9=A9(),I9=class extends B9.CallbackWorkflow{constructor(e,r){super(e,r)}async execute(e,r){if(this.cache.hasAccessToken){let a=this.cache.getAccessToken();e.accessToken=a;try{return await this.finishAuthentication(e,r,a)}catch(u){if(u instanceof Ah.MongoError&&u.code===Ah.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),delete e.accessToken,await this.execute(e,r);throw u}}if(this.cache.hasRefreshToken){let a=this.cache.getRefreshToken(),u=await this.fetchAccessToken(this.cache.getIdpInfo(),r,a);this.cache.put(u),e.accessToken=u.accessToken;try{return await this.finishAuthentication(e,r,u.accessToken)}catch(c){if(c instanceof Ah.MongoError&&c.code===Ah.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeRefreshToken(),delete e.accessToken,await this.execute(e,r);throw c}}let n=await this.startAuthentication(e,r),s=n.conversationId,i=Uwe.BSON.deserialize(n.payload.buffer),o=await this.fetchAccessToken(i,r);return this.cache.put(o,i),e.accessToken=o.accessToken,await this.finishAuthentication(e,r,o.accessToken,s)}async fetchAccessToken(e,r,n){let s=new AbortController,i={timeoutContext:s.signal,version:Vwe.OIDC_VERSION,idpInfo:e};r.username&&(i.username=r.username),n&&(i.refreshToken=n);let o=oL.Timeout.expires(B9.HUMAN_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(i),o])}catch(a){throw oL.TimeoutError.is(a)?(s.abort(),new Ah.MongoOIDCError(`OIDC callback timed out after ${B9.HUMAN_TIMEOUT_MS}ms.`)):a}finally{o.clear()}}};j2.HumanCallbackWorkflow=I9});var uL=m(L2=>{"use strict";Object.defineProperty(L2,"__esModule",{value:!0});L2.Plain=void 0;var Wwe=pe(),zwe=z(),Kwe=X(),Hwe=$a(),N9=class extends Hwe.AuthProvider{async auth(e){let{connection:r,credentials:n}=e;if(!n)throw new zwe.MongoMissingCredentialsError("AuthContext must provide credentials.");let{username:s,password:i}=n,a={saslStart:1,mechanism:"PLAIN",payload:new Wwe.Binary(Buffer.from(`\0${s}\0${i}`)),autoAuthorize:1};await r.command((0,Kwe.ns)("$external.$cmd"),a,void 0)}};L2.Plain=N9});var dL=m((Zke,pL)=>{"use strict";var cL=t=>t.codePointAt(0),Gwe=t=>t[0],Jwe=t=>t[t.length-1];function lL(t){let e=[],r=t.length;for(let n=0;n<r;n+=1){let s=t.charCodeAt(n);if(s>=55296&&s<=56319&&r>n+1){let i=t.charCodeAt(n+1);if(i>=56320&&i<=57343){e.push((s-55296)*1024+i-56320+65536),n+=1;continue}}e.push(s)}return e}function Oh({unassigned_code_points:t,commonly_mapped_to_nothing:e,non_ASCII_space_characters:r,prohibited_characters:n,bidirectional_r_al:s,bidirectional_l:i},o,a={}){let u=r,c=e;if(typeof o!="string")throw new TypeError("Expected string.");if(o.length===0)return"";let l=lL(o).map(w=>u.get(w)?32:w).filter(w=>!c.get(w)),p=String.fromCodePoint.apply(null,l).normalize("NFKC"),d=lL(p);if(d.some(w=>n.get(w)))throw new Error("Prohibited character, see https://tools.ietf.org/html/rfc4013#section-2.3");if(a.allowUnassigned!==!0&&d.some(O=>t.get(O)))throw new Error("Unassigned code point, see https://tools.ietf.org/html/rfc4013#section-2.5");let f=d.some(w=>s.get(w)),y=d.some(w=>i.get(w));if(f&&y)throw new Error("String must not contain RandALCat and LCat at the same time, see https://tools.ietf.org/html/rfc3454#section-6");let g=s.get(cL(Gwe(p))),_=s.get(cL(Jwe(p)));if(f&&!(g&&_))throw new Error("Bidirectional RandALCat character must be the first and the last character of the string, see https://tools.ietf.org/html/rfc3454#section-6");return p}Oh.saslprep=Oh;Oh.default=Oh;pL.exports=Oh});var mL=m((eRe,fL)=>{fL.exports=Io;function Io(t,e){if(!(this instanceof Io))return new Io(t,e);this.length=0,this.updates=[],this.path=new Uint16Array(4),this.pages=new Array(32768),this.maxPages=this.pages.length,this.level=0,this.pageSize=t||1024,this.deduplicate=e?e.deduplicate:null,this.zeros=this.deduplicate?U2(this.deduplicate.length):null}Io.prototype.updated=function(t){for(;this.deduplicate&&t.buffer[t.deduplicate]===this.deduplicate[t.deduplicate];)if(t.deduplicate++,t.deduplicate===this.deduplicate.length){t.deduplicate=0,t.buffer.equals&&t.buffer.equals(this.deduplicate)&&(t.buffer=this.deduplicate);break}t.updated||!this.updates||(t.updated=!0,this.updates.push(t))};Io.prototype.lastUpdate=function(){if(!this.updates||!this.updates.length)return null;var t=this.updates.pop();return t.updated=!1,t};Io.prototype._array=function(t,e){if(t>=this.maxPages){if(e)return;Ywe(this,t)}Zwe(t,this.path);for(var r=this.pages,n=this.level;n>0;n--){var s=this.path[n],i=r[s];if(!i){if(e)return;i=r[s]=new Array(32768)}r=i}return r};Io.prototype.get=function(t,e){var r=this._array(t,e),n=this.path[0],s=r&&r[n];return!s&&!e&&(s=r[n]=new hL(t,U2(this.pageSize)),t>=this.length&&(this.length=t+1)),s&&s.buffer===this.deduplicate&&this.deduplicate&&!e&&(s.buffer=Xwe(s.buffer),s.deduplicate=0),s};Io.prototype.set=function(t,e){var r=this._array(t,!1),n=this.path[0];if(t>=this.length&&(this.length=t+1),!e||this.zeros&&e.equals&&e.equals(this.zeros)){r[n]=void 0;return}this.deduplicate&&e.equals&&e.equals(this.deduplicate)&&(e=this.deduplicate);var s=r[n],i=Qwe(e,this.pageSize);s?s.buffer=i:r[n]=new hL(t,i)};Io.prototype.toBuffer=function(){for(var t=new Array(this.length),e=U2(this.pageSize),r=0;r<t.length;)for(var n=this._array(r,!0),s=0;s<32768&&r<t.length;s++)t[r++]=n&&n[s]?n[s].buffer:e;return Buffer.concat(t)};function Ywe(t,e){for(;t.maxPages<e;){var r=t.pages;t.pages=new Array(32768),t.pages[0]=r,t.level++,t.maxPages*=32768}}function Qwe(t,e){if(t.length===e)return t;if(t.length>e)return t.slice(0,e);var r=U2(e);return t.copy(r),r}function U2(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e}function Xwe(t){var e=Buffer.allocUnsafe?Buffer.allocUnsafe(t.length):new Buffer(t.length);return t.copy(e),e}function hL(t,e){this.offset=t*e.length,this.buffer=e,this.updated=!1,this.deduplicate=0}function Zwe(t,e){t=(t-(e[0]=t&32767))/32768,t=(t-(e[1]=t&32767))/32768,e[3]=(t-(e[2]=t&32767))/32768&32767}});var gL=m((tRe,yL)=>{var eSe=mL();yL.exports=Ya;function Ya(t){if(!(this instanceof Ya))return new Ya(t);if(t||(t={}),Buffer.isBuffer(t)&&(t={buffer:t}),this.pageOffset=t.pageOffset||0,this.pageSize=t.pageSize||1024,this.pages=t.pages||eSe(this.pageSize),this.byteLength=this.pages.length*this.pageSize,this.length=8*this.byteLength,!rSe(this.pageSize))throw new Error("The page size should be a power of two");if(this._trackUpdates=!!t.trackUpdates,this._pageMask=this.pageSize-1,t.buffer){for(var e=0;e<t.buffer.length;e+=this.pageSize)this.pages.set(e/this.pageSize,t.buffer.slice(e,e+this.pageSize));this.byteLength=t.buffer.length,this.length=8*this.byteLength}}Ya.prototype.get=function(t){var e=t&7,r=(t-e)/8;return!!(this.getByte(r)&128>>e)};Ya.prototype.getByte=function(t){var e=t&this._pageMask,r=(t-e)/this.pageSize,n=this.pages.get(r,!0);return n?n.buffer[e+this.pageOffset]:0};Ya.prototype.set=function(t,e){var r=t&7,n=(t-r)/8,s=this.getByte(n);return this.setByte(n,e?s|128>>r:s&(255^128>>r))};Ya.prototype.toBuffer=function(){for(var t=tSe(this.pages.length*this.pageSize),e=0;e<this.pages.length;e++){var r=this.pages.get(e,!0),n=e*this.pageSize;r&&r.buffer.copy(t,n,this.pageOffset,this.pageOffset+this.pageSize)}return t};Ya.prototype.setByte=function(t,e){var r=t&this._pageMask,n=(t-r)/this.pageSize,s=this.pages.get(n,!1);return r+=this.pageOffset,s.buffer[r]===e?!1:(s.buffer[r]=e,t>=this.byteLength&&(this.byteLength=t+1,this.length=this.byteLength*8),this._trackUpdates&&this.pages.updated(s),!0)};function tSe(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e}function rSe(t){return!(t&t-1)}});var _L=m(Ch=>{"use strict";var nSe=Ch&&Ch.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ch,"__esModule",{value:!0});Ch.createMemoryCodePoints=iSe;var sSe=nSe(gL());function iSe(t){let e=0;function r(){let c=t.readUInt32BE(e);e+=4;let l=t.slice(e,e+c);return e+=c,(0,sSe.default)({buffer:l})}let n=r(),s=r(),i=r(),o=r(),a=r(),u=r();return{unassigned_code_points:n,commonly_mapped_to_nothing:s,non_ASCII_space_characters:i,prohibited_characters:o,bidirectional_r_al:a,bidirectional_l:u}}});var EL=m(k9=>{"use strict";Object.defineProperty(k9,"__esModule",{value:!0});var oSe=require("zlib");k9.default=(0,oSe.gunzipSync)(Buffer.from("H4sIAAAAAAACA+3dTYgcaRkA4LemO9Mhxm0FITnE9Cwr4jHgwgZ22B6YywqCJ0HQg5CL4sGTuOjCtGSF4CkHEW856MlTQHD3EJnWkU0Owh5VxE3LHlYQdNxd2U6mU59UV/d09fw4M2EySSXPAzNdP1/9fX/99bzVNZEN4jisRDulVFnQmLxm1aXF9Id/2/xMxNJ4XZlg576yuYlGt9gupV6xoFf8jhu9YvulVrFlp5XSx+lfvYhORGPXvqIRWSxERKtIm8bKFd10WNfKDS5Fo9jJWrq2+M2IlW+8uHgl/+BsROfPF4v5L7148Ur68Sha6dqZpYiVVy8tvLCWXo80Sf/lS89dGX2wHGvpzoXVn75/YWH5wmqe8uika82ViJXTy83Ve2k5Urozm38wm4/ls6t5uT6yfsTSJ7J3T0VKt8c5ExEXI8aFkH729c3eT+7EC6ca8cVULZUiYacX0R5PNWNxlh9L1y90q5kyzrpyy+9WcvOV6URntqw7La9sNVstXyczWVaWYbaaTYqzOHpr7pyiNT3/YzKuT63Z/FqKZlFTiuXtFM2vVOtIq7jiyKJbWZaOWD0euz0yoV2Z7kY0xq2x0YhfzVpmM5px9nTEH7JZ0ot5u39p0ma75Z472/s/H+2yr2inYyuq7fMvJivH2rM72N/Z3lyL31F2b1ya1P0zn816k2KP6JU9UzseucdQH5YqVeH/lFajSN2udg+TLJ9rksNxlvV2lki19rXKI43TPLejFu4ov7k3nMbhyhfY3Xb37f8BAGCf0eMTOH5szf154KmnNgKcnLb+Fzi2AfXktbN7fJelwTAiO/W5uQ2KINXRYu+znqo/WTAdLadURHmy3qciazd3bra4T3w16/f7t7Ms9U5gfJu10955sx1r3vmhBAAAAAAAgId20J1iZbDowNvIjuH427Gr5l/eiC+8OplZON8sVjx/qr9y+Pj+YRItT+NqAM+kkZs3AAAAAID6yfx1FwCAI97/dCh1/ub6SA0AAAAAAAAAgNoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hutp5SiQpYAAAAAAAAAQO2MIpZiT804flnAE2fhwjOeAZXr76kOAAAAAAAA8FjNf4N/l0NE3U/vuVQskLpSd4/Yh2xu9xTu0tFeeNYsLI2f/VMdNxTzj6Je9E/+6pp6Nn3awW3A54goe4Bss6v+PGsjQGMAAAAAAOBp5XEgwH6e7J7rwEQHRb/XvAMAAAAAAAA8yzoDeQDwVGjIAgAAAAAAAACoPfF/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqL/GSkSkClkCAAAAAAAAALXTSAAAAAAAAABA3Y1kAQAAAAAAAADUX8RSXZ9dsHC9+M8Fg2Ex/em1lAZpEBGttcrVjZqLEa+k0XpKw9mG4zWx4ukPUMhkAQAAAAAAABzBqbSe3//rXOS9HxGdo4TqR2XkutCdBu+LaPZw/lBbO7cbHnh2C7N7AIo4evEznllqLqWUp/LnYOtpM2bnOH66wI1+9GO4sOuISwv/TOlumu56FDv3NZhc4mR9v7zYIrafr40j/Cccvj9Xns3t3mu99E7qxUv3bqS0/ouNH/08++RGemfQ+nsx/5uNXsQPGulynPvv3ZTW37zd+1ovrqaYpP/122X6Xpx779Z3zr/3YOPKW1lkaRDf31pPaf3j/msRsVGkL+d/f+/m4sJsPm1cfSsr16e8m9Ldj/KsnyIuR3nXw83Is3EhxLd/2V773ks3m/cj/THKUummdP9qKhIOImuOU0Xjwb3y+oqt735rpTetVbF9n8R4x9crRfO77TKqVOZpDclv5bfK18lMnk+q0K18UpxF/RrGXE0Zxtqx3tWSj+vxbL4XaasfKb0dRbtLW73JsfPGg177H+OmGKlfvS1msllt7JEJm9XOJqXR+Fkfo1H66uy5H1v3Xx5+uJmGLw9jro2u7Loj4PnuR6+f+e3d261+eazNhzrL7X83MohoHpS4PddV8ki1it61//pw1g7z6p1U/26Nm2llST57B5rUvuG0XqSU/rPd7jYrqWcbd+beJQ77BgPMDwn37/8BAGCf0eMTOH4cPlufv9VGgJOzqf8Fjm1APXkd7B7f5dF57GPMaWy/MTvjvNvtXj6h8W2+GXvnzXaseeeHEgAAAAAAAB7aQXeKlcGiadBoEOeLb2dtpGOL2MyOtf391a3P/zD96c3JzIP3t4oV797vrh8+vn+YRL5bBuj/AQAAAABqJvfHXQAAHkX82zfXAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACeAgkAAAAAAAAAqLuRLAAAAAAAAACA2hv9D1iu/VAYaAYA","base64"))});var SL=m((R9,wL)=>{"use strict";var bL=R9&&R9.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},aSe=bL(dL()),uSe=_L(),cSe=bL(EL()),lSe=(0,uSe.createMemoryCodePoints)(cSe.default);function vh(t,e){return(0,aSe.default)(lSe,t,e)}vh.saslprep=vh;vh.default=vh;wL.exports=vh});var DL=m(Rp=>{"use strict";Object.defineProperty(Rp,"__esModule",{value:!0});Rp.ScramSHA256=Rp.ScramSHA1=void 0;var pSe=SL(),ic=require("crypto"),F9=pe(),gi=z(),z2=X(),dSe=$a(),AL=zi(),K2=class extends dSe.AuthProvider{constructor(e){super(),this.cryptoMethod=e||"sha1"}async prepare(e,r){let n=this.cryptoMethod,s=r.credentials;if(!s)throw new gi.MongoMissingCredentialsError("AuthContext must provide credentials.");let i=await(0,z2.randomBytes)(24);return r.nonce=i,{...e,speculativeAuthenticate:{...xL(n,s,i),db:s.source}}}async auth(e){let{reauthenticating:r,response:n}=e;return n?.speculativeAuthenticate&&!r?await TL(this.cryptoMethod,n.speculativeAuthenticate,e):await hSe(this.cryptoMethod,e)}};function CL(t){return t.replace("=","=3D").replace(",","=2C")}function vL(t,e){return Buffer.concat([Buffer.from("n=","utf8"),Buffer.from(t,"utf8"),Buffer.from(",r=","utf8"),Buffer.from(e.toString("base64"),"utf8")])}function xL(t,e,r){let n=CL(e.username);return{saslStart:1,mechanism:t==="sha1"?AL.AuthMechanism.MONGODB_SCRAM_SHA1:AL.AuthMechanism.MONGODB_SCRAM_SHA256,payload:new F9.Binary(Buffer.concat([Buffer.from("n,,","utf8"),vL(n,r)])),autoAuthorize:1,options:{skipEmptyExchange:!0}}}async function hSe(t,e){let{connection:r,credentials:n}=e;if(!n)throw new gi.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!e.nonce)throw new gi.MongoInvalidArgumentError("AuthContext must contain a valid nonce property");let s=e.nonce,i=n.source,o=xL(t,n,s),a=await r.command((0,z2.ns)(`${i}.$cmd`),o,void 0);await TL(t,a,e)}async function TL(t,e,r){let n=r.connection,s=r.credentials;if(!s)throw new gi.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!r.nonce)throw new gi.MongoInvalidArgumentError("Unable to continue SCRAM without valid nonce");let i=r.nonce,o=s.source,a=CL(s.username),u=s.password,c=t==="sha256"?(0,pSe.saslprep)(u):fSe(a,u),l=Buffer.isBuffer(e.payload)?new F9.Binary(e.payload):e.payload,p=OL(l),d=parseInt(p.i,10);if(d&&d<4096)throw new gi.MongoRuntimeError(`Server returned an invalid iteration count ${d}`);let h=p.s,f=p.r;if(f.startsWith("nonce"))throw new gi.MongoRuntimeError(`Server returned an invalid nonce: ${f}`);let y=`c=biws,r=${f}`,g=ESe(c,Buffer.from(h,"base64"),d,t),_=V2(t,g,"Client Key"),w=V2(t,g,"Server Key"),O=ySe(t,_),E=[vL(a,i),l.toString("utf8"),y].join(","),A=V2(t,O,E),x=`p=${mSe(_,A)}`,v=[y,x].join(","),R=V2(t,w,E),M={saslContinue:1,conversationId:e.conversationId,payload:new F9.Binary(Buffer.from(v))},I=await n.command((0,z2.ns)(`${o}.$cmd`),M,void 0),j=OL(I.payload);if(!bSe(Buffer.from(j.v,"base64"),R))throw new gi.MongoRuntimeError("Server returned an invalid signature");if(I.done!==!1)return;let U={saslContinue:1,conversationId:I.conversationId,payload:Buffer.alloc(0)};await n.command((0,z2.ns)(`${o}.$cmd`),U,void 0)}function OL(t){let e=t.toString("utf8"),r={},n=e.split(",");for(let s=0;s<n.length;s++){let i=(n[s].match(/^([^=]*)=(.*)$/)??[]).slice(1);r[i[0]]=i[1]}return r}function fSe(t,e){if(typeof t!="string")throw new gi.MongoInvalidArgumentError("Username must be a string");if(typeof e!="string")throw new gi.MongoInvalidArgumentError("Password must be a string");if(e.length===0)throw new gi.MongoInvalidArgumentError("Password cannot be empty");let r;try{r=ic.createHash("md5")}catch(n){throw ic.getFips()?new Error("Auth mechanism SCRAM-SHA-1 is not supported in FIPS mode"):n}return r.update(`${t}:mongo:${e}`,"utf8"),r.digest("hex")}function mSe(t,e){Buffer.isBuffer(t)||(t=Buffer.from(t)),Buffer.isBuffer(e)||(e=Buffer.from(e));let r=Math.max(t.length,e.length),n=[];for(let s=0;s<r;s+=1)n.push(t[s]^e[s]);return Buffer.from(n).toString("base64")}function ySe(t,e){return ic.createHash(t).update(e).digest()}function V2(t,e,r){return ic.createHmac(t,e).update(r).digest()}var W2={},$9=0;function gSe(){W2={},$9=0}var _Se={sha256:32,sha1:20};function ESe(t,e,r,n){let s=[t,e.toString("base64"),r].join("_");if(W2[s]!=null)return W2[s];let i=ic.pbkdf2Sync(t,e,r,_Se[n],n);return $9>=200&&gSe(),W2[s]=i,$9+=1,i}function bSe(t,e){if(t.length!==e.length)return!1;if(typeof ic.timingSafeEqual=="function")return ic.timingSafeEqual(t,e);let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}var q9=class extends K2{constructor(){super("sha1")}};Rp.ScramSHA1=q9;var j9=class extends K2{constructor(){super("sha256")}};Rp.ScramSHA256=j9});var BL=m(H2=>{"use strict";Object.defineProperty(H2,"__esModule",{value:!0});H2.X509=void 0;var ML=z(),wSe=X(),SSe=$a(),L9=class extends SSe.AuthProvider{async prepare(e,r){let{credentials:n}=r;if(!n)throw new ML.MongoMissingCredentialsError("AuthContext must provide credentials.");return{...e,speculativeAuthenticate:PL(n)}}async auth(e){let r=e.connection,n=e.credentials;if(!n)throw new ML.MongoMissingCredentialsError("AuthContext must provide credentials.");e.response?.speculativeAuthenticate||await r.command((0,wSe.ns)("$external.$cmd"),PL(n),void 0)}};H2.X509=L9;function PL(t){let e={authenticate:1,mechanism:"MONGODB-X509"};return t.username&&(e.user=t.username),e}});var V9=m(G2=>{"use strict";Object.defineProperty(G2,"__esModule",{value:!0});G2.MongoClientAuthProviders=void 0;var ASe=kg(),OSe=zj(),kL=B2(),CSe=x9(),vSe=aL(),IL=M9(),xSe=uL(),oc=zi(),NL=DL(),TSe=BL(),RL=z(),DSe=new Map([[oc.AuthMechanism.MONGODB_AWS,({AWS_CREDENTIAL_PROVIDER:t})=>new OSe.MongoDBAWS(t)],[oc.AuthMechanism.MONGODB_GSSAPI,()=>new ASe.GSSAPI],[oc.AuthMechanism.MONGODB_OIDC,t=>new kL.MongoDBOIDC(MSe(t))],[oc.AuthMechanism.MONGODB_PLAIN,()=>new xSe.Plain],[oc.AuthMechanism.MONGODB_SCRAM_SHA1,()=>new NL.ScramSHA1],[oc.AuthMechanism.MONGODB_SCRAM_SHA256,()=>new NL.ScramSHA256],[oc.AuthMechanism.MONGODB_X509,()=>new TSe.X509]]),U9=class{constructor(){this.existingProviders=new Map}getOrCreateProvider(e,r){let n=this.existingProviders.get(e);if(n)return n;let s=DSe.get(e);if(!s)throw new RL.MongoInvalidArgumentError(`authMechanism ${e} not supported`);let i=s(r);return this.existingProviders.set(e,i),i}};G2.MongoClientAuthProviders=U9;function MSe(t){if(t.OIDC_HUMAN_CALLBACK)return new vSe.HumanCallbackWorkflow(new IL.TokenCache,t.OIDC_HUMAN_CALLBACK);if(t.OIDC_CALLBACK)return new CSe.AutomatedCallbackWorkflow(new IL.TokenCache,t.OIDC_CALLBACK);{let e=t.ENVIRONMENT,r=kL.OIDC_WORKFLOWS.get(e)?.();if(!r)throw new RL.MongoInvalidArgumentError(`Could not load workflow for environment ${t.ENVIRONMENT}`);return r}}});var W9=m(Y2=>{"use strict";Object.defineProperty(Y2,"__esModule",{value:!0});Y2.ClientBulkWriteOperation=void 0;var PSe=ze(),BSe=X(),ISe=At(),ac=Xe(),J2=class extends ISe.CommandOperation{get commandName(){return"bulkWrite"}constructor(e,r){super(void 0,r),this.SERVER_COMMAND_RESPONSE_TYPE=PSe.ClientBulkWriteCursorResponse,this.commandBuilder=e,this.options=r,this.ns=new BSe.MongoDBNamespace("admin","$cmd")}resetBatch(){return this.commandBuilder.resetBatch()}get canRetryWrite(){return this.commandBuilder.isBatchRetryable}handleOk(e){return e}buildCommandDocument(e,r){let n=this.commandBuilder.buildBatch(e.description.maxMessageSizeBytes,e.description.maxWriteBatchSize,e.description.maxBsonObjectSize);return this.canRetryWrite||(this.options.willRetryWrite=!1),n}};Y2.ClientBulkWriteOperation=J2;(0,ac.defineAspects)(J2,[ac.Aspect.WRITE_OPERATION,ac.Aspect.SKIP_COLLATION,ac.Aspect.CURSOR_CREATING,ac.Aspect.RETRYABLE,ac.Aspect.COMMAND_BATCHING,ac.Aspect.SUPPORTS_RAW_DATA])});var $L=m(Q2=>{"use strict";Object.defineProperty(Q2,"__esModule",{value:!0});Q2.ClientBulkWriteCursor=void 0;var NSe=W9(),kSe=Er(),FL=X(),RSe=Xr(),z9=class t extends RSe.AbstractCursor{constructor(e,r,n={}){super(e,new FL.MongoDBNamespace("admin","$cmd"),n),this.commandBuilder=r,this.clientBulkWriteOptions=n}get response(){return this.cursorResponse?this.cursorResponse:null}get operations(){return this.commandBuilder.lastOperations}clone(){let e=(0,FL.mergeOptions)({},this.clientBulkWriteOptions);return delete e.session,new t(this.client,this.commandBuilder,{...e})}async _initialize(e){let r=new NSe.ClientBulkWriteOperation(this.commandBuilder,{...this.clientBulkWriteOptions,...this.cursorOptions,session:e}),n=await(0,kSe.executeOperation)(this.client,r,this.timeoutContext);return this.cursorResponse=n,{server:r.server,session:e,response:n}}};Q2.ClientBulkWriteCursor=z9});var WL=m(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.buildReplaceOneOperation=Ct.buildUpdateManyOperation=Ct.buildUpdateOneOperation=Ct.buildDeleteManyOperation=Ct.buildDeleteOneOperation=Ct.buildInsertOneOperation=Ct.ClientBulkWriteCommandBuilder=void 0;Ct.buildOperation=J9;var K9=pe(),qL=rh(),xh=z(),LL=zl(),Y9=X(),jL=1e3,G9=class{constructor(e,r,n){this.models=e,this.options=r,this.pkFactory=n??Y9.DEFAULT_PK_FACTORY,this.currentModelIndex=0,this.previousModelIndex=0,this.lastOperations=[],this.isBatchRetryable=!0}get errorsOnly(){return"verboseResults"in this.options?!this.options.verboseResults:!0}hasNextBatch(){return this.currentModelIndex<this.models.length}resetBatch(){return this.currentModelIndex=this.previousModelIndex,!0}buildBatch(e,r,n){this.isBatchRetryable=!0;let s=0,i=0,o=this.baseCommand(),a=new Map;for(this.previousModelIndex=this.currentModelIndex;this.currentModelIndex<this.models.length;){let u=this.models[this.currentModelIndex],c=u.namespace,l=a.get(c);if((u.name==="deleteMany"||u.name==="updateMany")&&(this.isBatchRetryable=!1),l!=null){let p=J9(u,l,this.pkFactory,this.options),d;try{d=K9.BSON.serialize(p)}catch(h){throw new xh.MongoInvalidArgumentError("Could not serialize operation to BSON",{cause:h})}if(H9("ops",d,n),s+d.length<e&&o.ops.documents.length<r)s=jL+o.ops.push(p,d),this.currentModelIndex++;else break}else{a.set(c,i);let p={ns:c},d=J9(u,i,this.pkFactory,this.options),h,f;try{h=K9.BSON.serialize(p),f=K9.BSON.serialize(d)}catch(y){throw new xh.MongoInvalidArgumentError("Could not serialize ns info to BSON",{cause:y})}if(H9("nsInfo",h,n),H9("ops",f,n),s+h.length+f.length<e&&o.ops.documents.length<r)s=jL+o.nsInfo.push(p,h)+o.ops.push(d,f),i++,this.currentModelIndex++;else break}}return this.lastOperations=o.ops.documents,o}baseCommand(){let e={bulkWrite:1,errorsOnly:this.errorsOnly,ordered:this.options.ordered??!0,ops:new qL.DocumentSequence("ops"),nsInfo:new qL.DocumentSequence("nsInfo")};return this.options.bypassDocumentValidation!=null&&(e.bypassDocumentValidation=this.options.bypassDocumentValidation),this.options.let&&(e.let=this.options.let),this.options.comment!==void 0&&(e.comment=this.options.comment),e}};Ct.ClientBulkWriteCommandBuilder=G9;function H9(t,e,r){if(e.length>r)throw new xh.MongoInvalidArgumentError(`Client bulk write operation ${t} of length ${e.length} exceeds the max bson object size of ${r}`)}var FSe=(t,e,r)=>{let n={insert:e,document:t.document};return n.document._id=t.document._id??r.createPk(),n};Ct.buildInsertOneOperation=FSe;var $Se=(t,e)=>UL(t,e,!1);Ct.buildDeleteOneOperation=$Se;var qSe=(t,e)=>UL(t,e,!0);Ct.buildDeleteManyOperation=qSe;function UL(t,e,r){let n={delete:e,multi:r,filter:t.filter};return t.hint&&(n.hint=t.hint),t.collation&&(n.collation=t.collation),n}var jSe=(t,e,r)=>VL(t,e,!1,r);Ct.buildUpdateOneOperation=jSe;var LSe=(t,e,r)=>VL(t,e,!0,r);Ct.buildUpdateManyOperation=LSe;function USe(t,e){if(!(0,Y9.hasAtomicOperators)(t,e))throw new xh.MongoAPIError("Client bulk write update models must only contain atomic modifiers (start with $) and must not be empty.")}function VL(t,e,r,n){USe(t.update,n);let s={update:e,multi:r,filter:t.filter,updateMods:t.update};return t.hint&&(s.hint=t.hint),t.upsert&&(s.upsert=t.upsert),t.arrayFilters&&(s.arrayFilters=t.arrayFilters),t.collation&&(s.collation=t.collation),!r&&"sort"in t&&t.sort!=null&&(s.sort=(0,LL.formatSort)(t.sort)),s}var VSe=(t,e)=>{if((0,Y9.hasAtomicOperators)(t.replacement))throw new xh.MongoAPIError("Client bulk write replace models must not contain atomic modifiers (start with $) and must not be empty.");let r={update:e,multi:!1,filter:t.filter,updateMods:t.replacement};return t.hint&&(r.hint=t.hint),t.upsert&&(r.upsert=t.upsert),t.collation&&(r.collation=t.collation),t.sort!=null&&(r.sort=(0,LL.formatSort)(t.sort)),r};Ct.buildReplaceOneOperation=VSe;function J9(t,e,r,n){switch(t.name){case"insertOne":return(0,Ct.buildInsertOneOperation)(t,e,r);case"deleteOne":return(0,Ct.buildDeleteOneOperation)(t,e);case"deleteMany":return(0,Ct.buildDeleteManyOperation)(t,e);case"updateOne":return(0,Ct.buildUpdateOneOperation)(t,e,n);case"updateMany":return(0,Ct.buildUpdateManyOperation)(t,e,n);case"replaceOne":return(0,Ct.buildReplaceOneOperation)(t,e)}}});var zL=m(X2=>{"use strict";Object.defineProperty(X2,"__esModule",{value:!0});X2.ClientBulkWriteResultsMerger=void 0;var WSe=ka(),zSe=z(),KSe={acknowledged:!1,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0},Q9=class{static unacknowledged(){return KSe}constructor(e){this.options=e,this.currentBatchOffset=0,this.writeConcernErrors=[],this.writeErrors=new Map,this.result={acknowledged:!0,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0},e.verboseResults&&(this.result.insertResults=new Map,this.result.updateResults=new Map,this.result.deleteResults=new Map)}get bulkWriteResult(){return{acknowledged:this.result.acknowledged,insertedCount:this.result.insertedCount,upsertedCount:this.result.upsertedCount,matchedCount:this.result.matchedCount,modifiedCount:this.result.modifiedCount,deletedCount:this.result.deletedCount,insertResults:this.result.insertResults,updateResults:this.result.updateResults,deleteResults:this.result.deleteResults}}async merge(e){let r;try{for await(let n of e)if(n.ok===1)this.options.verboseResults&&this.processDocument(e,n);else if(this.options.ordered){let s=new zSe.MongoClientBulkWriteError({message:"Mongo client ordered bulk write encountered a write error."});throw s.writeErrors.set(n.idx+this.currentBatchOffset,{code:n.code,message:n.errmsg}),s.partialResult=this.result,s}else this.writeErrors.set(n.idx+this.currentBatchOffset,{code:n.code,message:n.errmsg})}catch(n){if(n instanceof WSe.MongoWriteConcernError){let s=n.result;if(r={insertedCount:s.nInserted,upsertedCount:s.nUpserted,matchedCount:s.nMatched,modifiedCount:s.nModified,deletedCount:s.nDeleted,writeConcernError:s.writeConcernError},this.options.verboseResults&&s.cursor.firstBatch)for(let i of s.cursor.firstBatch)i.ok===1&&this.processDocument(e,i)}else throw n}finally{if(e.response){let n=e.response;this.incrementCounts(n)}this.currentBatchOffset+=e.operations.length}if(r){let n=r.writeConcernError;this.incrementCounts(r),this.writeConcernErrors.push({code:n.code,message:n.errmsg})}return this.result}processDocument(e,r){let n=e.operations[r.idx];if("insert"in n&&this.result.insertResults?.set(r.idx+this.currentBatchOffset,{insertedId:n.document._id}),"update"in n){let s={matchedCount:r.n,modifiedCount:r.nModified??0,didUpsert:r.upserted!=null};r.upserted&&(s.upsertedId=r.upserted._id),this.result.updateResults?.set(r.idx+this.currentBatchOffset,s)}"delete"in n&&this.result.deleteResults?.set(r.idx+this.currentBatchOffset,{deletedCount:r.n})}incrementCounts(e){this.result.insertedCount+=e.insertedCount,this.result.upsertedCount+=e.upsertedCount,this.result.matchedCount+=e.matchedCount,this.result.modifiedCount+=e.modifiedCount,this.result.deletedCount+=e.deletedCount}};X2.ClientBulkWriteResultsMerger=Q9});var GL=m(Z2=>{"use strict";Object.defineProperty(Z2,"__esModule",{value:!0});Z2.ClientBulkWriteExecutor=void 0;var KL=Xr(),HSe=$L(),uc=z(),GSe=ir(),JSe=X(),YSe=hn(),QSe=Er(),XSe=W9(),ZSe=WL(),HL=zL(),X9=class{constructor(e,r,n){if(r.length===0)throw new uc.MongoClientBulkWriteExecutionError("No client bulk write models were provided.");if(this.client=e,this.operations=r,this.options={ordered:!0,bypassDocumentValidation:!1,verboseResults:!1,...n},this.options.writeConcern||(this.options.writeConcern=YSe.WriteConcern.fromOptions(this.client.s.options)),this.options.writeConcern?.w===0){if(this.options.verboseResults)throw new uc.MongoInvalidArgumentError("Cannot request unacknowledged write concern and verbose results");if(this.options.ordered)throw new uc.MongoInvalidArgumentError("Cannot request unacknowledged write concern and ordered writes")}}async execute(){let e=this.client.s.options.pkFactory,r=new ZSe.ClientBulkWriteCommandBuilder(this.operations,this.options,e),n=(0,JSe.resolveTimeoutOptions)(this.client,this.options),s=GSe.TimeoutContext.create(n);if(this.options.writeConcern?.w===0){for(;r.hasNextBatch();){let i=new XSe.ClientBulkWriteOperation(r,this.options);await(0,QSe.executeOperation)(this.client,i,s)}return HL.ClientBulkWriteResultsMerger.unacknowledged()}else{let i=new HL.ClientBulkWriteResultsMerger(this.options);for(;r.hasNextBatch();){let o=new KL.CursorTimeoutContext(s,Symbol()),a={...this.options,timeoutContext:o,...n.timeoutMS!=null&&{timeoutMode:KL.CursorTimeoutMode.LIFETIME}},u=new HSe.ClientBulkWriteCursor(this.client,r,a);try{await i.merge(u)}catch(c){if(c instanceof uc.MongoServerError&&!(c instanceof uc.MongoClientBulkWriteError)){let l=new uc.MongoClientBulkWriteError({message:"Mongo client bulk write encountered an error during execution"});throw l.cause=c,l.partialResult=i.bulkWriteResult,l}else throw c}}if(i.writeConcernErrors.length>0||i.writeErrors.size>0){let o=new uc.MongoClientBulkWriteError({message:"Mongo client bulk write encountered errors during execution."});throw o.writeConcernErrors=i.writeConcernErrors,o.writeErrors=i.writeErrors,o.partialResult=i.bulkWriteResult,o}return i.bulkWriteResult}}};Z2.ClientBulkWriteExecutor=X9});var YL=m(t_=>{"use strict";Object.defineProperty(t_,"__esModule",{value:!0});t_.EndSessionsOperation=void 0;var e3e=ze(),t3e=At(),r3e=sr(),n3e=X(),JL=Xe(),e_=class extends t3e.CommandOperation{constructor(e){super(),this.writeConcern={w:0},this.ns=n3e.MongoDBNamespace.fromString("admin.$cmd"),this.SERVER_COMMAND_RESPONSE_TYPE=e3e.MongoDBResponse,this.sessions=e}buildCommandDocument(e,r){return{endSessions:this.sessions}}buildOptions(e){return{timeoutContext:e,readPreference:r3e.ReadPreference.primaryPreferred}}get commandName(){return"endSessions"}};t_.EndSessionsOperation=e_;(0,JL.defineAspects)(e_,JL.Aspect.WRITE_OPERATION)});var n8=m($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.WaitingForSuitableServerEvent=$s.ServerSelectionSucceededEvent=$s.ServerSelectionFailedEvent=$s.ServerSelectionStartedEvent=$s.ServerSelectionEvent=void 0;var s3e=X(),r_=Lt(),cc=class{constructor(e,r,n){this.selector=e,this.operation=n,this.topologyDescription=r}};$s.ServerSelectionEvent=cc;var Z9=class extends cc{constructor(e,r,n){super(e,r,n),this.name=r_.SERVER_SELECTION_STARTED,this.message="Server selection started"}};$s.ServerSelectionStartedEvent=Z9;var e8=class extends cc{constructor(e,r,n,s){super(e,r,s),this.name=r_.SERVER_SELECTION_FAILED,this.message="Server selection failed",this.failure=n}};$s.ServerSelectionFailedEvent=e8;var t8=class extends cc{constructor(e,r,n,s){super(e,r,s),this.name=r_.SERVER_SELECTION_SUCCEEDED,this.message="Server selection succeeded";let{host:i,port:o}=s3e.HostAddress.fromString(n).toHostPort();this.serverHost=i,this.serverPort=o}};$s.ServerSelectionSucceededEvent=t8;var r8=class extends cc{constructor(e,r,n,s){super(e,r,s),this.name=r_.WAITING_FOR_SUITABLE_SERVER,this.message="Waiting for suitable server to become available",this.remainingTimeMS=n}};$s.WaitingForSuitableServerEvent=r8});var o8=m(Fp=>{"use strict";Object.defineProperty(Fp,"__esModule",{value:!0});Fp.SrvPoller=Fp.SrvPollingEvent=void 0;var i3e=require("dns"),s8=require("timers"),o3e=z(),a3e=is(),Th=X(),n_=class{constructor(e){this.srvRecords=e}hostnames(){return new Set(this.srvRecords.map(e=>Th.HostAddress.fromSrvRecord(e).toString()))}};Fp.SrvPollingEvent=n_;var i8=class t extends a3e.TypedEventEmitter{static{this.SRV_RECORD_DISCOVERY="srvRecordDiscovery"}constructor(e){if(super(),this.on("error",Th.noop),!e||!e.srvHost)throw new o3e.MongoRuntimeError("Options for SrvPoller must exist and include srvHost");this.srvHost=e.srvHost,this.srvMaxHosts=e.srvMaxHosts??0,this.srvServiceName=e.srvServiceName??"mongodb",this.rescanSrvIntervalMS=6e4,this.heartbeatFrequencyMS=e.heartbeatFrequencyMS??1e4,this.haMode=!1,this.generation=0,this._timeout=void 0}get srvAddress(){return`_${this.srvServiceName}._tcp.${this.srvHost}`}get intervalMS(){return this.haMode?this.heartbeatFrequencyMS:this.rescanSrvIntervalMS}start(){this._timeout||this.schedule()}stop(){this._timeout&&((0,s8.clearTimeout)(this._timeout),this.generation+=1,this._timeout=void 0)}schedule(){this._timeout&&(0,s8.clearTimeout)(this._timeout),this._timeout=(0,s8.setTimeout)(()=>{this._poll().then(void 0,Th.squashError)},this.intervalMS)}success(e){this.haMode=!1,this.schedule(),this.emit(t.SRV_RECORD_DISCOVERY,new n_(e))}failure(){this.haMode=!0,this.schedule()}async _poll(){let e=this.generation,r;try{r=await i3e.promises.resolveSrv(this.srvAddress)}catch{this.failure();return}if(e!==this.generation)return;let n=[];for(let s of r)try{(0,Th.checkParentDomainMatch)(s.name,this.srvHost),n.push(s)}catch(i){(0,Th.squashError)(i)}if(!n.length){this.failure();return}this.success(n)}};Fp.SrvPoller=i8});var sU=m(i_=>{"use strict";Object.defineProperty(i_,"__esModule",{value:!0});i_.Topology=void 0;var u3e=m9(),Rn=Lt(),Xi=z(),Et=Ba(),c3e=is(),Dh=sr(),a8=ir(),Fn=X(),Oe=ts(),Qa=E2(),QL=s9(),c8=dh(),u8=xd(),Xa=n8(),s_=o8(),XL=Ev(),l3e=0,Mh=(0,Fn.makeStateMachine)({[Oe.STATE_CLOSED]:[Oe.STATE_CLOSED,Oe.STATE_CONNECTING],[Oe.STATE_CONNECTING]:[Oe.STATE_CONNECTING,Oe.STATE_CLOSING,Oe.STATE_CONNECTED,Oe.STATE_CLOSED],[Oe.STATE_CONNECTED]:[Oe.STATE_CONNECTED,Oe.STATE_CLOSING,Oe.STATE_CLOSED],[Oe.STATE_CLOSING]:[Oe.STATE_CLOSING,Oe.STATE_CLOSED]}),Ph=class t extends c3e.TypedEventEmitter{static{this.SERVER_OPENING=Rn.SERVER_OPENING}static{this.SERVER_CLOSED=Rn.SERVER_CLOSED}static{this.SERVER_DESCRIPTION_CHANGED=Rn.SERVER_DESCRIPTION_CHANGED}static{this.TOPOLOGY_OPENING=Rn.TOPOLOGY_OPENING}static{this.TOPOLOGY_CLOSED=Rn.TOPOLOGY_CLOSED}static{this.TOPOLOGY_DESCRIPTION_CHANGED=Rn.TOPOLOGY_DESCRIPTION_CHANGED}static{this.ERROR=Rn.ERROR}static{this.OPEN=Rn.OPEN}static{this.CONNECT=Rn.CONNECT}static{this.CLOSE=Rn.CLOSE}static{this.TIMEOUT=Rn.TIMEOUT}constructor(e,r,n){super(),this.on("error",Fn.noop),this.client=e,n=n??{hosts:[Fn.HostAddress.fromString("localhost:27017")],...Object.fromEntries(u3e.DEFAULT_OPTIONS.entries())},typeof r=="string"?r=[Fn.HostAddress.fromString(r)]:Array.isArray(r)||(r=[r]);let s=[];for(let c of r)if(typeof c=="string")s.push(Fn.HostAddress.fromString(c));else if(c instanceof Fn.HostAddress)s.push(c);else throw new Xi.MongoRuntimeError(`Topology cannot be constructed from ${JSON.stringify(c)}`);let i=p3e(n),o=l3e++,a=n.srvMaxHosts==null||n.srvMaxHosts===0||n.srvMaxHosts>=s.length?s:(0,Fn.shuffle)(s,n.srvMaxHosts),u=new Map;for(let c of a)u.set(c.toString(),new c8.ServerDescription(c));this.waitQueue=new Fn.List,this.s={id:o,options:n,seedlist:s,state:Oe.STATE_CLOSED,description:new XL.TopologyDescription(i,u,n.replicaSet,void 0,void 0,void 0,n),serverSelectionTimeoutMS:n.serverSelectionTimeoutMS,heartbeatFrequencyMS:n.heartbeatFrequencyMS,minHeartbeatFrequencyMS:n.minHeartbeatFrequencyMS,servers:new Map,credentials:n?.credentials,clusterTime:void 0,detectShardedTopology:c=>this.detectShardedTopology(c),detectSrvRecords:c=>this.detectSrvRecords(c)},this.mongoLogger=e.mongoLogger,this.component="topology",n.srvHost&&!n.loadBalanced&&(this.s.srvPoller=n.srvPoller??new s_.SrvPoller({heartbeatFrequencyMS:this.s.heartbeatFrequencyMS,srvHost:n.srvHost,srvMaxHosts:n.srvMaxHosts,srvServiceName:n.srvServiceName}),this.on(t.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology)),this.connectionLock=void 0}detectShardedTopology(e){let r=e.previousDescription.type,n=e.newDescription.type,s=r!==Oe.TopologyType.Sharded&&n===Oe.TopologyType.Sharded,o=!!this.s.srvPoller?.listeners(s_.SrvPoller.SRV_RECORD_DISCOVERY)?.includes(this.s.detectSrvRecords);s&&!o&&(this.s.srvPoller?.on(s_.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords),this.s.srvPoller?.start())}detectSrvRecords(e){let r=this.s.description;this.s.description=this.s.description.updateFromSrvPollingEvent(e,this.s.options.srvMaxHosts),this.s.description!==r&&(ZL(this),this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new Qa.TopologyDescriptionChangedEvent(this.s.id,r,this.s.description)))}get description(){return this.s.description}get loadBalanced(){return this.s.options.loadBalanced}get serverApi(){return this.s.options.serverApi}async connect(e){this.connectionLock??=this._connect(e);try{return await this.connectionLock,this}finally{this.connectionLock=void 0}}async _connect(e){if(e=e??{},this.s.state===Oe.STATE_CONNECTED)return this;Mh(this,Oe.STATE_CONNECTING),this.emitAndLog(t.TOPOLOGY_OPENING,new Qa.TopologyOpeningEvent(this.s.id)),this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new Qa.TopologyDescriptionChangedEvent(this.s.id,new XL.TopologyDescription(Oe.TopologyType.Unknown),this.s.description));let r=Array.from(this.s.description.servers.values());if(this.s.servers=new Map(r.map(a=>[a.address,rU(this,a)])),this.s.options.loadBalanced)for(let a of r){let u=new c8.ServerDescription(a.hostAddress,void 0,{loadBalanced:this.s.options.loadBalanced});this.serverUpdateHandler(u)}let n=this.client.s.options.serverSelectionTimeoutMS,s=e.readPreference??Dh.ReadPreference.primary,i=a8.TimeoutContext.create({timeoutMS:void 0,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:this.client.s.options.waitQueueTimeoutMS}),o={operationName:"handshake",...e,timeoutContext:i};try{let a=await this.selectServer((0,u8.readPreferenceServerSelector)(s),o);if(!(this.s.options.__skipPingOnConnect===!0)){let c=await a.pool.checkOut({timeoutContext:i});return a.pool.checkIn(c),Mh(this,Oe.STATE_CONNECTED),this.emit(t.OPEN,this),this.emit(t.CONNECT,this),this}return Mh(this,Oe.STATE_CONNECTED),this.emit(t.OPEN,this),this.emit(t.CONNECT,this),this}catch(a){throw this.close(),a}}closeCheckedOutConnections(){for(let e of this.s.servers.values())return e.closeCheckedOutConnections()}close(){if(!(this.s.state===Oe.STATE_CLOSED||this.s.state===Oe.STATE_CLOSING)){for(let e of this.s.servers.values())tU(e,this);this.s.servers.clear(),Mh(this,Oe.STATE_CLOSING),nU(this.waitQueue,new Xi.MongoTopologyClosedError),this.s.srvPoller&&(this.s.srvPoller.stop(),this.s.srvPoller.removeListener(s_.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords)),this.removeListener(t.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology),Mh(this,Oe.STATE_CLOSED),this.emitAndLog(t.TOPOLOGY_CLOSED,new Qa.TopologyClosedEvent(this.s.id))}}async selectServer(e,r){let n;if(typeof e!="function")if(typeof e=="string")n=(0,u8.readPreferenceServerSelector)(Dh.ReadPreference.fromString(e));else{let h;e instanceof Dh.ReadPreference?h=e:(Dh.ReadPreference.translate(r),h=r.readPreference||Dh.ReadPreference.primary),n=(0,u8.readPreferenceServerSelector)(h)}else n=e;r={serverSelectionTimeoutMS:this.s.serverSelectionTimeoutMS,...r},this.client.mongoLogger?.willLog(Et.MongoLoggableComponent.SERVER_SELECTION,Et.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(Et.MongoLoggableComponent.SERVER_SELECTION,new Xa.ServerSelectionStartedEvent(e,this.description,r.operationName));let s;r.timeoutContext?s=r.timeoutContext.serverSelectionTimeout:s=a8.Timeout.expires(r.serverSelectionTimeoutMS??0);let i=this.description.type===Oe.TopologyType.Sharded,o=r.session,a=o&&o.transaction;if(i&&a&&a.server)return this.client.mongoLogger?.willLog(Et.MongoLoggableComponent.SERVER_SELECTION,Et.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(Et.MongoLoggableComponent.SERVER_SELECTION,new Xa.ServerSelectionSucceededEvent(e,this.description,a.server.pool.address,r.operationName)),r.timeoutContext?.clearServerSelectionTimeout&&s?.clear(),a.server;let{promise:u,resolve:c,reject:l}=(0,Fn.promiseWithResolvers)(),p={serverSelector:n,topologyDescription:this.description,mongoLogger:this.client.mongoLogger,transaction:a,resolve:c,reject:l,cancelled:!1,startTime:(0,Fn.now)(),operationName:r.operationName,waitingLogged:!1,previousServer:r.previousServer},d=(0,Fn.addAbortListener)(r.signal,function(){p.cancelled=!0,l(this.reason)});this.waitQueue.push(p),eU(this);try{s?.throwIfExpired();let h=await(s?Promise.race([u,s]):u);return r.timeoutContext?.csotEnabled()&&h.description.minRoundTripTime!==0&&(r.timeoutContext.minRoundTripTime=h.description.minRoundTripTime),h}catch(h){if(a8.TimeoutError.is(h)){p.cancelled=!0;let f=new Xi.MongoServerSelectionError(`Server selection timed out after ${s?.duration} ms`,this.description);throw this.client.mongoLogger?.willLog(Et.MongoLoggableComponent.SERVER_SELECTION,Et.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(Et.MongoLoggableComponent.SERVER_SELECTION,new Xa.ServerSelectionFailedEvent(e,this.description,f,r.operationName)),r.timeoutContext?.csotEnabled()?new Xi.MongoOperationTimeoutError("Timed out during server selection",{cause:f}):f}throw h}finally{d?.[Fn.kDispose](),r.timeoutContext?.clearServerSelectionTimeout&&s?.clear()}}serverUpdateHandler(e){if(!this.s.description.hasServer(e.address)||d3e(this.s.description,e))return;let r=this.s.description,n=this.s.description.servers.get(e.address);if(!n)return;let s=e.$clusterTime;s&&(0,Oe._advanceClusterTime)(this,s);let i=n&&n.equals(e);if(this.s.description=this.s.description.update(e),this.s.description.compatibilityError){this.emit(t.ERROR,new Xi.MongoCompatibilityError(this.s.description.compatibilityError));return}if(!i){let o=this.s.description.servers.get(e.address);o&&this.emit(t.SERVER_DESCRIPTION_CHANGED,new Qa.ServerDescriptionChangedEvent(this.s.id,e.address,n,o))}ZL(this,e),this.waitQueue.length>0&&eU(this),i||this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new Qa.TopologyDescriptionChangedEvent(this.s.id,r,this.s.description))}auth(e,r){typeof e=="function"&&(r=e,e=void 0),typeof r=="function"&&r(void 0,!0)}isConnected(){return this.s.state===Oe.STATE_CONNECTED}isDestroyed(){return this.s.state===Oe.STATE_CLOSED}lastHello(){let e=Array.from(this.description.servers.values());return e.length===0?{}:e.filter(s=>s.type!==Oe.ServerType.Unknown)[0]||{maxWireVersion:this.description.commonWireVersion}}get commonWireVersion(){return this.description.commonWireVersion}get logicalSessionTimeoutMinutes(){return this.description.logicalSessionTimeoutMinutes}get clusterTime(){return this.s.clusterTime}set clusterTime(e){this.s.clusterTime=e}};i_.Topology=Ph;function tU(t,e){for(let r of Rn.LOCAL_SERVER_EVENTS)t.removeAllListeners(r);t.close(),e.emitAndLog(Ph.SERVER_CLOSED,new Qa.ServerClosedEvent(e.s.id,t.description.address));for(let r of Rn.SERVER_RELAY_EVENTS)t.removeAllListeners(r)}function p3e(t){return t?.directConnection?Oe.TopologyType.Single:t?.replicaSet?Oe.TopologyType.ReplicaSetNoPrimary:t?.loadBalanced?Oe.TopologyType.LoadBalanced:Oe.TopologyType.Unknown}function rU(t,e){t.emitAndLog(Ph.SERVER_OPENING,new Qa.ServerOpeningEvent(t.s.id,e.address));let r=new QL.Server(t,e,t.s.options);for(let n of Rn.SERVER_RELAY_EVENTS)r.on(n,s=>t.emit(n,s));return r.on(QL.Server.DESCRIPTION_RECEIVED,n=>t.serverUpdateHandler(n)),r.connect(),r}function ZL(t,e){if(e&&t.s.servers.has(e.address)){let r=t.s.servers.get(e.address);if(r){if(r.s.description=e,e.error instanceof Xi.MongoError&&e.error.hasErrorLabel(Xi.MongoErrorLabel.ResetPool)){let n=e.error.hasErrorLabel(Xi.MongoErrorLabel.InterruptInUseConnections);r.pool.clear({interruptInUseConnections:n})}else if(e.error==null){let n=t.s.description.type;(e.isDataBearing||e.type!==Oe.ServerType.Unknown&&n===Oe.TopologyType.Single)&&r.pool.ready()}}}for(let r of t.description.servers.values())if(!t.s.servers.has(r.address)){let n=rU(t,r);t.s.servers.set(r.address,n)}for(let r of t.s.servers){let n=r[0];if(t.description.hasServer(n)||!t.s.servers.has(n))continue;let s=t.s.servers.get(n);t.s.servers.delete(n),s&&tU(s,t)}}function nU(t,e){for(;t.length;){let r=t.shift();r&&(r.cancelled||(r.mongoLogger?.willLog(Et.MongoLoggableComponent.SERVER_SELECTION,Et.SeverityLevel.DEBUG)&&r.mongoLogger?.debug(Et.MongoLoggableComponent.SERVER_SELECTION,new Xa.ServerSelectionFailedEvent(r.serverSelector,r.topologyDescription,e,r.operationName)),r.reject(e)))}}function eU(t){if(t.s.state===Oe.STATE_CLOSED){nU(t.waitQueue,new Xi.MongoTopologyClosedError);return}let e=t.description.type===Oe.TopologyType.Sharded,r=Array.from(t.description.servers.values()),n=t.waitQueue.length;for(let s=0;s<n;++s){let i=t.waitQueue.shift();if(!i||i.cancelled)continue;let o;try{let c=i.serverSelector,l=i.previousServer;o=c?c(t.description,r,l?[l]:[]):r}catch(c){t.client.mongoLogger?.willLog(Et.MongoLoggableComponent.SERVER_SELECTION,Et.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(Et.MongoLoggableComponent.SERVER_SELECTION,new Xa.ServerSelectionFailedEvent(i.serverSelector,t.description,c,i.operationName)),i.reject(c);continue}let a;if(o.length===0){i.waitingLogged||(t.client.mongoLogger?.willLog(Et.MongoLoggableComponent.SERVER_SELECTION,Et.SeverityLevel.INFORMATIONAL)&&t.client.mongoLogger?.info(Et.MongoLoggableComponent.SERVER_SELECTION,new Xa.WaitingForSuitableServerEvent(i.serverSelector,t.description,t.s.serverSelectionTimeoutMS!==0?t.s.serverSelectionTimeoutMS-((0,Fn.now)()-i.startTime):-1,i.operationName)),i.waitingLogged=!0),t.waitQueue.push(i);continue}else if(o.length===1)a=t.s.servers.get(o[0].address);else{let c=(0,Fn.shuffle)(o,2),l=t.s.servers.get(c[0].address),p=t.s.servers.get(c[1].address);a=l&&p&&l.s.operationCount<p.s.operationCount?l:p}if(!a){let c=new Xi.MongoServerSelectionError("server selection returned a server description but the server was not found in the topology",t.description);t.client.mongoLogger?.willLog(Et.MongoLoggableComponent.SERVER_SELECTION,Et.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(Et.MongoLoggableComponent.SERVER_SELECTION,new Xa.ServerSelectionFailedEvent(i.serverSelector,t.description,c,i.operationName)),i.reject(c);return}let u=i.transaction;e&&u&&u.isActive&&a&&u.pinServer(a),t.client.mongoLogger?.willLog(Et.MongoLoggableComponent.SERVER_SELECTION,Et.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(Et.MongoLoggableComponent.SERVER_SELECTION,new Xa.ServerSelectionSucceededEvent(i.serverSelector,i.topologyDescription,a.pool.address,i.operationName)),i.resolve(a)}if(t.waitQueue.length>0)for(let[,s]of t.s.servers)process.nextTick(function(){return s.requestCheck()})}function d3e(t,e){let n=t.servers.get(e.address)?.topologyVersion;return(0,c8.compareTopologyVersion)(n,e.topologyVersion)>0}});var tc=m($p=>{"use strict";Object.defineProperty($p,"__esModule",{value:!0});$p.MongoClient=$p.ServerApiVersion=void 0;var l8=require("fs"),h3e=ka(),f3e=pe(),m3e=np(),y3e=Rg(),g3e=zi(),iU=aC(),oU=m9(),_3e=Lt(),E3e=Ng(),p8=z(),b3e=V9(),aU=Ba(),w3e=is(),S3e=GL(),A3e=YL(),O3e=Er(),C3e=sr(),v3e=xd(),uU=sU(),cU=$d(),wr=X();$p.ServerApiVersion=Object.freeze({v1:"1"});var d8=class extends w3e.TypedEventEmitter{constructor(e,r){super(),this.driverInfoList=[],this.on("error",wr.noop),this.options=(0,oU.parseOptions)(e,this,r),this.appendMetadata(this.options.driverInfo);let n=Object.values(this.options.mongoLoggerOptions.componentSeverities).some(i=>i!==aU.SeverityLevel.OFF);this.mongoLogger=n?new aU.MongoLogger(this.options.mongoLoggerOptions):void 0;let s=this;this.s={url:e,bsonOptions:(0,f3e.resolveBSONOptions)(this.options),namespace:(0,wr.ns)("admin"),hasBeenClosed:!1,sessionPool:new cU.ServerSessionPool(this),activeSessions:new Set,activeCursors:new Set,authProviders:new b3e.MongoClientAuthProviders,get options(){return s.options},get readConcern(){return s.options.readConcern},get writeConcern(){return s.options.writeConcern},get readPreference(){return s.options.readPreference},get isMongoClient(){return!0}},this.checkForNonGenuineHosts()}async[Symbol.asyncDispose](){await this.close()}appendMetadata(e){this.driverInfoList.some(n=>(0,iU.isDriverInfoEqual)(n,e))||(this.driverInfoList.push(e),this.options.metadata=(0,iU.makeClientMetadata)(this.driverInfoList,this.options).then(void 0,wr.squashError).then(n=>n??{}))}checkForNonGenuineHosts(){let e=this.options.hosts.filter(i=>(0,wr.isHostMatch)(wr.DOCUMENT_DB_CHECK,i.host)),r=(0,wr.isHostMatch)(wr.DOCUMENT_DB_CHECK,this.options.srvHost),n=this.options.hosts.filter(i=>(0,wr.isHostMatch)(wr.COSMOS_DB_CHECK,i.host)),s=(0,wr.isHostMatch)(wr.COSMOS_DB_CHECK,this.options.srvHost);e.length!==0||r?this.mongoLogger?.info("client",wr.DOCUMENT_DB_MSG):(n.length!==0||s)&&this.mongoLogger?.info("client",wr.COSMOS_DB_MSG)}get serverApi(){return this.options.serverApi&&Object.freeze({...this.options.serverApi})}get monitorCommands(){return this.options.monitorCommands}set monitorCommands(e){this.options.monitorCommands=e}get autoEncrypter(){return this.options.autoEncrypter}get readConcern(){return this.s.readConcern}get writeConcern(){return this.s.writeConcern}get readPreference(){return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get timeoutMS(){return this.s.options.timeoutMS}async bulkWrite(e,r){if(this.autoEncrypter)throw new p8.MongoInvalidArgumentError("MongoClient bulkWrite does not currently support automatic encryption.");return await new S3e.ClientBulkWriteExecutor(this,e,(0,wr.resolveOptions)(this,r)).execute()}async connect(){if(this.connectionLock)return await this.connectionLock;try{this.connectionLock=this._connect(),await this.connectionLock}finally{this.connectionLock=void 0}return this}async _connect(){if(this.topology&&this.topology.isConnected())return this;let e=this.options;if(e.tls&&(typeof e.tlsCAFile=="string"&&(e.ca??=await l8.promises.readFile(e.tlsCAFile)),typeof e.tlsCRLFile=="string"&&(e.crl??=await l8.promises.readFile(e.tlsCRLFile)),typeof e.tlsCertificateKeyFile=="string"&&(!e.key||!e.cert))){let n=await l8.promises.readFile(e.tlsCertificateKeyFile);e.key??=n,e.cert??=n}if(typeof e.srvHost=="string"){let n=await(0,oU.resolveSRVRecord)(e);for(let[s,i]of n.entries())e.hosts[s]=i}if(e.credentials?.mechanism===g3e.AuthMechanism.MONGODB_OIDC){let n=e.credentials?.mechanismProperties?.ALLOWED_HOSTS||y3e.DEFAULT_ALLOWED_HOSTS;if(!!!e.credentials?.mechanismProperties?.ENVIRONMENT){for(let i of e.hosts)if(!(0,wr.hostMatchesWildcards)(i.toHostPort().host,n))throw new p8.MongoInvalidArgumentError(`Host '${i}' is not valid for OIDC authentication with ALLOWED_HOSTS of '${n.join(",")}'`)}}this.topology=new uU.Topology(this,e.hosts,e),this.topology.once(uU.Topology.OPEN,()=>this.emit("open",this));for(let n of _3e.MONGO_CLIENT_EVENTS)this.topology.on(n,(...s)=>this.emit(n,...s));let r=async()=>{try{await this.topology?.connect(e)}catch(n){throw this.topology?.close(),n}};return this.autoEncrypter?(await this.autoEncrypter?.init(),await r(),await e.encrypter.connectInternalClient()):await r(),this}async close(e=!1){if(this.closeLock)return await this.closeLock;try{this.closeLock=this._close(),await this.closeLock}finally{this.closeLock=void 0}}async _close(){Object.defineProperty(this.s,"hasBeenClosed",{value:!0,enumerable:!0,configurable:!1,writable:!1}),this.topology?.closeCheckedOutConnections();let e=Array.from(this.s.activeCursors,a=>a.close());this.s.activeCursors.clear(),await Promise.all(e);let r=Array.from(this.s.activeSessions,a=>a.endSession());if(this.s.activeSessions.clear(),await Promise.all(r),this.topology==null)return;(this.topology.description.type===h3e.TopologyType.LoadBalanced||this.topology.description.logicalSessionTimeoutMinutes!=null)&&await o(this,this.topology);let s=this.topology;this.topology=void 0,s.close();let{encrypter:i}=this.options;i&&await i.close(this);async function o(a,{description:u}){let c=(0,v3e.readPreferenceServerSelector)(C3e.ReadPreference.primaryPreferred),l=Array.from(u.servers.values());if(c(u,l).length!==0){let d=Array.from(a.s.sessionPool.sessions,({id:h})=>h);if(d.length!==0)try{await(0,O3e.executeOperation)(a,new A3e.EndSessionsOperation(d))}catch(h){(0,wr.squashError)(h)}}}}db(e,r){r=r??{},e||(e=this.s.options.dbName);let n=Object.assign({},this.options,r);return new E3e.Db(this,e,n)}static async connect(e,r){return await new this(e,r).connect()}startSession(e){let r=new cU.ClientSession(this,this.s.sessionPool,{explicit:!0,...e},this.options);return this.s.activeSessions.add(r),r.once("ended",()=>{this.s.activeSessions.delete(r)}),r}async withSession(e,r){let n={owner:Symbol(),...typeof e=="object"?e:{}},s=typeof e=="function"?e:r;if(s==null)throw new p8.MongoInvalidArgumentError("Missing required callback parameter");let i=this.startSession(n);try{return await s(i)}finally{try{await i.endSession()}catch(o){(0,wr.squashError)(o)}}}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new m3e.ChangeStream(this,e,(0,wr.resolveOptions)(this,r))}};$p.MongoClient=d8});var np=m(Bh=>{"use strict";Object.defineProperty(Bh,"__esModule",{value:!0});Bh.ChangeStream=void 0;Bh.filterOutOptions=lU;var x3e=tp(),_i=Lt(),T3e=Xr(),D3e=V4(),M3e=Ng(),Sr=z(),P3e=tc(),B3e=is(),I3e=ir(),No=X(),lc={COLLECTION:Symbol("Collection"),DATABASE:Symbol("Database"),CLUSTER:Symbol("Cluster")},N3e=[_i.RESUME_TOKEN_CHANGED,_i.END,_i.CLOSE],k3e="A change stream document has been received that lacks a resume token (_id).",o_="ChangeStream is closed",R3e=F3e();function lU(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>!R3e.has(e)))}var h8=class t extends B3e.TypedEventEmitter{async[Symbol.asyncDispose](){await this.close()}static{this.RESPONSE=_i.RESPONSE}static{this.MORE=_i.MORE}static{this.INIT=_i.INIT}static{this.CLOSE=_i.CLOSE}static{this.CHANGE=_i.CHANGE}static{this.END=_i.END}static{this.ERROR=_i.ERROR}static{this.RESUME_TOKEN_CHANGED=_i.RESUME_TOKEN_CHANGED}constructor(e,r=[],n={}){super(),this.pipeline=r,this.options={...n};let s;if(delete this.options.writeConcern,e instanceof x3e.Collection)this.type=lc.COLLECTION,s=e.s.db.client.options.serverSelectionTimeoutMS;else if(e instanceof M3e.Db)this.type=lc.DATABASE,s=e.client.options.serverSelectionTimeoutMS;else if(e instanceof P3e.MongoClient)this.type=lc.CLUSTER,s=e.options.serverSelectionTimeoutMS;else throw new Sr.MongoChangeStreamError("Parent provided to ChangeStream constructor must be an instance of Collection, Db, or MongoClient");this.contextOwner=Symbol(),this.parent=e,this.namespace=e.s.namespace,!this.options.readPreference&&e.readPreference&&(this.options.readPreference=e.readPreference),this.cursor=this._createChangeStreamCursor(n),this.isClosed=!1,this.mode=!1,this.on("newListener",i=>{i==="change"&&this.cursor&&this.listenerCount("change")===0&&this._streamEvents(this.cursor)}),this.on("removeListener",i=>{i==="change"&&this.listenerCount("change")===0&&this.cursor&&this.cursorStream?.removeAllListeners("data")}),this.options.timeoutMS!=null&&(this.timeoutContext=new I3e.CSOTTimeoutContext({timeoutMS:this.options.timeoutMS,serverSelectionTimeoutMS:s}))}get resumeToken(){return this.cursor?.resumeToken}async hasNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{return await this.cursor.hasNext()}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof Sr.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,No.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async next(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{let e=await this.cursor.next();return this._processChange(e??null)}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof Sr.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,No.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async tryNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{let e=await this.cursor.tryNext();return e?this._processChange(e):null}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof Sr.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,No.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async*[Symbol.asyncIterator](){if(!this.closed)try{for(;;)yield await this.next()}finally{try{await this.close()}catch(e){(0,No.squashError)(e)}}}get closed(){return this.isClosed||this.cursor.closed}async close(){this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!0;let e=this.cursor;try{await e.close()}finally{this._endStream()}}stream(){if(this.closed)throw new Sr.MongoChangeStreamError(o_);return this.cursor.stream()}_setIsEmitter(){if(this.mode==="iterator")throw new Sr.MongoAPIError("ChangeStream cannot be used as an EventEmitter after being used as an iterator");this.mode="emitter"}_setIsIterator(){if(this.mode==="emitter")throw new Sr.MongoAPIError("ChangeStream cannot be used as an iterator after being used as an EventEmitter");this.mode="iterator"}_createChangeStreamCursor(e){let r=lU(e);this.type===lc.CLUSTER&&(r.allChangesForCluster=!0);let n=[{$changeStream:r},...this.pipeline],s=this.type===lc.CLUSTER?this.parent:this.type===lc.DATABASE?this.parent.client:this.type===lc.COLLECTION?this.parent.client:null;if(s==null)throw new Sr.MongoRuntimeError(`Changestream type should only be one of cluster, database, collection. Found ${this.type.toString()}`);let i=new D3e.ChangeStreamCursor(s,this.namespace,n,{...e,timeoutContext:this.timeoutContext?new T3e.CursorTimeoutContext(this.timeoutContext,this.contextOwner):void 0});for(let o of N3e)i.on(o,a=>this.emit(o,a));return this.listenerCount(t.CHANGE)>0&&this._streamEvents(i),i}_closeEmitterModeWithError(e){this.emit(t.ERROR,e),this.close().then(void 0,No.squashError)}_streamEvents(e){this._setIsEmitter();let r=this.cursorStream??e.stream();this.cursorStream=r,r.on("data",n=>{try{let s=this._processChange(n);this.emit(t.CHANGE,s)}catch(s){this.emit(t.ERROR,s)}this.timeoutContext?.refresh()}),r.on("error",n=>this._processErrorStreamMode(n,this.cursor.id!=null))}_endStream(){this.cursorStream?.removeAllListeners("data"),this.cursorStream?.removeAllListeners("close"),this.cursorStream?.removeAllListeners("end"),this.cursorStream?.destroy(),this.cursorStream=void 0}_processChange(e){if(this.isClosed)throw new Sr.MongoAPIError(o_);if(e==null)throw new Sr.MongoRuntimeError(o_);if(e&&!e._id)throw new Sr.MongoChangeStreamError(k3e);return this.cursor.cacheResumeToken(e._id),this.options.startAtOperationTime=void 0,e}_processErrorStreamMode(e,r){this.isClosed||(r&&((0,Sr.isResumableError)(e,this.cursor.maxWireVersion)||e instanceof Sr.MongoOperationTimeoutError)?(this._endStream(),this.cursor.close().then(()=>this._resume(e),n=>((0,No.squashError)(n),this._resume(e))).then(()=>{e instanceof Sr.MongoOperationTimeoutError&&this.emit(t.ERROR,e)},()=>this._closeEmitterModeWithError(e))):this._closeEmitterModeWithError(e))}async _processErrorIteratorMode(e,r){if(this.isClosed)throw new Sr.MongoAPIError(o_);if(r&&((0,Sr.isResumableError)(e,this.cursor.maxWireVersion)||e instanceof Sr.MongoOperationTimeoutError)){try{await this.cursor.close()}catch(n){(0,No.squashError)(n)}if(await this._resume(e),e instanceof Sr.MongoOperationTimeoutError)throw e}else{try{await this.close()}catch(n){(0,No.squashError)(n)}throw e}}async _resume(e){this.timeoutContext?.refresh();let r=(0,No.getTopology)(this.parent);try{await r.selectServer(this.cursor.readPreference,{operationName:"reconnect topology in change stream",timeoutContext:this.timeoutContext}),this.cursor=this._createChangeStreamCursor(this.cursor.resumeOptions)}catch{throw await this.close(),e}}};Bh.ChangeStream=h8;function F3e(){let t={allowDiskUse:"",authdb:"",batchSize:"",bsonRegExp:"",bypassDocumentValidation:"",bypassPinningCheck:"",checkKeys:"",collation:"",comment:"",cursor:"",dbName:"",enableUtf8Validation:"",explain:"",fieldsAsRaw:"",hint:"",ignoreUndefined:"",let:"",maxAwaitTimeMS:"",maxTimeMS:"",omitMaxTimeMS:"",out:"",promoteBuffers:"",promoteLongs:"",promoteValues:"",raw:"",rawData:"",readConcern:"",readPreference:"",serializeFunctions:"",session:"",timeoutContext:"",timeoutMS:"",timeoutMode:"",useBigInt64:"",willRetryWrite:"",writeConcern:""};return new Set(Object.keys(t))}});var f8=m(u_=>{"use strict";Object.defineProperty(u_,"__esModule",{value:!0});u_.GridFSBucketReadStream=void 0;var $3e=require("stream"),q3e=Xr(),ps=z(),j3e=ir(),a_=class extends $3e.Readable{static{this.FILE="file"}constructor(e,r,n,s,i){super({emitClose:!0}),this.s={bytesToTrim:0,bytesToSkip:0,bytesRead:0,chunks:e,expected:0,files:r,filter:s,init:!1,expectedEnd:0,options:{start:0,end:0,...i},readPreference:n,timeoutContext:i?.timeoutMS!=null?new j3e.CSOTTimeoutContext({timeoutMS:i.timeoutMS,serverSelectionTimeoutMS:0}):void 0}}_read(){this.destroyed||V3e(this,()=>L3e(this))}start(e=0){return pU(this),this.s.options.start=e,this}end(e=0){return pU(this),this.s.options.end=e,this}async abort(){this.push(null),this.destroy();let e=this.s.timeoutContext?.getRemainingTimeMSOrThrow();await this.s.cursor?.close({timeoutMS:e})}};u_.GridFSBucketReadStream=a_;function pU(t){if(t.s.init)throw new ps.MongoGridFSStreamError("Options cannot be changed after the stream is initialized")}function L3e(t){if(t.destroyed||!t.s.cursor||!t.s.file)return;let e=r=>{if(t.destroyed)return;if(!r){t.push(null),t.s.cursor?.close().then(void 0,p=>t.destroy(p));return}if(!t.s.file)return;let n=t.s.file.length-t.s.bytesRead,s=t.s.expected++,i=Math.min(t.s.file.chunkSize,n);if(r.n>s)return t.destroy(new ps.MongoGridFSChunkError(`ChunkIsMissing: Got unexpected n: ${r.n}, expected: ${s}`));if(r.n<s)return t.destroy(new ps.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${r.n}, expected: ${s}`));let o=Buffer.isBuffer(r.data)?r.data:r.data.buffer;if(o.byteLength!==i)return n<=0?t.destroy(new ps.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${r.n}, expected file length ${t.s.file.length} bytes but already read ${t.s.bytesRead} bytes`)):t.destroy(new ps.MongoGridFSChunkError(`ChunkIsWrongSize: Got unexpected length: ${o.byteLength}, expected: ${i}`));if(t.s.bytesRead+=o.byteLength,o.byteLength===0)return t.push(null);let a=null,u=null;t.s.bytesToSkip!=null&&(a=t.s.bytesToSkip,t.s.bytesToSkip=0);let c=s===t.s.expectedEnd-1,l=t.s.options.end-t.s.bytesToSkip;c&&t.s.bytesToTrim!=null?u=t.s.file.chunkSize-t.s.bytesToTrim:t.s.options.end&&l<r.data.byteLength&&(u=l),(a!=null||u!=null)&&(o=o.slice(a||0,u||o.byteLength)),t.push(o)};t.s.cursor.next().then(e,r=>{t.destroyed||t.destroy(r)})}function U3e(t){let e={};t.s.readPreference&&(e.readPreference=t.s.readPreference),t.s.options&&t.s.options.sort&&(e.sort=t.s.options.sort),t.s.options&&t.s.options.skip&&(e.skip=t.s.options.skip);let r=s=>{if(t.destroyed)return;if(!s){let u=`FileNotFound: file ${t.s.filter._id?t.s.filter._id.toString():t.s.filter.filename} was not found`,c=new ps.MongoRuntimeError(u);return c.code="ENOENT",t.destroy(c)}if(s.length<=0){t.push(null);return}if(t.destroyed){t.destroy();return}try{t.s.bytesToSkip=W3e(t,s,t.s.options)}catch(a){return t.destroy(a)}let i={files_id:s._id};if(t.s.options&&t.s.options.start!=null){let a=Math.floor(t.s.options.start/s.chunkSize);a>0&&(i.n={$gte:a})}let o;try{o=t.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${t.s.timeoutContext?.timeoutMS}ms`)}catch(a){return t.destroy(a)}t.s.cursor=t.s.chunks.find(i,{timeoutMode:t.s.options.timeoutMS!=null?q3e.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:o}).sort({n:1}),t.s.readPreference&&t.s.cursor.withReadPreference(t.s.readPreference),t.s.expectedEnd=Math.ceil(s.length/s.chunkSize),t.s.file=s;try{t.s.bytesToTrim=z3e(t,s,t.s.cursor,t.s.options)}catch(a){return t.destroy(a)}t.emit(a_.FILE,s)},n;try{n=t.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${t.s.timeoutContext?.timeoutMS}ms`)}catch(s){t.destroyed||t.destroy(s);return}e.timeoutMS=n,t.s.files.findOne(t.s.filter,e).then(r,s=>{t.destroyed||t.destroy(s)})}function V3e(t,e){if(t.s.file)return e();t.s.init||(U3e(t),t.s.init=!0),t.once("file",()=>{e()})}function W3e(t,e,r){if(r&&r.start!=null){if(r.start>e.length)throw new ps.MongoInvalidArgumentError(`Stream start (${r.start}) must not be more than the length of the file (${e.length})`);if(r.start<0)throw new ps.MongoInvalidArgumentError(`Stream start (${r.start}) must not be negative`);if(r.end!=null&&r.end<r.start)throw new ps.MongoInvalidArgumentError(`Stream start (${r.start}) must not be greater than stream end (${r.end})`);return t.s.bytesRead=Math.floor(r.start/e.chunkSize)*e.chunkSize,t.s.expected=Math.floor(r.start/e.chunkSize),r.start-t.s.bytesRead}throw new ps.MongoInvalidArgumentError("Start option must be defined")}function z3e(t,e,r,n){if(n&&n.end!=null){if(n.end>e.length)throw new ps.MongoInvalidArgumentError(`Stream end (${n.end}) must not be more than the length of the file (${e.length})`);if(n.start==null||n.start<0)throw new ps.MongoInvalidArgumentError(`Stream end (${n.end}) must not be negative`);let s=n.start!=null?Math.floor(n.start/e.chunkSize):0;return r.limit(Math.ceil(n.end/e.chunkSize)-s),t.s.expectedEnd=Math.ceil(n.end/e.chunkSize),Math.ceil(n.end/e.chunkSize)*e.chunkSize-n.end}throw new ps.MongoInvalidArgumentError("End option must be defined")}});var g8=m(l_=>{"use strict";Object.defineProperty(l_,"__esModule",{value:!0});l_.GridFSBucketWriteStream=void 0;var K3e=require("stream"),hU=pe(),fU=Xr(),Ei=z(),H3e=ir(),dU=X(),G3e=hn(),m8=class extends K3e.Writable{constructor(e,r,n){super(),this.gridFSFile=null,n=n??{},this.bucket=e,this.chunks=e.s._chunksCollection,this.filename=r,this.files=e.s._filesCollection,this.options=n,this.writeConcern=G3e.WriteConcern.fromOptions(n)||e.s.options.writeConcern,this.done=!1,this.id=n.id?n.id:new hU.ObjectId,this.chunkSizeBytes=n.chunkSizeBytes||this.bucket.s.options.chunkSizeBytes,this.bufToStore=Buffer.alloc(this.chunkSizeBytes),this.length=0,this.n=0,this.pos=0,this.state={streamEnd:!1,outstandingRequests:0,errored:!1,aborted:!1},n.timeoutMS!=null&&(this.timeoutContext=new H3e.CSOTTimeoutContext({timeoutMS:n.timeoutMS,serverSelectionTimeoutMS:(0,dU.resolveTimeoutOptions)(this.bucket.s.db.client,{}).serverSelectionTimeoutMS}))}_construct(e){if(!this.bucket.s.calledOpenUploadStream)this.bucket.s.calledOpenUploadStream=!0,Y3e(this).then(()=>{this.bucket.s.checkedIndexes=!0,this.bucket.emit("index"),e()},r=>{if(r instanceof Ei.MongoOperationTimeoutError)return pc(this,r,e);(0,dU.squashError)(r),e()});else return process.nextTick(e)}_write(e,r,n){X3e(this,e,r,n)}_final(e){if(this.state.streamEnd)return process.nextTick(e);this.state.streamEnd=!0,Z3e(this,e)}async abort(){if(this.state.streamEnd)throw new Ei.MongoAPIError("Cannot abort a stream that has already completed");if(this.state.aborted)throw new Ei.MongoAPIError("Cannot call abort() on a stream twice");this.state.aborted=!0;let e=this.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${this.timeoutContext?.timeoutMS}ms`);await this.chunks.deleteMany({files_id:this.id},{timeoutMS:e})}};l_.GridFSBucketWriteStream=m8;function pc(t,e,r){if(t.state.errored){process.nextTick(r);return}t.state.errored=!0,process.nextTick(r,e)}function mU(t,e,r){return{_id:new hU.ObjectId,files_id:t,n:e,data:r}}async function J3e(t){let e={files_id:1,n:1},r;r=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);let n;try{n=await t.chunks.listIndexes({timeoutMode:r!=null?fU.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:r}).toArray()}catch(i){if(i instanceof Ei.MongoError&&i.code===Ei.MONGODB_ERROR_CODES.NamespaceNotFound)n=[];else throw i}n.find(i=>Object.keys(i.key).length===2&&i.key.files_id===1&&i.key.n===1)||(r=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),await t.chunks.createIndex(e,{...t.writeConcern,background:!0,unique:!0,timeoutMS:r}))}function y8(t,e){if(t.done)return process.nextTick(e);if(t.state.streamEnd&&t.state.outstandingRequests===0&&!t.state.errored){t.done=!0;let r=Q3e(t.id,t.length,t.chunkSizeBytes,t.filename,t.options.metadata);if(c_(t,e))return;let n=t.timeoutContext?.remainingTimeMS;if(n!=null&&n<=0)return pc(t,new Ei.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),e);t.files.insertOne(r,{writeConcern:t.writeConcern,timeoutMS:n}).then(()=>{t.gridFSFile=r,e()},s=>pc(t,s,e));return}process.nextTick(e)}async function Y3e(t){let e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);if(await t.files.findOne({},{projection:{_id:1},timeoutMS:e})!=null)return;let n={filename:1,uploadDate:1},s;e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);let i={timeoutMode:e!=null?fU.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:e};try{s=await t.files.listIndexes(i).toArray()}catch(a){if(a instanceof Ei.MongoError&&a.code===Ei.MONGODB_ERROR_CODES.NamespaceNotFound)s=[];else throw a}s.find(a=>Object.keys(a.key).length===2&&a.key.filename===1&&a.key.uploadDate===1)||(e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),await t.files.createIndex(n,{background:!1,timeoutMS:e})),await J3e(t)}function Q3e(t,e,r,n,s){let i={_id:t,length:e,chunkSize:r,uploadDate:new Date,filename:n};return s&&(i.metadata=s),i}function X3e(t,e,r,n){if(c_(t,n))return;let s=Buffer.isBuffer(e)?e:Buffer.from(e,r);if(t.length+=s.length,t.pos+s.length<t.chunkSizeBytes){s.copy(t.bufToStore,t.pos),t.pos+=s.length,process.nextTick(n);return}let i=s.length,o=t.chunkSizeBytes-t.pos,a=Math.min(o,s.length),u=0;for(;i>0;){let c=s.length-i;s.copy(t.bufToStore,t.pos,c,c+a),t.pos+=a,o-=a;let l;if(o===0){l=mU(t.id,t.n,Buffer.from(t.bufToStore));let p=t.timeoutContext?.remainingTimeMS;if(p!=null&&p<=0)return pc(t,new Ei.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),n);if(++t.state.outstandingRequests,++u,c_(t,n))return;t.chunks.insertOne(l,{writeConcern:t.writeConcern,timeoutMS:p}).then(()=>{--t.state.outstandingRequests,--u,u||y8(t,n)},d=>pc(t,d,n)),o=t.chunkSizeBytes,t.pos=0,++t.n}i-=a,a=Math.min(o,i)}}function Z3e(t,e){if(t.pos===0)return y8(t,e);let r=Buffer.alloc(t.pos);t.bufToStore.copy(r,0,0,t.pos);let n=mU(t.id,t.n,r);if(c_(t,e))return;let s=t.timeoutContext?.remainingTimeMS;if(s!=null&&s<=0)return pc(t,new Ei.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),e);++t.state.outstandingRequests,t.chunks.insertOne(n,{writeConcern:t.writeConcern,timeoutMS:s}).then(()=>{--t.state.outstandingRequests,y8(t,e)},i=>pc(t,i,e))}function c_(t,e){return t.state.aborted?(process.nextTick(e,new Ei.MongoAPIError("Stream has been aborted")),!0):!1}});var EU=m(d_=>{"use strict";Object.defineProperty(d_,"__esModule",{value:!0});d_.GridFSBucket=void 0;var _8=z(),eAe=is(),yU=ir(),p_=X(),tAe=hn(),gU=f8(),_U=g8(),rAe={bucketName:"fs",chunkSizeBytes:255*1024},E8=class extends eAe.TypedEventEmitter{static{this.INDEX="index"}constructor(e,r){super(),this.on("error",p_.noop),this.setMaxListeners(0);let n=(0,p_.resolveOptions)(e,{...rAe,...r,writeConcern:tAe.WriteConcern.fromOptions(r)});this.s={db:e,options:n,_chunksCollection:e.collection(n.bucketName+".chunks"),_filesCollection:e.collection(n.bucketName+".files"),checkedIndexes:!1,calledOpenUploadStream:!1}}openUploadStream(e,r){return new _U.GridFSBucketWriteStream(this,e,{timeoutMS:this.s.options.timeoutMS,...r})}openUploadStreamWithId(e,r,n){return new _U.GridFSBucketWriteStream(this,r,{timeoutMS:this.s.options.timeoutMS,...n,id:e})}openDownloadStream(e,r){return new gU.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{_id:e},{timeoutMS:this.s.options.timeoutMS,...r})}async delete(e,r){let{timeoutMS:n}=(0,p_.resolveOptions)(this.s.db,r),s;n&&(s=new yU.CSOTTimeoutContext({timeoutMS:n,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS}));let{deletedCount:i}=await this.s._filesCollection.deleteOne({_id:e},{timeoutMS:s?.remainingTimeMS}),o=s?.remainingTimeMS;if(o!=null&&o<=0)throw new _8.MongoOperationTimeoutError(`Timed out after ${n}ms`);if(await this.s._chunksCollection.deleteMany({files_id:e},{timeoutMS:o}),i===0)throw new _8.MongoRuntimeError(`File not found for id ${e}`)}find(e={},r={}){return this.s._filesCollection.find(e,r)}openDownloadStreamByName(e,r){let n={uploadDate:-1},s;return r&&r.revision!=null&&(r.revision>=0?(n={uploadDate:1},s=r.revision):s=-r.revision-1),new gU.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{filename:e},{timeoutMS:this.s.options.timeoutMS,...r,sort:n,skip:s})}async rename(e,r,n){let s={_id:e},i={$set:{filename:r}},{matchedCount:o}=await this.s._filesCollection.updateOne(s,i,n);if(o===0)throw new _8.MongoRuntimeError(`File with id ${e} not found`)}async drop(e){let{timeoutMS:r}=(0,p_.resolveOptions)(this.s.db,e),n;if(r&&(n=new yU.CSOTTimeoutContext({timeoutMS:r,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS})),n){await this.s._filesCollection.drop({timeoutMS:n.remainingTimeMS});let s=n.getRemainingTimeMSOrThrow(`Timed out after ${r}ms`);await this.s._chunksCollection.drop({timeoutMS:s})}else await this.s._filesCollection.drop(),await this.s._chunksCollection.drop()}};d_.GridFSBucket=E8});var ka=m(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.MongoRuntimeError=b.MongoParseError=b.MongoOperationTimeoutError=b.MongoOIDCError=b.MongoNotConnectedError=b.MongoNetworkTimeoutError=b.MongoNetworkError=b.MongoMissingDependencyError=b.MongoMissingCredentialsError=b.MongoKerberosError=b.MongoInvalidArgumentError=b.MongoGridFSStreamError=b.MongoGridFSChunkError=b.MongoGCPError=b.MongoExpiredSessionError=b.MongoError=b.MongoDriverError=b.MongoDecompressionError=b.MongoCursorInUseError=b.MongoCursorExhaustedError=b.MongoCompatibilityError=b.MongoClientClosedError=b.MongoClientBulkWriteExecutionError=b.MongoClientBulkWriteError=b.MongoClientBulkWriteCursorError=b.MongoChangeStreamError=b.MongoBatchReExecutionError=b.MongoAzureError=b.MongoAWSError=b.MongoAPIError=b.ExplainableCursor=b.ChangeStreamCursor=b.ClientEncryption=b.MongoBulkWriteError=b.UUID=b.Timestamp=b.ObjectId=b.MinKey=b.MaxKey=b.Long=b.Int32=b.Double=b.Decimal128=b.DBRef=b.Code=b.BSONType=b.BSONSymbol=b.BSONRegExp=b.Binary=b.BSON=void 0;b.CommandStartedEvent=b.CommandFailedEvent=b.WriteConcern=b.ReadPreference=b.ReadConcern=b.TopologyType=b.ServerType=b.ReadPreferenceMode=b.ReadConcernLevel=b.ProfilingLevel=b.ReturnDocument=b.SeverityLevel=b.MongoLoggableComponent=b.ServerApiVersion=b.ExplainVerbosity=b.MongoErrorLabel=b.CursorTimeoutMode=b.CURSOR_FLAGS=b.Compressor=b.AuthMechanism=b.GSSAPICanonicalizationValue=b.AutoEncryptionLoggerLevel=b.BatchType=b.UnorderedBulkOperation=b.OrderedBulkOperation=b.MongoClient=b.ListIndexesCursor=b.ListCollectionsCursor=b.GridFSBucketWriteStream=b.GridFSBucketReadStream=b.GridFSBucket=b.FindCursor=b.Db=b.Collection=b.ClientSession=b.ChangeStream=b.CancellationToken=b.AggregationCursor=b.Admin=b.AbstractCursor=b.MongoWriteConcernError=b.MongoUnexpectedServerResponseError=b.MongoTransactionError=b.MongoTopologyClosedError=b.MongoTailableCursorError=b.MongoSystemError=b.MongoStalePrimaryError=b.MongoServerSelectionError=b.MongoServerError=b.MongoServerClosedError=void 0;b.MongoClientAuthProviders=b.MongoCryptKMSRequestNetworkTimeoutError=b.MongoCryptInvalidArgumentError=b.MongoCryptError=b.MongoCryptCreateEncryptedCollectionError=b.MongoCryptCreateDataKeyError=b.MongoCryptAzureKMSRequestError=b.SrvPollingEvent=b.WaitingForSuitableServerEvent=b.ServerSelectionSucceededEvent=b.ServerSelectionStartedEvent=b.ServerSelectionFailedEvent=b.ServerSelectionEvent=b.TopologyOpeningEvent=b.TopologyDescriptionChangedEvent=b.TopologyClosedEvent=b.ServerOpeningEvent=b.ServerHeartbeatSucceededEvent=b.ServerHeartbeatStartedEvent=b.ServerHeartbeatFailedEvent=b.ServerDescriptionChangedEvent=b.ServerClosedEvent=b.ConnectionReadyEvent=b.ConnectionPoolReadyEvent=b.ConnectionPoolMonitoringEvent=b.ConnectionPoolCreatedEvent=b.ConnectionPoolClosedEvent=b.ConnectionPoolClearedEvent=b.ConnectionCreatedEvent=b.ConnectionClosedEvent=b.ConnectionCheckOutStartedEvent=b.ConnectionCheckOutFailedEvent=b.ConnectionCheckedOutEvent=b.ConnectionCheckedInEvent=b.CommandSucceededEvent=void 0;var nAe=VO();Object.defineProperty(b,"Admin",{enumerable:!0,get:function(){return nAe.Admin}});var sAe=zO();Object.defineProperty(b,"OrderedBulkOperation",{enumerable:!0,get:function(){return sAe.OrderedBulkOperation}});var iAe=HO();Object.defineProperty(b,"UnorderedBulkOperation",{enumerable:!0,get:function(){return iAe.UnorderedBulkOperation}});var oAe=np();Object.defineProperty(b,"ChangeStream",{enumerable:!0,get:function(){return oAe.ChangeStream}});var aAe=tp();Object.defineProperty(b,"Collection",{enumerable:!0,get:function(){return aAe.Collection}});var uAe=Xr();Object.defineProperty(b,"AbstractCursor",{enumerable:!0,get:function(){return uAe.AbstractCursor}});var cAe=jd();Object.defineProperty(b,"AggregationCursor",{enumerable:!0,get:function(){return cAe.AggregationCursor}});var lAe=S4();Object.defineProperty(b,"FindCursor",{enumerable:!0,get:function(){return lAe.FindCursor}});var pAe=K4();Object.defineProperty(b,"ListCollectionsCursor",{enumerable:!0,get:function(){return pAe.ListCollectionsCursor}});var dAe=x4();Object.defineProperty(b,"ListIndexesCursor",{enumerable:!0,get:function(){return dAe.ListIndexesCursor}});var hAe=Ng();Object.defineProperty(b,"Db",{enumerable:!0,get:function(){return hAe.Db}});var fAe=EU();Object.defineProperty(b,"GridFSBucket",{enumerable:!0,get:function(){return fAe.GridFSBucket}});var mAe=f8();Object.defineProperty(b,"GridFSBucketReadStream",{enumerable:!0,get:function(){return mAe.GridFSBucketReadStream}});var yAe=g8();Object.defineProperty(b,"GridFSBucketWriteStream",{enumerable:!0,get:function(){return yAe.GridFSBucketWriteStream}});var gAe=tc();Object.defineProperty(b,"MongoClient",{enumerable:!0,get:function(){return gAe.MongoClient}});var _Ae=is();Object.defineProperty(b,"CancellationToken",{enumerable:!0,get:function(){return _Ae.CancellationToken}});var EAe=$d();Object.defineProperty(b,"ClientSession",{enumerable:!0,get:function(){return EAe.ClientSession}});var bAe=pe();Object.defineProperty(b,"BSON",{enumerable:!0,get:function(){return bAe.BSON}});var En=pe();Object.defineProperty(b,"Binary",{enumerable:!0,get:function(){return En.Binary}});Object.defineProperty(b,"BSONRegExp",{enumerable:!0,get:function(){return En.BSONRegExp}});Object.defineProperty(b,"BSONSymbol",{enumerable:!0,get:function(){return En.BSONSymbol}});Object.defineProperty(b,"BSONType",{enumerable:!0,get:function(){return En.BSONType}});Object.defineProperty(b,"Code",{enumerable:!0,get:function(){return En.Code}});Object.defineProperty(b,"DBRef",{enumerable:!0,get:function(){return En.DBRef}});Object.defineProperty(b,"Decimal128",{enumerable:!0,get:function(){return En.Decimal128}});Object.defineProperty(b,"Double",{enumerable:!0,get:function(){return En.Double}});Object.defineProperty(b,"Int32",{enumerable:!0,get:function(){return En.Int32}});Object.defineProperty(b,"Long",{enumerable:!0,get:function(){return En.Long}});Object.defineProperty(b,"MaxKey",{enumerable:!0,get:function(){return En.MaxKey}});Object.defineProperty(b,"MinKey",{enumerable:!0,get:function(){return En.MinKey}});Object.defineProperty(b,"ObjectId",{enumerable:!0,get:function(){return En.ObjectId}});Object.defineProperty(b,"Timestamp",{enumerable:!0,get:function(){return En.Timestamp}});Object.defineProperty(b,"UUID",{enumerable:!0,get:function(){return En.UUID}});var wAe=Hl();Object.defineProperty(b,"MongoBulkWriteError",{enumerable:!0,get:function(){return wAe.MongoBulkWriteError}});var SAe=s2();Object.defineProperty(b,"ClientEncryption",{enumerable:!0,get:function(){return SAe.ClientEncryption}});var AAe=V4();Object.defineProperty(b,"ChangeStreamCursor",{enumerable:!0,get:function(){return AAe.ChangeStreamCursor}});var OAe=Xy();Object.defineProperty(b,"ExplainableCursor",{enumerable:!0,get:function(){return OAe.ExplainableCursor}});var Ce=z();Object.defineProperty(b,"MongoAPIError",{enumerable:!0,get:function(){return Ce.MongoAPIError}});Object.defineProperty(b,"MongoAWSError",{enumerable:!0,get:function(){return Ce.MongoAWSError}});Object.defineProperty(b,"MongoAzureError",{enumerable:!0,get:function(){return Ce.MongoAzureError}});Object.defineProperty(b,"MongoBatchReExecutionError",{enumerable:!0,get:function(){return Ce.MongoBatchReExecutionError}});Object.defineProperty(b,"MongoChangeStreamError",{enumerable:!0,get:function(){return Ce.MongoChangeStreamError}});Object.defineProperty(b,"MongoClientBulkWriteCursorError",{enumerable:!0,get:function(){return Ce.MongoClientBulkWriteCursorError}});Object.defineProperty(b,"MongoClientBulkWriteError",{enumerable:!0,get:function(){return Ce.MongoClientBulkWriteError}});Object.defineProperty(b,"MongoClientBulkWriteExecutionError",{enumerable:!0,get:function(){return Ce.MongoClientBulkWriteExecutionError}});Object.defineProperty(b,"MongoClientClosedError",{enumerable:!0,get:function(){return Ce.MongoClientClosedError}});Object.defineProperty(b,"MongoCompatibilityError",{enumerable:!0,get:function(){return Ce.MongoCompatibilityError}});Object.defineProperty(b,"MongoCursorExhaustedError",{enumerable:!0,get:function(){return Ce.MongoCursorExhaustedError}});Object.defineProperty(b,"MongoCursorInUseError",{enumerable:!0,get:function(){return Ce.MongoCursorInUseError}});Object.defineProperty(b,"MongoDecompressionError",{enumerable:!0,get:function(){return Ce.MongoDecompressionError}});Object.defineProperty(b,"MongoDriverError",{enumerable:!0,get:function(){return Ce.MongoDriverError}});Object.defineProperty(b,"MongoError",{enumerable:!0,get:function(){return Ce.MongoError}});Object.defineProperty(b,"MongoExpiredSessionError",{enumerable:!0,get:function(){return Ce.MongoExpiredSessionError}});Object.defineProperty(b,"MongoGCPError",{enumerable:!0,get:function(){return Ce.MongoGCPError}});Object.defineProperty(b,"MongoGridFSChunkError",{enumerable:!0,get:function(){return Ce.MongoGridFSChunkError}});Object.defineProperty(b,"MongoGridFSStreamError",{enumerable:!0,get:function(){return Ce.MongoGridFSStreamError}});Object.defineProperty(b,"MongoInvalidArgumentError",{enumerable:!0,get:function(){return Ce.MongoInvalidArgumentError}});Object.defineProperty(b,"MongoKerberosError",{enumerable:!0,get:function(){return Ce.MongoKerberosError}});Object.defineProperty(b,"MongoMissingCredentialsError",{enumerable:!0,get:function(){return Ce.MongoMissingCredentialsError}});Object.defineProperty(b,"MongoMissingDependencyError",{enumerable:!0,get:function(){return Ce.MongoMissingDependencyError}});Object.defineProperty(b,"MongoNetworkError",{enumerable:!0,get:function(){return Ce.MongoNetworkError}});Object.defineProperty(b,"MongoNetworkTimeoutError",{enumerable:!0,get:function(){return Ce.MongoNetworkTimeoutError}});Object.defineProperty(b,"MongoNotConnectedError",{enumerable:!0,get:function(){return Ce.MongoNotConnectedError}});Object.defineProperty(b,"MongoOIDCError",{enumerable:!0,get:function(){return Ce.MongoOIDCError}});Object.defineProperty(b,"MongoOperationTimeoutError",{enumerable:!0,get:function(){return Ce.MongoOperationTimeoutError}});Object.defineProperty(b,"MongoParseError",{enumerable:!0,get:function(){return Ce.MongoParseError}});Object.defineProperty(b,"MongoRuntimeError",{enumerable:!0,get:function(){return Ce.MongoRuntimeError}});Object.defineProperty(b,"MongoServerClosedError",{enumerable:!0,get:function(){return Ce.MongoServerClosedError}});Object.defineProperty(b,"MongoServerError",{enumerable:!0,get:function(){return Ce.MongoServerError}});Object.defineProperty(b,"MongoServerSelectionError",{enumerable:!0,get:function(){return Ce.MongoServerSelectionError}});Object.defineProperty(b,"MongoStalePrimaryError",{enumerable:!0,get:function(){return Ce.MongoStalePrimaryError}});Object.defineProperty(b,"MongoSystemError",{enumerable:!0,get:function(){return Ce.MongoSystemError}});Object.defineProperty(b,"MongoTailableCursorError",{enumerable:!0,get:function(){return Ce.MongoTailableCursorError}});Object.defineProperty(b,"MongoTopologyClosedError",{enumerable:!0,get:function(){return Ce.MongoTopologyClosedError}});Object.defineProperty(b,"MongoTransactionError",{enumerable:!0,get:function(){return Ce.MongoTransactionError}});Object.defineProperty(b,"MongoUnexpectedServerResponseError",{enumerable:!0,get:function(){return Ce.MongoUnexpectedServerResponseError}});Object.defineProperty(b,"MongoWriteConcernError",{enumerable:!0,get:function(){return Ce.MongoWriteConcernError}});var CAe=Hl();Object.defineProperty(b,"BatchType",{enumerable:!0,get:function(){return CAe.BatchType}});var vAe=nv();Object.defineProperty(b,"AutoEncryptionLoggerLevel",{enumerable:!0,get:function(){return vAe.AutoEncryptionLoggerLevel}});var xAe=kg();Object.defineProperty(b,"GSSAPICanonicalizationValue",{enumerable:!0,get:function(){return xAe.GSSAPICanonicalizationValue}});var TAe=zi();Object.defineProperty(b,"AuthMechanism",{enumerable:!0,get:function(){return TAe.AuthMechanism}});var DAe=nh();Object.defineProperty(b,"Compressor",{enumerable:!0,get:function(){return DAe.Compressor}});var bU=Xr();Object.defineProperty(b,"CURSOR_FLAGS",{enumerable:!0,get:function(){return bU.CURSOR_FLAGS}});Object.defineProperty(b,"CursorTimeoutMode",{enumerable:!0,get:function(){return bU.CursorTimeoutMode}});var MAe=z();Object.defineProperty(b,"MongoErrorLabel",{enumerable:!0,get:function(){return MAe.MongoErrorLabel}});var PAe=Od();Object.defineProperty(b,"ExplainVerbosity",{enumerable:!0,get:function(){return PAe.ExplainVerbosity}});var BAe=tc();Object.defineProperty(b,"ServerApiVersion",{enumerable:!0,get:function(){return BAe.ServerApiVersion}});var wU=Ba();Object.defineProperty(b,"MongoLoggableComponent",{enumerable:!0,get:function(){return wU.MongoLoggableComponent}});Object.defineProperty(b,"SeverityLevel",{enumerable:!0,get:function(){return wU.SeverityLevel}});var IAe=B4();Object.defineProperty(b,"ReturnDocument",{enumerable:!0,get:function(){return IAe.ReturnDocument}});var NAe=X4();Object.defineProperty(b,"ProfilingLevel",{enumerable:!0,get:function(){return NAe.ProfilingLevel}});var kAe=si();Object.defineProperty(b,"ReadConcernLevel",{enumerable:!0,get:function(){return kAe.ReadConcernLevel}});var RAe=sr();Object.defineProperty(b,"ReadPreferenceMode",{enumerable:!0,get:function(){return RAe.ReadPreferenceMode}});var SU=ts();Object.defineProperty(b,"ServerType",{enumerable:!0,get:function(){return SU.ServerType}});Object.defineProperty(b,"TopologyType",{enumerable:!0,get:function(){return SU.TopologyType}});var FAe=si();Object.defineProperty(b,"ReadConcern",{enumerable:!0,get:function(){return FAe.ReadConcern}});var $Ae=sr();Object.defineProperty(b,"ReadPreference",{enumerable:!0,get:function(){return $Ae.ReadPreference}});var qAe=hn();Object.defineProperty(b,"WriteConcern",{enumerable:!0,get:function(){return qAe.WriteConcern}});var b8=hv();Object.defineProperty(b,"CommandFailedEvent",{enumerable:!0,get:function(){return b8.CommandFailedEvent}});Object.defineProperty(b,"CommandStartedEvent",{enumerable:!0,get:function(){return b8.CommandStartedEvent}});Object.defineProperty(b,"CommandSucceededEvent",{enumerable:!0,get:function(){return b8.CommandSucceededEvent}});var qs=Gv();Object.defineProperty(b,"ConnectionCheckedInEvent",{enumerable:!0,get:function(){return qs.ConnectionCheckedInEvent}});Object.defineProperty(b,"ConnectionCheckedOutEvent",{enumerable:!0,get:function(){return qs.ConnectionCheckedOutEvent}});Object.defineProperty(b,"ConnectionCheckOutFailedEvent",{enumerable:!0,get:function(){return qs.ConnectionCheckOutFailedEvent}});Object.defineProperty(b,"ConnectionCheckOutStartedEvent",{enumerable:!0,get:function(){return qs.ConnectionCheckOutStartedEvent}});Object.defineProperty(b,"ConnectionClosedEvent",{enumerable:!0,get:function(){return qs.ConnectionClosedEvent}});Object.defineProperty(b,"ConnectionCreatedEvent",{enumerable:!0,get:function(){return qs.ConnectionCreatedEvent}});Object.defineProperty(b,"ConnectionPoolClearedEvent",{enumerable:!0,get:function(){return qs.ConnectionPoolClearedEvent}});Object.defineProperty(b,"ConnectionPoolClosedEvent",{enumerable:!0,get:function(){return qs.ConnectionPoolClosedEvent}});Object.defineProperty(b,"ConnectionPoolCreatedEvent",{enumerable:!0,get:function(){return qs.ConnectionPoolCreatedEvent}});Object.defineProperty(b,"ConnectionPoolMonitoringEvent",{enumerable:!0,get:function(){return qs.ConnectionPoolMonitoringEvent}});Object.defineProperty(b,"ConnectionPoolReadyEvent",{enumerable:!0,get:function(){return qs.ConnectionPoolReadyEvent}});Object.defineProperty(b,"ConnectionReadyEvent",{enumerable:!0,get:function(){return qs.ConnectionReadyEvent}});var ko=E2();Object.defineProperty(b,"ServerClosedEvent",{enumerable:!0,get:function(){return ko.ServerClosedEvent}});Object.defineProperty(b,"ServerDescriptionChangedEvent",{enumerable:!0,get:function(){return ko.ServerDescriptionChangedEvent}});Object.defineProperty(b,"ServerHeartbeatFailedEvent",{enumerable:!0,get:function(){return ko.ServerHeartbeatFailedEvent}});Object.defineProperty(b,"ServerHeartbeatStartedEvent",{enumerable:!0,get:function(){return ko.ServerHeartbeatStartedEvent}});Object.defineProperty(b,"ServerHeartbeatSucceededEvent",{enumerable:!0,get:function(){return ko.ServerHeartbeatSucceededEvent}});Object.defineProperty(b,"ServerOpeningEvent",{enumerable:!0,get:function(){return ko.ServerOpeningEvent}});Object.defineProperty(b,"TopologyClosedEvent",{enumerable:!0,get:function(){return ko.TopologyClosedEvent}});Object.defineProperty(b,"TopologyDescriptionChangedEvent",{enumerable:!0,get:function(){return ko.TopologyDescriptionChangedEvent}});Object.defineProperty(b,"TopologyOpeningEvent",{enumerable:!0,get:function(){return ko.TopologyOpeningEvent}});var Ih=n8();Object.defineProperty(b,"ServerSelectionEvent",{enumerable:!0,get:function(){return Ih.ServerSelectionEvent}});Object.defineProperty(b,"ServerSelectionFailedEvent",{enumerable:!0,get:function(){return Ih.ServerSelectionFailedEvent}});Object.defineProperty(b,"ServerSelectionStartedEvent",{enumerable:!0,get:function(){return Ih.ServerSelectionStartedEvent}});Object.defineProperty(b,"ServerSelectionSucceededEvent",{enumerable:!0,get:function(){return Ih.ServerSelectionSucceededEvent}});Object.defineProperty(b,"WaitingForSuitableServerEvent",{enumerable:!0,get:function(){return Ih.WaitingForSuitableServerEvent}});var jAe=o8();Object.defineProperty(b,"SrvPollingEvent",{enumerable:!0,get:function(){return jAe.SrvPollingEvent}});var qp=Ep();Object.defineProperty(b,"MongoCryptAzureKMSRequestError",{enumerable:!0,get:function(){return qp.MongoCryptAzureKMSRequestError}});Object.defineProperty(b,"MongoCryptCreateDataKeyError",{enumerable:!0,get:function(){return qp.MongoCryptCreateDataKeyError}});Object.defineProperty(b,"MongoCryptCreateEncryptedCollectionError",{enumerable:!0,get:function(){return qp.MongoCryptCreateEncryptedCollectionError}});Object.defineProperty(b,"MongoCryptError",{enumerable:!0,get:function(){return qp.MongoCryptError}});Object.defineProperty(b,"MongoCryptInvalidArgumentError",{enumerable:!0,get:function(){return qp.MongoCryptInvalidArgumentError}});Object.defineProperty(b,"MongoCryptKMSRequestNetworkTimeoutError",{enumerable:!0,get:function(){return qp.MongoCryptKMSRequestNetworkTimeoutError}});var LAe=V9();Object.defineProperty(b,"MongoClientAuthProviders",{enumerable:!0,get:function(){return LAe.MongoClientAuthProviders}})});var te=m(ur=>{"use strict";ur.arrayAtomicsBackupSymbol=Symbol("mongoose#Array#atomicsBackup");ur.arrayAtomicsSymbol=Symbol("mongoose#Array#_atomics");ur.arrayParentSymbol=Symbol("mongoose#Array#_parent");ur.arrayPathSymbol=Symbol("mongoose#Array#_path");ur.arraySchemaSymbol=Symbol("mongoose#Array#_schema");ur.documentArrayParent=Symbol("mongoose#documentArrayParent");ur.documentIsSelected=Symbol("mongoose#Document#isSelected");ur.documentIsModified=Symbol("mongoose#Document#isModified");ur.documentModifiedPaths=Symbol("mongoose#Document#modifiedPaths");ur.documentSchemaSymbol=Symbol("mongoose#Document#schema");ur.getSymbol=Symbol("mongoose#Document#get");ur.modelSymbol=Symbol("mongoose#Model");ur.objectIdSymbol=Symbol("mongoose#ObjectId");ur.populateModelSymbol=Symbol("mongoose#PopulateOptions#Model");ur.schemaTypeSymbol=Symbol("mongoose#schemaType");ur.sessionNewDocuments=Symbol("mongoose#ClientSession#newDocuments");ur.scopeSymbol=Symbol("mongoose#Document#scope");ur.validatorErrorSymbol=Symbol("mongoose#validatorError")});var Za=m((ARe,AU)=>{"use strict";var Nh=pe().ObjectId,UAe=te().objectIdSymbol;Object.defineProperty(Nh.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}});Object.hasOwn(Nh.prototype,"valueOf")||(Nh.prototype.valueOf=function(){return this.toString()});Nh.prototype[UAe]=!0;AU.exports=Nh});var bn=m((ORe,OU)=>{"use strict";OU.exports=function(e){if(e!=null&&typeof e.constructor=="function")return e.constructor.name}});var bi=m(CU=>{"use strict";CU.internalToObjectOptions={transform:!1,virtuals:!1,getters:!1,_skipDepopulateTopLevel:!0,depopulate:!0,flattenDecimals:!1,useProjection:!1,versionKey:!0,flattenObjectIds:!1}});var h_=m((vRe,vU)=>{"use strict";vU.exports=pe().Decimal128});var dc=m((xRe,xU)=>{"use strict";xU.exports=new Set(["__proto__","constructor","prototype"])});var f_=m(TU=>{"use strict";TU.isMongooseArray=function(t){return Array.isArray(t)&&t.isMongooseArray}});var kh=m((DRe,DU)=>{"use strict";var VAe=f_().isMongooseArray;DU.exports=function(t){return t!=null&&(VAe(t)||t.$__!=null||t.isMongooseBuffer||t.$isMongooseMap)}});var w8=m((MRe,MU)=>{"use strict";var WAe=/^function\s*([^\s(]+)/;MU.exports=function(t){return t.name||(t.toString().trim().match(WAe)||[])[1]}});var $r=m((PRe,PU)=>{"use strict";function zAe(t,e){return t!=null&&t._bsontype===e}PU.exports=zAe});var hc=m((BRe,BU)=>{"use strict";BU.exports=function(t){return Buffer.isBuffer(t)||Object.prototype.toString.call(t)==="[object Object]"}});var jp=m((IRe,IU)=>{"use strict";IU.exports=function(e){if(e==null||typeof e!="object")return!1;let r=Object.getPrototypeOf(e);return!r||r.constructor.name==="Object"}});var Lp=m(S8=>{"use strict";var NU=Symbol("mongoose#trustedSymbol");S8.trustedSymbol=NU;S8.trusted=function(e){return e==null||typeof e!="object"||(e[NU]=!0),e}});var vt=m((kRe,kU)=>{"use strict";var KAe=h_(),HAe=Za(),GAe=dc(),JAe=kh(),YAe=w8(),A8=$r(),QAe=f_().isMongooseArray,XAe=hc(),ZAe=jp(),e6e=te(),O8=Lp().trustedSymbol,t6e=pe();function m_(t,e,r){if(t==null)return t;if(A8(t,"Double"))return new t6e.Double(t.value);if(typeof t=="number"||typeof t=="string"||typeof t=="boolean"||typeof t=="bigint")return t;if(Array.isArray(t))return r6e(t,e);if(JAe(t)){if(e){if(e.retainDocuments&&t.$__!=null){let i=t.$clone();return t.__index!=null&&(i.__index=t.__index),t.__parentArray!=null&&(i.__parentArray=e.parentArray??t.__parentArray),i.$__setParent(e.parentDoc??t.$__parent),i}if(e.retainDocuments&&t.$isMongooseMap){let i=e.parentDoc??t.$__parent,o=t.constructor,a=new o({},t.$__path,i,t.$__schemaType);for(let[u,c]of t)a.$__set(u,m_(c,e));return a}}if(ZAe(t)&&t.$__!=null&&t._doc!=null)return t._doc;let s;return e?.json&&typeof t.toJSON=="function"?s=t.toJSON(e):s=t.toObject(e),s}let n=t.constructor;if(n)switch(YAe(n)){case"Object":return C8(t,e,r);case"Date":return new n(+t);case"RegExp":return n6e(t);default:break}return A8(t,"ObjectId")?e?.flattenObjectIds?t.toJSON():new HAe(t.id):A8(t,"Decimal128")?e?.flattenDecimals?t.toJSON():KAe.fromString(t.toString()):!n&&XAe(t)?C8(t,e,r):typeof t=="object"&&t[e6e.schemaTypeSymbol]?t.clone():e?.bson&&typeof t.toBSON=="function"?t:typeof t.valueOf=="function"?t.valueOf():C8(t,e,r)}kU.exports=m_;function C8(t,e,r){let n=e?.minimize,s=e?.omitUndefined,i=e?._seen,o={},a;if(i&&i.has(t))return i.get(t);i&&i.set(t,o),O8 in t&&e?.copyTrustedSymbol!==!1&&(o[O8]=t[O8]);let u=Object.keys(t),c=u.length;for(let l=0;l<c;++l){let p=u[l];if(GAe.has(p))continue;let d=m_(t[p],e,!1);(n===!1||s)&&typeof d>"u"?delete o[p]:(n!==!0||typeof d<"u")&&(a||(a=!0),o[p]=d)}return n&&!r?a&&o:o}function r6e(t,e){let r=0,n=t.length,s=null;for(e?.retainDocuments?t.isMongooseDocumentArray?s=new(t.$schemaType()).schema.base.Types.DocumentArray([],t.$path(),t.$parent(),t.$schemaType()):t.isMongooseArray?s=new(t.$parent()).schema.base.Types.Array([],t.$path(),t.$parent(),t.$schemaType()):s=new Array(n):s=new Array(n),t=QAe(t)?t.__array:t,s.isMongooseDocumentArray&&(e={...e,parentArray:s}),r=0;r<n;++r)s[r]=m_(t[r],e,!0);return s}function n6e(t){let e=new RegExp(t.source,t.flags);return e.lastIndex!==t.lastIndex&&(e.lastIndex=t.lastIndex),e}});var $U=m((RRe,FU)=>{"use strict";var y_=RO(),v8=we(),x8=ka().Collection,s6e=Za(),RU=bn(),i6e=bi().internalToObjectOptions,o6e=require("stream"),T8=require("util"),a6e=Object.freeze({...i6e,copyTrustedSymbol:!1});function wi(t,e,r){this.collection=null,this.Promise=r.Promise||Promise,this.modelName=r.modelName,delete r.modelName,this._closed=!1,y_.apply(this,arguments)}Object.setPrototypeOf(wi.prototype,y_.prototype);wi.prototype.onOpen=function(){return this.collection=this.conn.db.collection(this.name),y_.prototype.onOpen.call(this),this.collection};wi.prototype.onClose=function(t){y_.prototype.onClose.call(this,t)};wi.prototype._getCollection=function(){return this.collection?this.collection:this.conn.db!=null?(this.collection=this.conn.db.collection(this.name),this.collection):null};function u6e(t){wi.prototype[t]=function(){let e=this._getCollection(),r=Array.from(arguments),n=this,s=n?.conn?.base?.options?.debug,i=n?.conn?.options?.debug,o=i??s,a=new s6e;if(this.conn.$wasForceClosed){let l=new v8("Connection was force closed");if(r.length>0&&typeof r[r.length-1]=="function"){r[r.length-1](l);return}else throw l}let u=null,c=null;if(this._shouldBufferCommands()&&this.buffer){this.conn.emit("buffer",{_id:a,modelName:n.modelName,collectionName:n.name,method:t,args:r});let l=this._getBufferTimeoutMS();return c=new Promise((p,d)=>{this.addQueue(p),u=setTimeout(()=>{if(this.removeQueue(p)){let f="Operation `"+this.name+"."+t+"()` buffering timed out after "+l+"ms",y=new v8(f);this.conn.emit("buffer-end",{_id:a,modelName:n.modelName,collectionName:n.name,method:t,error:y}),d(y)}},l)}),c.then(()=>(u&&clearTimeout(u),this[t].apply(this,r)))}if(o)if(typeof o=="function"){let l=null;typeof r[r.length-1]=="function"?l=r.slice(0,r.length-1):l=r,o.apply(n,[n.name,t].concat(l))}else if(o instanceof o6e.Writable)this.$printToStream(n.name,t,r,o);else{let l=o.color==null?!0:o.color,p=o.shell==null?!1:o.shell;this.$print(n.name,t,r,l,p)}this.conn.emit("operation-start",{_id:a,modelName:n.modelName,collectionName:this.name,method:t,params:r});try{if(e==null){let p="Cannot call `"+this.name+"."+t+"()` before initial connection is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if you have `bufferCommands = false`.";throw new v8(p)}let l=e[t].apply(e,r);return typeof l?.then=="function"?l.then(p=>(u!=null&&clearTimeout(u),this.conn.emit("operation-end",{_id:a,modelName:n.modelName,collectionName:this.name,method:t,result:p}),p),p=>{throw u!=null&&clearTimeout(u),this.conn.emit("operation-end",{_id:a,modelName:n.modelName,collectionName:this.name,method:t,error:p}),p}):(this.conn.emit("operation-end",{_id:a,modelName:n.modelName,collectionName:this.name,method:t,result:l}),u!=null&&clearTimeout(u),l)}catch(l){throw u!=null&&clearTimeout(u),this.conn.emit("operation-end",{_id:a,modelName:n.modelName,collectionName:this.name,method:t,error:l}),l}}}for(let t of Object.getOwnPropertyNames(x8.prototype))Object.getOwnPropertyDescriptor(x8.prototype,t).get===void 0&&typeof x8.prototype[t]=="function"&&u6e(t);wi.prototype.$print=function(t,e,r,n,s){let i=n?"\x1B[0;36mMongoose:\x1B[0m ":"Mongoose: ",o=[t,e].join("."),a=[];for(let c=r.length-1;c>=0;--c)(this.$format(r[c])||a.length)&&a.unshift(this.$format(r[c],n,s));let u="("+a.join(", ")+")";console.info(i+o+u)};wi.prototype.$printToStream=function(t,e,r,n){let s=[t,e].join("."),i=[];for(let a=r.length-1;a>=0;--a)(this.$format(r[a])||i.length)&&i.unshift(this.$format(r[a]));let o="("+i.join(", ")+")";n.write(s+o,"utf8")};wi.prototype.$format=function(t,e,r){let n=typeof t;return n==="function"||n==="undefined"?"":D8(t,!1,e,r)};function Up(t){let e={inspect:function(){return t}};return T8.inspect.custom&&(e[T8.inspect.custom]=e.inspect),e}function c6e(t){return D8(t,!0)}function l6e(t,e){t[e]=Up('ObjectId("'+t[e].toHexString()+'")')}function p6e(t,e,r){r?t[e]=Up('ISODate("'+t[e].toUTCString()+'")'):t[e]=Up('new Date("'+t[e].toUTCString()+'")')}function D8(t,e,r,n){if(typeof t?.toBSON=="function"&&(t=t.toBSON()),t==null)return t;let s=vt(),i=e?t:s(t,a6e),o=RU(i);if(o==="Binary")i="BinData("+i.sub_type+', "'+i.toString("base64")+'")';else if(o==="ObjectId")i=Up('ObjectId("'+i.toHexString()+'")');else if(o==="Date")i=Up('new Date("'+i.toUTCString()+'")');else if(o==="Object"){let a=Object.keys(i),u=a.length,c;for(let l=0;l<u;++l)if(c=a[l],i[c]){let p;if(typeof i[c].toBSON=="function")try{i[c]=i[c].toBSON()}catch(h){p=h}let d=RU(i[c]);if(d==="Binary")i[c]="BinData("+i[c].sub_type+', "'+i[c].buffer.toString("base64")+'")';else if(d==="Object")i[c]=D8(i[c],!0);else if(d==="ObjectId")l6e(i,c);else if(d==="Date")p6e(i,c,n);else if(d==="ClientSession")i[c]=Up('ClientSession("'+(i[c]?.id?.id?.buffer||"").toString("hex")+'")');else if(Array.isArray(i[c]))i[c]=i[c].map(c6e);else if(p!=null)throw p}}return e?i:T8.inspect(i,!1,10,r).replace(/\n/g,"").replace(/\s{2,}/g," ")}wi.prototype.getIndexes=wi.prototype.indexInformation;FU.exports=wi});var P8=m((FRe,jU)=>{"use strict";var d6e=require("events").EventEmitter,Rh=we();var qU=["close","change","end","error","resumeTokenChanged"];var M8=class extends d6e{constructor(e,r,n){if(super(),this.driverChangeStream=null,this.closed=!1,this.bindedEvents=!1,this.pipeline=r,this.options=n,this.errored=!1,n?.hydrate&&!n.model)throw new Error("Cannot create change stream with `hydrate: true` unless calling `Model.watch()`");let s=null;if(this.$driverChangeStreamPromise=new Promise((i,o)=>{try{e((a,u)=>{if(a!=null)return this.errored=!0,this.emit("error",a),o(a);this.driverChangeStream=u,this.emit("ready"),i()})}catch(a){s=a,this.errored=!0,this.emit("error",a),o(a)}}),s!=null)throw s}_bindEvents(){if(!this.bindedEvents){if(this.bindedEvents=!0,this.driverChangeStream==null){this.$driverChangeStreamPromise.then(()=>{this.driverChangeStream.on("close",()=>{this.closed=!0}),qU.forEach(e=>{this.driverChangeStream.on(e,r=>{r?.fullDocument!=null&&this.options?.hydrate&&(r.fullDocument=this.options.model.hydrate(r.fullDocument)),this.emit(e,r)})})},()=>{});return}this.driverChangeStream.on("close",()=>{this.closed=!0}),qU.forEach(e=>{this.driverChangeStream.on(e,r=>{r?.fullDocument!=null&&this.options?.hydrate&&(r.fullDocument=this.options.model.hydrate(r.fullDocument)),this.emit(e,r)})})}}hasNext(e){if(this.errored)throw new Rh("Cannot call hasNext() on errored ChangeStream");return this.driverChangeStream.hasNext(e)}next(e){if(this.errored)throw new Rh("Cannot call next() on errored ChangeStream");if(this.options?.hydrate){if(e!=null){let n=e;e=(s,i)=>s!=null?n(s):(i.fullDocument!=null&&(i.fullDocument=this.options.model.hydrate(i.fullDocument)),n(null,i))}let r=this.driverChangeStream.next(e);return typeof r?.then=="function"&&(r=r.then(n=>(n.fullDocument!=null&&(n.fullDocument=this.options.model.hydrate(n.fullDocument)),n))),r}return this.driverChangeStream.next(e)}addListener(e,r){if(this.errored)throw new Rh("Cannot call addListener() on errored ChangeStream");return this._bindEvents(),super.addListener(e,r)}on(e,r){if(this.errored)throw new Rh("Cannot call on() on errored ChangeStream");return this._bindEvents(),super.on(e,r)}once(e,r){if(this.errored)throw new Rh("Cannot call once() on errored ChangeStream");return this._bindEvents(),super.once(e,r)}_queue(e){this.once("ready",()=>e())}close(){return this.closed=!0,this.driverChangeStream?this.driverChangeStream.close():this.$driverChangeStreamPromise.then(()=>this.driverChangeStream.close(),()=>{})}};jU.exports=M8});var fc=m(($Re,UU)=>{"use strict";function Ne(){this._pres=new Map,this._posts=new Map}Ne.skipWrappedFunction=function(){if(!(this instanceof Ne.skipWrappedFunction))return new Ne.skipWrappedFunction(...arguments);this.args=[...arguments]};Ne.overwriteResult=function(){if(!(this instanceof Ne.overwriteResult))return new Ne.overwriteResult(...arguments);this.args=[...arguments]};Ne.overwriteArguments=function(){if(!(this instanceof Ne.overwriteArguments))return new Ne.overwriteArguments(...arguments);this.args=[...arguments]};Ne.prototype.execPre=async function(e,r,n){let s=this._pres.get(e)||[],i=s.length,o=n,a=null;if(!i)return o;for(let u of s){let c=[],l=[null].concat(o);for(let p=1;p<l.length;++p)p===l.length-1&&typeof l[p]=="function"||c.push(l[p]);try{let p=u.fn.apply(r,c);if(B8(p)){let d=await p;d instanceof Ne.overwriteArguments&&(o=d.args)}else p instanceof Ne.overwriteArguments&&(o=p.args)}catch(p){if(p instanceof Ne.skipWrappedFunction){a=p;continue}if(p instanceof Ne.overwriteArguments){o=p.args;continue}throw p}}if(a)throw a;return o};Ne.prototype.execPreSync=function(t,e,r){let n=this._pres.get(t)||[],s=n.length,i=r||[];for(let o=0;o<s;++o){let a=n[o].fn.apply(e,i);a instanceof Ne.overwriteArguments&&(i=a.args)}return i};Ne.prototype.execPost=async function(e,r,n,s){let i=this._posts.get(e)||[],o=i.length,a=null;if(s&&s.error&&(a=s.error),!o){if(a!=null)throw a;return n}for(let u of i){let c=u.fn,l=0,p=[],d=n.length;for(let g=0;g<d;++g)(!n[g]||!n[g]._kareemIgnore)&&(l+=1,p.push(n[g]));if(s?.numCallbackParams!=null){l=s.numCallbackParams;for(let g=p.length;g<l;++g)p.push(null)}let h,f,y=new Promise((g,_)=>{h=g,f=_});if(p.push(function(_){_?f(_):h()}),a)if(LU(u,l))try{let g=c.apply(r,[a].concat(p));B8(g)?await g:c.length===l+2&&await y}catch(g){if(g instanceof Ne.overwriteResult){n=g.args;continue}a=g}else continue;else{if(LU(u,l))continue;{let g=null;try{g=c.apply(r,p),B8(g)?g=await g:c.length===l+1&&(g=await y)}catch(_){if(_ instanceof Ne.overwriteResult){n=_.args;continue}a=_;continue}if(g instanceof Ne.overwriteResult){n=g.args;continue}}}}if(a!=null)throw a;return n};Ne.prototype.execPostSync=function(t,e,r){let n=this._posts.get(t)||[],s=n.length;for(let i=0;i<s;++i){let o=n[i].fn.apply(e,r||[]);o instanceof Ne.overwriteResult&&(r=o.args)}return r};Ne.prototype.createWrapperSync=function(t,e){let r=this;return function(){let s=r.execPreSync(t,this,Array.from(arguments)),i=e.apply(this,s);return r.execPostSync(t,this,[i])[0]}};Ne.prototype.wrap=async function(e,r,n,s,i){let o,a=!1,u=s;try{u=await this.execPre(e,n,s)}catch(c){c instanceof Ne.skipWrappedFunction?(o=c.args,a=!0):await this.execPost(e,n,s,{...i,error:c})}return a||(o=await r.apply(n,u)),o=await this.execPost(e,n,[o],i),o[0]};Ne.prototype.filter=function(t){let e=this.clone(),r=Array.from(e._pres.keys());for(let s of r){let i=this._pres.get(s).map(o=>Object.assign({},o,{name:s})).filter(t);if(i.length===0){e._pres.delete(s);continue}e._pres.set(s,i)}let n=Array.from(e._posts.keys());for(let s of n){let i=this._posts.get(s).map(o=>Object.assign({},o,{name:s})).filter(t);if(i.length===0){e._posts.delete(s);continue}e._posts.set(s,i)}return e};Ne.prototype.hasHooks=function(t){return this._pres.has(t)||this._posts.has(t)};Ne.prototype.createWrapper=function(t,e,r,n){let s=this;return this.hasHooks(t)?function(){let o=r||this;return s.wrap(t,e,o,Array.from(arguments),n)}:e};Ne.prototype.pre=function(t,e,r,n,s){typeof e=="function"?(r=e,e={}):e==null&&(e={});let i=this._pres.get(t)||[];if(this._pres.set(t,i),typeof r!="function")throw new Error('pre() requires a function, got "'+typeof r+'"');return s?i.unshift(Object.assign({},e,{fn:r})):i.push(Object.assign({},e,{fn:r})),this};Ne.prototype.post=function(t,e,r,n){let s=this._posts.get(t)||[];if(typeof e=="function"&&(n=!!r,r=e,e={}),typeof r!="function")throw new Error('post() requires a function, got "'+typeof r+'"');return n?s.unshift(Object.assign({},e,{fn:r})):s.push(Object.assign({},e,{fn:r})),this._posts.set(t,s),this};Ne.prototype.postError=function(e,r,n,s){return typeof r=="function"&&(s=!!n,n=r,r={}),this.post(e,{...r,errorHandler:!0},n,s)};Ne.prototype.clone=function(){let t=new Ne;for(let e of this._pres.keys()){let r=this._pres.get(e).slice();t._pres.set(e,r)}for(let e of this._posts.keys())t._posts.set(e,this._posts.get(e).slice());return t};Ne.prototype.merge=function(t,e){e=arguments.length===1?!0:e;let r=e?this.clone():this;for(let n of t._pres.keys()){let s=r._pres.get(n)||[],i=t._pres.get(n).filter(a=>s.map(u=>u.fn).indexOf(a.fn)===-1),o=s.concat(i);r._pres.set(n,o)}for(let n of t._posts.keys()){let s=r._posts.get(n)||[],i=t._posts.get(n).filter(o=>s.indexOf(o)===-1);r._posts.set(n,s.concat(i))}return r};function B8(t){return typeof t=="object"&&t!==null&&typeof t.then=="function"}function LU(t,e){return t.errorHandler?!0:t.fn.length===e+2}UU.exports=Ne});var zU=m((VU,WU)=>{"use strict";var nn=WU.exports=VU={};nn.DocumentNotFoundError=null;nn.general={};nn.general.default="Validator failed for path `{PATH}` with value `{VALUE}`";nn.general.required="Path `{PATH}` is required.";nn.Number={};nn.Number.min="Path `{PATH}` ({VALUE}) is less than minimum allowed value ({MIN}).";nn.Number.max="Path `{PATH}` ({VALUE}) is more than maximum allowed value ({MAX}).";nn.Number.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";nn.Date={};nn.Date.min="Path `{PATH}` ({VALUE}) is before minimum allowed value ({MIN}).";nn.Date.max="Path `{PATH}` ({VALUE}) is after maximum allowed value ({MAX}).";nn.String={};nn.String.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";nn.String.match="Path `{PATH}` is invalid ({VALUE}).";nn.String.minlength="Path `{PATH}` (`{VALUE}`, length {LENGTH}) is shorter than the minimum allowed length ({MINLENGTH}).";nn.String.maxlength="Path `{PATH}` (`{VALUE}`, length {LENGTH}) is longer than the maximum allowed length ({MAXLENGTH})."});var sn=m((qRe,GU)=>{"use strict";var h6e=we(),f6e=require("util"),g_=class extends h6e{constructor(e,r,n,s,i){if(arguments.length>0){let o=KU(r),a=HU(i),u=I8(null,e,r,n,a,o,s);super(u),this.init(e,r,n,s,i)}else super(I8())}toJSON(){return{stringValue:this.stringValue,valueType:this.valueType,kind:this.kind,value:this.value,path:this.path,reason:this.reason,name:this.name,message:this.message}}init(e,r,n,s,i){this.stringValue=N8(r),this.messageFormat=HU(i),this.kind=e,this.value=r,this.path=n,this.reason=s,this.valueType=KU(r)}copy(e){this.messageFormat=e.messageFormat,this.stringValue=e.stringValue,this.kind=e.kind,this.value=e.value,this.path=e.path,this.reason=e.reason,this.message=e.message,this.valueType=e.valueType}setModel(e){this.message=I8(e,this.kind,this.value,this.path,this.messageFormat,this.valueType)}};Object.defineProperty(g_.prototype,"name",{value:"CastError"});function N8(t){let e=f6e.inspect(t);return e=e.replace(/^'|'$/g,'"'),e.startsWith('"')||(e='"'+e+'"'),e}function KU(t){if(t==null)return""+t;let e=typeof t;return e!=="object"||typeof t.constructor!="function"?e:t.constructor.name}function HU(t){let e=t?._castErrorMessage||null;if(typeof e=="string"||typeof e=="function")return e}function I8(t,e,r,n,s,i,o){if(typeof s=="string"){let a=N8(r),u=s.replace("{KIND}",e).replace("{VALUE}",a).replace("{PATH}",n);return t!=null&&(u=u.replace("{MODEL}",t.modelName)),u}else{if(typeof s=="function")return s(r,n,t,e);{let a=N8(r),u=i?" (type "+i+")":"",c="Cast to "+e+" failed for value "+a+u+' at path "'+n+'"';return t!=null&&(c+=' for model "'+t.modelName+'"'),o!=null&&typeof o.constructor=="function"&&o.constructor.name!=="AssertionError"&&o.constructor.name!=="Error"&&(c+=' because of "'+o.constructor.name+'"'),c}}}GU.exports=g_});var E_=m((jRe,YU)=>{"use strict";var JU=we(),m6e=require("util"),__=class extends JU{constructor(e,r,n,s){let i,o=JU.messages;o.DocumentNotFoundError!=null?i=typeof o.DocumentNotFoundError=="function"?o.DocumentNotFoundError(e,r):o.DocumentNotFoundError:i='No document found for query "'+m6e.inspect(e)+'" on model "'+r+'"',super(i),this.result=s,this.numAffected=n,this.filter=e,this.query=e}};Object.defineProperty(__.prototype,"name",{value:"DocumentNotFoundError"});YU.exports=__});var k8=m((LRe,QU)=>{"use strict";QU.exports=function(e){let r=Object.keys(e.errors||{}),n=r.length,s=[],i;for(let o=0;o<n;++o)i=r[o],e!==e.errors[i]&&s.push(i+": "+e.errors[i].message);return s.join(", ")}});var yc=m((URe,eV)=>{"use strict";var y6e=we(),g6e=bn(),XU=require("util"),ZU=k8(),mc=class t extends y6e{constructor(e){let r;g6e(e)==="model"?r=e.constructor.modelName+" validation failed":r="Validation failed",super(r),this.errors={},this._message=r,e&&(e.$errors=this.errors)}toString(){return this.name+": "+ZU(this)}addError(e,r){if(r instanceof t){let{errors:n}=r;for(let s of Object.keys(n))this.addError(`${e}.${s}`,n[s]);return}this.errors[e]=r,this.message=this._message+": "+ZU(this)}};XU.inspect.custom&&(mc.prototype[XU.inspect.custom]=mc.prototype.inspect);Object.defineProperty(mc.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(mc.prototype,"name",{value:"ValidationError"});eV.exports=mc});var R8=m((VRe,nV)=>{"use strict";var tV=we(),Vp=class extends tV{constructor(e,r){let n=e.message;n||(n=tV.messages.general.default);let s=rV(n,e,r);super(s),e=Object.assign({},e,{message:s}),this.properties=e,this.kind=e.type,this.path=e.path,this.value=e.value,this.reason=e.reason}toString(){return this.message}toJSON(){return Object.assign({name:this.name,message:this.message},this)}};Object.defineProperty(Vp.prototype,"name",{value:"ValidatorError"});Object.defineProperty(Vp.prototype,"properties",{enumerable:!1,writable:!0,value:null});Vp.prototype.formatMessage=rV;function rV(t,e,r){if(typeof t=="function")return t(e,r);let n=Object.keys(e);for(let s of n)s!=="message"&&(t=t.replace("{"+s.toUpperCase()+"}",e[s]));return t}nV.exports=Vp});var F8=m((WRe,sV)=>{"use strict";var _6e=we(),b_=class extends _6e{constructor(e,r,n){let s=n.join(", ");super('No matching document found for id "'+e._doc._id+'" version '+r+' modifiedPaths "'+s+'"'),this.version=r,this.modifiedPaths=n}};Object.defineProperty(b_.prototype,"name",{value:"VersionError"});sV.exports=b_});var $8=m((zRe,iV)=>{"use strict";var E6e=we(),w_=class extends E6e{constructor(e){super("Can't save() the same doc multiple times in parallel. Document: "+e._doc._id)}};Object.defineProperty(w_.prototype,"name",{value:"ParallelSaveError"});iV.exports=w_});var q8=m((KRe,oV)=>{"use strict";var b6e=we(),S_=class extends b6e{constructor(e){super("Cannot overwrite `"+e+"` model once compiled.")}};Object.defineProperty(S_.prototype,"name",{value:"OverwriteModelError"});oV.exports=S_});var uV=m((HRe,aV)=>{"use strict";var w6e=we(),A_=class extends w6e{constructor(e){let r=`Schema hasn't been registered for model "`+e+`".
Use mongoose.model(name, schema)`;super(r)}};Object.defineProperty(A_.prototype,"name",{value:"MissingSchemaError"});aV.exports=A_});var j8=m((GRe,cV)=>{"use strict";var S6e=we(),O_=class extends S6e{constructor(e,r,n){let s=n?.matchedCount??0,i=n?.insertedCount??0,o=r.map(u=>u._id).join(", ");o.length>100&&(o=o.slice(0,100)+"...");let a=r.length-s-i;super(`${e}.bulkSave() was not able to update ${a} of the given documents due to incorrect version or optimistic concurrency, document ids: ${o}`),this.modelName=e,this.documents=r,this.bulkWriteResult=n,this.numDocumentsNotUpdated=a}};Object.defineProperty(O_.prototype,"name",{value:"MongooseBulkSaveIncompleteError"});cV.exports=O_});var pV=m((JRe,lV)=>{"use strict";var A6e=bn();lV.exports=function(e){if(A6e(e)!=="TopologyDescription")return!1;let r=Array.from(e.servers.values());return r.length>0&&r.every(n=>n.type==="Unknown")}});var hV=m((YRe,dV)=>{"use strict";var O6e=bn();dV.exports=function(e){if(O6e(e)!=="TopologyDescription"||e.servers.size===0)return!1;for(let r of e.servers.values())if(r.host.endsWith(".mongodb.net")===!1||r.port!==27017)return!1;return!0}});var mV=m((QRe,fV)=>{"use strict";var C6e=bn(),v6e="Client network socket disconnected before secure TLS connection was established";fV.exports=function(e){if(C6e(e)!=="TopologyDescription")return!1;let r=Array.from(e.servers.values());return r.length>0&&r.every(n=>n.error&&n.error.message.indexOf(v6e)!==-1)}});var L8=m((XRe,yV)=>{"use strict";var x6e=we(),T6e=pV(),D6e=hV(),M6e=mV();var P6e="Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/",B6e="Mongoose is connecting with SSL enabled, but the server is not accepting SSL connections. Please ensure that the MongoDB server you are connecting to is configured to accept SSL connections. Learn more: https://mongoosejs.com/docs/tutorials/ssl.html",C_=class extends x6e{assimilateError(e){let r=e.reason;D6e(r)&&T6e(r)&&e.message.indexOf("bad auth")===-1&&e.message.indexOf("Authentication failed")===-1?this.message=P6e:M6e(r)?this.message=B6e:this.message=e.message;for(let s in e)s!=="name"&&(this[s]=e[s]);return this.cause=r,this}};Object.defineProperty(C_.prototype,"name",{value:"MongooseServerSelectionError"});yV.exports=C_});var U8=m((ZRe,gV)=>{"use strict";var I6e=we(),v_=class extends I6e{constructor(e){let r="For your own good, using `document.save()` to update an array which was selected using an $elemMatch projection OR populated using skip, limit, query conditions, or exclusion of the _id field when the operation results in a $pop or $set of the entire array is not supported. The following path(s) would have been modified unsafely:\n  "+e.join(`
  `)+`
Use Model.updateOne() to update these arrays instead. See https://mongoosejs.com/docs/faq.html#divergent-array-error for more information.`;super(r)}};Object.defineProperty(v_.prototype,"name",{value:"DivergentArrayError"});gV.exports=v_});var eu=m((eFe,_V)=>{"use strict";var N6e=we(),x_=class extends N6e{constructor(e,r,n){r=r||"Field `"+e+"` is not in schema and strict mode is set to throw.",super(r),this.isImmutableError=!!n,this.path=e}};Object.defineProperty(x_.prototype,"name",{value:"StrictModeError"});_V.exports=x_});var V8=m((tFe,EV)=>{"use strict";var k6e=we(),T_=class extends k6e{constructor(e,r){r=r||"Cannot populate path `"+e+"` because it is not in your schema. Set the `strictPopulate` option to false to override.",super(r),this.path=e}};Object.defineProperty(T_.prototype,"name",{value:"StrictPopulateError"});EV.exports=T_});var ds=m((bV,wV)=>{"use strict";var qr=we();wV.exports=bV=qr;qr.messages=zU();qr.Messages=qr.messages;qr.CastError=sn();qr.DocumentNotFoundError=E_();qr.ValidationError=yc();qr.ValidatorError=R8();qr.VersionError=F8();qr.ParallelSaveError=$8();qr.OverwriteModelError=q8();qr.MissingSchemaError=uV();qr.MongooseBulkSaveIncompleteError=j8();qr.MongooseServerSelectionError=L8();qr.DivergentArrayError=U8();qr.StrictModeError=eu();qr.StrictPopulateError=V8()});var hs=m((rFe,SV)=>{"use strict";SV.exports=Object.freeze({enumerable:!0,configurable:!0,writable:!0,value:void 0})});var qn=m((nFe,AV)=>{"use strict";var R6e=vt(),jr=class{constructor(e){if(e==null)return this;Object.assign(this,R6e(e))}},$n=hs();Object.defineProperty(jr.prototype,"type",$n);Object.defineProperty(jr.prototype,"validate",$n);Object.defineProperty(jr.prototype,"cast",$n);Object.defineProperty(jr.prototype,"required",$n);Object.defineProperty(jr.prototype,"default",$n);Object.defineProperty(jr.prototype,"ref",$n);Object.defineProperty(jr.prototype,"refPath",$n);Object.defineProperty(jr.prototype,"select",$n);Object.defineProperty(jr.prototype,"index",$n);Object.defineProperty(jr.prototype,"unique",$n);Object.defineProperty(jr.prototype,"immutable",$n);Object.defineProperty(jr.prototype,"sparse",$n);Object.defineProperty(jr.prototype,"text",$n);Object.defineProperty(jr.prototype,"transform",$n);AV.exports=jr});var D_=m((sFe,Wp)=>{"use strict";var F6e=sn();Wp.exports=function(e,r){if(Wp.exports.convertToTrue.has(e))return!0;if(Wp.exports.convertToFalse.has(e))return!1;if(e==null)return e;throw new F6e("boolean",e,r)};Wp.exports.convertToTrue=new Set([!0,"true",1,"1","yes"]);Wp.exports.convertToFalse=new Set([!1,"false",0,"0","no"])});var M_=m((iFe,OV)=>{"use strict";var $6e=D_();OV.exports=function(t){let e=this?.path??null;return $6e(t,e)}});var W8=m((oFe,CV)=>{"use strict";CV.exports=function(t){if(Array.isArray(t)){if(!t.every(e=>typeof e=="number"||typeof e=="string"))throw new Error("$type array values must be strings or numbers");return t}if(typeof t!="number"&&typeof t!="string")throw new Error("$type parameter must be number, string, or array of numbers and strings");return t}});var xV=m((aFe,vV)=>{"use strict";var q6e=eu();vV.exports=function(t){t.$immutable?(t.$immutableSetter=j6e(t.path,t.options.immutable),t.set(t.$immutableSetter)):t.$immutableSetter&&(t.setters=t.setters.filter(e=>e!==t.$immutableSetter),delete t.$immutableSetter)};function j6e(t,e){return function(n,s,i,o){if(this==null||this.$__==null||this.isNew||o?.overwriteImmutable||!(typeof e=="function"?e.call(this,this):e))return n;let u=this.$__.priorDoc!=null?this.$__.priorDoc.$__getValue(t):this.$__getValue(t);if(this.$__.strictMode==="throw"&&n!==u)throw new q6e(t,"Path `"+t+"` is immutable and strict mode is set to throw.",!0);return u}}});var DV=m((uFe,TV)=>{"use strict";TV.exports=function(e){return typeof e=="function"&&e.constructor&&e.constructor.name==="AsyncFunction"}});var PV=m((cFe,MV)=>{"use strict";MV.exports=function(e){let r=Object.keys(e),n=!0;for(let s=0,i=r.length;s<i;++s)if(typeof e[r[s]]=="object"&&e[r[s]]!==null){n=!1;break}return n}});var IV=m((lFe,BV)=>{"use strict";BV.exports=function(e){let r=[],n="",s="DEFAULT";for(let i=0;i<e.length;++i)s==="IN_SQUARE_BRACKETS"&&!/\d/.test(e[i])&&e[i]!=="]"&&(s="DEFAULT",n=r[r.length-1]+"["+n,r.splice(r.length-1,1)),e[i]==="["?(s!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&(r.push(n),n=""),s="IN_SQUARE_BRACKETS"):e[i]==="]"?s==="IN_SQUARE_BRACKETS"?(s="IMMEDIATELY_AFTER_SQUARE_BRACKETS",r.push(n),n=""):(s="DEFAULT",n+=e[i]):e[i]==="."?(s!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&(r.push(n),n=""),s="DEFAULT"):n+=e[i];return s!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&r.push(n),r}});var FV=m(Ro=>{var Fh=IV(),NV=["__proto__","constructor","prototype"];Ro.get=function(t,e,r,n){var s;typeof r=="function"&&(r.length<2?(n=r,r=void 0):(s=r,r=void 0)),n||(n=RV);var i=typeof t=="string"?Fh(t):t;if(!Array.isArray(i))throw new TypeError("Invalid `path`. Must be either string or array");for(var o=e,a,u=0;u<i.length;++u){if(a=i[u],typeof i[u]!="string"&&typeof i[u]!="number")throw new TypeError("Each segment of path to `get()` must be a string or number, got "+typeof i[u]);if(Array.isArray(o)&&!/^\d+$/.test(a)){var c=i.slice(u);return[].concat(o).map(function(p){return p?Ro.get(c,p,r||s,n):n(void 0)})}if(s)o=s(o,a);else{var l=r&&o[r]?o[r]:o;o=l instanceof Map?l.get(a):l[a]}if(!o)return n(o)}return n(o)};Ro.has=function(t,e){var r=typeof t=="string"?Fh(t):t;if(!Array.isArray(r))throw new TypeError("Invalid `path`. Must be either string or array");for(var n=r.length,s=e,i=0;i<n;++i){if(typeof r[i]!="string"&&typeof r[i]!="number")throw new TypeError("Each segment of path to `has()` must be a string or number, got "+typeof r[i]);if(s==null||typeof s!="object"||!(r[i]in s))return!1;s=s[r[i]]}return!0};Ro.unset=function(t,e){var r=typeof t=="string"?Fh(t):t;if(!Array.isArray(r))throw new TypeError("Invalid `path`. Must be either string or array");for(var n=r.length,s=e,i=0;i<n;++i){if(s==null||typeof s!="object"||!(r[i]in s))return!1;if(typeof r[i]!="string"&&typeof r[i]!="number")throw new TypeError("Each segment of path to `unset()` must be a string or number, got "+typeof r[i]);if(NV.indexOf(r[i])!==-1)return!1;if(i===n-1)return delete s[r[i]],!0;s=s instanceof Map?s.get(r[i]):s[r[i]]}return!0};Ro.set=function(t,e,r,n,s,i){var o;typeof n=="function"&&(n.length<2?(s=n,n=void 0):(o=n,n=void 0)),s||(s=RV);var a=typeof t=="string"?Fh(t):t;if(!Array.isArray(a))throw new TypeError("Invalid `path`. Must be either string or array");if(r!=null){for(var u=0;u<a.length;++u){if(typeof a[u]!="string"&&typeof a[u]!="number")throw new TypeError("Each segment of path to `set()` must be a string or number, got "+typeof a[u]);if(NV.indexOf(a[u])!==-1)return}for(var c=i||/\$/.test(t)&&i!==!1,l=r,p,u=0,d=a.length-1;u<d;++u){if(p=a[u],p=="$"){if(u==d-1)break;continue}if(Array.isArray(l)&&!/^\d+$/.test(p)){var h=a.slice(u);if(!c&&Array.isArray(e))for(var f=0;f<l.length&&f<e.length;++f)Ro.set(h,e[f],l[f],n||o,s,c);else for(var f=0;f<l.length;++f)Ro.set(h,e,l[f],n||o,s,c);return}if(o)l=o(l,p);else{var y=n&&l[n]?l[n]:l;l=y instanceof Map?y.get(p):y[p]}if(!l)return}if(p=a[d],n&&l[n]&&(l=l[n]),Array.isArray(l)&&!/^\d+$/.test(p))if(!c&&Array.isArray(e))kV(l,e,p,o,n,s);else for(var f=0;f<l.length;++f){var g=l[f];g&&(o?o(g,p,s(e)):(g[n]&&(g=g[n]),g[p]=s(e)))}else o?o(l,p,s(e)):l instanceof Map?l.set(p,s(e)):l[p]=s(e)}};Ro.stringToParts=Fh;function kV(t,e,r,n,s,i){for(var o,a=0;a<t.length&&a<e.length;++a)o=t[a],Array.isArray(o)&&Array.isArray(e[a])?kV(o,e[a],r,n,s,i):o&&(n?n(o,r,i(e[a])):(o[s]&&(o=o[s]),o[r]=i(e[a])))}function RV(t){return t}});var fs=m(($V,qV)=>{"use strict";qV.exports=$V=FV()});var K8=m((dFe,jV)=>{"use strict";var L6e=vt(),z8=class{constructor(e){if(this._docs={},this._childDocs=[],e!=null&&(e=L6e(e),Object.assign(this,e),typeof e.subPopulate=="object"&&(this.populate=e.subPopulate),e.perDocumentLimit!=null&&e.limit!=null))throw new Error("Can not use `limit` and `perDocumentLimit` at the same time. Path: `"+e.path+"`.")}};jV.exports=z8});var UV=m(LV=>{"use strict";LV.isMongooseDocumentArray=function(t){return Array.isArray(t)&&t.isMongooseDocumentArray}});var P_=m((fFe,VV)=>{"use strict";VV.exports=function(e,r,n){let s=Object.keys(r.tree),i={};for(let o of s)n&&(e.paths[o]||e.nested[o]||e.singleNestedPaths[o])||(i[o]=r.tree[o]);e.options._isMerging=!0,e.add(i,null),delete e.options._isMerging,e.callQueue=e.callQueue.concat(r.callQueue),e.method(r.methods),e.static(r.statics);for(let[o,a]of Object.entries(r._userProvidedOptions))o in e._userProvidedOptions||e.set(o,a);for(let o in r.query)e.query[o]=r.query[o];for(let o in r.virtuals)e.virtuals[o]=r.virtuals[o].clone();e._indexes=e._indexes.concat(r._indexes||[]),e.s.hooks.merge(r.s.hooks,!1)}});var KV=m((WV,zV)=>{"use strict";var mFe=ae(),js=zV.exports=WV=function(){};js.ctor=function(){let t=[...arguments],e=function(){js.apply(this,arguments),this.paths={},this.states={}};return e.prototype=new js,e.prototype.constructor=e,e.prototype.stateNames=t,t.forEach(function(r){e.prototype[r]=function(n){this._changeState(n,r)}}),e};js.prototype._changeState=function(e,r){let n=this.paths[e];if(n===r)return;let s=this.states[n];s&&delete s[e],this.paths[e]=r,this.states[r]=this.states[r]||{},this.states[r][e]=!0};js.prototype.clear=function(e){if(this.states[e]==null)return;let r=Object.keys(this.states[e]),n=r.length,s;for(;n--;)s=r[n],delete this.states[e][s],delete this.paths[s]};js.prototype.clearPath=function(e){let r=this.paths[e];r&&(delete this.paths[e],delete this.states[r][e])};js.prototype.getStatePaths=function(e){return this.states[e]!=null?this.states[e]:{}};js.prototype.some=function(){let e=this,r=arguments.length?arguments:this.stateNames;return Array.prototype.some.call(r,function(n){return e.states[n]==null?!1:Object.keys(e.states[n]).length})};js.prototype._iter=function(e){return function(){let r=[...arguments],n=r.pop();r.length||(r=this.stateNames);let s=this;return r.reduce(function(o,a){return s.states[a]==null?o:o.concat(Object.keys(s.states[a]))},[])[e](function(o,a,u){return n(o,a,u)})}};js.prototype.forEach=function(){return this.forEach=this._iter("forEach"),this.forEach.apply(this,arguments)};js.prototype.map=function(){return this.map=this._iter("map"),this.map.apply(this,arguments)};js.prototype.clone=function(){let e=new this.constructor;e.paths={...this.paths};for(let r of this.stateNames)r in this.states&&(e.states[r]=this.states[r]==null?this.states[r]:{...this.states[r]});return e}});var JV=m((HV,GV)=>{"use strict";var U6e=KV(),V6e=U6e.ctor("require","modify","init","default","ignore");GV.exports=HV=Nt;function Nt(){this.activePaths=new V6e}Nt.prototype.strictMode=!0;Nt.prototype.fullPath=void 0;Nt.prototype.selected=void 0;Nt.prototype.shardval=void 0;Nt.prototype.saveError=void 0;Nt.prototype.validationError=void 0;Nt.prototype.adhocPaths=void 0;Nt.prototype.removing=void 0;Nt.prototype.inserting=void 0;Nt.prototype.saving=void 0;Nt.prototype.version=void 0;Nt.prototype._id=void 0;Nt.prototype.ownerDocument=void 0;Nt.prototype.populate=void 0;Nt.prototype.populated=void 0;Nt.prototype.primitiveAtomics=void 0;Nt.prototype.wasPopulated=!1;Nt.prototype.scope=void 0;Nt.prototype.session=null;Nt.prototype.pathsToScopes=null;Nt.prototype.cachedRequired=null});var B_=m((yFe,XV)=>{"use strict";var H8=pe().Binary,W6e=pe().UUID,YV=ae();function wn(t,e,r){let n=t;t==null&&(n=0);let s,i,o;Array.isArray(e)?(i=e[0],o=e[1]):s=e;let a;return typeof n=="number"||n instanceof Number?a=Buffer.alloc(n):a=Buffer.from(n,s,r),YV.decorate(a,wn.mixin),a.isMongooseBuffer=!0,a[wn.pathSymbol]=i,a[QV]=o,a._subtype=0,a}var z6e=Symbol.for("mongoose#Buffer#_path"),QV=Symbol.for("mongoose#Buffer#_parent");wn.pathSymbol=z6e;wn.mixin={_subtype:void 0,_markModified:function(){let t=this[QV];return t&&t.markModified(this[wn.pathSymbol]),this},write:function(){let t=Buffer.prototype.write.apply(this,arguments);return t>0&&this._markModified(),t},copy:function(t){let e=Buffer.prototype.copy.apply(this,arguments);return t?.isMongooseBuffer&&t._markModified(),e}};YV.each(["writeUInt8","writeUInt16","writeUInt32","writeInt8","writeInt16","writeInt32","writeFloat","writeDouble","fill","utf8Write","binaryWrite","asciiWrite","set","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE"],function(t){Buffer.prototype[t]&&(wn.mixin[t]=function(){let e=Buffer.prototype[t].apply(this,arguments);return this._markModified(),e})});wn.mixin.toObject=function(t){let e=typeof t=="number"?t:this._subtype||0;return new H8(Buffer.from(this),e)};wn.mixin.$toObject=wn.mixin.toObject;wn.mixin.toBSON=function(){return new H8(this,this._subtype||0)};wn.mixin.toUUID=function(){if(this._subtype!==4)throw new Error("Cannot convert a Buffer with subtype "+this._subtype+" to a UUID");return new W6e(this)};wn.mixin.equals=function(t){if(!Buffer.isBuffer(t)||this.length!==t.length)return!1;for(let e=0;e<this.length;++e)if(this[e]!==t[e])return!1;return!0};wn.mixin.subtype=function(t){if(typeof t!="number")throw new TypeError("Invalid subtype. Expected a number");this._subtype!==t&&this._markModified(),this._subtype=t};wn.Binary=H8;XV.exports=wn});var gc=m(G8=>{"use strict";G8.schemaMixedSymbol=Symbol.for("mongoose:schema_mixed");G8.builtInMiddleware=Symbol.for("mongoose:built-in-middleware")});var _c=m((_Fe,eW)=>{"use strict";var I_=kt(),K6e=gc(),H6e=hc(),ZV=ae();function Ls(t,e,r,n){if(e?.default){let s=e.default;Array.isArray(s)&&s.length===0?e.default=Array:!e.shared&&H6e(s)&&ZV.hasOwnKeys(s)===!1&&(e.default=function(){return{}})}I_.call(this,t,e,"Mixed",n),this[K6e.schemaMixedSymbol]=!0}Ls.schemaName="Mixed";Ls.defaultOptions={};Ls.prototype=Object.create(I_.prototype);Ls.prototype.constructor=Ls;Ls.get=I_.get;Ls.set=I_.set;Ls.setters=[];Ls.prototype.cast=function(t){return t instanceof Error?ZV.errorToPOJO(t):t};Ls.prototype.castForQuery=function(t,e){return e};Ls.prototype.toJSONSchema=function(e){return{}};eW.exports=Ls});var rW=m((bFe,tW)=>{"use strict";tW.exports=class{constructor(e,r,n){this.subdocSnapshot=e,this.activePaths=r,this.version=n}}});var k_=m((wFe,nW)=>{"use strict";var G6e=we(),N_=class extends G6e{constructor(e,r){let n=Array.isArray(r)?"array":"primitive value";super("Tried to set nested object field `"+e+`\` to ${n} \``+r+"`"),this.path=e}};Object.defineProperty(N_.prototype,"name",{value:"ObjectExpectedError"});nW.exports=N_});var F_=m((SFe,sW)=>{"use strict";var J6e=we(),R_=class extends J6e{constructor(e,r,n){super('Parameter "'+r+'" to '+n+'() must be an object, got "'+(e==null?e:e.toString())+'" (type '+typeof e+")")}};Object.defineProperty(R_.prototype,"name",{value:"ObjectParameterError"});sW.exports=R_});var oW=m((AFe,iW)=>{"use strict";var Y6e=we(),$_=class extends Y6e{constructor(e){super("Can't validate() the same doc multiple times in parallel. Document: "+e._doc._id)}};Object.defineProperty($_.prototype,"name",{value:"ParallelValidateError"});iW.exports=$_});var J8=m((OFe,aW)=>{"use strict";aW.exports=function(e){let r={},n=Object.keys(e);for(let s of n){if(s.indexOf(".")===-1){r[s]=1;continue}let i=s.split("."),o=i[0];for(let a=0;a<i.length;++a)r[o]=1,a+1<i.length&&(o=o+"."+i[a+1])}return r}});var cW=m((CFe,uW)=>{"use strict";uW.exports=function(e){return e==null||typeof e!="object"?!1:e.$slice==null&&e.$elemMatch==null&&e.$meta==null&&e.$==null}});var q_=m((vFe,lW)=>{"use strict";var Q6e=cW();lW.exports=function(e,r,n,s,i,o,a){let u=Object.keys(e.$__schema.paths),c=u.length,l=a?.skipParentChangeTracking;for(let p=0;p<c;++p){let d,h="",f=u[p];if(f==="_id"&&e.$__.skipId)continue;let y=e.$__schema.paths[f],g=y.splitPath(),_=g.length;if(g[_-1]==="$*")continue;let w=!1,O=e._doc;for(let E=0;E<_&&O!=null;++E){let A=g[E];if(h+=(h.length?".":"")+A,n===!0){if(h in r)break}else if(n===!1&&r&&!w){let x=y.$isSingleNested||y.$isMongooseDocumentArray;if(h in r&&!Q6e(r[h])||E===_-1&&x&&s!=null&&s[h])w=!0;else if(s!=null&&!s[h])break}if(E===_-1){if(O[A]!==void 0)break;if(i!=null){if(typeof y.defaultValue=="function"){if(!y.defaultValue.$runBeforeSetters&&i||y.defaultValue.$runBeforeSetters&&!i)break}else if(!i)continue}if(o&&o[h])break;if(r&&n!==null){if(n===!0){if(f in r)continue;try{d=y.getDefault(e,!1)}catch(x){e.invalidate(f,x);break}typeof d<"u"&&(O[A]=d,Y8(e,f,l))}else if(w){try{d=y.getDefault(e,!1)}catch(x){e.invalidate(f,x);break}typeof d<"u"&&(O[A]=d,Y8(e,f,l))}}else{try{d=y.getDefault(e,!1)}catch(x){e.invalidate(f,x);break}typeof d<"u"&&(O[A]=d,Y8(e,f,l))}}else O=O[A]}}};function Y8(t,e,r){t.$__.activePaths.default(e),!r&&t.$isSubdocument&&t.$isSingleNested&&t.$parent()!=null&&t.$parent().$__.activePaths.default(t.$__pathRelativeToParent(e))}});var j_=m((xFe,dW)=>{"use strict";dW.exports=function(e,r,n){n=n||{};let s=n.skipDocArrays,i=0;if(!e)return i;for(let o of Object.keys(e.$__.activePaths.getStatePaths("modify")))s&&e.$__schema.path(o)?.$isMongooseDocumentArray||o.startsWith(r+".")&&(e.$__.activePaths.clearPath(o),++i,e.$isSubdocument&&pW(e,o));return i};function pW(t,e,r=new Set){if(r.has(t))throw new Error("Infinite subdocument loop: subdoc with _id "+t._id+" is a parent of itself");let n=t.$parent(),s=t.$__pathRelativeToParent(void 0,!1)+"."+e;n.$__.activePaths.clearPath(s),n.$isSubdocument&&pW(n,s,r)}});var U_=m(Q8=>{"use strict";var X6e=vt(),Z6e=te().documentSchemaSymbol,eOe=bi().internalToObjectOptions,fW=ae(),zp,tOe=te().getSymbol,L_=te().scopeSymbol,hW=fW.isPOJO;Q8.compile=mW;Q8.defineKey=yW;var rOe=Object.freeze({minimize:!0,virtuals:!1,getters:!1,transform:!1}),nOe=Object.freeze({noDottedPath:!0});function mW(t,e,r,n){zp=zp||Zi();let s=n.typeKey;for(let i of Object.keys(t)){let o=t[i],u=hW(o)&&fW.hasOwnKeys(o)&&(!o[s]||s==="type"&&hW(o.type)&&o.type.type)?o:null;yW({prop:i,subprops:u,prototype:e,prefix:r,options:n})}}function yW({prop:t,subprops:e,prototype:r,prefix:n,options:s}){zp=zp||Zi();let i=(n?n+".":"")+t;n=n||"";let o=n?Object.freeze({}):nOe;e?Object.defineProperty(r,t,{enumerable:!0,configurable:!0,get:function(){if(!this.$__)return;let a=this;if(this.$__.getters||(this.$__.getters={}),!this.$__.getters[i]){let u=Object.create(zp.prototype,sOe(this));n||(u.$__[L_]=this),u.$__.nestedPath=i,Object.defineProperty(u,"schema",{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(u,"$__schema",{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(u,Z6e,{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(u,"toObject",{enumerable:!1,configurable:!0,writable:!1,value:function(){return X6e(a.get(i,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null}))}}),Object.defineProperty(u,"$__get",{enumerable:!1,configurable:!0,writable:!1,value:function(){return a.get(i,null,{virtuals:this?.schema?.options?.toObject?.virtuals||null})}}),Object.defineProperty(u,"toJSON",{enumerable:!1,configurable:!0,writable:!1,value:function(){return a.get(i,null,{virtuals:this?.schema?.options?.toJSON?.virtuals||null})}}),Object.defineProperty(u,"$__isNested",{enumerable:!1,configurable:!0,writable:!1,value:!0}),Object.defineProperty(u,"$isEmpty",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Object.keys(this.get(i,null,rOe)||{}).length===0}}),Object.defineProperty(u,"$__parent",{enumerable:!1,configurable:!0,writable:!1,value:this}),mW(e,u,i,s),this.$__.getters[i]=u}return this.$__.getters[i]},set:function(a){a?.$__isNested?a=a.$__get():a instanceof zp&&!a.$__isNested&&(a=a.$toObject(eOe)),(this.$__[L_]||this).$set(i,a)}}):Object.defineProperty(r,t,{enumerable:!0,configurable:!0,get:function(){return this[tOe].call(this.$__[L_]||this,i,null,o)},set:function(a){this.$set.call(this.$__[L_]||this,i,a)}})}function sOe(t){let e={};return Object.getOwnPropertyNames(t).forEach(function(r){["isNew","$__","$errors","errors","_doc","$locals","$op","__parentArray","__index","$isDocumentArrayElement"].indexOf(r)!==-1&&(e[r]=Object.getOwnPropertyDescriptor(t,r),e[r].enumerable=!1)}),e}});var _W=m((DFe,gW)=>{"use strict";gW.exports=function(e){return e==null?null:Object.keys(e)[0]}});var V_=m(X8=>{"use strict";var iOe=pe().Binary,EW=$r(),bW=kh(),oOe=ds(),aOe=require("util");X8.flatten=wW;X8.modifiedPaths=SW;function wW(t,e,r,n){let s;t&&bW(t)&&!Buffer.isBuffer(t)?s=Object.keys(t.toObject({transform:!1,virtuals:!1})||{}):s=Object.keys(t||{});let i=s.length,o={};e=e?e+".":"";for(let a=0;a<i;++a){let u=s[a],c=t[u];o[e+u]=c;let l=n?.path?.(e+u),p=n?.nested?.[e+u];if(l?.instance!=="Mixed"){if(AW(c)){if(r?.skipArrays&&Array.isArray(c))continue;let d=wW(c,e+u,r,n);for(let h in d)o[h]=d[h];Array.isArray(c)&&(o[e+u]=c)}if(p){let d=Object.keys(n.paths);for(let h of d)h.startsWith(e+u+".")&&!Object.hasOwn(o,h)&&(o[h]=void 0)}}}return o}function SW(t,e,r,n=null){if(t==null||typeof t!="object")return;if(n==null&&(n={raw:{update:t,path:e},trace:new WeakSet}),n.trace.has(t))throw new oOe(`a circular reference in the update value, updateValue:
${aOe.inspect(n.raw.update,{showHidden:!1,depth:1})}
updatePath: '${n.raw.path}'`);n.trace.add(t);let s=Object.keys(t||{}),i=s.length;r=r||{},e=e?e+".":"";for(let o=0;o<i;++o){let a=s[o],u=t[a],c=e+a;r[c]=!0,!Buffer.isBuffer(u)&&bW(u)&&(u=u.toObject({transform:!1,virtuals:!1})),AW(u)&&SW(u,e+a,r,n)}return n.trace.delete(t),r}function AW(t){return t&&typeof t=="object"&&!(t instanceof Date)&&!EW(t,"ObjectId")&&(!Array.isArray(t)||t.length!==0)&&!(t instanceof Buffer)&&!EW(t,"Decimal128")&&!(t instanceof iOe)}});var Rt=m((PFe,OW)=>{"use strict";OW.exports=function(e,r,n){let s,i=!1;if(typeof r=="string"){if(r.indexOf(".")===-1){let u=Z8(e,r);return u??n}s=r.split(".")}else if(i=!0,s=r,s.length===1){let u=Z8(e,s[0]);return u??n}let o=r,a=e;for(let u of s){if(a==null)return n;if(!i&&a[o]!=null)return a[o];a=Z8(a,u),i||(o=o.substr(u.length+1))}return a??n};function Z8(t,e){return t==null?t:t instanceof Map?t.get(e):t[e]}});var ex=m((BFe,vW)=>{"use strict";var CW=$r();vW.exports=function(e,r){return typeof e=="string"&&typeof r=="string"||typeof e=="number"&&typeof r=="number"?e===r:CW(e,"ObjectId")&&CW(r,"ObjectId")?e.toString()===r.toString():!1}});var W_=m((IFe,xW)=>{"use strict";var uOe=ex();xW.exports=function(e,r){if(e?.discriminators==null)return null;for(let n of Object.keys(e.discriminators)){let s=e.discriminators[n];if(s.discriminatorMapping!=null&&uOe(s.discriminatorMapping.value,r))return s}return null}});var DW=m((NFe,TW)=>{"use strict";var cOe=Rt(),lOe=W_();TW.exports=function t(e,r,n){n=n||{};let s=n.typeOnly,i=Array.isArray(r)?r:r.indexOf(".")===-1?[r]:r.split("."),o=null,a="adhocOrUndefined",u=lOe(e.schema,e.get(e.schema.options.discriminatorKey))||e.schema;for(let c=0;c<i.length;++c){let l=i.slice(0,c+1).join(".");if(o=u.path(l),o==null){a="adhocOrUndefined";continue}if(o.instance==="Mixed")return s?"real":o;if(a=u.pathType(l),(o.$isSingleNested||o.$isMongooseDocumentArrayElement)&&o.schema.discriminators!=null){let p=o.schema.discriminators,d=e.get(l+"."+cOe(o,"schema.options.discriminatorKey"));if(d==null||p[d]==null)continue;let h=i.slice(c+1).join(".");return t(e.get(l),h,n)}}return s?a:o}});var PW=m((kFe,MW)=>{"use strict";var pOe=Rt();MW.exports=function(e,r,n){let s=n!=null?Object.keys(pOe(e.tree,n,{})):Object.keys(e.tree),i=new Set(Object.keys(r)),o;if(i.size>1){o=new Set;for(let a of s)i.has(a)&&o.add(a);for(let a of i)o.has(a)||o.add(a);o=Array.from(o)}else o=Array.from(i);return o}});var IW=m((RFe,BW)=>{"use strict";BW.exports=function(e,r){if(r.length===1)return;let n=r[0],s;for(let i=0;i<r.length-1;++i){let o=e.path(n);o?.schema?(s=o.schema.options.strict,e=o.schema,n=o.$isMongooseDocumentArray&&!isNaN(r[i+1])?"":r[i+1]):n+=n.length?"."+r[i+1]:r[i+1]}return s}});var z_=m((FFe,NW)=>{"use strict";var dOe=ae(),hOe=new Set(["__index","__parentArray","_doc"]);NW.exports=function(e,r){if(dOe.isPOJO(e)&&e.$__!=null&&e._doc!=null){if(r){let n={};for(let s of Object.keys(e))typeof s!="symbol"&&s[0]!=="$"&&(hOe.has(s)||(n[s]=e[s]));return{...e._doc,...n}}return e._doc}return e}});var Kp=m(($Fe,kW)=>{"use strict";kW.exports=function(e){return e==null?!0:typeof e=="object"?!("$meta"in e)&&!("$slice"in e):!0}});var Hp=m((qFe,RW)=>{"use strict";var fOe=Kp(),mOe=jp();RW.exports=function t(e){if(e==null)return null;let r=Object.keys(e),n=null;if(r.length===1&&r[0]==="_id")n=!e._id;else for(let s=0;s<r.length;++s){let i=r[s];if(i!=="_id"&&fOe(e[i])&&(n=mOe(e[i])?t(e[i])??n:!e[i],n!=null))break}return n}});var tx=m((jFe,FW)=>{"use strict";var yOe=Kp();FW.exports=function(e,r){if(e==null)return!1;if(r==="_id")return e._id===0;let n=Object.keys(e),s=null;for(let i of n)if(yOe(e[i])){s=e[r]===1?"inclusive":"exclusive";break}return s==="inclusive"?e[r]!==1:s==="exclusive"?e[r]===0:!1}});var rx=m((LFe,$W)=>{"use strict";var gOe=ae();$W.exports=function(e,r){if(e._doc._id==null||r==null||r.length===0)return;let n=String(e._doc._id);for(let s of r){if(s.isVirtual)continue;let o=s.path.split(".");for(let a=0;a<o.length-1;++a){let u=o.slice(0,a+1).join("."),c=o.slice(a+1).join("."),l=e.get(u);if(l!=null&&gOe.isMongooseDocumentArray(l)){for(let p=0;p<l.length;++p)l[p]&&l[p].populated(c,s._docs[n]==null?void 0:s._docs[n][p],s);break}}}}});var nx=m((UFe,jW)=>{"use strict";var{isPOJO:_Oe}=ae();jW.exports=qW;function qW(t){let e=Object.keys(t),r=e.length,n,s,i;for(;r--;){if(s=e[r],i=t[s],_Oe(i)&&(t[s]=qW(i)),t[s]===void 0){delete t[s];continue}n=!0}return n?t:void 0}});var sx=m((VFe,LW)=>{"use strict";var EOe=/\./g;LW.exports=function(e){if(e.indexOf(".")===-1)return[e];let r=e.split(EOe),n=r.length,s=new Array(n),i="";for(let o=0;o<n;++o)i+=i.length!==0?"."+r[o]:r[o],s[o]=i;return s}});var VW=m((WFe,UW)=>{"use strict";UW.exports=function(e,r,n,s,i){let o=Object.keys(e).reduce((u,c)=>u||c.startsWith(r+"."),!1),a=r+"."+n.options.discriminatorKey;!o&&i.length===1&&i[0]===a&&s.splice(s.indexOf(a),1)}});var Us=m((zFe,WW)=>{"use strict";var bOe=ex();WW.exports=function(e,r){if(e==null)return null;for(let n of Object.keys(e)){let s=e[n];if(s.schema&&s.schema.discriminatorMapping&&bOe(s.schema.discriminatorMapping.value,r))return s}return null}});var K_=m((KFe,zW)=>{"use strict";zW.exports=function(e,r){let n=r.split("."),s="",i,o,a;for(let u=0;u<n.length;++u)if(s+=s.length?".":""+n[u],e[s]){for(o=Object.keys(e),a=o.length,i=0;i<a;++i)o[u].indexOf(s+".")===0&&o[u].indexOf(r);return!0}return!1}});var $h=m(Ec=>{"use strict";var KW=K8(),wOe=VW(),HW=Rt(),SOe=Us(),AOe=Kp(),OOe=vt(),COe=K_();Ec.preparePopulationOptionsMQ=function(e,r){let n=e._mongooseOptions.populate,s=Object.keys(n).reduce((a,u)=>a.concat([n[u]]),[]);r.lean!=null&&s.filter(a=>a?.options?.lean==null).forEach(vOe(r.lean));let i=e?.options?.session||null;i!=null&&s.forEach(a=>{if(a.options==null){a.options={session:i};return}"session"in a.options||(a.options.session=i)});let o=e._fieldsForExec();for(let a=0;a<s.length;++a)s[a]instanceof KW?s[a]=new KW({...s[a],_queryProjection:o,_localModel:e.model}):(s[a]._queryProjection=o,s[a]._localModel=e.model);return s};Ec.createModel=function(e,r,n,s,i){e.hooks.execPreSync("createModel",r);let o=e.schema?e.schema.discriminatorMapping:null,a=o?.isRoot?o.key:null,u=r[a];if(a&&u&&e.discriminators){let l=e.discriminators[u]||SOe(e.discriminators,u);if(l){let p=OOe(s);return Ec.applyPaths(p,l.schema),new l(void 0,p,{skipId:!0})}}let c={skipId:!0,isNew:!1,willInit:!0};return i!=null&&"defaults"in i&&(c.defaults=i.defaults),new e(void 0,n,c)};Ec.createModelAndInit=function(e,r,n,s,i,o,a){let u=o?{populated:o}:void 0,c=Ec.createModel(e,r,n,s,i);try{c.$init(r,u,a)}catch(l){a(l,c)}};Ec.applyPaths=function(e,r,n){let s,i,o=new Set;if(e){i=Object.keys(e);let d=[];for(let h=0;h<i.length;++h){let f=i[h];i[h][0]==="-"&&(delete e[f],f==="-_id"?e._id=0:d.push(f.slice(1)))}i=Object.keys(e);for(let h=0;h<i.length;++h){if(i[h][0]==="+")continue;let f=e[i[h]];if(AOe(f)&&!(i[h]==="_id"&&i.length>1)&&!(i[h]===r.options.discriminatorKey&&i.length>1&&f!=null&&!f)){s=!f;break}}for(let h of d){let f=r.path(h);!f?.selected||s!==!1?(e[h]=0,s=!0):f?.selected&&s===!1&&o.add(h)}}let a=[],u=[],c=[];switch(l(r),s){case!0:for(let d of u)e[d]=0;break;case!1:r?.paths._id?.options?.select===!1&&(e._id=0);for(let d of a)o.has(d)||COe(e,d)||(e[d]=e[d]||1);break;case void 0:if(e==null)break;for(let d of Object.keys(e||{}))d.startsWith("+")&&delete e[d];for(let d of u)e[d]==null&&(e[d]=0);break}function l(d,h){if(h||(h=""),c.indexOf(d)!==-1)return[];c.push(d);let f=[];return d.eachPath(function(y,g){if(h&&(y=h+"."+y),g.$isSchemaMap||y.endsWith(".$*")){let w="+"+y,O=e&&w in e;g.options?.select===!1&&!O&&u.push(y);return}let _=p(y,g);if(_==null&&!Array.isArray(g)&&g.$isMongooseArray&&!g.$isMongooseDocumentArray&&(_=p(y,g.embeddedSchemaType)),_!=null&&f.push(_),g.schema){let w=l(g.schema,y);s===!1&&wOe(e,y,g.schema,a,w)}}),c.pop(),f}function p(d,h){if(e==null||typeof h.selected!="boolean")return;if(h.selected===!1&&e[d]){n&&(e[d]=0);return}if(!s&&h.selected&&d===r.options.discriminatorKey&&e[d]!=null&&!e[d]){delete e[d];return}if(s===!1&&h.selected&&e[d]!=null&&!e[d]){delete e[d];return}let f="+"+d;if(e&&f in e){delete e[f],s===!1&&i.length>1&&!~i.indexOf(d)&&!n?e[d]=1:s==null&&n&&h.selected===!1&&(e[d]=0);return}let g=d.split("."),_="";for(let w=0;w<g.length;++w)if(_+=_.length?"."+g[w]:g[w],u.indexOf(_)!==-1)return;if(!s&&h?.options?.$skipDiscriminatorCheck){let w="";for(let O=0;O<g.length;++O){w+=(w.length===0?"":".")+g[O];let E=HW(e,w,!1)||HW(e,w+".$",!1);if(E&&typeof E!="object")return}}return(h.selected?a:u).push(d),d}};function vOe(t){return function(e){e.options||(e.options={}),Array.isArray(t?.virtuals)&&(t=Object.assign({},t),t.virtuals=t.virtuals.filter(r=>typeof r=="string"&&r.startsWith(e.path+".")).map(r=>r.slice(e.path.length+1))),e.options.lean=t}}});var ix=m((GFe,GW)=>{"use strict";function xOe(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}GW.exports=xOe});var YW=m((JFe,JW)=>{"use strict";JW.exports=function(e,r,n){let s=r[0],i=n,o=e;for(let a=0;a<r.length-1;++a){let u=i.path(s);if(u?.schema){let c=o.get(s);if(i=u.schema,s=r[a+1],Array.isArray(c)&&!isNaN(s)&&(c=c[s],s=""),c==null)break;o=c}else s+=s.length?"."+r[a+1]:r[a+1]}return o}});var H_=m((YFe,ZW)=>{"use strict";var Fo=Zi(),TOe=bi().internalToObjectOptions,QW=require("util"),XW=ae();ZW.exports=rt;function rt(t,e,r,n){if(r!=null){let s={isNew:r.isNew};"defaults"in r.$__&&(s.defaults=r.$__.defaults),n=Object.assign(s,n)}n?.path!=null&&(this.$basePath=n.path),Fo.call(this,t,e,n),delete this.$__.priorDoc}rt.prototype=Object.create(Fo.prototype);Object.defineProperty(rt.prototype,"$isSubdocument",{configurable:!1,writable:!1,value:!0});Object.defineProperty(rt.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!0});rt.prototype.toBSON=function(){return this.toObject(TOe)};rt.prototype.save=async function(e){return e=e||{},e.suppressWarning||XW.warn("mongoose: calling `save()` on a subdoc does **not** save the document to MongoDB, it only runs save middleware. Use `subdoc.save({ suppressWarning: true })` to hide this warning if you're sure this behavior is right for your app."),await this.$__save()};rt.prototype.$__fullPath=function(t){return this.$__.fullPath||this.ownerDocument(),t?this.$__.fullPath+"."+t:this.$__.fullPath};rt.prototype.$__pathRelativeToParent=function(t){return t==null?this.$basePath:this.$basePath?[this.$basePath,t].join("."):t};rt.prototype.$__save=async function(){try{await this._execDocumentPreHooks("save")}catch(e){await this._execDocumentPostHooks("save",e);return}await this._execDocumentPostHooks("save")};rt.prototype.$isValid=function(t){let e=this.$parent(),r=this.$__pathRelativeToParent(t);return e!=null&&r!=null?e.$isValid(r):Fo.prototype.$isValid.call(this,t)};rt.prototype.markModified=function(t){Fo.prototype.markModified.call(this,t);let e=this.$parent(),r=this.$__pathRelativeToParent(t);if(e==null||r==null)return;let n=this.$__pathRelativeToParent().replace(/\.$/,"");e.isDirectModified(n)||this.isNew||this.$__parent.markModified(r,this)};rt.prototype.isModified=function(t,e,r){let n=this.$parent();return n!=null?(Array.isArray(t)||typeof t=="string"?(t=Array.isArray(t)?t:t.split(" "),t=t.map(s=>this.$__pathRelativeToParent(s)).filter(s=>s!=null)):t||(t=this.$__pathRelativeToParent()),n.$isModified(t,e,r)):Fo.prototype.isModified.call(this,t,e,r)};rt.prototype.$markValid=function(t){Fo.prototype.$markValid.call(this,t);let e=this.$parent(),r=this.$__pathRelativeToParent(t);e!=null&&r!=null&&e.$markValid(r)};rt.prototype.invalidate=function(t,e,r){Fo.prototype.invalidate.call(this,t,e,r);let n=this.$parent(),s=this.$__pathRelativeToParent(t);if(n!=null&&s!=null)n.invalidate(s,e,r);else if(e.kind==="cast"||e.name==="CastError"||s==null)throw e;return this.ownerDocument().$__.validationError};rt.prototype.$ignore=function(t){Fo.prototype.$ignore.call(this,t);let e=this.$parent(),r=this.$__pathRelativeToParent(t);e!=null&&r!=null&&e.$ignore(r)};rt.prototype.ownerDocument=function(){if(this.$__.ownerDocument)return this.$__.ownerDocument;let t=this,e=[],r=new Set([t]);for(;typeof t.$__pathRelativeToParent=="function";){e.unshift(t.$__pathRelativeToParent(void 0,!0));let n=t.$parent();if(n==null)break;if(t=n,r.has(t))throw new Error("Infinite subdocument loop: subdoc with _id "+t._id+" is a parent of itself");r.add(t)}return this.$__.fullPath=e.join("."),this.$__.ownerDocument=t,this.$__.ownerDocument};rt.prototype.$__fullPathWithIndexes=function(){let t=this,e=[],r=new Set([t]);for(;typeof t.$__pathRelativeToParent=="function";){e.unshift(t.$__pathRelativeToParent(void 0,!1));let n=t.$parent();if(n==null)break;if(t=n,r.has(t))throw new Error("Infinite subdocument loop: subdoc with _id "+t._id+" is a parent of itself");r.add(t)}return e.join(".")};rt.prototype.parent=function(){return this.$__parent};rt.prototype.$parent=rt.prototype.parent;rt.prototype.$__setParent=function(e){this.$__parent=e};rt.prototype.$__removeFromParent=function(){this.$__parent.set(this.$basePath,null)};rt.prototype.deleteOne=function(e){if(DOe(this),!e?.noop){this.$__removeFromParent();let r=this.ownerDocument();r.$__.removedSubdocs=r.$__.removedSubdocs||[],r.$__.removedSubdocs.push(this)}};rt.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.nested.populate("path")`, use `doc.populate("nested.path")`')};rt.prototype.inspect=function(){return this.toObject()};QW.inspect.custom&&(rt.prototype[QW.inspect.custom]=rt.prototype.inspect);rt.prototype.$toObject=function(e,r){let n=Fo.prototype.$toObject.call(this,e,r);if(!(XW.hasOwnKeys(n)===!1&&e?._calledWithOptions!=null&&(e._calledWithOptions?.minimize??this?.$__schemaTypeOptions?.minimize??e.minimize)&&!this.constructor.$__required))return n};function DOe(t){let e=t.ownerDocument();function r(){e.$removeListener("save",r),e.$removeListener("deleteOne",r),t.emit("deleteOne",t),t.constructor.emit("deleteOne",t)}e.$on("save",r),e.$on("deleteOne",r)}});var Jp=m((QFe,rz)=>{"use strict";var ez=require("events").EventEmitter,tz=H_(),MOe=ae(),Gp=te().documentArrayParent;function Sn(t,e,r,n,s){MOe.isMongooseDocumentArray(e)?(this.__parentArray=e,this[Gp]=e.$parent()):(this.__parentArray=void 0,this[Gp]=void 0),this.$setIndex(s),this.$__parent=this[Gp];let i;typeof r=="object"&&r!=null?(i={isNew:!0,...r},r=void 0):i={isNew:!0},tz.call(this,t,n,this[Gp],i)}Sn.prototype=Object.create(tz.prototype);Sn.prototype.constructor=Sn;Object.defineProperty(Sn.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!1});Object.defineProperty(Sn.prototype,"$isDocumentArrayElement",{configurable:!1,writable:!1,value:!0});for(let t in ez.prototype)Sn[t]=ez.prototype[t];Sn.prototype.$setIndex=function(t){if(this.__index=t,this.$__?.validationError!=null){let e=Object.keys(this.$__.validationError.errors);for(let r of e)this.invalidate(r,this.$__.validationError.errors[r])}};Sn.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.arr[0].populate("path")`, use `doc.populate("arr.0.path")`')};Sn.prototype.$__removeFromParent=function(){let t=this._doc._id;if(!t)throw new Error("For your own good, Mongoose does not know how to remove an ArraySubdocument that has no _id");this.__parentArray.pull({_id:t})};Sn.prototype.$__fullPath=function(t,e){return this.__index==null?null:(this.$__.fullPath||this.ownerDocument(),e?t?this.$__.fullPath+"."+t:this.$__.fullPath:t?this.$__.fullPath+"."+this.__index+"."+t:this.$__.fullPath+"."+this.__index)};Sn.prototype.$__pathRelativeToParent=function(t,e){return this.__index==null||!this.__parentArray?.$path?null:e?t==null?this.__parentArray.$path():this.__parentArray.$path()+"."+t:t==null?this.__parentArray.$path()+"."+this.__index:this.__parentArray.$path()+"."+this.__index+"."+t};Sn.prototype.$parent=function(){return this[Gp]};Sn.prototype.$__setParent=function(e){this[Gp]=e};Sn.prototype.parentArray=function(){return this.__parentArray};rz.exports=Sn});var Y_=m((XFe,lz)=>{"use strict";var ux=Zi(),ox=Jp(),POe=we(),nz=j_(),BOe=vt(),sz=bi().internalToObjectOptions,az=fs(),Ar=ae(),ax=$r(),IOe=te().arrayAtomicsBackupSymbol,Si=te().arrayAtomicsSymbol,tu=te().arrayParentSymbol,ru=te().arrayPathSymbol,$o=te().arraySchemaSymbol,uz=te().populateModelSymbol,NOe=Symbol("mongoose#Array#sliced"),iz=Array.prototype.push;var J_={$__getAtomics(){let t=[],e=Object.keys(this[Si]||{}),r=e.length,n=Object.assign({},sz,{_isNested:!0});if(r===0)return t[0]=["$set",this.toObject(n)],t;for(;r--;){let s=e[r],i=this[Si][s];Ar.isMongooseObject(i)?i=i.toObject(n):Array.isArray(i)?i=this.toObject.call(i,n):Array.isArray(i?.$each)?i.$each=this.toObject.call(i.$each,n):typeof i?.valueOf=="function"&&(i=i.valueOf()),s==="$addToSet"&&(i={$each:i}),t.push([s,i])}return t},getAtomics(){return this.$__getAtomics()},clearAtomics(){this[IOe]=this[Si],this[Si]={}},$atomics(){return this[Si]},$parent(){return this[tu]},$path(){return this[ru]},$schemaType(){return this[$o]},$shift(){this._registerAtomic("$pop",-1),this._markModified();let t=this.__array;if(!t._shifted)return t._shifted=!0,[].shift.call(t)},$pop(){if(this._registerAtomic("$pop",1),this._markModified(),!this._popped)return this._popped=!0,[].pop.call(this)},$schema(){return this[$o]},_cast(t){let e=!1,r,n=this[tu];if(n&&(e=n.$populated(this[ru],!0)),e&&t!=null){if(r=e.options[uz],r==null)throw new POe("No populated model found for path `"+this[ru]+"`. This is likely a bug in Mongoose, please report an issue on github.com/Automattic/mongoose.");return(Buffer.isBuffer(t)||ax(t,"ObjectId")||!Ar.isObject(t))&&(t={_id:t}),t.schema?.discriminatorMapping?.key!==void 0||(t=new r(t)),this[$o].embeddedSchemaType.applySetters(t,n,!0)}return this[$o].embeddedSchemaType.applySetters(t,n,!1)},_mapCast(t,e){return this._cast(t,this.length+e)},_markModified(t){let e=this[tu],r;if(e){if(r=this[ru],arguments.length&&(r=r+"."+t),r!=null&&r.endsWith(".$"))return this;e.markModified(r,arguments.length!==0?t:e)}return this},_registerAtomic(t,e){if(this[NOe])return;if(t==="$set")return this[Si]={$set:e},nz(this[tu],this[ru]),this._markModified(),this;let r=this[Si];if(t==="$pop"&&!("$pop"in r)){let s=this;this[tu].once("save",function(){s._popped=s._shifted=null})}if(r.$set||Ar.hasOwnKeys(r)&&!(t in r))return this[Si]={$set:this},this;let n;if(t==="$pullAll"||t==="$addToSet")r[t]||(r[t]=[]),r[t]=r[t].concat(e);else if(t==="$pullDocs"){let s=r.$pull||(r.$pull={});e[0]instanceof ox?(n=s.$or||(s.$or=[]),Array.prototype.push.apply(n,e.map(i=>i.toObject({transform:(o,a)=>(i==null||i.$__==null||Object.keys(i.$__.activePaths.getStatePaths("default")).forEach(u=>{az.unset(u,a),cz(a,u)}),a),virtuals:!1})))):(n=s._id||(s._id={$in:[]}),n.$in=n.$in.concat(e))}else if(t==="$push")if(r.$push=r.$push||{$each:[]},e!=null&&Ar.hasUserDefinedProperty(e,"$each"))r.$push=e;else if(e.length===1)r.$push.$each.push(e[0]);else if(e.length<1e4)r.$push.$each.push(...e);else for(let s of e)r.$push.$each.push(s);else r[t]=e;return this},addToSet(){G_(this,arguments),oz(this,arguments);let t=[].map.call(arguments,this._mapCast,this),e=[],r="";t[0]instanceof ox?r="doc":t[0]instanceof Date?r="date":ax(t[0],"ObjectId")&&(r="ObjectId");let n=Ar.isMongooseArray(t)?t.__array:t,s=Ar.isMongooseArray(this)?this.__array:this;return n.forEach(function(i){let o,a=+i;switch(r){case"doc":o=this.some(function(u){return u.equals(i)});break;case"date":o=this.some(function(u){return+u===a});break;case"ObjectId":o=this.find(u=>u.toString()===i.toString());break;default:o=~this.indexOf(i);break}o||(this._markModified(),s.push(i),this._registerAtomic("$addToSet",i),[].push.call(e,i))},this),e},hasAtomics(){return Ar.isPOJO(this[Si])?Object.keys(this[Si]).length:0},includes(t,e){return this.indexOf(t,e)!==-1},indexOf(t,e){ax(t,"ObjectId")&&(t=t.toString()),e=e??0;let r=this.length;for(let n=e;n<r;++n)if(t==this[n])return n;return-1},inspect(){return JSON.stringify(this)},nonAtomicPush(){let t=[].map.call(arguments,this._mapCast,this);this._markModified();let e=[].push.apply(this,t);return this._registerAtomic("$set",this),e},pop(){this._markModified();let t=[].pop.call(this);return this._registerAtomic("$set",this),t},pull(){let t=[].map.call(arguments,(s,i)=>this._cast(s,i,{defaults:!1}),this),e=this;Ar.isMongooseArray(e)&&(e=e.__array);let r=e.length,n;for(this._markModified();r--;)n=e[r],n instanceof ux?t.some(function(i){return n.equals(i)})&&e.splice(r,1):~this.indexOf.call(t,n)&&e.splice(r,1);return t[0]instanceof ox?this._registerAtomic("$pullDocs",t.map(function(s){let i=s.$__getValue("_id");return i===void 0||s.$isDefault("_id")?s:i})):this._registerAtomic("$pullAll",t),nz(this[tu],this[ru])>0&&this._registerAtomic("$set",this),this},push(){let t=arguments,e=t,r=t[0]!=null&&Ar.hasUserDefinedProperty(t[0],"$each"),n=Ar.isMongooseArray(this)?this.__array:this;if(r&&(e=t[0],t=t[0].$each),this[$o]==null)return iz.apply(this,t);G_(this,t),oz(this,t),t=[].map.call(t,this._mapCast,this);let s,i=this[Si];return this._markModified(),r?(e.$each=t,(i.$push&&i.$push.$each&&i.$push.$each.length||0)!==0&&i.$push.$position!=e.$position?(e.$position!=null?([].splice.apply(n,[e.$position,0].concat(t)),s=n.length):s=[].push.apply(n,t),this._registerAtomic("$set",this)):e.$position!=null?([].splice.apply(n,[e.$position,0].concat(t)),s=this.length):s=[].push.apply(n,t)):(e=t,s=iz.apply(n,t)),this._registerAtomic("$push",e),s},remove(){return this.pull.apply(this,arguments)},set(t,e,r){let n=this.__array;if(r)return n[t]=e,this;let s=J_._cast.call(this,e,t);return J_._markModified.call(this,t),n[t]=s,this},shift(){let t=Ar.isMongooseArray(this)?this.__array:this;this._markModified();let e=[].shift.call(t);return this._registerAtomic("$set",this),e},sort(){let t=Ar.isMongooseArray(this)?this.__array:this,e=[].sort.apply(t,arguments);return this._registerAtomic("$set",this),e},splice(){let t,e=Ar.isMongooseArray(this)?this.__array:this;if(this._markModified(),G_(this,Array.prototype.slice.call(arguments,2)),arguments.length){let r;if(this[$o]==null)r=arguments;else{r=[];for(let n=0;n<arguments.length;++n)r[n]=n<2?arguments[n]:this._cast(arguments[n],arguments[0]+(n-2))}t=[].splice.apply(e,r),this._registerAtomic("$set",this)}return t},toBSON(){return this.toObject(sz)},toObject(t){let e=Ar.isMongooseArray(this)?this.__array:this;return t?.depopulate?(t=BOe(t),t._isNested=!0,[].concat(e).map(function(r){return r instanceof ux?r.toObject(t):r})):[].concat(e)},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},unshift(){G_(this,arguments);let t;this[$o]==null?t=arguments:t=[].map.call(arguments,this._cast,this);let e=Ar.isMongooseArray(this)?this.__array:this;return this._markModified(),[].unshift.apply(e,t),this._registerAtomic("$set",this),this.length}};function kOe(t,e){if(!e)return!1;for(let r of t){if(r==null)return!1;let n=r.constructor;if(!(r instanceof ux)||n.modelName!==e&&n.baseModelName!==e)return!1}return!0}function cz(t,e,r){if(typeof e=="string"){if(e.indexOf(".")===-1)return;e=az.stringToParts(e)}r=r||0,!(r>=e.length)&&(t==null||typeof t!="object"||(cz(t[e[0]],e,r+1),t[e[0]]!=null&&typeof t[e[0]]=="object"&&Ar.hasOwnKeys(t[e[0]])===!1&&delete t[e[0]]))}function G_(t,e){let r=t==null?null:t[$o]?.embeddedSchemaType?.options?.ref||null;t.length===0&&e.length!==0&&kOe(e,r)&&t[tu].$populated(t[ru],[],{[uz]:e[0].constructor})}function oz(t,e){let r=t==null?null:t[$o]?.embeddedSchemaType?.options?.ref||null,n=t[tu],s=t[ru];if(!(!r||!n.populated(s))){for(let i of e)if(i!=null&&(typeof i!="object"||i instanceof String||i instanceof Number||i instanceof Buffer||Ar.isMongooseType(i))){n.depopulate(s);break}}}var ROe=["filter","flat","flatMap","map","slice"];for(let t of ROe)Array.prototype[t]!=null&&(J_[t]=function(){let e=Ar.isMongooseArray(this)?this.__array:this,r=[].concat(e);return r[t].apply(r,arguments)});lz.exports=J_});var lx=m((mz,yz)=>{"use strict";var cx=Y_(),Q_=te().arrayAtomicsSymbol,FOe=te().arrayAtomicsBackupSymbol,pz=te().arrayParentSymbol,$Oe=te().arrayPathSymbol,dz=te().arraySchemaSymbol,hz=Array.prototype.push,fz=/^\d+$/;function qOe(t,e,r,n){let s;if(Array.isArray(t)){let a=t.length;if(a===0)s=new Array;else if(a===1)s=new Array(1),s[0]=t[0];else if(a<1e4)s=new Array,hz.apply(s,t);else{s=new Array;for(let u=0;u<a;++u)hz.call(s,t[u])}}else s=[];let i={[Q_]:{},[FOe]:void 0,[$Oe]:e,[dz]:n,[pz]:void 0,isMongooseArray:!0,isMongooseArrayProxy:!0,__array:s};t&&t[Q_]!=null&&(i[Q_]=t[Q_]),r?.$__&&(i[pz]=r,i[dz]=n||r.schema.path(e));let o=new Proxy(s,{get:function(a,u){return Object.hasOwn(i,u)?i[u]:Object.hasOwn(cx,u)?cx[u]:n?.virtuals&&Object.hasOwn(n.virtuals,u)?n.virtuals[u].applyGetters(void 0,a):typeof u=="string"&&fz.test(u)&&n?.embeddedSchemaType!=null?n.embeddedSchemaType.applyGetters(s[u],r):s[u]},set:function(a,u,c){return typeof u=="string"&&fz.test(u)?cx.set.call(o,u,c,!1):Object.hasOwn(i,u)?i[u]=c:n?.virtuals&&Object.hasOwn(n.virtuals,u)?n.virtuals[u].applySetters(c,a):s[u]=c,!0}});return o}yz.exports=mz=qOe});var bz=m((ZFe,Ez)=>{"use strict";var X_=Y_(),jOe=Zi(),gz=Us(),LOe=bi().internalToObjectOptions,bc=ae(),UOe=$r(),eE=te().arrayParentSymbol,px=te().arrayPathSymbol,qh=te().arraySchemaSymbol,_z=te().documentArrayParent,VOe=Array.prototype.toString,dx={toBSON(){return this.toObject(LOe)},toString(){return VOe.call(this.__array.map(t=>t?.$__!=null?t.toString():t))},getArrayParent(){return this[eE]},$schemaType(){return this[qh]},_cast(t,e,r){if(this[qh]==null)return t;let n=this[qh].Constructor;if((n.$isMongooseDocumentArray?bc.isMongooseDocumentArray(t):t instanceof n)||t?.constructor?.baseCasterConstructor===n)return t[_z]&&t.__parentArray||(t[_z]=this[eE],t.__parentArray=this),t.$setIndex(e),t;if(t==null)return null;if((Buffer.isBuffer(t)||UOe(t,"ObjectId")||!bc.isObject(t))&&(t={_id:t}),t&&n.discriminators&&n.schema&&n.schema.options&&n.schema.options.discriminatorKey)if(typeof t[n.schema.options.discriminatorKey]=="string"&&n.discriminators[t[n.schema.options.discriminatorKey]])n=n.discriminators[t[n.schema.options.discriminatorKey]];else{let o=gz(n.discriminators,t[n.schema.options.discriminatorKey]);o&&(n=o)}if(n.$isMongooseDocumentArray)return n.cast(t,this,void 0,void 0,e);let i=new n(t,this,r,void 0,e);return i.isNew=!0,i},id(t){if(t==null)return null;let e=this[qh],r=null;e?.schema?r=e.schema.path("_id"):e?.casterConstructor?.schema&&(r=e.casterConstructor.schema.path("_id"));let n=null;if(r)try{n=r.cast(t)}catch{}let s;for(let i of this)if(i&&(s=i.get("_id"),s!=null))if(s instanceof jOe){if(s=s.get("_id"),n!=null&&bc.deepEqual(n,s))return i;if(n==null&&(t==s||bc.deepEqual(t,s)))return i}else{if(n!=null&&bc.deepEqual(n,s))return i;if(n==null&&(s==t||bc.deepEqual(t,s)))return i}return null},toObject(t){return[].concat(this.map(function(e){return e==null?null:typeof e.toObject!="function"?e:e.toObject(t)}))},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},push(){let t=X_.push.apply(this,arguments);return Z_(this),t},pull(){let t=X_.pull.apply(this,arguments);return Z_(this),t},shift(){let t=X_.shift.apply(this,arguments);return Z_(this),t},splice(){let t=X_.splice.apply(this,arguments);return Z_(this),t},inspect(){return this.toObject()},create(t){let e=this[qh].Constructor;if(t&&e.discriminators&&e.schema&&e.schema.options&&e.schema.options.discriminatorKey)if(typeof t[e.schema.options.discriminatorKey]=="string"&&e.discriminators[t[e.schema.options.discriminatorKey]])e=e.discriminators[t[e.schema.options.discriminatorKey]];else{let r=gz(e.discriminators,t[e.schema.options.discriminatorKey]);r&&(e=r)}return new e(t,this)},notify(t){let e=this;return function r(n,s){s=s||e;let i=s.length;for(;i--;)s[i]!=null&&(t==="save"&&(n=e[i]),bc.isMongooseArray(s[i])?r(n,s[i]):s[i]&&s[i].emit(t,n))}},set(t,e,r){let n=this.__array;if(r)return n[t]=e,this;let s=dx._cast.call(this,e,t);return dx._markModified.call(this,t),n[t]=s,this},_markModified(t,e){let r=this[eE],n;if(r){if(n=this[px],arguments.length)if(e!=null){let s=t.__index;n=n+"."+s+"."+e}else n=n+"."+t;if(n!=null&&n.endsWith(".$"))return this;r.markModified(n,arguments.length!==0?t:r)}return this}};Ez.exports=dx;function Z_(t){let e=t[eE];if(!e||e.$__.populated==null)return;let r=Object.keys(e.$__.populated).filter(n=>n.startsWith(t[px]+"."));for(let n of r){let s=n.slice((t[px]+".").length);Array.isArray(e.$__.populated[n].value)&&(e.$__.populated[n].value=t.map(i=>i.$populated(s)))}}});var Sc=m((e$e,Sz)=>{"use strict";var wz=Y_(),hx=bz(),fx=te().arrayAtomicsSymbol,WOe=te().arrayAtomicsBackupSymbol,mx=te().arrayParentSymbol,yx=te().arrayPathSymbol,wc=te().arraySchemaSymbol,zOe=Array.prototype.push,KOe=/^\d+$/;function HOe(t,e,r,n){let s=[],i={[fx]:{},[WOe]:void 0,[yx]:e,[wc]:void 0,[mx]:void 0};if(Array.isArray(t)&&(t[yx]===e&&t[mx]===r&&(i[fx]=Object.assign({},t[fx])),t.forEach(a=>{zOe.call(s,a)})),i[yx]=e,i.__array=s,r?.$__)for(i[mx]=r,i[wc]=r.$__schema.path(e);i[wc]!=null&&i[wc].$isMongooseArray&&!i[wc].$isMongooseDocumentArray;)i[wc]=i[wc].embeddedSchemaType;let o=new Proxy(s,{get:function(a,u){return u==="isMongooseArray"||u==="isMongooseArrayProxy"||u==="isMongooseDocumentArray"||u==="isMongooseDocumentArrayProxy"?!0:Object.hasOwn(i,u)?i[u]:Object.hasOwn(hx,u)?hx[u]:n?.virtuals&&Object.hasOwn(n.virtuals,u)?n.virtuals[u].applyGetters(void 0,a):Object.hasOwn(wz,u)?wz[u]:s[u]},set:function(a,u,c){return typeof u=="string"&&KOe.test(u)?hx.set.call(o,u,c,!1):Object.hasOwn(i,u)?i[u]=c:n?.virtuals&&Object.hasOwn(n.virtuals,u)?n.virtuals[u].applySetters(c,a):s[u]=c,!0}});return o}Sz.exports=HOe});var Zi=m((jz,Lz)=>{"use strict";var GOe=U8(),_x=require("events").EventEmitter,JOe=JV(),YOe=B_(),jn=ds(),Az=_c(),QOe=rW(),Mz=k_(),Sx=F_(),XOe=oW(),ZOe=Oc(),Ex=eu(),iE=yc(),Pz=R8(),Bz=J8(),bx=q_(),tE=j_(),Ai=vt(),e4e=U_().compile,t4e=U_().defineKey,r4e=_W(),n4e=V_().flatten,gx=DW(),Oz=PW(),s4e=IW(),i4e=z_(),Cz=$r(),Iz=Kp(),o4e=Hp(),vz=tx(),wx=require("util").inspect,Nz=bi().internalToObjectOptions,a4e=rx(),u4e=nx(),c4e=fs(),Ax=sx(),l4e=$h(),ue=ae(),p4e=ix(),nE=ue.deepEqual,d4e=ue.isMongooseObject,Lh=te().arrayAtomicsBackupSymbol,Ln=te().arrayAtomicsSymbol,h4e=te().documentArrayParent,f4e=te().documentIsModified,kz=te().documentModifiedPaths,m4e=te().documentSchemaSymbol,y4e=te().getSymbol,g4e=te().modelSymbol,xz=te().populateModelSymbol,_4e=te().scopeSymbol,E4e=gc().schemaMixedSymbol,b4e=YW(),rE=te().sessionNewDocuments,sE,Tz,jh,Rz=ue.specialProperties,Yp=1,Ac=2,eo=Yp|Ac;function F(t,e,r){if(typeof r=="boolean")throw new Error("The skipId parameter has been removed. Use { skipId: true } in the options parameter instead.");r=Object.assign({},r);let n=r.skipId;if(this.$__=new JOe,this.$__schema==null){let c=ue.isObject(e)&&!e.instanceOfSchema?new ZOe(e):e;this.$__setSchema(c),e=r,n=r.skipId}if(r.isNew!=null&&r.isNew!==!0&&(this.$isNew=r.isNew),r.priorDoc!=null&&(this.$__.priorDoc=r.priorDoc),n&&(this.$__.skipId=n),t!=null&&typeof t!="object")throw new Sx(t,"obj","Document");let s=!0;r.defaults!==void 0&&(this.$__.defaults=r.defaults,s=r.defaults);let i=this.$__schema;typeof e=="boolean"||e==="throw"?(e!==!0&&(this.$__.strictMode=e),e=void 0):i.options.strict!==!0&&(this.$__.strictMode=i.options.strict);let o=i.requiredPaths(!0);for(let c of o)this.$__.activePaths.require(c);let a=null;ue.isPOJO(e)&&ue.hasOwnKeys(e)&&(a=o4e(e),this.$__.selected=e,this.$__.exclude=a);let u=a===!1&&e?Bz(e):null;if(this._doc==null&&(this.$__buildDoc(t,e,n,a,u,!1),s&&bx(this,e,a,u,!0,null,{skipParentChangeTracking:!0})),t&&(this.$__original_set?this.$__original_set(t,void 0,!0,r):this.$set(t,void 0,!0,r),t instanceof F&&(this.$isNew=t.$isNew)),r.willInit&&s?r.skipDefaults&&(this.$__.skipDefaults=r.skipDefaults):s&&bx(this,e,a,u,!1,r.skipDefaults),!this.$__.strictMode&&t){let c=this;Object.keys(this._doc).forEach(function(p){!(p in i.tree)&&!(p in i.methods)&&!(p in i.virtuals)&&!p.startsWith("$")&&t4e({prop:p,subprops:null,prototype:c})})}D4e(this)}F.prototype.$isMongooseDocumentPrototype=!0;Object.defineProperty(F.prototype,"isNew",{get:function(){return this.$isNew},set:function(t){this.$isNew=t}});Object.defineProperty(F.prototype,"errors",{get:function(){return this.$errors},set:function(t){this.$errors=t}});F.prototype.$isNew=!0;ue.each(["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"],function(t){F.prototype[t]=function(){if(!this.$__.emitter){if(t==="emit")return;this.$__.emitter=new _x,this.$__.emitter.setMaxListeners(0)}return this.$__.emitter[t].apply(this.$__.emitter,arguments)},F.prototype[`$${t}`]=F.prototype[t]});F.prototype.constructor=F;for(let t in _x.prototype)F[t]=_x.prototype[t];F.prototype.$__schema;F.prototype.schema;Object.defineProperty(F.prototype,"$locals",{configurable:!1,enumerable:!1,get:function(){return this.$__.locals==null&&(this.$__.locals={}),this.$__.locals},set:function(t){this.$__.locals=t}});F.prototype.isNew;Object.defineProperty(F.prototype,"$where",{configurable:!1,enumerable:!1,writable:!0});F.prototype.id;F.prototype.$errors;Object.defineProperty(F.prototype,"$op",{get:function(){return this.$__.op||null},set:function(t){this.$__.op=t}});function w4e(t,e,r){if(t==null)return;let n=Object.keys(r.$__schema.paths),s=n.length,i=e.indexOf(".")===-1?[e]:e.split(".");for(let o=0;o<s;++o){let a="",u=n[o];if(!u.startsWith(e+"."))continue;let c=r.$__schema.paths[u],l=c.splitPath().slice(i.length),p=l.length;if(c.defaultValue===void 0)continue;let d=t;for(let h=0;h<p&&d!=null;++h){let f=l[h];if(h===p-1){if(d[f]!==void 0)break;try{let y=c.getDefault(r,!1);y!==void 0&&(d[f]=y)}catch(y){r.invalidate(e+"."+a,y);break}break}a+=(a.length?".":"")+f,d[f]=d[f]||{},d=d[f]}}}F.prototype.$__buildDoc=function(t,e,r,n,s){let i={},o=Object.keys(this.$__schema.paths).filter(c=>!c.includes("$*")),a=o.length,u=0;for(;u<a;++u){let c=o[u];if(c==="_id"&&(r||t&&"_id"in t))continue;let l=this.$__schema.paths[c].splitPath(),p=l.length,d=p-1,h="",f=i,y=!1;for(let g=0;g<p;++g){let _=l[g];if(h.length?h+="."+_:h=_,n===!0){if(h in e)break}else if(n===!1&&e&&!y){if(h in e)y=!0;else if(!s[h])break}g<d&&(f=f[_]||(f[_]={}))}}this._doc=i};F.prototype.toBSON=function(){return this.toObject(Nz)};F.prototype.init=function(t,e,r){if(typeof e=="function"&&(r=e,e=null),t==null)throw new Sx(t,"doc","init");return this.$__init(t,e),r&&r(null,this),this};F.prototype.$init=function(){return this.constructor.prototype.init.apply(this,arguments)};F.prototype.$__init=function(t,e){if(t==null)throw new Sx(t,"doc","init");if(this.$isNew=!1,e=e||{},t._id!=null&&e.populated&&e.populated.length){let n=String(t._id);for(let s of e.populated)if(s.isVirtual?this.$populated(s.path,ue.getValue(s.path,t),s):this.$populated(s.path,s._docs[n],s),s._childDocs!=null){for(let i of s._childDocs)i?.$__!=null&&(i.$__.parent=this);s._childDocs=[]}}Fz(this,t,this._doc,e),a4e(this,e.populated),this.$emit("init",this),this.constructor.emit("init",this);let r=this.$__.exclude===!1&&this.$__.selected?Bz(this.$__.selected):null;return bx(this,this.$__.selected,this.$__.exclude,r,!1,this.$__.skipDefaults),this};function Fz(t,e,r,n,s){if(s=s||"",typeof e!="object"||Array.isArray(e))throw new Mz(t.$basePath,e);e.$__!=null&&(e=e._doc);let i=Object.keys(e),o=i.length,a,u,c,l=t.$__.strictMode,p=t.$__schema;for(let d=0;d<o;++d){if(c=i[d],Rz.has(c)||(u=s?s+c:c,a=p.path(u),p.$isRootDiscriminator&&!t.$__isSelected(u)))continue;let h=e[c];if(!a&&ue.isPOJO(h))r[c]||(r[c]={},(!l&&!(c in p.tree)&&!(c in p.methods)&&!(c in p.virtuals)||n?.virtuals&&c in p.virtuals)&&(t[c]=r[c])),Fz(t,h,r[c],n,u+".");else if(!a)r[c]=h,(!l&&!s||n?.virtuals&&c in p.virtuals)&&(t[c]=h);else{if(Object.hasOwn(r,c)&&h!==void 0&&!n.hydratedPopulatedDocs&&delete r[c],h===null)r[c]=a._castNullish(null);else if(h!==void 0){let f=h.$__==null?null:h.$__.wasPopulated;if(a&&!f&&!n.hydratedPopulatedDocs)try{n?.setters?r[c]=a.applySetters(h,t,!1,null,n):r[c]=a.cast(h,t,!0,void 0,n)}catch(y){t.invalidate(y.path,new Pz({path:y.path,message:y.message,type:"cast",value:y.value,reason:y}))}else a&&n.hydratedPopulatedDocs?(r[c]=a.cast(h,t,!0,void 0,{hydratedPopulatedDocs:!0}),r[c]?.$__?.wasPopulated?t.$populated(u,r[c].$__.wasPopulated.value,r[c].$__.wasPopulated.options):Array.isArray(r[c])&&r[c].length&&r[c][0]?.$__?.wasPopulated&&t.$populated(u,r[c].map(y=>y?.$__?.wasPopulated?.value).filter(y=>y!=null),r[c][0].$__.wasPopulated.options)):r[c]=h}t.$isModified(u)||t.$__.activePaths.init(u)}}}F.prototype.updateOne=function(e,r){let n=this.constructor.updateOne(),s=this;return n.pre(async function(){let o=await s._execDocumentPreHooks("updateOne",s,e,r);if(o[0]!==s||o[1]!==e||o[2]!==r)throw new Error("Document updateOne pre hooks cannot overwrite arguments");return n.updateOne({_id:s._doc._id},e,r),s.$where!=null&&this.where(s.$where),s.$session()!=null&&("session"in n.options||(n.options.session=s.$session())),o}),n.post(function(){return s._execDocumentPostHooks("updateOne")}),n};F.prototype.replaceOne=function(){let e=[...arguments];return e.unshift({_id:this._doc._id}),this.constructor.replaceOne.apply(this.constructor,e)};F.prototype.$session=function(e){if(arguments.length===0)return this.$__.session?.hasEnded?(this.$__.session=null,null):this.$__.session;if(e?.hasEnded)throw new jn("Cannot set a document's session to a session that has ended. Make sure you haven't called `endSession()` on the session you are passing to `$session()`.");if(!(e==null&&this.$__.session==null)){if(this.$__.session=e,!this.$isSubdocument){let r=this.$getAllSubdocs();for(let n of r)n.$session(e)}return e}};F.prototype.$timestamps=function(e){if(arguments.length===0)return this.$__.timestamps!=null?this.$__.timestamps:this.$__schema?this.$__schema.options.timestamps:void 0;let r=this.$timestamps();return e!==r&&(this.$__.timestamps=e),this};F.prototype.overwrite=function(e){let r=new Set(Object.keys(this._doc));for(let s of Object.keys(e))r.add(s);let n=this.$__schema.options;for(let s of r)s!=="_id"&&(n.versionKey&&s===n.versionKey||n.discriminatorKey&&s===n.discriminatorKey||this.$set(s,e[s]));return this};F.prototype.$set=function(e,r,n,s){ue.isPOJO(n)&&(s=n,n=void 0);let i=s?.merge,o=n&&n!==!0,a=n===!0,u,c,l=0,p,d,h,f=s&&"strict"in s,y=f?s.strict:this.$__.strictMode;if(o&&(u=this.$__.adhocPaths||(this.$__.adhocPaths={}),u[e]=this.$__schema.interpretAsType(e,n,this.$__schema.options)),e==null)[e,r]=[r,e];else if(typeof e!="string"){e instanceof F&&(e.$__isNested?e=e.toObject():e=e.$__schema===this.$__schema?Ox(e,{...e._doc}):e._doc),e==null&&([e,r]=[r,e]),h=r?r+".":"",c=Oz(this.$__schema,e);let R=c.length,M=s?._skipMinimizeTopLevel||!1;if(R===0&&M)return delete s._skipMinimizeTopLevel,r&&this.$set(r,{}),this;s=Object.assign({},s,{_skipMinimizeTopLevel:!1});for(let U=0;U<R;++U){d=c[U];let oe=h?h+d:d;p=this.$__schema.pathType(oe);let Q=e[d];if(n===!0&&!h&&Q!=null&&p==="nested"&&this._doc[d]!=null&&delete this._doc[d],ue.isNonBuiltinObject(Q)&&p==="nested"){this.$set(oe,Q,a,s),w4e(this.$get(oe),oe,this);continue}else if(y){if(a&&Q===void 0&&this.$get(oe)!==void 0)continue;if(p==="adhocOrUndefined"&&(p=gx(this,oe,{typeOnly:!0})),p==="real"||p==="virtual")this.$set(oe,Q,a,s);else if(p==="nested"&&Q instanceof F)this.$set(oe,Q.toObject({transform:!1}),a,s);else{if(y==="throw")throw p==="nested"?new Mz(d,Q):new Ex(d);p==="nested"&&Q==null&&this.$set(oe,Q,a,s)}}else this.$set(oe,Q,a,s)}let I={},j=Object.keys(this.$__schema.tree);for(let U=0,oe=j.length;U<oe;++U)(d=j[U])&&Object.hasOwn(this._doc,d)&&(I[d]=void 0);return this._doc=Object.assign(I,this._doc),this}let g=this.$__schema.pathType(e),_=null;if(g==="adhocOrUndefined"&&(_=e.indexOf(".")===-1?[e]:e.split("."),g=gx(this,_,{typeOnly:!0})),g==="adhocOrUndefined"&&!f){_==null&&(_=e.indexOf(".")===-1?[e]:e.split("."));let R=s4e(this.$__schema,_);R!==void 0&&(y=R)}r=i4e(r,!0);let w=(()=>{if(this.$__.priorDoc!=null)return this.$__.priorDoc.$__getValue(e);if(!a)return this.$__getValue(e)})();if(g==="nested"&&r){if(typeof r=="object"&&r!=null){if(r.$__!=null&&(r=r.toObject(Nz)),r==null)return this.invalidate(e,new jn.CastError("Object",r,e)),this;let R=this.$isModified(e),M=this.$__.savedState!=null&&Object.hasOwn(this.$__.savedState,e);if(this.$__.savedState!=null&&!this.$isNew&&!Object.hasOwn(this.$__.savedState,e)){let j=this.$__getValue(e);this.$__.savedState[e]=j;let U=Object.keys(j||{});for(let oe of U)this.$__.savedState[e+"."+oe]=j[oe]}if(!i)this.$__setValue(e,null),tE(this,e);else return this.$set(r,e,a,s);let I=Oz(this.$__schema,r,e);this.$__setValue(e,{});for(let j of I)this.$set(e+"."+j,r[j],a,{...s,_skipMarkModified:!0});return w!=null&&(!R||M)&&ue.deepEqual(M?this.$__.savedState[e]:w,r)?this.unmarkModified(e):this.markModified(e),this}return this.invalidate(e,new jn.CastError("Object",r,e)),this}let O;if(_==null&&(_=e.indexOf(".")===-1?[e]:e.split(".")),typeof this.$__schema.aliases[_[0]]=="string"&&(_[0]=this.$__schema.aliases[_[0]]),g==="adhocOrUndefined"&&y){let R;for(l=0;l<_.length;++l){let M=_.slice(0,l+1).join(".");if(l+1<_.length&&this.$__schema.pathType(M)==="virtual")return c4e.set(e,r,this),this;if(O=this.$__schema.path(M),O!=null){if(O instanceof Az){R=!0;break}else if(O.$isSchemaMap&&O.$__schemaType instanceof Az&&l<_.length-1){R=!0,O=O.$__schemaType;break}}}if(O==null&&(O=gx(this,e)),!R&&!O){if(y==="throw")throw new Ex(e);return this}}else{if(g==="virtual")return O=this.$__schema.virtualpath(e),O.applySetters(r,this),this;O=this.$__path(e)}let E=this._doc,A="";for(l=0;l<_.length-1;++l)E=E instanceof Map?E.get(_[l]):E[_[l]],A+=(A.length!==0?".":"")+_[l],E||(this.$set(A,{}),this.$__isSelected(A)||this.unmarkModified(A),E=this.$__getValue(A));let x;if(_.length<=1)x=e;else{let R=_.length;for(l=0;l<R;++l){let M=_.slice(0,l+1).join(".");if(this.$get(M,null,{getters:!1})===null){x=M;break}}x||(x=e)}if(!O)return this.$__set(x,e,s,a,_,O,r,w),g==="nested"&&r==null&&tE(this,e),this;if((O.$isSingleNested||O.$isMongooseArray)&&x4e(this,e),r!=null&&i&&O.$isSingleNested){r instanceof F&&(r=r.toObject({virtuals:!1,transform:!1}));let R=Object.keys(r);for(let M of R)this.$set(e+"."+M,r[M],a,s);return this}let v=!0;try{let R=(()=>{if(O.options==null||!(r instanceof F))return!1;let U=r.constructor,oe=typeof O.options.ref=="function"&&!O.options.ref[g4e]?O.options.ref.call(this,this):O.options.ref,Q=oe?.modelName||oe;if(Q!=null&&(Q===U.modelName||Q===U.baseModelName))return!0;let un=O.options.refPath;if(un==null)return!1;let Vr=r.get(un);return Vr===U.modelName||Vr===U.baseModelName})(),M=!1;if(R&&r instanceof F&&(!r.$__.wasPopulated||ue.deepEqual(r.$__.wasPopulated.value,r._doc._id))){let U=O?.$isSingleNested?O.cast(r,this):r._doc._id;this.$populated(e,U,{[xz]:r.constructor}),r.$__.wasPopulated={value:U},M=!0}let I,j=this.$__schema.options.typeKey;if(O.options&&Array.isArray(O.options[j])&&O.options[j].length&&O.options[j][0]&&O.options[j][0].ref&&S4e(r,O.options[j][0].ref)){I={[xz]:r[0].constructor},this.$populated(e,r.map(function(U){return U._doc._id}),I);for(let U of r)U.$__.wasPopulated={value:U._doc._id};M=!0}if(!R||!O.$isSingleNested||!r.$__){let U=this;this.$__schema.singleNestedPaths[e]!=null&&_.length>1&&(U=b4e(this,_,this.schema)),s?.overwriteImmutable?r=O.applySetters(r,U,!1,w,{path:e,overwriteImmutable:!0}):r=O.applySetters(r,U,!1,w,{path:e})}if(Array.isArray(r)&&!Array.isArray(O)&&O.$isMongooseDocumentArray&&r.length!==0&&r[0]?.$__?.populated!=null){let U=Object.keys(r[0].$__.populated);for(let oe of U)this.$populated(e+"."+oe,r.map(Q=>Q.$populated(oe)),r[0].$__.populated[oe].options);M=!0}if(!M&&this.$__.populated){if(Array.isArray(r)&&this.$__.populated[e])for(let U=0;U<r.length;++U)r[U]instanceof F&&r.set(U,r[U]._doc._id,!0);delete this.$__.populated[e]}r!=null&&O.$isSingleNested&&T4e(r,O,w),this.$markValid(e)}catch(R){R instanceof jn.StrictModeError&&R.isImmutableError?this.invalidate(e,R):R instanceof jn.CastError?(this.invalidate(R.path,R),R.$originalErrorPath&&this.invalidate(e,new jn.CastError(O.instance,r,e,R.$originalErrorPath))):this.invalidate(e,new jn.CastError(O.instance,r,e,R)),v=!1}if(v){let R=null,M=null;if(!a){let U=this.$isSubdocument?this.ownerDocument():this;R=U.$__.savedState,M=this.$isSubdocument?this.$__.fullPath+"."+e:e,U.$__saveInitialState(M)}this.$__set(x,e,s,a,_,O,r,w);let I=!!this.$__.session?.transaction,j=this.$__.session&&this.$__.session[rE]&&this.$__.session[rE].has(this)&&this.$__.session[rE].get(this).modifiedPaths&&!this.$__.session[rE].get(this).modifiedPaths.has(M);R!=null&&Object.hasOwn(R,M)&&(!I||j)&&ue.deepEqual(r,R[M])&&this.unmarkModified(e)}return O.$isSingleNested&&(this.isDirectModified(e)||r==null)?tE(this,e):O.$isSchemaMap&&r==null&&tE(this,e),this};function S4e(t,e){if(!Array.isArray(t)||t.length===0)return!1;for(let r of t)if(!(r instanceof F)||r.constructor.modelName==null||r.constructor.modelName!=e&&r.constructor.baseModelName!=e)return!1;return!0}F.prototype.set=F.prototype.$set;F.prototype.$__shouldModify=function(t,e,r,n,s,i,o,a){return r?._skipMarkModified?!1:this.$isNew||e in this.$__.activePaths.getStatePaths("modify")||o===void 0&&!this.$__isSelected(e)?!0:o===void 0&&e in this.$__.activePaths.getStatePaths("default")||this.$populated(e)&&o instanceof F&&nE(o._doc._id,a)?!1:!!(!nE(o,a!==void 0?a:ue.getValue(e,this))||!n&&o!==null&&o!==void 0&&e in this.$__.activePaths.getStatePaths("default")&&nE(o,i.getDefault(this,n)))};F.prototype.$__set=function(t,e,r,n,s,i,o,a){jh=jh||Jp();let u=this.$__shouldModify(t,e,r,n,s,i,o,a);u?(this.$__.primitiveAtomics?.[e]&&(delete this.$__.primitiveAtomics[e],ue.hasOwnKeys(this.$__.primitiveAtomics)===!1&&delete this.$__.primitiveAtomics),this.markModified(t),Tz||(Tz=lx()),o&&ue.isMongooseArray(o)&&(o._registerAtomic("$set",o),ue.isMongooseDocumentArray(o)&&o.forEach(function(h){h&&h.__parentArray&&(h.__parentArray=o)}))):Array.isArray(o)&&Array.isArray(a)&&ue.isMongooseArray(o)&&ue.isMongooseArray(a)&&(o[Ln]=a[Ln],o[Lh]=a[Lh],ue.isMongooseDocumentArray(o)&&o.forEach(h=>{h!=null&&(h.$isNew=!1)}));let c=this._doc,l=0,p=s.length,d="";for(;l<p;l++){let f=l+1===p;if(d+=d?"."+s[l]:s[l],!Rz.has(s[l]))if(f)c instanceof Map?c.set(s[l],o):c.$isSingleNested?(s[l]in c||(c[s[l]]=o),c._doc[s[l]]=o,u&&c.markModified(s[l])):c[s[l]]=o;else{let y=c instanceof Map,g=y?c.get(s[l]):c[s[l]];ue.isPOJO(g)||g&&g instanceof jh||g&&!Array.isArray(g)&&g.$isSingleNested||g&&Array.isArray(g)||g==null&&(g={},y?c.set(s[l],g):c[s[l]]=g),c=g}}};F.prototype.$__getValue=function(t){if(typeof t!="string"&&!Array.isArray(t))throw new TypeError(`Invalid \`path\`. Must be either string or array. Got "${t}" (type ${typeof t})`);return ue.getValue(t,this._doc)};F.prototype.$inc=function(e,r){if(r==null&&(r=1),Array.isArray(e))return e.forEach(u=>this.$inc(u,r)),this;let n=this.$__path(e);if(n==null){if(this.$__.strictMode==="throw")throw new Ex(e);if(this.$__.strictMode===!0)return this}else if(n.instance!=="Number")return this.invalidate(e,new jn.CastError(n.instance,r,e)),this;let s=this.$__getValue(e)||0,i=!1,o=null,a=r;try{r=n.cast(r),o=n.applySetters(s+r,this),a=o-s,i=!0}catch(u){this.invalidate(e,new jn.CastError("number",r,e,u))}return i&&(this.$__.primitiveAtomics=this.$__.primitiveAtomics||{},this.$__.primitiveAtomics[e]==null?this.$__.primitiveAtomics[e]={$inc:a}:this.$__.primitiveAtomics[e].$inc+=a,this.markModified(e),this.$__setValue(e,o)),this};F.prototype.$__setValue=function(t,e){return ue.setValue(t,e,this._doc),this};F.prototype.get=function(t,e,r){let n;r==null&&(r={}),e&&(n=this.$__schema.interpretAsType(t,e,this.$__schema.options));let s=r.noDottedPath,i=s?this.$__schema.paths[t]:this.$__path(t);if(i==null&&(i=this.$__schema.virtualpath(t),i!=null))return i.applyGetters(void 0,this);if(s){let c=this._doc[t];return n&&(c=n.cast(c)),i!=null&&r.getters!==!1?i.applyGetters(c,this):c}if(i?.instance==="Mixed"){let c=this.$__schema.virtualpath(t);c!=null&&(i=c)}let o=t.indexOf(".")!==-1,a=this._doc,u=o?t.split("."):[t];typeof this.$__schema.aliases[u[0]]=="string"&&(u[0]=this.$__schema.aliases[u[0]]);for(let c=0,l=u.length;c<l;c++)a?._doc&&(a=a._doc),a==null?a=void 0:a instanceof Map?a=a.get(u[c],{getters:!1}):c===l-1?a=ue.getValue(u[c],a):a=a[u[c]];if(n&&(a=n.cast(a)),i!=null&&r.getters!==!1)a=i.applyGetters(a,this);else if(this.$__schema.nested[t]&&r.virtuals)return Ox(this,Ai(a)||{},{path:t});return a};F.prototype[y4e]=F.prototype.get;F.prototype.$get=F.prototype.get;F.prototype.$__path=function(t){let e=this.$__.adhocPaths,r=e&&Object.hasOwn(e,t)?e[t]:null;return r||this.$__schema.path(t)};F.prototype.markModified=function(t,e){this.$__saveInitialState(t),this.$__.activePaths.modify(t),e!=null&&!this.$isSubdocument&&(this.$__.pathsToScopes=this.$__pathsToScopes||{},this.$__.pathsToScopes[t]=e)};F.prototype.$__saveInitialState=function(e){let r=this.$__.savedState,n=e;if(r!=null){let s=n.indexOf("."),i=s===-1?n:n.slice(0,s);Object.hasOwn(r,i)||(r[i]=Ai(this.$__getValue(i)))}};F.prototype.unmarkModified=function(t){this.$__.activePaths.init(t),this.$__.pathsToScopes!=null&&delete this.$__.pathsToScopes[t]};F.prototype.$ignore=function(t){this.$__.activePaths.ignore(t)};F.prototype.directModifiedPaths=function(){return Object.keys(this.$__.activePaths.getStatePaths("modify"))};F.prototype.$isEmpty=function(t){let e={minimize:!0,virtuals:!1,getters:!1,transform:!1};if(arguments.length!==0){let r=this.$get(t);return r==null?!0:typeof r!="object"?!1:ue.isPOJO(r)?$z(r):Object.keys(r.toObject(e)).length===0}return Object.keys(this.toObject(e)).length===0};function $z(t){if(t==null)return!0;if(typeof t!="object"||Array.isArray(t))return!1;for(let e of Object.keys(t))if(!$z(t[e]))return!1;return!0}F.prototype.modifiedPaths=function(t){t=t||{};let e=Object.keys(this.$__.activePaths.getStatePaths("modify")),r=new Set,n=0,s=0,i=e.length;for(n=0;n<i;++n){let o=e[n],a=Ax(o),u=a.length;for(s=0;s<u;++s)r.add(a[s]);if(!t.includeChildren)continue;let c=0,l=this.$get(o);if(typeof l=="object"&&l!==null){l._doc&&(l=l._doc);let p=l.length;if(Array.isArray(l))for(c=0;c<p;++c){let d=o+"."+c;if(!r.has(d)&&(r.add(d),l[c]!=null&&l[c].$__)){let h=l[c].modifiedPaths(),f=0,y=h.length;for(f=0;f<y;++f)r.add(d+"."+h[f])}}else{let d=Object.keys(l),h=0,f=d.length;for(h=0;h<f;++h)r.add(o+"."+d[h])}}}return Array.from(r)};F.prototype[kz]=F.prototype.modifiedPaths;F.prototype.isModified=function(t,e,r){if(t){let n=e?.ignoreAtomics,s=this.$__.activePaths.states.modify;if(s==null)return!1;typeof t=="string"&&(t=t.indexOf(" ")===-1?[t]:t.split(" "));for(let u of t)if(s[u]!=null)return!0;let i=r||this[kz](),o=t.some(function(u){return!!~i.indexOf(u)}),a=Object.keys(s);return n&&(a=a.filter(u=>{let c=this.$__getValue(u);return!(c?.[Ln]!=null&&c[Ln].$set===void 0)})),o||t.some(function(u){return a.some(function(c){return c===u||u.startsWith(c+".")})})}return this.$__.activePaths.some("modify")};F.prototype.$isModified=F.prototype.isModified;F.prototype[f4e]=F.prototype.isModified;F.prototype.$isDefault=function(t){if(t==null)return this.$__.activePaths.some("default");if(typeof t=="string"&&t.indexOf(" ")===-1)return Object.hasOwn(this.$__.activePaths.getStatePaths("default"),t);let e=t;return Array.isArray(e)||(e=e.split(" ")),e.some(r=>Object.hasOwn(this.$__.activePaths.getStatePaths("default"),r))};F.prototype.$isDeleted=function(t){return arguments.length===0?!!this.$__.isDeleted:(this.$__.isDeleted=!!t,this)};F.prototype.isDirectModified=function(t){if(t==null)return this.$__.activePaths.some("modify");if(typeof t=="string"&&t.indexOf(" ")===-1){let r=Object.hasOwn(this.$__.activePaths.getStatePaths("modify"),t);if(r||t.indexOf(".")===-1)return r;let n=t.split(".");for(let s=0;s<n.length-1;++s){let i=n.slice(0,s+1).join("."),o=this.$get(i);if(o?.$__!=null&&o.isDirectModified(n.slice(s+1).join(".")))return!0}return!1}let e=t;return typeof e=="string"&&(e=e.split(" ")),e.some(r=>this.isDirectModified(r))};F.prototype.isInit=function(t){if(t==null)return this.$__.activePaths.some("init");if(typeof t=="string"&&t.indexOf(" ")===-1)return Object.hasOwn(this.$__.activePaths.getStatePaths("init"),t);let e=t;return Array.isArray(e)||(e=e.split(" ")),e.some(r=>Object.hasOwn(this.$__.activePaths.getStatePaths("init"),r))};F.prototype.isSelected=function(e){if(this.$__.selected==null)return!0;if(!e)return!1;if(e==="_id")return this.$__.selected._id!==0;if(e.indexOf(" ")!==-1&&(e=e.split(" ")),Array.isArray(e))return e.some(i=>this.$__isSelected(i));let r=Object.keys(this.$__.selected),n=null;if(r.length===1&&r[0]==="_id")return this.$__.selected._id===0;for(let i of r)if(i!=="_id"&&Iz(this.$__.selected[i])){n=!!this.$__.selected[i];break}if(n===null)return!0;if(e in this.$__.selected)return n;let s=e+".";for(let i of r)if(i!=="_id"){if(i.startsWith(s))return n||i!==s;if(s.startsWith(i+"."))return n}return!n};F.prototype.$__isSelected=F.prototype.isSelected;F.prototype.isDirectSelected=function(e){if(this.$__.selected==null)return!0;if(e==="_id")return this.$__.selected._id!==0;if(e.indexOf(" ")!==-1&&(e=e.split(" ")),Array.isArray(e))return e.some(s=>this.isDirectSelected(s));let r=Object.keys(this.$__.selected),n=null;if(r.length===1&&r[0]==="_id")return this.$__.selected._id===0;for(let s of r)if(s!=="_id"&&Iz(this.$__.selected[s])){n=!!this.$__.selected[s];break}return n===null?!0:Object.hasOwn(this.$__.selected,e)?n:!n};F.prototype.validate=async function(e,r){if(typeof e=="function"||typeof r=="function"||typeof arguments[2]=="function")throw new jn("Document.prototype.validate() no longer accepts a callback");if(this.$op="validate",arguments.length===1&&typeof arguments[0]=="object"&&!Array.isArray(arguments[0])&&(r=arguments[0],e=null),r&&typeof r.pathsToSkip=="string"){let s=r.pathsToSkip.indexOf(" ")===-1;r.pathsToSkip=s?[r.pathsToSkip]:r.pathsToSkip.split(" ")}let n=r?._skipParallelValidateCheck;if(this.$isSubdocument==null){if(this.$__.validating&&!n)throw new XOe(this);n||(this.$__.validating=!0)}try{await this.$__validate(e,r)}finally{this.$op=null,this.$__.validating=null}};F.prototype.$validate=F.prototype.validate;function A4e(t){let e=Object.keys(t.$__.activePaths.getStatePaths("require")),r=0,n=e.length;for(r=0;r<n;++r){let s=e[r],i=t.$__schema.path(s);if(typeof i?.originalRequiredValue=="function"){t.$__.cachedRequired=t.$__.cachedRequired||{};try{t.$__.cachedRequired[s]=i.originalRequiredValue.call(t,t)}catch(o){t.invalidate(s,o)}}}}function qz(t,e,r,n){let s={};A4e(t);let i=new Set(Object.keys(t.$__.activePaths.getStatePaths("require")).filter(function(u){return!t.$__isSelected(u)&&!t.$isModified(u)||u.endsWith(".$*")?!1:t.$__.cachedRequired!=null&&u in t.$__.cachedRequired?t.$__.cachedRequired[u]:!0}));Object.keys(t.$__.activePaths.getStatePaths("init")).forEach(o),Object.keys(t.$__.activePaths.getStatePaths("modify")).forEach(o),Object.keys(t.$__.activePaths.getStatePaths("default")).forEach(o);function o(u){u.endsWith(".$*")||i.add(u)}if(!n){let u=[];for(let l of Object.keys(t.$__schema.paths)){let p=t.$__schema.path(l);if(p.$isSingleNested){let d=t.$get(l);d&&u.push(d)}else if(p.$isMongooseDocumentArray){let d=t.$get(l);if(d?.length)for(let h of d)h&&u.push(h)}}let c=t.modifiedPaths();for(let l of u)if(l.$basePath){let p=l.$__pathRelativeToParent();for(let h of l.modifiedPaths())i.delete(p+"."+h);let d=l.$parent();if(d==null)throw new Error("Cannot validate subdocument that does not have a parent");t.$isModified(p,null,c)&&!Object.hasOwn(d.$__.activePaths.getStatePaths("modify"),p)&&!d.$isDefault(p)&&(i.add(p),t.$__.pathsToScopes==null&&(t.$__.pathsToScopes={}),t.$__.pathsToScopes[p]=l.$isDocumentArrayElement?l.__parentArray:l.$parent(),s[p]={skipSchemaValidators:!0},l.$isDocumentArrayElement&&l.__index!=null&&(s[p].index=l.__index))}}for(let u of i){let c=t.$__schema.path(u);if(c){if(c.$isMongooseDocumentArray)for(let l of i)(l==null||l.startsWith(c.path+"."))&&i.delete(l);(!c.schema&&!c.embeddedSchemaType&&c.validators.length===0&&!c.$parentSchemaDocArray&&!c.$isSchemaMap||c.$isMongooseArray&&!c.$isMongooseDocumentArray&&!c.embeddedSchemaType.$isMongooseArray&&c.validators.length===0&&c.embeddedSchemaType.validators.length===0)&&i.delete(u)}}Array.isArray(e)?i=C4e(i,e):Array.isArray(r)&&(i=v4e(i,r)),O4e(t,i);let a={skipArrays:!0};for(let u of i)if(t.$__schema.nested[u]){let c=t.$__getValue(u);d4e(c)&&(c=c.toObject({transform:!1}));let l=n4e(c,u,a,t.$__schema),p=t.$__schema.singleNestedPaths;for(let d of Object.keys(l))Object.hasOwn(p,d)||o(d)}for(let u of i){let c=t.$__schema.path(u);if(!c||(c.$parentSchemaDocArray&&typeof c.$parentSchemaDocArray.path=="string"&&i.add(c.$parentSchemaDocArray.path),!c.$isSchemaMap))continue;let l=t.$__getValue(u);if(l!=null)for(let p of l.keys())i.add(u+"."+p)}return i=Array.from(i),[i,s]}function O4e(t,e){for(let r of e){let n=t.$__schema.path(r);if(!n||!n.$isMongooseArray||!Array.isArray(n)&&n.$isMongooseDocumentArray&&!n?.schemaOptions?.required||n.$isMongooseArray&&!n.$isMongooseDocumentArray&&!n.embeddedSchemaType.$isMongooseArray&&n.embeddedSchemaType.validators.length===0)continue;let s=t.$__getValue(r);oE(s,e,r)}}function oE(t,e,r){if(t!=null){let n=t.length;for(let s=0;s<n;++s)Array.isArray(t[s])?oE(t[s],e,r+"."+s):e.add(r+"."+s)}}F.prototype._execDocumentPreHooks=async function(e,...r){return this.$__middleware.execPre(e,this,[...r])};F.prototype._execDocumentPostHooks=async function(e,r){return this.$__middleware.execPost(e,this,[this],{error:r})};F.prototype.$__validate=async function(e,r){try{[r]=await this._execDocumentPreHooks("validate",r)}catch(g){await this._execDocumentPostHooks("validate",g);return}this.$__.saveOptions&&this.$__.saveOptions.pathsToSave&&!e&&(e=[...this.$__.saveOptions.pathsToSave]);let n=r&&typeof r=="object"&&"validateModifiedOnly"in r,s=r?.pathsToSkip||null,i;n?i=!!r.validateModifiedOnly:i=this.$__schema.options.validateModifiedOnly;let o=r?.validateAllPaths;if(o){if(s)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(e)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`");if(n&&i)throw new TypeError("Cannot set both `validateAllPaths` and `validateModifiedOnly`")}let a=this,u=()=>{let g=this.$__.validationError;if(this.$__.validationError=null,this.$__.validating=null,i&&g!=null){let _=Object.keys(g.errors);for(let w of _)this.$isModified(w)||delete g.errors[w];ue.hasOwnKeys(g.errors)===!1&&(g=void 0)}if(this.$__.cachedRequired={},this.$emit("validate",a),this.constructor.emit("validate",a),g){for(let _ in g.errors)!this[h4e]&&g.errors[_]instanceof jn.CastError&&this.invalidate(_,g.errors[_]);return g}},c,l;if(o){c=new Set(Object.keys(this.$__schema.paths));for(let g of c){if(!this.$__schema.path(g)?.$isMongooseArray)continue;let w=this.$__getValue(g);w&&oE(w,c,g)}c=[...c],l={}}else{let g=qz(this,e,s,r?._nestedValidate);c=i?g[0].filter(_=>this.$isModified(_)):g[0],l=g[1]}if(typeof e=="string"&&(e=e.split(" ")),c.length===0){let g=u();await this._execDocumentPostHooks("validate",g);return}let p={},d=this.$__.saveOptions?.pathsToSave,h=[];if(Array.isArray(d)){d=new Set(d);for(let g of c)d.has(g)&&h.push(y(g))}else for(let g of c)h.push(y(g));await Promise.all(h);let f=u();await this._execDocumentPostHooks("validate",f);async function y(g){if(g==null||p[g])return;p[g]=!0;let _=a.$__schema.path(g);if(!_||!a.$isValid(g)||_[E4e]!=null&&g!==_.path)return;let w=a.$__getValue(g),O;(O=a.$populated(g))?w=O:w?.$__?.wasPopulated&&(w=w._doc._id);let E=a.$__.pathsToScopes!=null&&g in a.$__.pathsToScopes?a.$__.pathsToScopes[g]:a,A={...l[g],path:g,validateAllPaths:o,_nestedValidate:!0};try{await _.doValidate(w,E,A)}catch(x){if((_.$isSingleNested||_.$isArraySubdocument||_.$isMongooseDocumentArray)&&x instanceof iE)return;a.invalidate(g,x,void 0,!0)}}};function C4e(t,e){let r=new Set(e),n=new Map([]);for(let i of e){if(i.indexOf(".")===-1)continue;let o=i.split("."),a=o[0];for(let u=1;u<o.length;++u)n.set(a,i),a=a+"."+o[u]}let s=new Set;for(let i of t)r.has(i)?s.add(i):n.has(i)&&s.add(n.get(i));return s}function v4e(t,e){return e=new Set(e),t=Array.from(t).filter(r=>!e.has(r)),new Set(t)}F.prototype.validateSync=function(t,e){let r=this;arguments.length===1&&typeof arguments[0]=="object"&&!Array.isArray(arguments[0])&&(e=arguments[0],t=null);let n=e&&typeof e=="object"&&"validateModifiedOnly"in e,s;n?s=!!e.validateModifiedOnly:s=this.$__schema.options.validateModifiedOnly;let i=e?.pathsToSkip,o=e?.validateAllPaths;if(o){if(i)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(t)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`")}typeof t=="string"?t=t.indexOf(" ")===-1?[t]:t.split(" "):typeof i=="string"&&i.indexOf(" ")!==-1&&(i=i.split(" "));let a,u;if(o){a=new Set(Object.keys(this.$__schema.paths));for(let p of a){if(!this.$__schema.path(p)?.$isMongooseArray)continue;let h=this.$__getValue(p);h&&oE(h,a,p)}a=[...a],u={}}else{let p=qz(this,t,i);a=s?p[0].filter(d=>this.$isModified(d)):p[0],u=p[1]}let c={};for(let p=0,d=a.length;p<d;++p){let h=a[p];if(c[h])continue;c[h]=!0;let f=r.$__schema.path(h);if(!f||!r.$isValid(h))continue;let y=r.$__getValue(h),g=f.doValidateSync(y,r,{skipSchemaValidators:u[h],path:h,validateModifiedOnly:s,validateAllPaths:o});if(g){if((f.$isSingleNested||f.$isArraySubdocument||f.$isMongooseDocumentArray)&&g instanceof iE)continue;r.invalidate(h,g,void 0,!0)}}let l=r.$__.validationError;if(r.$__.validationError=void 0,r.$emit("validate",r),r.constructor.emit("validate",r),l)for(let p in l.errors)l.errors[p]instanceof jn.CastError&&r.invalidate(p,l.errors[p]);return l};F.prototype.invalidate=function(t,e,r,n){if(this.$__.validationError||(this.$__.validationError=new iE(this)),!this.$__.validationError.errors[t])return(!e||typeof e=="string")&&(e=new Pz({path:t,message:e,type:n||"user defined",value:r})),this.$__.validationError===e?this.$__.validationError:(this.$__.validationError.addError(t,e),this.$__.validationError)};F.prototype.$markValid=function(t){this.$__.validationError?.errors[t]&&(delete this.$__.validationError.errors[t],ue.hasOwnKeys(this.$__.validationError.errors)===!1&&(this.$__.validationError=null))};function x4e(t,e){if(!t.$__.validationError)return;let r=Object.keys(t.$__.validationError.errors);for(let n of r)n.startsWith(e+".")&&delete t.$__.validationError.errors[n];ue.hasOwnKeys(t.$__.validationError.errors)===!1&&(t.$__.validationError=null)}function T4e(t,e,r){let n=e.schema;if(n!=null)for(let s of Object.keys(n.paths)){let i=n.paths[s];if(i.$immutableSetter==null)continue;let o=r?.$__getValue(s);i.$immutableSetter.call(t,o)}}F.prototype.$isValid=function(t){return this.$__.validationError==null||ue.hasOwnKeys(this.$__.validationError.errors)===!1?!0:t==null?!1:(t.indexOf(" ")!==-1&&(t=t.split(" ")),Array.isArray(t)?t.some(e=>this.$__.validationError.errors[e]==null):this.$__.validationError.errors[t]==null)};F.prototype.$__reset=function(){let e=this,r=this.$isSubdocument?null:this.$getAllSubdocs({useCache:!0});if(r?.length>0)for(let n of r)n.$__reset();return this.$__dirty().forEach(function(n){let s=n.value;s&&typeof s.clearAtomics=="function"?s.clearAtomics():s&&s[Ln]&&(s[Lh]=s[Ln],s[Ln]={})}),this.$__.backup={},this.$__.backup.activePaths={modify:Object.assign({},this.$__.activePaths.getStatePaths("modify")),default:Object.assign({},this.$__.activePaths.getStatePaths("default"))},this.$__.backup.validationError=this.$__.validationError,this.$__.backup.errors=this.$errors,this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("default"),this.$__.validationError=void 0,this.$errors=void 0,e=this,this.$__schema.requiredPaths().forEach(function(n){e.$__.activePaths.require(n)}),this};F.prototype.$__undoReset=function(){if(this.$__.backup?.activePaths!=null){this.$__.activePaths.states.modify=this.$__.backup.activePaths.modify,this.$__.activePaths.states.default=this.$__.backup.activePaths.default,this.$__.validationError=this.$__.backup.validationError,this.$errors=this.$__.backup.errors;for(let e of this.$__dirty()){let r=e.value;r?.[Ln]&&r[Lh]&&(r[Ln]=r[Lh])}if(!this.$isSubdocument)for(let e of this.$getAllSubdocs())e.$__undoReset()}};F.prototype.$__dirty=function(){let t=this,e=this.$__.activePaths.map("modify",function(s){return{path:s,value:t.$__getValue(s),schema:t.$__path(s)}});e=e.concat(this.$__.activePaths.map("default",function(s){if(!(s==="_id"||t.$__getValue(s)==null))return{path:s,value:t.$__getValue(s),schema:t.$__path(s)}}));let r=new Map(e.filter(s=>s!=null).map(s=>[s.path,s.value])),n=[];return e.forEach(function(s){if(!s)return;let i=null,o=Ax(s.path);for(let a=0;a<o.length-1;a++)if(r.has(o[a])){i=r.get(o[a]);break}i==null?n.push(s):i!=null&&i[Ln]!=null&&i.hasAtomics()&&(i[Ln]={},i[Ln].$set=i)}),n};F.prototype.$__setSchema=function(t){e4e(t.tree,this,void 0,t.options);for(let e of Object.keys(t.virtuals))t.virtuals[e]._applyDefaultGetters();t.path("schema")==null&&(this.schema=t),this.$__schema=t,this.$__middleware=t._getDocumentMiddleware(),this[m4e]=t};F.prototype.$__getArrayPathsToValidate=function(){return sE||(sE=Sc()),this.$__.activePaths.map("init","modify",function(t){return this.$__getValue(t)}.bind(this)).filter(function(t){return t&&Array.isArray(t)&&ue.isMongooseDocumentArray(t)&&t.length}).reduce(function(t,e){return t.concat(e)},[]).filter(function(t){return t})};F.prototype.$getAllSubdocs=function(t){if(t?.useCache&&this.$__.saveOptions?.__subdocs)return this.$__.saveOptions.__subdocs;sE||(sE=Sc()),jh=jh||Jp();let e=[];function r(n){let s=[];for(let{model:i}of n.$__schema.childSchemas){let o=n.$__getValue(i.path);if(o!=null){if(o.$__&&s.push(o),Array.isArray(o))for(let a of o)a?.$__&&s.push(a);if(o instanceof Map)for(let a of o.values())a?.$__&&s.push(a)}}for(let i of s)r(i);e.push(...s)}return r(this),this.$__.saveOptions&&(this.$__.saveOptions.__subdocs=e),e};function D4e(t){let e=t.$__schema&&t.$__schema.callQueue;if(e.length)for(let r of e)r[0]!=="pre"&&r[0]!=="post"&&r[0]!=="on"&&t[r[0]].apply(t,r[1])}F.prototype.$__handleReject=function(e){this.$listeners("error").length?this.$emit("error",e):this.constructor.listeners?.("error").length&&this.constructor.emit("error",e)};F.prototype.$toObject=function(t,e){let r=this.$__schema._defaultToObjectOptions(e),n=this.$__hasOnlyPrimitiveValues();t=ue.isPOJO(t)?{...t}:{},t._calledWithOptions=t._calledWithOptions||{...t};let s;t._calledWithOptions.minimize!=null?s=t.minimize:this.$__schemaTypeOptions?.minimize!=null?s=this.$__schemaTypeOptions.minimize:r?.minimize!=null?s=r.minimize:s=this.$__schema.options.minimize,t.minimize=s,n||(t._seen=t._seen||new Map);let i=t._calledWithOptions.depopulate??r?.depopulate??t.depopulate??!1;if(i&&t._isNested&&this.$__.wasPopulated)return Ai(this.$__.wasPopulated.value||this._doc._id,t);if(i&&(t.depopulate=!0),r!=null)for(let h of Object.keys(r))t[h]==null&&(t[h]=r[h]);t._isNested=!0,t.json=e,t.minimize=s;let o=t._parentOptions;t._parentOptions=this.$isSubdocument?t:null;let a=t._calledWithOptions.schemaFieldsOnly??t.schemaFieldsOnly??r.schemaFieldsOnly??!1,u;if(n&&!t.flattenObjectIds)u=this.$__toObjectShallow(a);else if(a){u={};for(let h of Object.keys(this.$__schema.paths)){let f=this.$__getValue(h);if(f===void 0)continue;let y=h,g=u;if(h.indexOf(".")!==-1){let _=h.split(".");y=_[_.length-1];for(let w=0;w<_.length-1;++w)g[_[w]]=g[_[w]]??{},g=g[_[w]]}if(f===null){g[y]=null;continue}g[y]=Ai(f,t)}}else u=Ai(this._doc,t)||{};let c=t._calledWithOptions.getters??t.getters??r.getters??!1;c&&(M4e(this,u),t.minimize&&(u=u4e(u)||{}));let l=t._calledWithOptions.virtuals??r.virtuals??o?.virtuals??void 0;(l||c&&l!==!1)&&Ox(this,u,t,t),t.versionKey===!1&&this.$__schema.options.versionKey&&delete u[this.$__schema.options.versionKey];let p=t._calledWithOptions.transform??!0,d;if(p===!0?d=r.transform:typeof p=="function"&&(d=p),p&&P4e(this,u),t.useProjection&&B4e(this,u),typeof d=="function"){let h=d(this,u,t);typeof h<"u"&&(u=h)}return u};F.prototype.$__toObjectShallow=function(e){let r={};if(this._doc!=null){let n=Object.keys(e?this.$__schema.paths:this._doc);for(let s of n){let i=this._doc[s];i instanceof Date?r[s]=new Date(i):i!==void 0&&(r[s]=i)}}return r};F.prototype.toObject=function(t){return this.$toObject(t)};function Ox(t,e,r,n){let s=t.$__schema,i=s.virtuals,o=Object.keys(i),a=o.length,u=a,c,l,p=t._doc,d,h=typeof n?.aliases=="boolean"?n.aliases:!0;r=r||{};let f=null;if(Array.isArray(r.virtuals))f=new Set(r.virtuals);else if(r.virtuals?.pathsToSkip){f=new Set(o);for(let y=0;y<r.virtuals.pathsToSkip.length;y++)f.has(r.virtuals.pathsToSkip[y])&&f.delete(r.virtuals.pathsToSkip[y])}if(!p)return e;for(a=0;a<u;++a){if(c=o[a],f!=null&&!f.has(c)||!h&&Object.hasOwn(s.aliases,c))continue;if(l=c,r.path!=null){if(!c.startsWith(r.path+"."))continue;l=c.substring(r.path.length+1)}if(l.indexOf(".")===-1&&l===c){if(d=i[c].applyGetters(void 0,t),d===void 0)continue;d=Ai(d,r),e[l]=d;continue}let y=l.split(".");if(d=Ai(t.get(c),r),d===void 0)continue;let g=y.length;p=e;for(let _=0;_<g-1;++_)p[y[_]]=p[y[_]]||{},p=p[y[_]];p[y[g-1]]=d}return e}function M4e(t,e){let r=t.$__schema,n=Object.keys(r.paths),s=n.length,i,o=t._doc,a;if(!o)return e;for(;s--;){i=n[s];let u=i.split("."),c=u.length,l=c-1,p=e,d;if(o=t._doc,!!t.$__isSelected(i))for(let h=0;h<c&&(d=u[h],a=o[d],!(p!=null&&typeof p!="object"));++h){if(h===l){if(p[d]=r.paths[i].applyGetters(p[d],t),Array.isArray(p[d])&&r.paths[i].embeddedSchemaType)for(let f=0;f<p[d].length;++f)p[d][f]=r.paths[i].embeddedSchemaType.applyGetters(p[d][f],t)}else if(a==null){d in o&&(p[d]=a);break}else p=p[d]||(p[d]={});o=a}}return e}function P4e(t,e){let r=t.$__schema,n=Object.keys(r.paths||{});if(!t._doc)return e;for(let i of n){let o=r.paths[i],a=o.options.transform??o.constructor?.defaultOptions?.transform,u=o.embeddedSchemaType?.options?.transform??o.embeddedSchemaType?.constructor?.defaultOptions?.transform;if(typeof a=="function"){let c=t.$get(i);if(c===void 0)continue;let l=a.call(t,c);Dz(i,l),ue.setValue(i,l,e)}else if(typeof u=="function"){let c=t.$get(i);if(c===void 0)continue;let l=[].concat(c);for(let p=0;p<l.length;++p){let d=u.call(t,l[p]);l[p]=d,Dz(i,d)}e[i]=l}}return e}function Dz(t,e){if(p4e(e))throw new Error("`transform` function must be synchronous, but the transform on path `"+t+"` returned a promise.")}function B4e(t,e){let r=t.$__schema,n=Object.keys(r.paths||{});if(!t._doc)return e;let i=t.$__.selected;if(i===void 0&&(i={},l4e.applyPaths(i,r)),i==null||ue.hasOwnKeys(i)===!1)return e;for(let o of n)i[o]!=null&&!i[o]&&delete e[o];return e}F.prototype.toJSON=function(t){return this.$toObject(t,!0)};F.prototype.ownerDocument=function(){return this};F.prototype.parent=function(){return this.$isSubdocument||this.$__.wasPopulated?this.$__.parent:this};F.prototype.$parent=F.prototype.parent;F.prototype.$__setParent=function(e){this.$__.parent=e};F.prototype.inspect=function(t){let e=ue.isPOJO(t),r;e&&(r=t,r.minimize=!1);let n=arguments.length>0?this.toObject(r):this.toObject();return n??"MongooseDocument { "+n+" }"};wx.custom&&(F.prototype[wx.custom]=F.prototype.inspect);F.prototype.toString=function(){let t=this.inspect();return typeof t=="string"?t:wx(t)};F.prototype.equals=function(t){if(!t)return!1;let e=this.$__getValue("_id"),r=t.$__!=null?t.$__getValue("_id"):t;return!e&&!r?nE(this,t):e&&e.equals?e.equals(r):e===r};F.prototype.populate=async function(){let e={},r=[...arguments];if(typeof r[r.length-1]=="function")throw new jn("Document.prototype.populate() no longer accepts a callback");if(r.length!==0){let i=ue.populate.apply(null,r);for(let o of i)e[o.path]=o}let n=ue.object.vals(e),s=this.constructor;if(this.$__isNested){s=this.$__[_4e].constructor;let i=this.$__.nestedPath;n.forEach(function(o){o.path=i+"."+o.path})}if(this.$session()!=null){let i=this.$session();n.forEach(o=>{if(o.options==null){o.options={session:i};return}"session"in o.options||(o.options.session=i)})}return n.forEach(i=>{i._localModel=s}),s.populate(this,n)};F.prototype.$getPopulatedDocs=function(){let e=[];this.$__.populated!=null&&(e=e.concat(Object.keys(this.$__.populated)));let r=[];for(let n of e){let s=this.$get(n);Array.isArray(s)?r=r.concat(s):s instanceof F&&r.push(s)}return r};F.prototype.populated=function(t,e,r){if(e==null||e===!0){if(!this.$__.populated||typeof t!="string")return;let s=t.endsWith(".$*")?t.replace(/\.\$\*$/,""):t,i=this.$__.populated[s];return i?e===!0?i:i.value:void 0}this.$__.populated||(this.$__.populated={}),this.$__.populated[t]={value:e,options:r};let n=t.split(".");for(let s=0;s<n.length-1;++s){let i=n.slice(0,s+1).join("."),o=this.$get(i);if(o?.$__!=null&&this.$populated(i)){let a=n.slice(s+1).join(".");o.$populated(a,e,r);break}}return e};F.prototype.$populated=F.prototype.populated;F.prototype.$assertPopulated=function(e,r){if(Array.isArray(e))return e.forEach(n=>this.$assertPopulated(n,r)),this;if(arguments.length>1&&this.$set(r),!this.$populated(e))throw new jn(`Expected path "${e}" to be populated`);return this};F.prototype.depopulate=function(t){typeof t=="string"&&(t=t.indexOf(" ")===-1?[t]:t.split(" "));let e,r=this.$$populatedVirtuals?Object.keys(this.$$populatedVirtuals):[],n=this.$__?.populated||{};if(arguments.length===0){for(let i of r)delete this.$$populatedVirtuals[i],delete this._doc[i],delete n[i];let s=Object.keys(n);for(let i of s)if(e=this.$populated(i),!!e)if(delete n[i],Array.isArray(e)){let o=ue.getValue(i,this._doc);if(o.isMongooseArray){let a=o.__array;for(let u=0;u<a.length;++u){let c=a[u];c!=null&&(a[u]=c instanceof F?c._doc._id:c._id)}}else ue.setValue(i,e,this._doc)}else ue.setValue(i,e,this._doc);return this}for(let s of t)if(e=this.$populated(s),delete n[s],r.indexOf(s)!==-1)delete this.$$populatedVirtuals[s],delete this._doc[s];else if(e)if(Array.isArray(e)){let i=ue.getValue(s,this._doc);if(i.isMongooseArray){let o=i.__array;for(let a=0;a<o.length;++a){let u=o[a];u!=null&&(o[a]=u instanceof F?u._doc._id:u._id)}}else ue.setValue(s,e,this._doc)}else ue.setValue(s,e,this._doc);return this};F.prototype.$__fullPath=function(t){return t||""};F.prototype.getChanges=function(){let t=this.$__delta();return t?t[1]:{}};F.prototype.$__delta=function(){let e=this.$__dirty(),r=this.$__schema.options.optimisticConcurrency;if(r)if(Array.isArray(r)){let u=new Set(r);this.modifiedPaths().some(l=>u.has(l))&&(this.$__.version=e.length?eo:Yp)}else if(Array.isArray(r?.exclude)){let u=new Set(r.exclude);this.modifiedPaths().some(l=>!u.has(l))&&(this.$__.version=e.length?eo:Yp)}else this.$__.version=e.length?eo:Yp;if(!e.length&&eo!==this.$__.version)return;let n={},s={},i=e.length,o=[],a=0;for(n._id=this._doc._id,n?._id?.$__!=null&&(n._id=n._id.toObject({transform:!1,depopulate:!0}));a<i;++a){let u=e[a],c=u.value,l=I4e(this,u.path,c);if(l){o.push(l);continue}if(!this.$populated(u.path,!0)&&this.$__.selected){let d=u.path.split("."),h=d[0];if(this.$__.selected[h]&&this.$__.selected[h].$elemMatch)if(d.length>1&&d[1]==0&&typeof n[h]>"u")n[h]=this.$__.selected[h],d[1]="$",u.path=d.join(".");else{o.push(u.path);continue}}if(!(this.$isDefault(u.path)&&this.$__.selected&&(u.path.indexOf(".")===-1&&vz(this.$__.selected,u.path)||Ax(u.path).find(h=>vz(this.$__.isSelected,h))))&&!o.length)if(c===void 0)qo(this,n,s,u,1,"$unset");else if(c===null)qo(this,n,s,u,null);else if(typeof c.getAtomics=="function")N4e(this,n,s,u,c);else if(c[YOe.pathSymbol]&&Buffer.isBuffer(c))c=c.toObject(),qo(this,n,s,u,c);else if(this.$__.primitiveAtomics?.[u.path]!=null){let d=this.$__.primitiveAtomics[u.path],h=r4e(d);qo(this,n,s,u,d[h],h)}else c=Ai(c,{depopulate:!0,transform:!1,virtuals:!1,getters:!1,omitUndefined:!0,_isNested:!0}),qo(this,n,s,u,c)}if(o.length)throw new GOe(o);return this.$__.version&&this.$__version(n,s),ue.hasOwnKeys(s)===!1?[n,null]:[n,s]};function I4e(t,e,r){let n=t.$populated(e,!0);if(!n&&t.$__.selected){let i=e.split(".")[0];if(t.$__.selected[i+".$"])return i}if(!(n&&ue.isMongooseArray(r)))return;if(n.options.match||n.options.options&&Object.hasOwn(n.options.options,"limit")||n.options.options?.skip||n.options.select&&(n.options.select._id===0||/\s?-_id\s?/.test(n.options.select))){let i=r[Ln];if(ue.hasOwnKeys(i)===!1||i.$set||i.$pop)return e}}function qo(t,e,r,n,s,i){if(i||(i="$set"),r[i]||(r[i]={}),r[i][n.path]=s,t.$__schema.options.versionKey!==!1&&!k4e(t,n.path)&&eo!==(eo&t.$__.version)&&!(t.$__schema.options.optimisticConcurrency===!0||Array.isArray(t.$__schema.options.optimisticConcurrency)||Array.isArray(t.$__schema.options.optimisticConcurrency?.exclude))){switch(i){case"$set":case"$unset":case"$pop":case"$pull":case"$pullAll":case"$push":case"$addToSet":case"$inc":break;default:return}i==="$push"||i==="$addToSet"||i==="$pullAll"||i==="$pull"?/\.\d+\.|\.\d+$/.test(n.path)?t.$__.version=eo:t.$__.version|=Ac:/^\$p/.test(i)||Array.isArray(s)?t.$__.version=eo:/\.\d+\.|\.\d+$/.test(n.path)&&(t.$__.version|=Yp)}}function N4e(t,e,r,n,s){if(r.$set?.[n.path])return;if(typeof s.getAtomics=="function"){s.getAtomics().forEach(function(p){let d=p[0],h=p[1];qo(t,e,r,n,h,d)});return}if(typeof s.$__getAtomics=="function"){s.$__getAtomics().forEach(function(p){let d=p[0],h=p[1];qo(t,e,r,n,h,d)});return}let i=s[Ln],o=Object.keys(i),a=o.length,u,c;if(a===0)return ue.isMongooseObject(s)?s=s.toObject({depopulate:1,_isNested:!0}):s.valueOf&&(s=s.valueOf()),qo(t,e,r,n,s);function l(p){return ue.isMongooseObject(p)?p.toObject({depopulate:1,_isNested:!0}):p}for(;a--;)c=o[a],u=i[c],ue.isMongooseObject(u)?u=u.toObject({depopulate:!0,transform:!1,_isNested:!0}):Array.isArray(u)?u=u.map(l):u.valueOf&&(u=u.valueOf()),c==="$addToSet"&&(u={$each:u}),qo(t,e,r,n,u,c)}function k4e(t,e){let r=t.$__schema.options.skipVersioning;return r?(e=e.replace(/\.\d+\./,"."),r[e]):!1}F.prototype.$clone=function(){let t=this.constructor,e=new t;if(e.$isNew=this.$isNew,this._doc&&(e._doc=Ai(this._doc,{retainDocuments:!0,parentDoc:e})),this.$__){let r=this.$__.constructor,n=new r;for(let s of Object.getOwnPropertyNames(this.$__))s!=="activePaths"&&(n[s]=Ai(this.$__[s]));Object.assign(n.activePaths,Ai({...this.$__.activePaths})),e.$__=n}return e};F.prototype.$createModifiedPathsSnapshot=function(){let e=new WeakMap;if(!this.$isSubdocument){let r=this.$getAllSubdocs();for(let n of r)e.set(n,n.$__.activePaths.clone())}return new QOe(e,this.$__.activePaths.clone(),this.$__.version)};F.prototype.$restoreModifiedPathsSnapshot=function(e){if(this.$__.activePaths=e.activePaths.clone(),this.$__.version=e.version,!this.$isSubdocument){let r=this.$getAllSubdocs();for(let n of r)e.subdocSnapshot.has(n)&&(n.$__.activePaths=e.subdocSnapshot.get(n))}return this};F.prototype.$clearModifiedPaths=function(){if(this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("init"),this.$__.version=0,!this.$isSubdocument){let e=this.$getAllSubdocs();for(let r of e)r.$clearModifiedPaths()}return this};F.prototype.$__hasOnlyPrimitiveValues=function(){return!this.$__.populated&&!this.$__.wasPopulated&&(this._doc==null||Object.values(this._doc).every(e=>e==null||typeof e!="object"||ue.isNativeObject(e)&&!Array.isArray(e)||Cz(e,"ObjectId")||Cz(e,"Decimal128")))};F.prototype._applyVersionIncrement=function(){if(!this.$__.version)return;let e=Ac===(Ac&this.$__.version);if(this.$__.version=void 0,e){let r=this.$__schema.options.versionKey,n=this.$__getValue(r)||0;this.$__setValue(r,n+1)}};F.prototype._applyVersionIncrement=function(){if(!this.$__.version)return;let e=Ac===(Ac&this.$__.version);if(this.$__.version=void 0,e){let r=this.$__schema.options.versionKey,n=this.$__getValue(r)||0;this.$__setValue(r,n+1)}};F.VERSION_WHERE=Yp;F.VERSION_INC=Ac;F.VERSION_ALL=eo;F.ValidationError=iE;Lz.exports=jz=F});var ae=m(Y=>{"use strict";var R4e=pe().UUID,F4e=ew(),Vz=fs(),$4e=Za(),Wz=K8(),vx=vt(),q4e=Da(),j4e=hc(),zz=f_(),Kz=UV(),nu=$r(),L4e=jp(),U4e=w8(),Uh=kh(),V4e=P_(),Vh=dc(),{trustedSymbol:Qp}=Lp(),Cx;Y.specialProperties=Vh;Y.isMongooseArray=zz.isMongooseArray;Y.isMongooseDocumentArray=Kz.isMongooseDocumentArray;Y.registerMongooseArray=zz.registerMongooseArray;Y.registerMongooseDocumentArray=Kz.registerMongooseDocumentArray;var xx=/\s/,Tx=/\s+/;Y.toCollectionName=function(t,e){if(t==="system.profile"||t==="system.indexes")return t;if(typeof e=="function"){if(typeof t!="string")throw new TypeError("Collection name must be a string");if(t.length===0)throw new TypeError("Collection name cannot be empty");return e(t)}return t};Y.deepEqual=function t(e,r){if(e===r)return!0;if(typeof e!="object"||typeof r!="object")return e===r;if(e instanceof Date&&r instanceof Date)return e.getTime()===r.getTime();if(nu(e,"ObjectId")&&nu(r,"ObjectId")||nu(e,"Decimal128")&&nu(r,"Decimal128"))return e.toString()===r.toString();if(e instanceof RegExp&&r instanceof RegExp)return e.source===r.source&&e.ignoreCase===r.ignoreCase&&e.multiline===r.multiline&&e.global===r.global&&e.dotAll===r.dotAll&&e.unicode===r.unicode&&e.sticky===r.sticky&&e.hasIndices===r.hasIndices;if(e==null||r==null||e.prototype!==r.prototype)return!1;if(e instanceof Map||r instanceof Map)return!(e instanceof Map)||!(r instanceof Map)?!1:t(Array.from(e.keys()),Array.from(r.keys()))&&t(Array.from(e.values()),Array.from(r.values()));if(e instanceof Number&&r instanceof Number)return e.valueOf()===r.valueOf();if(Buffer.isBuffer(e))return Y.buffer.areEqual(e,r);if(Array.isArray(e)||Array.isArray(r)){if(!Array.isArray(e)||!Array.isArray(r))return!1;let o=e.length;if(o!==r.length)return!1;for(let a=0;a<o;++a)if(!t(e[a],r[a]))return!1;return!0}e.$__!=null?e=e._doc:Uh(e)&&(e=e.toObject()),r.$__!=null?r=r._doc:Uh(r)&&(r=r.toObject());let n=Object.keys(e),s=Object.keys(r),i=n.length;if(i!==s.length)return!1;for(let o=i-1;o>=0;o--)if(n[o]!==s[o])return!1;for(let o of n)if(!t(e[o],r[o]))return!1;return!0};Y.last=function(t){if(t!=null&&t.length>0)return t[t.length-1]};Y.cloneArrays=function(e){return Array.isArray(e)?e.map(r=>Y.cloneArrays(r)):e};Y.omit=function(e,r){if(r==null)return Object.assign({},e);Array.isArray(r)||(r=[r]);let n=Object.assign({},e);for(let s of r)delete n[s];return n};Y.clonePOJOsAndArrays=function(e){if(e==null||e.$__!=null)return e;if(L4e(e)){e={...e};for(let r of Object.keys(e))e[r]=Y.clonePOJOsAndArrays(e[r]);return e}if(Array.isArray(e)){e=[...e];for(let r=0;r<e.length;++r)e[r]=Y.clonePOJOsAndArrays(e[r]);return e}return e};Y.merge=function t(e,r,n,s){if(n=n||{},r==null)return e;let i=Object.keys(r),o=0,a=i.length,u;r[Qp]&&(e[Qp]=r[Qp]),s=s||"";let c=n.omitNested||{};for(;o<a;)if(u=i[o++],!(n.omit&&n.omit[u])&&!c[s]&&!Vh.has(u))if(e[u]==null)e[u]=Y.clonePOJOsAndArrays(r[u]);else if(Y.isObject(r[u])){if(Y.isObject(e[u])||(e[u]={}),r[u]!=null){if(n.isDiscriminatorSchemaMerge&&r[u].$isSingleNested&&e[u].$isMongooseDocumentArray||r[u].$isMongooseDocumentArray&&e[u].$isSingleNested)continue;if(r[u].instanceOfSchema){e[u].instanceOfSchema?V4e(e[u],r[u].clone(),n.isDiscriminatorSchemaMerge):e[u]=r[u].clone();continue}else if(nu(r[u],"ObjectId")){e[u]=new $4e(r[u]);continue}}t(e[u],r[u],n,s?s+"."+u:u)}else n.overwrite&&(e[u]=r[u]);return e};Y.toObject=function t(e){Cx||(Cx=Zi());let r;if(e==null)return e;if(e instanceof Cx)return e.toObject();if(Array.isArray(e)){r=[];for(let n of e)r.push(t(n));return r}if(Y.isPOJO(e)){r={},e[Qp]&&(r[Qp]=e[Qp]);for(let n of Object.keys(e))Vh.has(n)||(r[n]=t(e[n]));return r}return e};Y.isObject=j4e;Y.isPOJO=jp();Y.isNonBuiltinObject=function(e){return typeof e=="object"&&!Y.isNativeObject(e)&&!Y.isMongooseType(e)&&!(e instanceof R4e)&&e!=null};Y.isNativeObject=function(t){return Array.isArray(t)||t instanceof Date||t instanceof Boolean||t instanceof Number||t instanceof String};Y.isEmptyObject=function(e){return e==null||typeof e!="object"?!1:Y.hasOwnKeys(e)===!1};Y.hasOwnKeys=function(e){for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r))return!0;return!1};Y.hasKey=function(e,r){let n=Object.keys(e);for(let s of n)if(s===r||Y.isPOJO(e[s])&&Y.hasKey(e[s],r))return!0;return!1};Y.tick=function(e){if(typeof e=="function")return function(){try{e.apply(this,arguments)}catch(r){q4e(function(){throw r})}}};Y.isMongooseType=function(t){return nu(t,"ObjectId")||nu(t,"Decimal128")||t instanceof Buffer};Y.isMongooseObject=Uh;Y.expires=function(e){e&&e.constructor.name==="Object"&&"expires"in e&&(e.expireAfterSeconds=typeof e.expires!="string"?e.expires:Math.round(F4e(e.expires)/1e3),delete e.expires)};Y.populate=function(e,r,n,s,i,o,a,u){let c=null;if(arguments.length===1){if(e instanceof Wz)return e._docs={},e._childDocs=[],[e];if(Array.isArray(e))return l(e).map(d=>Y.populate(d)[0]);Y.isObject(e)?c=Object.assign({},e):c={path:e}}else typeof n=="object"?c={path:e,select:r,match:n,options:s}:c={path:e,select:r,model:n,match:s,options:i,populate:o,justOne:a,count:u};if(typeof c.path!="string"&&!(Array.isArray(c.path)&&c.path.every(p=>typeof p=="string")))throw new TypeError("utils.populate: invalid path. Expected string or array of strings. Got typeof `"+typeof e+"`");return W4e(c);function l(p){let d=[];return p.forEach(function(h){xx.test(h.path)?h.path.split(Tx).forEach(function(y){let g=Object.assign({},h);g.path=y,d.push(g)}):d.push(h)}),d}};function W4e(t){if(Array.isArray(t.populate)){let n=[];t.populate.forEach(function(s){if(xx.test(s.path)){let i=Object.assign({},s);i.path.split(Tx).forEach(function(a){i.path=a,n.push(Y.populate(i)[0])})}else n.push(Y.populate(s)[0])}),t.populate=Y.populate(n)}else t.populate!=null&&typeof t.populate=="object"&&(t.populate=Y.populate(t.populate));let e=[],r=xx.test(t.path)?t.path.split(Tx):Array.isArray(t.path)?t.path:[t.path];t.options!=null&&(t.options=vx(t.options));for(let n of r)e.push(new Wz(Object.assign({},t,{path:n})));return e}Y.getValue=function(t,e,r){return Vz.get(t,e,K4e,r)};var z4e=Object.freeze({getters:!1});function K4e(t,e){if(e==="$*"&&t instanceof Map)return t;let r=t?._doc||t;return r?.isMongooseArrayProxy&&(r=r.__array),r instanceof Map?r.get(e,z4e):r[e]}Y.setValue=function(t,e,r,n,s){Vz.set(t,e,r,"_doc",n,s)};Y.object={};Y.object.vals=function(e){if(e==null)return[];let r=Object.keys(e),n=r.length,s=[];for(;n--;)s.push(e[r[n]]);return s};Y.isNullOrUndefined=function(t){return t==null};Y.array={};Y.array.flatten=function t(e,r,n){return n||(n=[]),e.forEach(function(s){Array.isArray(s)?t(s,r,n):(!r||r(s))&&n.push(s)}),n};Y.hasUserDefinedProperty=function(t,e){if(t==null)return!1;if(Array.isArray(e)){for(let r of e)if(Y.hasUserDefinedProperty(t,r))return!0;return!1}if(Object.hasOwn(t,e))return!0;if(typeof t=="object"&&e in t){let r=t[e];return r!==Object.prototype[e]&&r!==Array.prototype[e]}return!1};var Uz=Math.pow(2,32)-1;Y.isArrayIndex=function(t){return typeof t=="number"?t>=0&&t<=Uz:typeof t=="string"&&/^\d+$/.test(t)?(t=+t,t>=0&&t<=Uz):!1};Y.array.unique=function(t){let e=new Set,r=new Set,n=[];for(let s of t)if(typeof s=="number"||typeof s=="string"||s==null){if(e.has(s))continue;n.push(s),e.add(s)}else if(nu(s,"ObjectId")){if(r.has(s.toString()))continue;n.push(s),r.add(s.toString())}else n.push(s);return n};Y.buffer={};Y.buffer.areEqual=function(t,e){return!Buffer.isBuffer(t)||!Buffer.isBuffer(e)?!1:t.equals(e)};Y.getFunctionName=U4e;Y.decorate=function(t,e){for(let r in e)Vh.has(r)||(t[r]=e[r])};Y.mergeClone=function(t,e){Uh(e)&&(e=e.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1}));let r=Object.keys(e),n=r.length,s=0,i;for(;s<n;)if(i=r[s++],!Vh.has(i))if(typeof t[i]>"u")t[i]=vx(e[i],{transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});else{let o=e[i];if(o?.valueOf&&!(o instanceof Date)&&(o=o.valueOf()),Y.isObject(o)){let a=o;Uh(o)&&!o.isMongooseBuffer&&(a=a.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1})),o.isMongooseBuffer&&(a=Buffer.from(a)),Y.mergeClone(t[i],a)}else t[i]=vx(o,{flattenDecimals:!1})}};Y.each=function(t,e){for(let r of t)e(r)};Y.renameObjKey=function(t,e,r){return Object.keys(t).reduce((s,i)=>(i===e?s[r]=t[e]:s[i]=t[i],s),{})};Y.getOption=function(t){let e=Array.prototype.slice.call(arguments,1);for(let r of e)if(r!=null&&r[t]!=null)return r[t];return null};Y.noop=function(){};Y.errorToPOJO=function(e){if(!(e instanceof Error))throw new Error("`error` must be `instanceof Error`.");let n={};for(let s of Object.getOwnPropertyNames(e))n[s]=e[s];return n};Y.warn=function(e){return process.emitWarning(e,{code:"MONGOOSE"})};Y.injectTimestampsOption=function(e,r){r!=null&&(e.timestamps=r)}});var kt=m((uE,Xz)=>{"use strict";var zh=ds(),Qz=qn(),H4e=M_(),G4e=W8(),aE=vt(),Dx=xV(),J4e=DV(),Mx=PV(),Y4e=te().schemaTypeSymbol,Cc=ae(),Wh=te().validatorErrorSymbol,Q4e=te().documentIsModified,Hz=te().populateModelSymbol,Px=zh.CastError,Xp=zh.ValidatorError,X4e={_skipMarkModified:!0};function ye(t,e,r,n){this[Y4e]=!0,this.path=t,this.instance=r,this.schemaName=this.constructor.schemaName,this.validators=[],this.getters=Object.hasOwn(this.constructor,"getters")?this.constructor.getters.slice():[],this.setters=Object.hasOwn(this.constructor,"setters")?this.constructor.setters.slice():[],this.splitPath(),e=e||{};let s=this.constructor.defaultOptions||{},i=Object.keys(s);for(let u of i)u==="validate"?this.validate(s.validate):Object.hasOwn(s,u)&&!Object.hasOwn(e,u)&&(e[u]=s[u]);e.select==null&&delete e.select;let o=this.OptionsConstructor||Qz;this.options=new o(e),this.parentSchema=n,this._index=null,Cc.hasUserDefinedProperty(this.options,"immutable")&&(this.$immutable=this.options.immutable,Dx(this));let a=Object.keys(this.options);for(let u of a){if(u==="cast"){Array.isArray(this.options[u])?this.castFunction.apply(this,this.options[u]):this.castFunction(this.options[u]);continue}if(Cc.hasUserDefinedProperty(this.options,u)&&typeof this[u]=="function"){if(u==="index"&&this._index){if(e.index===!1){let p=this._index;if(typeof p=="object"&&p!=null){if(p.unique)throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true');if(p.sparse)throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}this._index=!1}continue}let c=e[u];if(u==="default"){this.default(c);continue}let l=Array.isArray(c)?c:[c];this[u].apply(this,l)}}Object.defineProperty(this,"$$context",{enumerable:!1,configurable:!1,writable:!0,value:null})}ye.prototype.OptionsConstructor=Qz;ye.prototype.path;ye.prototype.toJSON=function(){let e={...this};return delete e.parentSchema,e};ye.prototype.validators;ye.prototype.isRequired;ye.prototype.splitPath=function(){if(this._presplitPath!=null)return this._presplitPath;if(this.path!=null)return this._presplitPath=this.path.indexOf(".")===-1?[this.path]:this.path.split("."),this._presplitPath};ye.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=r=>r),this._cast=e,this._cast)};ye.prototype.castFunction=function(e,r){return arguments.length===0?this._castFunction:(e===!1&&(e=this.constructor._defaultCaster||(n=>n)),typeof e=="string"?(this._castErrorMessage=e,this._castFunction):(e!=null&&(this._castFunction=e),r!=null&&(this._castErrorMessage=r),this._castFunction))};ye.prototype.cast=function(){throw new Error("Base SchemaType class does not implement a `cast()` function")};ye.set=function(e,r){Object.hasOwn(this,"defaultOptions")||(this.defaultOptions=Object.assign({},this.defaultOptions)),this.defaultOptions[e]=r};ye.get=function(t){this.getters=Object.hasOwn(this,"getters")?this.getters:[],this.getters.push(t)};ye.prototype.default=function(t){if(arguments.length===1){if(t===void 0){this.defaultValue=void 0;return}if(t?.instanceOfSchema)throw new zh("Cannot set default value of path `"+this.path+"` to a mongoose Schema instance.");return this.defaultValue=t,this.defaultValue}else arguments.length>1&&(this.defaultValue=[...arguments]);return this.defaultValue};ye.prototype.index=function(t){return this._index=t,Cc.expires(this._index),this};ye.prototype.unique=function(e,r){if(this._index===!1){if(!e)return;throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true')}return!Object.hasOwn(this.options,"index")&&e===!1?this:(this._index==null||this._index===!0?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.unique=!!e,typeof r=="string"&&(this._duplicateKeyErrorMessage=r),this)};ye.prototype.text=function(t){if(this._index===!1){if(!t)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `text` set to true')}return!Object.hasOwn(this.options,"index")&&t===!1?this:(this._index===null||this._index===void 0||typeof this._index=="boolean"?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.text=t,this)};ye.prototype.sparse=function(t){if(this._index===!1){if(!t)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}return!Object.hasOwn(this.options,"index")&&t===!1?this:(this._index==null||typeof this._index=="boolean"?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.sparse=t,this)};ye.prototype.immutable=function(t){return this.$immutable=t,Dx(this),this};ye.prototype.transform=function(t){return this.options.transform=t,this};ye.prototype.set=function(t){if(typeof t!="function")throw new TypeError("A setter must be a function.");return this.setters.push(t),this};ye.prototype.get=function(t){if(typeof t!="function")throw new TypeError("A getter must be a function.");return this.getters.push(t),this};ye.prototype.validateAll=function(t){for(let e=0;e<t.length;e++)this.validate(t[e]);return this};ye.prototype.validate=function(t,e,r){if(typeof t=="function"||t&&Cc.getFunctionName(t.constructor)==="RegExp"){let o;return typeof e=="function"?(o={validator:t,message:e},o.type=r||"user defined"):e instanceof Object&&!r?(o=Mx(e)?Object.assign({},e):aE(e),o.message||(o.message=o.msg),o.validator=t,o.type=o.type||"user defined"):(e==null&&(e=zh.messages.general.default),r||(r="user defined"),o={message:e,type:r,validator:t}),this.validators.push(o),this}let n,s,i;for(n=0,s=arguments.length;n<s;n++){if(i=arguments[n],!Cc.isPOJO(i)){let o="Invalid validator. Received ("+typeof i+") "+i+". See https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.validate()";throw new Error(o)}this.validate(i.validator,i)}return this};ye.prototype.required=function(t,e){let r={};if(arguments.length>0&&t==null)return this.validators=this.validators.filter(function(i){return i.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;if(typeof t=="object"&&(r=t,e=r.message||e,t=t.isRequired),t===!1)return this.validators=this.validators.filter(function(i){return i.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;let n=this;this.isRequired=!0,this.requiredValidator=function(i){let o=this?.$__?.cachedRequired;if(o!=null&&!this.$__isSelected(n.path)&&!this[Q4e](n.path))return!0;if(o!=null&&n.path in o){let a=o[n.path]?n.checkRequired(i,this):!0;return delete o[n.path],a}else if(typeof t=="function")return t.apply(this)?n.checkRequired(i,this):!0;return n.checkRequired(i,this)},this.originalRequiredValue=t,typeof t=="string"&&(e=t,t=void 0);let s=e||zh.messages.general.required;return this.validators.unshift(Object.assign({},r,{validator:this.requiredValidator,message:s,type:"required"})),this};ye.prototype.ref=function(t){return this.options.ref=t,this};ye.prototype.getDefault=function(t,e,r){let n;if(this.defaultValue==null)return this.defaultValue;if(typeof this.defaultValue=="function"?this.defaultValue===Date.now||this.defaultValue===Array||this.defaultValue.name.toLowerCase()==="objectid"?n=this.defaultValue.call(t):n=this.defaultValue.call(t,t):n=this.defaultValue,n!=null){if(typeof n=="object"&&!this.options?.shared&&(n=aE(n)),r?.skipCast)return this._applySetters(n,t);let s=this.applySetters(n,t,e,void 0,X4e);return s&&!Array.isArray(s)&&s.$isSingleNested&&(s.$__parent=t),s}return n};ye.prototype._applySetters=function(t,e,r,n,s){let i=t;if(r)return i;let o=this.setters;for(let a=o.length-1;a>=0;a--)i=o[a].call(e,i,n,this,s);return i};ye.prototype._castNullish=function(e){return e};ye.prototype.applySetters=function(t,e,r,n,s){let i=this._applySetters(t,e,r,n,s);return i==null?this._castNullish(i):(i=this.cast(i,e,r,n,s),i)};ye.prototype.applyGetters=function(t,e){let r=t,n=this.getters,s=n.length;if(s===0)return r;for(let i=0;i<s;++i)r=n[i].call(e,r,this);return r};ye.prototype.select=function(e){return this.selected=!!e,this};ye.prototype.doValidate=async function(e,r,n){let s=!1,i=this.path,o=this.validators.filter(u=>typeof u=="object"&&u!==null);if(!o.length)return;let a=[];for(let u=0,c=o.length;u<c;++u){let l=o[u],p=l.validator,d,h=Mx(l)?Object.assign({},l):aE(l);if(h.path=n?.path||i,h.fullPath=this.$fullPath,h.value=e,typeof e=="string"&&(h.length=e.length,h.value.length>30&&(h.value=h.value.slice(0,30)+"...")),!(e===void 0&&p!==this.requiredValidator)){if(p instanceof RegExp){if(d=p.test(e),d===!1){let f=h.ErrorConstructor||Xp;throw s=new f(h,r),s[Wh]=!0,s}continue}else if(typeof p!="function")continue;try{h.propsParameter?d=p.call(r,e,h):d=p.call(r,e)}catch(f){d=!1,h.reason=f,f.message&&(h.message=f.message)}if(typeof d?.then=="function")a.push(d.then(function(f){if(f===!1){let y=h.ErrorConstructor||Xp;throw s=new y(h,r),s[Wh]=!0,s}},function(f){h.reason=f,h.message=f.message,d=!1;let y=h.ErrorConstructor||Xp;throw s=new y(h,r),s[Wh]=!0,s}));else if(d!==void 0&&!d){let f=h.ErrorConstructor||Xp;throw s=new f(h,r),s[Wh]=!0,s}}}await Promise.all(a)};function Gz(t,e){if(t!==void 0&&!t){let r=e.ErrorConstructor||Xp,n=new r(e);return n[Wh]=!0,n}}ye.prototype.doValidateSync=function(t,e,r){let n=this.path;if(!this.validators.length)return null;let i=this.validators;if(t===void 0)if(this.validators.length!==0&&this.validators[0].type==="required")i=[this.validators[0]];else return null;let o=null,a=0,u=i.length;for(a=0;a<u;++a){let c=i[a];if(c===null||typeof c!="object")continue;let l=c.validator,p=Mx(c)?Object.assign({},c):aE(c);p.path=r?.path||n,p.fullPath=this.$fullPath,p.value=t,typeof t=="string"&&(p.length=t.length,p.value.length>30&&(p.value=p.value.slice(0,30)+"..."));let d=!1;if(!J4e(l)){if(l instanceof RegExp){o=Gz(l.test(t),p);continue}if(typeof l=="function"){try{p.propsParameter?d=l.call(e,t,p):d=l.call(e,t)}catch(h){d=!1,p.reason=h}if(typeof d?.then!="function"&&(o=Gz(d,p),o))break}}}return o};ye._isRef=function(t,e,r,n){let s=n&&(t.options?.ref||t.options?.refPath);if(!s&&r?.$__!=null){let i=r.$__fullPath(t.path,!0),o=r.ownerDocument();s=i!=null&&o.$populated(i)||r.$populated(t.path)}return s?e==null||!Buffer.isBuffer(e)&&e._bsontype!=="Binary"&&Cc.isObject(e)?!0:n:!1};ye.prototype._castRef=function(e,r,n,s){if(e==null)return e;if(e.$__!=null)return e.$__.wasPopulated=e.$__.wasPopulated||{value:e._doc._id},e;if(Buffer.isBuffer(e)||!Cc.isObject(e)){if(n)return e;throw new Px(this.instance,e,this.path,null,this)}let i=r.$__fullPath(this.path,!0),a=r.ownerDocument().$populated(i,!0),u=e;if(!r.$__.populated||!r.$__.populated[i]||!r.$__.populated[i].options||!r.$__.populated[i].options.options||!r.$__.populated[i].options.options.lean){let c=a?a.options[Hz]:r.constructor.db.model(this.options.ref);u=c.hydrate(e,null,s),u.$__.wasPopulated={value:u._doc._id,options:{[Hz]:c}}}return u};function Jz(t,e){return this.castForQuery(null,t,e)}function Z4e(t,e){let r=this;return Array.isArray(t)?t.map(function(n){return r.castForQuery(null,n,e)}):[this.castForQuery(null,t,e)]}function Yz(t,e){let r=this;return Array.isArray(t)?t.map(function(n){return Array.isArray(n)&&n.length===0?n:r.castForQuery(null,n,e)}):[this.castForQuery(null,t,e)]}ye.prototype.$conditionalHandlers={$all:Z4e,$eq:Jz,$in:Yz,$ne:Jz,$nin:Yz,$exists:H4e,$type:G4e};ye.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t);return n.call(this,e,r)}try{return this.applySetters(e,r)}catch(s){throw s instanceof Px&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}};ye.checkRequired=function(t){return arguments.length!==0&&(this._checkRequired=t),this._checkRequired};ye.prototype.checkRequired=function(t){return t!=null};ye.prototype.clone=function(){let t=Object.assign({},this.options),e=new this.constructor(this.path,t,this.instance,this.parentSchema);return e.validators=this.validators.slice(),this.requiredValidator!==void 0&&(e.requiredValidator=this.requiredValidator),this.defaultValue!==void 0&&(e.defaultValue=this.defaultValue),this.$immutable!==void 0&&this.options.immutable===void 0&&(e.$immutable=this.$immutable,Dx(e)),this._index!==void 0&&(e._index=this._index),this.selected!==void 0&&(e.selected=this.selected),this.isRequired!==void 0&&(e.isRequired=this.isRequired),this.originalRequiredValue!==void 0&&(e.originalRequiredValue=this.originalRequiredValue),e.getters=this.getters.slice(),e.setters=this.setters.slice(),e};ye.prototype.getEmbeddedSchemaType=function(){return this.embeddedSchemaType};ye.prototype._duplicateKeyErrorMessage=null;ye.prototype.toJSONSchema=function(e){throw new Error(`Converting unsupported SchemaType to JSON Schema: ${this.instance} at path "${this.path}"`)};ye.prototype.autoEncryptionType=function(){return null};Xz.exports=uE=ye;uE.CastError=Px;uE.ValidatorError=Xp});var Bx=m((r$e,Zz)=>{"use strict";var Oi=hs(),Un=class{constructor(e){Object.assign(this,e),e?.options!=null&&(this.options=Object.assign({},e.options))}};Object.defineProperty(Un.prototype,"ref",Oi);Object.defineProperty(Un.prototype,"refPath",Oi);Object.defineProperty(Un.prototype,"localField",Oi);Object.defineProperty(Un.prototype,"foreignField",Oi);Object.defineProperty(Un.prototype,"justOne",Oi);Object.defineProperty(Un.prototype,"count",Oi);Object.defineProperty(Un.prototype,"match",Oi);Object.defineProperty(Un.prototype,"options",Oi);Object.defineProperty(Un.prototype,"skip",Oi);Object.defineProperty(Un.prototype,"limit",Oi);Object.defineProperty(Un.prototype,"perDocumentLimit",Oi);Zz.exports=Un});var cE=m((n$e,eK)=>{"use strict";eK.exports=function(e,r,n){return e==null?e:(e._doc!=null&&(e=e._doc),arguments.length>=3?typeof e!="object"||n===void 0?void 0:(e instanceof Map?e.set(r,n):e[r]=n,n):r==="$*"?e instanceof Map?Array.from(e.values()):Object.keys(e).map(s=>e[s]):e instanceof Map?e.get(r):e[r])}});var Ix=m((s$e,sK)=>{"use strict";var eCe=we(),tCe=tx(),tK=cE(),rK=fs(),rCe=require("util"),nCe=ae(),nK=/(\.\d+$|\.\d+\.)/g;sK.exports=function(e,r,n,s,i){if(e==null)return[];if(typeof e=="string"&&i!=null&&tCe(i,e))throw new eCe("refPath `"+e+"` must not be excluded in projection, got "+rCe.inspect(i));if(nK.test(n)){let u=n.split(nK);if(u[u.length-1]==="")throw new Error("Can't populate individual element in an array");let c="",l=e;for(let h=0;h<u.length;h+=2){let f=u[h];if(l.startsWith(f+"."))c+=l.substring(0,f.length)+u[h+1],l=l.substring(f.length+1);else if(h===u.length-1){c+=l,l="";break}else throw new Error("Could not normalize ref path, chunk "+f+" not in populated path")}let p=rK.get(c,r,tK),d=Array.isArray(p)?p:[p];return d=nCe.array.flatten(d),d}let o=rK.get(e,r,tK),a;return s!=null&&Object.hasOwn(s.virtuals,e)?a=[s.virtuals[e].applyGetters(void 0,r)]:a=Array.isArray(o)?o:[o],a}});var lE=m((i$e,iK)=>{"use strict";var sCe=Ix(),iCe=ae(),oCe=te().modelSymbol;function jo(t,e){this.path=e,this.getters=[],this.setters=[],this.options=Object.assign({},t)}jo.prototype._applyDefaultGetters=function(){if(this.getters.length>0||this.setters.length>0)return;let e="$"+this.path;this.getters.push(function(){return this.$locals[e]}),this.setters.push(function(r){this.$locals[e]=r})};jo.prototype.clone=function(){let t=new jo(this.options,this.path);return t.getters=[].concat(this.getters),t.setters=[].concat(this.setters),t};jo.prototype.get=function(t){return this.getters.push(t),this};jo.prototype.set=function(t){return this.setters.push(t),this};jo.prototype.applyGetters=function(t,e){iCe.hasUserDefinedProperty(this.options,["ref","refPath"])&&e.$$populatedVirtuals&&Object.hasOwn(e.$$populatedVirtuals,this.path)&&(t=e.$$populatedVirtuals[this.path]);let r=t;for(let n of this.getters)r=n.call(e,r,this,e);return r};jo.prototype.applySetters=function(t,e){let r=t;for(let n of this.setters)r=n.call(e,r,this,e);return r};jo.prototype._getModelNamesForPopulate=function(e){if(this.options.refPath)return sCe(this.options.refPath,e,this.path);let r=null;return typeof this.options.ref=="function"&&!this.options.ref[oCe]?r=this.options.ref.call(e,e):r=this.options.ref,r!=null&&!Array.isArray(r)?[r]:r};iK.exports=jo});var Nx=m((o$e,oK)=>{"use strict";oK.exports=function(e){let r={_id:{auto:!0}};r._id[e.options.typeKey]="ObjectId",e.add(r)}});var kx=m((a$e,aK)=>{"use strict";aK.exports=function(e,r){let n=e.discriminatorMapping?.value;if(n&&!("sparse"in r)){let s=e.options.discriminatorKey;r.partialFilterExpression=r.partialFilterExpression||{},r.partialFilterExpression[s]=n}return r}});var cK=m((u$e,uK)=>{"use strict";var Rx=Rt(),aCe=hc(),uCe=kx();uK.exports=function(e){let r=[],n=new WeakMap,s=e.constructor.indexTypes,i=new Map;return o(e),r;function o(u,c,l){if(n.has(u))return;n.set(u,!0),c=c||"";let p=Object.keys(u.paths);for(let d of p){let h=u.paths[d];if(l!=null&&l.paths[d])continue;if(h._duplicateKeyErrorMessage!=null&&(u._duplicateKeyErrorMessagesByPath=u._duplicateKeyErrorMessagesByPath||{},u._duplicateKeyErrorMessagesByPath[d]=h._duplicateKeyErrorMessage),h.$isMongooseDocumentArray||h.$isSingleNested){if(Rx(h,"options.excludeIndexes")!==!0&&Rx(h,"schemaOptions.excludeIndexes")!==!0&&Rx(h,"schema.options.excludeIndexes")!==!0&&o(h.schema,c+d+"."),h.schema.discriminators!=null){let y=h.schema.discriminators,g=Object.keys(y);for(let _ of g)o(y[_],c+d+".",h.schema)}if(h.$isMongooseDocumentArray)continue}let f=h._index||h.embeddedSchemaType&&h.embeddedSchemaType._index;if(f!==!1&&f!=null){let y={},g=aCe(f),_=g?{...f}:{},w=typeof f=="string"?f:g?f.type:!1;if(w&&s.indexOf(w)!==-1)y[c+d]=w;else if(_.text)y[c+d]="text",delete _.text;else{let E=!1;f==="descending"||f==="desc"?E=!0:f==="ascending"||f==="asc"?E=!1:E=Number(f)===-1,y[c+d]=E?-1:1}delete _.type,u.options.autoIndex!=null&&(_._autoIndex=u.options.autoIndex);let O=_?.name;typeof O=="string"?i.has(O)?Object.assign(i.get(O),y):(r.push([y,_]),i.set(O,y)):(r.push([y,_]),i.set(O,y))}}n.delete(u),c?a(u,c):(u._indexes.forEach(function(d){let h=d[1];uCe(u,h)}),r=r.concat(u._indexes))}function a(u,c){let l=u._indexes,p=l.length;for(let d=0;d<p;++d){let h=l[d][0],f=l[d][1],y=Object.keys(h),g=y.length,_={};for(let O=0;O<g;++O){let E=y[O];_[c+E]=h[E]}let w=Object.assign({},f);if(f?.partialFilterExpression!=null){w.partialFilterExpression={};let O=f.partialFilterExpression;for(let E of Object.keys(O))w.partialFilterExpression[c+E]=O[E]}r.push([_,w])}}}});var Fx=m((c$e,lK)=>{"use strict";lK.exports=function(e){switch(e){case"p":e="primary";break;case"pp":e="primaryPreferred";break;case"s":e="secondary";break;case"sp":e="secondaryPreferred";break;case"n":e="nearest";break}return e}});var dK=m((l$e,pK)=>{"use strict";pK.exports=function(e){return!(!e.paths.id&&e.paths._id&&e.options.id)||e.aliases?.id||e.virtual("id").get(cCe),e};function cCe(){return this._id!=null?this._id.toString():null}});var fK=m((p$e,hK)=>{"use strict";hK.exports=function(e,r){let n=Object.keys(e),s=Object.keys(r);if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++){let o=n[i];if(o!==s[i]||e[o]!==r[o])return!1}return!0}});var yK=m((d$e,mK)=>{"use strict";mK.exports=function(e,r,n,s){return s.justOne||s.count?(e[r]=Array.isArray(n)?n[0]:n,typeof e[r]!="object"&&(e[r]=s.count?n:null)):(e[r]=Array.isArray(n)?n:n==null?[]:[n],e[r]=e[r].filter(function(i){return i&&typeof i=="object"})),e[r]}});var Kh=m((h$e,gK)=>{"use strict";gK.exports=function(e){return e.replace(/\.\$(\[[^\]]*\])?(?=\.)/g,".0").replace(/\.\$(\[[^\]]*\])?$/g,".0")}});var pE=m((f$e,_K)=>{"use strict";_K.exports=lCe;function lCe(t,e){return t==null?null:typeof t=="boolean"?e:typeof t[e]=="boolean"?t[e]?e:null:e in t?t[e]:e}});var qx=m((m$e,EK)=>{"use strict";var pCe=Kh(),Lo=pE();EK.exports=vc;function vc(t,e,r){if(e==null)return;if(Object.keys(e).some(a=>a[0]==="$")){if(e.$push&&o(e.$push),e.$addToSet&&o(e.$addToSet),e.$set!=null){let a=Object.keys(e.$set);for(let u of a)$x(r,u,e.$set,t)}if(e.$setOnInsert!=null){let a=Object.keys(e.$setOnInsert);for(let u of a)$x(r,u,e.$setOnInsert,t)}}let i=Object.keys(e).filter(a=>a[0]!=="$");for(let a of i)$x(r,a,e,t);function o(a){for(let u of Object.keys(a)){let c=r.path(u.replace(/\.\$\./i,".").replace(/.\$$/,""));if(a[u]&&c&&c.$isMongooseDocumentArray&&c.schema.options.timestamps){let l=c.schema.options.timestamps,p=Lo(l,"createdAt"),d=Lo(l,"updatedAt");a[u].$each?a[u].$each.forEach(function(h){d!=null&&(h[d]=t),p!=null&&(h[p]=t),vc(t,h,c.schema)}):(d!=null&&(a[u][d]=t),p!=null&&(a[u][p]=t),vc(t,a[u],c.schema))}}}}function dCe(t,e,r){let n=e.schema.options.timestamps,s=t.length;if(!n){for(let a=0;a<s;++a)vc(r,t[a],e.schema);return}let i=Lo(n,"createdAt"),o=Lo(n,"updatedAt");for(let a=0;a<s;++a)o!=null&&(t[a][o]=r),i!=null&&(t[a][i]=r),vc(r,t[a],e.schema)}function hCe(t,e,r){let n=e.schema.options.timestamps;if(!n){vc(r,t,e.schema);return}let s=Lo(n,"createdAt"),i=Lo(n,"updatedAt");i!=null&&(t[i]=r),s!=null&&(t[s]=r),vc(r,t,e.schema)}function $x(t,e,r,n){let s=pCe(e),i=t.path(s);if(!i)return;let o=[],a=s.split(".");for(let u=a.length-1;u>0;--u){let c=t.path(a.slice(0,u).join("."));c!=null&&(c.$isMongooseDocumentArray||c.$isSingleNested)&&o.push({parentPath:e.split(".").slice(0,u).join("."),parentSchemaType:c})}if(Array.isArray(r[e])&&i.$isMongooseDocumentArray)dCe(r[e],i,n);else if(r[e]&&i.$isSingleNested)hCe(r[e],i,n);else if(o.length>0)for(let u of o){let c=u.parentPath,l=u.parentSchemaType,p=l.schema.options.timestamps,d=Lo(p,"updatedAt");if(!(!p||d==null)){if(l.$isSingleNested)r[c+"."+d]=n;else if(l.$isMongooseDocumentArray){let h=e.substring(c.length+1);if(/^\d+$/.test(h)){r[c+"."+h][d]=n;continue}let f=h.indexOf(".");h=f!==-1?h.substring(0,f):h,r[c+"."+h+"."+d]=n}}}else if(i.schema!=null&&i.schema!=t&&r[e]){let u=i.schema.options.timestamps,c=Lo(u,"createdAt"),l=Lo(u,"updatedAt");if(!u)return;l!=null&&(r[e][l]=n),c!=null&&(r[e][c]=n)}}});var jx=m((y$e,wK)=>{"use strict";var bK=Rt(),fCe=ae();wK.exports=mCe;function mCe(t,e,r,n,s,i){let o=n,a=o,u=bK(s,"timestamps",!0);if(!u||o==null)return n;let c=u?.createdAt===!1,l=u?.updatedAt===!1;if(i)return n?.$set&&(n=n.$set,o.$set={},a=o.$set),!l&&r&&!n[r]&&(a[r]=t),!c&&e&&!n[e]&&(a[e]=t),o;if(n=n||{},Array.isArray(o))return r==null||o.push({$set:{[r]:t}}),o;if(o.$set=o.$set||{},!l&&r&&!n.$currentDate?.[r]){let p=!1;if(r.indexOf(".")!==-1){let d=r.split(".");for(let h=1;h<d.length;++h){let f=d.slice(-h).join("."),y=d.slice(0,-h).join(".");if(n[y]!=null){n[y][f]=t,p=!0;break}else if(n.$set?.[y]){n.$set[y][f]=t,p=!0;break}}}p||(o.$set[r]=t),Object.hasOwn(o,r)&&delete o[r]}if(!c&&e){let p=bK(s,"overwriteImmutable",!1),d=n[e]!=null||n.$set?.[e]!=null;if(p&&d)n[e]!=null&&(o.$set[e]=n[e],delete n[e]);else{n[e]&&delete n[e],n.$set?.[e]&&delete n.$set[e];let h=!1;if(e.indexOf(".")!==-1){let f=e.split(".");for(let y=1;y<f.length;++y){let g=f.slice(-y).join("."),_=f.slice(0,-y).join(".");if(n[_]!=null){n[_][g]=t,h=!0;break}else if(n.$set?.[_]){n.$set[_][g]=t,h=!0;break}}}h||(o.$setOnInsert=o.$setOnInsert||{},o.$setOnInsert[e]=t)}}return fCe.hasOwnKeys(o.$set)===!1&&delete o.$set,o}});var AK=m((g$e,SK)=>{"use strict";SK.exports=function(e,r,n,s,i){let o=r?.updatedAt===!1,a=r?.createdAt===!1,u=n!=null?n():e.ownerDocument().constructor.base.now();if(!a&&(e.isNew||e.$isSubdocument)&&s&&!e.$__getValue(s)&&e.$__isSelected(s)&&e.$set(s,u,void 0,{overwriteImmutable:!0}),!o&&i&&(e.isNew||e.$isModified())){let c=u;e.isNew&&s!=null&&(c=e.$__getValue(s)),e.$set(i,c)}}});var vK=m((_$e,CK)=>{"use strict";var yCe=qx(),gCe=jx(),_Ce=Rt(),dE=pE(),ECe=AK(),bCe=gc(),OK=new Set(["replaceOne","findOneAndReplace"]);CK.exports=function(e,r){let n=e.childSchemas.find(s);function s(p){return!!p.schema.options.timestamps}if(!r&&!n)return;let i=dE(r,"createdAt"),o=dE(r,"updatedAt"),a=r!=null&&Object.hasOwn(r,"currentTime")?r.currentTime:null,u={};if(e.$timestamps={createdAt:i,updatedAt:o},i&&!e.paths[i]){let d=e.base?.get("timestamps.createdAt.immutable")??null??!0;u[i]={[e.options.typeKey||"type"]:Date,immutable:d}}o&&!e.paths[o]&&(u[o]=Date),e.add(u),e.pre("save",function(){let d=_Ce(this,"$__.saveOptions.timestamps");d!==!1&&ECe(this,d,a,i,o)}),e.methods.initializeTimestamps=function(p){if(p===!1)return this;let d=a!=null?a():this.constructor.base.now(),h=p!=null?dE(p,"createdAt"):i,f=p!=null?dE(p,"updatedAt"):o;if(h&&!this.get(h)&&this.$set(i,d),f&&!this.get(f)&&this.$set(o,d),this.$isSubdocument)return this;let y=this.$getAllSubdocs();for(let g of y)g.initializeTimestamps&&g.initializeTimestamps(p);return this},l[bCe.builtInMiddleware]=!0;let c={query:!0,model:!1};e.pre("findOneAndReplace",c,l),e.pre("findOneAndUpdate",c,l),e.pre("replaceOne",c,l),e.pre("update",c,l),e.pre("updateOne",c,l),e.pre("updateMany",c,l);function l(){let p=a!=null?a():this.model.base.now();OK.has(this.op)&&this.getUpdate()==null&&this.setUpdate({}),gCe(p,i,o,this.getUpdate(),this._mongooseOptions,OK.has(this.op)),yCe(p,this.getUpdate(),this.model.schema)}}});var TK=m((E$e,xK)=>{"use strict";var wCe=we(),SCe=require("util");xK.exports=ACe;function ACe(t,e){if(typeof t!="string"&&typeof t!="function")throw new wCe('Invalid ref at path "'+e+'". Got '+SCe.inspect(t,{depth:0}))}});var Hh=m(Zp=>{"use strict";var DK=Object.freeze(["countDocuments","distinct","estimatedDocumentCount","find","findOne","findOneAndReplace","findOneAndUpdate","replaceOne","updateMany","updateOne","deleteMany","deleteOne","findOneAndDelete"]);Zp.queryOperations=DK;var OCe=DK.concat(["validate"]);Zp.queryMiddlewareFunctions=OCe;var CCe=["aggregate"];Zp.aggregateMiddlewareFunctions=CCe;var vCe=["bulkWrite","createCollection","insertMany"];Zp.modelMiddlewareFunctions=vCe;var xCe=["validate","save","remove","updateOne","deleteOne","init"];Zp.documentMiddlewareFunctions=xCe});var PK=m((w$e,MK)=>{"use strict";MK.exports=pe().Double});var hE=m((S$e,RK)=>{"use strict";var TCe=_c(),DCe=we(),BK=vt(),MCe=ae().deepEqual,PCe=bn(),BCe=z_(),IK=require("util"),ICe=dc(),Lx=$r(),NCe=j_(),NK=te().populateModelSymbol;var Ci=class extends Map{constructor(e,r,n,s){PCe(e)==="Object"&&(e=Object.keys(e).reduce((i,o)=>i.concat([[o,e[o]]]),[])),super(e),this.$__parent=n?.$__!=null?n:null,this.$__path=r,this.$__schemaType=s??new TCe(r),this.$__runDeferred()}$init(e,r){kK(e),super.set(e,r),r?.$isSingleNested&&(r.$basePath=this.$__path+"."+e)}$__set(e,r){super.set(e,r)}get(e,r){return Lx(e,"ObjectId")&&(e=e.toString()),r=r||{},r.getters===!1?super.get(e):this.$__schemaType.applyGetters(super.get(e),this.$__parent)}set(e,r){if(Lx(e,"ObjectId")&&(e=e.toString()),kK(e),r=BCe(r),this.$__schemaType==null){this.$__deferred=this.$__deferred||[],this.$__deferred.push({key:e,value:r});return}let n,s=this.$__parent,i=s?.$__?.populated?s.$populated(a.call(this),!0)||s.$populated(this.$__path,!0):null,o=this.get(e);if(i!=null){if(this.$__schemaType.$isSingleNested)throw new DCe(`Cannot manually populate single nested subdoc underneath Map at path "${this.$__path}". Try using an array instead of a Map.`);Array.isArray(r)&&this.$__schemaType.$isMongooseArray?r=r.map(u=>(u.$__==null&&(u=new i.options[NK](u)),u.$__.wasPopulated={value:u._doc._id},u)):r!=null&&(r.$__==null&&(r=new i.options[NK](r)),r.$__.wasPopulated={value:r._doc._id})}else try{let u=this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested||this.$__schemaType.$isMongooseArray||this.$__schemaType.$isSchemaMap?{path:a.call(this)}:null;r=this.$__schemaType.applySetters(r,this.$__parent,!1,this.get(e),u)}catch(u){if(this.$__parent?.$__!=null){this.$__parent.invalidate(a.call(this),u);return}throw u}if(super.set(e,r),s?.$__!=null&&!MCe(r,o)){let u=a.call(this);s.markModified(u),(this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested)&&NCe(s,u)}function a(){return n||(n=this.$__path+"."+e,n)}}clear(){super.clear();let e=this.$__parent;e?.markModified(this.$__path)}delete(e){return Lx(e,"ObjectId")&&(e=e.toString()),this.set(e,void 0),super.delete(e)}toBSON(){return new Map(this)}toObject(e){if(e?.flattenMaps){let r={},n=this.keys();for(let s of n)r[s]=BK(this.get(s),e);return r}return new Map(this)}$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)}toJSON(e){if(typeof e?.flattenMaps!="boolean"||e.flattenMaps){let r={},n=this.keys();for(let s of n)r[s]=BK(this.get(s),e);return r}return new Map(this)}inspect(){return new Map(this)}$__runDeferred(){if(this.$__deferred){for(let e of this.$__deferred)this.set(e.key,e.value);this.$__deferred=null}}};IK.inspect.custom&&Object.defineProperty(Ci.prototype,IK.inspect.custom,{enumerable:!1,writable:!1,configurable:!1,value:Ci.prototype.inspect});Object.defineProperty(Ci.prototype,"$__set",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(Ci.prototype,"$__parent",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(Ci.prototype,"$__path",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(Ci.prototype,"$__schemaType",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(Ci.prototype,"$isMongooseMap",{enumerable:!1,writable:!1,configurable:!1,value:!0});Object.defineProperty(Ci.prototype,"$__deferredCalls",{enumerable:!1,writable:!1,configurable:!1,value:!0});function kK(t){let e=typeof t;if(e!=="string")throw new TypeError(`Mongoose maps only support string keys, got ${e}`);if(t.startsWith("$"))throw new Error(`Mongoose maps do not support keys that start with "$", got "${t}"`);if(t.includes("."))throw new Error(`Mongoose maps do not support keys that contain ".", got "${t}"`);if(ICe.has(t))throw new Error(`Mongoose maps do not support reserved key name "${t}"`)}RK.exports=Ci});var $K=m((A$e,FK)=>{"use strict";FK.exports=pe().UUID});var e1=m(Vs=>{"use strict";Vs.Array=lx();Vs.Buffer=B_();Vs.Document=Vs.Embedded=Jp();Vs.DocumentArray=Sc();Vs.Double=PK();Vs.Decimal128=h_();Vs.ObjectId=Za();Vs.Map=hE();Vs.Subdocument=H_();Vs.UUID=$K()});var jK=m((C$e,qK)=>{"use strict";var kCe=qn(),t1=class extends kCe{},Ux=hs();Object.defineProperty(t1.prototype,"enum",Ux);Object.defineProperty(t1.prototype,"of",Ux);Object.defineProperty(t1.prototype,"castNonArrays",Ux);qK.exports=t1});var UK=m((v$e,LK)=>{"use strict";LK.exports=Vx;function Vx(t){if(!Array.isArray(t))return{min:0,max:0,containsNonArrayItem:!0};if(t.length===0)return{min:1,max:1,containsNonArrayItem:!1};if(t.length===1&&!Array.isArray(t[0]))return{min:1,max:1,containsNonArrayItem:!1};let e=Vx(t[0]);for(let r=1;r<t.length;++r){let n=Vx(t[r]);n.min<e.min&&(e.min=n.min),n.max>e.max&&(e.max=n.max),e.containsNonArrayItem=e.containsNonArrayItem||n.containsNonArrayItem}return e.min=e.min+1,e.max=e.max+1,e}});var Gh=m((x$e,WK)=>{"use strict";var VK=require("assert");WK.exports=function(e){if(e==null)return e;if(e==="")return null;if((typeof e=="string"||typeof e=="boolean")&&(e=Number(e)),VK.ok(!isNaN(e)),e instanceof Number)return e.valueOf();if(typeof e=="number")return e;if(!Array.isArray(e)&&typeof e.valueOf=="function")return Number(e.valueOf());if(e.toString&&!Array.isArray(e)&&e.toString()==Number(e))return Number(e);VK.ok(!1)}});var Wx=m((T$e,zK)=>{"use strict";zK.exports=function(e){if(e==null||typeof e!="object")return e;if(Array.isArray(e))for(let r=e.length-1;r>=0;--r)e[r]===void 0&&e.splice(r,1);for(let r of Object.keys(e))e[r]===void 0&&delete e[r];return e}});var GK=m((D$e,HK)=>{"use strict";var r1=sn(),KK=eu(),fE=Gh(),RCe=Wx(),FCe=new Set(["$and","$or"]),$Ce=new Set(["$cmp","$eq","$lt","$lte","$gt","$gte"]),qCe=new Set(["$multiply","$divide","$log","$mod","$trunc","$avg","$max","$min","$stdDevPop","$stdDevSamp","$sum"]),jCe=new Set(["$abs","$exp","$ceil","$floor","$ln","$log10","$sqrt","$sin","$cos","$tan","$asin","$acos","$atan","$atan2","$asinh","$acosh","$atanh","$sinh","$cosh","$tanh","$degreesToRadians","$radiansToDegrees"]),LCe=new Set(["$arrayElemAt","$first","$last"]),UCe=new Set(["$year","$month","$week","$dayOfMonth","$dayOfYear","$hour","$minute","$second","$isoDayOfWeek","$isoWeekYear","$isoWeek","$millisecond"]),VCe=new Set(["$not"]);HK.exports=function(e,r,n){if(typeof e=="boolean")return e;if(typeof e!="object"||e===null)throw new Error("`$expr` must be an object or boolean literal");return Ws(e,r,n)};function Ws(t,e,r){if(Jh(t)||t===null)return t;t.$cond!=null?Array.isArray(t.$cond)?t.$cond=t.$cond.map(s=>Ws(s,e,r)):(t.$cond.if=Ws(t.$cond.if,e,r),t.$cond.then=Ws(t.$cond.then,e,r),t.$cond.else=Ws(t.$cond.else,e,r)):t.$ifNull!=null?t.$ifNull.map(s=>Ws(s,e,r)):t.$switch!=null&&(Array.isArray(t.$switch.branches)&&(t.$switch.branches=t.$switch.branches.map(s=>Ws(s,e,r))),"default"in t.$switch&&(t.$switch.default=Ws(t.$switch.default,e,r)));let n=Object.keys(t);for(let s of n)FCe.has(s)?t[s]=t[s].map(i=>Ws(i,e,r)):$Ce.has(s)?t[s]=KCe(t[s],e,r):qCe.has(s)?t[s]=zCe(t[s],e,r):jCe.has(s)?t[s]=zx(t[s],e,r):VCe.has(s)&&(t[s]=Ws(t[s],e,r));if(t.$in&&(t.$in=WCe(t.$in,e,r)),t.$size&&(t.$size=zx(t.$size,e,r)),t.$round){let s=t.$round;if(!Array.isArray(s)||s.length<1||s.length>2)throw new r1("Array",s,"$round");t.$round=s.map(i=>zx(i,e,r))}return RCe(t),t}function zx(t){if(!mE(t))return t;try{return fE(t)}catch{throw new r1("Number",t)}}function WCe(t,e,r){let n=t[1];if(!Jh(n))return t;let s=t[0],i=e.path(n.slice(1));if(i===null){if(r===!1)return t;if(r==="throw")throw new KK("$in");return}if(!i.$isMongooseArray)throw new Error("Path must be an array for $in");return[i.embeddedSchemaType.cast(s),n]}function zCe(t){if(!Array.isArray(t)){if(!mE(t))return t;try{return fE(t)}catch{throw new r1("Number",t)}}return t.map(e=>{if(!mE(e))return e;try{return fE(e)}catch{throw new r1("Number",e)}})}function KCe(t,e,r){if(!Array.isArray(t)||t.length!==2)throw new Error("Comparison operator must be an array of length 2");t[0]=Ws(t[0],e,r);let n=t[0];if(mE(t[1])){let s=null,i=null,o=null;if(Jh(n))s=n.slice(1),i=e.path(s);else if(typeof n=="object"&&n!=null)for(let u of Object.keys(n))UCe.has(u)&&Jh(n[u])?(s=n[u].slice(1)+"."+u,o=fE):LCe.has(u)&&Jh(n[u])&&(s=n[u].slice(1)+"."+u,i=e.path(n[u].slice(1)),i!=null&&i.$isMongooseArray&&(i=i.embeddedSchemaType));let a=typeof t[1]=="object"&&t[1]!=null&&t[1].$literal!=null;if(i!=null)a?t[1]={$literal:i.cast(t[1].$literal)}:t[1]=i.cast(t[1]);else if(o!=null)if(a)try{t[1]={$literal:o(t[1].$literal)}}catch{throw new r1(o.name.replace(/^cast/,""),t[1],s+".$literal")}else try{t[1]=o(t[1])}catch{throw new r1(o.name.replace(/^cast/,""),t[1],s)}else{if(s!=null&&r===!0)return;if(s!=null&&r==="throw")throw new KK(s)}}else t[1]=Ws(t[1]);return t}function Jh(t){return typeof t=="string"&&t[0]==="$"}function mE(t){return typeof t=="string"&&t[0]==="$"?!1:typeof t=="object"&&t!==null&&Object.keys(t).find(e=>e[0]==="$")?t.$literal!=null:!0}});var yE=m((M$e,JK)=>{"use strict";var HCe=sn();JK.exports=function(e,r){if(e==null)return e;if(typeof e?._id=="string")return e._id;if(e.toString&&e.toString!==Object.prototype.toString&&!Array.isArray(e))return e.toString();throw new HCe("string",e,r)}});var ZK=m((P$e,XK)=>{"use strict";var GCe=sn(),YK=D_(),QK=yE();XK.exports=function(e,r){if(e==null||typeof e!="object")throw new GCe("$text",e,r);return e.$search!=null&&(e.$search=QK(e.$search,r+".$search")),e.$language!=null&&(e.$language=QK(e.$language,r+".$language")),e.$caseSensitive!=null&&(e.$caseSensitive=YK(e.$caseSensitive,r+".$caseSensitive")),e.$diacriticSensitive!=null&&(e.$diacriticSensitive=YK(e.$diacriticSensitive,r+".$diacriticSensitive")),e}});var Yh=m((B$e,eH)=>{"use strict";var JCe=new Set(["$ref","$id","$db"]);eH.exports=function(e){return e[0]==="$"&&!JCe.has(e)}});var xc=m((I$e,sH)=>{"use strict";var tH=sn(),Kx=eu(),YCe=Qh(),QCe=GK(),XCe=yE(),ZCe=ZK(),eve=Rt(),rH=W_(),nH=Yh(),tve=require("util"),Jx=hc(),Hx=kh(),Gx=ae(),rve=["Polygon","MultiPolygon"];sH.exports=function t(e,r,n,s){if(Array.isArray(r))throw new Error("Query filter must be an object, got an array ",tve.inspect(r));if(r==null)return r;e?.discriminators!=null&&r[e.options.discriminatorKey]!=null&&(e=rH(e,r[e.options.discriminatorKey])||e);let i=Object.keys(r),o=i.length,a,u,c,l,p,d,h;for(n=n||{};o--;)if(p=i[o],h=r[p],p==="$or"||p==="$nor"||p==="$and"){if(!Array.isArray(h))throw new tH("Array",h,p);for(let f=h.length-1;f>=0;f--){if(h[f]==null||typeof h[f]!="object")throw new tH("Object",h[f],p+"."+f);let y=Object.keys(h[f]).length,g=h[f][e.options.discriminatorKey];if(g==null)h[f]=t(e,h[f],n,s);else{let _=rH(s.schema,g);h[f]=t(_||e,h[f],n,s)}Gx.hasOwnKeys(h[f])===!1&&y!==0&&h.splice(f,1)}h.length===0&&delete r[p]}else if(p==="$where"){if(d=typeof h,d!=="string"&&d!=="function")throw new Error("Must have a string or function for $where");d==="function"&&(r[p]=h.toString());continue}else if(p==="$expr"){h=QCe(h,e);continue}else if(p==="$elemMatch")h=t(e,h,n,s);else if(p==="$text")h=ZCe(h,p);else if(p==="$comment"&&!Object.hasOwn(e.paths,"$comment"))h=XCe(h,p),r[p]=h;else{if(!e)continue;if(c=e.path(p),!c){let f=p.split("."),y=f.length;for(;y--;){let g=f.slice(0,y).join("."),_=f.slice(y).join("."),w=e.path(g),O=w?.schema?.options?.discriminatorKey;if(w?.schema?.discriminators!=null&&O!=null&&_!==O){let E=eve(r,g+"."+O),A=w.schema.discriminators;typeof E=="string"&&A[E]!=null?c=A[E].path(_):E!=null&&Object.keys(E).length===1&&Array.isArray(E.$in)&&E.$in.length===1&&typeof E.$in[0]=="string"&&A[E.$in[0]]!=null&&(c=A[E.$in[0]].path(_))}}}if(c){if(h==null)continue;if(Gx.isPOJO(h))if(u=Object.keys(h).some(nH),!u)r[p]=c.castForQuery(null,h,s);else{let f=Object.keys(h),y,g=f.length;for(;g--;)if(y=f[g],l=h[y],y==="$elemMatch")l&&c?.schema!=null?t(c.schema,l,n,s):l&&c?.$isMongooseArray&&(Gx.isPOJO(l)&&l.$not!=null?t(e,l,n,s):h[y]=c.castForQuery(y,l,s));else if(y==="$not"){if(l&&c){if(a=Object.keys(l),a.length&&nH(a[0]))for(let _ in l)l[_]=c.castForQuery(_,l[_],s);else h[y]=c.castForQuery(y,l,s);continue}}else h[y]=c.castForQuery(y,l,s)}else if(Array.isArray(h)&&["Buffer","Array"].indexOf(c.instance)===-1&&!n.sanitizeFilter){let f=[],y=h;for(let g of y)f.push(c.castForQuery(null,g,s));r[p]={$in:f}}else r[p]=c.castForQuery(null,h,s)}else{let f=p.split("."),y=f.length,g,_,w;for(;y--&&(g=f.slice(0,y).join("."),c=e.path(g),!c););if(c){if(c.schema){w={},_=f.slice(y).join("."),w[_]=h;let A=t(c.schema,w,n,s)[_];A===void 0?delete r[p]:r[p]=A}else r[p]=h;continue}if(Jx(h)){let A="";if(h.$near?A="$near":h.$nearSphere?A="$nearSphere":h.$within?A="$within":h.$geoIntersects?A="$geoIntersects":h.$geoWithin&&(A="$geoWithin"),A){let x=new YCe.Number("__QueryCasting__",null,null,e),v=h[A];if(h.$maxDistance!=null&&(h.$maxDistance=x.castForQuery(null,h.$maxDistance,s)),h.$minDistance!=null&&(h.$minDistance=x.castForQuery(null,h.$minDistance,s)),A==="$within"){let R=v.$center||v.$centerSphere||v.$box||v.$polygon;if(!R)throw new Error("Bad $within parameter: "+JSON.stringify(h));v=R}else if(A==="$near"&&typeof v.type=="string"&&Array.isArray(v.coordinates))v=v.coordinates;else if((A==="$near"||A==="$nearSphere"||A==="$geoIntersects")&&v.$geometry&&typeof v.$geometry.type=="string"&&Array.isArray(v.$geometry.coordinates))v.$maxDistance!=null&&(v.$maxDistance=x.castForQuery(null,v.$maxDistance,s)),v.$minDistance!=null&&(v.$minDistance=x.castForQuery(null,v.$minDistance,s)),Hx(v.$geometry)&&(v.$geometry=v.$geometry.toObject({transform:!1,virtuals:!1})),v=v.$geometry.coordinates;else if(A==="$geoWithin")if(v.$geometry){Hx(v.$geometry)&&(v.$geometry=v.$geometry.toObject({virtuals:!1}));let R=v.$geometry.type;if(rve.indexOf(R)===-1)throw new Error('Invalid geoJSON type for $geoWithin "'+R+'", must be "Polygon" or "MultiPolygon"');v=v.$geometry.coordinates}else v=v.$box||v.$polygon||v.$center||v.$centerSphere,Hx(v)&&(v=v.toObject({virtuals:!1}));Yx(v,x,s);continue}}if(e.nested[p])continue;let O="strict"in n?n.strict:e.options.strict,E=nve(n,e._userProvidedOptions,e.options,s);if(n.upsert&&O)throw O==="throw"?new Kx(p):new Kx(p,'Path "'+p+'" is not in schema, strict mode is `true`, and upsert is `true`.');if(E==="throw")throw new Kx(p,'Path "'+p+`" is not in schema and strictQuery is 'throw'.`);E&&delete r[p]}}return r};function Yx(t,e,r){if(Array.isArray(t))t.forEach(function(n,s){if(Array.isArray(n)||Jx(n))return Yx(n,e,r);t[s]=e.castForQuery(null,n,r)});else{let n=Object.keys(t),s=n.length;for(;s--;){let i=n[s],o=t[i];Array.isArray(o)||Jx(o)?(Yx(o,e,r),t[i]=o):t[i]=e.castForQuery({val:o,context:r})}}}function nve(t,e,r,n){if("strictQuery"in t)return t.strictQuery;if("strictQuery"in e)return e.strictQuery;let s=n?.mongooseCollection?.conn?.base?.options;return s&&"strictQuery"in s?s.strictQuery:r.strictQuery}});var oH=m((N$e,iH)=>{"use strict";var sve=qn(),Tc=class extends sve{},gE=hs();Object.defineProperty(Tc.prototype,"min",gE);Object.defineProperty(Tc.prototype,"max",gE);Object.defineProperty(Tc.prototype,"enum",gE);Object.defineProperty(Tc.prototype,"populate",gE);iH.exports=Tc});var on=m((k$e,aH)=>{"use strict";aH.exports=function(e,r,n,s){return n?s?{bsonType:r}:{bsonType:[r,"null"]}:s?{type:e}:{type:[e,"null"]}}});var Xh=m((R$e,cH)=>{"use strict";var ive=sn();function ove(t){let e=this;return Array.isArray(t)?t.map(function(r){return uH(e.path,r)}):Buffer.isBuffer(t)?t:uH(e.path,t)}function uH(t,e){let r=Number(e);if(isNaN(r))throw new ive("number",e,t);return r}cH.exports=ove});var Zx=m((F$e,lH)=>{"use strict";var bE=ds(),ave=oH(),Uo=kt(),uve=Gh(),cve=on(),_E=Xh(),Qx=ae(),Xx=Uo.CastError;function ft(t,e,r,n){this.enumValues=[],Uo.call(this,t,e,"Number",n)}ft.get=Uo.get;ft.set=Uo.set;ft.setters=[];ft._cast=uve;ft.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};ft._defaultCaster=t=>{if(typeof t!="number")throw new Error;return t};ft.schemaName="Number";ft.defaultOptions={};ft.prototype=Object.create(Uo.prototype);ft.prototype.constructor=ft;ft.prototype.OptionsConstructor=ave;ft._checkRequired=t=>typeof t=="number"||t instanceof Number;ft.checkRequired=Uo.checkRequired;ft.prototype.checkRequired=function(e,r){return typeof e=="object"&&Uo._isRef(this,e,r,!0)?e!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():ft.checkRequired())(e)};ft.prototype.min=function(t,e){if(this.minValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.minValidator},this)),t!=null){let r=e||bE.messages.Number.min;r=r.replace(/{MIN}/,t),this.validators.push({validator:this.minValidator=function(n){return n==null||n>=t},message:r,type:"min",min:t})}return this};ft.prototype.max=function(t,e){if(this.maxValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.maxValidator},this)),t!=null){let r=e||bE.messages.Number.max;r=r.replace(/{MAX}/,t),this.validators.push({validator:this.maxValidator=function(n){return n==null||n<=t},message:r,type:"max",max:t})}return this};ft.prototype.enum=function(t,e){if(this.enumValidator&&(this.validators=this.validators.filter(function(n){return n.validator!==this.enumValidator},this),this.enumValidator=!1),t===void 0||t===!1)return this;if(!Array.isArray(t)){if(Qx.isPOJO(t)&&t.values!=null?(e=t.message,t=t.values):typeof t=="number"&&(t=Array.prototype.slice.call(arguments),e=null),Qx.isPOJO(t)){let s=Object.keys(t).sort(),i=Object.values(t).sort();s.length===i.length&&s.every((o,a)=>o===String(i[a]))&&i.filter(o=>typeof o=="number").length===Math.floor(i.length/2)?t=i.filter(o=>typeof o=="number"):t=Object.values(t)}e=e||bE.messages.Number.enum}e=e??bE.messages.Number.enum;for(let n of t)n!==void 0&&this.enumValues.push(this.cast(n));let r=this.enumValues;return this.enumValidator=n=>n==null||r.indexOf(n)!==-1,this.validators.push({validator:this.enumValidator,message:e,type:"enum",enumValues:r}),this};ft.prototype.cast=function(t,e,r,n,s){if(typeof t!="number"&&Uo._isRef(this,t,e,r)&&(t==null||Qx.isNonBuiltinObject(t)))return this._castRef(t,e,r,s);let i=t?._id!==void 0?t._id:t,o;typeof this._castFunction=="function"?o=this._castFunction:typeof this.constructor.cast=="function"?o=this.constructor.cast():o=ft.cast();try{return o(i)}catch(a){throw new Xx("Number",i,this.path,a,this)}};function EE(t){return this.cast(t)}function lve(t){let e=this;return Array.isArray(t)?t.map(function(r){return e.cast(r)}):[this.cast(t)]}var pve={...Uo.prototype.$conditionalHandlers,$bitsAllClear:_E,$bitsAnyClear:_E,$bitsAllSet:_E,$bitsAnySet:_E,$gt:EE,$gte:EE,$lt:EE,$lte:EE,$mod:lve};Object.defineProperty(ft.prototype,"$conditionalHandlers",{enumerable:!1,value:pve});ft.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Xx("number",e,this.path,null,this);return n.call(this,e,r)}try{e=this.applySetters(e,r)}catch(s){throw s instanceof Xx&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}return e};ft.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function"||this.path==="_id";return cve("number","number",e?.useBsonType,r)};lH.exports=ft});var Zh=m(e7=>{"use strict";var dve=Zx();e7.castToNumber=pH;e7.castArraysOfNumbers=dH;function pH(t){return dve.cast()(t)}function dH(t,e){t.forEach(function(r,n){Array.isArray(r)?dH(r,e):t[n]=pH.call(e,r)})}});var n7=m(wE=>{"use strict";var hH=Zh().castArraysOfNumbers,ef=Zh().castToNumber;wE.cast$geoIntersects=mve;wE.cast$near=hve;wE.cast$within=fve;function hve(t){let e=SE();if(Array.isArray(t))return hH(t,this),t;if(r7(this,t),t?.$geometry)return t7(t,this);if(!Array.isArray(t))throw new TypeError("$near must be either an array or an object with a $geometry property");return e.prototype.castForQuery.call(this,null,t)}function t7(t,e){switch(t.$geometry.type){case"Polygon":case"LineString":case"Point":hH(t.$geometry.coordinates,e);break;default:break}return r7(e,t),t}function fve(t){if(r7(this,t),t.$box||t.$polygon){let e=t.$box?"$box":"$polygon";t[e].forEach(r=>{if(!Array.isArray(r)){let n="Invalid $within $box argument. Expected an array, received "+r;throw new TypeError(n)}r.forEach((n,s)=>{r[s]=ef.call(this,n)})})}else if(t.$center||t.$centerSphere){let e=t.$center?"$center":"$centerSphere";t[e].forEach((r,n)=>{Array.isArray(r)?r.forEach((s,i)=>{r[i]=ef.call(this,s)}):t[e][n]=ef.call(this,r)})}else t.$geometry&&t7(t,this);return t}function mve(t){if(t.$geometry)return t7(t,this),t}function r7(t,e){e.$maxDistance&&(e.$maxDistance=ef.call(t,e.$maxDistance)),e.$minDistance&&(e.$minDistance=ef.call(t,e.$minDistance))}});var SE=m((j$e,yH)=>{"use strict";var yve=M_(),gve=W8(),mH=we(),_ve=jK(),ms=kt(),AE=ms.CastError,OE=_c(),Eve=Bx(),fH=lE(),bve=UK(),i7=xc(),wve=vt(),Sve=bn(),Ave=Yh(),CE=require("util"),su=ae(),Ove=Zh().castToNumber,Cve=on(),o7=n7(),vve=Us(),tf,s7,xve=Object.freeze({});function ke(t,e,r,n,s){s7||(s7=e1().Embedded);let i="type";if(n?.typeKey&&(i=n.typeKey),this.schemaOptions=n,e){let u={};su.isPOJO(e)&&(e[i]?(u=wve(e),delete u[i],e=e[i]):e=OE),r?.ref!=null&&u.ref==null&&(u.ref=r.ref),e===Object&&(e=OE);let c=typeof e=="string"?e:su.getFunctionName(e),l=Qh(),p=Object.hasOwn(l,c)?l[c]:e;typeof p=="function"?p===ke?this.embeddedSchemaType=new p(t,u,n,null,s):this.embeddedSchemaType=new p(t,u,n,s):p instanceof ms&&(this.embeddedSchemaType=p,this.embeddedSchemaType instanceof s7||(this.embeddedSchemaType.path=t))}this.$isMongooseArray=!0,ms.call(this,t,r,"Array",s);let o,a;if(this.defaultValue!=null&&(o=this.defaultValue,a=typeof o=="function"),!("defaultValue"in this)||this.defaultValue!=null){let u=function(){return a?o.call(this):o!=null?[].concat(o):[]};u.$runBeforeSetters=!a,this.default(u)}}ke.schemaName="Array";ke.options={castNonArrays:!0};ke.defaultOptions={};ke.set=ms.set;ke.setters=[];ke.get=ms.get;ke.prototype=Object.create(ms.prototype);ke.prototype.constructor=ke;ke.prototype.OptionsConstructor=_ve;ke._checkRequired=ms.prototype.checkRequired;ke.checkRequired=ms.checkRequired;ke.prototype.virtuals=null;ke.prototype.checkRequired=function(e,r){return typeof e=="object"&&ms._isRef(this,e,r,!0)?!!e:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():ke.checkRequired())(e)};ke.prototype.enum=function(){let t=this;for(;;){let r=t?.embeddedSchemaType?.instance;if(r==="Array"){t=t.embeddedSchemaType;continue}if(r!=="String"&&r!=="Number")throw new Error("`enum` can only be set on an array of strings or numbers , not "+r);break}let e=arguments;return!Array.isArray(arguments)&&su.isObject(arguments)&&(e=su.object.vals(e)),t.embeddedSchemaType.enum.apply(t.embeddedSchemaType,e),this};ke.prototype.applyGetters=function(t,e){return e?.$__!=null&&e.$populated(this.path)?t:ms.prototype.applyGetters.call(this,t,e)};ke.prototype._applySetters=function(t,e,r,n){if(this.embeddedSchemaType.$isMongooseArray&&ke.options.castNonArrays){let s=0,i=this;for(;i!=null&&i.$isMongooseArray&&!i.$isMongooseDocumentArray;)++s,i=i.embeddedSchemaType;if(t!=null&&t.length!==0){let o=bve(t);if(o.min===o.max&&o.max<s&&o.containsNonArrayItem)for(let a=o.max;a<s;++a)t=[t]}}return ms.prototype._applySetters.call(this,t,e,r,n)};ke.prototype.cast=function(t,e,r,n,s){tf||(tf=e1().Array);let i,o;if(Array.isArray(t)){if(!t.length&&e){let h=e.schema.indexedPaths(),f=this.path;for(i=0,o=h.length;i<o;++i){let g=h[i][0][f];if(g==="2dsphere"||g==="2d")return}let y=this.path.endsWith(".coordinates")?this.path.substring(0,this.path.lastIndexOf(".")):null;if(y!=null){for(i=0,o=h.length;i<o;++i)if(h[i][0][y]==="2dsphere")return}}s=s||xve;let c=su.isMongooseArray(t)?t.__array:t,l=s.path||this.path;if(s.arrayPathIndex!=null&&(l+="."+s.arrayPathIndex),t=tf(c,l,e,this),c=t.__array,r&&e?.$__!=null&&e.$populated(this.path))return t;let p=this.embeddedSchemaType,d=p.$isMongooseArray;if(p&&this.embeddedSchemaType.constructor!==OE)try{let h=c.length;for(i=0;i<h;i++){let f={};d&&(s.arrayPath!=null||p._arrayParentPath!=null)&&(f.arrayPathIndex=i),s.hydratedPopulatedDocs&&(f.hydratedPopulatedDocs=s.hydratedPopulatedDocs),s.virtuals&&(f.virtuals=s.virtuals),c[i]=p.applySetters(c[i],e,r,void 0,f)}}catch(h){throw new AE("["+h.kind+"]",CE.inspect(t),this.path+"."+i,h,this)}return t}let a=this.options.castNonArrays??ke.options.castNonArrays;if(r||a)return e&&r&&e.markModified(this.path),this.cast([t],e,r);throw new AE("Array",CE.inspect(t),this.path,null,this)};ke.prototype._castForPopulate=function(e,r){if(tf||(tf=e1().Array),Array.isArray(e)){let n,s=e.__array?e.__array:e,i=s.length;if(this.embeddedSchemaType&&this.embeddedSchemaType.constructor!==OE)try{for(n=0;n<i;n++){let o={};this.embeddedSchemaType.$isMongooseArray&&this.embeddedSchemaType._arrayParentPath!=null&&(o.arrayPathIndex=n),s[n]=this.embeddedSchemaType.cast(s[n],r,!1,void 0,o)}}catch(o){throw new AE("["+o.kind+"]",CE.inspect(e),this.path+"."+n,o,this)}return e}throw new AE("Array",CE.inspect(e),this.path,null,this)};ke.prototype.$toObject=ke.prototype.toObject;ke.prototype.discriminator=function(...t){let e=this;for(;e.$isMongooseArray&&!e.$isMongooseDocumentArray;)e=e.embeddedSchemaType;if(!e.$isMongooseDocumentArray)throw new mH("You can only add an embedded discriminator on a document array, "+this.path+" is a plain array");return e.discriminator(...t)};ke.prototype.clone=function(){let t=Object.assign({},this.options),e=new this.constructor(this.path,this.embeddedSchemaType,t,this.schemaOptions,this.parentSchema);return e.validators=this.validators.slice(),this.requiredValidator!==void 0&&(e.requiredValidator=this.requiredValidator),e};ke.prototype._castForQuery=function(t,e){let r=this.embeddedSchemaType,n=r?.schema?.options?.discriminatorKey,s=r?.discriminators;if(t&&s&&typeof n=="string")if(s[t[n]])r=s[t[n]];else{let i=vve(s,t[n]);i&&(r=i)}return Array.isArray(t)?(this.setters.reverse().forEach(i=>{t=i.call(this,t,this)}),t=t.map(function(i){return su.isObject(i)&&i.$elemMatch?i:r.castForQuery(null,i,e)})):t=r.castForQuery(null,t,e),t};ke.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with Array.");return n.call(this,e,r)}else return this._castForQuery(e,r)};ke.prototype.virtual=function(e,r){if(e instanceof fH||Sve(e)==="VirtualType")return this.virtual(e.path,e.options);if(r=new Eve(r),su.hasUserDefinedProperty(r,["ref","refPath"]))throw new mH("Cannot set populate virtual as a property of an array");let n=new fH(r,e);return this.virtuals===null&&(this.virtuals={}),this.virtuals[e]=n,n};function Tve(t,e){return Array.isArray(t)||(t=[t]),t=t.map(r=>{if(!su.isObject(r))return r;if(r.$elemMatch!=null)return{$elemMatch:i7(this.embeddedSchemaType.schema,r.$elemMatch,null,this?.$$context)};let n={};return n[this.path]=r,i7(this.embeddedSchemaType.schema,n,null,this?.$$context)[this.path]},this),this.castForQuery(null,t,e)}function Dve(t,e){let r=Object.keys(t),n=r.length;for(let s=0;s<n;++s){let i=r[s],o=t[i];Ave(i)&&o!=null&&(t[i]=this.castForQuery(i,o,e))}return t}var ct=ke.prototype.$conditionalHandlers={};ct.$all=Tve;ct.$options=String;ct.$elemMatch=Dve;ct.$geoIntersects=o7.cast$geoIntersects;ct.$or=a7("$or");ct.$and=a7("$and");ct.$nor=a7("$nor");function a7(t){return function(r,n){if(!Array.isArray(r))throw new TypeError("conditional "+t+" requires an array");let s=[];for(let i of r)s.push(i7(this.embeddedSchemaType.schema??n.schema,i,null,this?.$$context));return s}}ct.$near=ct.$nearSphere=o7.cast$near;ct.$within=ct.$geoWithin=o7.cast$within;ct.$size=ct.$minDistance=ct.$maxDistance=Ove;ct.$exists=yve;ct.$type=gve;ct.$eq=ct.$gt=ct.$gte=ct.$lt=ct.$lte=ct.$not=ct.$regex=ct.$ne=ke.prototype._castForQuery;ct.$nin=ms.prototype.$conditionalHandlers.$nin;ct.$in=ms.prototype.$conditionalHandlers.$in;ke.prototype.toJSONSchema=function(e){let r=this.getEmbeddedSchemaType(),n=this.options.required&&typeof this.options.required!="function";return{...Cve("array","array",e?.useBsonType,n),items:r.toJSONSchema(e)}};ke.prototype.autoEncryptionType=function(){return"array"};yH.exports=ke});var EH=m((L$e,_H)=>{"use strict";var{Long:Mve}=pe(),u7=9223372036854775807n,c7=-9223372036854775808n,gH=`Mongoose only supports BigInts between ${c7} and ${u7} because MongoDB does not support arbitrary precision integers`;_H.exports=function(e){if(e==null)return e;if(e==="")return null;if(typeof e=="bigint"){if(e>u7||e<c7)throw new Error(gH);return e}if(e instanceof Mve)return e.toBigInt();if(typeof e=="string"||typeof e=="number"){if(e=BigInt(e),e>u7||e<c7)throw new Error(gH);return e}throw new Error(`Cannot convert value to BigInt: "${e}"`)}});var SH=m((U$e,wH)=>{"use strict";var bH=sn(),n1=kt(),Pve=EH(),Bve=on();function Ft(t,e,r,n){n1.call(this,t,e,"BigInt",n)}Ft.schemaName="BigInt";Ft.defaultOptions={};Ft.prototype=Object.create(n1.prototype);Ft.prototype.constructor=Ft;Ft._cast=Pve;Ft.set=n1.set;Ft.setters=[];Ft.get=n1.get;Ft.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Ft._checkRequired=t=>t!=null;Ft.checkRequired=n1.checkRequired;Ft.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};Ft.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=Ft.cast();try{return e(t)}catch(r){throw new bH("BigInt",t,this.path,r,this)}};var Ive={...n1.prototype.$conditionalHandlers,$gt:vE,$gte:vE,$lt:vE,$lte:vE};Object.defineProperty(Ft.prototype,"$conditionalHandlers",{enumerable:!1,value:Ive});function vE(t,e){return this.castForQuery(null,t,e)}Ft.prototype.castForQuery=function(t,e,r){let n;if(t!=null)return n=this.$conditionalHandlers[t],n?n.call(this,e):this.applySetters(e,r);try{return this.applySetters(e,r)}catch(s){throw s instanceof bH&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}};Ft.prototype._castNullish=function(e){return typeof e>"u"||(typeof this.constructor.cast=="function"?this.constructor.cast():Ft.cast())==null,e};Ft.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return Bve("string","long",e?.useBsonType,r)};Ft.prototype.autoEncryptionType=function(){return"long"};wH.exports=Ft});var CH=m((V$e,OH)=>{"use strict";var AH=sn(),s1=kt(),rf=D_(),Nve=on();function mt(t,e,r,n){s1.call(this,t,e,"Boolean",n)}mt.schemaName="Boolean";mt.defaultOptions={};mt.prototype=Object.create(s1.prototype);mt.prototype.constructor=mt;mt._cast=rf;mt.set=s1.set;mt.setters=[];mt.get=s1.get;mt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};mt._defaultCaster=t=>{if(t!=null&&typeof t!="boolean")throw new Error;return t};mt._checkRequired=t=>t===!0||t===!1;mt.checkRequired=s1.checkRequired;mt.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};Object.defineProperty(mt,"convertToTrue",{get:()=>rf.convertToTrue,set:t=>{rf.convertToTrue=t}});Object.defineProperty(mt,"convertToFalse",{get:()=>rf.convertToFalse,set:t=>{rf.convertToFalse=t}});mt.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=mt.cast();try{return e(t)}catch(r){throw new AH("Boolean",t,this.path,r,this)}};var kve={...s1.prototype.$conditionalHandlers};Object.defineProperty(mt.prototype,"$conditionalHandlers",{enumerable:!1,value:kve});mt.prototype.castForQuery=function(t,e,r){let n;if(t!=null)return n=this.$conditionalHandlers[t],n?n.call(this,e):this.applySetters(e,r);try{return this.applySetters(e,r)}catch(s){throw s instanceof AH&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}};mt.prototype._castNullish=function(e){if(typeof e>"u")return e;let r=typeof this.constructor.cast=="function"?this.constructor.cast():mt.cast();return r==null?e:r.convertToFalse instanceof Set&&r.convertToFalse.has(e)?!1:r.convertToTrue instanceof Set&&r.convertToTrue.has(e)?!0:e};mt.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return Nve("boolean","bool",e?.useBsonType,r)};mt.prototype.autoEncryptionType=function(){return"bool"};OH.exports=mt});var xH=m((W$e,vH)=>{"use strict";var Rve=qn(),xE=class extends Rve{},Fve=hs();Object.defineProperty(xE.prototype,"subtype",Fve);vH.exports=xE});var MH=m((z$e,DH)=>{"use strict";var i1=B_(),$ve=xH(),Vo=kt(),qve=on(),TE=Xh(),TH=ae(),l7=i1.Binary,ME=Vo.CastError;function cr(t,e,r,n){Vo.call(this,t,e,"Buffer",n)}cr.schemaName="Buffer";cr.defaultOptions={};cr.prototype=Object.create(Vo.prototype);cr.prototype.constructor=cr;cr.prototype.OptionsConstructor=$ve;cr._checkRequired=t=>!!t?.length;cr.set=Vo.set;cr.setters=[];cr.get=Vo.get;cr.checkRequired=Vo.checkRequired;cr.prototype.checkRequired=function(t,e){return Vo._isRef(this,t,e,!0)?!!t:this.constructor._checkRequired(t)};cr.prototype.cast=function(t,e,r,n,s){let i;if(Vo._isRef(this,t,e,r)){if(t?.isMongooseBuffer)return t;if(Buffer.isBuffer(t))return t?.isMongooseBuffer||(t=new i1(t,[this.path,e]),this.options.subtype!=null&&(t._subtype=this.options.subtype)),t;if(t instanceof l7){if(i=new i1(t.value(!0),[this.path,e]),typeof t.sub_type!="number")throw new ME("Buffer",t,this.path,null,this);return i._subtype=t.sub_type,i}if(t==null||TH.isNonBuiltinObject(t))return this._castRef(t,e,r,s)}if(t?._id&&(t=t._id),t?.isMongooseBuffer)return t;if(Buffer.isBuffer(t))return t?.isMongooseBuffer||(t=new i1(t,[this.path,e]),this.options.subtype!=null&&(t._subtype=this.options.subtype)),t;if(t instanceof l7){if(i=new i1(t.value(!0),[this.path,e]),typeof t.sub_type!="number")throw new ME("Buffer",t,this.path,null,this);return i._subtype=t.sub_type,i}if(t===null)return t;let o=typeof t;if(o==="string"||o==="number"||Array.isArray(t)||o==="object"&&t.type==="Buffer"&&Array.isArray(t.data))return o==="number"&&(t=[t]),i=new i1(t,[this.path,e]),this.options.subtype!=null&&(i._subtype=this.options.subtype),i;if(TH.isPOJO(t)&&(t.$binary instanceof l7||typeof t.$binary=="string")){let a=this.cast(Buffer.from(t.$binary,"base64"));if(t.$type!=null)return a._subtype=t.$type,a}throw new ME("Buffer",t,this.path,null,this)};cr.prototype.subtype=function(t){return this.options.subtype=t,this};function DE(t,e){return this.castForQuery(null,t,e)}var jve={...Vo.prototype.$conditionalHandlers,$bitsAllClear:TE,$bitsAnyClear:TE,$bitsAllSet:TE,$bitsAnySet:TE,$gt:DE,$gte:DE,$lt:DE,$lte:DE};Object.defineProperty(cr.prototype,"$conditionalHandlers",{enumerable:!1,value:jve});cr.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with Buffer.");return n.call(this,e)}let s;try{s=this.applySetters(e,r)}catch(i){throw i instanceof ME&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}return s&&s.toObject({transform:!1,virtuals:!1})};cr.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return qve("string","binData",e?.useBsonType,r)};cr.prototype.autoEncryptionType=function(){return"binData"};DH.exports=cr});var BH=m((K$e,PH)=>{"use strict";var Lve=qn(),o1=class extends Lve{},p7=hs();Object.defineProperty(o1.prototype,"min",p7);Object.defineProperty(o1.prototype,"max",p7);Object.defineProperty(o1.prototype,"expires",p7);PH.exports=o1});var NH=m((H$e,IH)=>{"use strict";var d7=require("assert");IH.exports=function(e){if(e==null||e==="")return null;if(e instanceof Date)return d7.ok(!isNaN(e.valueOf())),e;let r;if(d7.ok(typeof e!="boolean"),e instanceof Number||typeof e=="number"?r=new Date(e):typeof e=="string"&&!isNaN(Number(e))&&(Number(e)>=275761||Number(e)<-271820)?r=new Date(Number(e)):typeof e.valueOf=="function"?r=new Date(e.valueOf()):r=new Date(e),!isNaN(r.valueOf()))return r;d7.ok(!1)}});var $H=m((G$e,FH)=>{"use strict";var kH=ds(),Uve=BH(),iu=kt(),Vve=NH(),Wve=on(),zve=bn(),Kve=ae(),RH=iu.CastError;function lt(t,e,r,n){iu.call(this,t,e,"Date",n)}lt.schemaName="Date";lt.defaultOptions={};lt.prototype=Object.create(iu.prototype);lt.prototype.constructor=lt;lt.prototype.OptionsConstructor=Uve;lt._cast=Vve;lt.set=iu.set;lt.setters=[];lt.get=iu.get;lt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};lt._defaultCaster=t=>{if(t!=null&&!(t instanceof Date))throw new Error;return t};lt.prototype.expires=function(t){return zve(this._index)!=="Object"&&(this._index={}),this._index.expires=t,Kve.expires(this._index),this};lt._checkRequired=t=>t instanceof Date;lt.checkRequired=iu.checkRequired;lt.prototype.checkRequired=function(t,e){return typeof t=="object"&&iu._isRef(this,t,e,!0)?t!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():lt.checkRequired())(t)};lt.prototype.min=function(t,e){if(this.minValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.minValidator},this)),t){let r=e||kH.messages.Date.min;typeof r=="string"&&(r=r.replace(/{MIN}/,t===Date.now?"Date.now()":t.toString()));let n=this;this.validators.push({validator:this.minValidator=function(s){let i=t;typeof t=="function"&&t!==Date.now&&(i=i.call(this));let o=i===Date.now?i():n.cast(i);return s===null||s.valueOf()>=o.valueOf()},message:r,type:"min",min:t})}return this};lt.prototype.max=function(t,e){if(this.maxValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.maxValidator},this)),t){let r=e||kH.messages.Date.max;typeof r=="string"&&(r=r.replace(/{MAX}/,t===Date.now?"Date.now()":t.toString()));let n=this;this.validators.push({validator:this.maxValidator=function(s){let i=t;typeof i=="function"&&i!==Date.now&&(i=i.call(this));let o=i===Date.now?i():n.cast(i);return s===null||s.valueOf()<=o.valueOf()},message:r,type:"max",max:t})}return this};lt.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=lt.cast();try{return e(t)}catch(r){throw new RH("date",t,this.path,r,this)}};function PE(t){return this.cast(t)}var Hve={...iu.prototype.$conditionalHandlers,$gt:PE,$gte:PE,$lt:PE,$lte:PE};Object.defineProperty(lt.prototype,"$conditionalHandlers",{enumerable:!1,value:Hve});lt.prototype.castForQuery=function(t,e,r){if(t==null)try{return this.applySetters(e,r)}catch(s){throw s instanceof RH&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}let n=this.$conditionalHandlers[t];if(!n)throw new Error("Can't use "+t+" with Date.");return n.call(this,e)};lt.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return Wve("string","date",e?.useBsonType,r)};lt.prototype.autoEncryptionType=function(){return"date"};FH.exports=lt});var jH=m((J$e,qH)=>{"use strict";var Dc=h_(),Gve=require("assert");qH.exports=function(e){if(e==null)return e;if(typeof e=="object"&&typeof e.$numberDecimal=="string")return Dc.fromString(e.$numberDecimal);if(e instanceof Dc)return e;if(typeof e=="string")return Dc.fromString(e);if(typeof Buffer=="function"&&Buffer.isBuffer(e))return new Dc(e);if(typeof Uint8Array=="function"&&e instanceof Uint8Array)return new Dc(e);if(typeof e=="number")return Dc.fromString(String(e));if(typeof e.valueOf=="function"&&typeof e.valueOf()=="string")return Dc.fromString(e.valueOf());Gve.ok(!1)}});var UH=m((Y$e,LH)=>{"use strict";var Wo=kt(),Jve=Wo.CastError,Yve=jH(),Qve=on(),h7=$r();function zt(t,e,r,n){Wo.call(this,t,e,"Decimal128",n)}zt.schemaName="Decimal128";zt.defaultOptions={};zt.prototype=Object.create(Wo.prototype);zt.prototype.constructor=zt;zt._cast=Yve;zt.set=Wo.set;zt.setters=[];zt.get=Wo.get;zt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};zt._defaultCaster=t=>{if(t!=null&&!h7(t,"Decimal128"))throw new Error;return t};zt._checkRequired=t=>h7(t,"Decimal128");zt.checkRequired=Wo.checkRequired;zt.prototype.checkRequired=function(e,r){return Wo._isRef(this,e,r,!0)?!!e:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():zt.checkRequired())(e)};zt.prototype.cast=function(t,e,r,n,s){if(Wo._isRef(this,t,e,r))return h7(t,"Decimal128")?t:this._castRef(t,e,r,s);let i;typeof this._castFunction=="function"?i=this._castFunction:typeof this.constructor.cast=="function"?i=this.constructor.cast():i=zt.cast();try{return i(t)}catch(o){throw new Jve("Decimal128",t,this.path,o,this)}};function BE(t){return this.cast(t)}var Xve={...Wo.prototype.$conditionalHandlers,$gt:BE,$gte:BE,$lt:BE,$lte:BE};Object.defineProperty(zt.prototype,"$conditionalHandlers",{enumerable:!1,value:Xve});zt.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return Qve("string","decimal",e?.useBsonType,r)};zt.prototype.autoEncryptionType=function(){return"decimal"};LH.exports=zt});var zH=m((Q$e,WH)=>{"use strict";var Zve=qn(),nf=class extends Zve{},VH=hs();Object.defineProperty(nf.prototype,"_id",VH);Object.defineProperty(nf.prototype,"minimize",VH);WH.exports=nf});var HH=m((X$e,KH)=>{"use strict";KH.exports=function(e){e.s.hooks.pre("save",!1,async function(){if(this.$isSubdocument)return;let s=this.$getAllSubdocs({useCache:!0});if(!s.length)return;let i=this.$__.saveOptions;await Promise.all(s.map(o=>o._execDocumentPreHooks("save",i))),this.$__.saveOptions&&(this.$__.saveOptions.__subdocs=null)},null,!0),e.s.hooks.pre("save",async function(){let s=this.$__.removedSubdocs;if(!s?.length)return;let i=[];for(let o of s)i.push(o._execDocumentPreHooks("deleteOne"));await Promise.all(i)}),e.s.hooks.post("save",async function(){let s=this.$__.removedSubdocs;if(!s?.length)return;let i=[];for(let o of s)i.push(o._execDocumentPostHooks("deleteOne"));this.$__.removedSubdocs=null,await Promise.all(i)}),e.s.hooks.post("save",async function(){if(this.$isSubdocument)return;let s=this.$getAllSubdocs({useCache:!0});if(!s.length)return;let i=[];for(let o of s)i.push(o._execDocumentPostHooks("save"));await Promise.all(i)},null,!0)}});var JH=m((Z$e,y7)=>{"use strict";var e9e=te().objectIdSymbol,GH=ae();y7.exports=function(e){e.post("init",function(){return m7.call(this),this}),e.pre("save",function(){f7.call(this)}),e.pre("deleteOne",{document:!0,query:!1},function(){f7.call(this)}),e.pre("updateOne",{document:!0,query:!1},function(){f7.call(this)}),e.post("save",function(){m7.call(this)})};function f7(){let t,e;if(this.$__.shardval){t=Object.keys(this.$__.shardval),e=t.length,this.$where=this.$where||{};for(let r=0;r<e;++r)this.$where[t[r]]=this.$__.shardval[t[r]]}}y7.exports.storeShard=m7;function m7(){let t=this.$__schema.options.shardKey||this.$__schema.options.shardkey;if(!GH.isPOJO(t))return;let e=this.$__.shardval={},r=Object.keys(t),n=r.length,s;for(let i=0;i<n;++i)s=this.$__getValue(r[i]),s==null?e[r[i]]=s:GH.isMongooseObject(s)?e[r[i]]=s.toObject({depopulate:!0,_isNested:!0}):s instanceof Date||s[e9e]?e[r[i]]=s:typeof s.valueOf=="function"?e[r[i]]=s.valueOf():e[r[i]]=s}});var XH=m((eqe,QH)=>{"use strict";var a1=te().arrayAtomicsSymbol,g7=te().sessionNewDocuments,_7=ae();QH.exports=function(e){e.pre("save",function(){let n=this.$session();if(n!=null&&!(n.transaction==null||n[g7]==null)&&!n[g7].has(this)){let s={};this.isNew&&(s.isNew=!0),this.$__schema.options.versionKey&&(s.versionKey=this.get(this.$__schema.options.versionKey)),s.modifiedPaths=new Set(Object.keys(this.$__.activePaths.getStatePaths("modify"))),s.atomics=t9e(this),n[g7].set(this,s)}})};function t9e(t,e){let r=new Map;e=e||new Map;let n=Object.keys(t.$__.activePaths.init).concat(Object.keys(t.$__.activePaths.modify));for(let i of n){let o=t.$__getValue(i);if(Array.isArray(o)&&_7.isMongooseDocumentArray(o)&&o.length&&o[a1]!=null&&_7.hasOwnKeys(o[a1])){let a=e.get(i)||{};r.set(i,YH(a,o[a1]))}}let s=t.$__dirty();for(let i of s){let o=i.path,a=i.value;if(a?.[a1]!=null&&_7.hasOwnKeys(a[a1])){let u=e.get(o)||{};r.set(o,YH(u,a[a1]))}}return r}function YH(t,e){return t=t||{},e.$pullAll!=null&&(t.$pullAll=(t.$pullAll||[]).concat(e.$pullAll)),e.$push!=null&&(t.$push=t.$push||{},t.$push.$each=(t.$push.$each||[]).concat(e.$push.$each)),e.$addToSet!=null&&(t.$addToSet=(t.$addToSet||[]).concat(e.$addToSet)),e.$set!=null&&(t.$set=Array.isArray(e.$set)?[...e.$set]:Object.assign({},e.$set)),t}});var eG=m((tqe,ZH)=>{"use strict";ZH.exports=function(e){e.pre("save",!1,async function(s){if(this.$isSubdocument)return;let i=s&&typeof s=="object"&&"validateBeforeSave"in s,o;if(i?o=!!s.validateBeforeSave:o=this.$__schema.options.validateBeforeSave,o){let u=s&&typeof s=="object"&&"validateModifiedOnly"in s?{validateModifiedOnly:s.validateModifiedOnly}:null;await this.$validate(u).then(()=>{this.$op="save"})}},null,!0)}});var E7=m(sf=>{"use strict";sf.saveSubdocs=HH();sf.sharding=JH();sf.trackTransaction=XH();sf.validateBeforeSave=eG()});var nG=m((nqe,rG)=>{"use strict";var tG=E7();rG.exports=function(e){for(let r of Object.values(tG))r(e,{deduplicate:!0});e.plugins=Object.values(tG).map(r=>({fn:r,opts:{deduplicate:!0}})).concat(e.plugins)}});var oG=m((sqe,iG)=>{"use strict";var r9e=P_(),n9e=dc(),s9e=$r(),i9e=Za(),o9e=kt(),sG=hc();iG.exports=function t(e,r,n,s){let i=Object.keys(r),o=0,a=i.length,u;if(n=n||"",s=s||new WeakSet,!s.has(r)){for(s.add(r);o<a;)if(u=i[o++],!(!n&&(u==="discriminators"||u==="base"||u==="_applyDiscriminators"||u==="_userProvidedOptions"||u==="options"||u==="tree"))&&!(n==="tree"&&r?.instanceOfSchema)&&!n9e.has(u)&&u!=="parentSchema"){if(e[u]==null)e[u]=r[u];else if(sG(r[u])){if(sG(e[u])||(e[u]={}),r[u]!=null){if(r[u].$isSingleNested&&e[u].$isMongooseDocumentArray||r[u].$isMongooseDocumentArray&&e[u].$isSingleNested||r[u].$isMongooseDocumentArrayElement&&e[u].$isMongooseDocumentArrayElement)continue;if(r[u].instanceOfSchema){e[u].instanceOfSchema?r9e(e[u],r[u].clone(),!0):e[u]=r[u].clone();continue}else if(s9e(r[u],"ObjectId")){e[u]=new i9e(r[u]);continue}else if(r[u]instanceof o9e&&(e[u]==null&&(e[u]=r[u].clone()),!r[u].$isMongooseDocumentArray&&!r[u].$isSingleNested))continue}t(e[u],r[u],n?n+"."+u:u,s)}}r?.instanceOfSchema&&(e.tree=Object.assign({},r.tree,e.tree))}}});var IE=m((iqe,cG)=>{"use strict";var aG=_c(),a9e=nG(),u9e=vt(),c9e=U_().defineKey,l9e=Rt(),b7=ae(),p9e=oG(),uG={toJSON:!0,toObject:!0,_id:!0,id:!0,virtuals:!0,methods:!0,statics:!0};function d9e(t,e){if(t.encryptionType()==null&&e.encryptionType()==null)return;let r=s(n(t),n(e));for(let i of r){if(t._hasEncryptedField(i)&&e._hasEncryptedField(i))throw new Error(`encrypted fields cannot be declared on both the base schema and the child schema in a discriminator. path=${i}`);if(t._hasEncryptedField(i)||e._hasEncryptedField(i))throw new Error(`encrypted fields cannot have the same path as a non-encrypted field for discriminators. path=${i}`)}function n(i){return[...Object.keys(i.paths),...Object.keys(i.singleNestedPaths)]}function*s(i,o){let a=new Set(i);for(let u of o)a.has(u)&&(yield u)}}cG.exports=function(e,r,n,s,i,o,a){if(!n?.instanceOfSchema)throw new Error("You must pass a valid discriminator Schema");if(o=o??!0,e.schema.discriminatorMapping&&!e.schema.discriminatorMapping.isRoot)throw new Error('Discriminator "'+r+'" can only be a discriminator of the root model');if(i){let d=l9e(e.base,"options.applyPluginsToDiscriminators",!1)||!o;e.base._applyPlugins(n,{skipTopLevel:!d})}else o||a9e(n);let u=e.schema.options.discriminatorKey,c=e.schema.path(u);if(c!=null)b7.hasUserDefinedProperty(c.options,"select")||(c.options.select=!0),c.options.$skipDiscriminatorCheck=!0;else{let d={};d[u]={default:void 0,select:!0,$skipDiscriminatorCheck:!0},d[u][e.schema.options.typeKey]=String,e.schema.add(d),c9e({prop:u,prototype:e.prototype,options:e.schema.options})}if(n.path(u)&&n.path(u).options.$skipDiscriminatorCheck!==!0)throw new Error('Discriminator "'+r+'" cannot have field with name "'+u+'"');let l=r;(typeof s=="string"&&s.length||s!=null)&&(l=s),d9e(e.schema,n);function p(d,h){d._baseSchema=h,h.paths._id&&h.paths._id.options&&!h.paths._id.options.auto&&d.remove("_id");let f=Object.keys(h.paths),y=[];for(let v of f){if(d.nested[v]){y.push(v);continue}if(v.indexOf(".")===-1)continue;let R=v.split(".").slice(0,-1),M="";for(let I of R)M+=(M.length?".":"")+I,(d.paths[M]instanceof aG||d.singleNestedPaths[M]instanceof aG)&&y.push(v)}d.obj={...d.obj},p9e(d,h),d._gatherChildSchemas();for(let v of y)delete d.paths[v];d.childSchemas.forEach(v=>{v.model.prototype.$__setSchema(v.schema)});let g={};g[u]={default:l,select:!0,set:function(v){if(v===l||Array.isArray(l)&&b7.deepEqual(v,l))return l;throw new Error(`Can't set discriminator key "`+u+'"')},$skipDiscriminatorCheck:!0},g[u][d.options.typeKey]=c?c.options[d.options.typeKey]:String,d.add(g),d.discriminatorMapping={key:u,value:l,isRoot:!1},h.options.collection&&(d.options.collection=h.options.collection);let _=d.options.toJSON,w=d.options.toObject,O=d.options._id,E=d.options.id,A=Object.keys(d.options);d.options.discriminatorKey=h.options.discriminatorKey;let x=d._userProvidedOptions;for(let v of A)if(!uG[v]&&v in x&&!b7.deepEqual(d.options[v],h.options[v]))throw new Error("Can't customize discriminator option "+v+" (can only modify "+Object.keys(uG).join(", ")+")");d.options=u9e(h.options);for(let v of Object.keys(x))d.options[v]=x[v];_&&(d.options.toJSON=_),w&&(d.options.toObject=w),typeof O<"u"&&(d.options._id=O),d.options.id=E,o&&(d.s.hooks=e.schema.s.hooks.merge(d.s.hooks)),i&&(d.plugins=Array.prototype.slice.call(h.plugins)),d.callQueue=h.callQueue.concat(d.callQueue),delete d._requiredpaths}if(p(n,e.schema),e.discriminators||(e.discriminators={}),e.schema.discriminatorMapping||(e.schema.discriminatorMapping={key:u,value:null,isRoot:!0}),e.schema.discriminators||(e.schema.discriminators={}),e.schema.discriminators[r]=n,e.discriminators[r]&&!n.options.overwriteModels&&!a)throw new Error('Discriminator with name "'+r+'" already exists');return n}});var NE=m((oqe,lG)=>{"use strict";var h9e=Us();lG.exports=function(e,r,n){let s=e.schema.options.discriminatorKey,i=r?.[s];if(i==null&&(i=n),e.discriminators&&i!=null)if(e.discriminators[i])e=e.discriminators[i];else{let o=h9e(e.discriminators,i);o&&(e=o)}return e}});var w7=m((aqe,pG)=>{"use strict";var f9e=Nx();pG.exports=function(e,r){return r?._id==null||(e=e.clone(),r._id?e.paths._id||(f9e(e),e.options._id=!0):(e.remove("_id"),e.options._id=!1)),e}});var S7=m((uqe,dG)=>{"use strict";var m9e=we(),kE=class extends m9e{constructor(e,r){let n=`Cannot create use schema for property "${e}" because the schema has the ${r} option enabled.`;super(n)}};Object.defineProperty(kE.prototype,"name",{value:"InvalidSchemaOptionError"});dG.exports=kE});var v7=m((cqe,gG)=>{"use strict";var hG=sn(),A7=require("events").EventEmitter,y9e=k_(),g9e=zH(),Mc=kt(),_9e=q_(),E9e=M_(),fG=Zh().castToNumber,b9e=on(),w9e=IE(),O7=n7(),C7=NE(),S9e=w7(),A9e=bi().internalToObjectOptions,O9e=Hp(),mG=ae(),C9e=S7(),RE;gG.exports=lr;function lr(t,e,r,n){if(t.options.timeseries)throw new C9e(e,"timeseries");let s=lr.defaultOptions?._id;s!=null&&(r=r||{},r._id=s),t=S9e(t,r),this.Constructor=yG(t,null,r),this.Constructor.path=e,this.Constructor.prototype.$basePath=e,this.schema=t,this.$isSingleNested=!0,this.base=t.base,Mc.call(this,e,r,"Embedded",n)}lr.prototype=Object.create(Mc.prototype);lr.prototype.constructor=lr;lr.prototype.OptionsConstructor=g9e;function yG(t,e,r){RE||(RE=H_());let n=function(o,a,u){this.$__parent=u,RE.apply(this,arguments),u!=null&&this.$session(u.$session())};t._preCompile();let s=e?.prototype??RE.prototype;n.prototype=Object.create(s),n.prototype.$__setSchema(t),n.prototype.constructor=n,n.prototype.$__schemaTypeOptions=r,n.$__required=r?.required,n.base=t.base,n.schema=t,n.$isSingleNested=!0,n.events=new A7,n.prototype.toBSON=function(){return this.toObject(A9e)};for(let i in t.methods)n.prototype[i]=t.methods[i];for(let i in t.statics)n[i]=t.statics[i];for(let i in A7.prototype)n[i]=A7.prototype[i];return n}var to={...Mc.prototype.$conditionalHandlers};to.$geoWithin=function(e,r){return{$geometry:this.castForQuery(null,e.$geometry,r)}};to.$near=to.$nearSphere=O7.cast$near;to.$within=to.$geoWithin=O7.cast$within;to.$geoIntersects=O7.cast$geoIntersects;to.$minDistance=fG;to.$maxDistance=fG;to.$exists=E9e;Object.defineProperty(lr.prototype,"$conditionalHandlers",{enumerable:!1,value:to});lr.prototype.cast=function(t,e,r,n,s){if(t?.$isSingleNested&&t.parent===e)return t;if(!r&&t!=null&&(typeof t!="object"||Array.isArray(t)))throw new y9e(this.path,t);let i=this.schema.path(this.schema.options.discriminatorKey),o=i==null?null:i.getDefault(e),a=C7(this.Constructor,t,o),u,c=e?.$__?.selected,l=this.path,p=c==null?null:Object.keys(c).reduce((d,h)=>(h.startsWith(l+".")&&(d=d||{},d[h.substring(l.length+1)]=c[h]),d),null);if(r){u=new a(void 0,p,e,{defaults:!1}),delete u.$__.defaults,s.path!=null&&(s={...s},delete s.path),u.$init(t,s);let d=O9e(p);_9e(u,p,d)}else return s=Object.assign({},s,{priorDoc:n}),mG.hasOwnKeys(t)===!1?new a({},p,e,s):new a(t,p,e,s);return u};lr.prototype.castForQuery=function(t,e,r,n){let s;if(t!=null){if(s=this.$conditionalHandlers[t],!s)throw new Error("Can't use "+t);return s.call(this,e)}if(e==null)return e;let i=C7(this.Constructor,e);if(e instanceof i)return e;this.options.runSetters&&(e=this._applySetters(e,r));let o=n?.strict??void 0;try{e=new i(e,o)}catch(a){throw a instanceof hG?a:new hG("Embedded",e,this.path,a,this)}return e};lr.prototype.doValidate=async function(e,r,n){let s=C7(this.Constructor,e);if(e&&!(e instanceof s)&&(e=new s(e,null,r?.$__!=null?r:null)),n?.skipSchemaValidators)return e?e.validate():void 0;await Mc.prototype.doValidate.call(this,e,r,n),e!=null&&await e.validate()};lr.prototype.doValidateSync=function(t,e,r){if(!r?.skipSchemaValidators){let n=Mc.prototype.doValidateSync.call(this,t,e);if(n)return n}if(t)return t.validateSync()};lr.prototype.discriminator=function(t,e,r){r=r||{};let n=mG.isPOJO(r)?r.value:r,s=typeof r.clone=="boolean"?r.clone:!0;return e.instanceOfSchema&&s&&(e=e.clone()),e=w9e(this.Constructor,t,e,n,null,null,r.overwriteExisting),this.Constructor.discriminators[t]=yG(e,this.Constructor),this.Constructor.discriminators[t]};lr.defaultOptions={};lr.set=Mc.set;lr.setters=[];lr.get=Mc.get;lr.prototype.toJSON=function(){return{path:this.path,options:this.options}};lr.prototype.clone=function(){let t=new this.constructor(this.schema,this.path,{...this.options,_skipApplyDiscriminators:!0},this.parentSchema);return t.validators=this.validators.slice(),this.requiredValidator!==void 0&&(t.requiredValidator=this.requiredValidator),t.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),t._appliedDiscriminators=this._appliedDiscriminators,t};lr.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return{...this.schema.toJSONSchema(e),...b9e("object","object",e?.useBsonType,r)}}});var x7=m((lqe,_G)=>{"use strict";var v9e=we(),of=kt(),x9e=v7(),T9e=NE();function vi(t,e,r,n){if(this.$parentSchemaType=r?.$parentSchemaType,!this.$parentSchemaType)throw new v9e("Cannot create DocumentArrayElement schematype without a parent");delete r.$parentSchemaType,of.call(this,t,r,"DocumentArrayElement",n),this.$isMongooseDocumentArrayElement=!0,this.Constructor=r?.Constructor,this.schema=e}vi.schemaName="DocumentArrayElement";vi.defaultOptions={};vi.set=of.set;vi.get=of.get;vi.prototype=Object.create(of.prototype);vi.prototype.constructor=vi;vi.prototype.cast=function(...t){return this.$parentSchemaType.cast(...t)[0]};vi.prototype.doValidate=async function(e,r,n){let s=T9e(this.Constructor,e);return e&&!(e instanceof s)&&(e=new s(e,r,null,null,n?.index??null)),x9e.prototype.doValidate.call(this,e,r,n)};vi.prototype.clone=function(){this.options.$parentSchemaType=this.$parentSchemaType;let t=of.prototype.clone.apply(this,arguments);return delete this.options.$parentSchemaType,t.Constructor=this.Constructor,t.schema=this.schema,t};_G.exports=vi});var wG=m((pqe,bG)=>{"use strict";var D9e=qn(),af=class extends D9e{},EG=hs();Object.defineProperty(af.prototype,"excludeIndexes",EG);Object.defineProperty(af.prototype,"_id",EG);bG.exports=af});var MG=m((dqe,DG)=>{"use strict";var SG=sn(),M9e=x7(),T7=require("events").EventEmitter,M7=SE(),P9e=wG(),uf=kt(),AG=xc(),OG=on(),B9e=IE(),CG=w7(),I9e=z_(),N9e=Yh(),u1=ae(),FE=NE(),k9e=S7(),vG=te().arrayAtomicsSymbol,D7=te().arrayPathSymbol,R9e=te().documentArrayParent,zo,Pc;function xt(t,e,r,n,s){if(e.options?.timeseries)throw new k9e(t,"timeseries");let i=xt.defaultOptions?._id;i!=null&&(n=n||{},n._id=i),n?._id!=null?e=CG(e,n):r?._id!=null&&(e=CG(e,r));let o=TG(e,r);o.prototype.$basePath=t,o.path=t;let a=this,u=new M9e(t+".$",e,{...n||{},$parentSchemaType:a,Constructor:o});M7.call(this,t,u,r,null,s),this.schema=e,this.schemaOptions=n||{},this.$isMongooseDocumentArray=!0,this.Constructor=o,o.base=e.base;let c=this.defaultValue;(!("defaultValue"in this)||c!=null)&&this.default(function(){let l=c.call(this);return l!=null&&!Array.isArray(l)&&(l=[l]),l})}xt.schemaName="DocumentArray";xt.options={castNonArrays:!0};xt.prototype=Object.create(M7.prototype);xt.prototype.constructor=xt;xt.prototype.OptionsConstructor=P9e;Object.defineProperty(xt.prototype,"$conditionalHandlers",{enumerable:!1,value:{...M7.prototype.$conditionalHandlers}});function TG(t,e,r){Pc||(Pc=Jp());function n(){Pc.apply(this,arguments),!(this.__parentArray==null||this.__parentArray.getArrayParent()==null)&&this.$session(this.__parentArray.getArrayParent().$session())}t._preCompile();let s=r?.prototype??Pc.prototype;n.prototype=Object.create(s),n.prototype.$__setSchema(t),n.schema=t,n.prototype.constructor=n,n.$isArraySubdocument=!0,n.events=new T7,n.base=t.base;for(let i in t.methods)n.prototype[i]=t.methods[i];for(let i in t.statics)n[i]=t.statics[i];for(let i in T7.prototype)n[i]=T7.prototype[i];return n.options=e,n}xt.prototype.discriminator=function(t,e,r){typeof t=="function"&&(t=u1.getFunctionName(t)),r=r||{};let n=u1.isPOJO(r)?r.value:r,s=typeof r.clone=="boolean"?r.clone:!0;e.instanceOfSchema&&s&&(e=e.clone()),e=B9e(this.Constructor,t,e,n,null,null,r?.overwriteExisting);let i=TG(e,null,this.Constructor);return i.baseCasterConstructor=this.Constructor,Object.defineProperty(i,"name",{value:t}),this.Constructor.discriminators[t]=i,this.Constructor.discriminators[t]};xt.prototype.doValidate=async function(e,r,n){if(zo||(zo=Sc()),await uf.prototype.doValidate.call(this,e,r),n?.updateValidator)return;u1.isMongooseDocumentArray(e)||(e=new zo(e,this.path,r));let s=[];for(let i=0;i<e.length;++i){let o=e[i];if(o!=null){if(!(o instanceof Pc)){let a=FE(this.Constructor,e[i]);o=e[i]=new a(o,e,void 0,void 0,i)}n?.validateModifiedOnly&&!o.$isModified()||s.push(o.$__validate(null,n))}}await Promise.all(s)};xt.prototype.doValidateSync=function(t,e,r){let n=uf.prototype.doValidateSync.call(this,t,e);if(n!=null)return n;let s=t?.length,i=null;if(s){for(let o=0,a=s;o<a;++o){let u=t[o];if(!u)continue;if(!(u instanceof Pc)){let l=FE(this.Constructor,t[o]);u=t[o]=new l(u,t,void 0,void 0,o)}if(r?.validateModifiedOnly&&!u.$isModified())continue;let c=u.validateSync(r);c&&i==null&&(i=c)}return i}};xt.prototype.getDefault=function(t,e,r){let n=typeof this.defaultValue=="function"?this.defaultValue.call(t):this.defaultValue;if(n==null||r?.skipCast)return n;zo||(zo=Sc()),Array.isArray(n)||(n=[n]),n=new zo(n,this.path,t);for(let s=0;s<n.length;++s){let i=FE(this.Constructor,n[s]),o=new i({},n,void 0,void 0,s);o.$init(n[s]),o.isNew=!0,Object.assign(o.$__.activePaths.default,o.$__.activePaths.init),o.$__.activePaths.init={},n[s]=o}return n};var F9e=Object.freeze({transform:!1,virtuals:!1}),xG=Object.freeze({skipId:!1,willInit:!0});xt.prototype.cast=function(t,e,r,n,s){if(zo||(zo=Sc()),t?.[D7]!=null&&t===n)return t;let i,o;s=s||{};let a=s.path||this.path;if(!Array.isArray(t)){if(!r&&!xt.options.castNonArrays)throw new SG("DocumentArray",t,this.path,null,this);return e&&r&&e.markModified(a),this.cast([t],e,r,n,s)}(!s.skipDocumentArrayCast||u1.isMongooseDocumentArray(t))&&(t=new zo(t,a,e,this)),n!=null&&(t[vG]=n[vG]||{}),s.arrayPathIndex!=null&&(t[D7]=a+"."+s.arrayPathIndex);let u=u1.isMongooseDocumentArray(t)?t.__array:t,c=u.length;for(let l=0;l<c;++l){if(!u[l])continue;let p=FE(this.Constructor,u[l]),d=I9e(u[l],!0);if(u[l]!==d&&(u[l]=d),u[l]instanceof Pc){if(u[l][R9e]!==e)if(r){let h=new p(null,t,xG,i,l);u[l]=h.$init(u[l])}else{let h=new p(u[l],t,void 0,void 0,l);u[l]=h}u[l].__index==null&&u[l].$setIndex(l)}else if(u[l]!=null)if(r)e?i||(i=$9e(this,e.$__.selected,r)):i=!0,o=new p(null,t,xG,i,l),u[l]=o.$init(u[l],s);else if(typeof n?.id=="function"&&(o=n.id(u[l]._id)),n&&o&&u1.deepEqual(o.toObject(F9e),u[l]))o.set(u[l]),u[l]=o;else try{o=new p(u[l],t,void 0,void 0,l),u[l]=o}catch(h){throw new SG("embedded",u[l],t[D7],h,this)}}return t};xt.prototype.clone=function(){let t=Object.assign({},this.options),e=new this.constructor(this.path,this.schema,t,this.schemaOptions,this.parentSchema);return e.validators=this.validators.slice(),this.requiredValidator!==void 0&&(e.requiredValidator=this.requiredValidator),e.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),e._appliedDiscriminators=this._appliedDiscriminators,e};xt.prototype.applyGetters=function(t,e){return uf.prototype.applyGetters.call(this,t,e)};function $9e(t,e,r){if(!(r&&e))return;let n=t.path+".",s=Object.keys(e),i=s.length,o={},a,u,c;for(;i--;)if(u=s[i],u.startsWith(n)){if(c=u.substring(n.length),c==="$")continue;c.startsWith("$.")&&(c=c.substring(2)),a||(a=!0),o[c]=e[u]}return a&&o||void 0}xt.defaultOptions={};xt.set=uf.set;xt.setters=[];xt.get=uf.get;xt.prototype.$conditionalHandlers.$elemMatch=q9e;function q9e(t,e){let r=Object.keys(t),n=r.length;for(let a=0;a<n;++a){let u=r[a],c=t[u];N9e(u)&&c!=null&&(t[u]=this.castForQuery(u,c,e))}let s=this?.Constructor?.schema?.options?.discriminatorKey,i=this?.Constructor?.schema?.discriminators||{};if(s!=null&&t[s]!=null&&i[t[s]]!=null)return AG(i[t[s]],t,null,this?.$$context);let o=this.Constructor.schema??e.schema;return AG(o,t,null,this?.$$context)}xt.prototype.toJSONSchema=function(e){let r=OG("object","object",e?.useBsonType,!1),n=this.options.required&&typeof this.options.required!="function";return{...OG("array","array",e?.useBsonType,n),items:{...r,...this.schema.toJSONSchema(e)}}};DG.exports=xt});var IG=m((hqe,BG)=>{"use strict";var PG=require("assert"),P7=pe(),j9e=$r();BG.exports=function(e){if(e==null||e==="")return null;let r;if(j9e(e,"Long"))r=e.toNumber();else if(typeof e=="string")try{return r=P7.Double.fromString(e),r}catch{PG.ok(!1)}else if(typeof e=="object"){let n=e.valueOf()??e.toString();if(typeof n=="string")try{return r=P7.Double.fromString(n),r}catch{PG.ok(!1)}else r=Number(n)}else r=Number(e);return new P7.Double(r)}});var kG=m((fqe,NG)=>{"use strict";var L9e=sn(),c1=kt(),U9e=IG(),V9e=on();function Zt(t,e,r,n){c1.call(this,t,e,"Double",n)}Zt.schemaName="Double";Zt.defaultOptions={};Zt.prototype=Object.create(c1.prototype);Zt.prototype.constructor=Zt;Zt._cast=U9e;Zt.set=c1.set;Zt.setters=[];Zt.get=c1.get;Zt._defaultCaster=t=>{if(t!=null&&t._bsontype!=="Double")throw new Error;return t};Zt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Zt._checkRequired=t=>t!=null;Zt.checkRequired=c1.checkRequired;Zt.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};Zt.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=Zt.cast();try{return e(t)}catch(r){throw new L9e("Double",t,this.path,r,this)}};function $E(t){return this.cast(t)}var W9e={...c1.prototype.$conditionalHandlers,$gt:$E,$gte:$E,$lt:$E,$lte:$E};Object.defineProperty(Zt.prototype,"$conditionalHandlers",{enumerable:!1,value:W9e});Zt.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return V9e("number","double",e?.useBsonType,r)};Zt.prototype.autoEncryptionType=function(){return"double"};NG.exports=Zt});var FG=m((mqe,RG)=>{"use strict";var z9e=$r(),K9e=require("assert");RG.exports=function(e){if(e==null)return e;if(e==="")return null;let r=z9e(e,"Long")?e.toNumber():Number(e);if(r===(r|0)&&r>=-2147483648&&r<=2147483647)return r;K9e.ok(!1)}});var jG=m((yqe,qG)=>{"use strict";var $G=sn(),l1=kt(),H9e=FG(),G9e=on(),qE=Xh();function Kt(t,e,r,n){l1.call(this,t,e,"Int32",n)}Kt.schemaName="Int32";Kt.defaultOptions={};Kt.prototype=Object.create(l1.prototype);Kt.prototype.constructor=Kt;Kt._cast=H9e;Kt.set=l1.set;Kt.setters=[];Kt.get=l1.get;Kt._defaultCaster=t=>{if(t!=null&&(typeof t!="number"||t!==(t|0)||t<-2147483648||t>2147483647))throw new Error;return t};Kt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Kt._checkRequired=t=>t!=null;Kt.checkRequired=l1.checkRequired;Kt.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};Kt.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=Kt.cast();try{return e(t)}catch(r){throw new $G("Int32",t,this.path,r,this)}};var J9e={...l1.prototype.$conditionalHandlers,$gt:jE,$gte:jE,$lt:jE,$lte:jE,$bitsAllClear:qE,$bitsAnyClear:qE,$bitsAllSet:qE,$bitsAnySet:qE};Object.defineProperty(Kt.prototype,"$conditionalHandlers",{enumerable:!1,value:J9e});function jE(t,e){return this.castForQuery(null,t,e)}Kt.prototype.castForQuery=function(t,e,r){let n;if(t!=null)return n=this.$conditionalHandlers[t],n?n.call(this,e):this.applySetters(e,r);try{return this.applySetters(e,r)}catch(s){throw s instanceof $G&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}};Kt.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return G9e("number","int",e?.useBsonType,r)};Kt.prototype.autoEncryptionType=function(){return"int"};qG.exports=Kt});var UG=m((gqe,LG)=>{"use strict";var Y9e=qn(),LE=class extends Y9e{},Q9e=hs();Object.defineProperty(LE.prototype,"of",Q9e);LG.exports=LE});var zG=m((_qe,WG)=>{"use strict";var B7=hE(),X9e=UG(),VG=kt(),Z9e=on(),e8e=we(),t8e=Oc(),p1=ae(),Bc=class extends VG{constructor(e,r,n,s){super(e,r,"Map",s),this.$isSchemaMap=!0,this._createNestedSchemaType(s,e,r,n)}set(e,r){return VG.set(e,r)}cast(e,r,n,s,i){if(e instanceof B7)return e;let o=i?.path??this.path;if(n){let a=new B7({},o,r,this.$__schemaType);if(e instanceof global.Map)for(let u of e.keys()){let c=e.get(u);c==null?c=a.$__schemaType._castNullish(c):c=a.$__schemaType.cast(c,r,!0,null,{...i,path:o+"."+u}),a.$init(u,c)}else for(let u of Object.keys(e)){let c=e[u];c==null?c=a.$__schemaType._castNullish(c):c=a.$__schemaType.cast(c,r,!0,null,{...i,path:o+"."+u}),a.$init(u,c)}return a}return new B7(e,o,r,this.$__schemaType)}clone(){let e=super.clone();return this.$__schemaType!=null&&(e.$__schemaType=this.$__schemaType.clone()),e}getEmbeddedSchemaType(){return this.$__schemaType}toJSONSchema(e){let r=e?.useBsonType,n=this.getEmbeddedSchemaType(),s=this.options.required&&typeof this.options.required!="function",i=Z9e("object","object",r,s);return i.additionalProperties=n.toJSONSchema(e),i}autoEncryptionType(){return"object"}};Bc.schemaName="Map";Bc.prototype.OptionsConstructor=X9e;Bc.defaultOptions={};Bc.prototype._createNestedSchemaType=function(e,r,n,s){let i=r+".$*",o={type:{}};p1.hasUserDefinedProperty(n,"of")&&(p1.isPOJO(n.of)&&p1.hasOwnKeys(n.of)&&!p1.hasUserDefinedProperty(n.of,e.options.typeKey)?o={[e.options.typeKey]:new t8e(n.of)}:p1.isPOJO(n.of)?o=Object.assign({},n.of):o={[e.options.typeKey]:n.of},o[e.options.typeKey]&&o[e.options.typeKey].instanceOfSchema&&o[e.options.typeKey].eachPath((c,l)=>{if(l.options.select===!0||l.options.select===!1)throw new e8e('Cannot use schema-level projections (`select: true` or `select: false`) within maps at path "'+r+"."+c+'"')}),p1.hasUserDefinedProperty(n,"ref")&&(o.ref=n.ref)),this.$__schemaType=e.interpretAsType(i,o,s)};WG.exports=Bc});var GG=m((Eqe,HG)=>{"use strict";var r8e=qn(),cf=class extends r8e{},KG=hs();Object.defineProperty(cf.prototype,"auto",KG);Object.defineProperty(cf.prototype,"populate",KG);HG.exports=cf});var QG=m((bqe,YG)=>{"use strict";var JG=$r(),I7=Za();YG.exports=function(e){if(e==null||JG(e,"ObjectId"))return e;if(e._id){if(JG(e._id,"ObjectId"))return e._id;if(e._id.toString instanceof Function)return new I7(e._id.toString())}return e.toString instanceof Function?new I7(e.toString()):new I7(e)}});var tJ=m((wqe,eJ)=>{"use strict";var n8e=GG(),Ko=kt(),s8e=QG(),i8e=on(),o8e=bn(),k7=Za(),R7=$r(),XG=ae(),a8e=Ko.CastError,N7;function Tt(t,e,r,n){let s=typeof t=="string"&&t.length===24&&/^[a-f0-9]+$/i.test(t),i=e?.suppressWarning;(s||typeof t>"u")&&!i&&XG.warn("mongoose: To create a new ObjectId please try `Mongoose.Types.ObjectId` instead of using `Mongoose.Schema.Types.ObjectId`. Set the `suppressWarning` option if you're trying to create a hex char path in your schema."),Ko.call(this,t,e,"ObjectId",n)}Tt.schemaName="ObjectId";Tt.defaultOptions={};Tt.prototype=Object.create(Ko.prototype);Tt.prototype.constructor=Tt;Tt.prototype.OptionsConstructor=n8e;Tt.get=Ko.get;Tt.set=Ko.set;Tt.setters=[];Tt.prototype.auto=function(t){return t&&(this.default(ZG),this.set(c8e)),this};Tt._checkRequired=t=>R7(t,"ObjectId");Tt._cast=s8e;Tt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Tt._defaultCaster=t=>{if(!R7(t,"ObjectId"))throw new Error(t+" is not an instance of ObjectId");return t};Tt.checkRequired=Ko.checkRequired;Tt.prototype.checkRequired=function(e,r){return Ko._isRef(this,e,r,!0)?!!e:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():Tt.checkRequired())(e)};Tt.prototype.cast=function(t,e,r,n,s){if(!R7(t,"ObjectId")&&Ko._isRef(this,t,e,r)){if((o8e(t)||"").toLowerCase()==="objectid")return new k7(t.toHexString());if(t==null||XG.isNonBuiltinObject(t))return this._castRef(t,e,r,s)}let i;typeof this._castFunction=="function"?i=this._castFunction:typeof this.constructor.cast=="function"?i=this.constructor.cast():i=Tt.cast();try{return i(t)}catch(o){throw new a8e("ObjectId",t,this.path,o,this)}};function UE(t){return this.cast(t)}var u8e={...Ko.prototype.$conditionalHandlers,$gt:UE,$gte:UE,$lt:UE,$lte:UE};Object.defineProperty(Tt.prototype,"$conditionalHandlers",{enumerable:!1,value:u8e});function ZG(){return new k7}ZG.$runBeforeSetters=!0;function c8e(t){return N7||(N7=Zi()),this instanceof N7&&t===void 0?new k7:t}Tt.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function"||this.path==="_id";return i8e("string","objectId",e?.useBsonType,r)};Tt.prototype.autoEncryptionType=function(){return"objectId"};eJ.exports=Tt});var nJ=m((Sqe,rJ)=>{"use strict";var l8e=qn(),ys=class extends l8e{},ro=hs();Object.defineProperty(ys.prototype,"enum",ro);Object.defineProperty(ys.prototype,"match",ro);Object.defineProperty(ys.prototype,"lowercase",ro);Object.defineProperty(ys.prototype,"trim",ro);Object.defineProperty(ys.prototype,"uppercase",ro);Object.defineProperty(ys.prototype,"minLength",ro);Object.defineProperty(ys.prototype,"minlength",ro);Object.defineProperty(ys.prototype,"maxLength",ro);Object.defineProperty(ys.prototype,"maxlength",ro);Object.defineProperty(ys.prototype,"populate",ro);rJ.exports=ys});var F7=m((Aqe,aJ)=>{"use strict";var Ho=kt(),pf=ds(),p8e=nJ(),d8e=yE(),h8e=on(),sJ=ae(),f8e=$r(),oJ=Ho.CastError;function qe(t,e,r,n){this.enumValues=[],this.regExp=null,Ho.call(this,t,e,"String",n)}qe.schemaName="String";qe.defaultOptions={};qe.prototype=Object.create(Ho.prototype);qe.prototype.constructor=qe;Object.defineProperty(qe.prototype,"OptionsConstructor",{configurable:!1,enumerable:!1,writable:!1,value:p8e});qe._cast=d8e;qe.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};qe._defaultCaster=t=>{if(t!=null&&typeof t!="string")throw new Error;return t};qe.get=Ho.get;qe.set=Ho.set;qe.setters=[];qe._checkRequired=t=>(t instanceof String||typeof t=="string")&&t.length;qe.checkRequired=Ho.checkRequired;qe.prototype.enum=function(){if(this.enumValidator&&(this.validators=this.validators.filter(function(n){return n.validator!==this.enumValidator},this),this.enumValidator=!1),arguments[0]===void 0||arguments[0]===!1)return this;let t,e;sJ.isObject(arguments[0])?Array.isArray(arguments[0].values)?(t=arguments[0].values,e=arguments[0].message):(t=sJ.object.vals(arguments[0]),e=pf.messages.String.enum):(t=arguments,e=pf.messages.String.enum);for(let n of t)n!==void 0&&this.enumValues.push(this.cast(n));let r=this.enumValues;return this.enumValidator=function(n){return n==null||~r.indexOf(n)},this.validators.push({validator:this.enumValidator,message:e,type:"enum",enumValues:r}),this};qe.prototype.lowercase=function(t){return arguments.length>0&&!t?this:this.set(e=>(typeof e!="string"&&(e=this.cast(e)),e&&e.toLowerCase()))};qe.prototype.uppercase=function(t){return arguments.length>0&&!t?this:this.set(e=>(typeof e!="string"&&(e=this.cast(e)),e&&e.toUpperCase()))};qe.prototype.trim=function(t){return arguments.length>0&&!t?this:this.set(e=>(typeof e!="string"&&(e=this.cast(e)),e&&e.trim()))};qe.prototype.minlength=function(t,e){if(this.minlengthValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.minlengthValidator},this)),t!=null){let r=e||pf.messages.String.minlength;r=r.replace(/{MINLENGTH}/,t),this.validators.push({validator:this.minlengthValidator=function(n){return n===null||n.length>=t},message:r,type:"minlength",minlength:t})}return this};qe.prototype.minLength=qe.prototype.minlength;qe.prototype.maxlength=function(t,e){if(this.maxlengthValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.maxlengthValidator},this)),t!=null){let r=e||pf.messages.String.maxlength;r=r.replace(/{MAXLENGTH}/,t),this.validators.push({validator:this.maxlengthValidator=function(n){return n===null||n.length<=t},message:r,type:"maxlength",maxlength:t})}return this};qe.prototype.maxLength=qe.prototype.maxlength;qe.prototype.match=function(e,r){let n=r||pf.messages.String.match,s=function(i){return e?(e.lastIndex=0,i!=null&&i!==""?e.test(i):!0):!1};return this.validators.push({validator:s,message:n,type:"regexp",regexp:e}),this};qe.prototype.checkRequired=function(e,r){return typeof e=="object"&&Ho._isRef(this,e,r,!0)?e!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():qe.checkRequired())(e)};qe.prototype.cast=function(t,e,r,n,s){if(typeof t!="string"&&Ho._isRef(this,t,e,r))return this._castRef(t,e,r,s);let i;typeof this._castFunction=="function"?i=this._castFunction:typeof this.constructor.cast=="function"?i=this.constructor.cast():i=qe.cast();try{return i(t)}catch{throw new oJ("string",t,this.path,null,this)}};function lf(t,e){return this.castForQuery(null,t,e)}function m8e(t,e){let r=this;return Array.isArray(t)?t.map(function(n){return r.castForQuery(null,n,e)}):[this.castForQuery(null,t,e)]}function iJ(t){return t==null?this._castNullish(t):this.cast(t,this)}var y8e={...Ho.prototype.$conditionalHandlers,$all:m8e,$gt:lf,$gte:lf,$lt:lf,$lte:lf,$options:iJ,$regex:function(e){return Object.prototype.toString.call(e)==="[object RegExp]"?e:iJ.call(this,e)},$not:lf};Object.defineProperty(qe.prototype,"$conditionalHandlers",{enumerable:!1,value:y8e});qe.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with String.");return n.call(this,e,r)}if(Object.prototype.toString.call(e)==="[object RegExp]"||f8e(e,"BSONRegExp"))return e;try{return this.applySetters(e,r)}catch(s){throw s instanceof oJ&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}};qe.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return h8e("string","string",e?.useBsonType,r)};qe.prototype.autoEncryptionType=function(){return"string"};aJ.exports=qe});var uJ=m((Oqe,j7)=>{"use strict";var $7=pe().UUID,q7=/[0-9a-f]{8}-[0-9a-f]{4}-[0-9][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i;j7.exports=function(e){if(e==null||e instanceof $7)return e;if(typeof e=="string"){if(q7.test(e))return new $7(e);throw new Error(`"${e}" is not a valid UUID string`)}if(e.toString&&e.toString!==Object.prototype.toString&&q7.test(e.toString()))return new $7(e.toString());throw new Error(`"${e}" cannot be casted to a UUID`)};j7.exports.UUID_FORMAT=q7});var dJ=m((Cqe,pJ)=>{"use strict";var ou=kt(),cJ=ou.CastError,lJ=uJ(),g8e=on(),_8e=ae(),VE=Xh(),E8e=lJ.UUID_FORMAT;function b8e(t){let e;return typeof t!="string"&&t!=null?(e=t.toString("hex"),e.substring(0,8)+"-"+e.substring(8,12)+"-"+e.substring(12,16)+"-"+e.substring(16,20)+"-"+e.substring(20,32)):t}function Ht(t,e,r,n){ou.call(this,t,e,"UUID",n)}Ht.schemaName="UUID";Ht.defaultOptions={};Ht.prototype=Object.create(ou.prototype);Ht.prototype.constructor=Ht;Ht._cast=lJ;Ht.get=ou.get;Ht.set=ou.set;Ht.setters=[];Ht.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Ht._checkRequired=t=>t!=null;Ht.checkRequired=ou.checkRequired;Ht.prototype.checkRequired=function(e){return Buffer.isBuffer(e)&&(e=b8e(e)),e!=null&&E8e.test(e)};Ht.prototype.cast=function(t,e,r,n,s){if(_8e.isNonBuiltinObject(t)&&ou._isRef(this,t,e,r))return this._castRef(t,e,r,s);let i;typeof this._castFunction=="function"?i=this._castFunction:typeof this.constructor.cast=="function"?i=this.constructor.cast():i=Ht.cast();try{return i(t)}catch(o){throw new cJ(Ht.schemaName,t,this.path,o,this)}};function w8e(t){return this.cast(t)}function L7(t){return t.map(e=>this.cast(e))}var S8e={...ou.prototype.$conditionalHandlers,$bitsAllClear:VE,$bitsAnyClear:VE,$bitsAllSet:VE,$bitsAnySet:VE,$all:L7,$in:L7,$ne:w8e,$nin:L7};Object.defineProperty(Ht.prototype,"$conditionalHandlers",{enumerable:!1,value:S8e});Ht.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with UUID.");return n.call(this,e,r)}try{return this.applySetters(e,r)}catch(s){throw s instanceof cJ&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}};Ht.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return g8e("string","binData",e?.useBsonType,r)};Ht.prototype.autoEncryptionType=function(){return"binData"};pJ.exports=Ht});var fJ=m((vqe,hJ)=>{"use strict";var A8e=qn(),WE=class extends A8e{},O8e=hs();Object.defineProperty(WE.prototype,"of",O8e);hJ.exports=WE});var yJ=m((xqe,mJ)=>{"use strict";var C8e=fJ(),v8e=kt(),d1=Symbol("firstValue");var h1=class extends v8e{constructor(e,r,n,s){if(super(e,r,"Union",s),!Array.isArray(r?.of)||r.of.length===0)throw new Error("Union schema type requires an array of types");this.schemaTypes=r.of.map(i=>s.interpretAsType(e,i,n))}cast(e,r,n,s,i){let o=d1,a;for(let u=0;u<this.schemaTypes.length;++u)try{let c=this.schemaTypes[u].cast(e,r,n,s,i);if(c===e)return c;o===d1&&(o=c)}catch(c){a=c}if(o!==d1)return o;throw a}applySetters(e,r,n,s,i){let o=d1,a;for(let u=0;u<this.schemaTypes.length;++u)try{let c=this.schemaTypes[u]._applySetters(e,r,n,s,i);if(c==null?c=this.schemaTypes[u]._castNullish(c):c=this.schemaTypes[u].cast(c,r,n,s,i),c===e)return c;o===d1&&(o=c)}catch(c){a=c}if(o!==d1)return o;throw a}clone(){let e=super.clone();return e.schemaTypes=this.schemaTypes.map(r=>r.clone()),e}};h1.schemaName="Union";h1.defaultOptions={};h1.prototype.OptionsConstructor=C8e;mJ.exports=h1});var Qh=m(nt=>{"use strict";nt.Array=SE();nt.BigInt=SH();nt.Boolean=CH();nt.Buffer=MH();nt.Date=$H();nt.Decimal128=nt.Decimal=UH();nt.DocumentArray=MG();nt.DocumentArrayElement=x7();nt.Double=kG();nt.Int32=jG();nt.Map=zG();nt.Mixed=_c();nt.Number=Zx();nt.ObjectId=tJ();nt.String=F7();nt.Subdocument=v7();nt.UUID=dJ();nt.Union=yJ();nt.Oid=nt.ObjectId;nt.Object=nt.Mixed;nt.Bool=nt.Boolean;nt.ObjectID=nt.ObjectId});var Oc=m((z7,TJ)=>{"use strict";var x8e=require("events").EventEmitter,T8e=fc(),au=we(),gJ=kt(),_J=qn(),D8e=Bx(),W7=lE(),EJ=Nx(),Ur=vt(),bJ=Rt(),M8e=bn(),P8e=cK(),HE=Fx(),B8e=dK(),wJ=fK(),I8e=P_(),zE=fs(),N8e=yK(),k8e=vK(),R8e=gc(),pt=ae(),F8e=TK(),$8e=/\.\d+(\.|$)/,uu,q8e=Hh().queryMiddlewareFunctions,j8e=Hh().documentMiddlewareFunctions,SJ=q8e.concat(j8e).reduce((t,e)=>t.add(e),new Set),U7=pt.isPOJO,AJ=0,L8e=/^\d+$/;function H(t,e){if(!(this instanceof H))return new H(t,e);if(this.obj=t,this.paths={},this.aliases={},this.subpaths={},this.virtuals={},this.singleNestedPaths={},this.nested={},this.inherits={},this.callQueue=[],this._indexes=[],this._searchIndexes=[],this.methods=e?.methods||{},this.methodOptions={},this.statics=e?.statics||{},this.tree={},this.query=e?.query||{},this.childSchemas=[],this.plugins=[],this.$id=++AJ,this.mapPaths=[],this.encryptedFields={},this.s={hooks:new T8e},this.options=this.defaultOptions(e),Array.isArray(t))for(let s of t)this.add(s);else t&&this.add(t);if(e?.virtuals){let s=e.virtuals,i=Object.keys(s);for(let o of i){let a=s[o].options?s[o].options:void 0,u=this.virtual(o,a);s[o].get&&u.get(s[o].get),s[o].set&&u.set(s[o].set)}}let r=t?._id&&pt.isObject(t._id);!this.paths._id&&this.options._id&&!r&&EJ(this),this.setupTimestamp(this.options.timestamps)}function OJ(t,e){for(let r of Object.keys(e)){let n=null;if(e[r]!=null)n=e[r];else{let i=bJ(t.paths[r],"options");if(i==null)continue;n=i.alias}if(!n)continue;let s=t.paths[r].path;if(Array.isArray(n)){for(let i of n){if(typeof i!="string")throw new Error("Invalid value for alias option on "+s+", got "+i);t.aliases[i]=s,t.virtual(i).get((function(o){return function(){return typeof this.get=="function"?this.get(o):this[o]}})(s)).set((function(o){return function(a){return this.$set(o,a)}})(s))}continue}if(typeof n!="string")throw new Error("Invalid value for alias option on "+s+", got "+n);t.aliases[n]=s,t.virtual(n).get((function(i){return function(){return typeof this.get=="function"?this.get(i):this[i]}})(s)).set((function(i){return function(o){return this.$set(i,o)}})(s))}}H.prototype=Object.create(x8e.prototype);H.prototype.constructor=H;H.prototype.instanceOfSchema=!0;Object.defineProperty(H.prototype,"$schemaType",{configurable:!1,enumerable:!1,writable:!0});Object.defineProperty(H.prototype,"childSchemas",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(H.prototype,"virtuals",{configurable:!1,enumerable:!0,writable:!0});H.prototype.obj;H.prototype.paths;H.prototype.tree;H.create=function(e,r){return new H(e,r)};H.prototype.clone=function(){let t=this._clone();return t.on("init",e=>this.emit("init",e)),t};H.prototype._clone=function(e){e=e||(this.base==null?H:this.base.Schema);let r=new e({},this._userProvidedOptions);r.base=this.base,r.obj=this.obj,r.options=Ur(this.options),r.callQueue=this.callQueue.map(function(n){return n}),r.methods=Ur(this.methods),r.methodOptions=Ur(this.methodOptions),r.statics=Ur(this.statics),r.query=Ur(this.query),r.plugins=Array.prototype.slice.call(this.plugins),r._indexes=Ur(this._indexes),r._searchIndexes=Ur(this._searchIndexes),r.s.hooks=this.s.hooks.clone(),r.tree=Ur(this.tree),r.paths=Object.fromEntries(Object.entries(this.paths).map(([n,s])=>[n,s.clone()])),r.nested=Ur(this.nested),r.subpaths=Ur(this.subpaths);for(let n of Object.values(r.paths))if(n.$isSingleNested){let s=n.path;for(let i of Object.keys(n.schema.paths))r.singleNestedPaths[s+"."+i]=n.schema.paths[i];for(let i of Object.keys(n.schema.singleNestedPaths))r.singleNestedPaths[s+"."+i]=n.schema.singleNestedPaths[i];for(let i of Object.keys(n.schema.subpaths))r.singleNestedPaths[s+"."+i]=n.schema.subpaths[i];for(let i of Object.keys(n.schema.nested))r.singleNestedPaths[s+"."+i]="nested"}return r._gatherChildSchemas(),r.virtuals=Ur(this.virtuals),r.$globalPluginsApplied=this.$globalPluginsApplied,r.$isRootDiscriminator=this.$isRootDiscriminator,r.$implicitlyCreated=this.$implicitlyCreated,r.$id=++AJ,r.$originalSchemaId=this.$id,r.mapPaths=[].concat(this.mapPaths),this.discriminatorMapping!=null&&(r.discriminatorMapping=Object.assign({},this.discriminatorMapping)),this.discriminators!=null&&(r.discriminators=Object.assign({},this.discriminators)),this._applyDiscriminators!=null&&(r._applyDiscriminators=new Map(this._applyDiscriminators)),r.aliases=Object.assign({},this.aliases),r.encryptedFields=Ur(this.encryptedFields),r};H.prototype.pick=function(t,e){let r=new H({},e||this.options);if(!Array.isArray(t))throw new au('Schema#pick() only accepts an array argument, got "'+typeof t+'"');for(let n of t)if(this._hasEncryptedField(n)){let s=this.encryptedFields[n],i=this.path(n);r.add({[n]:{encrypt:s,[this.options.typeKey]:i}})}else if(this.nested[n])r.add({[n]:bJ(this.tree,n)});else{let s=this.path(n);if(s==null)throw new au("Path `"+n+"` is not in the schema");r.add({[n]:s})}return this._hasEncryptedFields()||(r.options.encryptionType=null),r};H.prototype.omit=function(t,e){let r=new H(this,e||this.options);if(!Array.isArray(t))throw new au('Schema#omit() only accepts an array argument, got "'+typeof t+'"');r.remove(t);for(let n in r.singleNestedPaths)t.includes(n)&&delete r.singleNestedPaths[n];return r};H.prototype.defaultOptions=function(t){this._userProvidedOptions=t==null?{}:Ur(t);let e=this.base?.options||{},r="strict"in e?e.strict:!0,n="strictQuery"in e?e.strictQuery:!1,s="id"in e?e.id:!0;if(t={strict:r,strictQuery:n,bufferCommands:!0,capped:!1,versionKey:"__v",optimisticConcurrency:!1,minimize:!0,autoIndex:null,discriminatorKey:"__t",shardKey:null,read:null,validateBeforeSave:!0,validateModifiedOnly:!1,_id:!0,id:s,typeKey:"type",...t},t.versionKey&&typeof t.versionKey!="string")throw new au("`versionKey` must be falsy or string, got `"+typeof t.versionKey+"`");if(typeof t.read=="string"?t.read=HE(t.read):Array.isArray(t.read)&&typeof t.read[0]=="string"&&(t.read={mode:HE(t.read[0]),tags:t.read[1]}),t.optimisticConcurrency&&!t.versionKey)throw new au("Must set `versionKey` if using `optimisticConcurrency`");return t};H.prototype.discriminator=function(t,e,r){return this._applyDiscriminators=this._applyDiscriminators||new Map,this._applyDiscriminators.set(t,{schema:e,options:r}),this};H.prototype._getDocumentMiddleware=function(){return this.s.hooks.filter(e=>e.name==="updateOne"||e.name==="deleteOne"?!!e.document:e.name==="remove"||e.name==="init"?e.document==null||!!e.document:e.query!=null||e.document!=null?e.document!==!1:!0).filter(e=>this.methods[e.name]?!e.fn[R8e.builtInMiddleware]:!0)};H.prototype._defaultToObjectOptions=function(t){let e=t?"toJSON":"toObject";if(this._defaultToObjectOptionsMap&&this._defaultToObjectOptionsMap[e])return this._defaultToObjectOptionsMap[e];let r=this.base?.options?.[e]||{},n=this.options[e]||{},s=Object.assign({},r,n);return this._defaultToObjectOptionsMap=this._defaultToObjectOptionsMap||{},this._defaultToObjectOptionsMap[e]=s,s};H.prototype.encryptionType=function(t){if(arguments.length===0)return this.options.encryptionType;if(!(typeof t=="string"||t===null))throw new Error("invalid `encryptionType`: ${encryptionType}");this.options.encryptionType=t};H.prototype.add=function(e,r){if(e instanceof H||e?.instanceOfSchema)return I8e(this,e),this;if(e._id===!1&&r==null&&(this.options._id=!1),r=r||"",r==="__proto__."||r==="constructor."||r==="prototype.")return this;let n=Object.keys(e),s=this.options.typeKey;for(let o of n){if(pt.specialProperties.has(o))continue;let a=r+o,u=e[o];if(u==null)throw new TypeError("Invalid value for schema path `"+a+'`, got value "'+u+'"');if(o==="_id"&&u===!1)continue;let c=!1;if(typeof u=="string"){let l=this.base?.Schema.Types??H.Types,p=u.charAt(0).toUpperCase()+u.substring(1);c=l[p]!=null}if(o!=="_id"&&(typeof u!="object"&&typeof u!="function"&&!c||u==null))throw new TypeError(`Invalid schema configuration: \`${u}\` is not a valid type at path \`${o}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);if(u instanceof W7||(u.constructor?.name??null)==="VirtualType"){this.virtual(u);continue}if(Array.isArray(u)&&u.length===1&&u[0]==null)throw new TypeError("Invalid value for schema Array path `"+a+'`, got value "'+u[0]+'"');if(U7(u)||u instanceof _J)if(pt.hasOwnKeys(u)===!1)r&&(this.nested[r.substring(0,r.length-1)]=!0),this.path(a,u);else if(!u[s]||s==="type"&&U7(u.type)&&u.type.type)this.nested[a]=!0,this.add(u,a+".");else{let l=u[s];if(U7(l)&&pt.hasOwnKeys(l)){r&&(this.nested[r.substring(0,r.length-1)]=!0);let p={};this._userProvidedOptions.typeKey&&(p.typeKey=this._userProvidedOptions.typeKey),this._userProvidedOptions.strict!=null&&(p.strict=this._userProvidedOptions.strict),this._userProvidedOptions.toObject!=null&&(p.toObject=pt.omit(this._userProvidedOptions.toObject,["transform"])),this._userProvidedOptions.toJSON!=null&&(p.toJSON=pt.omit(this._userProvidedOptions.toJSON,["transform"]));let d=new H(l,p);d.$implicitlyCreated=!0;let h=Object.assign({},u,{[s]:d});this.path(r+o,h)}else if(r&&(this.nested[r.substring(0,r.length-1)]=!0),this.path(r+o,u),!u?.instanceOfSchema&&pt.isPOJO(u?.discriminators)){let p=this.path(r+o);for(let d in u.discriminators)p.discriminator(d,u.discriminators[d])}}else if(r&&(this.nested[r.substring(0,r.length-1)]=!0),this.path(r+o,u),!u[0]?.instanceOfSchema&&pt.isPOJO(u[0]?.discriminators)){let l=this.path(r+o);for(let p in u[0].discriminators)l.discriminator(p,u[0].discriminators[p])}if(u.instanceOfSchema&&u.encryptionType()!=null){if(this.encryptionType()!=u.encryptionType())throw new Error("encryptionType of a nested schema must match the encryption type of the parent schema.");for(let[l,p]of Object.entries(u.encryptedFields)){let d=a+"."+l;this._addEncryptedField(d,p)}}else if(typeof u=="object"&&"encrypt"in u){let{encrypt:l}=u;if(this.encryptionType()==null)throw new Error("encryptionType must be provided");this._addEncryptedField(a,l)}else this._removeEncryptedField(a)}let i=Object.fromEntries(Object.entries(e).map(([o])=>[r+o,null]));return OJ(this,i),this};H.prototype._addEncryptedField=function(e,r){if(this.path(e).autoEncryptionType()==null)throw new Error(`Invalid BSON type for FLE field: '${e}'`);this.encryptedFields[e]=Ur(r)};H.prototype._removeEncryptedField=function(e){delete this.encryptedFields[e]};H.prototype._hasEncryptedFields=function(){return pt.hasOwnKeys(this.encryptedFields)};H.prototype._hasEncryptedField=function(e){return e in this.encryptedFields};H.prototype._buildEncryptedFields=function(){return{fields:Object.entries(this.encryptedFields).map(([e,r])=>{let n=this.path(e).autoEncryptionType();return{path:e,bsonType:n,...r}})}};H.prototype._buildSchemaMap=function(){function t(n,s,i){let o=0,a=n[o];for(;o<n.length-1;++o,a=n[o])s[a]=s[a]==null?{bsonType:"object",properties:{}}:s[a],s=s[a].properties;s[a]=i}let e=(n,[s,i])=>{let o=this.path(s).autoEncryptionType(),a=s.split("."),u={encrypt:{...i,bsonType:o}};return t(a,n,u),n};return{bsonType:"object",properties:Object.entries(this.encryptedFields).reduce(e,{})}};H.prototype.alias=function(t,e){return OJ(this,{[t]:e}),this};H.prototype.removeIndex=function(e){if(arguments.length>1)throw new Error("removeIndex() takes only 1 argument");if(typeof e!="object"&&typeof e!="string")throw new Error("removeIndex() may only take either an object or a string as an argument");if(typeof e=="object")for(let r=this._indexes.length-1;r>=0;--r)wJ(this._indexes[r][0],e)&&this._indexes.splice(r,1);else for(let r=this._indexes.length-1;r>=0;--r)this._indexes[r][1]!=null&&this._indexes[r][1].name===e&&this._indexes.splice(r,1);return this};H.prototype.clearIndexes=function(){return this._indexes.length=0,this};H.prototype.searchIndex=function(e){return this._searchIndexes.push(e),this};H.reserved=Object.create(null);H.prototype.reserved=H.reserved;var Lr=H.reserved;Lr.prototype=Lr.emit=Lr.listeners=Lr.removeListener=Lr.collection=Lr.errors=Lr.get=Lr.init=Lr.isModified=Lr.isNew=Lr.populated=Lr.remove=Lr.save=Lr.toObject=Lr.validate=1;Lr.collection=1;H.prototype.path=function(t,e){if(e===void 0){if(this.paths[t]!=null)return this.paths[t];let u=CJ(t),c=U8e(this,t,u);if(c!=null)return c;let l=vJ(this,t);return l??(c=this.hasMixedParent(u),c??($8e.test(t)?V8e(this,t,u):void 0))}let r=t.split(".")[0];if(Lr[r]&&!this.options.suppressReservedKeysWarning){let u=`\`${r}\` is a reserved schema pathname and may break some functionality. You are allowed to use it, but use at your own risk. To disable this warning pass \`suppressReservedKeysWarning\` as a schema option.`;pt.warn(u)}typeof e=="object"&&pt.hasUserDefinedProperty(e,"ref")&&F8e(e.ref,t);let n=t.split(/\./),s=n.pop(),i=this.tree,o="";for(let u of n){if(pt.specialProperties.has(u))throw new Error("Cannot set special property `"+u+"` on a schema");if(o=o+=(o.length>0?".":"")+u,i[u]||(this.nested[o]=!0,i[u]={}),typeof i[u]!="object"){let c="Cannot set nested path `"+t+"`. Parent path `"+o+"` already set to type "+i[u].name+".";throw new Error(c)}i=i[u]}i[s]=Ur(e),this.paths[t]=this.interpretAsType(t,e,this.options);let a=this.paths[t];if(this.childSchemas=this.childSchemas.filter(u=>u.path!==t),a.$isSchemaMap){let u=t+".$*";this.paths[u]=a.$__schemaType,this.mapPaths.push(this.paths[u]),a.$__schemaType.$isSingleNested&&this.childSchemas.push({schema:a.$__schemaType.schema,model:a.$__schemaType.Constructor,path:t})}if(a.$isSingleNested){for(let u of Object.keys(a.schema.paths))this.singleNestedPaths[t+"."+u]=a.schema.paths[u];for(let u of Object.keys(a.schema.singleNestedPaths))this.singleNestedPaths[t+"."+u]=a.schema.singleNestedPaths[u];for(let u of Object.keys(a.schema.subpaths))this.singleNestedPaths[t+"."+u]=a.schema.subpaths[u];for(let u of Object.keys(a.schema.nested))this.singleNestedPaths[t+"."+u]="nested";Object.defineProperty(a.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),a.Constructor.base=this.base,this.childSchemas.push({schema:a.schema,model:a.Constructor,path:t})}else a.$isMongooseDocumentArray&&(Object.defineProperty(a.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),a.Constructor.base=this.base,this.childSchemas.push({schema:a.schema,model:a.Constructor,path:t}));if(a.$isMongooseArray&&!a.$isMongooseDocumentArray){let u=t,c=a,l=[];for(;c.$isMongooseArray;)u=u+".$",c.embeddedSchemaType._arrayPath=u,c.embeddedSchemaType._arrayParentPath=t,c=c.embeddedSchemaType,this.subpaths[u]=c;for(let p of l)this.subpaths[p.path]=p}if(a.$isMongooseDocumentArray){for(let u of Object.keys(a.schema.paths)){let c=a.schema.paths[u];this.subpaths[t+"."+u]=c,typeof c=="object"&&c!=null&&c.$parentSchemaDocArray==null&&(c.$parentSchemaDocArray=a)}for(let u of Object.keys(a.schema.subpaths)){let c=a.schema.subpaths[u];this.subpaths[t+"."+u]=c,typeof c=="object"&&c!=null&&c.$parentSchemaDocArray==null&&(c.$parentSchemaDocArray=a)}for(let u of Object.keys(a.schema.singleNestedPaths)){let c=a.schema.singleNestedPaths[u];this.subpaths[t+"."+u]=c,typeof c=="object"&&c!=null&&c.$parentSchemaDocArray==null&&(c.$parentSchemaDocArray=a)}}return this};H.prototype._gatherChildSchemas=function(){let e=[];for(let r of Object.keys(this.paths)){if(typeof r!="string")continue;let n=this.paths[r];n.$isMongooseDocumentArray||n.$isSingleNested?e.push({schema:n.schema,model:n.Constructor,path:r}):n.$isSchemaMap&&n.$__schemaType.$isSingleNested&&e.push({schema:n.$__schemaType.schema,model:n.$__schemaType.Constructor,path:r})}return this.childSchemas=e,e};function U8e(t,e,r){if(Object.hasOwn(t.paths,e))return t.paths[e];if(Object.hasOwn(t.subpaths,r)){let n=t.subpaths[r];return n==="nested"?void 0:n}if(Object.hasOwn(t.singleNestedPaths,r)&&typeof t.singleNestedPaths[r]=="object"){let n=t.singleNestedPaths[r];return n==="nested"?void 0:n}return null}function CJ(t){return/\.\d+/.test(t)?t.replace(/\.\d+\./g,".$.").replace(/\.\d+$/,".$"):t}function vJ(t,e){if(t.mapPaths.length===0)return null;for(let r of t.mapPaths){let n=r.path.replace(/\.\$\*/g,"");if(e===n||e.startsWith(n+".")&&e.slice(n.length+1).indexOf(".")===-1)return r;if(r.schema&&e.startsWith(n+".")){let s=e.slice(n.length+1);return s=s.slice(s.indexOf(".")+1),r.schema.paths[s]}else if(r.$isSchemaMap&&e.startsWith(n+".")){let s=e.slice(n.length+1);s=s.slice(s.indexOf(".")+1);let i=r.$__schemaType._presplitPath;if(s.indexOf(".")===-1&&i[i.length-1]==="$*")return r.$__schemaType;if(s.indexOf(".")!==-1&&r.$__schemaType.schema&&i[i.length-1]==="$*")return r.$__schemaType.schema.path(s.slice(s.indexOf(".")+1))}}return null}Object.defineProperty(H.prototype,"base",{configurable:!0,enumerable:!1,writable:!0,value:null});H.prototype.interpretAsType=function(t,e,r){if(e instanceof gJ){if(e.path===t)return e;let u=e.clone();return u.path=t,u}let n=this.base?.Schema.Types??H.Types,s=this.base?.Types??e1();if(!pt.isPOJO(e)&&!(e instanceof _J)&&pt.getFunctionName(e.constructor)!=="Object"){let c=e;e={},e[r.typeKey]=c}let i=e[r.typeKey]&&(e[r.typeKey]instanceof Function||r.typeKey!=="type"||!e.type.type)?e[r.typeKey]:{};if(i instanceof gJ){if(i.path===t)return i;let u=i.clone();return u.path=t,u}let o;if(pt.isPOJO(i)||i==="mixed")return new n.Mixed(t,e,null,this);if(Array.isArray(i)||i===Array||i==="array"||i===n.Array){let u=i===Array||i==="array"?e.cast||e.of:i[0];if(u?.instanceOfSchema){if(!(u instanceof H))if(this.options._isMerging)u=new H(u);else throw new TypeError("Schema for array path `"+t+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${t}: new Schema(...)`);return new n.DocumentArray(t,u,e,null,this)}if(u&&u[r.typeKey]&&u[r.typeKey].instanceOfSchema){if(!(u[r.typeKey]instanceof H))if(this.options._isMerging)u[r.typeKey]=new H(u[r.typeKey]);else throw new TypeError("Schema for array path `"+t+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${t}: new Schema(...)`);return new n.DocumentArray(t,u[r.typeKey],e,u,this)}if(typeof u<"u"&&(Array.isArray(u)||u.type===Array||u.type=="Array"))return u?.type=="Array"&&(u.type=Array),new n.Array(t,this.interpretAsType(t,u,r),e,null,this);let c=u!=null&&u[r.typeKey]&&(r.typeKey!=="type"||!u.type.type)?u[r.typeKey]:u;if(typeof u=="string")u=n[u.charAt(0).toUpperCase()+u.substring(1)];else if(pt.isPOJO(c))if(pt.hasOwnKeys(c)){let l={minimize:r.minimize};r.typeKey&&(l.typeKey=r.typeKey),Object.hasOwn(r,"strict")&&(l.strict=r.strict),Object.hasOwn(r,"strictQuery")&&(l.strictQuery=r.strictQuery),Object.hasOwn(r,"toObject")&&(l.toObject=pt.omit(r.toObject,["transform"])),Object.hasOwn(r,"toJSON")&&(l.toJSON=pt.omit(r.toJSON,["transform"])),Object.hasOwn(this._userProvidedOptions,"_id")?l._id=this._userProvidedOptions._id:H.Types.DocumentArray.defaultOptions._id!=null&&(l._id=H.Types.DocumentArray.defaultOptions._id);let p=new H(c,l);return p.$implicitlyCreated=!0,new n.DocumentArray(t,p,e,null,this)}else return new n.Array(t,n.Mixed,e,null,this);if(u){if(i=u[r.typeKey]&&(r.typeKey!=="type"||!u.type.type)?u[r.typeKey]:u,Array.isArray(i))return new n.Array(t,this.interpretAsType(t,i,r),e,null,this);if(o=typeof i=="string"?i:i.schemaName||pt.getFunctionName(i),o==="ClockDate"&&(o="Date"),o===void 0)throw new TypeError(`Invalid schema configuration: Could not determine the embedded type for array \`${t}\`. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(!Object.hasOwn(n,o))throw new TypeError(`Invalid schema configuration: \`${o}\` is not a valid type within the array \`${t}\`.See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);o==="Union"&&typeof u=="object"&&(u.parentSchema=this)}return new n.Array(t,u||n.Mixed,e,r,this)}if(i?.instanceOfSchema)return new n.Subdocument(i,t,e,this);if(Buffer.isBuffer(i)?o="Buffer":typeof i=="function"||typeof i=="object"?o=i.schemaName||pt.getFunctionName(i):i===s.ObjectId?o="ObjectId":i===s.Decimal128?o="Decimal128":o=i==null?""+i:i.toString(),o&&(o=o.charAt(0).toUpperCase()+o.substring(1)),o==="ObjectID"&&(o="ObjectId"),o==="ClockDate"&&(o="Date"),o===void 0)throw new TypeError(`Invalid schema configuration: \`${t}\` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(n[o]==null)throw new TypeError(`Invalid schema configuration: \`${o}\` is not a valid type at path \`${t}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);return new n[o](t,e,r,this)};H.prototype.eachPath=function(t){let e=Object.keys(this.paths),r=e.length;for(let n=0;n<r;++n)t(e[n],this.paths[e[n]]);return this};H.prototype.requiredPaths=function(e){if(this._requiredpaths&&!e)return this._requiredpaths;let r=Object.keys(this.paths),n=r.length,s=[];for(;n--;){let i=r[n];this.paths[i].isRequired&&s.push(i)}return this._requiredpaths=s,this._requiredpaths};H.prototype.indexedPaths=function(){return this._indexedpaths?this._indexedpaths:(this._indexedpaths=this.indexes(),this._indexedpaths)};H.prototype.pathType=function(t){if(Object.hasOwn(this.paths,t))return"real";if(Object.hasOwn(this.virtuals,t))return"virtual";if(Object.hasOwn(this.nested,t))return"nested";let e=CJ(t);if(Object.hasOwn(this.subpaths,e)||Object.hasOwn(this.subpaths,t))return"real";let r=Object.hasOwn(this.singleNestedPaths,e)||Object.hasOwn(this.singleNestedPaths,t);return r?r==="nested"?"nested":"real":vJ(this,t)!=null?"real":/\.\d+\.|\.\d+$/.test(t)?xJ(this,t,e):"adhocOrUndefined"};H.prototype.hasMixedParent=function(t){let e=t.split(/\./g);t="";for(let r=0;r<e.length;++r)if(t=r>0?t+"."+e[r]:e[r],Object.hasOwn(this.paths,t)&&this.paths[t]instanceof uu.Mixed)return this.paths[t];return null};H.prototype.setupTimestamp=function(t){return k8e(this,t)};function xJ(t,e,r){let n=e.split(/\.(\d+)\.|\.(\d+)$/).filter(Boolean);if(n.length<2)return Object.hasOwn(t.paths,n[0])?t.paths[n[0]]:"adhocOrUndefined";let s=t.path(n[0]),i=!1;if(!s)return"adhocOrUndefined";let o=n.length-1;for(let a=1;a<n.length;++a){i=!1;let u=n[a];if(a===o&&s&&!/\D/.test(u)){s.$isMongooseDocumentArray||s instanceof uu.Array?s=s.embeddedSchemaType:s=void 0;break}if(!/\D/.test(u)){s instanceof uu.Array&&a!==o&&(s=s.embeddedSchemaType);continue}if(!s?.schema){s=void 0;break}i=s.schema.pathType(u)==="nested",s=s.schema.path(u)}return t.subpaths[r]=s,s?"real":i?"nested":"adhocOrUndefined"}function V8e(t,e,r){return xJ(t,e,r),t.subpaths[r]}H.prototype.queue=function(t,e){return this.callQueue.push([t,e]),this};H.prototype.pre=function(t){if(t instanceof RegExp){let e=Array.prototype.slice.call(arguments,1);for(let r of SJ)t.test(r)&&this.pre.apply(this,[r].concat(e));return this}if(Array.isArray(t)){let e=Array.prototype.slice.call(arguments,1);for(let r of t)this.pre.apply(this,[r].concat(e));return this}return this.s.hooks.pre.apply(this.s.hooks,arguments),this};H.prototype.post=function(t){if(t instanceof RegExp){let e=Array.prototype.slice.call(arguments,1);for(let r of SJ)t.test(r)&&this.post.apply(this,[r].concat(e));return this}if(Array.isArray(t)){let e=Array.prototype.slice.call(arguments,1);for(let r of t)this.post.apply(this,[r].concat(e));return this}return this.s.hooks.post.apply(this.s.hooks,arguments),this};H.prototype.plugin=function(t,e){if(typeof t!="function")throw new Error('First param to `schema.plugin()` must be a function, got "'+typeof t+'"');if(e?.deduplicate){for(let r of this.plugins)if(r.fn===t)return this}return this.plugins.push({fn:t,opts:e}),t(this,e),this};H.prototype.method=function(t,e,r){if(typeof t!="string")for(let n in t)this.methods[n]=t[n],this.methodOptions[n]=Ur(r);else this.methods[t]=e,this.methodOptions[t]=Ur(r);return this};H.prototype.static=function(t,e){if(typeof t!="string")for(let r in t)this.statics[r]=t[r];else this.statics[t]=e;return this};H.prototype.index=function(t,e){t||(t={}),e||(e={}),e.expires&&pt.expires(e);for(let r in t)this.aliases[r]&&(t=pt.renameObjKey(t,r,this.aliases[r]));for(let r of Object.keys(t))t[r]==="ascending"||t[r]==="asc"?t[r]=1:(t[r]==="descending"||t[r]==="desc")&&(t[r]=-1);for(let r of this.indexes())e.name==null&&r[1].name==null&&wJ(r[0],t)&&pt.warn(`Duplicate schema index on ${JSON.stringify(t)} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.`);return this._indexes.push([t,e]),this};H.prototype.set=function(t,e,r){if(arguments.length===1)return this.options[t];switch(t){case"read":typeof e=="string"?this.options[t]={mode:HE(e),tags:r}:Array.isArray(e)&&typeof e[0]=="string"?this.options[t]={mode:HE(e[0]),tags:e[1]}:this.options[t]=e,this._userProvidedOptions[t]=this.options[t];break;case"timestamps":this.setupTimestamp(e),this.options[t]=e,this._userProvidedOptions[t]=this.options[t];break;case"_id":this.options[t]=e,this._userProvidedOptions[t]=this.options[t],e&&!this.paths._id?EJ(this):!e&&this.paths._id!=null&&this.paths._id.auto&&this.remove("_id");break;default:this.options[t]=e,this._userProvidedOptions[t]=this.options[t];break}return t==="strict"&&df(this,{strict:e}),t==="strictQuery"&&df(this,{strictQuery:e}),t==="toObject"&&(e={...e},delete e.transform,df(this,{toObject:e})),t==="toJSON"&&(e={...e},delete e.transform,df(this,{toJSON:e})),this};function df(t,e){for(let{schema:r}of t.childSchemas)r.$implicitlyCreated&&(Object.assign(r.options,e),df(r,e))}H.prototype.get=function(t){return this.options[t]};var W8e="2d 2dsphere hashed text".split(" ");Object.defineProperty(H,"indexTypes",{get:function(){return W8e},set:function(){throw new Error("Cannot overwrite Schema.indexTypes")}});H.prototype.indexes=function(){return P8e(this)};H.prototype.virtual=function(t,e){if(t instanceof W7||M8e(t)==="VirtualType")return this.virtual(t.path,t.options);if(e=new D8e(e),pt.hasUserDefinedProperty(e,["ref","refPath"])){if(e.localField==null)throw new Error("Reference virtuals require `localField` option");if(e.foreignField==null)throw new Error("Reference virtuals require `foreignField` option");let s=this.virtual(t);s.options=e,this.pre("init",function(u,c){if(zE.has(t,u)){let l=zE.get(t,u);if(this.$$populatedVirtuals||(this.$$populatedVirtuals={}),e.justOne||e.count?this.$$populatedVirtuals[t]=Array.isArray(l)?l[0]:l:this.$$populatedVirtuals[t]=Array.isArray(l)?l:l==null?[]:[l],c?.hydratedPopulatedDocs&&!e.count){let p=s._getModelNamesForPopulate(this),d=this.$$populatedVirtuals[t];if(!Array.isArray(d)&&!d.$__&&p?.length===1){let h=this.db.model(p[0]);this.$$populatedVirtuals[t]=h.hydrate(d)}else if(Array.isArray(d)&&p?.length===1){let h=this.db.model(p[0]);for(let y=0;y<d.length;++y)d[y].$__||(d[y]=h.hydrate(d[y],null,{hydratedPopulatedDocs:!0}));let f=e.foreignField;this.$populated(t,d.map(y=>y==null?y:y.get(typeof f=="function"?f.call(y,y):f)),{populateModelSymbol:h})}}zE.unset(t,u)}}),s.set(function(a){return this.$$populatedVirtuals||(this.$$populatedVirtuals={}),N8e(this.$$populatedVirtuals,t,a,e)}),typeof e.get=="function"&&s.get(e.get);let i=t.split("."),o=i[0];for(let a=0;a<i.length-1;++a)if(this.paths[o]!=null){if(this.paths[o].$isMongooseDocumentArray||this.paths[o].$isSingleNested){let u=i.slice(a+1).join(".");this.paths[o].schema.virtual(u,e);break}else if(this.paths[o].$isSchemaMap){let u=i.slice(a+2).join(".");this.paths[o].$__schemaType.schema.virtual(u,e);break}o+="."+i[a+1]}return s}let r=this.virtuals,n=t.split(".");if(this.pathType(t)==="real")throw new Error('Virtual path "'+t+'" conflicts with a real path in the schema');if(r[t]=n.reduce(function(s,i,o){return s[i]||(s[i]=o===n.length-1?new W7(e,t):{}),s[i]},this.tree),e?.applyToArray&&n.length>1){let s=this.path(n.slice(0,-1).join("."));if(s?.$isMongooseArray)return s.virtual(n[n.length-1],e);throw new au(`Path "${s}" is not an array`)}return r[t]};H.prototype.virtualpath=function(t){return Object.hasOwn(this.virtuals,t)?this.virtuals[t]:null};H.prototype.remove=function(t){return typeof t=="string"&&(t=[t]),Array.isArray(t)&&t.forEach(function(e){if(!(this.path(e)==null&&!this.nested[e])){if(this.nested[e]){let r=Object.keys(this.paths).concat(Object.keys(this.nested));for(let n of r)n.startsWith(e+".")&&(delete this.paths[n],delete this.nested[n],V7(this,n));delete this.nested[e],V7(this,e);return}delete this.paths[e],V7(this,e),this._removeEncryptedField(e)}},this),this};function V7(t,e){let r=e.split("."),n=r.pop(),s=t.tree;for(let i of r)s=s[i];delete s[n]}H.prototype.removeVirtual=function(t){if(typeof t=="string"&&(t=[t]),Array.isArray(t)){for(let e of t)if(this.virtuals[e]==null)throw new au(`Attempting to remove virtual "${e}" that does not exist.`);for(let e of t)delete this.paths[e],delete this.virtuals[e],e.indexOf(".")!==-1?zE.unset(e,this.tree):delete this.tree[e]}return this};H.prototype.loadClass=function(t,e){return t===Object.prototype||t===Function.prototype||Object.hasOwn(t.prototype,"$isMongooseModelPrototype")||Object.hasOwn(t.prototype,"$isMongooseDocumentPrototype")?this:(this.loadClass(Object.getPrototypeOf(t),e),e||Object.getOwnPropertyNames(t).forEach(function(r){if(r.match(/^(length|name|prototype|constructor|__proto__)$/))return;let n=Object.getOwnPropertyDescriptor(t,r);Object.hasOwn(n,"value")&&this.static(r,n.value)},this),Object.getOwnPropertyNames(t.prototype).forEach(function(r){if(r.match(/^(constructor)$/))return;let n=Object.getOwnPropertyDescriptor(t.prototype,r);e||typeof n.value=="function"&&this.method(r,n.value),typeof n.get=="function"&&(this.virtuals[r]&&(this.virtuals[r].getters=[]),this.virtual(r).get(n.get)),typeof n.set=="function"&&(this.virtuals[r]&&(this.virtuals[r].setters=[]),this.virtual(r).set(n.set))},this),this)};H.prototype._getSchema=function(t){let e=this,r=e.path(t),n=[];if(r)return r.$fullPath=t,r;function s(o,a){let u=o.length+1,c,l;for(;u--;)if(l=o.slice(0,u).join("."),c=a.path(l),c){if(n.push(l),c.embeddedSchemaType||c.Constructor){if(c.embeddedSchemaType instanceof uu.Mixed)return c.embeddedSchemaType.$fullPath=n.join("."),c.embeddedSchemaType;if(u!==o.length){if(u+1===o.length&&c.embeddedSchemaType&&(o[u]==="$"||KE(o[u])))return c.embeddedSchemaType;if(c.schema){let p;return o[u]==="$"||KE(o[u])?u+1===o.length?c.embeddedSchemaType:(p=s(o.slice(u+1),c.schema),p&&(p.$parentSchemaDocArray=p.$parentSchemaDocArray||(c.schema.$isSingleNested?null:c)),p):(p=s(o.slice(u),c.schema),p&&(p.$parentSchemaDocArray=p.$parentSchemaDocArray||(c.schema.$isSingleNested?null:c)),p)}}}else if(c.$isSchemaMap){if(u>=o.length)return c;if(u+1>=o.length||c.$__schemaType instanceof uu.Mixed)return c.$__schemaType;if(c.$__schemaType.schema!=null)return s(o.slice(u+1),c.$__schemaType.schema)}return c.$fullPath=n.join("."),c}}let i=t.split(".");for(let o=0;o<i.length;++o)(i[o]==="$"||KE(i[o]))&&(i[o]="0"),L8e.test(i[o])&&(i[o]="$");return s(i,e)};H.prototype._getPathType=function(t){let e=this;if(e.path(t))return"real";function n(s,i){let o=s.length+1,a,u;for(;o--;){if(u=s.slice(0,o).join("."),a=i.path(u),a)return a.embeddedSchemaType||a.Constructor?a.embeddedSchemaType instanceof uu.Mixed?{schema:a,pathType:"mixed"}:o!==s.length&&a.schema?s[o]==="$"||KE(s[o])?o===s.length-1?{schema:a,pathType:"nested"}:n(s.slice(o+1),a.schema):n(s.slice(o),a.schema):{schema:a,pathType:a.$isSingleNested?"nested":"array"}:{schema:a,pathType:"real"};if(o===s.length&&i.nested[u])return{schema:i,pathType:"nested"}}return{schema:a||i,pathType:"undefined"}}return n(t.split("."),e)};H.prototype._transformDuplicateKeyError=function(e){if(!this._duplicateKeyErrorMessagesByPath||e.code!==11e3&&e.code!==11001)return e;if(e.keyPattern!=null){let r=e.keyPattern,n=Object.keys(r);if(n.length!==1)return e;let s=n[0];return Object.hasOwn(this._duplicateKeyErrorMessagesByPath,s)?new au(this._duplicateKeyErrorMessagesByPath[s],{cause:e}):e}return e};function KE(t){return t.startsWith("$[")&&t.endsWith("]")}H.prototype._preCompile=function(){this.plugin(B8e,{deduplicate:!0})};H.prototype.toJSONSchema=function(e){let r=e?.useBsonType??!1,n=r?{required:[],properties:{}}:{type:"object",required:[],properties:{}};for(let s of Object.keys(this.paths)){let i=this.paths[s];if(i._presplitPath.indexOf("$*")!==-1)continue;let o=i._presplitPath.length>1,a=n;if(o)for(let l=0;l<i._presplitPath.length-1;++l){let p=i._presplitPath[l];a.properties[p]==null&&(a.properties[p]=r?{bsonType:["object","null"],properties:{}}:{type:["object","null"],properties:{}}),a=a.properties[p]}let u=i._presplitPath[i._presplitPath.length-1],c=!1;s==="_id"?(a.required||(a.required=[]),a.required.push("_id"),c=!0):i.options.required&&typeof i.options.required!="function"&&(a.required||(a.required=[]),a.required.push(u),c=!0),a.properties[u]=i.toJSONSchema(e),i.options.enum&&(a.properties[u].enum=c?i.options.enum:[...i.options.enum,null])}return n.required.length===0&&delete n.required,n};TJ.exports=z7=H;H.Types=uu=Qh();z7.ObjectId=uu.ObjectId});var K7=m((Dqe,DJ)=>{"use strict";var z8e=ds(),GE=class extends z8e{constructor(e,r,n,s){let i=e.map(o=>o.message).join(", ");i.length>200&&(i=i.slice(0,200)+"..."),super(`${s} failed with ${e.length} Mongoose validation errors: ${i}`),this.validationErrors=e,this.results=r,this.rawResult=n,this.operation=s}};Object.defineProperty(GE.prototype,"name",{value:"MongooseBulkWriteError"});DJ.exports=GE});var PJ=m((Mqe,MJ)=>{"use strict";var K8e=we(),JE=class extends K8e{constructor(e,r){super(e),this.errors=r}};Object.defineProperty(JE.prototype,"name",{value:"SyncIndexesError"});MJ.exports=JE});var H7=m((Pqe,BJ)=>{"use strict";BJ.exports=function t(e,r,n,s){if(e[s])return;if(e[s]=!0,!n?.skipTopLevel){let u=null;for(let c of r){let l=c[1]==null?null:c[1].tags;if(!Array.isArray(l)){e.plugin(c[0],c[1]);continue}u=u||new Set(e.options.pluginTags||[]),l.find(p=>u.has(p))&&e.plugin(c[0],c[1])}}if(n=Object.assign({},n),delete n.skipTopLevel,n.applyPluginsToChildSchemas!==!1)for(let u of Object.keys(e.paths)){let c=e.paths[u];c.schema!=null&&(t(c.schema,r,n,s),c.Constructor.prototype.$__setSchema(c.schema))}let i=e.discriminators;if(i==null)return;let o=n.applyPluginsToDiscriminators,a=Object.keys(i);for(let u of a){let c=i[u];t(c,r,{skipTopLevel:!o},s)}}});var YE=m((Bqe,G7)=>{"use strict";var IJ=null;G7.exports.get=function(){return IJ};G7.exports.set=function(t){IJ=t}});var J7=m((Iqe,NJ)=>{"use strict";function H8e(){return{ok:1,nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[],writeErrors:[],insertedIds:[],writeConcernErrors:[]}}NJ.exports=H8e});var RJ=m((Nqe,kJ)=>{"use strict";var G8e=we(),QE=class extends G8e{constructor(e,r){super(e),this.errors=r}};Object.defineProperty(QE.prototype,"name",{value:"CreateCollectionsError"});kJ.exports=QE});var qJ=m((kqe,$J)=>{"use strict";var FJ=V_().modifiedPaths;$J.exports=function(e){let r=Object.keys(e),n={},s={};for(let i of r){if(i.startsWith("$")){FJ(e[i],"",n);continue}s[i]=e[i]}return FJ(s,"",n),n}});var Y7=m((Rqe,jJ)=>{"use strict";var J8e=qJ();jJ.exports=function(e){if(e==null)return{};let r=J8e(e);return Object.keys(r).reduce((n,s)=>{let i=s.match(/\$\[[^\]]+\]/g);if(i==null)return n;for(let o of i){let a=s.indexOf(o);if(a!==s.lastIndexOf(o))throw new Error(`Path '${s}' contains the same array filter multiple times`);n[o.substring(2,o.length-1)]=s.substring(0,a-1).replace(/\$\[[^\]]+\]/g,"0")}return n},{})}});var VJ=m((Fqe,UJ)=>{"use strict";var Y8e=Kh(),LJ=Rt(),Q8e=Us(),X8e=Y7();UJ.exports=function(e,r,n,s,i){let o=s.indexOf(".")===-1?[s]:s.split("."),a=null,u="adhocOrUndefined";n=n||{},r=r||{};let c=Array.isArray(i?.arrayFilters)?i.arrayFilters:[],l=X8e(r),p=0;for(let d=0;d<o.length;++d){let h=o.slice(p,d+1).join("."),f=Y8e(h);if(a=e.path(f),a!=null&&(u=e.pathType(f),(a.$isSingleNested||a.$isMongooseDocumentArrayElement)&&a.schema.discriminators!=null)){let y=LJ(a,"schema.options.discriminatorKey"),g=f+"."+y,_=g.replace(/\.\d+\./,"."),w=null;g in n&&(w=n[g]),_ in n&&(w=n[_]);let O=f.replace(/\.\d+$/,"");a.$isMongooseDocumentArrayElement&&LJ(n[O],"$elemMatch."+y)!=null&&(w=n[O].$elemMatch[y]);let E=h+"."+y;E in r&&(w=r[E]),g in r&&(w=r[g]);for(let R of Object.keys(l)){let M=l[R]+"."+y,I=R+"."+y;if(M===_){let j=c.find(U=>Object.hasOwn(U,I));j!=null&&(w=j[I])}}if(w==null)continue;let x=Q8e(a.Constructor.discriminators,w)?.schema;if(x==null)continue;let v=o.slice(d+1).join(".");if(a=x.path(v),e=x,p=d+1,a!=null){u=x._getPathType(v);break}}}return{type:u,schematype:a}}});var zJ=m(($qe,WJ)=>{"use strict";var Z8e=eu();WJ.exports=function(e,r,n,s,i,o,a){if(!e?.options?.immutable)return!1;let u=e.options.immutable;if(typeof u=="function"&&(u=u.call(a,a)),!u||o?.overwriteImmutable||r===!1)return!1;if(r==="throw")throw new Z8e(null,`Field ${i} is immutable and strict = 'throw'`);return delete n[s],!0}});var GJ=m((qqe,HJ)=>{"use strict";var exe=Rt();HJ.exports=function(e,r,n){if(r==null)return;let s=Object.keys(r);for(let i of s){let o=i.startsWith("$");if(i==="$set"){let a=Object.keys(r[i]);for(let u of a)KJ(e,r[i],u,r,n)}else o||KJ(e,r,i,r,n)}};function KJ(t,e,r,n,s){let i=t.path(r);if(i==null)return;let o=exe(i,"options.immutable",null);o!=null&&(typeof o=="function"&&(o=o.call(s,s)),o&&(n.$setOnInsert=n.$setOnInsert||{},n.$setOnInsert[r]=e[r],delete e[r]))}});var X7=m((jqe,JJ)=>{"use strict";var Q7=dc();JJ.exports=function(e,r,n){if(r.indexOf(".")===-1){if(Q7.has(r))return;e[r]=n;return}let s=r.split("."),i=s.pop(),o=e;for(let a of s)Q7.has(a)||(o[a]==null&&(o[a]={}),o=o[a]);Q7.has(i)||(o[i]=n)}});var s5=m((Lqe,nY)=>{"use strict";var XE=sn(),m1=we(),YJ=F7(),QJ=eu(),txe=yc(),t5=Gh(),rxe=xc(),nxe=bn(),Z7=Us(),e5=VJ(),XJ=zJ(),sxe=GJ(),tY=gc().schemaMixedSymbol,ixe=X7(),Go=ae(),{internalToObjectOptions:oxe}=bi(),r5=new Set(["$currentDate","$inc","$min","$max","$mul","$rename","$set","$setOnInsert","$unset","$addToSet","$pop","$pull","$push","$pullAll","$bit"]);nY.exports=function(e,r,n,s,i){if(r==null)return;if(n=n||{},Array.isArray(r)){let p=r.length;for(let d=0;d<p;++d){let h=Object.keys(r[d]);for(let f of h)r[d][f]=axe(f,r[d][f])}return r}if(e!=null&&i!=null&&Go.hasUserDefinedProperty(i,e.options.discriminatorKey)&&typeof i[e.options.discriminatorKey]!="object"&&e.discriminators!=null){let p=i[e.options.discriminatorKey],d=Z7(s.model.discriminators,p);e=e.discriminators[p]||d?.schema||e}else if(e!=null&&n.overwriteDiscriminatorKey&&Go.hasUserDefinedProperty(r,e.options.discriminatorKey)&&e.discriminators!=null){let p=r[e.options.discriminatorKey],d=Z7(s.model.discriminators,p);e=e.discriminators[p]||d?.schema||e}else if(e!=null&&n.overwriteDiscriminatorKey&&r.$set!=null&&Go.hasUserDefinedProperty(r.$set,e.options.discriminatorKey)&&e.discriminators!=null){let p=r.$set[e.options.discriminatorKey],d=Z7(s.model.discriminators,p);e=e.discriminators[p]||d?.schema||e}n.upsert&&sxe(e,r,s);let o=Object.keys(r),a=o.length,u={},c,l=!1;for(i=i||{};a--;){let p=o[a];r5.has(p)?p==="$set"&&u.$set||(u[p]=r[p]):(u.$set||(r.$set?u.$set=r.$set:u.$set={}),u.$set[p]=r[p],o.splice(a,1),~o.indexOf("$set")||o.push("$set"))}for(a=o.length;a--;){let p=o[a];if(c=u[p],l=l||p.startsWith("$"),c?.$__&&(c=c.toObject(oxe),u[p]=c),c&&typeof c=="object"&&!Buffer.isBuffer(c)&&r5.has(p))rY(e,c,p,n,s,i);else{let d="Invalid atomic update value for "+p+". Expected an object, received "+typeof c;throw new Error(d)}p.startsWith("$")&&Go.isEmptyObject(c)&&delete u[p]}return Go.hasOwnKeys(u)===!1&&n.upsert&&Go.hasOwnKeys(i)?{$setOnInsert:{...i}}:u};function axe(t,e){if(t==="$unset"){if(typeof e!="string"&&(!Array.isArray(e)||e.find(r=>typeof r!="string")))throw new m1("Invalid $unset in pipeline, must be  a string or an array of strings");return e}if(t==="$project"){if(e==null||typeof e!="object")throw new m1("Invalid $project in pipeline, must be an object");return e}if(t==="$addFields"||t==="$set"){if(e==null||typeof e!="object")throw new m1("Invalid "+t+" in pipeline, must be an object");return e}else if(t==="$replaceRoot"||t==="$replaceWith"){if(e==null||typeof e!="object")throw new m1("Invalid "+t+" in pipeline, must be an object");return e}throw new m1('Invalid update pipeline operator: "'+t+'"')}function rY(t,e,r,n,s,i,o){let a=n.strict;o=o?o+".":"";let u=Object.keys(e),c=u.length,l=!1,p,d,h,f=null,y=a??t.options.strict;for(;c--;){if(d=u[c],h=e[d],r==="$pull"){if(p=t._getSchema(o+d),p==null){let _=e5(t,e,i,o+d,n);_.schematype!=null&&(p=_.schematype)}if(p?.schema!=null){e[d]=rxe(p.schema,e[d],n,s),l=!0;continue}}let g=o?o+d:d;if(t.discriminatorMapping!=null&&g===t.options.discriminatorKey&&t.discriminatorMapping.value!==e[d]&&!n.overwriteDiscriminatorKey){if(y==="throw"){let _=new Error(`Can't modify discriminator key "`+g+'" on discriminator model');f=Ic(_,s,g,f);continue}else if(y){delete e[d];continue}}if(nxe(h)==="Object"){if(p=t._getSchema(o+d),p==null){let _=e5(t,e,i,o+d,n);_.schematype!=null&&(p=_.schematype)}if(r!=="$setOnInsert"&&XJ(p,a,e,d,o+d,n,s))continue;if(p&&(p.embeddedSchemaType||p.Constructor)&&r in n5)if("$each"in h){l=!0;try{e[d]={$each:f1(p,h.$each,r,d,s,o+d)}}catch(_){f=Ic(_,s,d,f)}h.$slice!=null&&(e[d].$slice=h.$slice|0),h.$sort&&(e[d].$sort=h.$sort),h.$position!=null&&(e[d].$position=t5(h.$position))}else{if(p?.$isSingleNested){let _=a??p.schema.options.strict;try{e[d]=p.castForQuery(null,h,s,{strict:_})}catch(w){f=Ic(w,s,d,f)}}else try{e[d]=f1(p,h,r,d,s,o+d)}catch(_){f=Ic(_,s,d,f)}if(e[d]===void 0){delete e[d];continue}l=!0}else if(r==="$currentDate"||r in n5&&p){try{e[d]=f1(p,h,r,d,s,o+d)}catch(_){f=Ic(_,s,d,f)}if(e[d]===void 0){delete e[d];continue}l=!0}else if(r==="$rename"){let _=new YJ(`${o}${d}.$rename`);try{e[d]=f1(_,h,r,d,s,o+d)}catch(w){f=Ic(w,s,d,f)}if(e[d]===void 0){delete e[d];continue}l=!0}else{let _=o+d,w=t._getPathType(_),O=a;if(w?.schema&&O==null&&(O=w.schema.options.strict),w.pathType==="undefined"){if(O==="throw")throw new QJ(_);if(O){delete e[d];continue}}l|=rY(t,h,r,n,s,i,o+d)||Go.isObject(h)&&Go.hasOwnKeys(h)===!1}}else{let _=d==="$each"||d==="$or"||d==="$and"||d==="$in";if(_&&!o)throw new m1('Invalid update: Unexpected modifier "'+d+'" as a key in operator. Did you mean something like { $addToSet: { fieldName: { $each: [...] } } }? Modifiers such as "$each", "$or", "$and", "$in" must appear under a valid field path.');let w=_?o:o+d;if(p=t._getSchema(w),r!=="$setOnInsert"&&XJ(p,a,e,d,o+d,n,s))continue;let O=t._getPathType(w);if(p==null){let x=e5(t,e,i,w,n);x.schematype!=null&&(p=x.schematype,O=x.type)}let E=a;if(O?.schema&&a==null&&(E=O.schema.options.strict),E&&!p&&!/real|nested/.test(O.pathType)){if(E==="throw"&&t.virtuals[w]==null)throw new QJ(o+d);delete e[d]}else{if(r==="$rename"){if(e[d]==null)throw new XE("String",e[d],`${o}${d}.$rename`);let x=new YJ(`${o}${d}.$rename`,null,null,t);e[d]=x.castForQuery(null,e[d],s);continue}try{o.length===0||d.indexOf(".")===-1?e[d]=f1(p,h,r,d,s,o+d):(E!==!1||p!=null)&&(ixe(e,d,f1(p,h,r,d,s,o+d)),delete e[d])}catch(x){f=Ic(x,s,d,f)}if(Array.isArray(e[d])&&(r==="$addToSet"||r==="$push")&&d!=="$each"&&p&&p.embeddedSchemaType&&!p.embeddedSchemaType.$isMongooseArray&&!p.embeddedSchemaType[tY]&&(e[d]={$each:e[d]}),e[d]===void 0){delete e[d];continue}l=!0}}}if(f!=null)throw f;return l}function Ic(t,e,r,n){if(typeof e!="object"||!e.options.multipleCastError)throw t;return n=n||new txe,n.addError(r,t),n}var ZJ={$pop:1,$inc:1},uxe={$unset:1},n5={$push:1,$addToSet:1,$set:1,$setOnInsert:1};var eY={$set:1,$setOnInsert:1};function f1(t,e,r,n,s,i){if(!t){if(r in ZJ)try{return t5(e)}catch{throw new XE("number",e,i)}return e}if(t.$isMongooseArray&&r in n5&&(Go.isObject(e)||Array.isArray(e))&&!eY[r]){let a=0,u=t;for(;u.$isMongooseArray;)++a,u=u.embeddedSchemaType;let c=0,l=e;for(;Array.isArray(l);)++c,l=l[0];let p=a-c;for(;c<a;)e=[e],++c;let d=t.applySetters(Array.isArray(e)?e:[e],s);for(let h=0;h<p;++h)d=d[0];return d}if(r in uxe)return e;if(r in ZJ){if(e==null)throw new XE("number",e,t.path);if(r==="$inc")return t.castForQuery(null,e,s);try{return t5(e)}catch{throw new XE("number",e,t.path)}}if(r==="$currentDate")return typeof e=="object"?{$type:e.$type}:!!e;if(r5.has(n))return t.castForQuery(n,e,s);if(eY[r]){let a=e!=null&&t.$isMongooseArray&&t.$fullPath!=null&&!t.$fullPath.match(/\d+$/),u=t[tY]!=null;return a||u?t.applySetters(e,s):t.castForQuery(null,e,s)}return t.castForQuery(null,e,s)}});var i5=m((Uqe,sY)=>{"use strict";sY.exports=function(e,r,n){!n||!r?.upsert||(r.overwrite?hf(e,n)||(e[n]=0):!hf(e,n)&&!hf(e?.$set,n)&&!hf(e?.$inc,n)&&!hf(e?.$setOnInsert,n)&&(e.$setOnInsert||(e.$setOnInsert={}),e.$setOnInsert[n]=0))};function hf(t,e){return t==null||typeof t!="object"?!1:Object.hasOwn(t,e)}});var o5=m((Vqe,oY)=>{"use strict";var cxe=Rt();oY.exports=function(t,e,r,n){n=n||{};let s=n.setDefaultsOnInsert??e.base.options.setDefaultsOnInsert;if(!n.upsert||s===!1)return r;let i=Object.keys(r||{}),o={},a={},u=i.length,c=!1;for(let d=0;d<u;++d)if(i[d].charAt(0)==="$"){c=!0;break}let l=Object.keys(t),p=l.length;for(let d=0;d<p;++d){let h=l[d],f=t[h];if(f&&typeof f=="object"){let y=Object.keys(f),g=y.length,_=!1;for(let w=0;w<g;++w)if(y[w].charAt(0)==="$"){_=!0;break}if(_)continue}o[h]=!0}return n?.overwrite&&!c||e.eachPath(function(d,h){if(h.path==="_id"&&h.options.auto)return;let f=h.getDefault(null,!0);if(typeof f>"u")return;let y=h.splitPath();y.includes("$*")||lxe(r,o,d,y,c)||(r=r||{},r.$setOnInsert=r.$setOnInsert||{},cxe(r,d)==null&&(r.$setOnInsert[d]=f),a[d]=f)}),r};function lxe(t,e,r,n,s){if(e[r])return!0;let i=n[0];for(let o=1;o<n.length;++o){if(e[i])return!0;i+="."+n[o]}if(s){for(let o in t)if(o.charAt(0)==="$"&&iY(t[o],r,n))return!0}else if(iY(t,r,n))return!0;return!1}function iY(t,e,r){if(t==null||typeof t!="object")return!1;if(Object.hasOwn(t,e))return!0;let n=r[0];for(let i=1;i<r.length;++i){if(Object.hasOwn(t,n))return!0;n+="."+r[i]}let s=e+".";for(let i in t)if(i.startsWith(s))return!0;return!1}});var a5=m((Wqe,Gt)=>{"use strict";var pxe=we(),dxe=Us(),aY=qx(),uY=jx(),ff=xc(),cY=s5(),hxe=vt(),lY=i5(),{inspect:fxe}=require("util"),pY=o5();Gt.exports=function(e,r,n){let s=e.base.now();return r.insertOne?i=>Gt.exports.castInsertOne(e,r.insertOne,n).then(()=>i(null),o=>i(o)):r.updateOne?i=>{try{Gt.exports.castUpdateOne(e,r.updateOne,n,s),i(null)}catch(o){i(o)}}:r.updateMany?i=>{try{Gt.exports.castUpdateMany(e,r.updateMany,n,s),i(null)}catch(o){i(o)}}:r.replaceOne?i=>{Gt.exports.castReplaceOne(e,r.replaceOne,n).then(()=>i(null),o=>i(o))}:r.deleteOne?i=>{try{Gt.exports.castDeleteOne(e,r.deleteOne),i(null)}catch(o){i(o)}}:r.deleteMany?i=>{try{Gt.exports.castDeleteMany(e,r.deleteMany),i(null)}catch(o){i(o)}}:i=>{let o=new pxe(`Invalid op passed to \`bulkWrite()\`: ${fxe(r)}`);i(o,null)}};Gt.exports.castInsertOne=async function(e,r,n){let s=y1(e,r.document),i=new s(r.document);s.schema.options.timestamps&&ZE(r,n)&&i.initializeTimestamps(),n.session!=null&&i.$session(n.session);let o=s?.schema?.options?.versionKey;return o&&i[o]==null&&(i[o]=0),r.document=i,n.skipValidation||r.skipValidation||await r.document.$validate(),r};Gt.exports.castUpdateOne=function(e,r,n,s){if(!r.filter)throw new Error("Must provide a filter object.");if(!r.update)throw new Error("Must provide an update object.");let i=y1(e,r.filter),o=i.schema,a=n.strict??i.schema.options.strict,u=hxe(r.update);mf(o,r.filter);let c=ZE(r,n);if(i.schema.$timestamps!=null&&c){let d=i.schema.$timestamps.createdAt,h=i.schema.$timestamps.updatedAt;uY(s,d,h,u,{timestamps:r.timestamps,overwriteImmutable:r.overwriteImmutable})}c&&aY(s,u,i.schema);let l=e.base.options.setDefaultsOnInsert;return(r.setDefaultsOnInsert??l)!==!1&&pY(r.filter,i.schema,u,{setDefaultsOnInsert:!0,upsert:r.upsert}),lY(u,r,i.schema.options.versionKey),r.filter=ff(i.schema,r.filter,{strict:a,upsert:r.upsert}),r.update=cY(i.schema,u,{strict:a,upsert:r.upsert,arrayFilters:r.arrayFilters,overwriteDiscriminatorKey:r.overwriteDiscriminatorKey,overwriteImmutable:r.overwriteImmutable},i,r.filter),r};Gt.exports.castUpdateMany=function(e,r,n,s){if(!r.filter)throw new Error("Must provide a filter object.");if(!r.update)throw new Error("Must provide an update object.");let i=y1(e,r.filter),o=i.schema,a=n.strict??i.schema.options.strict,u=e.base.options.setDefaultsOnInsert;(r.setDefaultsOnInsert??u)!==!1&&pY(r.filter,i.schema,r.update,{setDefaultsOnInsert:!0,upsert:r.upsert});let l=ZE(r,n);if(i.schema.$timestamps!=null&&l){let p=i.schema.$timestamps.createdAt,d=i.schema.$timestamps.updatedAt;uY(s,p,d,r.update,{timestamps:r.timestamps,overwriteImmutable:r.overwriteImmutable})}l&&aY(s,r.update,i.schema),mf(o,r.filter),lY(r.update,r,i.schema.options.versionKey),r.filter=ff(i.schema,r.filter,{strict:a,upsert:r.upsert}),r.update=cY(i.schema,r.update,{strict:a,upsert:r.upsert,arrayFilters:r.arrayFilters,overwriteDiscriminatorKey:r.overwriteDiscriminatorKey,overwriteImmutable:r.overwriteImmutable},i,r.filter)};Gt.exports.castReplaceOne=async function(e,r,n){let s=y1(e,r.filter),i=s.schema,o=n.strict??s.schema.options.strict;mf(i,r.filter),r.filter=ff(s.schema,r.filter,{strict:o,upsert:r.upsert});let a=new s(r.replacement,o,{skipId:!0});s.schema.options.timestamps&&ZE(r,n)&&a.initializeTimestamps(),n.session!=null&&a.$session(n.session);let u=s?.schema?.options?.versionKey;if(u&&a[u]==null&&(a[u]=0),r.replacement=a,n.skipValidation||r.skipValidation){r.replacement=r.replacement.toBSON();return}await r.replacement.$validate(),r.replacement=r.replacement.toBSON()};Gt.exports.castDeleteOne=function(e,r){let n=y1(e,r.filter),s=n.schema;mf(s,r.filter),r.filter=ff(n.schema,r.filter)};Gt.exports.castDeleteMany=function(e,r){let n=y1(e,r.filter),s=n.schema;mf(s,r.filter),r.filter=ff(n.schema,r.filter)};Gt.exports.cast={insertOne:Gt.exports.castInsertOne,updateOne:Gt.exports.castUpdateOne,updateMany:Gt.exports.castUpdateMany,replaceOne:Gt.exports.castReplaceOne,deleteOne:Gt.exports.castDeleteOne,deleteMany:Gt.exports.castDeleteMany};function mf(t,e){t!=null&&t.discriminatorMapping&&!t.discriminatorMapping.isRoot&&(e[t.discriminatorMapping.key]=t.discriminatorMapping.value)}function y1(t,e){let r=t.schema.options.discriminatorKey;return e!=null&&Object.hasOwn(e,r)&&(t=dxe(t.discriminators,e[r])||t),t}function ZE(t,e){let r=t.timestamps,n=e.timestamps;return r??n??!0}});var u5=m((zqe,dY)=>{"use strict";dY.exports=function(e,r,n){return e.mongoose=e.mongoose||{},e.mongoose.validationErrors=r,e.mongoose.results=n,e}});var d5=m((Kqe,yY)=>{"use strict";var mxe=P8(),l5=require("events").EventEmitter,yxe=Oc(),Jt=kd(),hY=K7(),$t=ds(),gxe=L8(),_xe=PJ(),Exe=H7(),bxe=vt(),wxe=YE(),Sxe=Rt(),Axe=J7(),fY=Da(),p5=ae(),Oxe=RJ(),eb=a5(),{modelSymbol:tb}=te(),Cxe=ix(),c5=u5(),vxe=te().arrayAtomicsSymbol,yf=te().sessionNewDocuments,xxe=globalThis.Date,Txe=["MONGODB-X509"];function se(t){this.base=t,this.collections={},this.models={},this.config={},this.replica=!1,this.options=null,this.otherDbs=[],this.relatedDbs={},this.states=Jt,this._readyState=Jt.disconnected,this._closeCalled=!1,this._hasOpened=!1,this.plugins=[],typeof t>"u"||!t.connections.length?this.id=0:this.id=t.nextConnectionId,this._queue=[]}Object.setPrototypeOf(se.prototype,l5.prototype);Object.defineProperty(se.prototype,"readyState",{get:function(){return this._readyState===Jt.connected&&this._lastHeartbeatAt!=null&&this.client?.topology?.s?.description?.type!=="LoadBalanced"&&typeof this.client?.topology?.s?.description?.heartbeatFrequencyMS=="number"&&xxe.now()-this._lastHeartbeatAt>=this.client.topology.s.description.heartbeatFrequencyMS*2?Jt.disconnected:this._readyState},set:function(t){if(!(t in Jt))throw new Error("Invalid connection state: "+t);if(this._readyState!==t){this._readyState=t;for(let e of this.otherDbs)e.readyState=t;Jt.connected===t&&(this._hasOpened=!0),this.emit(Jt[t])}}});se.prototype.get=function(e){return Object.hasOwn(this.config,e)?this.config[e]:Sxe(this.options,e)};se.prototype.set=function(e,r){return Object.hasOwn(this.config,e)?(this.config[e]=r,r):(this.options=this.options||{},this.options[e]=r,r)};se.prototype.collections;se.prototype.name;se.prototype.models;se.prototype.id;Object.defineProperty(se.prototype,"plugins",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(se.prototype,"host",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(se.prototype,"port",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(se.prototype,"user",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(se.prototype,"pass",{configurable:!0,enumerable:!0,writable:!0});se.prototype.db;se.prototype.client;se.prototype.config;se.prototype.createCollection=async function(e,r){if(typeof r=="function"||arguments.length>=3&&typeof arguments[2]=="function")throw new $t("Connection.prototype.createCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.createCollection(e,r)};se.prototype.bulkWrite=async function(e,r){await this._waitForConnect(),r=r||{};let n=r.ordered==null?!0:r.ordered,s=this.base.transactionAsyncLocalStorage?.getStore();(!r||!Object.hasOwn(r,"session"))&&s?.session!=null&&(r={...r,session:s.session});let i=this.base.now(),o=null;if(n){let a=[];for(let u of e){if(typeof u.model!="string"&&!u.model?.[tb])throw new $t("Must specify model in Connection.prototype.bulkWrite() operations");let c=u.model[tb]?u.model:this.model(u.model);if(u.name==null)throw new $t("Must specify operation name in Connection.prototype.bulkWrite()");if(!Object.hasOwn(eb.cast,u.name))throw new $t(`Unrecognized bulkWrite() operation name ${u.name}`);await eb.cast[u.name](c,u,r,i),a.push({...u,namespace:c.namespace()})}o=await this.client.bulkWrite(a,r)}else{let a=[],u=[],c=[],l=[],p=[];for(let h=0;h<e.length;++h){let f=e[h];if(typeof f.model!="string"&&!f.model?.[tb]){let _=new $t("Must specify model in Connection.prototype.bulkWrite() operations");c.push({index:h,error:_}),p[h]=_;continue}let y;try{y=f.model[tb]?f.model:this.model(f.model)}catch(_){c.push({index:h,error:_});continue}if(f.name==null){let _=new $t("Must specify operation name in Connection.prototype.bulkWrite()");c.push({index:h,error:_}),p[h]=_;continue}if(!Object.hasOwn(eb.cast,f.name)){let _=new $t(`Unrecognized bulkWrite() operation name ${f.name}`);c.push({index:h,error:_}),p[h]=_;continue}let g=null;try{g=eb.cast[f.name](y,f,r,i)}catch(_){c.push({index:h,error:_}),p[h]=_;continue}Cxe(g)?l.push(g.then(()=>{a.push({...f,namespace:y.namespace()}),u.push(h)},_=>{c.push({index:h,error:_}),p[h]=_})):(a.push({...f,namespace:y.namespace()}),u.push(h))}if(l.length>0&&await Promise.all(l),c=c.sort((h,f)=>h.index-f.index).map(h=>h.error),a.length===0){if(r.throwOnValidationError&&c.length)throw new hY(c,p,f,"bulkWrite");let h=this.base.driver.get().BulkWriteResult,f=new h(Axe(),!1);return c5(f,c,p)}let d;[o,d]=await this.client.bulkWrite(a,r).then(h=>[h,null]).catch(h=>[null,h]);for(let h=0;h<u.length;++h)p[u[h]]=null;if(d&&c.length>0&&(c5(d,c,p),d.mongoose=d.mongoose||{},d.mongoose.validationErrors=c),c.length>0){if(r.throwOnValidationError)throw new hY(c,p,o,"bulkWrite");c5(o,c,p)}}return o};se.prototype.createCollections=async function(e={}){let r={},n={},{continueOnError:s}=e;delete e.continueOnError;for(let i of Object.values(this.models))try{r[i.modelName]=await i.createCollection({})}catch(o){if(s)r[i.modelName]=o;else{n[i.modelName]=o;break}}if(!s&&p5.hasOwnKeys(n)){let i=Object.entries(n).map(([a,u])=>`${a}: ${u.message}`).join(", ");throw new Oxe(i,n)}return r};se.prototype.withSession=async function(e){if(arguments.length===0)throw new Error("Please provide an executor function");return await this.client.withSession(e)};se.prototype.startSession=async function(e){if(arguments.length>=2&&typeof arguments[1]=="function")throw new $t("Connection.prototype.startSession() no longer accepts a callback");return await this._waitForConnect(),this.client.startSession(e)};se.prototype.transaction=function(e,r){return this.startSession().then(n=>(n[yf]=new Map,n.withTransaction(()=>Dxe(e,n,this.base),r).then(s=>(delete n[yf],s)).catch(s=>{throw delete n[yf],s}).finally(()=>{n.endSession().catch(()=>{})})))};async function Dxe(t,e,r){try{return r.transactionAsyncLocalStorage==null?await t(e):await new Promise(s=>{r.transactionAsyncLocalStorage.run({session:e},()=>s(t(e)))})}catch(n){throw Mxe(e),n}}function Mxe(t){for(let e of t[yf].keys()){let r=t[yf].get(e);Object.hasOwn(r,"isNew")&&(e.$isNew=r.isNew),Object.hasOwn(r,"versionKey")&&e.set(e.schema.options.versionKey,r.versionKey),r.modifiedPaths.length>0&&e.$__.activePaths.states.modify==null&&(e.$__.activePaths.states.modify={});for(let n of r.modifiedPaths){let s=e.$__.activePaths.paths[n];s!=null&&delete e.$__.activePaths[s][n],e.$__.activePaths.paths[n]="modify",e.$__.activePaths.states.modify[n]=!0}for(let n of r.atomics.keys()){let s=e.$__getValue(n);s!=null&&(s[vxe]=r.atomics.get(n))}}}se.prototype.dropCollection=async function(e){if(arguments.length>=2&&typeof arguments[1]=="function")throw new $t("Connection.prototype.dropCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.dropCollection(e)};se.prototype._waitForConnect=async function(e){if((this.readyState===Jt.connecting||this.readyState===Jt.disconnected)&&this._shouldBufferCommands()){let r=this._getBufferTimeoutMS(),n=null,s=!1,i={},o=new Promise(a=>{i.fn=a,this._queue.push(i)});if(e?await o:await Promise.race([o,new Promise(a=>{n=setTimeout(()=>{s=!0,a()},r)})]),s){let a=this._queue.indexOf(i);a!==-1&&this._queue.splice(a,1);let u="Connection operation buffering timed out after "+r+"ms";throw new $t(u)}else n!=null&&clearTimeout(n)}};se.prototype._getBufferTimeoutMS=function(){return this.config.bufferTimeoutMS!=null?this.config.bufferTimeoutMS:this.base?.get("bufferTimeoutMS")!=null?this.base.get("bufferTimeoutMS"):1e4};se.prototype.listCollections=async function(){return await this._waitForConnect(),await this.db.listCollections().toArray()};se.prototype.listDatabases=async function(){throw new $t("listDatabases() not implemented by driver")};se.prototype.dropDatabase=async function(){if(arguments.length>=1&&typeof arguments[0]=="function")throw new $t("Connection.prototype.dropDatabase() no longer accepts a callback");await this._waitForConnect();for(let e of Object.values(this.models))delete e.$init;return this.db.dropDatabase()};se.prototype._shouldBufferCommands=function(){return this.config.bufferCommands!=null?this.config.bufferCommands:this.base.get("bufferCommands")!=null?this.base.get("bufferCommands"):!0};se.prototype.error=function(e,r){return r?(r(e),null):(this.listeners("error").length>0&&this.emit("error",e),Promise.reject(e))};se.prototype.onOpen=function(){this.readyState=Jt.connected;for(let t of this._queue)t.fn.apply(t.ctx,t.args);this._queue=[];for(let t in this.collections)Object.hasOwn(this.collections,t)&&this.collections[t].onOpen();this.emit("open")};se.prototype.openUri=async function(e,r){if((this.readyState===Jt.connecting||this.readyState===Jt.connected)&&this._connectionString===e)return this;this._closeCalled=!1;let n=!1;r&&"_fireAndForget"in r&&(n=r._fireAndForget,delete r._fireAndForget);try{Pxe.apply(arguments)}catch(s){throw n||(this.$initialConnection=Promise.reject(s)),s}this.$initialConnection=this.createClient(e,r).then(()=>this).catch(s=>{throw this.readyState=Jt.disconnected,this.listeners("error").length>0&&fY(()=>this.emit("error",s)),s});for(let s of Object.values(this.models))s.init().catch(function(){});if(n)return this;try{await this.$initialConnection}catch(s){throw mY(s)}return this};se.prototype.on=function(e,r){return e==="error"&&this.$initialConnection&&this.$initialConnection.catch(()=>{}),l5.prototype.on.call(this,e,r)};se.prototype.once=function(e,r){return e==="error"&&this.$initialConnection&&this.$initialConnection.catch(()=>{}),l5.prototype.once.call(this,e,r)};function Pxe(t,e,r){if(typeof e=="function"&&r==null)throw new $t("Connection.prototype.openUri() no longer accepts a callback");if(typeof r=="function")throw new $t("Connection.prototype.openUri() no longer accepts a callback")}function mY(t){if(t?.name==="MongoServerSelectionError"){let e=t;t=new gxe,t.assimilateError(e)}return t}se.prototype.destroy=async function(e){if(typeof e=="function"||arguments.length===2&&typeof arguments[1]=="function")throw new $t("Connection.prototype.destroy() no longer accepts a callback");return e!=null&&typeof e=="object"?this.$wasForceClosed=!!e.force:this.$wasForceClosed=!!e,this._close(e,!0)};se.prototype.close=async function(e){if(typeof e=="function"||arguments.length===2&&typeof arguments[1]=="function")throw new $t("Connection.prototype.close() no longer accepts a callback");e!=null&&typeof e=="object"?this.$wasForceClosed=!!e.force:this.$wasForceClosed=!!e,this._lastHeartbeatAt!=null&&(this._lastHeartbeatAt=null);for(let r of Object.values(this.models))delete r.$init;return this._close(e,!1)};se.prototype._close=async function(e,r){let n=this,s=this._closeCalled;this._closeCalled=!0,this._destroyCalled=r,this.client!=null&&(this.client._closeCalled=!0,this.client._destroyCalled=r);let i=this;switch(this.readyState){case Jt.disconnected:if(r){let o=this.base.connections.indexOf(i);o!==-1&&this.base.connections.splice(o,1)}s||(await this.doClose(e),this.onClose(e));break;case Jt.connected:if(this.readyState=Jt.disconnecting,await this.doClose(e),r){let o=n.base.connections.indexOf(i);o!==-1&&this.base.connections.splice(o,1)}this.onClose(e);break;case Jt.connecting:return new Promise((o,a)=>{let u=()=>{this.removeListener("open",u),this.removeListener("error",u),r?this.destroy(e).then(o,a):this.close(e).then(o,a)};this.once("open",u),this.once("error",u)});case Jt.disconnecting:return new Promise(o=>{this.once("close",()=>{r&&this.base.connections.indexOf(i)!==-1&&this.base.connections.splice(this.base.connections.indexOf(i),1),o()})})}return this};se.prototype.doClose=function(){throw new Error("Connection#doClose unimplemented by driver")};se.prototype.onClose=function(e){this.readyState=Jt.disconnected;for(let n in this.collections)Object.hasOwn(this.collections,n)&&this.collections[n].onClose(e);this.emit("close",e);let r=typeof e=="object"&&e!==null?e.force:e;for(let n of this.otherDbs)this._destroyCalled?n.destroy({force:r,skipCloseClient:!0}):n.close({force:r,skipCloseClient:!0})};se.prototype.collection=function(t,e){let r={autoIndex:this.config.autoIndex??this.base.options.autoIndex,autoCreate:this.config.autoCreate??this.base.options.autoCreate,autoSearchIndex:this.config.autoSearchIndex??this.base.options.autoSearchIndex};e=Object.assign({},r,e?bxe(e):{}),e.$wasForceClosed=this.$wasForceClosed;let n=this.base?.__driver?.Collection||wxe.get().Collection;return t in this.collections||(this.collections[t]=new n(t,this,e)),this.collections[t]};se.prototype.plugin=function(t,e){return this.plugins.push([t,e]),this};se.prototype.model=function(e,r,n,s){if(!(this instanceof se))throw new $t("`connection.model()` should not be run with `new`. If you are doing `new db.model(foo)(bar)`, use `db.model(foo)(bar)` instead");let i;if(typeof e=="function"&&(i=e,e=i.name),typeof r=="string"&&(n=r,r=!1),p5.isObject(r)&&(r.instanceOfSchema?r instanceof this.base.Schema||(r=r._clone(this.base.Schema)):r=new yxe(r)),r&&!r.instanceOfSchema)throw new Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");let o={cache:!1,overwriteModels:this.base.options.overwriteModels},a=Object.assign(o,s,{connection:this});if(this.models[e]&&!n&&a.overwriteModels!==!0){if(r?.instanceOfSchema&&r!==this.models[e].schema)throw new $t.OverwriteModelError(e);return this.models[e]}let u;if(r?.instanceOfSchema)return Exe(r,this.plugins,null,"$connectionPluginsApplied"),u=this.base._model(i||e,r,n,a),this.models[e]||(this.models[e]=u),u.init().catch(function(){}),u;if(this.models[e]&&n)return u=this.models[e],r=u.prototype.schema,u.__subclass(this,r,n);if(arguments.length===1){if(u=this.models[e],!u)throw new $t.MissingSchemaError(e);return u}if(!u)throw new $t.MissingSchemaError(e);return this===u.prototype.db&&(!n||n===u.collection.name)?(this.models[e]||(this.models[e]=u),u):(this.models[e]=u.__subclass(this,r,n),this.models[e])};se.prototype.deleteModel=function(e){if(typeof e=="string"){let r=this.model(e);if(r==null)return this;let n=r.collection.name;delete this.models[e],delete this.collections[n],this.emit("deleteModel",r)}else if(e instanceof RegExp){let r=e,n=this.modelNames();for(let s of n)r.test(s)&&this.deleteModel(s)}else throw new Error('First parameter to `deleteModel()` must be a string or regexp, got "'+e+'"');return this};se.prototype.watch=function(e,r){let n=i=>{fY(()=>{if(this.readyState===Jt.connecting)this.once("open",function(){let o=this.db.watch(e,r);i(null,o)});else{let o=this.db.watch(e,r);i(null,o)}})};return new mxe(n,e,r)};se.prototype.asPromise=async function(){try{return await this.$initialConnection,this}catch(e){throw mY(e)}};se.prototype.modelNames=function(){return Object.keys(this.models)};se.prototype.shouldAuthenticate=function(){return this.user!=null&&(this.pass!=null||this.authMechanismDoesNotRequirePassword())};se.prototype.authMechanismDoesNotRequirePassword=function(){return this.options?.auth?Txe.indexOf(this.options.auth.authMechanism)>=0:!0};se.prototype.optionsProvideAuthenticationData=function(e){return e&&e.user&&(e.pass||this.authMechanismDoesNotRequirePassword())};se.prototype.getClient=function(){return this.client};se.prototype.setClient=function(){throw new $t("Connection#setClient not implemented by driver")};se.prototype.createClient=function(){throw new $t("Connection#createClient not implemented by driver")};se.prototype.syncIndexes=async function(e={}){let r={},n={},{continueOnError:s}=e;delete e.continueOnError;for(let i of Object.values(this.models))try{r[i.modelName]=await i.syncIndexes(e)}catch(o){if(s)r[i.modelName]=o;else{n[i.modelName]=o;break}}if(!s&&p5.hasOwnKeys(n)){let i=Object.entries(n).map(([a,u])=>`${a}: ${u.message}`).join(", ");throw new _xe(i,n)}return r};se.STATES=Jt;yY.exports=se});var h5=m((Hqe,Bxe)=>{Bxe.exports={name:"mongoose",description:"Mongoose MongoDB ODM",version:"9.1.5",author:"Guillermo Rauch <guillermo@learnboost.com>",keywords:["mongodb","document","model","schema","database","odm","data","datastore","query","nosql","orm","db"],type:"commonjs",license:"MIT",dependencies:{kareem:"3.0.0",mongodb:"~7.0",mpath:"0.9.0",mquery:"6.0.0",ms:"2.1.3",sift:"17.1.3"},devDependencies:{"@ark/attest":"0.56.0","@mongodb-js/mongodb-downloader":"^1.0.0",acquit:"1.4.0","acquit-ignore":"0.2.1","acquit-require":"0.1.1",ajv:"8.17.1","broken-link-checker":"^0.7.8",cheerio:"1.1.2",dox:"1.0.0",eslint:"9.39.2","eslint-plugin-markdown":"^5.1.0","eslint-plugin-mocha-no-only":"1.2.0",express:"^4.19.2","fs-extra":"~11.3.0","highlight.js":"11.11.1","lodash.isequal":"4.5.0","lodash.isequalwith":"4.4.0","markdownlint-cli2":"^0.20.0",marked:"15.x",mkdirp:"^3.0.1",mocha:"11.7.5",moment:"2.30.1","mongodb-memory-server":"11.0.1","mongodb-runner":"^6.0.0","mongodb-client-encryption":"~7.0",ncp:"^2.0.0",nyc:"15.1.0",pug:"3.0.3",sinon:"21.0.1",tsd:"0.33.0",typescript:"5.9.3","typescript-eslint":"^8.31.1",uuid:"11.1.0"},directories:{lib:"./lib/mongoose"},scripts:{"docs:clean":"npm run docs:clean:stable","docs:clean:stable":"rimraf index.html && rimraf -rf ./docs/*.html  && rimraf -rf ./docs/api && rimraf -rf ./docs/tutorials/*.html && rimraf -rf ./docs/typescript/*.html && rimraf -rf ./docs/*.html && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:5x":"rimraf index.html && rimraf -rf ./docs/5.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:6x":"rimraf index.html && rimraf -rf ./docs/6.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:copy:tmp":"mkdirp ./tmp/docs/css && mkdirp ./tmp/docs/js && mkdirp ./tmp/docs/images && mkdirp ./tmp/docs/tutorials && mkdirp ./tmp/docs/typescript && mkdirp ./tmp/docs/api && ncp ./docs/css ./tmp/docs/css --filter=.css$ && ncp ./docs/js ./tmp/docs/js --filter=.js$ && ncp ./docs/images ./tmp/docs/images && ncp ./docs/tutorials ./tmp/docs/tutorials && ncp ./docs/typescript ./tmp/docs/typescript && ncp ./docs/api ./tmp/docs/api && cp index.html ./tmp && cp docs/*.html ./tmp/docs/","docs:copy:tmp:5x":"rimraf ./docs/5.x && ncp ./tmp ./docs/5.x","docs:copy:tmp:6x":"rimraf ./docs/6.x && ncp ./tmp ./docs/6.x","docs:generate":"node ./scripts/website.js","docs:generate:sponsorData":"node ./scripts/loadSponsorData.js","docs:test":"npm run docs:generate","docs:view":"node ./scripts/static.js","docs:prepare:publish:stable":"git checkout gh-pages && git merge master && npm run docs:generate","docs:prepare:publish:5x":"git checkout 5.x && git merge 5.x && npm run docs:clean:stable && npm run docs:generate && npm run docs:copy:tmp && git checkout gh-pages && npm run docs:copy:tmp:5x","docs:prepare:publish:6x":"git checkout 6.x && git merge 6.x && npm run docs:clean:stable && env DOCS_DEPLOY=true npm run docs:generate && mv ./docs/6.x ./tmp && git checkout gh-pages && npm run docs:copy:tmp:6x","docs:prepare:publish:7x":"env DOCS_DEPLOY=true npm run docs:generate && git checkout gh-pages && rimraf ./docs/7.x && mv ./tmp ./docs/7.x","docs:prepare:publish:8x":"env DOCS_DEPLOY=true npm run docs:generate && git checkout gh-pages && rimraf ./docs/8.x && mv ./tmp ./docs/8.x","docs:check-links":"blc http://127.0.0.1:8089 -ro",lint:"eslint .","lint-js":"eslint . --ext .js --ext .cjs","lint-ts":"eslint . --ext .ts","lint-md":'markdownlint-cli2 "**/*.md" "#node_modules" "#benchmarks"',release:"git pull && git push origin master --tags && npm publish","release-5x":"git pull origin 5.x && git push origin 5.x && git push origin 5.x --tags && npm publish --tag 5x","release-6x":"git pull origin 6.x && git push origin 6.x && git push origin 6.x --tags && npm publish --tag 6x",mongo:"node ./tools/repl.js","publish-7x":"npm publish --tag 7x","create-separate-require-instance":"rm -rf ./node_modules/mongoose-separate-require-instance && node ./scripts/create-tarball && tar -xzf mongoose.tgz -C ./node_modules && mv ./node_modules/package ./node_modules/mongoose-separate-require-instance",test:"mocha --exit ./test/*.test.js","test:ci":"npm run test -- --reporter min","test-deno":"deno run --allow-env --allow-read --allow-net --allow-run --allow-sys --allow-write ./test/deno.mjs","test-deno:ci":"npm run test-deno -- --reporter min","test-rs":"START_REPLICA_SET=1 mocha --timeout 30000 --exit ./test/*.test.js","test-rs:ci":"npm run test-rs -- --reporter min","test-tsd":"node ./test/types/check-types-filename && tsd --full","setup-test-encryption":"node scripts/setup-encryption-tests.js","test-encryption":"mocha --exit ./test/encryption/*.test.js","test-encryption:ci":"npm run test-encryption -- --reporter min",tdd:"mocha --watch --inspect --recursive ./test/*.test.js --watch-files lib/**/*.js test/**/*.js","test-coverage":"nyc --reporter=html --reporter=text npm test","test-coverage:ci":"nyc --reporter=html --reporter=text npm run test:ci","ts-benchmark":"cd ./benchmarks/typescript/simple && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check","ts-benchmark:local":"node ./scripts/create-tarball && cd ./benchmarks/typescript/simple && rm -rf ./node_modules && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check","attest-benchmark":"node ./benchmarks/typescript/infer.bench.mts"},main:"./index.js",types:"./types/index.d.ts",engines:{node:">=20.19.0"},bugs:{url:"https://github.com/Automattic/mongoose/issues/new"},repository:{type:"git",url:"git://github.com/Automattic/mongoose.git"},homepage:"https://mongoosejs.com",config:{mongodbMemoryServer:{disablePostinstall:!0}},funding:{type:"opencollective",url:"https://opencollective.com/mongoose"},tsd:{directory:"test/types",compilerOptions:{esModuleInterop:!1,strict:!0,allowSyntheticDefaultImports:!0,strictPropertyInitialization:!1,noImplicitAny:!1,strictNullChecks:!0,module:"commonjs",target:"ES2022"}}}});var _Y=m((Gqe,gY)=>{"use strict";var Ixe=vt(),Nxe=ds();function kxe(t,e){let r=e||{},n=r.readPreference?r.readPreference:qxe(t),s=Ixe(r);return n&&n!=="primary"&&n!=="primaryPreferred"?Rxe(n,s):s}function Rxe(t,e){if(Fxe(e)&&$xe(t))Lxe();else return jxe(e)}function Fxe(t){let e=t.config?.autoIndex,{autoCreate:r,autoIndex:n}=t;return!!(e||r||n)}function $xe(t){return t==="secondary"||t==="secondaryPreferred"}function qxe(t){let r=/(?:&|\?)readPreference=(\w+)(?:&|$)/.exec(t);return r?r[1]:null}function jxe(t){return t.config={autoIndex:!1},t.autoCreate=!1,t.autoIndex=!1,t}function Lxe(){throw new Nxe('MongoDB prohibits index creation on connections that read from non-primary replicas.  Connections that set "readPreference" to "secondary" or "secondaryPreferred" may not opt-in to the following connection options: autoCreate, autoIndex')}gY.exports=kxe});var bY=m(EY=>{"use strict";EY.setTimeout=setTimeout});var OY=m((Yqe,AY)=>{"use strict";var wY=d5(),Nc=ds(),Vn=kd(),SY=ka(),Uxe=h5(),Vxe=_Y(),Wxe=bY().setTimeout,gf=ae(),zxe=Oc();function xi(){wY.apply(this,arguments),this._listening=!1,this._lastHeartbeatAt=null}xi.STATES=Vn;Object.setPrototypeOf(xi.prototype,wY.prototype);xi.prototype.useDb=function(t,e){if(e=e||{},e.useCache&&this.relatedDbs[t])return this.relatedDbs[t];let r=new this.constructor;r.name=t,r.base=this.base,r.collections={},r.models={},r.replica=this.replica,r.config=Object.assign({},this.config,r.config),r.name=this.name,r.options=this.options,r._readyState=this._readyState,r._closeCalled=this._closeCalled,r._hasOpened=this._hasOpened,r._listening=!1,r._parent=this,r.host=this.host,r.port=this.port,r.user=this.user,r.pass=this.pass;let n=this;r.client=n.client,this.db&&this._readyState===Vn.connected?s():this._queue.push({fn:s});function s(){r.client=n.client,r.db=n.client.db(t),r._lastHeartbeatAt=n._lastHeartbeatAt,r.onOpen()}return r.name=t,this.otherDbs.push(r),r.otherDbs.push(this),e?.useCache&&(this.relatedDbs[r.name]=r,r.relatedDbs=this.relatedDbs),r};xi.prototype.aggregate=function(e,r){return new this.base.Aggregate(null,this).append(e).option(r??{})};xi.prototype.removeDb=function(e){let r=this.otherDbs.filter(n=>n.name===e);if(!r.length)throw new Nc(`No connections to database "${e}" found`);for(let n of r)n._closeCalled=!0,n._destroyCalled=!0,n._readyState=Vn.disconnected,n.$wasForceClosed=!0;delete this.relatedDbs[e],this.otherDbs=this.otherDbs.filter(n=>n.name!==e)};xi.prototype.doClose=async function(e){if(this.client==null)return this;let r=!1;return e!=null&&typeof e=="object"&&(r=e.skipCloseClient,e=e.force),r?this:(await this.client.close(e),await new Promise(n=>Wxe(n,1)),this)};xi.prototype.listDatabases=async function(){return await this._waitForConnect(),await this.db.admin().listDatabases()};xi.prototype.createClient=async function(e,r){if(typeof e!="string")throw new Nc(`The \`uri\` parameter to \`openUri()\` must be a string, got "${typeof e}". Make sure the first parameter to \`mongoose.connect()\` or \`mongoose.createConnection()\` is a string.`);if(this._destroyCalled)throw new Nc("Connection has been closed and destroyed, and cannot be used for re-opening the connection. Please create a new connection with `mongoose.createConnection()` or `mongoose.connect()`.");if((this.readyState===Vn.connecting||this.readyState===Vn.connected)&&this._connectionString!==e)throw new Nc("Can't call `openUri()` on an active connection with different connection strings. Make sure you aren't calling `mongoose.connect()` multiple times. See: https://mongoosejs.com/docs/connections.html#multiple_connections");if(r=Vxe(e,r),r){let a=r.config?.autoIndex??r.autoIndex;a!=null&&(this.config.autoIndex=a!==!1,delete r.config,delete r.autoIndex),"autoCreate"in r&&(this.config.autoCreate=!!r.autoCreate,delete r.autoCreate),"sanitizeFilter"in r&&(this.config.sanitizeFilter=r.sanitizeFilter,delete r.sanitizeFilter),"autoSearchIndex"in r&&(this.config.autoSearchIndex=r.autoSearchIndex,delete r.autoSearchIndex),"bufferTimeoutMS"in r&&(this.config.bufferTimeoutMS=r.bufferTimeoutMS,delete r.bufferTimeoutMS),(r.user||r.pass)&&(r.auth=r.auth||{},r.auth.username=r.user,r.auth.password=r.pass,this.user=r.user,this.pass=r.pass),delete r.user,delete r.pass,r.bufferCommands!=null&&(this.config.bufferCommands=r.bufferCommands,delete r.bufferCommands)}else r={};this._connectionOptions=r;let n=r.dbName;n!=null&&(this.$dbName=n),delete r.dbName,gf.hasUserDefinedProperty(r,"driverInfo")||(r.driverInfo={name:"Mongoose",version:Uxe.version});let{schemaMap:s,encryptedFieldsMap:i}=this._buildEncryptionSchemas();if((gf.hasOwnKeys(s)||gf.hasOwnKeys(i))&&!r.autoEncryption)throw new Error("Must provide `autoEncryption` when connecting with encrypted schemas.");gf.hasOwnKeys(s)&&(r.autoEncryption.schemaMap=s),gf.hasOwnKeys(i)&&(r.autoEncryption.encryptedFieldsMap=i),this.readyState=Vn.connecting,this._connectionString=e;let o;try{o=new SY.MongoClient(e,r)}catch(a){throw this.readyState=Vn.disconnected,a}this.client=o,o.setMaxListeners(0),await o.connect(),f5(this,o,r,n);for(let a of this.otherDbs)f5(a,o,{},a.name);return this};xi.prototype._buildEncryptionSchemas=function(){let t={},e={},r=Object.values(this.models).filter(i=>i.schema._hasEncryptedFields());for(let i of r){let{schema:o,collection:{collectionName:a}}=i,u=`${this.$dbName}.${a}`,c=o.encryptionType()==="csfle"?e:t;if(c[u]??=new zxe({},{encryptionType:o.encryptionType()}),o.discriminatorMapping&&!o.discriminatorMapping.isRoot){let p=o._baseSchema;o.eachPath(d=>{if(!p.path(d)&&c[u]._hasEncryptedField(d))throw new Error(`Cannot have duplicate keys in discriminators with encryption. key=${d}`)})}c[u].add(o)}let n=Object.fromEntries(Object.entries(e).map(([i,o])=>[i,o._buildSchemaMap()])),s=Object.fromEntries(Object.entries(t).map(([i,o])=>[i,o._buildEncryptedFields()]));return{schemaMap:n,encryptedFieldsMap:s}};xi.prototype.setClient=function(e){if(!(e instanceof SY.MongoClient))throw new Nc("Must call `setClient()` with an instance of MongoClient");if(this.readyState!==Vn.disconnected)throw new Nc("Cannot call `setClient()` on a connection that is already connected.");if(e.topology==null)throw new Nc("Cannot call `setClient()` with a MongoClient that you have not called `connect()` on yet.");this._connectionString=e.s.url,f5(this,e,{},e.s.options.dbName);for(let r of Object.values(this.models))r.init().catch(function(){});return this};function f5(t,e,r,n){let s=n!=null?e.db(n):e.db();t.db=s,t.client=e,t.host=e?.s?.options?.hosts?.[0]?.host,t.port=e?.s?.options?.hosts?.[0]?.port,t.name=n??s.databaseName,t._closeCalled=e._closeCalled;let i=()=>{t.readyState!==Vn.connected&&(t.readyState=Vn.connected,t.emit("reconnect"),t.emit("reconnected"),t.onOpen())},o=e?.topology?.description?.type||"";o==="Single"?e.on("serverDescriptionChanged",a=>{a.newDescription.type==="Unknown"?t.readyState=Vn.disconnected:i()}):o.startsWith("ReplicaSet")&&e.on("topologyDescriptionChanged",a=>{let u=a.newDescription;t.readyState===Vn.connected&&u.type!=="ReplicaSetWithPrimary"?t.readyState=Vn.disconnected:t.readyState===Vn.disconnected&&u.type==="ReplicaSetWithPrimary"&&i()}),t._lastHeartbeatAt=null,e.on("serverHeartbeatSucceeded",()=>{t._lastHeartbeatAt=Date.now();for(let a of t.otherDbs)a._lastHeartbeatAt=t._lastHeartbeatAt}),r.monitorCommands&&(e.on("commandStarted",a=>t.emit("commandStarted",a)),e.on("commandFailed",a=>t.emit("commandFailed",a)),e.on("commandSucceeded",a=>t.emit("commandSucceeded",a))),t.onOpen();for(let a in t.collections)Object.hasOwn(t.collections,a)&&t.collections[a].onOpen()}AY.exports=xi});var CY=m(_f=>{"use strict";_f.BulkWriteResult=PR();_f.Collection=$U();_f.Connection=OY();_f.ClientEncryption=ka().ClientEncryption});var xY=m((Xqe,vY)=>{"use strict";var Kxe=Object.freeze(["allowDiskUse","applyPluginsToChildSchemas","applyPluginsToDiscriminators","autoCreate","autoIndex","autoSearchIndex","bufferCommands","bufferTimeoutMS","cloneSchemas","createInitialConnection","debug","forceRepopulate","id","maxTimeMS","objectIdGetter","overwriteModels","returnOriginal","runValidators","sanitizeFilter","sanitizeProjection","selectPopulatedPaths","setDefaultsOnInsert","strict","strictPopulate","strictQuery","timestamps.createdAt.immutable","toJSON","toObject","transactionAsyncLocalStorage","translateAliases","updatePipeline"]);vY.exports=Kxe});var DY=m((Zqe,TY)=>{"use strict";var Hxe=we(),rb=class extends Hxe{constructor(e){let r=e.map(n=>n.message).join(", ");r.length>50&&(r=r.slice(0,50)+"..."),super(`eachAsync() finished with ${e.length} errors: ${r}`),this.errors=e}};Object.defineProperty(rb.prototype,"name",{value:"EachAsyncMultiError"});TY.exports=rb});var y5=m((eje,PY)=>{"use strict";var Gxe=DY(),m5=Da();PY.exports=async function(e,r,n){let s=n.parallel||1,i=n.batchSize,o=n.signal,a=n.continueOnError,u=[],c=Jxe(),l=!1;return new Promise((h,f)=>{if(o!=null){if(o.aborted)return h(null);o.addEventListener("abort",()=>(l=!0,h(null)),{once:!0})}if(i!=null){if(typeof i!="number")throw new TypeError("batchSize must be a number");if(Number.isInteger(i)){if(i<1)throw new TypeError("batchSize must be at least 1")}else throw new TypeError("batchSize must be an integer")}p((y,g)=>{if(y!=null)return f(y);h(g)})});function p(h){let f=0,y=0,g=null;for(let w=0;w<s;++w)c(_());function _(){let w=[],O=!1;return E;function E(A){if(O||l)return A();if(g)return A();e(function(x,v){if(g!=null)return A();if(x!=null)if(x.name==="MongoCursorExhaustedError")v=null;else if(a)u.push(x);else return g=x,h(x),A();if(v==null){if(O=!0,f<=0){let I=a?MY(u):g;h(I)}else i&&w.length&&d(w,y++,M);return A()}if(++f,m5(()=>A()),i&&w.push(v),i&&w.length!==i){m5(()=>c(E));return}let R=i?w:v;function M(I){if(i?(f-=w.length,w=[]):--f,I!=null)if(a)u.push(I);else return g=I,h(I);if((O||l)&&f<=0){let j=a?MY(u):g;return h(j)}m5(()=>c(E))}d(R,y++,M)})}}}function d(h,f,y){let g;try{g=r(h,f)}catch(_){return y(_)}typeof g?.then=="function"?g.then(function(){y(null)},function(_){y(_||new Error("`eachAsync()` promise rejected without error"))}):y(null)}};function Jxe(){let t=[],e=null,r=0;return function(i){if(e===null&&t.length===0)return e=r++,i(n);t.push(i)};function n(){t.length!==0?(e=r++,t.shift()(n)):e=null}}function MY(t){return t.length===0?null:new Gxe(t)}});var qY=m((tje,$Y)=>{"use strict";var Ef=we(),NY=require("stream").Readable,Yxe=y5(),kY=$h(),Qxe=fc(),g5=Da(),{once:Xxe}=require("events"),RY=require("util");function Wn(t){NY.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.skipped=!1,this.query=t,this._closed=!1;let e=t.model;this._mongooseOptions={},this._transforms=[],this.model=e,this.options={};let r=n=>{if(n!=null){if(n instanceof Qxe.skipWrappedFunction){let s=n.args[0];if(s!=null&&(!Array.isArray(s)||s.length)){let i=new Ef('Cannot `skipMiddlewareFunction()` with a value when using `.find().cursor()`, value must be nullish or empty array, got "'+RY.inspect(s)+'".');this._markError(i),this.listeners("error").length>0&&this.emit("error",i);return}this.skipped=!0,this.emit("cursor",null);return}this._markError(n),this.listeners("error").length>0&&this.emit("error",n);return}Object.assign(this.options,t._optionsForExec()),this._transforms=this._transforms.concat(t._transforms.slice()),this.options.transform&&this._transforms.push(this.options.transform),this.options.batchSize&&(this.options._populateBatchSize=Math.min(this.options.batchSize,5e3)),t._mongooseOptions._asyncIterator&&(this._mongooseOptions._asyncIterator=!0),e.collection._shouldBufferCommands()&&e.collection.buffer?e.collection.queue.push([()=>BY(t,this)]):BY(t,this)};e.hooks.execPre("find",t).then(()=>r(null),n=>r(n))}RY.inherits(Wn,NY);function BY(t,e){try{let r=t.model.collection.find(t._conditions,e.options);e.cursor=r,e.emit("cursor",r)}catch(r){e._markError(r),e.listeners("error").length>0&&e.emit("error",e._error)}}Wn.prototype._read=function(){ib(this,(t,e)=>{if(t)return this.emit("error",t);if(!e){this.push(null),this.cursor.close(function(r){if(r)return this.emit("error",r)});return}this.push(e)})};Wn.prototype.getDriverCursor=async function(){return this.cursor?this.cursor:(await Xxe(this,"cursor"),this.cursor)};Object.defineProperty(Wn.prototype,"map",{value:function(t){return this._transforms.push(t),this},enumerable:!0,configurable:!0,writable:!0});Wn.prototype._markError=function(t){return this._error=t,this};Wn.prototype.close=async function(){if(typeof arguments[0]=="function")throw new Ef("QueryCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close(),this._closed=!0,this.emit("close")}catch(e){throw this.listeners("error").length>0&&this.emit("error",e),e}};Wn.prototype._destroy=function(e,r){let n=null;return this.cursor?n=Promise.resolve():n=new Promise(s=>{this.once("cursor",s)}),n.then(()=>{this.cursor.close()}).then(()=>{this._closed=!0,r()}).catch(s=>{r(s)}),this};Wn.prototype.rewind=function(){return FY(this,()=>{this.cursor.rewind()}),this};Wn.prototype.next=async function(){if(typeof arguments[0]=="function")throw new Ef("QueryCursor.prototype.next() no longer accepts a callback");if(this._closed)throw new Ef("Cannot call `next()` on a closed cursor");return new Promise((e,r)=>{ib(this,function(n,s){if(n)return r(n);e(s)})})};Wn.prototype.eachAsync=function(t,e){if(typeof arguments[2]=="function")throw new Ef("QueryCursor.prototype.eachAsync() no longer accepts a callback");return typeof e=="function"&&(e={}),e=e||{},Yxe(r=>ib(this,r),t,e)};Wn.prototype.options;Wn.prototype.addCursorFlag=function(t,e){return FY(this,()=>{this.cursor.addCursorFlag(t,e)}),this};Symbol.asyncIterator!=null&&(Wn.prototype[Symbol.asyncIterator]=function(){return this._mongooseOptions._asyncIterator=!0,this});function ib(t,e){let r=e;if(r=function(n,s){return n?e(n):s===null?t._mongooseOptions._asyncIterator?e(null,{done:!0}):e(null,null):(t._transforms.length&&s!==null&&(s=t._transforms.reduce(function(i,o){return o.call(t,i)},s)),t._mongooseOptions._asyncIterator?e(null,{value:s,done:!1}):e(null,s))},t._error)return g5(function(){r(t._error)});if(t.skipped)return g5(()=>r(null,null));if(t.cursor)if(t.query._mongooseOptions.populate&&!t._pop&&(t._pop=kY.preparePopulationOptionsMQ(t.query,t.query._mongooseOptions),t._pop.__noPromise=!0),t.query._mongooseOptions.populate&&t.options._populateBatchSize>1){if(t._batchDocs&&t._batchDocs.length)return nb(t,t._batchDocs.shift(),t._pop,r);if(t._batchExhausted)return r(null,null);t._batchDocs=[],t.cursor.next().then(n=>{sb.call({ctx:t,callback:r},null,n)},n=>{sb.call({ctx:t,callback:r},n)});return}else return t.cursor.next().then(n=>{if(!n){r(null,null);return}if(!t.query._mongooseOptions.populate)return nb(t,n,null,r);nb(t,n,t._pop,(s,i)=>{if(s!=null)return r(s);t.query.model.populate(i,t._pop).then(o=>r(null,o),o=>r(o))})},n=>{r(n)});else t.once("error",e),t.once("cursor",function(n){if(t.removeListener("error",e),n==null)return t.skipped?e(null,null):void 0;ib(t,e)})}function sb(t,e){if(t)return this.callback(t);if(!e)return this.ctx._batchExhausted=!0,IY.call(this);this.ctx._batchDocs.push(e),this.ctx._batchDocs.length<this.ctx.options._populateBatchSize?g5(()=>this.ctx.cursor.next().then(r=>{sb.call(this,null,r)},r=>{sb.call(this,r)})):IY.call(this)}function IY(){if(!this.ctx._batchDocs.length)return this.callback(null,null);this.ctx.query.model.populate(this.ctx._batchDocs,this.ctx._pop).then(()=>{nb(this.ctx,this.ctx._batchDocs.shift(),this.ctx._pop,this.callback)},t=>{this.callback(t)})}function nb(t,e,r,n){if(t.query._mongooseOptions.lean)return t.model.hooks.execPost("find",t.query,[[e]]).then(()=>n(null,e),u=>n(u));let{model:s,_fields:i,_userProvidedFields:o,options:a}=t.query;kY.createModelAndInit(s,e,i,o,a,r,(u,c)=>{if(u!=null)return n(u);a.session!=null&&c.$session(a.session),t.model.hooks.execPost("find",t.query,[[c]]).then(()=>n(null,c),l=>n(l))})}function FY(t,e){if(t.cursor)return e();t.once("cursor",function(r){r!=null&&e()})}$Y.exports=Wn});var E5=m((rje,LY)=>{"use strict";var _5=ae();function Zxe(t,e,r){jY(t,e,r,"maxTimeMS")}function e7e(t,e,r){jY(t,e,r,"allowDiskUse")}LY.exports={applyGlobalMaxTimeMS:Zxe,applyGlobalDiskUse:e7e};function jY(t,e,r,n){_5.hasUserDefinedProperty(t,n)||(_5.hasUserDefinedProperty(e,n)?t[n]=e[n]:_5.hasUserDefinedProperty(r,n)&&(t[n]=r[n]))}});var b5=m((nje,UY)=>{"use strict";UY.exports=function(e,r){if(r.readConcern!==void 0||r?.session?.transaction)return;let n=e.options?.readConcern?.level;n!=null&&(r.readConcern={level:n})}});var w5=m((sje,VY)=>{"use strict";var t7e=ae();VY.exports=function(e,r){if(r.writeConcern!=null||r?.session?.transaction)return;let n=e.options.writeConcern??{};t7e.hasOwnKeys(n)?(r.writeConcern={},!("w"in r)&&n.w!=null&&(r.writeConcern.w=n.w),!("j"in r)&&n.j!=null&&(r.writeConcern.j=n.j),!("wtimeout"in r)&&n.wtimeout!=null&&(r.writeConcern.wtimeout=n.wtimeout)):(!("w"in r)&&n.w!=null&&(r.w=n.w),!("j"in r)&&n.j!=null&&(r.j=n.j),!("wtimeout"in r)&&n.wtimeout!=null&&(r.wtimeout=n.wtimeout))}});var KY=m((ije,zY)=>{"use strict";var WY=Yh();zY.exports=function(e,r,n){if(!Object.keys(n).some(WY))return r.castForQuery(null,n,e);let i=Object.keys(n),o=i.length;for(;o--;){let a=i[o],u=n[a];if(a==="$not"){if(u&&r&&!r.embeddedSchemaType&&!r.Constructor){let c=Object.keys(u);if(c.length&&WY(c[0]))for(let l of Object.keys(u))u[l]=r.castForQuery(l,u[l],e);else n[a]=r.castForQuery(a,u,e);continue}}else n[a]=r.castForQuery(a,u,e)}return n}});var GY=m((oje,HY)=>{"use strict";var r7e=/^\d+$/;HY.exports=function(e,r,n){let s=e.path(r);if(s!=null)return s;let i=r.split("."),o="",a=!1;for(let u of i)if(!(a&&r7e.test(u))){if(o=o.length===0?u:o+"."+u,s=e.path(o),s?.schema)e=s.schema,!a&&s.$isMongooseDocumentArray&&(a=!0),n&&n[o]&&(e=e.discriminators[n[o]]??e),o="";else if(s?.instance==="Mixed")break}return s}});var ZY=m((aje,XY)=>{"use strict";var n7e=KY(),JY=Kh(),YY=GY(),s7e=Y7(),i7e=ae();XY.exports=function(e){let r=e.options.arrayFilters;if(!Array.isArray(r))return;let n=e.getUpdate(),s=e.schema,i=s7e(n),o=s.options.strict;e._mongooseOptions.strict!=null&&(o=e._mongooseOptions.strict),e.model?.base.options.strictQuery!=null&&(o=e.model.base.options.strictQuery),s._userProvidedOptions.strictQuery!=null&&(o=s._userProvidedOptions.strictQuery),e._mongooseOptions.strictQuery!=null&&(o=e._mongooseOptions.strictQuery),QY(r,s,o,i,e)};function QY(t,e,r,n,s){let i={};for(let o of t){if(o==null)throw new Error(`Got null array filter in ${t}`);let a=Object.keys(o).filter(f=>o[f]!=null);if(a.length===0)continue;let u=a[0];if(u==="$and"||u==="$or"){for(let f of a)QY(o[f],e,r,n,s);continue}let c=u.indexOf("."),l=c===-1?u:u.substring(0,c);if(n[l]==null)continue;let p=JY(n[l]),d=YY(e,p,i),h=d!=null?d.schema:null;h?.discriminators!=null&&o[l+"."+h.options.discriminatorKey]&&(h=h.discriminators[o[l+"."+h.options.discriminatorKey]]||h,i[p]=o[l+"."+h.options.discriminatorKey]);for(let f of a){if(n[f]===null||i7e.hasOwnKeys(n)===!1)continue;let y=f.indexOf("."),g=y===-1?null:f.substring(y),_;if(g==null||h==null?_=d:(g=JY(g),_=YY(h,g,i)),_==null){if(!r)return;let w=g==null?p+".0":p+".0"+g;throw new Error(`Could not find path "${w}" in schema`)}typeof o[f]=="object"?o[f]=n7e(s,_,o[f]):o[f]=_.castForQuery(null,o[f])}}}});var ob=m((uje,eQ)=>{"use strict";var o7e=Kp(),a7e=jp();eQ.exports=function t(e){if(e==null)return!1;let r=Object.keys(e),n=r.length;if(n===0)return!1;for(let s=0;s<n;++s){let i=r[s];if(!i.startsWith("+")&&o7e(e[i])&&e[i])return a7e(e[i])?t(e[i]):!!e[i]}return!1}});var rQ=m((cje,tQ)=>{"use strict";tQ.exports=function(e,r){return e===r||r.startsWith(e+".")}});var nQ=m(er=>{"use strict";var S5=["__proto__","constructor","prototype"],ab=er.clone=function t(e,r){if(e==null)return e;if(Array.isArray(e))return er.cloneArray(e,r);if(e.constructor){if(/ObjectI[dD]$/.test(e.constructor.name))return typeof e.clone=="function"?e.clone():new e.constructor(e.id);if(e.constructor.name==="ReadPreference")return new e.constructor(e.mode,t(e.tags,r));if(e._bsontype=="Binary"&&e.buffer&&e.value)return typeof e.clone=="function"?e.clone():new e.constructor(e.value(!0),e.sub_type);if(e.constructor.name==="Date"||e.constructor.name==="Function")return new e.constructor(+e);if(e.constructor.name==="RegExp")return new RegExp(e);if(e.constructor.name==="Buffer")return Buffer.from(e)}if(c7e(e))return er.cloneObject(e,r);if(e.valueOf)return e.valueOf()};er.cloneObject=function(e,r){let n=r&&r.minimize,s={},i=Object.keys(e),o=i.length,a=!1,u,c="",l=0;for(l=0;l<o;++l)c=i[l],S5.indexOf(c)===-1&&(u=ab(e[c],r),(!n||typeof u<"u")&&(a||(a=!0),s[c]=u));return n?a&&s:s};er.cloneArray=function(e,r){let n=[],s=e.length,i=0;for(;i<s;i++)n.push(ab(e[i],r));return n};er.merge=function t(e,r){let n=Object.keys(r);for(let s of n)S5.indexOf(s)===-1&&(typeof e[s]>"u"?e[s]=r[s]:er.isObject(r[s])?t(e[s],r[s]):e[s]=r[s])};er.mergeClone=function t(e,r){let n=Object.keys(r);for(let s of n)S5.indexOf(s)===-1&&(typeof e[s]>"u"?e[s]=ab(r[s]):er.isObject(r[s])?t(e[s],r[s]):e[s]=ab(r[s]))};er.readPref=function(e){switch(e){case"p":e="primary";break;case"pp":e="primaryPreferred";break;case"s":e="secondary";break;case"sp":e="secondaryPreferred";break;case"n":e="nearest";break}return e};er.readConcern=function(e){if(typeof e=="string"){switch(e){case"l":e="local";break;case"a":e="available";break;case"m":e="majority";break;case"lz":e="linearizable";break;case"s":e="snapshot";break}e={level:e}}return e};var u7e=Object.prototype.toString;er.toString=function(t){return u7e.call(t)};var c7e=er.isObject=function(t){return er.toString(t)=="[object Object]"};er.keys=Object.keys;er.create=typeof Object.create=="function"?Object.create:l7e;function l7e(t){if(arguments.length>1)throw new Error("Adding properties is not supported");function e(){}return e.prototype=t,new e}er.inherits=function(t,e){t.prototype=er.create(e.prototype),t.prototype.constructor=t};er.isArgumentsObject=function(t){return Object.prototype.toString.call(t)==="[object Arguments]"}});var iQ=m(sQ=>{"use strict";var bt=sQ;bt.distinct=function(t){if(t._fields&&Object.keys(t._fields).length>0)return"field selection and slice";let e=Object.keys(bt.distinct),r;return e.every(function(n){return t.options[n]?(r=n,!1):!0}),r};bt.distinct.select=bt.distinct.slice=bt.distinct.sort=bt.distinct.limit=bt.distinct.skip=bt.distinct.batchSize=bt.distinct.hint=bt.distinct.tailable=!0;bt.findOneAndUpdate=bt.findOneAndDelete=function(t){let e=Object.keys(bt.findOneAndUpdate),r;return e.every(function(n){return t.options[n]?(r=n,!1):!0}),r};bt.findOneAndUpdate.limit=bt.findOneAndUpdate.skip=bt.findOneAndUpdate.batchSize=bt.findOneAndUpdate.tailable=!0;bt.findOneAndReplace=function(t){let e=Object.keys(bt.findOneAndUpdate),r;return e.every(function(n){return t.options[n]?(r=n,!1):!0}),r};bt.countDocuments=function(t){if(t._fields&&Object.keys(t._fields).length>0)return"field selection and slice";let e=Object.keys(bt.countDocuments),r;return e.every(function(n){return t.options[n]?(r=n,!1):!0}),r};bt.countDocuments.slice=bt.countDocuments.batchSize=bt.countDocuments.tailable=!0});var A5=m((Ti,oQ)=>{"use strict";Ti.isNode=typeof process<"u"&&typeof oQ=="object"&&typeof global=="object"&&typeof Buffer=="function"&&process.argv;Ti.isMongo=!Ti.isNode&&typeof printjson=="function"&&typeof ObjectId=="function"&&typeof rs=="function"&&typeof sh=="function";Ti.isBrowser=!Ti.isNode&&!Ti.isMongo&&typeof window<"u";Ti.type=Ti.isNode?"node":Ti.isMongo?"mongo":Ti.isBrowser?"browser":"unknown"});var bf=m((aQ,uQ)=>{"use strict";var O5=["find","findOne","updateMany","updateOne","replaceOne","countDocuments","estimatedDocumentCount","distinct","findOneAndDelete","findOneAndReplace","findOneAndUpdate","aggregate","findCursor","deleteOne","deleteMany"];function C5(){}for(let t=0,e=O5.length;t<e;++t){let r=O5[t];C5.prototype[r]=p7e(r)}uQ.exports=aQ=C5;C5.methods=O5;function p7e(t){return function(){throw new Error("collection."+t+" not implemented")}}});var pQ=m((cQ,lQ)=>{"use strict";var d7e=bf(),v5=class extends d7e{constructor(e){super(),this.collection=e,this.collectionName=e.collectionName}async find(e,r){return this.collection.find(e,r).toArray()}async findOne(e,r){return this.collection.findOne(e,r)}async countDocuments(e,r){return this.collection.countDocuments(e,r)}async estimatedDocumentCount(e,r){return this.collection.estimatedDocumentCount(e,r)}async distinct(e,r,n){return this.collection.distinct(e,r,n)}async updateMany(e,r,n){return this.collection.updateMany(e,r,n)}async updateOne(e,r,n){return this.collection.updateOne(e,r,n)}async replaceOne(e,r,n){return this.collection.replaceOne(e,r,n)}async deleteOne(e,r){return this.collection.deleteOne(e,r)}async deleteMany(e,r){return this.collection.deleteMany(e,r)}async findOneAndDelete(e,r){return this.collection.findOneAndDelete(e,r)}async findOneAndUpdate(e,r,n){return this.collection.findOneAndUpdate(e,r,n)}async findOneAndReplace(e,r,n){return this.collection.findOneAndReplace(e,r,n)}findCursor(e,r){return this.collection.find(e,r)}};lQ.exports=cQ=v5});var hQ=m((dje,dQ)=>{"use strict";var x5=A5();if(x5.type=="unknown")throw new Error("Unknown environment");dQ.exports=x5.isNode?pQ():x5.isMongo?bf():bf()});var P5=m((yQ,gQ)=>{"use strict";var h7e=require("assert"),mQ=require("util"),We=nQ(),Jo=mQ.debuglog("mquery");function q(t,e){if(!(this instanceof q))return new q(t,e);let r=this.constructor.prototype;this.op=r.op||void 0,this.options=Object.assign({},r.options),this._conditions=r._conditions?We.clone(r._conditions):{},this._fields=r._fields?We.clone(r._fields):void 0,this._updateDoc=r._updateDoc?We.clone(r._updateDoc):void 0,this._path=r._path||void 0,this._distinctDoc=r._distinctDoc||void 0,this._collection=r._collection||void 0,this._traceFunction=r._traceFunction||void 0,e&&this.setOptions(e),t&&this.find(t)}q.prototype.toConstructor=function(){function e(n,s){if(!(this instanceof e))return new e(n,s);q.call(this,n,s)}We.inherits(e,q);let r=e.prototype;return r.options={},r.setOptions(this.options),r.op=this.op,r._conditions=We.clone(this._conditions),r._fields=We.clone(this._fields),r._updateDoc=We.clone(this._updateDoc),r._path=this._path,r._distinctDoc=this._distinctDoc,r._collection=this._collection,r._traceFunction=this._traceFunction,e};q.prototype.setOptions=function(t){if(!(t&&We.isObject(t)))return this;let e=We.keys(t),r;for(let n=0;n<e.length;++n)if(r=e[n],typeof this[r]=="function"){let s=Array.isArray(t[r])?t[r]:[t[r]];this[r].apply(this,s)}else this.options[r]=t[r];return this};q.prototype.collection=function(e){return this._collection=new q.Collection(e),this};q.prototype.collation=function(t){return this.options.collation=t,this};q.prototype.$where=function(t){return this._conditions.$where=t,this};q.prototype.where=function(){if(!arguments.length)return this;this.op||(this.op="find");let t=typeof arguments[0];if(t=="string")return this._path=arguments[0],arguments.length===2&&(this._conditions[this._path]=arguments[1]),this;if(t=="object"&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw new TypeError("path must be a string or object")};q.prototype.equals=function(e){this._ensurePath("equals");let r=this._path;return this._conditions[r]=e,this};q.prototype.eq=function(e){this._ensurePath("eq");let r=this._path;return this._conditions[r]=e,this};q.prototype.or=function(e){let r=this._conditions.$or||(this._conditions.$or=[]);return Array.isArray(e)||(e=[e]),r.push.apply(r,e),this};q.prototype.nor=function(e){let r=this._conditions.$nor||(this._conditions.$nor=[]);return Array.isArray(e)||(e=[e]),r.push.apply(r,e),this};q.prototype.and=function(e){let r=this._conditions.$and||(this._conditions.$and=[]);return Array.isArray(e)||(e=[e]),r.push.apply(r,e),this};"gt gte lt lte ne in nin all regex size maxDistance minDistance".split(" ").forEach(function(t){q.prototype[t]=function(){let e,r;arguments.length===1?(this._ensurePath(t),r=arguments[0],e=this._path):(r=arguments[1],e=arguments[0]);let n=this._conditions[e]===null||typeof this._conditions[e]=="object"?this._conditions[e]:this._conditions[e]={};return n["$"+t]=r,this}});q.prototype.mod=function(){let t,e;arguments.length===1?(this._ensurePath("mod"),t=arguments[0],e=this._path):arguments.length===2&&!Array.isArray(arguments[1])?(this._ensurePath("mod"),t=[arguments[0],arguments[1]],e=this._path):arguments.length===3?(t=[arguments[1],arguments[2]],e=arguments[0]):(t=arguments[1],e=arguments[0]);let r=this._conditions[e]||(this._conditions[e]={});return r.$mod=t,this};q.prototype.exists=function(){let t,e;arguments.length===0?(this._ensurePath("exists"),t=this._path,e=!0):arguments.length===1?typeof arguments[0]=="boolean"?(this._ensurePath("exists"),t=this._path,e=arguments[0]):(t=arguments[0],e=!0):arguments.length===2&&(t=arguments[0],e=arguments[1]);let r=this._conditions[t]||(this._conditions[t]={});return r.$exists=e,this};q.prototype.elemMatch=function(){if(arguments[0]==null)throw new TypeError("Invalid argument");let t,e,r;if(typeof arguments[0]=="function")this._ensurePath("elemMatch"),e=this._path,t=arguments[0];else if(We.isObject(arguments[0]))this._ensurePath("elemMatch"),e=this._path,r=arguments[0];else if(typeof arguments[1]=="function")e=arguments[0],t=arguments[1];else if(arguments[1]&&We.isObject(arguments[1]))e=arguments[0],r=arguments[1];else throw new TypeError("Invalid argument");t&&(r=new q,t(r),r=r._conditions);let n=this._conditions[e]||(this._conditions[e]={});return n.$elemMatch=r,this};q.prototype.within=function(){if(this._ensurePath("within"),this._geoComparison="$geoWithin",arguments.length===0)return this;if(arguments.length===2)return this.box.apply(this,arguments);if(2<arguments.length)return this.polygon.apply(this,arguments);let e=arguments[0];if(!e)throw new TypeError("Invalid argument");if(e.center)return this.circle(e);if(e.box)return this.box.apply(this,e.box);if(e.polygon)return this.polygon.apply(this,e.polygon);if(e.type&&e.coordinates)return this.geometry(e);throw new TypeError("Invalid argument")};q.prototype.box=function(){let t,e;if(arguments.length===3)t=arguments[0],e=[arguments[1],arguments[2]];else if(arguments.length===2)this._ensurePath("box"),t=this._path,e=[arguments[0],arguments[1]];else throw new TypeError("Invalid argument");let r=this._conditions[t]||(this._conditions[t]={});return r[this._geoComparison||"$geoWithin"]={$box:e},this};q.prototype.polygon=function(){let t,e;typeof arguments[0]=="string"?(t=Array.from(arguments),e=t.shift()):(this._ensurePath("polygon"),e=this._path,t=Array.from(arguments));let r=this._conditions[e]||(this._conditions[e]={});return r[this._geoComparison||"$geoWithin"]={$polygon:t},this};q.prototype.circle=function(){let t,e;if(arguments.length===1)this._ensurePath("circle"),t=this._path,e=arguments[0];else if(arguments.length===2)t=arguments[0],e=arguments[1];else throw new TypeError("Invalid argument");if(!("radius"in e&&e.center))throw new Error("center and radius are required");let r=this._conditions[t]||(this._conditions[t]={}),n=e.spherical?"$centerSphere":"$center",s=this._geoComparison||"$geoWithin";return r[s]={},r[s][n]=[e.center,e.radius],"unique"in e&&(r[s].$uniqueDocs=!!e.unique),this};q.prototype.near=function(){let e,r;if(this._geoComparison="$near",arguments.length===0)return this;if(arguments.length===1)this._ensurePath("near"),e=this._path,r=arguments[0];else if(arguments.length===2)e=arguments[0],r=arguments[1];else throw new TypeError("Invalid argument");if(!r.center)throw new Error("center is required");let n=this._conditions[e]||(this._conditions[e]={}),s=r.spherical?"$nearSphere":"$near";if(Array.isArray(r.center)){n[s]=r.center;let i="maxDistance"in r?r.maxDistance:null;i!=null&&(n.$maxDistance=i),r.minDistance!=null&&(n.$minDistance=r.minDistance)}else{if(r.center.type!="Point"||!Array.isArray(r.center.coordinates))throw new Error(mQ.format("Invalid GeoJSON specified for %s",s));n[s]={$geometry:r.center},"maxDistance"in r&&(n[s].$maxDistance=r.maxDistance),"minDistance"in r&&(n[s].$minDistance=r.minDistance)}return this};q.prototype.intersects=function(){if(this._ensurePath("intersects"),this._geoComparison="$geoIntersects",arguments.length===0)return this;let e=arguments[0];if(e!=null&&e.type&&e.coordinates)return this.geometry(e);throw new TypeError("Invalid argument")};q.prototype.geometry=function(){if(!(this._geoComparison=="$within"||this._geoComparison=="$geoWithin"||this._geoComparison=="$near"||this._geoComparison=="$geoIntersects"))throw new Error("geometry() must come after `within()`, `intersects()`, or `near()");let e,r;if(arguments.length===1)this._ensurePath("geometry"),r=this._path,e=arguments[0];else throw new TypeError("Invalid argument");if(!(e.type&&Array.isArray(e.coordinates)))throw new TypeError("Invalid argument");let n=this._conditions[r]||(this._conditions[r]={});return n[this._geoComparison]={$geometry:e},this};q.prototype.select=function(){let e=arguments[0];if(!e)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");let r=this._fields||(this._fields={}),n=typeof e,s,i;if((n=="string"||We.isArgumentsObject(e))&&typeof e.length=="number"||Array.isArray(e)){for(n=="string"&&(e=e.split(/\s+/)),s=0,i=e.length;s<i;++s){let o=e[s];if(!o)continue;let a=o[0]=="-"?0:1;a===0&&(o=o.substring(1)),r[o]=a}return this}if(We.isObject(e)){let o=We.keys(e);for(s=0;s<o.length;++s)r[o[s]]=e[o[s]];return this}throw new TypeError("Invalid select() argument. Must be string or object.")};q.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let t,e;if(arguments.length===1){let n=arguments[0];if(typeof n=="object"&&!Array.isArray(n)){let s=Object.keys(n),i=s.length;for(let o=0;o<i;++o)this.slice(s[o],n[s[o]]);return this}this._ensurePath("slice"),t=this._path,e=arguments[0]}else arguments.length===2?typeof arguments[0]=="number"?(this._ensurePath("slice"),t=this._path,e=[arguments[0],arguments[1]]):(t=arguments[0],e=arguments[1]):arguments.length===3&&(t=arguments[0],e=[arguments[1],arguments[2]]);let r=this._fields||(this._fields={});return r[t]={$slice:e},this};q.prototype.sort=function(t){if(!t)return this;let e,r,n;this._validate("sort");let s=typeof t;if(Array.isArray(t)){for(r=t.length,e=0;e<t.length;++e){if(!Array.isArray(t[e]))throw new Error("Invalid sort() argument, must be array of arrays");f7e(this.options,t[e][0],t[e][1])}return this}if(arguments.length===1&&s=="string"){for(t=t.split(/\s+/),r=t.length,e=0;e<r;++e){if(n=t[e],!n)continue;let i=n[0]=="-"?-1:1;i===-1&&(n=n.substring(1)),fQ(this.options,n,i)}return this}if(We.isObject(t)){let i=We.keys(t);for(e=0;e<i.length;++e)n=i[e],fQ(this.options,n,t[n]);return this}if(typeof Map<"u"&&t instanceof Map)return m7e(this.options,t),this;throw new TypeError("Invalid sort() argument. Must be a string, object, or array.")};var T5={1:1,"-1":-1,asc:1,ascending:1,desc:-1,descending:-1};function fQ(t,e,r){if(Array.isArray(t.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let n;if(r&&r.$meta){n=t.sort||(t.sort={}),n[e]={$meta:r.$meta};return}n=t.sort||(t.sort={});let s=String(r||1).toLowerCase();if(s=T5[s],!s)throw new TypeError("Invalid sort value: { "+e+": "+r+" }");n[e]=s}function f7e(t,e,r){if(t.sort=t.sort||[],!Array.isArray(t.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let n=String(r||1).toLowerCase();if(n=T5[n],!n)throw new TypeError("Invalid sort value: [ "+e+", "+r+" ]");t.sort.push([e,n])}function m7e(t,e){if(t.sort=t.sort||new Map,!(t.sort instanceof Map))throw new TypeError("Can't mix sort syntaxes. Use either array or object or map consistently");e.forEach(function(r,n){let s=String(r||1).toLowerCase();if(s=T5[s],!s)throw new TypeError("Invalid sort value: < "+n+": "+r+" >");t.sort.set(n,s)})}["limit","skip","batchSize","comment"].forEach(function(t){q.prototype[t]=function(e){return this._validate(t),this.options[t]=e,this}});q.prototype.maxTime=q.prototype.maxTimeMS=function(t){return this._validate("maxTime"),this.options.maxTimeMS=t,this};q.prototype.hint=function(){if(arguments.length===0)return this;this._validate("hint");let t=arguments[0];if(We.isObject(t)){let e=this.options.hint||(this.options.hint={});for(let r in t)e[r]=t[r];return this}if(typeof t=="string")return this.options.hint=t,this;throw new TypeError("Invalid hint. "+t)};q.prototype.j=function(e){return this.options.j=e,this};q.prototype.slaveOk=function(t){return this.options.slaveOk=arguments.length?!!t:!0,this};q.prototype.read=q.prototype.setReadPreference=function(t){return arguments.length>1&&!q.prototype.read.deprecationWarningIssued&&(console.error("Deprecation warning: 'tags' argument is not supported anymore in Query.read() method. Please use mongodb.ReadPreference object instead."),q.prototype.read.deprecationWarningIssued=!0),this.options.readPreference=We.readPref(t),this};q.prototype.readConcern=q.prototype.r=function(t){return this.options.readConcern=We.readConcern(t),this};q.prototype.tailable=function(){return this._validate("tailable"),this.options.tailable=arguments.length?!!arguments[0]:!0,this};q.prototype.writeConcern=q.prototype.w=function(e){return typeof e=="object"?(typeof e.j<"u"&&(this.options.j=e.j),typeof e.w<"u"&&(this.options.w=e.w),typeof e.wtimeout<"u"&&(this.options.wtimeout=e.wtimeout)):this.options.w=e==="m"?"majority":e,this};q.prototype.wtimeout=q.prototype.wTimeout=function(e){return this.options.wtimeout=e,this};q.prototype.merge=function(t){if(!t)return this;if(!q.canMerge(t))throw new TypeError("Invalid argument. Expected instanceof mquery or plain object");return t instanceof q?(t._conditions&&We.merge(this._conditions,t._conditions),t._fields&&(this._fields||(this._fields={}),We.merge(this._fields,t._fields)),t.options&&(this.options||(this.options={}),We.merge(this.options,t.options)),t._updateDoc&&(this._updateDoc||(this._updateDoc={}),We.mergeClone(this._updateDoc,t._updateDoc)),t._distinctDoc&&(this._distinctDoc=t._distinctDoc),this):(We.merge(this._conditions,t),this)};q.prototype.find=function(t){return this.op="find",q.canMerge(t)&&this.merge(t),this};q.prototype._find=async function(){let e=this._conditions,r=this._optionsForExec();return this.$useProjection?r.projection=this._fieldsForExec():r.fields=this._fieldsForExec(),Jo("find",this._collection.collectionName,e,r),this._collection.find(e,r)};q.prototype.cursor=function(e){if(this.op){if(this.op!=="find")throw new TypeError(".cursor only support .find method")}else this.find(e);let r=this._conditions,n=this._optionsForExec();return this.$useProjection?n.projection=this._fieldsForExec():n.fields=this._fieldsForExec(),Jo("findCursor",this._collection.collectionName,r,n),this._collection.findCursor(r,n)};q.prototype.findOne=function(t){return this.op="findOne",q.canMerge(t)&&this.merge(t),this};q.prototype._findOne=async function(){let e=this._conditions,r=this._optionsForExec();return this.$useProjection?r.projection=this._fieldsForExec():r.fields=this._fieldsForExec(),Jo("findOne",this._collection.collectionName,e,r),this._collection.findOne(e,r)};q.prototype.countDocuments=function(t){return this.op="countDocuments",this._validate(),q.canMerge(t)&&this.merge(t),this};q.prototype._countDocuments=async function(){let e=this._conditions,r=this._optionsForExec();return Jo("countDocuments",this._collection.collectionName,e,r),this._collection.countDocuments(e,r)};q.prototype.estimatedDocumentCount=function(){return this.op="estimatedDocumentCount",this._validate(),this};q.prototype._estimatedDocumentCount=async function(){let e=this._conditions,r=this._optionsForExec();return Jo("estimatedDocumentCount",this._collection.collectionName,e,r),this._collection.estimatedDocumentCount(e,r)};q.prototype.distinct=function(t,e){return this.op="distinct",this._validate(),!e&&typeof t=="string"&&(e=t,t=void 0),typeof e=="string"&&(this._distinctDoc=e),q.canMerge(t)&&this.merge(t),this};q.prototype._distinct=async function(){if(!this._distinctDoc)throw new Error("No value for `distinct` has been declared");let e=this._conditions,r=this._optionsForExec();return this._collection.distinct(this._distinctDoc,e,r)};q.prototype.updateMany=function(e,r,n){return D5(this,"updateMany",e,r,n)};q.prototype._updateMany=async function(){return M5(this,"updateMany")};q.prototype.updateOne=function(e,r,n){return D5(this,"updateOne",e,r,n)};q.prototype._updateOne=async function(){return M5(this,"updateOne")};q.prototype.replaceOne=function(e,r,n){return this.setOptions({overwrite:!0}),D5(this,"replaceOne",e,r,n)};q.prototype._replaceOne=async function(){return M5(this,"replaceOne")};function D5(t,e,r,n,s){return t.op=e,q.canMerge(r)&&t.merge(r),n&&t._mergeUpdate(n),We.isObject(s)&&t.setOptions(s),t}async function M5(t,e){let r=t._optionsForExec(),n=t._conditions,s=t._updateForExec();return Jo(e,t._collection.collectionName,n,s,r),t._collection[e](n,s,r)}q.prototype.deleteOne=function(t){return this.op="deleteOne",q.canMerge(t)&&this.merge(t),this};q.prototype._deleteOne=async function(){let t=this._optionsForExec();delete t.justOne;let e=this._conditions;return Jo("deleteOne",this._collection.collectionName,e,t),this._collection.deleteOne(e,t)};q.prototype.deleteMany=function(t){return this.op="deleteMany",q.canMerge(t)&&this.merge(t),this};q.prototype._deleteMany=async function(){let t=this._optionsForExec();delete t.justOne;let e=this._conditions;return this._collection.deleteMany(e,t)};q.prototype.findOneAndUpdate=function(t,e,r){return this.op="findOneAndUpdate",this._validate(),q.canMerge(t)&&this.merge(t),e&&this._mergeUpdate(e),r&&this.setOptions(r),this};q.prototype._findOneAndUpdate=async function(){let t=this._conditions,e=this._updateForExec(),r=this._optionsForExec();return this._collection.findOneAndUpdate(t,e,r)};q.prototype.findOneAndReplace=function(t,e,r){return this.op="findOneAndReplace",this._validate(),q.canMerge(t)&&this.merge(t),e&&(this._updateDoc=e,this.options=this.options||{},this.options.overwrite=!0),r&&this.setOptions(r),this};q.prototype._findOneAndReplace=async function(){let t=this._conditions,e=this._updateForExec(),r=this._optionsForExec();return Jo("findOneAndReplace",this._collection.collectionName,t,e,r),this._collection.findOneAndReplace(t,e,r)};q.prototype.findOneAndDelete=function(t,e){return this.op="findOneAndDelete",this._validate(),q.canMerge(t)&&this.merge(t),e&&this.setOptions(e),this};q.prototype._findOneAndDelete=async function(){let t=this._optionsForExec(),e=this._conditions;return Jo("findOneAndDelete",this._collection.collectionName,e,t),this._collection.findOneAndDelete(e,t)};q.prototype.setTraceFunction=function(t){return this._traceFunction=t,this};q.prototype.exec=async function(e){typeof e=="string"&&(this.op=e),h7e.ok(this.op,"Missing query type: (find, etc)");let r="_"+this.op;if(typeof this[r]!="function")throw new TypeError(`this[${r}] is not a function`);return this[r]()};q.prototype.then=async function(t,e){return this.exec().then(t,e)};q.prototype.cursor=function(){if(this.op!="find")throw new Error("cursor() is only available for find");let t=this._conditions,e=this._optionsForExec();return this.$useProjection?e.projection=this._fieldsForExec():e.fields=this._fieldsForExec(),this._collection.findCursor(t,e)};q.prototype.selected=function(){return!!(this._fields&&Object.keys(this._fields).length>0)};q.prototype.selectedInclusively=function(){if(!this._fields)return!1;let e=Object.keys(this._fields);if(e.length===0)return!1;for(let r=0;r<e.length;++r){let n=e[r];if(this._fields[n]===0||this._fields[n]&&typeof this._fields[n]=="object"&&this._fields[n].$meta)return!1}return!0};q.prototype.selectedExclusively=function(){if(!this._fields)return!1;let e=Object.keys(this._fields);if(e.length===0)return!1;for(let r=0;r<e.length;++r){let n=e[r];if(this._fields[n]===0)return!0}return!1};q.prototype._mergeUpdate=function(t){this._updateDoc||(this._updateDoc={}),t instanceof q?t._updateDoc&&We.mergeClone(this._updateDoc,t._updateDoc):We.mergeClone(this._updateDoc,t)};q.prototype._optionsForExec=function(){return We.clone(this.options)};q.prototype._fieldsForExec=function(){return We.clone(this._fields)};q.prototype._updateForExec=function(){let t=this._updateDoc==null?{}:We.clone(this._updateDoc),e=We.keys(t),r={};for(let n of e){if(this.options.overwrite){r[n]=t[n];continue}n[0]!=="$"?(r.$set||(t.$set?r.$set=t.$set:r.$set={}),r.$set[n]=t[n],~e.indexOf("$set")||e.push("$set")):n==="$set"&&r.$set||(r[n]=t[n])}return this._compiledUpdate=r,r};q.prototype._ensurePath=function(t){if(!this._path){let e=t+"() must be used after where() when called with these arguments";throw new Error(e)}};q.permissions=iQ();q._isPermitted=function(t,e){let r=q.permissions[e];return r?r[t]!==!0:!0};q.prototype._validate=function(t){let e,r;if(t===void 0){if(r=q.permissions[this.op],typeof r!="function")return!0;e=r(this)}else q._isPermitted(t,this.op)||(e=t);if(e)throw new Error(e+" cannot be used with "+this.op)};q.canMerge=function(t){return t instanceof q||We.isObject(t)};q.setGlobalTraceFunction=function(t){q.traceFunction=t};q.utils=We;q.env=A5();q.Collection=hQ();q.BaseCollection=bf();gQ.exports=yQ=q});var B5=m((hje,_Q)=>{"use strict";_Q.exports=function(e,r){if(typeof e==="string"&&(e=e.split(/\s+/)),!Array.isArray(e)&&Object.prototype.toString.call(e)!=="[object Arguments]")return e;let s=e.length,i={};for(let o=0;o<s;++o){let a=e[o];if(!a)continue;let u=a[0]=="-"?0:1;!r&&u===0&&(a=a.substring(1)),i[a]=u}return i}});var wQ=m((fje,bQ)=>{"use strict";bQ.exports=function(e,r){let n=Object.keys(e).map(s=>Object.keys(e[s])).reduce((s,i)=>s.concat(i),[]);return r.filter(s=>EQ(s,n))};function EQ(t,e){let r=Object.keys(t)[0];if(r==="$and"||r==="$or")return Array.isArray(t[r])?t[r].find(i=>EQ(i,e))!=null:!1;let n=r.indexOf("."),s=n===-1?r:r.slice(0,n);return e.find(i=>i.includes("$["+s+"]"))!=null}});var ub=m((mje,SQ)=>{"use strict";SQ.exports=function(e){if(typeof e!="object"||e===null)return!1;let r=Object.keys(e),n=r.length;for(let s=0;s<n;++s)if(r[s][0]==="$")return!0;return!1}});var I5=m((yje,AQ)=>{"use strict";var y7e=ub(),{trustedSymbol:g7e}=Lp();AQ.exports=function t(e){if(e==null||typeof e!="object")return e;if(Array.isArray(e)){for(let n of e)t(n);return e}let r=Object.keys(e);for(let n of r){let s=e[n];if(!s?.[g7e]){if(n==="$and"||n==="$or"){t(s);continue}if(y7e(s)){let i=Object.keys(s);if(i.length===1&&i[0]==="$eq")continue;e[n]={$eq:e[n]}}}}return e}});var CQ=m((gje,OQ)=>{"use strict";OQ.exports=function(e){if(e==null)return;let r=Object.keys(e);for(let n=0;n<r.length;++n)typeof e[r[n]]=="string"&&(e[r[n]]=1)}});var TQ=m((_je,xQ)=>{"use strict";var _7e=Hp(),E7e=ob();xQ.exports=function(e,r,n){if(n==null)return;let s=Object.keys(n);if(r=r||{},E7e(e))for(let i of s){vQ(r,i)?r[i]===0&&delete e[i]:e[i]=1;let o=n[i]?.refPath;typeof o=="string"&&(vQ(r,o)?r[o]===0&&delete e[o]:e[o]=1)}else if(_7e(e))for(let i of s){r[i]==null&&delete e[i];let o=n[i]?.refPath;typeof o=="string"&&r[o]==null&&delete e[o]}};function vQ(t,e){let r=e.split("."),n=r.length,s=r[0];for(let i=1;i<n;++i){if(t[s]!=null||t[s+".$"]!=null)return!0;s+="."+r[i]}return t[s]!=null||t[s+".$"]!=null}});var BQ=m((Eje,PQ)=>{"use strict";var DQ=yc(),b7e=Kh(),MQ=V_().flatten;PQ.exports=async function(e,r,n,s){let i=Object.keys(n||{}),o={},a={},u={},c={},l=i.length,p=!1,d,h;for(let A=0;A<l;++A)if(i[A].startsWith("$")){if(p=!0,i[A]==="$push"||i[A]==="$addToSet"){let M=Object.keys(n[i[A]]);for(let I=0;I<M.length;++I)d=n[i[A]][M[I]],d?.$each?c[M[I]]=(c[M[I]]||[]).concat(d.$each):c[M[I]]=(c[M[I]]||[]).concat([d]);continue}let x=MQ(n[i[A]],null,null,r),v=Object.keys(x),R=v.length;for(let M=0;M<R;++M){let I=b7e(v[M]);h=i[A],!I.includes("$")&&(h==="$set"||h==="$setOnInsert"||h==="$pull"||h==="$pullAll"?(a[I]=x[v[M]],u[I]=h==="$pull"||h==="$pullAll"):h==="$unset"&&(a[I]=void 0),o[I]=!0)}}p||(a=MQ(n,null,null,r),o=Object.keys(a));let f=Object.keys(a),y=f.length,g=[],_=[],w=[],O=e;for(let A=0;A<y;++A){let x=a[f[A]],v=r._getSchema(f[A]);if(v!=null&&!(v.instance==="Mixed"&&v.path!==f[A]))if(x&&Array.isArray(x.$in))x.$in.forEach((R,M)=>{g.push(v.doValidate(R,O,{updateValidator:!0}).catch(I=>{I.path=f[M]+".$in."+M,_.push(I)}))});else{if(u[f[A]]&&v.$isMongooseArray)continue;if(v.$isMongooseDocumentArrayElement&&x?.$__!=null)w.push(f[A]),g.push(v.doValidate(x,O,{updateValidator:!0}).catch(R=>{if(R.errors)for(let M of Object.keys(R.errors)){let I=R.errors[M];I.path=f[A]+"."+M,_.push(I)}else R.path=f[A],_.push(R)}));else{if(w.find(M=>f[A].startsWith(M+".")))continue;v.$isSingleNested&&w.push(f[A]),g.push(v.doValidate(x,O,{updateValidator:!0}).catch(M=>{v.schema!=null&&v.schema.options.storeSubdocValidationError===!1&&M instanceof DQ||M&&(M.path=f[A],_.push(M))}))}}}let E=Object.keys(c);for(let A of E){let x=r._getSchema(A);if(x&&x.$isMongooseDocumentArray)g.push(x.doValidate(c[A],s?.context==="query"?e:null).catch(v=>{v.path=A,_.push(v)}));else{x=r._getSchema(A+".0");for(let v of c[A])g.push(x.doValidate(v,s?.context==="query"?e:null,{updateValidator:!0}).catch(R=>{R.path=A,_.push(R)}))}}if(await Promise.all(g),_.length){let A=new DQ(null);for(let x of _)A.addError(x.path,x);throw A}}});var db=m((bje,KQ)=>{"use strict";var wf=sn(),w7e=E_(),k5=fc(),tr=we(),Yo=F_(),IQ=qY(),NQ=yc(),{applyGlobalMaxTimeMS:Sf,applyGlobalDiskUse:Af}=E5(),S7e=Fx(),A7e=b5(),O7e=w5(),C7e=xc(),v7e=ZY(),lb=Gh(),x7e=s5(),zn=vt(),T7e=Us(),Of=$h(),D7e=bi().internalToObjectOptions,M7e=Hp(),P7e=ob(),B7e=K_(),kQ=rQ(),FQ=fs(),pb=P5(),I7e=B5(),N7e=wQ(),k7e=I5(),R7e=CQ(),F7e=TQ(),$Q=o5(),cb=dc(),$7e=BQ(),E1=require("util"),Re=ae(),q7e=Hh().queryMiddlewareFunctions,j7e=new Set(["allowDiskUse","batchSize","collation","comment","explain","hint","j","lean","limit","maxTimeMS","populate","projection","read","select","skip","slice","sort","tailable","w","writeConcern","wtimeout"]),L7e=new Map([["countDocuments","_countDocuments"],["distinct","__distinct"],["estimatedDocumentCount","_estimatedDocumentCount"],["find","_find"],["findOne","_findOne"],["findOneAndReplace","_findOneAndReplace"],["findOneAndUpdate","_findOneAndUpdate"],["replaceOne","_replaceOne"],["updateMany","_updateMany"],["updateOne","_updateOne"],["deleteMany","_deleteMany"],["deleteOne","_deleteOne"],["findOneAndDelete","_findOneAndDelete"]]);function $(t,e,r,n){this._mongooseOptions||(this._mongooseOptions={}),e=e||{},this._transforms=[],this._hooks=new k5,this._execCount=0;let s=Object.keys(e);for(let o of s)this._mongooseOptions[o]=e[o];n&&(this.mongooseCollection=n),r&&(this.model=r,this.schema=r.schema),this.model?._mapreduce&&this.lean(),pb.call(this,null,e),n&&this.collection(n),t&&this.find(t),this.options=this.options||{},this.$useProjection=!0;let i=this?.schema?.options?.collation||null;i!=null&&(this.options.collation=i)}function qQ(t){if(t==null||typeof t!="object"||Re.hasOwnKeys(t)===!1)return!0;for(let e of["$and","$or","$nor"])if(Array.isArray(t[e])&&(t[e].length===0||t[e].every(r=>qQ(r))))return!0;return!1}function b1(t,e){if(e?.requireFilter&&qQ(t))throw new Error("Empty or invalid filter not allowed with requireFilter enabled")}$.prototype=new pb;$.prototype.constructor=$;$.prototype.count=void 0;$.prototype.findOneAndRemove=void 0;$.base=pb.prototype;Object.defineProperty($.prototype,"_distinct",{configurable:!0,writable:!0,enumerable:!0,value:void 0});$.use$geoWithin=pb.use$geoWithin;$.prototype.toConstructor=function(){let e=this.model,r=this.mongooseCollection,n=function(o,a){if(!(this instanceof n))return new n(o,a);this._mongooseOptions=zn(s._mongooseOptions),$.call(this,o,a||null,e,r)};E1.inherits(n,e.Query);let s=n.prototype;s.options={};let i=Object.assign({},this.options);return i.sort!=null&&(s.sort(i.sort),delete i.sort),s.setOptions(i),s.op=this.op,s._conditions=zn(this._conditions),s._fields=zn(this._fields),s._update=zn(this._update,{flattenDecimals:!1}),s._path=this._path,s._distinct=this._distinct,s._collection=this._collection,s._mongooseOptions=this._mongooseOptions,n};$.prototype.clone=function(){let t=this.model,e=this.mongooseCollection,r=new this.model.Query({},{},t,e),n=Object.assign({},this.options);return n.sort!=null&&(r.sort(n.sort),delete n.sort),r.setOptions(n),r.op=this.op,r._conditions=zn(this._conditions),r._fields=zn(this._fields),r._update=zn(this._update,{flattenDecimals:!1}),r._path=this._path,r._distinct=this._distinct,r._collection=this._collection,r._mongooseOptions=this._mongooseOptions,r};$.prototype.slice=function(...t){if(t.length===0)return this;this._validate("slice");let e,r;if(t.length===1){let s=t[0];if(typeof s=="object"&&!Array.isArray(s)){let i=Object.keys(s),o=i.length;for(let a=0;a<o;++a)this.slice(i[a],s[i[a]]);return this}this._ensurePath("slice"),e=this._path,r=t[0]}else t.length===2?typeof t[0]=="number"?(this._ensurePath("slice"),e=this._path,r=[t[0],t[1]]):(e=t[0],r=t[1]):t.length===3&&(e=t[0],r=[t[1],t[2]]);let n={};return n[e]={$slice:r},this.select(n),this};var U7e=new Set(q7e);$.prototype._validateOp=function(){if(this.op!=null&&!U7e.has(this.op)&&this.error(new Error('Query has invalid `op`: "'+this.op+'"')),this.op!=="estimatedDocumentCount"&&this._conditions==null)throw new Yo(this._conditions,"filter",this.op)};$.prototype.mod=function(){let t,e;arguments.length===1?(this._ensurePath("mod"),t=arguments[0],e=this._path):arguments.length===2&&!Array.isArray(arguments[1])?(this._ensurePath("mod"),t=[arguments[0],arguments[1]],e=this._path):arguments.length===3?(t=[arguments[1],arguments[2]],e=arguments[0]):(t=arguments[1],e=arguments[0]);let r=this._conditions[e]||(this._conditions[e]={});return r.$mod=t,this};$.prototype.limit=function(e){if(this._validate("limit"),typeof e=="string")try{e=lb(e)}catch{throw new wf("Number",e,"limit")}return this.options.limit=e,this};$.prototype.skip=function(e){if(this._validate("skip"),typeof e=="string")try{e=lb(e)}catch{throw new wf("Number",e,"skip")}return this.options.skip=e,this};$.prototype.projection=function(t){return arguments.length===0?this._fields:(this._fields={},this._userProvidedFields={},this.select(t),this._fields)};$.prototype.select=function(){let e=arguments[0];if(!e)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");let r=this._fields||(this._fields={}),n=this._userProvidedFields||(this._userProvidedFields={}),s;this.model!=null&&Re.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection")?s=this.model.db.options.sanitizeProjection:this.model!=null&&Re.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection")?s=this.model.base.options.sanitizeProjection:s=this._mongooseOptions.sanitizeProjection;function i(o){return typeof o=="string"&&s?o=1:o}if(e=I7e(e,!0),Re.isObject(e)){if(this.selectedInclusively())Object.entries(e).forEach(([o,a])=>{a?(r["-"+o]!=null&&delete r["-"+o],r[o]=n[o]=i(a)):Object.keys(n).forEach(u=>{kQ(o,u)&&(delete r[u],delete n[u])})});else if(this.selectedExclusively())Object.entries(e).forEach(([o,a])=>{a?Object.keys(n).forEach(u=>{kQ(o,u)&&(delete r[u],delete n[u])}):(r["+"+o]!=null&&delete r["+"+o],r[o]=n[o]=i(a))});else{let o=Object.keys(e);for(let a=0;a<o.length;++a){let u=e[o[a]],c=o[a];r[c]=i(u),n[c]=i(u)}}return this}throw new TypeError("Invalid select() argument. Must be string or object.")};$.prototype.schemaLevelProjections=function(e){return this._mongooseOptions.schemaLevelProjections=e,this};$.prototype.sanitizeProjection=function(e){return this._mongooseOptions.sanitizeProjection=e,this};$.prototype.read=function(e,r){return typeof e=="string"?(e=S7e(e),this.options.readPreference={mode:e,tags:r}):this.options.readPreference=e,this};$.prototype.toString=function(){return this.op==="count"||this.op==="countDocuments"||this.op==="find"||this.op==="findOne"||this.op==="deleteMany"||this.op==="deleteOne"||this.op==="findOneAndDelete"||this.op==="remove"?`${this.model.modelName}.${this.op}(${E1.inspect(this._conditions)})`:this.op==="distinct"?`${this.model.modelName}.distinct('${this._distinct}', ${E1.inspect(this._conditions)})`:this.op==="findOneAndReplace"||this.op==="findOneAndUpdate"||this.op==="replaceOne"||this.op==="update"||this.op==="updateMany"||this.op==="updateOne"?`${this.model.modelName}.${this.op}(${E1.inspect(this._conditions)}, ${E1.inspect(this._update)})`:`${this.model.modelName}.${this.op}()`};$.prototype.session=function(e){return e==null&&delete this.options.session,this.options.session=e,this};$.prototype.writeConcern=function(e){return e==null?(delete this.options.writeConcern,this):(this.options.writeConcern=e,this)};$.prototype.w=function(e){return e==null&&delete this.options.w,this.options.writeConcern!=null?this.options.writeConcern.w=e:this.options.w=e,this};$.prototype.j=function(e){return e==null&&delete this.options.j,this.options.writeConcern!=null?this.options.writeConcern.j=e:this.options.j=e,this};$.prototype.wtimeout=function(e){return e==null&&delete this.options.wtimeout,this.options.writeConcern!=null?this.options.writeConcern.wtimeout=e:this.options.wtimeout=e,this};$.prototype.getOptions=function(){return this.options};$.prototype.setOptions=function(t,e){if(e)return this._mongooseOptions=t&&zn(t)||{},this.options=t||{},"populate"in t&&this.populate(this._mongooseOptions),this;if(t==null)return this;if(typeof t!="object")throw new Error('Options must be an object, got "'+t+'"');if(t=Object.assign({},t),Array.isArray(t.populate)){let r=t.populate;delete t.populate;let n=r.length;for(let s=0;s<n;++s)this.populate(r[s])}if("setDefaultsOnInsert"in t&&(this._mongooseOptions.setDefaultsOnInsert=t.setDefaultsOnInsert,delete t.setDefaultsOnInsert),"overwriteDiscriminatorKey"in t&&(this._mongooseOptions.overwriteDiscriminatorKey=t.overwriteDiscriminatorKey,delete t.overwriteDiscriminatorKey),"overwriteImmutable"in t&&(this._mongooseOptions.overwriteImmutable=t.overwriteImmutable,delete t.overwriteImmutable),"updatePipeline"in t&&(this._mongooseOptions.updatePipeline=t.updatePipeline,delete t.updatePipeline),"sanitizeProjection"in t&&(t.sanitizeProjection&&!this._mongooseOptions.sanitizeProjection&&R7e(this._fields),this._mongooseOptions.sanitizeProjection=t.sanitizeProjection,delete t.sanitizeProjection),"sanitizeFilter"in t&&(this._mongooseOptions.sanitizeFilter=t.sanitizeFilter,delete t.sanitizeFilter),"timestamps"in t&&(this._mongooseOptions.timestamps=t.timestamps,delete t.timestamps),"defaults"in t&&(this._mongooseOptions.defaults=t.defaults),"translateAliases"in t&&(this._mongooseOptions.translateAliases=t.translateAliases,delete t.translateAliases),"schemaLevelProjections"in t&&(this._mongooseOptions.schemaLevelProjections=t.schemaLevelProjections,delete t.schemaLevelProjections),t.lean==null&&this.schema&&"lean"in this.schema.options&&(this._mongooseOptions.lean=this.schema.options.lean),typeof t.limit=="string")try{t.limit=lb(t.limit)}catch{throw new wf("Number",t.limit,"limit")}if(typeof t.skip=="string")try{t.skip=lb(t.skip)}catch{throw new wf("Number",t.skip,"skip")}for(let r of Object.keys(t))if(j7e.has(r)){let n=Array.isArray(t[r])?t[r]:[t[r]];this[r].apply(this,n)}else this.options[r]=t[r];return this};$.prototype.explain=function(e){return arguments.length===0?this.options.explain=!0:e===!1?delete this.options.explain:this.options.explain=e,this};$.prototype.allowDiskUse=function(t){return arguments.length===0?this.options.allowDiskUse=!0:t===!1?delete this.options.allowDiskUse:this.options.allowDiskUse=t,this};$.prototype.maxTimeMS=function(t){return this.options.maxTimeMS=t,this};$.prototype.getFilter=function(){return this._conditions};$.prototype.getQuery=function(){return this._conditions};$.prototype.setQuery=function(t){this._conditions=t};$.prototype.getUpdate=function(){return this._update};$.prototype.setUpdate=function(t){this._update=t};$.prototype._fieldsForExec=function(){return this._fields==null||Re.hasOwnKeys(this._fields)===!1?null:zn(this._fields)};$.prototype._updateForExec=function(){let t=zn(this._update,{transform:!1,depopulate:!0}),e=Object.keys(t),r=e.length,n={};for(;r--;){let s=e[r];s[0]!=="$"?(n.$set||(t.$set?n.$set=t.$set:n.$set={}),n.$set[s]=t[s],e.splice(r,1),~e.indexOf("$set")||e.push("$set")):s==="$set"&&n.$set||(n[s]=t[s])}return n};$.prototype._optionsForExec=function(t){let e=zn(this.options);if(delete e.populate,t=t||this.model,!t)return e;A7e(t.schema,e),O7e(t.schema,e);let r=this.model?.db?.base.transactionAsyncLocalStorage?.getStore();!Object.hasOwn(this.options,"session")&&r?.session!=null&&(e.session=r.session);let n=t?.schema?.options?.read;if(!("readPreference"in e)&&n&&(e.readPreference=n),e.upsert!==void 0&&(e.upsert=!!e.upsert),e.writeConcern&&(e.j&&(e.writeConcern.j=e.j,delete e.j),e.w&&(e.writeConcern.w=e.w,delete e.w),e.wtimeout&&(e.writeConcern.wtimeout=e.wtimeout,delete e.wtimeout)),this._applyPaths(),this._fields!=null){this._fields=this._castFields(this._fields);let s=this._fieldsForExec();s!=null&&(e.projection=s)}if(this._mongooseOptions.populate){if(e.readPreference)for(let s of Object.values(this._mongooseOptions.populate))s.options?.readPreference===void 0&&(s.options||(s.options={}),s.options.readPreference=e.readPreference);if(e.readConcern)for(let s of Object.values(this._mongooseOptions.populate))s.options?.readConcern===void 0&&(s.options||(s.options={}),s.options.readConcern=e.readConcern)}return e};$.prototype.lean=function(t){return this._mongooseOptions.lean=arguments.length?t:!0,this};$.prototype.set=function(t,e){if(typeof t=="object"){let r=Object.keys(t);for(let n of r)this.set(n,t[n]);return this}return this._update=this._update||{},t in this._update&&delete this._update[t],this._update.$set=this._update.$set||{},this._update.$set[t]=e,this};$.prototype.get=function(e){let r=this._update;if(r==null)return;let n=r.$set;if(n==null||Re.hasUserDefinedProperty(r,e))return r[e];if(Re.hasUserDefinedProperty(n,e))return n[e]};$.prototype.error=function(e){return arguments.length===0?this._error:(this._error=e,this)};$.prototype._unsetCastError=function(){if(!(this._error==null||!(this._error instanceof wf)))return this.error(null)};$.prototype.mongooseOptions=function(t){return arguments.length>0&&(this._mongooseOptions=t),this._mongooseOptions};$.prototype._castConditions=function(){let t;this.model?.db.options?.sanitizeFilter!=null?t=this.model.db.options.sanitizeFilter:this.model?.base.options?.sanitizeFilter!=null?t=this.model.base.options.sanitizeFilter:t=this._mongooseOptions.sanitizeFilter,t&&k7e(this._conditions);try{this.cast(this.model),this._unsetCastError()}catch(e){this.error(e)}};function jQ(t){try{v7e(t)}catch(e){t.error(e)}}$.prototype._find=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();let e=this._mongooseOptions,r=this._userProvidedFields||{},n=this.model.db.options,s=this.model.base.options;Sf(this.options,n,s),Af(this.options,n,s);let i={session:this?.options?.session||null,lean:e.lean||null},o=this._optionsForExec(),a=this._conditions,u=o.projection,c=await this.mongooseCollection.find(a,o);if(o.explain)return c.explain();let l=await c.toArray();if(l.length===0)return l;if(!e.populate){let d=this.schema.options.versionKey;return e.lean?.versionKey===!1&&d&&l.forEach(h=>{d in h&&delete h[d]}),e.lean?UQ(this.model.schema,l,null,i):this._completeMany(l,u,r,i)}let p=Of.preparePopulationOptionsMQ(this,e);return e.lean?this.model.populate(l,p):(l=await this._completeMany(l,u,r,i),await this.model.populate(l,p),l)};$.prototype.find=function(t){if(typeof t=="function"||typeof arguments[1]=="function")throw new tr("Query.prototype.find() no longer accepts a callback");return this.op="find",Qo(t)?(this.merge(t),Cf(this)):t!=null&&this.error(new Yo(t,"filter","find")),this};$.prototype.merge=function(t){if(!t)return t===null&&(this._conditions=null),this;this._conditions=this._conditions??{};let e={overwrite:!0};return t instanceof $?(t._conditions&&(e.omit={},this._conditions&&this._conditions.$and&&t._conditions.$and&&(e.omit.$and=!0,this._conditions.$and=this._conditions.$and.concat(t._conditions.$and)),this._conditions&&this._conditions.$or&&t._conditions.$or&&(e.omit.$or=!0,this._conditions.$or=this._conditions.$or.concat(t._conditions.$or)),Re.merge(this._conditions,t._conditions,e)),t._fields&&(this._fields||(this._fields={}),Re.merge(this._fields,t._fields,e)),t.options&&(this.options||(this.options={}),Re.merge(this.options,t.options,e)),t._update&&(this._update||(this._update={}),Re.mergeClone(this._update,t._update)),t._distinct&&(this._distinct=t._distinct),Re.merge(this._mongooseOptions,t._mongooseOptions),this):this.model!=null&&t instanceof this.model.base.Types.ObjectId?(Re.merge(this._conditions,{_id:t},e),this):(t?.$__&&(t=t.toObject(D7e)),e.omit={},Array.isArray(t.$and)&&(e.omit.$and=!0,this._conditions||(this._conditions={}),this._conditions.$and=(this._conditions.$and||[]).concat(t.$and.map(r=>Re.isPOJO(r)?Re.merge({},r):r))),Array.isArray(t.$or)&&(e.omit.$or=!0,this._conditions||(this._conditions={}),this._conditions.$or=(this._conditions.$or||[]).concat(t.$or.map(r=>Re.isPOJO(r)?Re.merge({},r):r))),Re.merge(this._conditions,t,e),this)};$.prototype.collation=function(t){return this.options==null&&(this.options={}),this.options.collation=t,this};$.prototype._completeOne=function(t,e,r,n){if(!t&&!this.options.includeResultMetadata)return n(null,null);let s=this.model,i=this._userProvidedFields||{},o=this._mongooseOptions,a=this.options;if(!a.lean&&o.lean&&(a.lean=o.lean),a.explain)return n(null,t);if(!o.populate){let c=this.schema.options.versionKey;return o.lean?.versionKey===!1&&c&&c in t&&delete t[c],o.lean?R5(s.schema,t,null,e,a,n):RQ(s,t,e,a,r,i,null,n)}let u=Of.preparePopulationOptionsMQ(this,this._mongooseOptions);if(o.lean)return s.populate(t,u).then(c=>{R5(s.schema,c,null,e,a,n)},c=>{n(c)});RQ(s,t,e,a,r,i,[],(c,l)=>{if(c!=null)return n(c);s.populate(l,u).then(p=>{n(null,p)},p=>{n(p)})})};$.prototype._completeMany=async function(e,r,n,s){let i=this.model;return Promise.all(e.map(o=>new Promise((a,u)=>{let c=o;o=Of.createModel(i,o,r,n),s.session!=null&&o.$session(s.session),o.$init(c,s,l=>{if(l!=null)return u(l);a(o)})})))};$.prototype._findOne=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();let e=this.model.db.options,r=this.model.base.options;Sf(this.options,e,r),Af(this.options,e,r);let n=this._optionsForExec(),s=await this.mongooseCollection.findOne(this._conditions,n);return new Promise((i,o)=>{this._completeOne(s,null,n.projection,(a,u)=>{if(a)return o(a);i(u)})})};$.prototype.findOne=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[3]=="function")throw new tr("Query.prototype.findOne() no longer accepts a callback");return this.op="findOne",r&&this.setOptions(r),e&&this.select(e),Qo(t)?(this.merge(t),Cf(this)):t!=null&&this.error(new Yo(t,"filter","findOne")),this};$.prototype._countDocuments=async function(){this._applyTranslateAliases();try{this.cast(this.model)}catch(i){this.error(i)}if(this.error())throw this.error();let e=this.model.db.options,r=this.model.base.options;Sf(this.options,e,r),Af(this.options,e,r);let n=this._optionsForExec(),s=this._conditions;return this.mongooseCollection.countDocuments(s,n)};$.prototype._applyTranslateAliases=function(){let e=!1;"translateAliases"in this._mongooseOptions?e=this._mongooseOptions.translateAliases:this.model?.schema?._userProvidedOptions?.translateAliases!=null?e=this.model.schema._userProvidedOptions.translateAliases:this.model?.base?.options?.translateAliases!=null&&(e=this.model.base.options.translateAliases),e&&this.model?.schema?.aliases&&Re.hasOwnKeys(this.model.schema.aliases)&&(this.model.translateAliases(this._conditions,!0),this.model.translateAliases(this._fields,!0),this.model.translateAliases(this._update,!0),this._distinct!=null&&this.model.schema.aliases[this._distinct]!=null&&(this._distinct=this.model.schema.aliases[this._distinct]))};$.prototype._estimatedDocumentCount=async function(){if(this.error())throw this.error();let e=this._optionsForExec();return this.mongooseCollection.estimatedDocumentCount(e)};$.prototype.estimatedDocumentCount=function(t){if(typeof t=="function"||typeof arguments[1]=="function")throw new tr("Query.prototype.estimatedDocumentCount() no longer accepts a callback");return this.op="estimatedDocumentCount",t!=null&&this.setOptions(t),this};$.prototype.countDocuments=function(t,e){if(typeof t=="function"||typeof e=="function"||typeof arguments[2]=="function")throw new tr("Query.prototype.countDocuments() no longer accepts a callback");return this.op="countDocuments",Qo(t)&&this.merge(t),e!=null&&this.setOptions(e),this};$.prototype.__distinct=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();let e=this.model.db.options,r=this.model.base.options;Sf(this.options,e,r),Af(this.options,e,r);let n=this._optionsForExec();return this.mongooseCollection.distinct(this._distinct,this._conditions,n)};$.prototype.distinct=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[3]=="function")throw new tr("Query.prototype.distinct() no longer accepts a callback");return this.op="distinct",Qo(e)?(this.merge(e),Cf(this)):e!=null&&this.error(new Yo(e,"filter","distinct")),t!=null&&(this._distinct=t),r!=null&&this.setOptions(r),this};$.prototype.sort=function(t,e){if(arguments.length>2)throw new Error("sort() takes at most 2 arguments");if(e!=null&&typeof e!="object")throw new Error("sort() options argument must be an object or nullish");this.options.sort==null&&(this.options.sort={}),e?.override&&(this.options.sort={});let r=this.options.sort;if(typeof t=="string"){let n=t.indexOf(" ")===-1?[t]:t.split(" ");for(let s of n){let i=s[0]=="-"?-1:1;i===-1&&(s=s.slice(1)),!cb.has(s)&&(r[s]=i)}}else if(Array.isArray(t))for(let n of t){if(!Array.isArray(n))throw new TypeError("Invalid sort() argument, must be array of arrays");let s=""+n[0];cb.has(s)||(r[s]=N5(n[1],s))}else if(typeof t=="object"&&t!=null&&!(t instanceof Map))for(let n of Object.keys(t))cb.has(n)||(r[n]=N5(t[n],n));else if(t instanceof Map)for(let n of t.keys())n=""+n,!cb.has(n)&&(r[n]=N5(t.get(n),n));else if(t!=null)throw new TypeError("Invalid sort() argument. Must be a string, object, array, or map.");return this};function N5(t,e){if(t===1||t==="asc"||t==="ascending")return 1;if(t===-1||t==="desc"||t==="descending")return-1;if(t?.$meta!=null)return{$meta:t.$meta};throw new TypeError("Invalid sort value: { "+e+": "+t+" }")}$.prototype.deleteOne=function(e,r){if(typeof e=="function"||typeof r=="function"||typeof arguments[2]=="function")throw new tr("Query.prototype.deleteOne() no longer accepts a callback");return this.op="deleteOne",this.setOptions(r),Qo(e)?(this.merge(e),Cf(this)):e!=null&&this.error(new Yo(e,"filter","deleteOne")),this};$.prototype._deleteOne=async function(){if(this._applyTranslateAliases(),this._castConditions(),b1(this._conditions,this.options),this.error()!=null)throw this.error();let e=this._optionsForExec();return this.mongooseCollection.deleteOne(this._conditions,e)};$.prototype.deleteMany=function(t,e){if(typeof t=="function"||typeof e=="function"||typeof arguments[2]=="function")throw new tr("Query.prototype.deleteMany() no longer accepts a callback");return this.setOptions(e),this.op="deleteMany",Qo(t)?(this.merge(t),Cf(this)):t!=null&&this.error(new Yo(t,"filter","deleteMany")),this};$.prototype._deleteMany=async function(){if(this._applyTranslateAliases(),this._castConditions(),b1(this._conditions,this.options),this.error()!=null)throw this.error();let e=this._optionsForExec();return this.mongooseCollection.deleteMany(this._conditions,e)};function RQ(t,e,r,n,s,i,o,a){if(n.includeResultMetadata&&e==null)return u(null),null;Of.createModelAndInit(t,e,s,i,n,o,u);function u(c,l){if(c)return a(c);if(n.includeResultMetadata)return e&&l?(n.session!=null&&l.$session(n.session),r.value=l):r.value=null,a(null,r);n.session!=null&&l.$session(n.session),a(null,l)}}function Cf(t){if(!t?.model?.schema)return;let e=t.model.schema;e?.discriminatorMapping&&!e.discriminatorMapping.isRoot&&(t._conditions[e.discriminatorMapping.key]=e.discriminatorMapping.value)}$.prototype.findOneAndUpdate=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[3]=="function")throw new tr("Query.prototype.findOneAndUpdate() no longer accepts a callback");switch(this.op="findOneAndUpdate",this._validate(),arguments.length){case 2:r=void 0;break;case 1:e=t,t=r=void 0;break}Qo(t)?this.merge(t):t!=null&&this.error(new Yo(t,"filter","findOneAndUpdate")),r=r?zn(r):{},r.projection&&(this.select(r.projection),delete r.projection),r.fields&&(this.select(r.fields),delete r.fields);let n=this?.model?.base?.options?.returnOriginal;r.new==null&&r.returnDocument==null&&r.returnOriginal==null&&n!=null&&(r.returnOriginal=n);let s=this?.model?.base?.options?.updatePipeline;return r.updatePipeline==null&&s!=null&&(r.updatePipeline=s),this.setOptions(r),e&&this._mergeUpdate(e),this};$.prototype._findOneAndUpdate=async function(){if(this._applyTranslateAliases(),this._castConditions(),b1(this._conditions,this.options),jQ(this),this.error())throw this.error();let e=this.model.db.options,r=this.model.base.options;Sf(this.options,e,r),Af(this.options,e,r),"strict"in this.options&&(this._mongooseOptions.strict=this.options.strict);let n=this._optionsForExec(this.model);LQ(n),this._update=this._castUpdate(this._update);let s=Object.assign({},n,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});if(this._update=$Q(this._conditions,this.model.schema,this._update,s),!this._update||Re.hasOwnKeys(this._update)===!1)if(n.upsert){let u=zn(this._update);delete u._id,this._update={$set:u}}else return this._execCount=0,await this._findOne();else{if(this._update instanceof Error)throw this._update;this._update.$set&&Re.hasOwnKeys(this._update.$set)===!1&&delete this._update.$set}F5(this,"runValidators",!1)&&await this.validate(this._update,n,!1),this._update.toBSON&&(this._update=this._update.toBSON());let o=await this.mongooseCollection.findOneAndUpdate(this._conditions,this._update,n);for(let u of this._transforms)o=u(o);let a=n.includeResultMetadata?o.value:o;return new Promise((u,c)=>{this._completeOne(a,o,n.projection,(l,p)=>{if(l)return c(l);u(p)})})};$.prototype.findOneAndDelete=function(t,e){if(typeof t=="function"||typeof e=="function"||typeof arguments[2]=="function")throw new tr("Query.prototype.findOneAndDelete() no longer accepts a callback");return this.op="findOneAndDelete",this._validate(),Qo(t)&&this.merge(t),e&&this.setOptions(e),this};$.prototype._findOneAndDelete=async function(){if(this._applyTranslateAliases(),this._castConditions(),b1(this._conditions,this.options),this.error()!=null)throw this.error();let e=this.options.includeResultMetadata,r=this._conditions,n=this._optionsForExec(this.model),s=await this.mongooseCollection.findOneAndDelete(r,n);for(let o of this._transforms)s=o(s);let i=e?s.value:s;return new Promise((o,a)=>{this._completeOne(i,s,n.projection,(u,c)=>{if(u)return a(u);o(c)})})};$.prototype.findOneAndReplace=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[4]=="function")throw new tr("Query.prototype.findOneAndReplace() no longer accepts a callback");this.op="findOneAndReplace",this._validate(),Qo(t)?this.merge(t):t!=null&&this.error(new Yo(t,"filter","findOneAndReplace")),e!=null&&this._mergeUpdate(e),r=r||{};let n=this?.model?.base?.options?.returnOriginal;return r.new==null&&r.returnDocument==null&&r.returnOriginal==null&&n!=null&&(r.returnOriginal=n),this.setOptions(r),this};$.prototype._findOneAndReplace=async function(){if(this._applyTranslateAliases(),this._castConditions(),b1(this._conditions,this.options),this.error()!=null)throw this.error();"strict"in this.options&&(this._mongooseOptions.strict=this.options.strict,delete this.options.strict);let e=this._conditions,r=this._optionsForExec();LQ(r);let n=this.options.includeResultMetadata,s={skipId:!0};"strict"in this._mongooseOptions&&(s.strict=this._mongooseOptions.strict);let i=F5(this,"runValidators",!1);try{let u=new this.model(this._update,null,s);if(i)await u.validate();else if(u.$__.validationError)throw u.$__.validationError;this._update=u.toBSON()}catch(u){if(u instanceof NQ)throw u;let c=new NQ;throw c.errors[u.path]=u,c}let o=await this.mongooseCollection.findOneAndReplace(e,this._update,r);for(let u of this._transforms)o=u(o);let a=n?o.value:o;return new Promise((u,c)=>{this._completeOne(a,o,r.projection,(l,p)=>{if(l)return c(l);u(p)})})};$.prototype.findById=function(t,e,r){return this.findOne({_id:t},e,r)};$.prototype.findByIdAndUpdate=function(t,e,r){return this.findOneAndUpdate({_id:t},e,r)};$.prototype.findByIdAndDelete=function(t,e){return this.findOneAndDelete({_id:t},e)};function LQ(t){"new"in t&&(t.returnDocument=t.new?"after":"before",delete t.new),"returnOriginal"in t&&(t.returnDocument=t.returnOriginal?"before":"after",delete t.returnOriginal),typeof t.returnDocument=="string"&&(t.returnOriginal=t.returnDocument==="before")}function F5(t,e,r){let n=t._optionsForExec(t.model);return e in n?n[e]:e in t.model.base.options?t.model.base.options[e]:r}function R5(t,e,r,n,s,i){if(s.lean&&typeof s.lean.transform=="function"){s.lean.transform(e);for(let o=0;o<t.childSchemas.length;o++){let a=r?r+"."+t.childSchemas[o].model.path:t.childSchemas[o].model.path,u=t.childSchemas[o].schema,c=FQ.get(a,e);if(c!=null){if(Array.isArray(c))for(let l=0;l<c.length;l++)s.lean.transform(c[l]);else s.lean.transform(c);R5(u,c,a,n,s)}}return i?i(null,e):void 0}return s.includeResultMetadata?i(null,n):i(null,e)}function UQ(t,e,r,n){if(n.lean&&typeof n.lean.transform=="function"){for(let s of e)n.lean.transform(s);for(let s=0;s<t.childSchemas.length;s++){let i=r?r+"."+t.childSchemas[s].model.path:t.childSchemas[s].model.path,o=t.childSchemas[s].schema,a=FQ.get(i,e);if(a!=null){a=a.flat();for(let u=0;u<a.length;u++)n.lean.transform(a[u]);UQ(o,a,i,n)}}}return e}$.prototype._mergeUpdate=function(t){if(!this._mongooseOptions.updatePipeline&&Array.isArray(t))throw new tr("Cannot pass an array to query updates unless the `updatePipeline` option is set.");if(this._update||(this._update=Array.isArray(t)?[]:{}),!(t==null||typeof t=="object"&&Re.hasOwnKeys(t)===!1))if(t instanceof $){if(Array.isArray(this._update))throw new tr(`Cannot mix array and object updates (current: ${g1(this._update)}, incoming: ${g1(t._update)})`);t._update&&Re.mergeClone(this._update,t._update)}else if(Array.isArray(t)){if(!Array.isArray(this._update))if(this._update==null||Re.isEmptyObject(this._update))this._update=[];else throw new tr(`Cannot mix array and object updates (current: ${g1(this._update)}, incoming: ${g1(t)})`);this._update=this._update.concat(t)}else{if(Array.isArray(this._update))throw new tr(`Cannot mix array and object updates (current: ${g1(this._update)}, incoming: ${g1(t)})`);Re.mergeClone(this._update,t)}};function g1(t){let e=E1.inspect(t,{depth:2,maxArrayLength:5,breakLength:80,compact:!0});return e.length>200?`${e.slice(0,197)}...`:e}async function $5(t){if(this._applyTranslateAliases(),this._castConditions(),b1(this._conditions,this.options),jQ(this),this.error()!=null)throw this.error();let e=this._conditions,r=this._optionsForExec(this.model);this._update=zn(this._update,r);let n=t==="replaceOne";if(n)this._update=new this.model(this._update,null,{skipId:!0});else{if(this._update=this._castUpdate(this._update),this._update==null||Re.hasOwnKeys(this._update)===!1)return{acknowledged:!1};let i=Object.assign({},r,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});this._update=$Q(this._conditions,this.model.schema,this._update,i)}return Array.isArray(r.arrayFilters)&&(r.arrayFilters=N7e(this._update,r.arrayFilters)),F5(this,"runValidators",!1)&&await this.validate(this._update,r,n),this._update.toBSON&&(this._update=this._update.toBSON()),this.mongooseCollection[t](e,this._update,r)}$.prototype.validate=async function(e,r,n){if(typeof arguments[3]=="function")throw new tr("Query.prototype.validate() no longer accepts a callback");await WQ(this,"validate"),n?await e.$validate():await $7e(this,this.model.schema,e,r),await VQ(this,null,null,"validate")};$.prototype._updateMany=async function(){return $5.call(this,"updateMany")};$.prototype._updateOne=async function(){return $5.call(this,"updateOne")};$.prototype._replaceOne=async function(){return $5.call(this,"replaceOne")};$.prototype.updateMany=function(t,e,r,n){return typeof r=="function"?(n=r,r=void 0):typeof e=="function"?(n=e,e=t,t={},r=void 0):typeof t=="function"?(n=t,t=void 0,e=void 0,r=void 0):typeof t=="object"&&!e&&!r&&!n&&(e=t,t=void 0,r=void 0,n=void 0),q5(this,"updateMany",t,e,r,n)};$.prototype.updateOne=function(t,e,r,n){return typeof r=="function"?(n=r,r=void 0):typeof e=="function"?(n=e,e=t,t={},r=void 0):typeof t=="function"?(n=t,t=void 0,e=void 0,r=void 0):typeof t=="object"&&!e&&!r&&!n&&(e=t,t=void 0,r=void 0,n=void 0),q5(this,"updateOne",t,e,r,n)};$.prototype.replaceOne=function(t,e,r,n){return typeof r=="function"?(n=r,r=void 0):typeof e=="function"?(n=e,e=t,t={},r=void 0):typeof t=="function"?(n=t,t=void 0,e=void 0,r=void 0):typeof t=="object"&&!e&&!r&&!n&&(e=t,t=void 0,r=void 0,n=void 0),q5(this,"replaceOne",t,e,r,n)};function q5(t,e,r,n,s,i){t.op=e,n=n||{},s!=null&&"strict"in s&&(t._mongooseOptions.strict=s.strict),!(r instanceof $)&&r!=null&&r.toString()!=="[object Object]"?t.error(new Yo(r,"filter",e)):t.merge(r);let o=t?.model?.base?.options?.updatePipeline;return o!=null&&s?.updatePipeline==null&&(s=s||{},s.updatePipeline=o),Re.isObject(s)&&t.setOptions(s),t._mergeUpdate(n),i&&t.exec(i),t}$.prototype.transform=function(t){return this._transforms.push(t),this};$.prototype.orFail=function(t){return this.transform(e=>{switch(this.op){case"find":if(e.length===0)throw _1(t,this);break;case"findOne":if(e==null)throw _1(t,this);break;case"replaceOne":case"updateMany":case"updateOne":if(e?.matchedCount===0)throw _1(t,this);break;case"findOneAndDelete":case"findOneAndUpdate":case"findOneAndReplace":if(this.options.includeResultMetadata&&e!=null&&e.value==null)throw _1(t,this);if(!this.options.includeResultMetadata&&e==null)throw _1(t,this);break;case"deleteMany":case"deleteOne":if(e.deletedCount===0)throw _1(t,this);break;default:break}return e}),this};function _1(t,e){return typeof t=="function"&&(t=t.call(e)),t==null&&(t=new w7e(e.getQuery(),e.model.modelName)),t}$.prototype.isPathSelectedInclusive=function(t){return B7e(this._fields,t)};$.prototype.exec=async function(e){if(typeof e=="function"||arguments.length>=2&&typeof arguments[1]=="function")throw new tr("Query.prototype.exec() no longer accepts a callback");if(this._validateOp(),typeof e=="string"&&(this.op=e),this.op==null)throw new tr("Query must have `op` before executing");if(this.model==null)throw new tr("Query must have an associated model before executing");let r=L7e.get(this.op);if(!r)throw new tr('Query has invalid `op`: "'+this.op+'"');if(this.options?.sort&&typeof this.options.sort=="object"&&Object.hasOwn(this.options.sort,""))throw new Error('Invalid field "" passed to sort()');if(this._execCount>0){let o=this.toString();throw o.length>60&&(o=o.slice(0,60)+"..."),new tr("Query was already executed: "+o)}this._execCount++;let n=null;try{await this._hooks.execPre("exec",this,[])}catch(o){if(o instanceof k5.skipWrappedFunction)n=o;else throw o}let s,i=null;try{await WQ(this),s=n?n.args[0]:await this[r]();for(let o of this._transforms)s=o(s)}catch(o){o instanceof k5.skipWrappedFunction?s=o.args[0]:i=o,i=this.model.schema._transformDuplicateKeyError(i)}return s=await VQ(this,s,i),await this._hooks.execPost("exec",this,[]),s};function VQ(t,e,r,n){if(t._queryMiddleware==null){if(r!=null)throw r;return e}let s=r?{error:r}:{};return t._queryMiddleware.execPost(n||t.op,t,[e],s).then(i=>i[0])}function WQ(t,e){if(t._queryMiddleware!=null)return t._queryMiddleware.execPre(e||t.op,t,[])}$.prototype.then=function(t,e){return this.exec().then(t,e)};$.prototype.catch=function(t){return this.exec().then(null,t)};$.prototype.finally=function(t){return this.exec().finally(t)};$.prototype[Symbol.toStringTag]=function(){return`Query { ${this.op} }`};$.prototype.pre=function(t){return this._hooks.pre("exec",t),this};$.prototype.post=function(t){return this._hooks.post("exec",t),this};$.prototype._castUpdate=function(e){let r=this.schema,n=r.options.discriminatorKey,s=r._baseSchema||r;if(this._mongooseOptions.overwriteDiscriminatorKey&&e[n]!=null&&s.discriminators){let o=Object.values(s.discriminators).find(a=>a.discriminatorMapping.value===e[n]);o!=null&&(r=o)}let i;return"upsert"in this.options&&(i=this.options.upsert),x7e(r,e,{strict:this._mongooseOptions.strict,upsert:i,arrayFilters:this.options.arrayFilters,overwriteDiscriminatorKey:this._mongooseOptions.overwriteDiscriminatorKey,overwriteImmutable:this._mongooseOptions.overwriteImmutable},this,this._conditions)};$.prototype.populate=function(...t){if(!t.some(Boolean))return this;let e=Re.populate.apply(null,t),r=this._mongooseOptions;if(r.lean!=null){let s=r.lean;for(let i of e)i?.options?.lean==null&&(i.options=i.options||{},i.options.lean=s)}Re.isObject(r.populate)||(r.populate={});let n=r.populate;for(let s of e){let i=s.path;n[i]?.populate&&s.populate&&(s.populate=n[i].populate.concat(s.populate)),n[s.path]=s}return this};$.prototype.getPopulatedPaths=function(){let e=this._mongooseOptions.populate||{},r=Object.keys(e);for(let n of Object.keys(e)){let s=e[n];Array.isArray(s.populate)&&zQ(r,s.populate,n+".")}return r};function zQ(t,e,r){for(let n of e)t.push(r+n.path),Array.isArray(n.populate)&&zQ(t,n.populate,r+n.path+".")}$.prototype.cast=function(t,e){e||(e=this._conditions),t=t||this.model;let r=t.schema.options.discriminatorKey;e!=null&&Object.hasOwn(e,r)&&(t=T7e(t.discriminators,e[r])||t);let n={upsert:this.options?.upsert};this.options&&("strict"in this.options&&(n.strict=this.options.strict),"strictQuery"in this.options&&(n.strictQuery=this.options.strictQuery)),"sanitizeFilter"in this._mongooseOptions&&(n.sanitizeFilter=this._mongooseOptions.sanitizeFilter);try{return C7e(t.schema,e,n,this)}catch(s){throw typeof s.setModel=="function"&&s.setModel(t),s}};$.prototype._castFields=function(e){let r,n,s,i,o;if(e){s=Object.keys(e),n=[];for(let a=0;a<s.length;++a)i=s[a],e[i].$elemMatch&&(r||(r={}),r[i]=e[i],n.push(i))}if(r){try{o=this.cast(this.model,r)}catch(a){return a}for(let a=0;a<n.length;++a)i=n[a],e[i]=o[i]}return e};$.prototype._applyPaths=function(){if(!this.model)return;this._fields=this._fields||{};let e;this.model!=null&&Re.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection")?e=this.model.db.options.sanitizeProjection:this.model!=null&&Re.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection")?e=this.model.base.options.sanitizeProjection:e=this._mongooseOptions.sanitizeProjection,(this._mongooseOptions.schemaLevelProjections??!0)&&Of.applyPaths(this._fields,this.model.schema,e);let n=!0;"selectPopulatedPaths"in this.model.base.options&&(n=this.model.base.options.selectPopulatedPaths),"selectPopulatedPaths"in this.model.schema.options&&(n=this.model.schema.options.selectPopulatedPaths),n&&F7e(this._fields,this._userProvidedFields,this._mongooseOptions.populate)};$.prototype.cursor=function(e){e&&this.setOptions(e);try{this.cast(this.model)}catch(r){return new IQ(this)._markError(r)}return new IQ(this)};$.prototype.tailable=function(t,e){if(typeof t?.constructor=="function"&&t.constructor.name==="Object"&&(e=t,t=!0),t===void 0&&(t=!0),e&&typeof e=="object")for(let r of Object.keys(e))r==="awaitData"||r==="awaitdata"?this.options.awaitData=!!e[r]:this.options[r]=e[r];return this.options.tailable=arguments.length?!!t:!0,this};$.prototype.near=function(){let t=[],e=this._mongooseOptions.nearSphere;if(arguments.length===1)if(Array.isArray(arguments[0]))t.push({center:arguments[0],spherical:e});else if(typeof arguments[0]=="string")t.push(arguments[0]);else if(Re.isObject(arguments[0]))typeof arguments[0].spherical!="boolean"&&(arguments[0].spherical=e),t.push(arguments[0]);else throw new TypeError("invalid argument");else if(arguments.length===2)if(typeof arguments[0]=="number"&&typeof arguments[1]=="number")t.push({center:[arguments[0],arguments[1]],spherical:e});else if(typeof arguments[0]=="string"&&Array.isArray(arguments[1]))t.push(arguments[0]),t.push({center:arguments[1],spherical:e});else if(typeof arguments[0]=="string"&&Re.isObject(arguments[1]))t.push(arguments[0]),typeof arguments[1].spherical!="boolean"&&(arguments[1].spherical=e),t.push(arguments[1]);else throw new TypeError("invalid argument");else if(arguments.length===3)if(typeof arguments[0]=="string"&&typeof arguments[1]=="number"&&typeof arguments[2]=="number")t.push(arguments[0]),t.push({center:[arguments[1],arguments[2]],spherical:e});else throw new TypeError("invalid argument");else throw new TypeError("invalid argument");return $.base.near.apply(this,t)};$.prototype.nearSphere=function(){return this._mongooseOptions.nearSphere=!0,this.near.apply(this,arguments),this};$.prototype[Symbol.asyncIterator]=function(){return this._mongooseOptions._asyncIterator=!0,this.cursor()};$.prototype.box=function(t,e){return!Array.isArray(t)&&Re.isObject(t)&&(e=t.ur,t=t.ll),$.base.box.call(this,t,e)};$.prototype.center=$.base.circle;$.prototype.centerSphere=function(){typeof arguments[0]?.constructor=="function"&&arguments[0].constructor.name==="Object"&&(arguments[0].spherical=!0),typeof arguments[1]?.constructor=="function"&&arguments[1].constructor.name==="Object"&&(arguments[1].spherical=!0),$.base.circle.apply(this,arguments)};$.prototype.selectedInclusively=function(){return P7e(this._fields)};$.prototype.selectedExclusively=function(){return M7e(this._fields)};$.prototype.model;function Qo(t){return t instanceof $||Re.isObject(t)||t===null}KQ.exports=$});var QQ=m((wje,YQ)=>{"use strict";var vf=we(),GQ=require("stream").Readable,V7e=y5(),W7e=Da(),z7e=fc(),JQ=require("util");function Kn(t){GQ.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.agg=t,this._transforms=[];let e=t._connection,r=t._model;delete t.options.cursor.useMongooseAggCursor,this._mongooseOptions={},e?(this.cursor=e.db.aggregate(t._pipeline,t.options||{}),setImmediate(()=>this.emit("cursor",this.cursor))):K7e(r,this,t)}JQ.inherits(Kn,GQ);function K7e(t,e,r){t.collection.buffer?t.collection.emitter.once("queue",function(){t.hooks.execPre("aggregate",r).then(()=>n(null),s=>n(s))}):t.hooks.execPre("aggregate",r).then(()=>n(null),s=>n(s));function n(s){if(s!=null){H7e(e,s);return}typeof r.options?.cursor?.transform=="function"&&e._transforms.push(r.options.cursor.transform),e.cursor=t.collection.aggregate(r._pipeline,r.options||{}),e.emit("cursor",e.cursor)}}function H7e(t,e){if(e instanceof z7e.skipWrappedFunction){let r=e.args[0];if(r!=null&&(!Array.isArray(r)||r.length)){let n=new vf('Cannot `skipMiddlewareFunction()` with a value when using `.aggregate().cursor()`, value must be nullish or empty array, got "'+JQ.inspect(r)+'".');t._markError(n),t.listeners("error").length>0&&t.emit("error",n);return}t.emit("cursor",null);return}t._markError(e),t.listeners("error").length>0&&t.emit("error",e)}Kn.prototype._read=function(){let t=this;hb(this,function(e,r){if(e)return t.emit("error",e);if(!r){t.push(null),t.cursor.close(function(n){if(n)return t.emit("error",n)});return}t.push(r)})};if(Symbol.asyncIterator!=null){let t="Mongoose does not support using async iterators with an existing aggregation cursor. See https://bit.ly/mongoose-async-iterate-aggregation";Kn.prototype[Symbol.asyncIterator]=function(){throw new vf(t)}}Object.defineProperty(Kn.prototype,"map",{value:function(t){return this._transforms.push(t),this},enumerable:!0,configurable:!0,writable:!0});Kn.prototype._markError=function(t){return this._error=t,this};Kn.prototype.close=async function(){if(typeof arguments[0]=="function")throw new vf("AggregationCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close()}catch(e){throw this.listeners("error").length>0&&this.emit("error",e),e}this.emit("close")};Kn.prototype._destroy=function(e,r){let n=null;return this.cursor?n=Promise.resolve():n=new Promise(s=>{this.once("cursor",s)}),n.then(()=>this.cursor.close()).then(()=>{this._closed=!0,r()}).catch(s=>{r(s)}),this};Kn.prototype.next=async function(){if(typeof arguments[0]=="function")throw new vf("AggregationCursor.prototype.next() no longer accepts a callback");return new Promise((e,r)=>{hb(this,(n,s)=>{if(n!=null)return r(n);e(s)})})};Kn.prototype.eachAsync=function(t,e){if(typeof arguments[2]=="function")throw new vf("AggregationCursor.prototype.eachAsync() no longer accepts a callback");let r=this;return typeof e=="function"&&(e={}),e=e||{},V7e(function(n){return hb(r,n)},t,e)};Symbol.asyncIterator!=null&&(Kn.prototype[Symbol.asyncIterator]=function(){return this.transformNull()._transformForAsyncIterator()});Kn.prototype._transformForAsyncIterator=function(){return this._transforms.indexOf(HQ)===-1&&this.map(HQ),this};Kn.prototype.transformNull=function(t){return arguments.length===0&&(t=!0),this._mongooseOptions.transformNull=t,this};function HQ(t){return t==null?{done:!0}:{value:t,done:!1}}Kn.prototype.addCursorFlag=function(t,e){let r=this;return G7e(this,function(){r.cursor.addCursorFlag(t,e)}),this};function G7e(t,e){if(t.cursor)return e();t.once("cursor",function(){e()})}function hb(t,e){let r=e;if(t._transforms.length&&(r=function(n,s){if(n||s===null&&!t._mongooseOptions.transformNull)return e(n,s);e(n,t._transforms.reduce(function(i,o){return o(i)},s))}),t._error)return W7e(function(){r(t._error)});if(t.cursor)return t.cursor.next().then(n=>{if(!n)return r(null,null);r(null,n)},n=>r(n));t.once("error",e),t.once("cursor",function(){hb(t,e)})}YQ.exports=Kn});var j5=m((Sje,XQ)=>{"use strict";XQ.exports=function(e,r,n){let s=r?.discriminatorMapping;if(n=n||"",s&&!s.isRoot){let i=e,o=(n.length>0?n+".":n)+s.key,a=s.value;if(i[0]!=null&&i[0].$match&&(i[0].$match[o]===void 0||i[0].$match[o]===a))i[0].$match[o]=a;else if(i[0]?.$geoNear)i[0].$geoNear.query=i[0].$geoNear.query||{},i[0].$geoNear.query[o]=a;else if(i[0]?.$search)if(i[1]?.$match!=null)i[1].$match[o]=i[1].$match[o]||a;else{let u={};u[o]=a,i.splice(1,0,{$match:u})}else{let u={};u[o]=a,i.unshift({$match:u})}}}});var eX=m((Aje,ZQ)=>{"use strict";ZQ.exports=function t(e){if(Array.isArray(e))for(let r of e){if(r==null)continue;let n=r.$group||r.$bucket||r.$bucketAuto;if(n!=null)for(let i of Object.keys(n))J7e(n[i]);let s=Object.keys(r)[0];if(s&&typeof r[s]=="object"){let i=r[s];for(let o of Object.keys(i))i[o]!=null&&i[o].$function!=null&&typeof i[o].$function.body=="function"&&(i[o].$function.body=i[o].$function.body.toString())}if(r.$facet!=null)for(let i of Object.keys(r.$facet))t(r.$facet[i])}};function J7e(t){if(!(t==null||t.$accumulator==null))for(let e of["init","accumulate","merge","finalize"])typeof t.$accumulator[e]=="function"&&(t.$accumulator[e]=String(t.$accumulator[e]))}});var U5=m((Oje,iX)=>{"use strict";var nX=QQ(),kc=we(),sX=db(),{applyGlobalMaxTimeMS:Y7e,applyGlobalDiskUse:Q7e}=E5(),X7e=vt(),Z7e=bn(),L5=j5(),e5e=eX(),tX=ae(),{modelSymbol:t5e}=te(),r5e=sX.prototype.read,n5e=sX.prototype.readConcern,rX=new Set(["$$DESCEND","$$PRUNE","$$KEEP"]);function Te(t,e){this._pipeline=[],e==null||e[t5e]?this._model=e:this._connection=e,this.options={},arguments.length===1&&Array.isArray(t)&&this.append.apply(this,t)}Te.prototype.options;Te.prototype._optionsForExec=function(){let t=this.options||{},e=this.model()?.db?.base.transactionAsyncLocalStorage?.getStore();return!Object.hasOwn(t,"session")&&e?.session!=null&&(t.session=e.session),t};Te.prototype.model=function(t){return arguments.length===0?this._model:(this._model=t,t.schema!=null&&(this.options.readPreference==null&&t.schema.options.read!=null&&(this.options.readPreference=t.schema.options.read),this.options.collation==null&&t.schema.options.collation!=null&&(this.options.collation=t.schema.options.collation)),t)};Te.prototype.append=function(){let t=arguments.length===1&&Array.isArray(arguments[0])?arguments[0]:[...arguments];if(!t.every(s5e))throw new Error("Arguments must be aggregate pipeline operators");return this._pipeline=this._pipeline.concat(t),this};Te.prototype.addFields=function(t){if(typeof t!="object"||t===null||Array.isArray(t))throw new Error("Invalid addFields() argument. Must be an object");return this.append({$addFields:Object.assign({},t)})};Te.prototype.project=function(t){let e={};if(typeof t=="object"&&!Array.isArray(t))Object.keys(t).forEach(function(r){e[r]=t[r]});else if(arguments.length===1&&typeof t=="string")t.split(/\s+/).forEach(function(r){if(!r)return;let n=r[0]==="-"?0:1;n===0&&(r=r.substring(1)),e[r]=n});else throw new Error("Invalid project() argument. Must be string or object");return this.append({$project:e})};Te.prototype.near=function(t){if(t==null)throw new kc("Aggregate `near()` must be called with non-nullish argument");if(t.near==null)throw new kc("Aggregate `near()` argument must have a `near` property");let e=Array.isArray(t.near)?t.near:t.near.coordinates;if(typeof t.near=="object"&&(!Array.isArray(e)||e.length<2||e.find(n=>typeof n!="number")))throw new kc(`Aggregate \`near()\` argument has invalid coordinates, got "${e}"`);let r={};return r.$geoNear=t,this.append(r)};"group match skip limit out densify fill".split(" ").forEach(function(t){Te.prototype[t]=function(e){let r={};return r["$"+t]=e,this.append(r)}});Te.prototype.unwind=function(){let t=[...arguments],e=[];for(let r of t)if(r&&typeof r=="object")e.push({$unwind:r});else if(typeof r=="string")e.push({$unwind:r[0]==="$"?r:"$"+r});else throw new Error('Invalid arg "'+r+'" to unwind(), must be string or object');return this.append.apply(this,e)};Te.prototype.replaceRoot=function(t){let e;return typeof t=="string"?e=t.startsWith("$")?t:"$"+t:e=t,this.append({$replaceRoot:{newRoot:e}})};Te.prototype.count=function(t){return this.append({$count:t})};Te.prototype.sortByCount=function(t){if(t&&typeof t=="object")return this.append({$sortByCount:t});if(typeof t=="string")return this.append({$sortByCount:t[0]==="$"?t:"$"+t});throw new TypeError('Invalid arg "'+t+'" to sortByCount(), must be string or object')};Te.prototype.lookup=function(t){return this.append({$lookup:t})};Te.prototype.graphLookup=function(t){let e={};if(t){if(!tX.isObject(t))throw new TypeError("Invalid graphLookup() argument. Must be an object.");tX.mergeClone(e,t);let r=e.startWith;r&&typeof r=="string"&&(e.startWith=e.startWith.startsWith("$")?e.startWith:"$"+e.startWith)}return this.append({$graphLookup:e})};Te.prototype.sample=function(t){return this.append({$sample:{size:t}})};Te.prototype.sort=function(t){let e={};if(Z7e(t)==="Object"){let r=["desc","descending",-1];Object.keys(t).forEach(function(n){if(t[n]instanceof Object&&t[n].$meta){e[n]=t[n];return}e[n]=r.indexOf(t[n])===-1?1:-1})}else if(arguments.length===1&&typeof t=="string")t.split(/\s+/).forEach(function(r){if(!r)return;let n=r[0]==="-"?-1:1;n===-1&&(r=r.substring(1)),e[r]=n});else throw new TypeError("Invalid sort() argument. Must be a string or object.");return this.append({$sort:e})};Te.prototype.unionWith=function(t){return this.append({$unionWith:t})};Te.prototype.read=function(t,e){return r5e.call(this,t,e),this};Te.prototype.readConcern=function(t){return n5e.call(this,t),this};Te.prototype.redact=function(t,e,r){if(arguments.length===3){if(typeof e=="string"&&!rX.has(e)||typeof r=="string"&&!rX.has(r))throw new Error("If thenExpr or elseExpr is string, it must be either $$DESCEND, $$PRUNE or $$KEEP");t={$cond:{if:t,then:e,else:r}}}else if(arguments.length!==1)throw new TypeError("Invalid arguments");return this.append({$redact:t})};Te.prototype.explain=async function(e){if(typeof e=="function"||typeof arguments[1]=="function")throw new kc("Aggregate.prototype.explain() no longer accepts a callback");let r=this._model;if(!this._pipeline.length)throw new Error("Aggregate has empty pipeline");L5(this._pipeline,this._model.schema);try{await r.hooks.execPre("aggregate",this)}catch(i){return await r.hooks.execPost("aggregate",this,[null],{error:i})}let n=r.collection.aggregate(this._pipeline,this.options);e==null&&(e=!0);let s=null;try{s=await n.explain(e)}catch(i){return await r.hooks.execPost("aggregate",this,[null],{error:i})}return await r.hooks.execPost("aggregate",this,[s],{error:null}),s};Te.prototype.allowDiskUse=function(t){return this.options.allowDiskUse=t,this};Te.prototype.hint=function(t){return this.options.hint=t,this};Te.prototype.session=function(t){return t==null?delete this.options.session:this.options.session=t,this};Te.prototype.option=function(t){for(let e in t)this.options[e]=t[e];return this};Te.prototype.cursor=function(t){return this._optionsForExec(),this.options.cursor=t||{},new nX(this)};Te.prototype.collation=function(t){return this.options.collation=t,this};Te.prototype.facet=function(t){return this.append({$facet:t})};Te.prototype.search=function(t){return this.append({$search:t})};Te.prototype.pipeline=function(){return this._pipeline};Te.prototype.exec=async function(){if(!this._model&&!this._connection)throw new Error("Aggregate not bound to any Model");if(typeof arguments[0]=="function")throw new kc("Aggregate.prototype.exec() no longer accepts a callback");if(this._connection){if(!this._pipeline.length)throw new kc("Aggregate has empty pipeline");return this._optionsForExec(),await(await this._connection.client.db().aggregate(this._pipeline,this.options)).toArray()}let e=this._model,r=this._model.collection;if(Y7e(this.options,e.db.options,e.base.options),Q7e(this.options,e.db.options,e.base.options),this._optionsForExec(),this.options?.cursor)return new nX(this);L5(this._pipeline,this._model.schema),e5e(this._pipeline);try{await e.hooks.execPre("aggregate",this)}catch(i){return await e.hooks.execPost("aggregate",this,[null],{error:i})}if(!this._pipeline.length)throw new kc("Aggregate has empty pipeline");let n=X7e(this.options||{}),s;try{s=await(await r.aggregate(this._pipeline,n)).toArray()}catch(i){return await e.hooks.execPost("aggregate",this,[null],{error:i})}return await e.hooks.execPost("aggregate",this,[s],{error:null}),s};Te.prototype.then=function(t,e){return this.exec().then(t,e)};Te.prototype.catch=function(t){return this.exec().then(null,t)};Te.prototype.finally=function(t){return this.exec().finally(t)};Te.prototype[Symbol.asyncIterator]=function(){return this.cursor({useMongooseAggCursor:!0}).transformNull()._transformForAsyncIterator()};function s5e(t){if(typeof t!="object"||t===null)return!1;let e=Object.keys(t);return e.length===1&&e[0][0]==="$"}Te._prepareDiscriminatorPipeline=L5;iX.exports=Te});var aX=m((Cje,oX)=>{"use strict";var i5e=vt(),fb=class{constructor(e){e!=null&&Object.assign(this,i5e(e))}};fb.prototype.__subdocs=null;oX.exports=fb});var cX=m((vje,uX)=>{"use strict";uX.exports=function t(e,r){let n=Object.keys(r.paths),s=n.length;for(let i=0;i<s;++i){let o="",a=n[i],u=r.paths[a],c=u.splitPath(),l=c.length,p=e;for(let d=0;d<l&&p!=null;++d){let h=c[d];if(o+=(o.length?".":"")+h,d===l-1){if(typeof p[h]<"u"){u.$isSingleNested?t(p[h],u.schema):u.$isMongooseDocumentArray&&Array.isArray(p[h])&&p[h].forEach(y=>t(y,u.schema));break}let f=u.getDefault(e,!1,{skipCast:!0});typeof f<"u"&&(p[h]=f,u.$isSingleNested?t(f,u.schema):u.$isMongooseDocumentArray&&Array.isArray(f)&&f.forEach(y=>t(y,u.schema)))}else p[h]==null&&(p[h]={}),p=p[h]}}}});var W5=m((xje,lX)=>{"use strict";lX.exports=V5;function V5(t,e=new WeakSet,r=!1){if(!e.has(t)){e.add(t);for(let n of Object.keys(t.paths)){let s=t.paths[n];if(s.schema&&(V5(s.schema,e),!!s.schema._applyDiscriminators&&!(s._appliedDiscriminators&&!r))){for(let i of s.schema._applyDiscriminators.keys()){let{schema:o,options:a}=s.schema._applyDiscriminators.get(i);V5(o,e),s.discriminator(i,o,r?{...a,overwriteExisting:!0}:a)}s._appliedDiscriminators=!0}}}}});var dX=m((Tje,pX)=>{"use strict";pX.exports=xf;xf.middlewareFunctions=["deleteOne","remove","save","updateOne","validate","init"];var o5e=new Set(xf.middlewareFunctions.flatMap(t=>[t,`$__${t}`]));function xf(t,e,r){r=r||{};let n={useErrorHandlers:!0,numCallbackParams:1,nullResultByDefault:!0,contextParameter:!0},s=r.decorateDoc?t:t.prototype;t.$appliedHooks=!0;for(let u of Object.keys(e.paths)){let c=e.paths[u],l=null,p=z5(c);if(p)l=p.childModel,c=p.type;else continue;if(!l.$appliedHooks&&(xf(l,c.schema,{...r,decorateDoc:!1,isChildSchema:!0}),l.discriminators!=null)){let d=Object.keys(l.discriminators);for(let h of d)xf(l.discriminators[h],l.discriminators[h].schema,r)}}let i=e._getDocumentMiddleware();t._middleware=i,s.$__init=i.createWrapperSync("init",s.$__init,null,n);let o=Object.keys(e.methods),a=Object.assign({},n,{checkForPromise:!0});for(let u of o){if(o5e.has(u)||!i.hasHooks(u))continue;let c=s[u];s[`$__${u}`]=s[u],s[u]=i.createWrapper(u,c,null,a)}}function z5(t){if(t.$isSingleNested||t.$isMongooseDocumentArray)return{childModel:t.Constructor,type:t};if(t.instance==="Array"){let e=t.getEmbeddedSchemaType();if(e)return z5(e)}if(t.instance==="Map"){let e=t.getEmbeddedSchemaType();if(e)return z5(e)}return null}});var fX=m((Dje,hX)=>{"use strict";var a5e=Rt(),u5e=ae();hX.exports=function t(e,r){let n=K5();function s(i,o){Object.defineProperty(e.prototype,i,{get:function(){let a={};for(let u in o.methods[i])a[u]=o.methods[i][u].bind(this);return a},configurable:!0})}for(let i of Object.keys(r.methods)){let o=r.methods[i];if(Object.hasOwn(r.tree,i))throw new Error('You have a method and a property in your schema both named "'+i+'"');if(typeof o=="function"&&n.prototype[i]===o){delete r.methods[i];continue}r.reserved[i]&&!a5e(r,`methodOptions.${i}.suppressWarning`,!1)&&u5e.warn(`mongoose: the method name "${i}" is used by mongoose internally, overwriting it may cause bugs. If you're sure you know what you're doing, you can suppress this error by using \`schema.method('${i}', fn, { suppressWarning: true })\`.`),typeof o=="function"?e.prototype[i]=o:s(i,r)}e.$appliedMethods=!0;for(let i of Object.keys(r.paths)){let o=r.paths[i];o.$isSingleNested&&!o.Constructor.$appliedMethods&&t(o.Constructor,o.schema),o.$isMongooseDocumentArray&&!o.Constructor.$appliedMethods&&t(o.Constructor,o.schema)}}});var gX=m((Mje,yX)=>{"use strict";var mX=J8(),c5e=Hp(),l5e=ob(),gb=ae().isPOJO;yX.exports=function(e,r,n){if(r==null||e==null)return e;let s=null;return l5e(r)?s=!1:c5e(r)&&(s=!0),s==null?e:s?(n=n||mX(r),mb(e,r,n)):(n=n||mX(r),yb(e,r,n))};function mb(t,e,r,n,s){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(o=>mb(o,e,r,n,s));let i={...t};n=s?n||{}:e;for(let o of Object.keys(i)){let a=s?s+"."+o:o;Object.hasOwn(e,a)||Object.hasOwn(n,o)?gb(e[a])||gb(n[o])?i[o]=mb(i[o],e,r,n[o],a):delete i[o]:r[a]&&(i[o]=mb(i[o],e,r,n[o],a))}return i}function yb(t,e,r,n,s){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(o=>yb(o,e,r,n,s));let i={...t};n=s?n||{}:e;for(let o of Object.keys(i)){let a=s?s+"."+o:o;if(Object.hasOwn(e,a)||Object.hasOwn(n,o)){(gb(e[a])||gb(n[o]))&&(i[o]=yb(i[o],e,r,n[o],a));continue}else r[a]?i[o]=yb(i[o],e,r,n[o],a):delete i[o]}return i}});var EX=m((Pje,_X)=>{"use strict";_X.exports=function(e){let r=!1;for(let n of Object.keys(e))e[n]==="text"&&(r=!0);return r}});var wX=m((Bje,bX)=>{"use strict";var p5e=EX();bX.exports=function(e,r,n){p5e(e)||Object.hasOwn(n,"collation")&&!Object.hasOwn(r,"collation")&&(r.collation=n.collation)}});var AX=m((Ije,SX)=>{"use strict";var{queryMiddlewareFunctions:d5e,aggregateMiddlewareFunctions:h5e,modelMiddlewareFunctions:f5e,documentMiddlewareFunctions:m5e}=Hh(),y5e=Array.from(new Set([...d5e,...h5e,...f5e,...m5e]));SX.exports=function(e,r,n){r=r.filter(s=>y5e.indexOf(s.name)!==-1?!!s.model:s.model!==!1);for(let s of Object.keys(n))if(r.hasHooks(s)){let i=e[s];e[s]=r.createWrapper(s,i)}}});var CX=m((Nje,OX)=>{"use strict";OX.exports=function(e,r){for(let n in r.statics)e[n]=r.statics[n]}});var MX=m((kje,DX)=>{"use strict";var vX=pE(),g5e=fs(),_5e=ae();DX.exports=xX;function xX(t,e,r){return e==null?e:(E5e(t,e,r),TX(t,e,r))}function E5e(t,e,r){for(let n of t.childSchemas){let s=n.model.path,i=n.schema;if(!s)continue;let o=g5e.get(s,e);o==null||Array.isArray(o)&&o.flat(1/0).length===0||xX(i,o,r)}}function TX(t,e,r){if(e==null||typeof e!="object")return;if(Array.isArray(e)){for(let a of e)TX(t,a,r);return}if(t.discriminators&&_5e.hasOwnKeys(t.discriminators))for(let a of Object.keys(t.discriminators)){let u=t.discriminators[a],c=u.discriminatorMapping.key,l=u.discriminatorMapping.value;if(e[c]==l){t=u;break}}let n=vX(t.options.timestamps,"createdAt"),s=vX(t.options.timestamps,"updatedAt"),i=r?.currentTime,o=null;i!=null?o=i():t.base?.now?o=t.base.now():o=new Date,n&&e[n]==null&&!r?.isUpdate&&(e[n]=o),s&&(e[s]=o)}});var IX=m((Rje,BX)=>{"use strict";var b5e=fs(),w5e=ae();BX.exports=PX;function PX(t,e,r){if(e==null)return e;let n=r,s=null;if(Array.isArray(r)){n=[],s=[];for(let i of r)i.length===1?s.push(i[0]):n.push(i)}return S5e(t,e,n),H5(t,e,s)}function S5e(t,e,r){let n=!1;for(let s of t.childSchemas){let i=s.model.path,o=s.schema;if(!i)continue;let a=b5e.get(i,e);if(a==null||Array.isArray(a)&&a.flat(1/0).length===0)continue;let u=null;if(Array.isArray(r)){u=[];for(let c of r)c[0]==i&&u.push(c.slice(1));if(u.length===0)continue}PX(o,a,u),n=!0}r?.length&&!n&&H5(t,e,r)}function H5(t,e,r){if(!(e==null||typeof e!="object")){if(Array.isArray(e)){for(let n of e)H5(t,n,r);return}if(t.discriminators&&w5e.hasOwnKeys(t.discriminators))for(let n of Object.keys(t.discriminators)){let s=t.discriminators[n],i=s.discriminatorMapping.key,o=s.discriminatorMapping.value;if(e[i]==o){t=s;break}}r==null&&(r=Object.keys(t.virtuals));for(let n of r){if(t.virtuals[n]==null)continue;let s=t.virtuals[n],i=Array.isArray(n)?n:n.indexOf(".")===-1?[n]:n.split("."),o=e;for(let c=0;c<i.length-1;++c)o[i[c]]=i[c]in o?o[i[c]]:{},o=o[i[c]];let a=s.applyGetters(o[i[i.length-1]],e);(s.options?.ref||s.options?.refPath)&&a===void 0&&(s.options.justOne?a=null:a=[]),o[i[i.length-1]]=a}}}});var _b=m((Fje,NX)=>{"use strict";NX.exports=function t(e){return this instanceof t?(this.val=e,this):new t(e)}});var Tf=m(($je,kX)=>{"use strict";kX.exports=new WeakMap});var qX=m((qje,$X)=>{"use strict";var A5e=vt(),RX=Tf(),O5e=te().modelSymbol,C5e=ae();$X.exports=FX;var Eb=Symbol("mongoose#assignRawDocsToIdStructure#hasArray");function FX(t,e,r,n,s){let i=[],o=n.isVirtual&&n.justOne&&t.length>1?!1:n.sort&&t.length>1,a=n.$nullIfNotFound,u,c,l;C5e.isMongooseArray(t)&&(t=t.__array);let p=0,d=t.length;if(o&&s&&n[Eb]===void 0){n[Eb]=!1;for(let h in r)if(Array.isArray(r[h])){n[Eb]=!0;break}}for(p=0;p<d;++p){if(l=t[p],Array.isArray(l)){FX(l,e,r,n,!0),i.push(l);continue}if(l===null&&o===!1){i.push(l);continue}if(c=String(l),u=e[c],n.clone&&u!=null)if(n.lean){let h=RX.get(u);u=A5e(u),RX.set(u,h)}else u=u.constructor.hydrate(u._doc);if(s)if(u)if(o){let h=r[c];n[Eb]?i.push(u):i[h]=u}else i.push(u);else l?.[O5e]!=null?i.push(l):i.push(n.retainNullValues||a?null:l);else i[p]=u||null}t.length=0,i.length&&i.forEach(function(h,f){t[f]=h})}});var G5=m((jje,jX)=>{"use strict";jX.exports=bb;function bb(t,e){if(t.virtuals[e])return{virtual:t.virtuals[e],path:void 0};let r=e.split("."),n="",s="";for(let i=0;i<r.length;++i){if(n+=(n.length>0?".":"")+r[i],t.virtuals[n]){if(i===r.length-1)return{virtual:t.virtuals[n],path:s};continue}if(!t.nested[n]){if(t.paths[n]&&t.paths[n].schema){t=t.paths[n].schema;let o=r.slice(i+1).join(".");if(t.virtuals[o]){if(i===r.length-2)return{virtual:t.virtuals[o],nestedSchemaPath:[s,n].filter(a=>!!a).join(".")};continue}if(i+1<r.length&&t.discriminators)for(let a of Object.keys(t.discriminators)){let u=bb(t.discriminators[a],o);if(u!=null){let c=[s,n,u.nestedSchemaPath].filter(l=>!!l).join(".");return{virtual:u.virtual,nestedSchemaPath:c}}}s+=(s.length>0?".":"")+n,n="";continue}else if(t.paths[n]?.$isSchemaMap&&t.paths[n].$__schemaType?.schema){t=t.paths[n].$__schemaType.schema,++i;let o=r.slice(i+1).join(".");if(t.virtuals[o]){if(i===r.length-2)return{virtual:t.virtuals[o],nestedSchemaPath:[s,n,"$*"].filter(a=>!!a).join(".")};continue}if(i+1<r.length&&t.discriminators)for(let a of Object.keys(t.discriminators)){let u=bb(t.discriminators[a],o);if(u!=null){let c=[s,n,u.nestedSchemaPath,"$*"].filter(l=>!!l).join(".");return{virtual:u.virtual,nestedSchemaPath:c}}}s+=(s.length>0?".":"")+"$*"+n,n=""}if(t.discriminators)for(let o of Object.keys(t.discriminators)){let a=bb(t.discriminators[o],e);if(a)return a}return null}}}});var UX=m((wb,LX)=>{(function(t,e){typeof wb=="object"&&typeof LX<"u"?e(wb):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.sift={}))})(wb,(function(t){"use strict";var e=function(S,C){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,N){T.__proto__=N}||function(T,N){for(var K in N)Object.prototype.hasOwnProperty.call(N,K)&&(T[K]=N[K])},e(S,C)};function r(S,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");e(S,C);function T(){this.constructor=S}S.prototype=C===null?Object.create(C):(T.prototype=C.prototype,new T)}typeof SuppressedError=="function"&&SuppressedError;var n=function(S){var C="[object "+S+"]";return function(T){return s(T)===C}},s=function(S){return Object.prototype.toString.call(S)},i=function(S){return S instanceof Date?S.getTime():a(S)?S.map(i):S&&typeof S.toJSON=="function"?S.toJSON():S},o=function(S){return S??null},a=n("Array"),u=n("Object"),c=n("Function"),l=function(S,C){return S.hasOwnProperty(C)&&!c(S[C])},p=function(S){return S&&(S.constructor===Object||S.constructor===Array||S.constructor.toString()==="function Object() { [native code] }"||S.constructor.toString()==="function Array() { [native code] }")&&!S.toJSON},d=function(S,C){if(S==null&&S==C||S===C)return!0;if(Object.prototype.toString.call(S)!==Object.prototype.toString.call(C))return!1;if(a(S)){if(S.length!==C.length)return!1;for(var T=0,N=S.length;T<N;T++)if(!d(S[T],C[T]))return!1;return!0}else if(u(S)){if(Object.keys(S).length!==Object.keys(C).length)return!1;for(var K in S)if(!d(S[K],C[K]))return!1;return!0}return!1},h=function(S,C,T,N,K,re){var me=C[N];if(a(S)&&isNaN(Number(me))&&!l(S,me)){for(var De=0,zr=S.length;De<zr;De++)if(!h(S[De],C,T,N,De,S))return!1}return N===C.length||S==null?T(S,K,re,N===0,N===C.length):h(S[me],C,T,N+1,me,S)},f=(function(){function S(C,T,N,K){this.params=C,this.owneryQuery=T,this.options=N,this.name=K,this.init()}return S.prototype.init=function(){},S.prototype.reset=function(){this.done=!1,this.keep=!1},S})(),y=(function(S){r(C,S);function C(T,N,K,re){var me=S.call(this,T,N,K)||this;return me.children=re,me}return C.prototype.reset=function(){this.keep=!1,this.done=!1;for(var T=0,N=this.children.length;T<N;T++)this.children[T].reset()},C.prototype.childrenNext=function(T,N,K,re,me){for(var De=!0,zr=!0,Hn=0,Di=this.children.length;Hn<Di;Hn++){var pu=this.children[Hn];if(pu.done||pu.next(T,N,K,re,me),pu.keep||(zr=!1),pu.done){if(!pu.keep)break}else De=!1}this.done=De,this.keep=zr},C})(f),g=(function(S){r(C,S);function C(T,N,K,re,me){var De=S.call(this,T,N,K,re)||this;return De.name=me,De}return C})(y),_=(function(S){r(C,S);function C(){var T=S!==null&&S.apply(this,arguments)||this;return T.propop=!0,T}return C.prototype.next=function(T,N,K,re){this.childrenNext(T,N,K,re)},C})(y),w=(function(S){r(C,S);function C(T,N,K,re,me){var De=S.call(this,N,K,re,me)||this;return De.keyPath=T,De.propop=!0,De._nextNestedValue=function(zr,Hn,Di,pu,Uee){return De.childrenNext(zr,Hn,Di,pu,Uee),!De.done},De}return C.prototype.next=function(T,N,K){h(T,this.keyPath,this._nextNestedValue,0,N,K)},C})(y),O=function(S,C){if(S instanceof Function)return S;if(S instanceof RegExp)return function(N){var K=typeof N=="string"&&S.test(N);return S.lastIndex=0,K};var T=i(S);return function(N){return C(T,i(N))}},E=(function(S){r(C,S);function C(){var T=S!==null&&S.apply(this,arguments)||this;return T.propop=!0,T}return C.prototype.init=function(){this._test=O(this.params,this.options.compare)},C.prototype.next=function(T,N,K){(!Array.isArray(K)||K.hasOwnProperty(N))&&this._test(T,N,K)&&(this.done=!0,this.keep=!0)},C})(f),A=function(S,C,T){return new E(S,C,T)},x=function(S){return function(C,T,N,K){return S(C,T,N,K)}},v=function(S){return x(function(C,T,N,K){var re=typeof i(C),me=S(C);return new E(function(De){var zr=o(De);return typeof i(zr)===re&&me(zr)},T,N,K)})},R=function(S,C,T,N){var K=N.operations[S];return K||M(S),K(C,T,N,S)},M=function(S){throw new Error("Unsupported operation: ".concat(S))},I=function(S,C){for(var T in S)if(C.operations.hasOwnProperty(T)||T.charAt(0)==="$")return!0;return!1},j=function(S,C,T,N,K){if(I(C,K)){var re=oe(C,T,K),me=re[0],De=re[1];if(De.length)throw new Error("Property queries must contain only operations, or exact objects.");return new w(S,C,N,K,me)}return new w(S,C,N,K,[new E(C,N,K)])},U=function(S,C,T){C===void 0&&(C=null);var N=T===void 0?{}:T,K=N.compare,re=N.operations,me={compare:K||d,operations:Object.assign({},re||{})},De=oe(S,null,me),zr=De[0],Hn=De[1],Di=[];return zr.length&&Di.push(new w([],S,C,me,zr)),Di.push.apply(Di,Hn),Di.length===1?Di[0]:new _(S,C,me,Di)},oe=function(S,C,T){var N=[],K=[];if(!p(S))return N.push(new E(S,S,T)),[N,K];for(var re in S)if(T.operations.hasOwnProperty(re)){var me=R(re,S[re],S,T);if(me&&!me.propop&&C&&!T.operations[C])throw new Error("Malformed query. ".concat(re," cannot be matched against property."));me!=null&&N.push(me)}else re.charAt(0)==="$"?M(re):K.push(j(re.split("."),S[re],re,S,T));return[N,K]},Q=function(S){return function(C,T,N){return S.reset(),S.next(C,T,N),S.keep}},un=function(S,C){return C===void 0&&(C={}),Q(U(S,null,C))},Vr=(function(S){r(C,S);function C(){var T=S!==null&&S.apply(this,arguments)||this;return T.propop=!0,T}return C.prototype.init=function(){this._test=O(this.params,this.options.compare)},C.prototype.reset=function(){S.prototype.reset.call(this),this.keep=!0},C.prototype.next=function(T){this._test(T)&&(this.done=!0,this.keep=!1)},C})(f),lu=(function(S){r(C,S);function C(){var T=S!==null&&S.apply(this,arguments)||this;return T.propop=!0,T}return C.prototype.init=function(){if(!this.params||typeof this.params!="object")throw new Error("Malformed query. $elemMatch must by an object.");this._queryOperation=U(this.params,this.owneryQuery,this.options)},C.prototype.reset=function(){S.prototype.reset.call(this),this._queryOperation.reset()},C.prototype.next=function(T){if(a(T)){for(var N=0,K=T.length;N<K;N++){this._queryOperation.reset();var re=T[N];this._queryOperation.next(re,N,T,!1),this.keep=this.keep||this._queryOperation.keep}this.done=!0}else this.done=!1,this.keep=!1},C})(f),dt=(function(S){r(C,S);function C(){var T=S!==null&&S.apply(this,arguments)||this;return T.propop=!0,T}return C.prototype.init=function(){this._queryOperation=U(this.params,this.owneryQuery,this.options)},C.prototype.reset=function(){S.prototype.reset.call(this),this._queryOperation.reset()},C.prototype.next=function(T,N,K,re){this._queryOperation.next(T,N,K,re),this.done=this._queryOperation.done,this.keep=!this._queryOperation.keep},C})(f),rr=(function(S){r(C,S);function C(){var T=S!==null&&S.apply(this,arguments)||this;return T.propop=!0,T}return C.prototype.init=function(){},C.prototype.next=function(T){a(T)&&T.length===this.params&&(this.done=!0,this.keep=!0)},C})(f),An=function(S){if(S.length===0)throw new Error("$and/$or/$nor must be a nonempty array")},Wr=(function(S){r(C,S);function C(){var T=S!==null&&S.apply(this,arguments)||this;return T.propop=!1,T}return C.prototype.init=function(){var T=this;An(this.params),this._ops=this.params.map(function(N){return U(N,null,T.options)})},C.prototype.reset=function(){this.done=!1,this.keep=!1;for(var T=0,N=this._ops.length;T<N;T++)this._ops[T].reset()},C.prototype.next=function(T,N,K){for(var re=!1,me=!1,De=0,zr=this._ops.length;De<zr;De++){var Hn=this._ops[De];if(Hn.next(T,N,K),Hn.keep){re=!0,me=Hn.keep;break}}this.keep=me,this.done=re},C})(f),so=(function(S){r(C,S);function C(){var T=S!==null&&S.apply(this,arguments)||this;return T.propop=!1,T}return C.prototype.next=function(T,N,K){S.prototype.next.call(this,T,N,K),this.keep=!this.keep},C})(Wr),wT=(function(S){r(C,S);function C(){var T=S!==null&&S.apply(this,arguments)||this;return T.propop=!0,T}return C.prototype.init=function(){var T=this,N=Array.isArray(this.params)?this.params:[this.params];this._testers=N.map(function(K){if(I(K,T.options))throw new Error("cannot nest $ under ".concat(T.name.toLowerCase()));return O(K,T.options.compare)})},C.prototype.next=function(T,N,K){for(var re=!1,me=!1,De=0,zr=this._testers.length;De<zr;De++){var Hn=this._testers[De];if(Hn(T)){re=!0,me=!0;break}}this.keep=me,this.done=re},C})(f),Ree=(function(S){r(C,S);function C(T,N,K,re){var me=S.call(this,T,N,K,re)||this;return me.propop=!0,me._in=new wT(T,N,K,re),me}return C.prototype.next=function(T,N,K,re){this._in.next(T,N,K),a(K)&&!re?this._in.keep?(this.keep=!1,this.done=!0):N==K.length-1&&(this.keep=!0,this.done=!0):(this.keep=!this._in.keep,this.done=!0)},C.prototype.reset=function(){S.prototype.reset.call(this),this._in.reset()},C})(f),Fee=(function(S){r(C,S);function C(){var T=S!==null&&S.apply(this,arguments)||this;return T.propop=!0,T}return C.prototype.next=function(T,N,K,re,me){me?K.hasOwnProperty(N)===this.params&&(this.done=!0,this.keep=!0):(this.done=!0,this.keep=!this.params)},C})(f),$ee=(function(S){r(C,S);function C(T,N,K,re){var me=S.call(this,T,N,K,T.map(function(De){return U(De,N,K)}),re)||this;return me.propop=!1,An(T),me}return C.prototype.next=function(T,N,K,re){this.childrenNext(T,N,K,re)},C})(g),qee=(function(S){r(C,S);function C(T,N,K,re){var me=S.call(this,T,N,K,T.map(function(De){return U(De,N,K)}),re)||this;return me.propop=!0,me}return C.prototype.next=function(T,N,K,re){this.childrenNext(T,N,K,re)},C})(g),ST=function(S,C,T){return new E(S,C,T)},AT=function(S,C,T,N){return new Vr(S,C,T,N)},OT=function(S,C,T,N){return new Wr(S,C,T,N)},CT=function(S,C,T,N){return new so(S,C,T,N)},vT=function(S,C,T,N){return new lu(S,C,T,N)},xT=function(S,C,T,N){return new Ree(S,C,T,N)},TT=function(S,C,T,N){return new wT(S,C,T,N)},DT=v(function(S){return function(C){return C!=null&&C<S}}),MT=v(function(S){return function(C){return C===S||C<=S}}),PT=v(function(S){return function(C){return C!=null&&C>S}}),BT=v(function(S){return function(C){return C===S||C>=S}}),IT=function(S,C,T){var N=S[0],K=S[1];return new E(function(re){return i(re)%N===K},C,T)},NT=function(S,C,T,N){return new Fee(S,C,T,N)},kT=function(S,C,T){return new E(new RegExp(S,C.$options),C,T)},RT=function(S,C,T,N){return new dt(S,C,T,N)},FT={number:function(S){return typeof S=="number"},string:function(S){return typeof S=="string"},bool:function(S){return typeof S=="boolean"},array:function(S){return Array.isArray(S)},null:function(S){return S===null},timestamp:function(S){return S instanceof Date}},$T=function(S,C,T){return new E(function(N){if(typeof S=="string"){if(!FT[S])throw new Error("Type alias does not exist");return FT[S](N)}return N!=null?N instanceof S||N.constructor===S:!1},C,T)},qT=function(S,C,T,N){return new $ee(S,C,T,N)},jT=function(S,C,T,N){return new qee(S,C,T,N)},LT=function(S,C,T){return new rr(S,C,T,"$size")},UT=function(){return null},VT=function(S,C,T){var N;if(c(S))N=S;else if(!process.env.CSP_ENABLED)N=new Function("obj","return "+S);else throw new Error('In CSP mode, sift does not support strings in "$where" condition');return new E(function(K){return N.bind(K)(K)},C,T)},jee=Object.freeze({__proto__:null,$Size:rr,$all:jT,$and:qT,$elemMatch:vT,$eq:ST,$exists:NT,$gt:PT,$gte:BT,$in:TT,$lt:DT,$lte:MT,$mod:IT,$ne:AT,$nin:xT,$nor:CT,$not:RT,$options:UT,$or:OT,$regex:kT,$size:LT,$type:$T,$where:VT}),WT=function(S,C,T){var N=T===void 0?{}:T,K=N.compare,re=N.operations;return U(S,C,{compare:K,operations:Object.assign({},jee,re||{})})},Lee=function(S,C){C===void 0&&(C={});var T=WT(S,null,C);return Q(T)};t.$Size=rr,t.$all=jT,t.$and=qT,t.$elemMatch=vT,t.$eq=ST,t.$exists=NT,t.$gt=PT,t.$gte=BT,t.$in=TT,t.$lt=DT,t.$lte=MT,t.$mod=IT,t.$ne=AT,t.$nin=xT,t.$nor=CT,t.$not=RT,t.$options=UT,t.$or=OT,t.$regex=kT,t.$size=LT,t.$type=$T,t.$where=VT,t.EqualsOperation=E,t.createDefaultQueryOperation=WT,t.createEqualsOperation=A,t.createOperationTester=Q,t.createQueryOperation=U,t.createQueryTester=un,t.default=Lee,Object.defineProperty(t,"__esModule",{value:!0})}))});var WX=m((Lje,J5)=>{var VX=UX();J5.exports=VX.default;Object.assign(J5.exports,VX)});var YX=m((Uje,JX)=>{"use strict";var v5e=hE(),x5e=_b(),T5e=qX(),Sb=Rt(),D5e=G5(),GX=Tf(),zX=cE(),M5e=rx(),Y5=fs(),KX=WX().default,Ab=ae(),{populateModelSymbol:P5e}=te();JX.exports=function(e){let r=Object.assign({},Sb(e,"allOptions.options.options"),Sb(e,"allOptions.options")),n=Object.assign({},e.options,r,{justOne:e.justOne,isVirtual:e.isVirtual});n.$nullIfNotFound=e.isVirtual;let s=e.populatedModel,i=[].concat(e.rawIds);e.allIds=[].concat(e.allIds),T5e(e.rawIds,e.rawDocs,e.rawOrder,n);let o=e.docs,a=e.rawIds,u=e.options,c=e.count&&e.isVirtual,l,p=0;function d(h){if(++p,c)return h;if(h instanceof x5e)return h.val;if(h===void 0)return h;let f=e.allIds[l];if(e.path.endsWith(".$*"))return Df(h,u,n,f);if(e.justOne===!0&&Array.isArray(h)){let y=[];for(let g of h){let _=GX.get(g);(_==null||_===s)&&y.push(g)}for(;h.length>y.length;)Array.prototype.pop.apply(h,[]);for(let g=0;g<y.length;++g)h[g]=y[g];return Df(h[0],u,n,f)}else{if(e.justOne===!1&&!Array.isArray(h))return Df([h],u,n,f);if(e.justOne===!0&&!Array.isArray(h)&&Array.isArray(f))return Df(h,u,n,h==null?h:f[p-1])}return Df(h,u,n,f)}for(l=0;l<o.length;++l){p=0;let h=e.path.endsWith(".$*")?e.path.slice(0,-3):e.path,f=Y5.get(h,o[l],zX);if(f==null&&!D5e(e.originalModel.schema,h))continue;let y;c?y=B5e(a[l]):Array.isArray(e.match)?y=Array.isArray(a[l])?a[l].filter(A=>A==null||KX(e.match[l])(A)):[a[l]].filter(A=>A==null||KX(e.match[l])(A))[0]:y=a[l];let g=e.originalModel.schema,_=Sb(o[l],"$__",null)!=null,w=_?f instanceof Map:Ab.isPOJO(f);if(w=w&&Sb(g._getSchema(h),"$isSchemaMap"),!e.isVirtual&&w){let A=f instanceof Map?Array.from(f.keys()):Object.keys(f);y=y.reduce((x,v,R)=>(x.set(A[R],v),x),new Map)}if(_&&Array.isArray(y))for(let A of y)A?.$__!=null&&(A.$__.parent=o[l]);else _&&y?.$__!=null&&(y.$__.parent=o[l]);if(e.isVirtual&&_){o[l].$populated(h,e.justOne?i[0]:i,e.allOptions),Array.isArray(y)&&(y=y.map(A=>A??void 0)),Y5.set(h,y,o[l],function(x,v,R){return arguments.length>=3?(x[v]=R,x[v]):x instanceof Map&&v==="$*"?[...x.values()]:x[v]},d,!1);continue}let O=h.split("."),E=o[l];for(let A=0;A<O.length-1&&!(Array.isArray(E)&&!Ab.isArrayIndex(O[A])||O[A]==="$*");++A){if(E[O[A]]==null){let x=O.slice(0,A+1).join("."),v=g._getSchema(x);if(y==null&&v?.$isMongooseArray)break;E[O[A]]={}}if(E=E[O[A]],typeof E!="object")break}o[l].$__&&(e.allOptions.options[P5e]=e.allOptions.model,o[l].$populated(h,e.unpopulatedValues[l],e.allOptions.options),y?.$__!=null&&(y.$__.wasPopulated={value:e.unpopulatedValues[l]}),y instanceof Map&&!y.$isMongooseMap&&(y=new v5e(y,h,o[l],o[l].schema.path(h).$__schemaType))),Y5.set(h,y,o[l],zX,d,!1),o[l].$__&&M5e(o[l],[e.allOptions.options])}};function B5e(t){return Array.isArray(t)?t.some(e=>Array.isArray(e)||e===null)?t.map(e=>e==null?0:Array.isArray(e)?e.filter(r=>r!=null).length:1):t.filter(e=>e!=null).length:t==null?0:1}function Df(t,e,r,n){let s=typeof r.transform=="function",i=s?r.transform:o=>o;if(Array.isArray(t)){let o=[],a=t.length;for(let l=0;l<a;++l){let p=t[l],d=Array.isArray(n)?n[l]:n;if(!(!Q5(p)&&(!r.retainNullValues||p!=null)&&!s)){{if(!r.retainNullValues&&p==null)continue;s&&(p=i(Q5(p)?p:null,d))}if(HX(p,e),o.push(p),e.originalLimit&&o.length>=e.originalLimit)break}}let u=o.length;for(;t.length>u;)Array.prototype.pop.apply(t,[]);let c=0;if(Ab.isMongooseArray(t))for(c=0;c<u;++c)t.set(c,o[c],!0);else for(c=0;c<u;++c)t[c]=o[c];return t}return Q5(t)||Ab.isPOJO(t)?(HX(t,e),i(t,n)):t instanceof Map?t:r.justOne===!1?[]:t==null?i(t,n):i(null,n)}function HX(t,e){t!=null&&e.excludeId&&(typeof t.$__setValue=="function"?delete t._doc._id:delete t._id)}function Q5(t){return t==null?!1:Array.isArray(t)||t.$isMongooseMap||t.$__!=null||GX.has(t)}});var eZ=m((Vje,ZX)=>{"use strict";var I5e=_b(),N5e=sx(),{trusted:Ob}=Lp(),QX=ub();ZX.exports=function(e,r,n,s,i){let o=k5e(r);if(n.size===1){let a=Array.from(n)[0],u=s.schema.path(a);if(a!=="_id"||!o._id)e=XX(e,u,i),o[a]=Ob({$in:e});else if(a==="_id"&&o._id){let l=QX(o[a])?o[a]:{$eq:o[a]};o[a]={...Ob({$in:e}),...l}}let c=N5e(a);for(let l=0;l<c.length-1;++l){let p=c[l];if(o[p]!=null&&o[p].$elemMatch!=null){o[p].$elemMatch[a.slice(p.length+1)]=Ob({$in:e}),delete o[a];break}}}else{let a=[];Array.isArray(o.$or)?(o.$and=[{$or:o.$or},{$or:a}],delete o.$or):o.$or=a;for(let u of n)if(u!=="_id"||!o._id){let c=s.schema.path(u);e=XX(e,c,i),a.push({[u]:{$in:e}})}else if(u==="_id"&&o._id){let c=QX(o[u])?o[u]:{$eq:o[u]};o[u]={...Ob({$in:e}),...c}}}return o};function XX(t,e,r){return t=t.filter(n=>!(n instanceof I5e)),r?t.filter(n=>{try{return e.cast(n),!0}catch{return!1}}):t}function k5e(t){return Array.isArray(t)?t.length>1?{$or:[].concat(t.map(e=>Object.assign({},e)))}:Object.assign({},t[0]):Object.assign({},t)}});var rZ=m((Wje,tZ)=>{"use strict";tZ.exports=function(e,r,n){if(e.length===0)return n();let s=e.length,i=null;for(let o of e)r(o,function(a){if(i==null){if(a!=null)return i=a,n(i);if(--s<=0)return n()}})}});var oZ=m((zje,iZ)=>{"use strict";var nZ=_c(),R5e=Rt(),F5e=Us(),sZ=Tf(),w1=fs(),$5e=te().populateModelSymbol;iZ.exports=function t(e,r,n,s){let i=r.path(s),o=n;if(i)return i;let a=r.discriminatorMapping?.key;if(a&&e!=null){if(n?.[a]!=null)r=F5e(e.discriminators,n[a])?.schema||r;else if(e.discriminators!=null)return Object.keys(e.discriminators).reduce((l,p)=>{let d=e.discriminators[p];return l.concat(t(d,d.schema,null,s))},[])}function u(l,p,d,h){let f=l.length+1,y,g;for(;f--;){if(g=l.slice(0,f).join("."),y=p.path(g),y==null)continue;if(y.embeddedSchemaType||y.schema){if(y.embeddedSchemaType instanceof nZ)return y.embeddedSchemaType;let O=null;if(y.schema?.discriminators!=null){let E=y.schema.discriminators,A=g+"."+y.schema.options.discriminatorKey,x=d?w1.get(A,d)||[]:[];O=Object.keys(E).reduce(function(v,R){let M=E[R].discriminatorMapping.value;return(n==null||x.indexOf(R)!==-1||x.indexOf(M)!==-1)&&v.push(E[R]),v},[])}if(f!==l.length&&y.schema){let E;if(l[f]==="$")return f+1===l.length?y:(E=u(l.slice(f+1),p,d?w1.get(g,d):null,h.concat(l.slice(0,f))),E&&(E.$parentSchemaDocArray=E.$parentSchemaDocArray||(y.schema.$isSingleNested?null:y)),E);if(O!=null&&O.length>0){E=[];for(let A of O){let x=u(l.slice(f),A,d?w1.get(g,d):null,h.concat(l.slice(0,f)));x!=null&&(x.$parentSchemaDocArray=x.$parentSchemaDocArray||(y.schema.$isSingleNested?null:y),x.$parentSchemaDocArray&&(E.$parentSchemaDocArray=x.$parentSchemaDocArray),E.push(x))}return E}else return E=u(l.slice(f),y.schema,d?w1.get(g,d):null,h.concat(l.slice(0,f))),E&&(E.$parentSchemaDocArray=E.$parentSchemaDocArray||(y.schema.$isSingleNested?null:y)),E}else if(f!==l.length&&y.$isMongooseArray&&y.embeddedSchemaType.$isMongooseArray){let E=y;for(;E.$isMongooseArray&&!E.$isMongooseDocumentArray;)E=E.embeddedSchemaType;let A=u(l.slice(f),E.schema,null,h.concat(l.slice(0,f)));if(A!=null)return A;if(E.schema.discriminators){let x=[];for(let v of Object.keys(E.schema.discriminators)){let R=E.schema.discriminators[v]||E.schema,M=u(l.slice(f),R,null,h.concat(l.slice(0,f)));M!=null&&x.push(M)}if(x.length>0)return x}}}else if(y.$isSchemaMap&&y.$__schemaType instanceof nZ)return y.$__schemaType;let _=h.concat([g]).join(".");if(o?.$__&&o.$populated(_,!0)&&f<l.length){let O=o.$populated(_,!0).options[$5e];if(O!=null)return u(l.slice(f),O.schema,d?w1.get(g,d):null,h.concat(l.slice(0,f)))}let w=R5e(o,g);if(w!=null){let E=(Array.isArray(w)&&w.length>0?sZ.get(w[0]):sZ.get(w))?.schema??null;if(E!=null){let A=u(l.slice(f),E,d?w1.get(g,d):null,h.concat(l.slice(0,f)));if(A!=null)return A.$parentSchemaDocArray=A.$parentSchemaDocArray||(E.$isSingleNested?null:E),A}}return y}}let c=s.split(".");for(let l=0;l<c.length;++l)c[l]==="$"&&(c[l]="0");return u(c,r,n,[])}});var dZ=m((Kje,pZ)=>{"use strict";var nT=ds(),q5e=_b(),j5e=vt(),zs=Rt(),L5e=Us(),U5e=bn(),aZ=oZ(),V5e=G5(),Mf=cE(),Rc=fs(),Cb=Ix(),Or=ae(),eT=te().modelSymbol,X5=te().populateModelSymbol,tT=gc().schemaMixedSymbol,W5e=V8();pZ.exports=function(e,r,n){let s,i=r.length,o=[],a=n.model?.modelName||n.model,u,c,l,p,d={},h=e.schema;if(n._localModel!=null&&n._localModel.schema.nested[n.path])return[];let f=V5e(e.schema,n.path);if((f==null?null:f.virtual)!=null)return z5e(e,r,n,f);let g=aZ(e,h,null,n.path);if(g=Array.isArray(g)?g:[g].filter(O=>O!=null),!(n.strictPopulate===!1||n.options?.strictPopulate===!1)&&g.length===0&&n._localModel!=null)return new W5e(n._fullPath||n.path);for(let O=0;O<i;O++){s=r[O];let E=null;if(s.$__!=null&&s.populated(n.path)&&(n.forceRepopulate??s.constructor.base.options.forceRepopulate)===!1)continue;let A=s?.$__!=null?s.$__schema:h;if(u=aZ(e,A,s,n.path),u!=null&&u.$isMongooseDocumentArray&&u.options.ref==null&&u.options.refPath==null)continue;if(u?.$parentSchemaDocArray&&zs(n,"options.sort")!=null)return new nT("Cannot populate with `sort` on path "+n.path+" because it is a subproperty of a document array");l=null;let v=!1,R=null,M=null,I=null;if(u?.instance==="Embedded"){if(u.options.ref){let dt={localField:n.path+"._id",foreignField:"_id",justOne:!0},rr=w(s,u,a,e),An=Rc.get(n.path,s),Wr=Rc.get("_id",An);rT(e,o,d,rr.modelNames,n,dt,Wr,s,M,An)}continue}if(Array.isArray(u)){let dt=u;for(let rr of dt){let An,Wr;try{Wr=w(s,rr,a,e),An=Wr.modelNames,v=v||Wr.isRefPath,R=R||Wr.refPath,E=Wr.justOne}catch(so){return so}if(!(v&&!Wr.isRefPath)&&An){l=l||[],p=p||new Set;for(let so of An)p.has(so)===!1&&(p.add(so),l.push(so))}}}else{try{let dt=w(s,u,a,e);l=dt.modelNames,v=dt.isRefPath,R=R||dt.refPath,E=dt.justOne,M=zs(u,"options.populate",null),v&&(I=l,l=Array.from(new Set(l)))}catch(dt){return dt}if(!l)continue}let j={},U=n.path,oe="_id";if("justOne"in n&&n.justOne!==void 0?E=n.justOne:u&&!u[tT]&&(n.path.endsWith("."+u.path)||n.path===u.path)&&(E=Array.isArray(u)?u.every(dt=>!dt.$isMongooseArray):!u.$isMongooseArray),!l)continue;j.isVirtual=!1,j.justOne=E,j.localField=U,j.foreignField=oe;let Q=cZ(s,U,e,n,null,u),un=String(Or.getValue(oe,s));n._docs[un]=Array.isArray(Q)?Q.slice():Q;let Vr=zs(n,"match",null),lu=typeof Vr=="function";lu&&(Vr=Vr.call(s,s)),iT(Vr),j.match=Vr,j.hasMatchFunction=lu,j.isRefPath=v,j.modelNamesInOrder=I,v&&(l=K5e(s,h,j,n,R,Q)||l);try{rT(e,o,d,l,n,j,Q,s,M)}catch(dt){return dt}}return o;function w(O,E,A,x){let v,R=!1,M=null,I=E;E?.instance==="Array"&&(E=E.embeddedSchemaType),E?.$isSchemaMap&&(E=E.$__schemaType);let j=E?.options?.ref;if(c=E?.options?.refPath,E!=null&&E[tT]&&!j&&!c&&!A)return{modelNames:null};if(A)v=[A];else if(c!=null){if(typeof c=="function"){let U=n.path.slice(0,n.path.length-E.path.length-1),oe=Rc.get(U,O,Mf),Q=Array.isArray(oe)?Or.array.flatten(oe):oe?[oe]:[];v=new Set;for(let un of Q)c=c.call(un,un,n.path),Cb(c,O,n.path,h,n._queryProjection).forEach(Vr=>v.add(Vr));v=Array.from(v)}else v=Cb(c,O,n.path,h,n._queryProjection);R=!0}else{let U,oe,Q,un,Vr=x,lu=x.schema.options.discriminatorKey;if(!E&&lu&&(un=Or.getValue(lu,O))){let dt=L5e(x.discriminators,un)||x;if(dt!=null)Vr=dt;else try{Vr=sT(x.db,un)}catch(rr){return rr}Q=Vr.schema._getSchema(n.path),Q?.embeddedSchemaType&&(Q=Q.embeddedSchemaType)}else Q=E;if(I&&I.path.endsWith(".$*")?M=!I.$isMongooseArray&&!I._arrayPath:Q!=null&&(M=!Q.$isMongooseArray&&!Q._arrayPath),(U=zs(Q,"options.ref"))!=null)if(Q!=null&&typeof U=="function"&&n.path.endsWith("."+Q.path)){v=new Set;let dt=n.path.slice(0,n.path.length-Q.path.length-1),rr=Rc.get(dt,O,Mf),An=Array.isArray(rr)?Or.array.flatten(rr):rr?[rr]:[];for(let Wr of An)v.add(Z5(U,Wr));An.length===0?v=[Z5(U,O)]:v=Array.from(v)}else U=Z5(U,O),v=[U];else if((Q=zs(E,"options.refPath"))!=null)if(R=!0,typeof oe=="function"){let dt=n.path.slice(0,n.path.length-Q.path.length-1),rr=Rc.get(dt,O,Mf),An=Array.isArray(rr)?Or.array.flatten(rr):rr?[rr]:[];v=new Set;for(let Wr of An)oe=oe.call(Wr,Wr,n.path),Cb(oe,O,n.path,h,n._queryProjection).forEach(so=>v.add(so));v=Array.from(v)}else v=Cb(oe,O,n.path,h,n._queryProjection)}if(!v)if(n._localModel==null)v=[x.modelName];else return{modelNames:v,justOne:M,isRefPath:R,refPath:c};return Array.isArray(v)||(v=[v]),{modelNames:v,justOne:M,isRefPath:R,refPath:c}}};function z5e(t,e,r,n){let s=[],i={},o=n.virtual;for(let a of e){let u=null,c={},l,p=n.nestedSchemaPath?n.nestedSchemaPath+".":"";typeof r.localField=="string"?l=r.localField:typeof o.options.localField=="function"?l=p+o.options.localField.call(a,a):Array.isArray(o.options.localField)?l=o.options.localField.map(w=>p+w):l=p+o.options.localField,c.count=o.options.count,o.options.skip!=null&&!Object.hasOwn(r,"skip")&&(r.skip=o.options.skip),o.options.limit!=null&&!Object.hasOwn(r,"limit")&&(r.limit=o.options.limit),o.options.perDocumentLimit!=null&&!Object.hasOwn(r,"perDocumentLimit")&&(r.perDocumentLimit=o.options.perDocumentLimit);let d=o.options.foreignField;if(!l||!d)return new nT(`Cannot populate virtual \`${r.path}\` on model \`${t.modelName}\`, because options \`localField\` and / or \`foreignField\` are missing`);typeof l=="function"&&(l=l.call(a,a)),typeof d=="function"&&(d=d.call(a,a)),c.isRefPath=!1;let h=null;if("justOne"in r&&r.justOne!==void 0&&(h=r.justOne),n.nestedSchemaPath&&typeof o.options.ref=="function"){let w=Or.getValue(n.nestedSchemaPath,a);u=Array.isArray(w)?w.flatMap(O=>o._getModelNamesForPopulate(O)):o._getModelNamesForPopulate(w)}else u=o._getModelNamesForPopulate(a);o.options.refPath?(h=!!o.options.justOne,c.isRefPath=!0):o.options.ref&&(h=!!o.options.justOne),c.isVirtual=!0,c.virtual=o,c.justOne=h;let f=zs(c,"virtual.options.match",null)||zs(c,"virtual.options.options.match",null),y=zs(r,"match",null)||f,g=typeof y=="function";if(g&&(y=y.call(a,a,c.virtual)),Array.isArray(l)&&Array.isArray(d)&&l.length===d.length){y=Object.assign({},y);for(let w=1;w<l.length;++w)y[d[w]]=lZ(Rc.get(l[w],a,Mf),t.schema),g=!0;l=l[0],d=d[0]}c.localField=l,c.foreignField=d,c.match=y,c.hasMatchFunction=g,iT(y);let _=cZ(a,l,t,r,o);try{rT(t,s,i,u,r,c,_,a)}catch(w){return w}}return s}function rT(t,e,r,n,s,i,o,a,u,c){let l=s.connection??t.db;if(c=c===void 0?o:c,Array.isArray(c)&&(c=Or.cloneArrays(c)),n==null)return;let p=Or.array.flatten(n),d=p.length;for(;d--;){let h=p[d];if(h==null)continue;let f;if(s.model&&s.model[eT])f=s.model;else if(h[eT])f=h,h=f.modelName;else try{f=sT(l,h)}catch(w){if(o!==void 0)throw w;f=null}let y=o,g=i.modelNamesInOrder||n;i.isRefPath&&Array.isArray(o)&&o.length===g.length&&(y=uZ(o,g,h));let _=s.perDocumentLimit==null?zs(s,"options.perDocumentLimit",null):s.perDocumentLimit;if(!r[h]||_!=null){let w={model:f};i.isVirtual&&zs(i.virtual,"options.options")?w.options=j5e(i.virtual.options.options):u!=null&&(w.options=Object.assign({},u)),Or.merge(w,s),s[X5]=f,w[X5]=f,r[h]={model:f,options:w,match:i.hasMatchFunction?[i.match]:i.match,docs:[a],ids:[y],allIds:[o],unpopulatedValues:[c],localField:new Set([i.localField]),foreignField:new Set([i.foreignField]),justOne:i.justOne,isVirtual:i.isVirtual,virtual:i.virtual,count:i.count,[X5]:f},e.push(r[h])}else r[h].localField.add(i.localField),r[h].foreignField.add(i.foreignField),r[h].docs.push(a),r[h].ids.push(y),r[h].allIds.push(o),r[h].unpopulatedValues.push(c),i.hasMatchFunction&&r[h].match.push(i.match)}}function sT(t,e){return t.models[e]==null&&t._parent!=null?sT(t._parent,e):t.model(e)}function uZ(t,e,r){return Array.isArray(e)?Array.isArray(t)&&Array.isArray(e)?t.flatMap((n,s)=>uZ(n,e[s],r)):[]:e===r?Array.isArray(t)?Or.array.flatten(t):[t]:[]}function Z5(t,e){return typeof t=="function"&&!t[eT]?t.call(e,e):t}function cZ(t,e,r,n,s,i){let o=r.schema._getPathType(e),a=o==="real"?r.schema.path(e):o.schema,u=a?.getters||[];e=a?.instance==="Embedded"?e+"._id":e;let c=zs(n,"options",{}),l="getters"in c?c.getters:zs(s,"options.getters",!1);if(u.length!==0&&l){let p=t.$__!=null?t:r.hydrate(t),d=Or.getValue(e,t);if(Array.isArray(d)){let h=Or.getValue(e.split(".").slice(0,-1),p);return d.map((f,y)=>a.applyGetters(f,h[y]))}else return a.applyGetters(d,p)}else return lZ(Rc.get(e,t,Mf),i)}function lZ(t,e){if(t?.$__!=null)return t._doc._id;if(t?._id!=null&&!e?.$isSchemaMap)return t._id;if(Array.isArray(t)){let r=t.__array??t;for(let n=0;n<r.length;++n)r[n]?.$__!=null&&(r[n]=r[n]._doc._id);return Or.isMongooseArray(t)&&t.$schema()?t.$schema()._castForPopulate(t,t.$parent()):[].concat(t)}if(U5e(t)==="Object"&&e?.[tT]==null){let r=[];for(let n of Object.keys(t))r.push(t[n]);return r}return t instanceof Map?Array.from(t.values()):t}function K5e(t,e,r,n,s,i){if(!r.isRefPath||s==null)return;let o=s.split("."),a="",u;for(let c=0;c<o.length;++c){let l=o[c];a=a+(a.length===0?"":".")+l;let p=e.path(a);if(p!=null&&p.$isMongooseDocumentArray&&p.Constructor.discriminators!=null&&Or.hasOwnKeys(p.Constructor.discriminators)){let d=Or.getValue(a,t),h=n.path.substring(a.length+1),f=p.Constructor.schema.options.discriminatorKey;u=[];for(let y of d){let g=Or.getValue(f,y),w=p.Constructor.discriminators[g]?.schema;if(w==null)continue;let O=w.path(h);if(O==null||O.options.refPath==null){let A=Or.getValue(r.localField.substring(a.length+1),y);i.forEach((x,v)=>{x===A&&(i[v]=q5e(x))});continue}let E=Or.getValue(o.slice(c+1).join("."),y);u.push(E)}}}return u}function iT(t){if(t!=null&&typeof t=="object")for(let e of Object.keys(t)){if(e==="$where")throw new nT("Cannot use $where filter with populate() match");t[e]!=null&&typeof t[e]=="object"&&iT(t[e])}}});var fZ=m((Hje,hZ)=>{"use strict";var H5e=Rt();hZ.exports=function(e){if(Array.isArray(e)){let n=Object.keys(e[0]);return n.length===1&&n[0]==="_id"&&e[0]._id!=="hashed"}if(typeof e!="object")return!1;let r=H5e(e,"key",{});return Object.keys(r).length===1&&Object.hasOwn(r,"_id")}});var gZ=m((Gje,yZ)=>{"use strict";var vb=Rt(),mZ=ae();yZ.exports=function(e,r,n){if(n.textIndexVersion!=null){delete n.key._fts,delete n.key._ftsx;let a={...n.weights,...n.key};if(Object.keys(a).length!==Object.keys(e).length)return!1;for(let u of Object.keys(a)){if(!(u in e))return!1;let c=a[u];if(c!==vb(r,"weights."+u)&&!(c===1&&vb(r,"weights."+u)==null))return!1}return r.default_language!==n.default_language?n.default_language==="english"&&r.default_language==null:!0}let s=["unique","partialFilterExpression","sparse","expireAfterSeconds","collation"];for(let a of s)if(!(!(a in r)&&!(a in n))){if(a==="collation"){if(r[a]==null||n[a]==null)return r[a]==null&&n[a]==null;let u=Object.keys(r.collation),c=r.collation,l=n.collation;for(let p of u)if(vb(c,p)!==vb(l,p))return!1}else if(!mZ.deepEqual(r[a],n[a]))return!1}let i=Object.keys(e),o=Object.keys(n.key);if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a]||!mZ.deepEqual(e[i[a]],n.key[o[a]]))return!1;return!0}});var EZ=m((Jje,_Z)=>{"use strict";_Z.exports=function(e,r){if(r.timeseries==null)return!1;let{timeField:n,metaField:s}=r.timeseries;return typeof n!="string"||typeof s!="string"?!1:Object.keys(e.key).length===2&&e.key[n]===1&&e.key[s]===1}});var AZ=m((Yje,SZ)=>{"use strict";var G5e=ub();function J5e(t,e){return wZ({baseModelName:t.baseModelName,discriminatorMapping:t.schema.discriminatorMapping,indexes:e,indexesType:"schema"})}function Y5e(t,e){return wZ({baseModelName:t.baseModelName,discriminatorMapping:t.schema.discriminatorMapping,indexes:e,indexesType:"db"})}SZ.exports={getRelatedSchemaIndexes:J5e,getRelatedDBIndexes:Y5e};function wZ({baseModelName:t,discriminatorMapping:e,indexes:r,indexesType:n}){let s=e?.key,i=e?.value;return s?t?r.filter(a=>{let u=bZ(a,n);return u&&u[s]===i}):r.filter(a=>{let u=bZ(a,n);return!u||!u[s]||G5e(u[s])&&!("$eq"in u[s])}):r}function bZ(t,e){return e==="schema"?t[1]?.partialFilterExpression:t.partialFilterExpression}});var CZ=m((Qje,OZ)=>{"use strict";OZ.exports=Q5e;async function Q5e(t,e,r){if(r<=0)throw new Error("Limit must be positive");if(t.length===0)return[];let n=[],s=new Set;for(let i=0;i<t.length;i++){let o=t[i],a=e(o,i);n.push(a),s.add(a);let u=()=>s.delete(a);a.then(u).catch(u),s.size>=r&&await Promise.race(s)}return Promise.all(n)}});var xZ=m((Xje,vZ)=>{"use strict";vZ.exports=function t(e,r,n){if(r!=null)for(let s=0;s<r.length;++s)Array.isArray(r[s])?t(e,r[s],n+"."+s):e.push(n+"."+s)}});var BZ=m((Zje,PZ)=>{"use strict";var TZ=Rt(),DZ=fs(),MZ=B5();PZ.exports=function(e,r,n){let s=MZ(TZ(r,"select",null),!0)||MZ(TZ(r,"options.select",null),!0);if(s!=null){for(let i of e)if(Object.hasOwn(s,"-"+i))for(let o of n)o.$__!=null?DZ.unset(i,o._doc):DZ.unset(i,o)}}});var K5=m((QZ,XZ)=>{"use strict";var X5e=U5(),Z5e=P8(),no=Zi(),eTe=E_(),aT=require("events").EventEmitter,If=fc(),Db=K7(),ge=ds(),tTe=F_(),rTe=q8(),xb=db(),nTe=aX(),uT=Oc(),Tb=yc(),LZ=F8(),IZ=$8(),sTe=q_(),iTe=cX(),oTe=W5(),aTe=dX(),UZ=fX(),uTe=gX(),cTe=b5(),VZ=wX(),lTe=AX(),WZ=CX(),pTe=MX(),zZ=w5(),dTe=IX(),hTe=YX(),fTe=a5(),Xo=vt(),mTe=eZ(),KZ=i5(),oT=J7(),HZ=W_(),yTe=IE(),gTe=rZ(),Nf=Rt(),_Te=bn(),Pf=Us(),ETe=dZ(),NZ=Da(),lT=bi().internalToObjectOptions,pT=fZ(),GZ=gZ(),bTe=EZ(),{getRelatedDBIndexes:wTe,getRelatedSchemaIndexes:STe}=AZ(),dT=kx(),ATe=K_(),OTe=Tf(),CTe=CZ(),vTe=j5(),JZ=xZ(),xTe=BZ(),TTe=X7(),kZ=require("util"),Je=ae(),DTe=nx(),MTe=j8(),PTe=k_(),Fc=u5(),$c=Symbol("mongoose#Model#collection"),qc=Symbol("mongoose#Model#db"),YZ=te().modelSymbol,Bf=Symbol("mongoose#Model#subclassed"),{VERSION_INC:Mb,VERSION_WHERE:RZ,VERSION_ALL:BTe}=no,ITe=Object.assign({},lT,{bson:!0});function L(t,e,r){if(e instanceof uT)throw new TypeError("2nd argument to `Model` constructor must be a POJO or string, **not** a schema. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");if(typeof t=="string")throw new TypeError("First argument to `Model` constructor must be an object, **not** a string. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");no.call(this,t,e,r)}Object.setPrototypeOf(L.prototype,no.prototype);L.prototype.$isMongooseModelPrototype=!0;L.prototype.db;L.useConnection=function(e){if(!e)throw new Error("Please provide a connection.");this.db&&(delete this.db.models[this.modelName],delete this.prototype.db,delete this.prototype[qc],delete this.prototype.collection,delete this.prototype.$collection,delete this.prototype[$c]),this.db=e;let r=e.collection(this.collection.collectionName,e.options);return this.prototype.collection=r,this.prototype.$collection=r,this.prototype[$c]=r,this.prototype.db=e,this.prototype[qc]=e,this.collection=r,this.$__collection=r,e.models[this.modelName]=this,this};L.prototype.collection;L.prototype.$__collection;L.prototype.modelName;L.prototype.$where;L.prototype.baseModelName;L.events;L._middleware;function cT(t,e){if(t.$where!=null)for(let r of Object.keys(t.$where))e[r]=t.$where[r]}function NTe(t,e){let r={};zZ(t.$__schema,e),typeof e.writeConcern<"u"?(r.writeConcern={},"w"in e.writeConcern&&(r.writeConcern.w=e.writeConcern.w),"j"in e.writeConcern&&(r.writeConcern.j=e.writeConcern.j),"wtimeout"in e.writeConcern&&(r.writeConcern.wtimeout=e.writeConcern.wtimeout)):("w"in e&&(r.w=e.w),"j"in e&&(r.j=e.j),"wtimeout"in e&&(r.wtimeout=e.wtimeout)),"checkKeys"in e&&(r.checkKeys=e.checkKeys);let n=t.$session(),s=t[qc].base.transactionAsyncLocalStorage?.getStore();return n!=null?r.session=n:!Object.hasOwn(e,"session")&&s?.session!=null&&(r.session=s.session),r}L.prototype.$__save=async function(e){try{await this._execDocumentPreHooks("save",e)}catch(o){await this._execDocumentPostHooks("save",o);return}let r=null,n=null;try{let o=NTe(this,e);if(this.$isNew){let a=this.toObject(ITe);if((a||{})._id===void 0)throw new ge("document must have an _id before saving");this.$__version(!0,a),this.$__reset(),S1(this,!1),this.$__.inserting=!0,r=await this[$c].insertOne(a,o).catch(u=>{throw S1(this,!0),u})}else{this.$__.inserting=!1;let a=this.$__delta();if(e.pathsToSave){for(let u in a[1].$set)if(!e.pathsToSave.includes(u)){if(e.pathsToSave.some(c=>u.slice(0,c.length)===c&&u.charAt(c.length)==="."))continue;delete a[1].$set[u]}}if(a){n=this.$__where(a[0]),cT(this,n);let u=a[1];if(this.$__schema.options.minimize){for(let c of Object.values(u))if(c!=null)for(let l of Object.keys(c))c[l]==null||typeof c[l]!="object"||Je.isPOJO(c[l])&&(DTe(c[l]),Je.hasOwnKeys(c[l])===!1&&(delete c[l],u.$unset=u.$unset||{},u.$unset[l]=1))}this.$__.modifiedPaths=this.modifiedPaths(),this.$__reset(),S1(this,!1),r=await this[$c].updateOne(n,u,o).catch(c=>{throw this.$__undoReset(),c})}else n=this.$__where(),cT(this,n),this.$__.version&&this.$__version(n,a),cTe(this.$__schema,o),r=await this.constructor.collection.findOne(n,{...o,projection:{_id:1}}).then(u=>({matchedCount:u?1:0}))}}catch(o){let a=this.$__schema._transformDuplicateKeyError(o);await this._execDocumentPostHooks("save",a);return}let s=0;if((e!=null?e.writeConcern!=null?e.writeConcern.w:e.w:0)!==0){if(r!=null&&(Array.isArray(r)?s=r.length:r.matchedCount!=null?s=r.matchedCount:s=r),this.$__.version&&!this.$__.inserting){let a=Mb===(Mb&this.$__.version);this.$__.version=void 0;let u=this.$__schema.options.versionKey,c=this.$__getValue(u)||0;if(s<=0){this.$__undoReset();let l=this.$__.$versionError||new LZ(this,c,this.$__.modifiedPaths);await this._execDocumentPostHooks("save",l);return}a&&this.$__setValue(u,c+1)}if(r!=null&&s<=0){this.$__undoReset();let a=new eTe(n,this.constructor.modelName,s,r);await this._execDocumentPostHooks("save",a);return}}this.$__.saving=void 0,this.$__.savedState={},this.$emit("save",this,s),this.constructor.emit("save",this,s),await this._execDocumentPostHooks("save")};function kTe(t,e,r){let n=t.$__schema.options.versionKey;if(!n)return null;let s=t.$__getValue(n)||0;return new LZ(t,s,e.concat(r))}L.prototype.save=async function(e){if(typeof e=="function"||typeof arguments[1]=="function")throw new ge("Model.prototype.save() no longer accepts a callback");let r;if(this.$op="save",this.$__.saving?r=new IZ(this):this.$__.saving=new IZ(this),e=new nTe(e),Object.hasOwn(e,"session")&&this.$session(e.session),this.$__.timestamps!=null&&(e.timestamps=this.$__.timestamps),this.$__.$versionError=kTe(this,this.modifiedPaths(),Object.keys(this.$__.activePaths.getStatePaths("default"))),r)throw this.$__handleReject(r),r;this.$__.saveOptions=e;try{await this.$__save(e)}catch(n){throw this.$__handleReject(n),n}finally{this.$__.saving=null,this.$__.saveOptions=null,this.$__.$versionError=null,this.$op=null}return this};L.prototype.$save=L.prototype.save;L.prototype.$__version=function(t,e){let r=this.$__schema.options.versionKey;if(t===!0){r&&(TTe(e,r,0),this.$__setValue(r,0));return}if(r!==!1&&this.$__isSelected(r)){if(RZ===(RZ&this.$__.version)){let n=this.$__getValue(r);n!=null&&(t[r]=n)}Mb===(Mb&this.$__.version)&&(Nf(e.$set,r,null)!=null?++e.$set[r]:(e.$inc=e.$inc||{},e.$inc[r]=1))}};L.prototype.increment=function(){return this.$__.version=BTe,this};L.prototype.$__where=function(e){if(e||(e={}),e._id||(e._id=this._doc._id),this._doc._id===void 0)throw new ge("No _id found on document!");return e};L.prototype.deleteOne=function(e){if(typeof e=="function"||typeof arguments[1]=="function")throw new ge("Model.prototype.deleteOne() no longer accepts a callback");e||(e={}),Object.hasOwn(e,"session")&&this.$session(e.session);let r=this,n=this.$__where(),s=r.constructor.deleteOne();return this.$session()!=null&&("session"in s.options||(s.options.session=this.$session())),s.pre(async function(){let o=await r.constructor._middleware.execPre("deleteOne",r,[r,e]);if(o[0]!==r||o[1]!==e)throw new Error("Document deleteOne pre hooks cannot overwrite arguments");return s.deleteOne(n,e),r.$where!=null&&this.where(r.$where),o}),s.pre(function(){return Promise.all(r.$getAllSubdocs().map(o=>o.constructor._middleware.execPre("deleteOne",o,[o])))}),s.pre(function(){if(r.$__.isDeleted)throw new If.skipWrappedFunction}),s.post(function(){return Promise.all(r.$getAllSubdocs().map(o=>o.constructor._middleware.execPost("deleteOne",o,[o])))}),s.post(function(){return r.constructor._middleware.execPost("deleteOne",r,[r],{})}),s.transform(function(o){return o?.deletedCount>0&&r.$isDeleted(!0),o}),s};L.prototype.$model=function(e){return arguments.length===0?this.constructor:this[qc].model(e)};L.prototype.model=L.prototype.$model;L.exists=function(e,r){if(Ee(this,"exists"),typeof arguments[2]=="function")throw new ge("Model.exists() no longer accepts a callback");return this.findOne(e).select({_id:1}).lean().setOptions(r)};L.discriminator=function(t,e,r){let n;if(typeof t=="function"&&(n=t,t=Je.getFunctionName(n),!(n.prototype instanceof L)))throw new ge("The provided class "+t+" must extend Model");r=r||{};let s=Je.isPOJO(r)?r.value:r,i=typeof r.clone=="boolean"?r.clone:!0,o=typeof r.mergePlugins=="boolean"?r.mergePlugins:!0,a=typeof r.overwriteModels=="boolean"?r.overwriteModels:!1;if(Ee(this,"discriminator"),Je.isObject(e)&&!e.instanceOfSchema&&(e=new uT(e)),e instanceof uT&&i&&(e=e.clone()),e=yTe(this,t,e,s,o,r.mergeHooks,a),this.db.models[t]&&!e.options.overwriteModels&&!a)throw new rTe(t);e.$isRootDiscriminator=!0,e.$globalPluginsApplied=!0,n=this.db.model(n||t,e,this.$__collection.name),this.discriminators[t]=n;let u=this.discriminators[t];if(Object.setPrototypeOf(u.prototype,this.prototype),Object.defineProperty(u,"baseModelName",{value:this.modelName,configurable:!0,writable:!1}),UZ(u,e),WZ(u,e),this[Bf]!=null)for(let c of this[Bf])c.discriminators=c.discriminators||{},c.discriminators[t]=n.__subclass(n.db,e,c.collection.name);return u};function Ee(t,e){if(t==null||t===global)throw new ge("`Model."+e+"()` cannot run without a model as `this`. Make sure you are calling `MyModel."+e+"()` where `MyModel` is a Mongoose model.");if(t[YZ]==null)throw new ge("`Model."+e+"()` cannot run without a model as `this`. Make sure you are not calling `new Model."+e+"()`")}for(let t in aT.prototype)L[t]=aT.prototype[t];L.init=function(){if(Ee(this,"init"),typeof arguments[0]=="function")throw new ge("Model.init() no longer accepts a callback");if(this.schema.emit("init",this),this.$init!=null)return this.$init;let e=this.db,r=async()=>{if(Je.getOption("autoIndex",this.schema.options,e.config,e.base.options))return await this.ensureIndexes({_automatic:!0})},n=async()=>{if(Je.getOption("autoSearchIndex",this.schema.options,e.config,e.base.options))return await this.createSearchIndexes()},s=async()=>{let a=Je.getOption("autoCreate",this.schema.options,e.config);if(a==null&&(await e._waitForConnect(!0),a=Je.getOption("autoCreate",this.schema.options,e.config,e.base.options)),!!a)return await this.createCollection()};this.$init=s().then(()=>r()).then(()=>n());let i=this.$init.catch,o=this;return this.$init.catch=function(){return o.$caught=!0,i.apply(o.$init,arguments)},this.$init};L.createCollection=async function(e){if(Ee(this,"createCollection"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new ge("Model.createCollection() no longer accepts a callback");[e]=await this.hooks.execPre("createCollection",this,[e]).catch(a=>{if(a instanceof If.skipWrappedFunction)return[a];throw a});let r=this?.schema?.options?.collectionOptions;r!=null&&(e=Object.assign({},r,e));let n=this?.schema?.options?.collation;n!=null&&(e=Object.assign({collation:n},e));let s=this?.schema?.options?.capped;s!=null&&(typeof s=="number"?e=Object.assign({capped:!0,size:s},e):typeof s=="object"&&(e=Object.assign({capped:!0},s,e)));let i=this?.schema?.options?.timeseries;i!=null&&(e=Object.assign({timeseries:i},e),e.expireAfterSeconds!=null||(e.expires!=null?Je.expires(e):this.schema.options.expireAfterSeconds!=null?e.expireAfterSeconds=this.schema.options.expireAfterSeconds:this.schema.options.expires!=null&&(e.expires=this.schema.options.expires,Je.expires(e))));let o=this?.schema?.options?.clusteredIndex;o!=null&&(e=Object.assign({clusteredIndex:{...o,unique:!0}},e));try{e instanceof If.skipWrappedFunction||await this.db.createCollection(this.$__collection.collectionName,e)}catch(a){a!=null&&(a.name!=="MongoServerError"||a.code!==48)&&await this.hooks.execPost("createCollection",this,[null],{error:a})}return await this.hooks.execPost("createCollection",this,[this.$__collection]),this.$__collection};L.syncIndexes=async function(e){if(Ee(this,"syncIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new ge("Model.syncIndexes() no longer accepts a callback");if(e?.autoCreate??this.schema.options?.autoCreate??this.db.config.autoCreate??this.db.base?.options?.autoCreate??!0)try{await this.createCollection()}catch(i){if(i!=null&&(i.name!=="MongoServerError"||i.code!==48))throw i}let n=await this.diffIndexes({indexOptionsToCreate:!0}),s=await this.cleanIndexes({...e,toDrop:n.toDrop});return await this.createIndexes({...e,toCreate:n.toCreate}),s};L.createSearchIndex=async function(e){return Ee(this,"createSearchIndex"),await this.$__collection.createSearchIndex(e)};L.updateSearchIndex=async function(e,r){return Ee(this,"updateSearchIndex"),await this.$__collection.updateSearchIndex(e,r)};L.dropSearchIndex=async function(e){return Ee(this,"dropSearchIndex"),await this.$__collection.dropSearchIndex(e)};L.listSearchIndexes=async function(e){return Ee(this,"listSearchIndexes"),await(await this.$__collection.listSearchIndexes(e)).toArray()};L.diffIndexes=async function(e){if(typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new ge("Model.syncIndexes() no longer accepts a callback");let r=this,n=await r.listIndexes().catch(u=>{if(u.codeName!="NamespaceNotFound")throw u});n===void 0&&(n=[]),n=wTe(r,n);let s=r.schema,i=STe(r,s.indexes()),o=FTe(s,i,n),a=RTe(s,i,n,o,e);return{toDrop:o,toCreate:a}};function RTe(t,e,r,n,s){let i=[],o=s?.indexOptionsToCreate??!1;for(let[a,u]of e){let c=!1,l=dT(t,Xo(u));for(let p of r)if(!pT(p)&&GZ(a,l,p)&&!n.includes(p.name)){c=!0;break}c||(o?i.push([a,u]):i.push(a))}return i}function FTe(t,e,r){let n=[];for(let s of r){let i=!1;if(!pT(s)&&!bTe(s,t.options)){for(let[o,a]of e){let u=dT(t,Xo(a));if(VZ(o,u,t.options),GZ(o,u,s)){i=!0;break}}i||n.push(s.name)}}return n}L.cleanIndexes=async function(e){if(Ee(this,"cleanIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new ge("Model.cleanIndexes() no longer accepts a callback");let r=this;if(Array.isArray(e?.toDrop))return await FZ(e.toDrop,r,e);let n=await r.diffIndexes();return await FZ(n.toDrop,r,e)};async function FZ(t,e,r){if(t.length===0)return[];let n=e.$__collection;return r?.hideIndexes?await Promise.all(t.map(s=>e.db.db.command({collMod:n.collectionName,index:{name:s,hidden:!0}}))):await Promise.all(t.map(s=>n.dropIndex(s))),t}L.listIndexes=async function(){if(Ee(this,"listIndexes"),typeof arguments[0]=="function")throw new ge("Model.listIndexes() no longer accepts a callback");return this.$__collection.buffer&&await new Promise(e=>{this.$__collection.addQueue(e)}),this.$__collection.listIndexes().toArray()};L.ensureIndexes=async function(e){if(Ee(this,"ensureIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new ge("Model.ensureIndexes() no longer accepts a callback");await new Promise((r,n)=>{$Te(this,e,s=>{if(s!=null)return n(s);r()})})};L.createIndexes=async function(e){if(Ee(this,"createIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new ge("Model.createIndexes() no longer accepts a callback");return this.ensureIndexes(e)};function $Te(t,e,r){let n=Array.isArray(e?.toCreate)?e.toCreate:t.schema.indexes(),s;e=e||{};let i=function(p){p&&!t.$caught&&t.emit("error",p),t.emit("index",p||s),r&&r(p||s)};for(let p of n)pT(p)&&Je.warn('mongoose: Cannot specify a custom index on `_id` for model name "'+t.modelName+'", MongoDB does not allow overwriting the default `_id` index. See https://bit.ly/mongodb-id-index');if(!n.length){NZ(function(){i()});return}let o=function(p,d,h,f){t.emit("index-single-done",p,d,h,f)},a=function(p,d){t.emit("index-single-start",p,d)},u=t.schema._baseSchema,c=u?u.indexes():[];NZ(function(){e._automatic&&!t.collection.collection?t.collection.addQueue(l,[]):l()});function l(){if(e._automatic&&(t.schema.options.autoIndex===!1||t.schema.options.autoIndex==null&&t.db.config.autoIndex===!1))return i();let p=n.shift();if(!p)return i();if(e._automatic&&p[1]._autoIndex===!1||c.find(y=>Je.deepEqual(y,p)))return l();let d=Xo(p[0]),h=Xo(p[1]);delete h._autoIndex,dT(t.schema,h),zZ(t.schema,h),VZ(d,h,t.schema.options),a(d,e);let f=null;try{f=t.collection.createIndex(d,h)}catch(y){s||(s=y),t.$caught||t.emit("error",y),o(y,d,h),l();return}f.then(y=>{o(null,d,h,y),l()},y=>{s||(s=y),t.$caught||t.emit("error",y),o(y,d,h),l()})}}L.createSearchIndexes=async function(){Ee(this,"createSearchIndexes");let e=[];for(let r of this.schema._searchIndexes)e.push(await this.createSearchIndex(r));return e};L.schema;L.db;L.collection;L.$__collection;L.base;L.discriminators;L.translateAliases=function(e,r){Ee(this,"translateAliases");let n=(s,i)=>{let o,a=[],u=s.split("."),c=this.schema;for(let p in u){let d=u[p];if(c?.aliases[d]){if(o=c.aliases[d],r&&o in e)throw new ge(`Provided object has both field "${d}" and its alias "${o}"`);a.push(o)}else o=d,a.push(d);c?.paths[o]?c=c.paths[o].schema:c=null}let l=a.join(".");return e instanceof Map?e.set(l,i):e[l]=i,l!==s&&(e instanceof Map?e.delete(s):delete e[s]),e};if(typeof e=="object"){if(e instanceof Map)for(let s of new Map(e))e=n(s[0],s[1]);else for(let s of Object.keys(e))if(e=n(s,e[s]),s[0]==="$")if(Array.isArray(e[s]))for(let i in e[s])e[s][i]=this.translateAliases(e[s][i]);else this.translateAliases(e[s]);return e}else return e};L.deleteOne=function(e,r){if(Ee(this,"deleteOne"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ge("Model.prototype.deleteOne() no longer accepts a callback");let n=new this.Query({},{},this,this.$__collection);return n.setOptions(r),n.deleteOne(e)};L.deleteMany=function(e,r){if(Ee(this,"deleteMany"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ge("Model.deleteMany() no longer accepts a callback");let n=new this.Query({},{},this,this.$__collection);return n.setOptions(r),n.deleteMany(e)};L.find=function(e,r,n){if(Ee(this,"find"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new ge("Model.find() no longer accepts a callback");let s=new this.Query({},{},this,this.$__collection);return s.select(r),s.setOptions(n),s.find(e)};L.findById=function(e,r,n){if(Ee(this,"findById"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ge("Model.findById() no longer accepts a callback");return this.findOne({_id:e},r,n)};L.findOne=function(e,r,n){if(Ee(this,"findOne"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ge("Model.findOne() no longer accepts a callback");let s=new this.Query({},{},this,this.$__collection);return s.select(r),s.setOptions(n),s.findOne(e)};L.estimatedDocumentCount=function(e){return Ee(this,"estimatedDocumentCount"),new this.Query({},{},this,this.$__collection).estimatedDocumentCount(e)};L.countDocuments=function(e,r){if(Ee(this,"countDocuments"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ge("Model.countDocuments() no longer accepts a callback");let n=new this.Query({},{},this,this.$__collection);return r!=null&&n.setOptions(r),n.countDocuments(e)};L.distinct=function(e,r,n){if(Ee(this,"distinct"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ge("Model.distinct() no longer accepts a callback");let s=new this.Query({},{},this,this.$__collection);return n!=null&&s.setOptions(n),s.distinct(e,r)};L.where=function(e,r){Ee(this,"where");let n=new this.Query({},{},this,this.$__collection).find({});return n.where.apply(n,arguments)};L.$where=function(){Ee(this,"$where");let e=new this.Query({},{},this,this.$__collection).find({});return e.$where.apply(e,arguments)};L.findOneAndUpdate=function(t,e,r){if(Ee(this,"findOneAndUpdate"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new ge("Model.findOneAndUpdate() no longer accepts a callback");let n;r&&(n=r.fields||r.projection),e=Xo(e,{depopulate:!0,_isNested:!0}),KZ(e,r,this.schema.options.versionKey);let s=new this.Query({},{},this,this.$__collection);return s.select(n),s.findOneAndUpdate(t,e,r)};L.findByIdAndUpdate=function(t,e,r){if(Ee(this,"findByIdAndUpdate"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new ge("Model.findByIdAndUpdate() no longer accepts a callback");return t instanceof no&&(t=t._doc._id),this.findOneAndUpdate.call(this,{_id:t},e,r)};L.findOneAndDelete=function(t,e){if(Ee(this,"findOneAndDelete"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ge("Model.findOneAndDelete() no longer accepts a callback");let r;e&&(r=e.select,e.select=void 0);let n=new this.Query({},{},this,this.$__collection);return n.select(r),n.findOneAndDelete(t,e)};L.findByIdAndDelete=function(t,e){if(Ee(this,"findByIdAndDelete"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ge("Model.findByIdAndDelete() no longer accepts a callback");return this.findOneAndDelete({_id:t},e)};L.findOneAndReplace=function(t,e,r){if(Ee(this,"findOneAndReplace"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new ge("Model.findOneAndReplace() no longer accepts a callback");let n;r&&(n=r.select,r.select=void 0);let s=new this.Query({},{},this,this.$__collection);return s.select(n),s.findOneAndReplace(t,e,r)};L.create=async function(e,r){if(typeof r=="function"||typeof arguments[2]=="function")throw new ge("Model.create() no longer accepts a callback");Ee(this,"create");let n,s=this.schema.options.discriminatorKey;if(Array.isArray(e))n=e,r=r!=null&&typeof r=="object"?r:{};else{let a=arguments[arguments.length-1];if(r={},typeof a=="function"||typeof r=="function"||typeof arguments[2]=="function")throw new ge("Model.create() no longer accepts a callback");n=[...arguments],n.length>1&&!a&&n.pop(),n.length===2&&n[0]!=null&&n[1]!=null&&n[0].session==null&&a&&_Te(a.session)==="ClientSession"&&!this.schema.path("session")&&Je.warn("WARNING: to pass a `session` to `Model.create()` in Mongoose, you **must** pass an array as the first argument. See: https://mongoosejs.com/docs/api/model.html#Model.create()")}if(n.length===0)return Array.isArray(e)?[]:null;let i=[],o=typeof r.aggregateErrors=="boolean"?!r.aggregateErrors:!0;if(delete r.aggregateErrors,r.session&&!r.ordered&&n.length>1)throw new ge("Cannot call `create()` with a session and multiple documents unless `ordered: true` is set");if(r.ordered){for(let a=0;a<n.length;a++)try{let u=n[a],c=this.discriminators&&u[s]!=null?this.discriminators[u[s]]||Pf(this.discriminators,u[s]):this;if(c==null)throw new ge(`Discriminator "${u[s]}" not found for model "${this.modelName}"`);let l=u;l instanceof c||(l=new c(l)),await l.$save(r),i.push(l)}catch(u){if(!o)i.push(u);else throw u}return i}else if(!o)i=await Promise.allSettled(n.map(async a=>{let u=this.discriminators&&a[s]!=null?this.discriminators[a[s]]||Pf(this.discriminators,a[s]):this;if(u==null)throw new ge(`Discriminator "${a[s]}" not found for model "${this.modelName}"`);let c=a;return c instanceof u||(c=new u(c)),await c.$save(r),c})),i=i.map(a=>a.status==="fulfilled"?a.value:a.reason);else{let a=null;if(i=await Promise.all(n.map(async u=>{let c=this.discriminators&&u[s]!=null?this.discriminators[u[s]]||Pf(this.discriminators,u[s]):this;if(c==null)throw new ge(`Discriminator "${u[s]}" not found for model "${this.modelName}"`);try{let l=u;return l instanceof c||(l=new c(l)),await l.$save(r),l}catch(l){a||(a=l)}})),a)throw a}return!Array.isArray(e)&&n.length===1?i[0]:i};L.insertOne=async function(e,r){Ee(this,"insertOne");let n=this.schema.options.discriminatorKey,s=this.discriminators&&e[n]!=null?this.discriminators[e[n]]||Pf(this.discriminators,e[n]):this;if(s==null)throw new ge(`Discriminator "${e[n]}" not found for model "${this.modelName}"`);return e instanceof s||(e=new s(e)),await e.$save(r)};L.watch=function(t,e){Ee(this,"watch"),e=e||{};let r=e?.hydrate!==void 0?Je.omit(e,["hydrate"]):{...e};e.model=this;let n=s=>{if(t=t||[],vTe(t,this.schema,"fullDocument"),this.$__collection.buffer)this.$__collection.addQueue(()=>{if(this.closed)return;let i=this.$__collection.watch(t,r);s(null,i)});else{let i=this.$__collection.watch(t,r);s(null,i)}};return new Z5e(n,t,e)};L.startSession=function(){return Ee(this,"startSession"),this.db.startSession.apply(this.db,arguments)};L.insertMany=async function(e,r){if(Ee(this,"insertMany"),typeof r=="function"||typeof arguments[2]=="function")throw new ge("Model.insertMany() no longer accepts a callback");try{[e]=await this._middleware.execPre("insertMany",this,[e])}catch(E){await this._middleware.execPost("insertMany",this,[e],{error:E})}r=r||{};let n=this,s=r.limit||1e3,i=!!r.rawResult,o=typeof r.ordered=="boolean"?r.ordered:!0,a=typeof r.throwOnValidationError=="boolean"?r.throwOnValidationError:!1,u=!!r.lean,c=this.db.base.transactionAsyncLocalStorage?.getStore();(!r||!Object.hasOwn(r,"session"))&&c?.session!=null&&(r={...r,session:c.session}),Array.isArray(e)||(e=[e]);let l=[],p=new Map,d=o?null:new Array(e.length);async function h(E,A){if(u)return E;let x=!1;if(!(E instanceof n)){if(E!=null&&typeof E!="object")throw new tTe(E,"arr."+A,"insertMany");E=new n(E),x=!0}return r.session!=null&&E.$session(r.session),E.$validate(x?{_skipParallelValidateCheck:!0}:null).then(()=>E).catch(v=>{if(o===!1){v.index=A,l.push(v),p.set(v,A),d[A]=v;return}throw v})}let f=await CTe(e,h,s),y=new Map,g=new Map;for(let E=0;E<f.length;++E)y.set(f[E],E);let _=f.filter(function(E){return E!=null});for(let E=0;E<_.length;++E)g.set(E,y.get(_[E]));if(l.length>0&&l.sort((E,A)=>p.get(E)-p.get(A)),_.length===0){if(a)throw new Db(l,d,null,"insertMany");if(i){let E={acknowledged:!0,insertedCount:0,insertedIds:{}};return Fc(E,l,l),E}return[]}let w=u?_:_.map(function(E){return E.$__schema.options.versionKey&&(E[E.$__schema.options.versionKey]=0),r?.timestamps!==!1&&E.initializeTimestamps&&(!E.$__||E.$__.timestamps!==!1)&&E.initializeTimestamps(r?.timestamps),E.$__hasOnlyPrimitiveValues()?E.$__toObjectShallow():E.toObject(lT)}),O;try{O=await this.$__collection.insertMany(w,r)}catch(E){E.writeErrors==null&&E.result?.result?.writeErrors!=null&&(E.writeErrors=E.result.result.writeErrors);let A=E?.writeErrors,x=new Set((E?.writeErrors||[]).map(R=>R.index));if(E.writeErrors!=null)for(let R=0;R<E.writeErrors.length;++R){let M=g.get(E.writeErrors[R].index);E.writeErrors[R]={...E.writeErrors[R],index:M},o||(d[M]=E.writeErrors[R])}if(!o){for(let R=0;R<d.length;++R)d[R]===void 0&&(d[R]=f[R]);E.results=d}let v=-1;E.insertedDocs=_.filter((R,M)=>{let I=!A||x.has(M);if(o){if(v>-1)return M<v;I&&(v=M)}return!I}).map(function(M){return u||(M.$__reset(),S1(M,!1)),M}),i&&o===!1&&Fc(E,l,d),await this._middleware.execPost("insertMany",this,[e],{error:E})}if(!u)for(let E of _)E.$__reset(),S1(E,!1);if(o===!1&&a&&l.length>0){for(let E=0;E<d.length;++E)d[E]===void 0&&(d[E]=f[E]);throw new Db(l,d,O,"insertMany")}if(i){if(o===!1){for(let E=0;E<d.length;++E)d[E]===void 0&&(d[E]=f[E]);Fc(O,l,d)}return O}return r.populate!=null?this.populate(_,r.populate).catch(E=>{throw E!=null&&(E.insertedDocs=_),E}):await this._middleware.execPost("insertMany",this,[_]).then(E=>E[0])};function S1(t,e){t.$isNew=e,t.$emit("isNew",e),t.constructor.emit("isNew",e);let r=t.$getAllSubdocs({useCache:!0});for(let n of r)n.$isNew=e,n.$emit("isNew",e)}L.bulkWrite=async function(e,r){if(Ee(this,"bulkWrite"),typeof r=="function"||typeof arguments[2]=="function")throw new ge("Model.bulkWrite() no longer accepts a callback");r=r||{};try{[e,r]=await this.hooks.execPre("bulkWrite",this,[e,r])}catch(a){a instanceof If.skipWrappedFunction?e=a:await this.hooks.execPost("bulkWrite",this,[null],{error:a})}if(e instanceof If.skipWrappedFunction)return e.args[0];let n=r.ordered==null?!0:r.ordered;if(e.length===0){let a=this.base.driver.get().BulkWriteResult,u=new a(oT(),!1);return u.n=0,Fc(u,[],[]),u}let s=r?._skipCastBulkWrite?[]:e.map(a=>fTe(this,a,r)),i=this.db.base.transactionAsyncLocalStorage?.getStore();(!r||!Object.hasOwn(r,"session"))&&i?.session!=null&&(r={...r,session:i.session});let o=null;if(n){await new Promise((a,u)=>{gTe(s,(c,l)=>c(l),c=>{if(c)return u(c);a()})});try{o=await this.$__collection.bulkWrite(e,r)}catch(a){await this.hooks.execPost("bulkWrite",this,[null],{error:a})}}else{let a=[],u=[],c=[];s.length>0?(a=await Promise.all(e.map((h,f)=>f>=s.length?f:new Promise(y=>{s[f](g=>{g==null?y(f):(u.push({index:f,error:g}),c[f]=g),y()})}))),a=a.filter(h=>h!=null)):a=e.map((h,f)=>f),u=u.sort((h,f)=>h.index-f.index).map(h=>h.error);let l=a.sort().map(h=>e[h]);if(l.length===0){if(r.throwOnValidationError&&u.length)throw new Db(u,c,o,"bulkWrite");let h=this.base.driver.get().BulkWriteResult,f=new h(oT(),!1);return f.result=oT(),Fc(f,u,c),f}let p;[o,p]=await this.$__collection.bulkWrite(l,r).then(h=>[h,null]).catch(h=>[null,h]);let d={};if(p?.writeErrors)for(let h of p.writeErrors)d[h.err.index]=h;for(let h=0;h<a.length;++h)c[a[h]]=d[h]??null;if(p&&(u.length>0&&Fc(p,u,c),await this.hooks.execPost("bulkWrite",this,[null],{error:p})),u.length>0){if(r.throwOnValidationError)throw new Db(u,c,o,"bulkWrite");Fc(o,u,c)}}return await this.hooks.execPost("bulkWrite",this,[o]),o};L.bulkSave=async function(e,r){if(r=r||{},r.timestamps!=null)for(let l of e)l.$__.saveOptions=l.$__.saveOptions||{},l.$__.saveOptions.timestamps=r.timestamps;else for(let l of e)l.$__.timestamps!=null&&(l.$__.saveOptions=l.$__.saveOptions||{},l.$__.saveOptions.timestamps=l.$__.timestamps);await Promise.all(e.map(l=>qTe(l,r)));let n=this.buildBulkWriteOperations(e,r),s={skipValidation:!0,_skipCastBulkWrite:!0,...r},{bulkWriteResult:i,bulkWriteError:o}=await this.bulkWrite(n,s).then(l=>({bulkWriteResult:l,bulkWriteError:null}),l=>({bulkWriteResult:null,bulkWriteError:l}));if(o!=null&&o.name!=="MongoBulkWriteError")throw o;let a=i?.matchedCount??0,u=i?.insertedCount??0;if(n.length>0&&a+u<n.length&&!o)throw new MTe(this.modelName,e,i);let c=[];for(let l=0;l<e.length;l++){let p=e[l];o?.writeErrors.find(h=>(h.err.op._id||h.err.op.q._id).toString()===p._doc._id.toString())==null&&c.push(p)}if(await Promise.all(c.map(l=>jTe(l))),o!=null)throw o;return i};async function qTe(t,e){let[r]=await t.schema.s.hooks.execPre("save",t,[e]);if(r!==e)throw new Error('Cannot overwrite options in pre("save") hook on bulkSave()')}async function jTe(t){return t.$isNew&&S1(t,!1),t.$__reset(),t._applyVersionIncrement(),t.schema.s.hooks.execPost("save",t,[t])}L.applyDefaults=function t(e){if(e==null)return e;if(e.$__!=null){sTe(e,e.$__.fields,e.$__.exclude);for(let r of e.$getAllSubdocs())t(r,r.$__.fields,r.$__.exclude);return e}return iTe(e,this.schema),e};L.applyVirtuals=function(e,r){return e==null||e.$__!=null||dTe(this.schema,e,r),e};L.applyTimestamps=function(e,r){return e==null||e.$__!=null||pTe(this.schema,e,r),e};L.castObject=function(e,r){r=r||{};let n={},s=this.schema,i=s.options.discriminatorKey;s.discriminators!=null&&e!=null&&e[i]!=null&&(s=HZ(s,e[i])||s);let o=Object.keys(s.paths);for(let u of o){if(!s.path(u)?.$isMongooseArray)continue;let l=Nf(e,u);JZ(o,l,u)}let a=null;for(let u of o){let c=s.path(u);if(c==null)continue;let l=Nf(e,u,void 0);if(l==null)continue;let p=u.indexOf(".")===-1?[u]:u.split("."),d=n;for(let h=0;h<p.length-1;++h)d[p[h]]==null&&(d[p[h]]=isNaN(p[h+1])?{}:[]),d=d[p[h]];if(c.$isMongooseDocumentArray){let h=c.options?.castNonArrays??c.constructor.options.castNonArrays;if(!Array.isArray(l)){h?d[p[p.length-1]]=[L.castObject.call(c.Constructor,l)]:r.ignoreCastErrors||(a=a||new Tb,a.addError(u,new PTe(u,l)));continue}}if(c.$isSingleNested||c.$isMongooseDocumentArrayElement){try{l=L.castObject.call(c.Constructor,l)}catch(h){r.ignoreCastErrors||(a=a||new Tb,a.addError(u,h));continue}d[p[p.length-1]]=l;continue}try{l=c.cast(l),d[p[p.length-1]]=l}catch(h){r.ignoreCastErrors||(a=a||new Tb,a.addError(u,h));continue}}if(a!=null)throw a;return n};L.buildBulkWriteOperations=function(e,r){if(!Array.isArray(e))throw new Error(`bulkSave expects an array of documents to be passed, received \`${e}\` instead`);return s(),e.map((i,o)=>{if(!r.skipValidation){if(!(i instanceof no))throw new Error(`documents.${o} was not a mongoose document, documents must be an array of mongoose documents (instanceof mongoose.Document).`);if(r.validateBeforeSave==null||r.validateBeforeSave){let l=i.validateSync();if(l!=null)throw l}}if(i.isNew){let l={insertOne:{document:i}};return Je.injectTimestampsOption(l.insertOne,r.timestamps),l}let u=i.$__delta();if(u!=null&&!Je.isEmptyObject(u[0])){let l=i.$__where(u[0]),p=u[1];cT(i,l);let d=this.schema.options.shardKey;if(d){let f=Object.keys(d),y=f.length;for(let g=0;g<y;++g)l[f[g]]=i[f[g]]}i.$__version(l,u);let h={updateOne:{filter:l,update:p}};return Je.injectTimestampsOption(h.updateOne,r.timestamps),h}return null}).filter(i=>i!==null);function s(){r=r||{},r.skipValidation==null&&(r.skipValidation=!1)}};L.hydrate=function(t,e,r){if(Ee(this,"hydrate"),r?.virtuals&&r?.hydratedPopulatedDocs===!1)throw new ge("Cannot set `hydratedPopulatedDocs` option to false if `virtuals` option is truthy because `virtuals: true` also sets populated virtuals");e!=null&&(t?.$__!=null&&(t=t.toObject(lT)),t=uTe(t,e));let n=$h().createModel(this,t,e);return n.$init(t,r),n};L.updateMany=function(e,r,n){if(Ee(this,"updateMany"),r==null)throw new ge("updateMany `update` parameter cannot be nullish");return hT(this,"updateMany",e,r,n)};L.updateOne=function(e,r,n){return Ee(this,"updateOne"),hT(this,"updateOne",e,r,n)};L.replaceOne=function(e,r,n){Ee(this,"replaceOne");let s=this?.schema?.options?.versionKey||null;return s&&!r[s]&&(r[s]=0),hT(this,"replaceOne",e,r,n)};function hT(t,e,r,n,s){let i=new t.Query({},{},t,t.collection);r instanceof no?r=r.toObject():r=Xo(r),s=typeof s=="function"?s:Xo(s);let o=t?.schema?.options?.versionKey||null;return KZ(n,s,o),i[e](r,n,s)}L.aggregate=function(e,r){if(Ee(this,"aggregate"),typeof r=="function"||typeof arguments[2]=="function")throw new ge("Model.aggregate() no longer accepts a callback");let n=new X5e(e||[]);return n.model(this),r!=null&&n.option(r),n};L.validate=async function(e,r,n){if((arguments.length<3||arguments.length===3&&typeof arguments[2]=="function")&&(n=e),typeof n=="function"||typeof arguments[3]=="function")throw new ge("Model.validate() no longer accepts a callback");let s=this.schema,i=s.options.discriminatorKey;s.discriminators!=null&&e!=null&&e[i]!=null&&(s=HZ(s,e[i])||s);let o=Object.keys(s.paths);if(r!=null){let c=typeof r=="string"?new Set(r.split(" ")):Array.isArray(r)?new Set(r):new Set(o);o=o.filter(l=>{if(r.pathsToSkip){if(Array.isArray(r.pathsToSkip)){if(r.pathsToSkip.find(h=>h==l))return!1}else if(typeof r.pathsToSkip=="string"&&r.pathsToSkip.includes(l))return!1}let p=l.split("."),d=p[0];for(let h of p){if(c.has(d))return!0;d+="."+h}return c.has(l)})}for(let c of o){let l=s.path(c);if(!l?.$isMongooseArray||l.$isMongooseDocumentArray)continue;let p=Nf(e,c);JZ(o,p,c)}let a=null;o=new Set(o);try{e=this.castObject(e)}catch(c){a=c;for(let l of Object.keys(a.errors||{}))o.delete(l)}let u=[];for(let c of o){let l=s.path(c);if(l==null)continue;let p=c.indexOf(".")===-1?[c]:c.split("."),d=e;for(let f=0;f<p.length-1;++f)d=d[p[f]];let h=Nf(e,c,void 0);u.push(l.doValidate(h,n,{path:c}).catch(f=>{a=a||new Tb,a.addError(c,f)}))}if(await Promise.all(u),a!=null)throw a;return e};L.populate=async function(e,r){if(Ee(this,"populate"),typeof r=="function"||typeof arguments[2]=="function")throw new ge("Model.populate() no longer accepts a callback");if(r=Je.populate(r),r.length===0)return e;if(r.find(n=>n.ordered))for(let n of r)await $Z(this,e,n);else{let n=[];for(let s of r)n.push($Z(this,e,s));await Promise.all(n)}return e};var LTe=/\s?-_id\s?/,UTe=/\s?-_id\s?/g;async function $Z(t,e,r){if(r.strictPopulate==null&&(r._localModel?.schema._userProvidedOptions.strictPopulate!=null?r.strictPopulate=r._localModel.schema._userProvidedOptions.strictPopulate:(r._localModel!=null&&t.base.options.strictPopulate!=null||t.base.options.strictPopulate!=null)&&(r.strictPopulate=t.base.options.strictPopulate)),Array.isArray(e)||(e=[e]),e.length===0||e.every(Je.isNullOrUndefined))return;let n=ETe(t,e,r);if(n instanceof ge)throw n;let s=n.length,i=[];function o(c){return c!==void 0}let a=!1,u=[];for(let c=0;c<s;++c){let l=n[c],p=l.options.select,d=Je.array.flatten(l.ids,o);d=Je.array.unique(d);let h={};if(h.sort=l&&l.options&&l.options.options&&l.options.options.sort||void 0,h.excludeId=LTe.test(p)||p&&p._id===0,l.options&&l.options.options&&l.options.options.lean&&l.options.options.lean.transform&&(l.options.options._leanTransform=l.options.options.lean.transform,l.options.options.lean=!0),d.length===0||d.every(Je.isNullOrUndefined)){jZ(t,[],l,h);continue}a=!0,typeof r.foreignField=="string"&&(l.foreignField.clear(),l.foreignField.add(r.foreignField));let f=mTe(d,l.match,l.foreignField,l.model,l.options.skipInvalidIds);h.excludeId&&(typeof p=="string"?p=p.replace(UTe," "):Array.isArray(p)?p=p.filter(y=>y!=="-_id"):(p={...p},delete p._id)),l.options.options?.limit!=null?h.originalLimit=l.options.options.limit:l.options.limit!=null&&(h.originalLimit=l.options.limit),u.push([l,f,p,h])}if(!a){if(n.length!==0)return;if(r.populate!=null){let c=Je.populate(r.populate).map(l=>Object.assign({},l,{path:r.path+"."+l.path}));return t.populate(e,c)}return}if(r.ordered)for(let c of u)await qZ.apply(null,c).then(l=>{i=i.concat(l)});else{let c=[];for(let l of u)c.push(qZ.apply(null,l).then(p=>{i=i.concat(p)}));await Promise.all(c)}for(let c of u){let l=c[0],p=c[3];for(let d of i)l.options._childDocs.push(d);jZ(t,i,l,p)}for(let c of u)xTe(c[0].foreignField,c[0].options,i);for(let c of u){let l=c[0];if(l.options?.options?._leanTransform)for(let p of i)l.options.options._leanTransform(p)}}function qZ(t,e,r){let n=Xo(t.options.populate),s={};t.options.skip!==void 0&&(s.skip=t.options.skip),t.options.limit!==void 0&&(s.limit=t.options.limit),t.options.perDocumentLimit!==void 0&&(s.perDocumentLimit=t.options.perDocumentLimit),Object.assign(s,t.options.options),t.count&&delete s.skip,s.perDocumentLimit!=null?(s.limit=s.perDocumentLimit,delete s.perDocumentLimit):s.limit!=null&&(s.limit=s.limit*t.ids.length);let i=t.model.find(e,r,s);for(let o of t.foreignField)o!=="_id"&&i.selectedInclusively()&&!ATe(i._fields,o)&&i.select(o);if(t.count)for(let o of t.foreignField)i.select(o);if(n){t.model.baseModelName!=null&&(Array.isArray(n)?n.forEach(a=>{a.strictPopulate=!1}):typeof n=="string"?n={path:n,strictPopulate:!1}:n.strictPopulate=!1);let o=t.options._fullPath||t.options.path;if(Array.isArray(n))for(let a of n)a._fullPath=o+"."+a.path;else typeof n=="object"&&(n._fullPath=o+"."+n.path);i.populate(n)}return i.exec().then(o=>{for(let a of o)OTe.set(a,t.model);return o})}function jZ(t,e,r,n){let s=r.options,i=r.isVirtual,o=r.justOne,a,u=s&&s.options&&s.options.lean||!1,c=e.length,l={},p={},d,h,f=Xo(r.allIds);for(let y=0;y<c;y++)if(h=e[y],h!=null)for(let g of r.foreignField){if(a=Je.getValue(g,h),Array.isArray(a)){a=Je.array.unique(Je.array.flatten(a));for(let _ of a)_ instanceof no&&(_=_._doc._id),d=String(_),p[d]?Array.isArray(p[d])?(p[d].push(h),l[d].push(y)):(p[d]=[p[d],h],l[d]=[l[d],y]):i&&!o?(p[d]=[h],l[d]=[y]):(p[d]=h,l[d]=y)}else a instanceof no&&(a=a._doc._id),d=String(a),p[d]?Array.isArray(p[d])?(p[d].push(h),l[d].push(y)):(i||p[d].constructor!==h.constructor||(p[d]instanceof no?String(p[d]._doc._id):String(p[d]._id))!==(h instanceof no?String(h._doc._id):String(h._id)))&&(p[d]=[p[d],h],l[d]=[l[d],y]):(p[d]=h,l[d]=y);u||(h.$__.wasPopulated=h.$__.wasPopulated||{value:a})}hTe({originalModel:t,rawIds:r.isVirtual?f:r.allIds,allIds:f,unpopulatedValues:r.unpopulatedValues,foreignField:r.foreignField,rawDocs:p,rawOrder:l,docs:r.docs,path:s.path,options:n,justOne:r.justOne,isVirtual:r.isVirtual,allOptions:r,populatedModel:r.model,lean:u,virtual:r.virtual,count:r.count,match:r.match})}L.compile=function(e,r,n,s,i){if(r.options.versionKey!==!1&&!r.paths[r.options.versionKey]){let p={};p[r.options.versionKey]=Number,r.add(p)}let a;typeof e=="function"&&e.prototype instanceof L?(a=e,e=a.name,r.loadClass(a,!1),a.prototype.$isMongooseModelPrototype=!0):a=function p(d,h,f){if(p.hooks.execPreSync("createModel",d),!(this instanceof p))return new p(d,h,f);let y=p.schema.options.discriminatorKey;if(p.discriminators==null||d==null||d[y]==null){L.call(this,d,h,f);return}let g=p.discriminators[d[y]]||Pf(p.discriminators,d[y]);if(g!=null)return new g(d,h,f);L.call(this,d,h,f)},a.hooks=r.s.hooks.clone(),a.base=i,a.modelName=e,a.prototype instanceof L||(Object.setPrototypeOf(a,L),Object.setPrototypeOf(a.prototype,L.prototype)),a.model=function(d){return this.db.model(d)},a.db=s,a.prototype.db=s,a.prototype[qc]=s,a.discriminators=a.prototype.discriminators=void 0,a[YZ]=!0,a.events=new aT,r._preCompile();let c={schemaUserProvidedOptions:r._userProvidedOptions||{},capped:r.options.capped,Promise:a.base.Promise,modelName:e};r.options.autoCreate!==void 0&&(c.autoCreate=r.options.autoCreate);let l=s.collection(n,c);return a.prototype.collection=l,a.prototype.$collection=l,a.prototype[$c]=l,a.prototype.$__setSchema(r),UZ(a,r),WZ(a,r),aTe(a,r),lTe(a,r.s.hooks,r.statics),a.schema=a.prototype.$__schema,a.collection=l,a.$__collection=l,a.Query=function(){xb.apply(this,arguments)},Object.setPrototypeOf(a.Query.prototype,xb.prototype),a.Query.base=xb.base,a.Query.prototype.constructor=xb,a._applyQueryMiddleware(),VTe(a,r.query),a};L.clientEncryption=function(){let e=this.base.driver.get().ClientEncryption;if(!e)throw new Error("The mongodb driver must be used to obtain a ClientEncryption object.");let r=this.collection?.conn?.client;if(!r)return null;let n=r.options.autoEncryption;if(!n)return null;let{keyVaultNamespace:s,keyVaultClient:i,kmsProviders:o,credentialProviders:a,proxyOptions:u,tlsOptions:c}=n;return new e(i??r,{keyVaultNamespace:s,kmsProviders:o,credentialProviders:a,proxyOptions:u,tlsOptions:c})};L.$__updateConnection=function(e){this.db=e,this.prototype.db=e,this.prototype[qc]=e;let r=e.collection(this.collection.collectionName,this.collection.opts);this.prototype.collection=r,this.prototype.$collection=r,this.prototype[$c]=r,this.collection=r,this.$__collection=r};function VTe(t,e){for(let r in e)t.Query.prototype[r]=e[r]}L.__subclass=function(e,r,n){let s=this,i=function l(p,d,h){if(!(this instanceof l))return new l(p,d,h);s.call(this,p,d,h)};if(Object.setPrototypeOf(i,s),Object.setPrototypeOf(i.prototype,s.prototype),i.db=e,i.prototype.db=e,i.prototype[qc]=e,s[Bf]=s[Bf]||[],s[Bf].push(i),s.discriminators!=null){i.discriminators={};for(let l of Object.keys(s.discriminators))i.discriminators[l]=s.discriminators[l].__subclass(s.db,s.discriminators[l].schema,n)}let o=r&&typeof r!="string"?r:s.prototype.$__schema,a=o.options||{},u=o._userProvidedOptions||{};n||(n=s.prototype.$__schema.get("collection")||Je.toCollectionName(s.modelName,this.base.pluralize()));let c={schemaUserProvidedOptions:u,capped:o&&a.capped};return i.prototype.collection=e.collection(n,c),i.prototype.$collection=i.prototype.collection,i.prototype[$c]=i.prototype.collection,i.collection=i.prototype.collection,i.$__collection=i.collection,i.init().catch(()=>{}),i};L.recompileSchema=function(){if(this.prototype.$__setSchema(this.schema),this.schema._applyDiscriminators!=null)for(let e of this.schema._applyDiscriminators.keys())this.discriminator(e,this.schema._applyDiscriminators.get(e));delete this.schema._defaultToObjectOptionsMap,oTe(this.schema,new WeakSet,!0)};L.inspect=function(){return`Model { ${this.modelName} }`};L.namespace=function(){return this.db.name+"."+this.collection.collectionName};kZ.inspect.custom&&(L[kZ.inspect.custom]=L.inspect);L._applyQueryMiddleware=function(){let e=this.Query,r=this.schema.s.hooks.filter(n=>{let s=WTe(n);return n.name==="validate"?!!s.query:n.name==="deleteOne"||n.name==="updateOne"?!!s.query||Je.hasOwnKeys(s)===!1:n.query!=null||n.document!=null?!!n.query:!0});e.prototype._queryMiddleware=r};function WTe(t){let e={};return Object.hasOwn(t,"query")&&(e.query=t.query),Object.hasOwn(t,"document")&&(e.document=t.document),e}XZ.exports=QZ=L});var eee=m((kf,ZZ)=>{"use strict";ZZ.exports=HTe;kf.pluralization=[[/human$/gi,"humans"],[/(m|wom)an$/gi,"$1en"],[/(pe)rson$/gi,"$1ople"],[/(child)$/gi,"$1ren"],[/^(ox)$/gi,"$1en"],[/(ax|test)is$/gi,"$1es"],[/(octop|cact|foc|fung|nucle)us$/gi,"$1i"],[/(alias|status|virus)$/gi,"$1es"],[/(bu)s$/gi,"$1ses"],[/(buffal|tomat|potat)o$/gi,"$1oes"],[/([ti])um$/gi,"$1a"],[/sis$/gi,"ses"],[/(?:([^f])fe|([lr])f)$/gi,"$1$2ves"],[/(hive)$/gi,"$1s"],[/([^aeiouy]|qu)y$/gi,"$1ies"],[/(x|ch|ss|sh)$/gi,"$1es"],[/(matr|vert|ind)ix|ex$/gi,"$1ices"],[/([m|l])ouse$/gi,"$1ice"],[/(kn|w|l)ife$/gi,"$1ives"],[/(quiz)$/gi,"$1zes"],[/^goose$/i,"geese"],[/s$/gi,"s"],[/([^a-z])$/,"$1"],[/$/gi,"s"]];var zTe=kf.pluralization;kf.uncountables=["advice","energy","excretion","digestion","cooperation","health","justice","labour","machinery","equipment","information","pollution","sewage","paper","money","species","series","rain","rice","fish","sheep","moose","deer","news","expertise","status","media"];var KTe=kf.uncountables;function HTe(t){let e;return t=t.toLowerCase(),!~KTe.indexOf(t)&&(e=zTe.filter(function(r){return t.match(r[0])}),e[0])?t.replace(e[0][0],e[0][1]):t}});var iee=m((eLe,see)=>{"use strict";var nee=we(),tee=require("util"),ree=k8(),cu=class t extends nee{constructor(){super(""),this.errors={}}toString(){return ree(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(e,r){if(r instanceof t){let{errors:n}=r;for(let s of Object.keys(n))this.addError(s,n[s]);return}this.errors[e]=r,this.message=ree(this)}};tee.inspect.custom&&(cu.prototype[tee.inspect.custom]=cu.prototype.inspect);Object.defineProperty(cu.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(cu.prototype,"name",{value:"SetOptionError"});var fT=class extends nee{constructor(e){super(`"${e}" is not a valid option to set`)}};cu.SetOptionInnerError=fT;see.exports=cu});var aee=m(()=>{"use strict";var oee=ae();typeof jest<"u"&&!process.env.SUPPRESS_JEST_WARNINGS&&(typeof window<"u"&&oee.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's default jsdom test environment. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning."),typeof setTimeout.clock?.Date=="function"&&oee.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's mock timers enabled. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning."))});var yee=m((fee,mee)=>{"use strict";var GTe=Zi(),JTe=require("events").EventEmitter,mT=fc(),Zo=Oc(),YTe=kt(),Rf=Qh(),QTe=lE(),Bb=kd(),uee=xY(),XTe=e1(),ZTe=db(),cee=K5(),eDe=H7(),tDe=E7(),lee=YE(),rDe=eee(),Ib=ae(),nDe=h5(),sDe=xc(),iDe=U5(),oDe=Lp().trusted,aDe=I5(),uDe=$r(),A1=we(),Pb=iee(),cDe=W5(),pee=Symbol.for("mongoose:default"),dee=Symbol("mongoose:defaultConnection");aee();var lDe=/^[0-9A-Fa-f]{24}$/,{AsyncLocalStorage:hee}=require("async_hooks");function G(t){if(this.connections=[],this.nextConnectionId=0,this.models={},this.events=new JTe,this.__driver=lee.get(),this.options=Object.assign({pluralization:!0,autoIndex:!0,autoCreate:!0,autoSearchIndex:!1},t),(Ib.getOption("createInitialConnection",this.options)??!0)&&this.__driver!=null&&yT(this),this.options.pluralization&&(this._pluralize=rDe),t?.[pee])for(let r of["Schema","model"])this[r]=G.prototype[r];else{let r=this;this.Schema=function(){return this.base=r,Zo.apply(this,arguments)},this.Schema.prototype=Object.create(Zo.prototype),Object.assign(this.Schema,Zo),this.Schema.base=this,this.Schema.Types=Object.assign({},Zo.Types)}this.Schema.prototype.base=this,t?.transactionAsyncLocalStorage&&(this.transactionAsyncLocalStorage=new hee),Object.defineProperty(this,"plugins",{configurable:!1,enumerable:!0,writable:!1,value:Object.values(tDe).map(r=>[r,{deduplicate:!0}])})}G.prototype.cast=sDe;G.prototype.STATES=Bb;G.prototype.ConnectionStates=Bb;G.prototype.driver=lee;G.prototype.setDriver=function(e){let r=this instanceof G?this:an;if(r.__driver===e)return r;if(r.connections&&r.connections.find(o=>o.readyState!==Bb.disconnected)){let o="Cannot modify Mongoose driver if a connection is already open. Call `mongoose.disconnect()` before modifying the driver";throw new A1(o)}if(r.__driver=e,Array.isArray(e.plugins))for(let o of e.plugins)typeof o=="function"&&r.plugin(o);e.SchemaTypes!=null&&Object.assign(an.Schema.Types,e.SchemaTypes);let s=e.Connection,i=r.connections[0];if(r.connections=[new s(r)],r.connections[0].models=r.models,i==null)return r;for(let o of Object.values(r.models))o.db===i&&o.$__updateConnection(r.connections[0]);return r};G.prototype.set=function(e,r){let n=this instanceof G?this:an;if(arguments.length===1&&typeof e!="object"){if(uee.indexOf(e)===-1){let o=new Pb;throw o.addError(e,new Pb.SetOptionInnerError(e)),o}return n.options[e]}let s={};arguments.length===2&&(s={[e]:r}),arguments.length===1&&typeof e=="object"&&(s=e);let i;for(let[o,a]of Object.entries(s)){if(uee.indexOf(o)===-1){i||(i=new Pb),i.addError(o,new Pb.SetOptionInnerError(o));continue}n.options[o]=a,o==="objectIdGetter"?a?Object.defineProperty(n.Types.ObjectId.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}}):delete n.Types.ObjectId.prototype._id:o==="transactionAsyncLocalStorage"?a&&!n.transactionAsyncLocalStorage?n.transactionAsyncLocalStorage=new hee:!a&&n.transactionAsyncLocalStorage&&delete n.transactionAsyncLocalStorage:o==="createInitialConnection"&&(a&&!n.connection?yT(n):a===!1&&n.connection?.[dee]&&n.connection.readyState===Bb.disconnected&&Ib.hasOwnKeys(n.connection.models)===!1&&n.connections.shift())}if(i)throw i;return n};G.prototype.get=G.prototype.set;G.prototype.createConnection=function(e,r){let n=this instanceof G?this:an,s=n.__driver.Connection,i=new s(n);return n.connections.push(i),n.nextConnectionId++,n.events.emit("createConnection",i),arguments.length>0&&i.openUri(e,{...r,_fireAndForget:!0}),i};G.prototype.connect=async function(e,r){if(typeof r=="function"||arguments.length>=3&&typeof arguments[2]=="function")throw new A1("Mongoose.prototype.connect() no longer accepts a callback");let n=this instanceof G?this:an;return n.connection==null&&yT(n),n.connection.openUri(e,r).then(()=>n)};G.prototype.disconnect=async function(){if(arguments.length>=1&&typeof arguments[0]=="function")throw new A1("Mongoose.prototype.disconnect() no longer accepts a callback");let e=this instanceof G?this:an;e.connections.length<=0||await Promise.all(e.connections.map(n=>n.close()))};G.prototype.startSession=function(){let e=this instanceof G?this:an;return e.connection.startSession.apply(e.connection,arguments)};G.prototype.pluralize=function(e){let r=this instanceof G?this:an;return arguments.length>0&&(r._pluralize=e),r._pluralize};G.prototype.model=function(e,r,n,s){let i=this instanceof G?this:an;if(typeof r=="string"&&(n=r,r=!1),arguments.length===1){let c=i.models[e];if(!c)throw new i.Error.MissingSchemaError(e);return c}if(Ib.isObject(r)&&!(r instanceof Zo)&&(r=new Zo(r)),r&&!(r instanceof Zo))throw new i.Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");s=s||{};let o=r;r&&(i.get("cloneSchemas")&&(r=r.clone()),i._applyPlugins(r));let a=Object.hasOwn(i.options,"overwriteModels")?i.options.overwriteModels:s.overwriteModels;if(Object.hasOwn(i.models,e)&&s.cache!==!1&&a!==!0){if(o?.instanceOfSchema&&o!==i.models[e].schema)throw new i.Error.OverwriteModelError(e);if(n&&n!==i.models[e].collection.name){let c=i.models[e];return r=c.prototype.schema,c.__subclass(i.connection,r,n)}return i.models[e]}if(r==null)throw new i.Error.MissingSchemaError(e);let u=i._model(e,r,n,s);return i.connection.models[e]=u,i.models[e]=u,u};G.prototype._model=function(e,r,n,s){let i=this instanceof G?this:an,o;if(typeof e=="function"&&(o=e,e=o.name,!(o.prototype instanceof cee)))throw new i.Error("The provided class "+e+" must extend Model");r&&(i.get("cloneSchemas")&&(r=r.clone()),i._applyPlugins(r)),(r==null||!("pluralization"in r.options))&&(r.options.pluralization=i.options.pluralization),n||(n=r.get("collection")||Ib.toCollectionName(e,i.pluralize())),cDe(r);let a=s.connection||i.connection;if(o=i.Model.compile(o||e,r,n,a,i),o.init().catch(function(){}),a.emit("model",o),r._applyDiscriminators!=null)for(let u of r._applyDiscriminators.keys()){let{schema:c,options:l}=r._applyDiscriminators.get(u);o.discriminator(u,c,l)}return o};G.prototype.deleteModel=function(e){let r=this instanceof G?this:an;return r.connection.deleteModel(e),delete r.models[e],r};G.prototype.modelNames=function(){let e=this instanceof G?this:an;return Object.keys(e.models)};G.prototype._applyPlugins=function(e,r){let n=this instanceof G?this:an;r=r||{},r.applyPluginsToDiscriminators=n.options?.applyPluginsToDiscriminators||!1,r.applyPluginsToChildSchemas=typeof n.options?.applyPluginsToChildSchemas=="boolean"?n.options.applyPluginsToChildSchemas:!0,eDe(e,n.plugins,r,"$globalPluginsApplied")};G.prototype.plugin=function(e,r){let n=this instanceof G?this:an;return n.plugins.push([e,r]),n};G.prototype.__defineGetter__("connection",function(){return this.connections[0]});G.prototype.__defineSetter__("connection",function(t){t instanceof this.__driver.Connection&&(this.connections[0]=t,this.models=t.models)});G.prototype.connections;G.prototype.nextConnectionId;G.prototype.Aggregate=iDe;G.prototype.BaseCollection=RO();Object.defineProperty(G.prototype,"Collection",{get:function(){return this.__driver.Collection},set:function(t){this.__driver.Collection=t}});Object.defineProperty(G.prototype,"Connection",{get:function(){return this.__driver.Connection},set:function(t){t!==this.__driver.Connection&&(this.__driver.Connection=t)}});G.prototype.BaseConnection=d5();G.prototype.version=nDe.version;G.prototype.Mongoose=G;G.prototype.Schema=Zo;G.prototype.SchemaType=YTe;G.prototype.SchemaTypes=Zo.Types;G.prototype.VirtualType=QTe;G.prototype.Types=XTe;G.prototype.Query=ZTe;G.prototype.Model=cee;G.prototype.Document=GTe;G.prototype.ObjectId=Rf.ObjectId;G.prototype.isValidObjectId=function(e){return(this instanceof G?this:an).Types.ObjectId.isValid(e)};G.prototype.isObjectIdOrHexString=function(e){return uDe(e,"ObjectId")||typeof e=="string"&&lDe.test(e)};G.prototype.syncIndexes=function(e){return(this instanceof G?this:an).connection.syncIndexes(e)};G.prototype.Decimal128=Rf.Decimal128;G.prototype.Mixed=Rf.Mixed;G.prototype.Date=Rf.Date;G.prototype.Number=Rf.Number;G.prototype.Error=A1;G.prototype.MongooseError=A1;G.prototype.now=function(){return new Date};G.prototype.CastError=A1.CastError;G.prototype.SchemaTypeOptions=qn();G.prototype.mquery=P5();G.prototype.sanitizeFilter=aDe;G.prototype.trusted=oDe;G.prototype.skipMiddlewareFunction=mT.skipWrappedFunction;G.prototype.overwriteMiddlewareResult=mT.overwriteResult;G.prototype.overwriteMiddlewareArguments=mT.overwriteArguments;G.prototype.omitUndefined=Wx();function yT(t){if(t.connection)return;let e=t.createConnection();e[dee]=!0,e.models=t.models}var an=mee.exports=fee=new G({[pee]:!0})});var Eee=m((nLe,_ee)=>{"use strict";var gee=CY();YE().set(gee);var gT=yee();gT.setDriver(gee);gT.Mongoose.prototype.mongo=ka();_ee.exports=gT});var Ff=m((sLe,ce)=>{"use strict";var le=Eee();ce.exports=le;ce.exports.default=le;ce.exports.mongoose=le;ce.exports.cast=le.cast;ce.exports.STATES=le.STATES;ce.exports.setDriver=le.setDriver;ce.exports.set=le.set;ce.exports.get=le.get;ce.exports.createConnection=le.createConnection;ce.exports.connect=le.connect;ce.exports.disconnect=le.disconnect;ce.exports.startSession=le.startSession;ce.exports.pluralize=le.pluralize;ce.exports.model=le.model;ce.exports.deleteModel=le.deleteModel;ce.exports.modelNames=le.modelNames;ce.exports.plugin=le.plugin;ce.exports.connections=le.connections;ce.exports.version=le.version;ce.exports.Aggregate=le.Aggregate;ce.exports.Mongoose=le.Mongoose;ce.exports.Schema=le.Schema;ce.exports.SchemaType=le.SchemaType;ce.exports.SchemaTypes=le.SchemaTypes;ce.exports.VirtualType=le.VirtualType;ce.exports.Types=le.Types;ce.exports.Query=le.Query;ce.exports.Model=le.Model;ce.exports.Document=le.Document;ce.exports.ObjectId=le.ObjectId;ce.exports.isValidObjectId=le.isValidObjectId;ce.exports.isObjectIdOrHexString=le.isObjectIdOrHexString;ce.exports.syncIndexes=le.syncIndexes;ce.exports.Decimal128=le.Decimal128;ce.exports.Mixed=le.Mixed;ce.exports.Date=le.Date;ce.exports.Number=le.Number;ce.exports.Error=le.Error;ce.exports.MongooseError=le.MongooseError;ce.exports.now=le.now;ce.exports.CastError=le.CastError;ce.exports.SchemaTypeOptions=le.SchemaTypeOptions;ce.exports.mongo=le.mongo;ce.exports.mquery=le.mquery;ce.exports.sanitizeFilter=le.sanitizeFilter;ce.exports.trusted=le.trusted;ce.exports.skipMiddlewareFunction=le.skipMiddlewareFunction;ce.exports.overwriteMiddlewareResult=le.overwriteMiddlewareResult});var vee=m(($Le,mDe)=>{mDe.exports={name:"dotenv",version:"17.2.3",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard",pretest:"npm run lint && npm run dts-check",test:"tap run tests/**/*.js --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run tests/**/*.js --show-full-coverage --timeout=60000 --coverage-report=text --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},homepage:"https://github.com/motdotla/dotenv#readme",funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^18.11.3",decache:"^4.6.2",sinon:"^14.0.1",standard:"^17.0.0","standard-version":"^9.5.0",tap:"^19.2.0",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var Bee=m((qLe,ea)=>{var ET=require("fs"),$b=require("path"),yDe=require("os"),gDe=require("crypto"),_De=vee(),bT=_De.version,xee=["\u{1F510} encrypt with Dotenvx: https://dotenvx.com","\u{1F510} prevent committing .env to code: https://dotenvx.com/precommit","\u{1F510} prevent building .env in docker: https://dotenvx.com/prebuild","\u{1F4E1} add observability to secrets: https://dotenvx.com/ops","\u{1F465} sync secrets across teammates & machines: https://dotenvx.com/ops","\u{1F5C2}\uFE0F backup and recover secrets: https://dotenvx.com/ops","\u2705 audit secrets and track compliance: https://dotenvx.com/ops","\u{1F504} add secrets lifecycle management: https://dotenvx.com/ops","\u{1F511} add access controls to secrets: https://dotenvx.com/ops","\u{1F6E0}\uFE0F  run anywhere with `dotenvx run -- yourcommand`","\u2699\uFE0F  specify custom .env file path with { path: '/custom/path/.env' }","\u2699\uFE0F  enable debug logging with { debug: true }","\u2699\uFE0F  override existing env vars with { override: true }","\u2699\uFE0F  suppress all logs with { quiet: true }","\u2699\uFE0F  write to custom object with { processEnv: myObject }","\u2699\uFE0F  load multiple .env files with { path: ['.env.local', '.env'] }"];function EDe(){return xee[Math.floor(Math.random()*xee.length)]}function C1(t){return typeof t=="string"?!["false","0","no","off",""].includes(t.toLowerCase()):!!t}function bDe(){return process.stdout.isTTY}function wDe(t){return bDe()?`\x1B[2m${t}\x1B[0m`:t}var SDe=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function ADe(t){let e={},r=t.toString();r=r.replace(/\r\n?/mg,`
`);let n;for(;(n=SDe.exec(r))!=null;){let s=n[1],i=n[2]||"";i=i.trim();let o=i[0];i=i.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),o==='"'&&(i=i.replace(/\\n/g,`
`),i=i.replace(/\\r/g,"\r")),e[s]=i}return e}function ODe(t){t=t||{};let e=Pee(t);t.path=e;let r=pr.configDotenv(t);if(!r.parsed){let o=new Error(`MISSING_DATA: Cannot parse ${e} for an unknown reason`);throw o.code="MISSING_DATA",o}let n=Mee(t).split(","),s=n.length,i;for(let o=0;o<s;o++)try{let a=n[o].trim(),u=vDe(r,a);i=pr.decrypt(u.ciphertext,u.key);break}catch(a){if(o+1>=s)throw a}return pr.parse(i)}function CDe(t){console.error(`[dotenv@${bT}][WARN] ${t}`)}function $f(t){console.log(`[dotenv@${bT}][DEBUG] ${t}`)}function Dee(t){console.log(`[dotenv@${bT}] ${t}`)}function Mee(t){return t&&t.DOTENV_KEY&&t.DOTENV_KEY.length>0?t.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function vDe(t,e){let r;try{r=new URL(e)}catch(a){if(a.code==="ERR_INVALID_URL"){let u=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw u.code="INVALID_DOTENV_KEY",u}throw a}let n=r.password;if(!n){let a=new Error("INVALID_DOTENV_KEY: Missing key part");throw a.code="INVALID_DOTENV_KEY",a}let s=r.searchParams.get("environment");if(!s){let a=new Error("INVALID_DOTENV_KEY: Missing environment part");throw a.code="INVALID_DOTENV_KEY",a}let i=`DOTENV_VAULT_${s.toUpperCase()}`,o=t.parsed[i];if(!o){let a=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${i} in your .env.vault file.`);throw a.code="NOT_FOUND_DOTENV_ENVIRONMENT",a}return{ciphertext:o,key:n}}function Pee(t){let e=null;if(t&&t.path&&t.path.length>0)if(Array.isArray(t.path))for(let r of t.path)ET.existsSync(r)&&(e=r.endsWith(".vault")?r:`${r}.vault`);else e=t.path.endsWith(".vault")?t.path:`${t.path}.vault`;else e=$b.resolve(process.cwd(),".env.vault");return ET.existsSync(e)?e:null}function Tee(t){return t[0]==="~"?$b.join(yDe.homedir(),t.slice(1)):t}function xDe(t){let e=C1(process.env.DOTENV_CONFIG_DEBUG||t&&t.debug),r=C1(process.env.DOTENV_CONFIG_QUIET||t&&t.quiet);(e||!r)&&Dee("Loading env from encrypted .env.vault");let n=pr._parseVault(t),s=process.env;return t&&t.processEnv!=null&&(s=t.processEnv),pr.populate(s,n,t),{parsed:n}}function TDe(t){let e=$b.resolve(process.cwd(),".env"),r="utf8",n=process.env;t&&t.processEnv!=null&&(n=t.processEnv);let s=C1(n.DOTENV_CONFIG_DEBUG||t&&t.debug),i=C1(n.DOTENV_CONFIG_QUIET||t&&t.quiet);t&&t.encoding?r=t.encoding:s&&$f("No encoding is specified. UTF-8 is used by default");let o=[e];if(t&&t.path)if(!Array.isArray(t.path))o=[Tee(t.path)];else{o=[];for(let l of t.path)o.push(Tee(l))}let a,u={};for(let l of o)try{let p=pr.parse(ET.readFileSync(l,{encoding:r}));pr.populate(u,p,t)}catch(p){s&&$f(`Failed to load ${l} ${p.message}`),a=p}let c=pr.populate(n,u,t);if(s=C1(n.DOTENV_CONFIG_DEBUG||s),i=C1(n.DOTENV_CONFIG_QUIET||i),s||!i){let l=Object.keys(c).length,p=[];for(let d of o)try{let h=$b.relative(process.cwd(),d);p.push(h)}catch(h){s&&$f(`Failed to load ${d} ${h.message}`),a=h}Dee(`injecting env (${l}) from ${p.join(",")} ${wDe(`-- tip: ${EDe()}`)}`)}return a?{parsed:u,error:a}:{parsed:u}}function DDe(t){if(Mee(t).length===0)return pr.configDotenv(t);let e=Pee(t);return e?pr._configVault(t):(CDe(`You set DOTENV_KEY but you are missing a .env.vault file at ${e}. Did you forget to build it?`),pr.configDotenv(t))}function MDe(t,e){let r=Buffer.from(e.slice(-64),"hex"),n=Buffer.from(t,"base64"),s=n.subarray(0,12),i=n.subarray(-16);n=n.subarray(12,-16);try{let o=gDe.createDecipheriv("aes-256-gcm",r,s);return o.setAuthTag(i),`${o.update(n)}${o.final()}`}catch(o){let a=o instanceof RangeError,u=o.message==="Invalid key length",c=o.message==="Unsupported state or unable to authenticate data";if(a||u){let l=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw l.code="INVALID_DOTENV_KEY",l}else if(c){let l=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw l.code="DECRYPTION_FAILED",l}else throw o}}function PDe(t,e,r={}){let n=!!(r&&r.debug),s=!!(r&&r.override),i={};if(typeof e!="object"){let o=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw o.code="OBJECT_REQUIRED",o}for(let o of Object.keys(e))Object.prototype.hasOwnProperty.call(t,o)?(s===!0&&(t[o]=e[o],i[o]=e[o]),n&&$f(s===!0?`"${o}" is already defined and WAS overwritten`:`"${o}" is already defined and was NOT overwritten`)):(t[o]=e[o],i[o]=e[o]);return i}var pr={configDotenv:TDe,_configVault:xDe,_parseVault:ODe,config:DDe,decrypt:MDe,parse:ADe,populate:PDe};ea.exports.configDotenv=pr.configDotenv;ea.exports._configVault=pr._configVault;ea.exports._parseVault=pr._parseVault;ea.exports.config=pr.config;ea.exports.decrypt=pr.decrypt;ea.exports.parse=pr.parse;ea.exports.populate=pr.populate;ea.exports=pr});var Iee=require("node:http");var dB=Mi(pB(),1),{Server:hB,Namespace:YMe,Socket:QMe}=dB.default;var rk=Mi(tk(),1);async function nk(t,e){try{let{sessionToken:r}=t?.handshake?.auth||{};if(!r)throw new Error("NO_SESSION_TOKEN");let n=await(0,rk.getToken)({req:{headers:{authorization:`Bearer ${r}`}},secret:process.env.NEXTAUTH_SECRET});if(!n)throw new Error("INVALID_AUTH");if(!n?.username)throw new Error("ONBOARDING_INCOMPLETE");console.log("AUTH_SUCCESS: ",n.username),t.username=n.username,e()}catch(r){console.log("AUTH_FAIL",r?.message),e(new Error("NOT AUTHENTICATED"))}}var Nb=Mi(Ff(),1);async function kb(){try{if(Nb.default.connection.readyState===1)return;if(!process.env.DB_URI)throw new Error("No DB URI Provided");await Nb.default.connect(process.env.DB_URI),Nb.default.set({debug:!0}),console.log("Connected to DB");return}catch(t){throw t instanceof Error&&console.log("Failed to connect to MongoDB at connect-db.ts >> ",t?.message),t}}var O1=Mi(Ff(),1),pDe=new O1.Schema({username:{type:String,required:!0},image:{type:String,required:!0},role:{type:String,enum:["admin","member"],default:"member"},joinedAt:{type:Date,required:function(){return this.ownerDocument()?.type==="group"}},leftAt:{type:Date,required:function(){return this.ownerDocument()?.type==="group"}}},{_id:!1}),dDe=new O1.Schema({threadId:{type:String,required:!0,unique:!0},type:{type:String,enum:["direct","group"],required:!0},particpants:{type:[pDe],required:!0,validate:{validator:function(t){let e=this;if(!Array.isArray(t)||e.type==="direct"&&t.length!==2||e.type==="group"&&t.length<2)return!1;let r=t.map(n=>(n?.username??"").trim().toLowerCase()).filter(Boolean);return!(r.length!==t.length||new Set(r).size!==r.length)},message:function(){return this.type==="direct"?"Direct threads must have exactly 2 unique participants":"Group threads must have at least 2 unique participants"}}},createdBy:{type:String,required:function(){return this.type==="group"}},groupName:{type:String,required:function(){return this.type==="group"}},groupImage:{type:String,required:function(){return this.type==="group"}}},{timestamps:!0,collection:"threads"}),bee=O1.default.models.Thread||O1.default.model("Thread",dDe);var Rb=Mi(Ff(),1),hDe=new Rb.default.Schema({name:{type:String,required:!0},username:{type:String,required:!0,unique:!0},email:{type:String,required:!0,unique:!0},image:{type:String,required:!0}},{timestamps:!0}),aLe=Rb.default.models.User||Rb.default.model("User",hDe);var Fb=Mi(Ff(),1),fDe=new Fb.default.Schema({msgId:{type:String,required:!0,unique:!0},threadId:{type:String,required:!0,index:!0},sender:{type:String,required:!0},type:{type:String,enum:["text","image","voice","document","deleted"],required:!0},content:{type:String,required:!0},replyToMsgId:{type:String,default:null},readBy:{type:[String],default:[]},status:{type:String,enum:["sending","sent","failed"],required:!0,default:"sent"},timestamp:{type:Date,required:!0}},{collection:"messages"}),wee=Fb.default.models.Messages||Fb.default.model("Messages",fDe);async function See(t){try{await kb();let r=(await bee.find({"particpants.username":t})).map(n=>n.threadId);if(!r||r.length===0)throw new Error("No thread found, aborting... ");return r}catch(e){return e instanceof Error&&console.error("[getUserThreads] Failed to get user threads! Logs: ",e?.message),[]}}var Aee=async t=>{let e=await See(t.username);t.join(e),console.log(`${t.username} joined threads:${e}`)};var Oee=async(t,e,r)=>{try{await kb(),e.status="sent",await wee.create(e),t.to(e.threadId).emit("message:received",e),console.log(`Message from ${e.sender} emitted to thread:${e.threadId}`),r({ok:!0,data:"SENT_OK"});return}catch(n){n instanceof Error&&console.error("[handleNewMessage] Failed to send message >>",n.message),r({ok:!1,data:"SEND_FAILED"});return}};function Cee(t,e){e.on("message:new",async(r,n)=>{await Oee(e,r,n)})}function _T(t){let e=process?.env?.ALLOWED_ORIGINS?.split(",")??[];console.log(e);let r=new hB(t,{cors:{origin:e,methods:["GET","POST"],credentials:!0}});r.use(nk),r.on("connection",async n=>{console.log("connected:",n.id),await Aee(n),Cee(r,n),n.on("disconnect",()=>{console.log("disconnected:",n.id)})})}var Nee=Mi(Bee(),1);Nee.default.config({path:".env.local"});var kee=(0,Iee.createServer)((t,e)=>{e.writeHead(200,{"content-type":"text/html"}),e.end(`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SocketIO Chat Server</title>
  <style>
    /* Reset and base */
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #121212;
      color: #e0e0e0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      text-align: center;
    }

    h1 {
      font-weight: 700;
      font-size: 2.5rem;
      margin-bottom: 1.5rem;
      letter-spacing: 1.2px;
    }

    a.github-link {
      position: relative;
      color: #61dafb;
      font-weight: 600;
      font-size: 1.2rem;
      text-decoration: none;
      cursor: pointer;
      padding-bottom: 4px;
      transition: color 0.3s ease;
    }

    a.github-link::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: 0;
      width: 0%;
      height: 2px;
      background: #61dafb;
      transition: width 0.3s ease;
      border-radius: 2px;
    }

    a.github-link:hover {
      color: #21a1f1;
    }

    a.github-link:hover::after {
      width: 100%;
    }
  </style>
</head>
<body>
  <h1>SocketIO Chat Server by M-Arham07</h1>
  <a
    href="https://github.com/M-Arham07/"
    target="_blank"
    rel="noopener noreferrer"
    class="github-link"
    >Visit my GitHub</a
  >
</body>
</html>
`)});_T(kee);kee.listen(8080,()=>{console.log("[WS] Started")});
/*! Bundled license information:

negotiator/index.js:
  (*!
   * negotiator
   * Copyright(c) 2012 Federico Romero
   * Copyright(c) 2012-2014 Isaac Z. Schlueter
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)

mime-db/index.js:
  (*!
   * mime-db
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

mime-types/index.js:
  (*!
   * mime-types
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)

accepts/index.js:
  (*!
   * accepts
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)

base64id/lib/base64id.js:
  (*!
   * base64id v0.1.0
   *)

engine.io/build/parser-v3/utf8.js:
  (*! https://mths.be/utf8js v2.1.2 by @mathias *)

cookie/index.js:
  (*!
   * cookie
   * Copyright(c) 2012-2014 Roman Shtylman
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

vary/index.js:
  (*!
   * vary
   * Copyright(c) 2014-2017 Douglas Christopher Wilson
   * MIT Licensed
   *)

mongoose/lib/connectionState.js:
  (*!
   * Connection states
   *)

mongoose/lib/helpers/immediate.js:
  (*!
   * Centralize this so we can more easily work around issues with people
   * stubbing out `process.nextTick()` in tests using sinon:
   * https://github.com/sinonjs/lolex#automatically-incrementing-mocked-time
   * See gh-6074
   *)

mongoose/lib/collection.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/error/mongooseError.js:
mongoose/lib/options.js:
mongoose/lib/helpers/clone.js:
mongoose/lib/helpers/error/combinePathErrors.js:
mongoose/lib/schema/operators/exists.js:
mongoose/lib/schema/operators/type.js:
mongoose/lib/helpers/schematype/handleImmutable.js:
mongoose/lib/helpers/document/applyDefaults.js:
mongoose/lib/helpers/document/cleanModifiedSubpaths.js:
mongoose/lib/helpers/projection/isDefiningProjection.js:
mongoose/lib/helpers/projection/isExclusive.js:
mongoose/lib/helpers/projection/isPathSelectedInclusive.js:
mongoose/lib/helpers/schema/idGetter.js:
mongoose/lib/helpers/schema/handleTimestampOption.js:
mongoose/lib/helpers/update/applyTimestampsToChildren.js:
mongoose/lib/helpers/update/applyTimestampsToUpdate.js:
mongoose/lib/constants.js:
mongoose/lib/types/map.js:
mongoose/lib/options/schemaArrayOptions.js:
mongoose/lib/options/schemaNumberOptions.js:
mongoose/lib/options/schemaBufferOptions.js:
mongoose/lib/options/schemaDateOptions.js:
mongoose/lib/plugins/saveSubdocs.js:
mongoose/lib/plugins/sharding.js:
mongoose/lib/plugins/validateBeforeSave.js:
mongoose/lib/helpers/model/discriminator.js:
mongoose/lib/options/schemaDocumentArrayOptions.js:
mongoose/lib/schema/map.js:
mongoose/lib/options/schemaObjectIdOptions.js:
mongoose/lib/options/schemaStringOptions.js:
mongoose/lib/schema/union.js:
mongoose/lib/driver.js:
mongoose/lib/helpers/query/castUpdate.js:
mongoose/lib/helpers/projection/isInclusive.js:
mongoose/lib/helpers/query/hasDollarKeys.js:
mongoose/lib/helpers/query/selectPopulatedFields.js:
mongoose/lib/helpers/model/applyHooks.js:
mongoose/lib/helpers/populate/leanPopulateMap.js:
mongoose/lib/helpers/populate/getVirtual.js:
mongoose/lib/helpers/populate/getSchemaTypes.js:
mongoose/lib/helpers/populate/getModelsMapForPopulate.js:
mongoose/lib/helpers/parallelLimit.js:
mongoose/lib/helpers/populate/removeDeselectedForeignField.js:
  (*!
   * ignore
   *)

mongoose/lib/types/objectid.js:
  (*!
   * Convenience `valueOf()` to allow comparing ObjectIds using double equals re: gh-7299
   *)

mongoose/lib/drivers/node-mongodb-native/collection.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from abstract Collection.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/cursor/changeStream.js:
mongoose/lib/error/serverSelection.js:
mongoose/lib/stateMachine.js:
mongoose/lib/helpers/common.js:
mongoose/lib/utils.js:
mongoose/lib/schema/subdocument.js:
mongoose/lib/cursor/queryCursor.js:
mquery/lib/utils.js:
mongoose/lib/cursor/aggregationCursor.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)

mongoose/lib/error/cast.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * exports
   *)

mongoose/lib/error/notFound.js:
mongoose/lib/error/validator.js:
mongoose/lib/error/version.js:
mongoose/lib/error/parallelSave.js:
mongoose/lib/error/overwriteModel.js:
mongoose/lib/error/missingSchema.js:
mongoose/lib/error/bulkSaveIncompleteError.js:
mongoose/lib/error/divergentArray.js:
mongoose/lib/error/parallelValidate.js:
mongoose/lib/error/invalidSchemaOption.js:
mongoose/lib/error/bulkWriteError.js:
mongoose/lib/error/eachAsyncMultiError.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * exports
   *)

mongoose/lib/error/validation.js:
mongoose/lib/error/setOptionError.js:
  (*!
   * Module requirements
   *)
  (*!
   * Module exports
   *)

mongoose/lib/error/strict.js:
mongoose/lib/error/strictPopulate.js:
mongoose/lib/error/objectExpected.js:
mongoose/lib/error/objectParameter.js:
mongoose/lib/cast.js:
mongoose/lib/error/syncIndexes.js:
mongoose/lib/helpers/cursor/eachAsync.js:
mongoose/lib/helpers/updateValidators.js:
mongoose/lib/index.js:
  (*!
   * Module dependencies.
   *)

mongoose/lib/error/index.js:
mongoose/lib/types/index.js:
mongoose/lib/schema/index.js:
mongoose/lib/drivers/node-mongodb-native/index.js:
  (*!
   * Module exports.
   *)

mpath/lib/index.js:
  (*!
   * Split a string path into components delimited by '.' or
   * '[\d+]'
   *
   * #### Example:
   *     stringToParts('foo[0].bar.1'); // ['foo', '0', 'bar', '1']
   *)
  (*!
   * Recursively set nested arrays
   *)
  (*!
   * Returns the value passed to it.
   *)

mongoose/lib/internal.js:
  (*!
   * Dependencies
   *)

mongoose/lib/types/buffer.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from Buffer.
   *)
  (*!
   * Compile other Buffer methods marking this buffer as modified.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/mixed.js:
mongoose/lib/schema/documentArrayElement.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/helpers/document/compile.js:
  (*!
   * exports
   *)

mongoose/lib/queryHelpers.js:
  (*!
   * Module dependencies
   *)
  (*!
   * ignore
   *)

mongoose/lib/types/subdocument.js:
  (*!
   * ignore
   *)
  (*!
   * Sets this sub-documents parent document.
   *
   * @api private
   *)

mongoose/lib/types/arraySubdocument.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from Subdocument
   *)
  (*!
   * ignore
   *)
  (*!
   * Sets this sub-documents parent document.
   *
   * @api private
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/types/array/methods/index.js:
  (*!
   * ignore
   *)
  (*!
   * Minimize _just_ empty objects along the path chain specified
   * by `parts`, ignoring all other paths. Useful in cases where
   * you want to minimize after unsetting a path.
   *
   * #### Example:
   *
   *     const obj = { foo: { bar: { baz: {} } }, a: {} };
   *     _minimizePath(obj, 'foo.bar.baz');
   *     obj; // { a: {} }
   *)
  (*!
   * If `docs` isn't all instances of the right model, depopulate `arr`
   *)

mongoose/lib/types/array/index.js:
mongoose/lib/types/documentArray/index.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/document.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Document exposes the NodeJS event emitter API, so you can use
   * `on`, `once`, etc.
   *)
  (*!
   * Converts to POJO when you use the document for querying
   *)
  (*!
   * Runs queued functions
   *)
  (*!
   * Internal shallow clone alternative to `$toObject()`: much faster, no options processing
   *)
  (*!
   * Applies virtuals properties to `json`.
   *)
  (*!
   * Check if the given document only has primitive values
   *)
  (*!
   * Increment this document's version if necessary.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schemaType.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * If _duplicateKeyErrorMessage is a string, replace unique index errors "E11000 duplicate key error" with this string.
   *
   * @api private
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/virtualType.js:
  (*!
   * ignore
   *)
  (*!
   * exports
   *)

mongoose/lib/schema/operators/bitwise.js:
mongoose/lib/schema/operators/helpers.js:
mongoose/lib/schema/operators/geospatial.js:
  (*!
   * Module requirements.
   *)
  (*!
   * ignore
   *)

mongoose/lib/schema/number.js:
  (*!
   * Module requirements.
   *)
  (*!
   * ignore
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/array.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * Virtuals defined on this array itself.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/bigint.js:
mongoose/lib/schema/boolean.js:
mongoose/lib/schema/buffer.js:
mongoose/lib/schema/decimal128.js:
mongoose/lib/schema/double.js:
mongoose/lib/schema/int32.js:
mongoose/lib/schema/objectId.js:
mongoose/lib/schema/string.js:
mongoose/lib/schema/uuid.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/date.js:
  (*!
   * Module requirements.
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/documentArray.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherits from SchemaArray.
   *)
  (*!
   * ignore
   *)
  (*!
   * Handle casting $elemMatch operators
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from EventEmitter.
   *)
  (*!
   * ignore
   *)
  (*!
   * Get the document middleware for this schema, filtering out any hooks that are specific to queries.
   *)
  (*!
   * Get this schema's default toObject/toJSON options, including Mongoose global
   * options.
   *)
  (*!
   * Recursively set options on implicitly created schemas
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/connection.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from EventEmitter
   *)
  (*!
   * Reset document state in between transaction retries re: gh-13698
   *)
  (*!
   * If transaction was aborted, we need to reset newly inserted documents' `isNew`.
   *)
  (*!
   * Get the default buffer timeout for this connection
   *)
  (*!
   * ignore
   *)
  (*!
   * Called internally by `openUri()` to create a MongoClient instance.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/drivers/node-mongodb-native/connection.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherits from Connection.
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/validOptions.js:
  (*!
   * Valid mongoose options
   *)

mquery/lib/mquery.js:
  (*!
   * gt, gte, lt, lte, ne, in, nin, all, regex, size, maxDistance
   *
   *     Thing.where('type').nin(array)
   *)
  (*!
   * @ignore
   *)
  (*!
   * limit, skip, batchSize, comment
   *
   * Sets these associated options.
   *
   *     query.comment('feed query');
   *)
  (*!
   * Internal helper for updateMany, updateOne
   *)
  (*!
   * Permissions
   *)
  (*!
   * Exports.
   *)

mongoose/lib/query.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * inherit mquery
   *)
  (*!
   * Overwrite mquery's `_distinct`, because Mongoose uses that name
   * to store the field to apply distinct on.
   *)
  (*!
   * ignore
   *)
  (*!
   * If `translateAliases` option is set, call `Model.translateAliases()`
   * on the following query properties: filter, projection, update, distinct.
   *)
  (*!
   * Convert sort values
   *)
  (*!
   * Export
   *)

mongoose/lib/aggregate.js:
  (*!
   * Module dependencies
   *)
  (*!
   * define methods
   *)
  (*!
   * Helpers
   *)
  (*!
   * Exports
   *)

mongoose/lib/model.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Give the constructor the ability to emit events.
   *)
  (*!
   * Populates `docs` for a single `populateOptions` instance.
   *)
  (*!
   * Applies query middleware from this model's schema to this model's
   * Query constructor.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/mongoose.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Create a new default connection (`mongoose.connection`) for a Mongoose instance.
   * No-op if there is already a default connection.
   *)
*/
