"use strict";var Wee=Object.create;var jf=Object.defineProperty;var zee=Object.getOwnPropertyDescriptor;var Kee=Object.getOwnPropertyNames;var Hee=Object.getPrototypeOf,Gee=Object.prototype.hasOwnProperty;var cn=(t,e)=>()=>(t&&(e=t(t=0)),e);var m=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Jee=(t,e)=>{for(var r in e)jf(t,r,{get:e[r],enumerable:!0})},KT=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Kee(e))!Gee.call(t,s)&&s!==r&&jf(t,s,{get:()=>e[s],enumerable:!(n=zee(e,s))||n.enumerable});return t};var Mi=(t,e,r)=>(r=t!=null?Wee(Hee(t)):{},KT(e||!t||!t.__esModule?jf(r,"default",{value:t,enumerable:!0}):r,t)),Yee=t=>KT(jf({},"__esModule",{value:!0}),t);var YT=m((kDe,Lb)=>{"use strict";Lb.exports=JT;Lb.exports.preferredCharsets=JT;var Qee=/^\s*([^\s;]+)\s*(?:;(.*))?$/;function Xee(t){for(var e=t.split(","),r=0,n=0;r<e.length;r++){var s=Zee(e[r].trim(),r);s&&(e[n++]=s)}return e.length=n,e}function Zee(t,e){var r=Qee.exec(t);if(!r)return null;var n=r[1],s=1;if(r[2])for(var i=r[2].split(";"),o=0;o<i.length;o++){var a=i[o].trim().split("=");if(a[0]==="q"){s=parseFloat(a[1]);break}}return{charset:n,q:s,i:e}}function ete(t,e,r){for(var n={o:-1,q:0,s:0},s=0;s<e.length;s++){var i=tte(t,e[s],r);i&&(n.s-i.s||n.q-i.q||n.o-i.o)<0&&(n=i)}return n}function tte(t,e,r){var n=0;if(e.charset.toLowerCase()===t.toLowerCase())n|=1;else if(e.charset!=="*")return null;return{i:r,o:e.i,q:e.q,s:n}}function JT(t,e){var r=Xee(t===void 0?"*":t||"");if(!e)return r.filter(GT).sort(HT).map(rte);var n=e.map(function(i,o){return ete(i,r,o)});return n.filter(GT).sort(HT).map(function(i){return e[n.indexOf(i)]})}function HT(t,e){return e.q-t.q||e.s-t.s||t.o-e.o||t.i-e.i||0}function rte(t){return t.charset}function GT(t){return t.q>0}});var tD=m((RDe,Ub)=>{"use strict";Ub.exports=eD;Ub.exports.preferredEncodings=eD;var nte=/^\s*([^\s;]+)\s*(?:;(.*))?$/;function ste(t){for(var e=t.split(","),r=!1,n=1,s=0,i=0;s<e.length;s++){var o=ite(e[s].trim(),s);o&&(e[i++]=o,r=r||ZT("identity",o),n=Math.min(n,o.q||1))}return r||(e[i++]={encoding:"identity",q:n,i:s}),e.length=i,e}function ite(t,e){var r=nte.exec(t);if(!r)return null;var n=r[1],s=1;if(r[2])for(var i=r[2].split(";"),o=0;o<i.length;o++){var a=i[o].trim().split("=");if(a[0]==="q"){s=parseFloat(a[1]);break}}return{encoding:n,q:s,i:e}}function ote(t,e,r){for(var n={o:-1,q:0,s:0},s=0;s<e.length;s++){var i=ZT(t,e[s],r);i&&(n.s-i.s||n.q-i.q||n.o-i.o)<0&&(n=i)}return n}function ZT(t,e,r){var n=0;if(e.encoding.toLowerCase()===t.toLowerCase())n|=1;else if(e.encoding!=="*")return null;return{i:r,o:e.i,q:e.q,s:n}}function eD(t,e){var r=ste(t||"");if(!e)return r.filter(XT).sort(QT).map(ate);var n=e.map(function(i,o){return ote(i,r,o)});return n.filter(XT).sort(QT).map(function(i){return e[n.indexOf(i)]})}function QT(t,e){return e.q-t.q||e.s-t.s||t.o-e.o||t.i-e.i||0}function ate(t){return t.encoding}function XT(t){return t.q>0}});var oD=m((FDe,Vb)=>{"use strict";Vb.exports=iD;Vb.exports.preferredLanguages=iD;var ute=/^\s*([^\s\-;]+)(?:-([^\s;]+))?\s*(?:;(.*))?$/;function cte(t){for(var e=t.split(","),r=0,n=0;r<e.length;r++){var s=sD(e[r].trim(),r);s&&(e[n++]=s)}return e.length=n,e}function sD(t,e){var r=ute.exec(t);if(!r)return null;var n=r[1],s=r[2],i=n;s&&(i+="-"+s);var o=1;if(r[3])for(var a=r[3].split(";"),u=0;u<a.length;u++){var c=a[u].split("=");c[0]==="q"&&(o=parseFloat(c[1]))}return{prefix:n,suffix:s,q:o,i:e,full:i}}function lte(t,e,r){for(var n={o:-1,q:0,s:0},s=0;s<e.length;s++){var i=pte(t,e[s],r);i&&(n.s-i.s||n.q-i.q||n.o-i.o)<0&&(n=i)}return n}function pte(t,e,r){var n=sD(t);if(!n)return null;var s=0;if(e.full.toLowerCase()===n.full.toLowerCase())s|=4;else if(e.prefix.toLowerCase()===n.full.toLowerCase())s|=2;else if(e.full.toLowerCase()===n.prefix.toLowerCase())s|=1;else if(e.full!=="*")return null;return{i:r,o:e.i,q:e.q,s}}function iD(t,e){var r=cte(t===void 0?"*":t||"");if(!e)return r.filter(nD).sort(rD).map(dte);var n=e.map(function(i,o){return lte(i,r,o)});return n.filter(nD).sort(rD).map(function(i){return e[n.indexOf(i)]})}function rD(t,e){return e.q-t.q||e.s-t.s||t.o-e.o||t.i-e.i||0}function dte(t){return t.full}function nD(t){return t.q>0}});var dD=m(($De,Wb)=>{"use strict";Wb.exports=lD;Wb.exports.preferredMediaTypes=lD;var hte=/^\s*([^\s\/;]+)\/([^;\s]+)\s*(?:;(.*))?$/;function fte(t){for(var e=Ete(t),r=0,n=0;r<e.length;r++){var s=cD(e[r].trim(),r);s&&(e[n++]=s)}return e.length=n,e}function cD(t,e){var r=hte.exec(t);if(!r)return null;var n=Object.create(null),s=1,i=r[2],o=r[1];if(r[3])for(var a=bte(r[3]).map(_te),u=0;u<a.length;u++){var c=a[u],l=c[0].toLowerCase(),p=c[1],d=p&&p[0]==='"'&&p[p.length-1]==='"'?p.substr(1,p.length-2):p;if(l==="q"){s=parseFloat(d);break}n[l]=d}return{type:o,subtype:i,params:n,q:s,i:e}}function mte(t,e,r){for(var n={o:-1,q:0,s:0},s=0;s<e.length;s++){var i=yte(t,e[s],r);i&&(n.s-i.s||n.q-i.q||n.o-i.o)<0&&(n=i)}return n}function yte(t,e,r){var n=cD(t),s=0;if(!n)return null;if(e.type.toLowerCase()==n.type.toLowerCase())s|=4;else if(e.type!="*")return null;if(e.subtype.toLowerCase()==n.subtype.toLowerCase())s|=2;else if(e.subtype!="*")return null;var i=Object.keys(e.params);if(i.length>0)if(i.every(function(o){return e.params[o]=="*"||(e.params[o]||"").toLowerCase()==(n.params[o]||"").toLowerCase()}))s|=1;else return null;return{i:r,o:e.i,q:e.q,s}}function lD(t,e){var r=fte(t===void 0?"*/*":t||"");if(!e)return r.filter(uD).sort(aD).map(gte);var n=e.map(function(i,o){return mte(i,r,o)});return n.filter(uD).sort(aD).map(function(i){return e[n.indexOf(i)]})}function aD(t,e){return e.q-t.q||e.s-t.s||t.o-e.o||t.i-e.i||0}function gte(t){return t.type+"/"+t.subtype}function uD(t){return t.q>0}function pD(t){for(var e=0,r=0;(r=t.indexOf('"',r))!==-1;)e++,r++;return e}function _te(t){var e=t.indexOf("="),r,n;return e===-1?r=t:(r=t.substr(0,e),n=t.substr(e+1)),[r,n]}function Ete(t){for(var e=t.split(","),r=1,n=0;r<e.length;r++)pD(e[n])%2==0?e[++n]=e[r]:e[n]+=","+e[r];return e.length=n+1,e}function bte(t){for(var e=t.split(";"),r=1,n=0;r<e.length;r++)pD(e[n])%2==0?e[++n]=e[r]:e[n]+=";"+e[r];e.length=n+1;for(var r=0;r<e.length;r++)e[r]=e[r].trim();return e}});var hD=m((qDe,zb)=>{"use strict";var Ste=YT(),wte=tD(),Ate=oD(),Ote=dD();zb.exports=Ye;zb.exports.Negotiator=Ye;function Ye(t){if(!(this instanceof Ye))return new Ye(t);this.request=t}Ye.prototype.charset=function(e){var r=this.charsets(e);return r&&r[0]};Ye.prototype.charsets=function(e){return Ste(this.request.headers["accept-charset"],e)};Ye.prototype.encoding=function(e){var r=this.encodings(e);return r&&r[0]};Ye.prototype.encodings=function(e){return wte(this.request.headers["accept-encoding"],e)};Ye.prototype.language=function(e){var r=this.languages(e);return r&&r[0]};Ye.prototype.languages=function(e){return Ate(this.request.headers["accept-language"],e)};Ye.prototype.mediaType=function(e){var r=this.mediaTypes(e);return r&&r[0]};Ye.prototype.mediaTypes=function(e){return Ote(this.request.headers.accept,e)};Ye.prototype.preferredCharset=Ye.prototype.charset;Ye.prototype.preferredCharsets=Ye.prototype.charsets;Ye.prototype.preferredEncoding=Ye.prototype.encoding;Ye.prototype.preferredEncodings=Ye.prototype.encodings;Ye.prototype.preferredLanguage=Ye.prototype.language;Ye.prototype.preferredLanguages=Ye.prototype.languages;Ye.prototype.preferredMediaType=Ye.prototype.mediaType;Ye.prototype.preferredMediaTypes=Ye.prototype.mediaTypes});var fD=m((jDe,Cte)=>{Cte.exports={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}}});var yD=m((LDe,mD)=>{mD.exports=fD()});var ED=m(On=>{"use strict";var Lf=yD(),vte=require("path").extname,gD=/^\s*([^;\s]*)(?:;|\s|$)/,xte=/^text\//i;On.charset=_D;On.charsets={lookup:_D};On.contentType=Tte;On.extension=Dte;On.extensions=Object.create(null);On.lookup=Mte;On.types=Object.create(null);Pte(On.extensions,On.types);function _D(t){if(!t||typeof t!="string")return!1;var e=gD.exec(t),r=e&&Lf[e[1].toLowerCase()];return r&&r.charset?r.charset:e&&xte.test(e[1])?"UTF-8":!1}function Tte(t){if(!t||typeof t!="string")return!1;var e=t.indexOf("/")===-1?On.lookup(t):t;if(!e)return!1;if(e.indexOf("charset")===-1){var r=On.charset(e);r&&(e+="; charset="+r.toLowerCase())}return e}function Dte(t){if(!t||typeof t!="string")return!1;var e=gD.exec(t),r=e&&On.extensions[e[1].toLowerCase()];return!r||!r.length?!1:r[0]}function Mte(t){if(!t||typeof t!="string")return!1;var e=vte("x."+t).toLowerCase().substr(1);return e&&On.types[e]||!1}function Pte(t,e){var r=["nginx","apache",void 0,"iana"];Object.keys(Lf).forEach(function(s){var i=Lf[s],o=i.extensions;if(!(!o||!o.length)){t[s]=o;for(var a=0;a<o.length;a++){var u=o[a];if(e[u]){var c=r.indexOf(Lf[e[u]].source),l=r.indexOf(i.source);if(e[u]!=="application/octet-stream"&&(c>l||c===l&&e[u].substr(0,12)==="application/"))continue}e[u]=s}}})}});var Uf=m((VDe,bD)=>{"use strict";var Bte=hD(),Ite=ED();bD.exports=Gn;function Gn(t){if(!(this instanceof Gn))return new Gn(t);this.headers=t.headers,this.negotiator=new Bte(t)}Gn.prototype.type=Gn.prototype.types=function(t){var e=t;if(e&&!Array.isArray(e)){e=new Array(arguments.length);for(var r=0;r<e.length;r++)e[r]=arguments[r]}if(!e||e.length===0)return this.negotiator.mediaTypes();if(!this.headers.accept)return e[0];var n=e.map(Nte),s=this.negotiator.mediaTypes(n.filter(kte)),i=s[0];return i?e[n.indexOf(i)]:!1};Gn.prototype.encoding=Gn.prototype.encodings=function(t){var e=t;if(e&&!Array.isArray(e)){e=new Array(arguments.length);for(var r=0;r<e.length;r++)e[r]=arguments[r]}return!e||e.length===0?this.negotiator.encodings():this.negotiator.encodings(e)[0]||!1};Gn.prototype.charset=Gn.prototype.charsets=function(t){var e=t;if(e&&!Array.isArray(e)){e=new Array(arguments.length);for(var r=0;r<e.length;r++)e[r]=arguments[r]}return!e||e.length===0?this.negotiator.charsets():this.negotiator.charsets(e)[0]||!1};Gn.prototype.lang=Gn.prototype.langs=Gn.prototype.language=Gn.prototype.languages=function(t){var e=t;if(e&&!Array.isArray(e)){e=new Array(arguments.length);for(var r=0;r<e.length;r++)e[r]=arguments[r]}return!e||e.length===0?this.negotiator.languages():this.negotiator.languages(e)[0]||!1};function Nte(t){return t.indexOf("/")===-1?Ite.lookup(t):t}function kte(t){return typeof t=="string"}});var Hb=m((SD,wD)=>{var x1=require("crypto"),Kb=function(){};Kb.prototype.getRandomBytes=function(t){var e=4096,r=this;if(t=t||12,t>e)return x1.randomBytes(t);var n=parseInt(e/t),s=parseInt(n*.85);if(!s||(this.bytesBufferIndex==null&&(this.bytesBufferIndex=-1),this.bytesBufferIndex==n&&(this.bytesBuffer=null,this.bytesBufferIndex=-1),(this.bytesBufferIndex==-1||this.bytesBufferIndex>s)&&(this.isGeneratingBytes||(this.isGeneratingBytes=!0,x1.randomBytes(e,function(o,a){r.bytesBuffer=a,r.bytesBufferIndex=0,r.isGeneratingBytes=!1})),this.bytesBufferIndex==-1)))return x1.randomBytes(t);var i=this.bytesBuffer.slice(t*this.bytesBufferIndex,t*(this.bytesBufferIndex+1));return this.bytesBufferIndex++,i};Kb.prototype.generateId=function(){var t=Buffer.alloc(15);return t.writeInt32BE?(this.sequenceNumber=this.sequenceNumber+1|0,t.writeInt32BE(this.sequenceNumber,11),x1.randomBytes?this.getRandomBytes(12).copy(t):[0,4,8].forEach(function(e){t.writeInt32BE(Math.random()*Math.pow(2,32)|0,e)}),t.toString("base64").replace(/\//g,"_").replace(/\+/g,"-")):Math.abs(Math.random()*Math.random()*Date.now()|0).toString()+Math.abs(Math.random()*Math.random()*Date.now()|0).toString()};SD=wD.exports=new Kb});var Vf=m(ta=>{"use strict";Object.defineProperty(ta,"__esModule",{value:!0});ta.ERROR_PACKET=ta.PACKET_TYPES_REVERSE=ta.PACKET_TYPES=void 0;var Pi=Object.create(null);ta.PACKET_TYPES=Pi;Pi.open="0";Pi.close="1";Pi.ping="2";Pi.pong="3";Pi.message="4";Pi.upgrade="5";Pi.noop="6";var AD=Object.create(null);ta.PACKET_TYPES_REVERSE=AD;Object.keys(Pi).forEach(t=>{AD[Pi[t]]=t});var Rte={type:"error",data:"parser error"};ta.ERROR_PACKET=Rte});var CD=m(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});jc.encodePacket=void 0;jc.encodePacketToBinary=qte;var Fte=Vf(),$te=({type:t,data:e},r,n)=>e instanceof ArrayBuffer||ArrayBuffer.isView(e)?n(r?e:"b"+OD(e,!0).toString("base64")):n(Fte.PACKET_TYPES[t]+(e||""));jc.encodePacket=$te;var OD=(t,e)=>Buffer.isBuffer(t)||t instanceof Uint8Array&&!e?t:t instanceof ArrayBuffer?Buffer.from(t):Buffer.from(t.buffer,t.byteOffset,t.byteLength),Gb;function qte(t,e){if(t.data instanceof ArrayBuffer||ArrayBuffer.isView(t.data))return e(OD(t.data,!1));(0,jc.encodePacket)(t,!0,r=>{Gb||(Gb=new TextEncoder),e(Gb.encode(r))})}});var xD=m(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});zf.decodePacket=void 0;var Wf=Vf(),jte=(t,e)=>{if(typeof t!="string")return{type:"message",data:vD(t,e)};let r=t.charAt(0);if(r==="b"){let n=Buffer.from(t.substring(1),"base64");return{type:"message",data:vD(n,e)}}return Wf.PACKET_TYPES_REVERSE[r]?t.length>1?{type:Wf.PACKET_TYPES_REVERSE[r],data:t.substring(1)}:{type:Wf.PACKET_TYPES_REVERSE[r]}:Wf.ERROR_PACKET};zf.decodePacket=jte;var vD=(t,e)=>e==="arraybuffer"?t instanceof ArrayBuffer?t:Buffer.isBuffer(t)?t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength):t.buffer:Buffer.isBuffer(t)?t:Buffer.from(t)});var T1=m(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.decodePayload=Cn.decodePacket=Cn.encodePayload=Cn.encodePacket=Cn.protocol=void 0;Cn.createPacketEncoderStream=Vte;Cn.createPacketDecoderStream=Wte;var Yb=CD();Object.defineProperty(Cn,"encodePacket",{enumerable:!0,get:function(){return Yb.encodePacket}});var Qb=xD();Object.defineProperty(Cn,"decodePacket",{enumerable:!0,get:function(){return Qb.decodePacket}});var TD=Vf(),DD="",Lte=(t,e)=>{let r=t.length,n=new Array(r),s=0;t.forEach((i,o)=>{(0,Yb.encodePacket)(i,!1,a=>{n[o]=a,++s===r&&e(n.join(DD))})})};Cn.encodePayload=Lte;var Ute=(t,e)=>{let r=t.split(DD),n=[];for(let s=0;s<r.length;s++){let i=(0,Qb.decodePacket)(r[s],e);if(n.push(i),i.type==="error")break}return n};Cn.decodePayload=Ute;function Vte(){return new TransformStream({transform(t,e){(0,Yb.encodePacketToBinary)(t,r=>{let n=r.length,s;if(n<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,n);else if(n<65536){s=new Uint8Array(3);let i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{s=new Uint8Array(9);let i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}t.data&&typeof t.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(r)})}})}var Jb;function Kf(t){return t.reduce((e,r)=>e+r.length,0)}function Hf(t,e){if(t[0].length===e)return t.shift();let r=new Uint8Array(e),n=0;for(let s=0;s<e;s++)r[s]=t[0][n++],n===t[0].length&&(t.shift(),n=0);return t.length&&n<t[0].length&&(t[0]=t[0].slice(n)),r}function Wte(t,e){Jb||(Jb=new TextDecoder);let r=[],n=0,s=-1,i=!1;return new TransformStream({transform(o,a){for(r.push(o);;){if(n===0){if(Kf(r)<1)break;let u=Hf(r,1);i=(u[0]&128)===128,s=u[0]&127,s<126?n=3:s===126?n=1:n=2}else if(n===1){if(Kf(r)<2)break;let u=Hf(r,2);s=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),n=3}else if(n===2){if(Kf(r)<8)break;let u=Hf(r,8),c=new DataView(u.buffer,u.byteOffset,u.length),l=c.getUint32(0);if(l>Math.pow(2,21)-1){a.enqueue(TD.ERROR_PACKET);break}s=l*Math.pow(2,32)+c.getUint32(4),n=3}else{if(Kf(r)<s)break;let u=Hf(r,s);a.enqueue((0,Qb.decodePacket)(i?u:Jb.decode(u),e)),n=0}if(s===0||s>t){a.enqueue(TD.ERROR_PACKET);break}}}})}Cn.protocol=4});var ID=m((GDe,BD)=>{var ra=String.fromCharCode;function MD(t){for(var e=[],r=0,n=t.length,s,i;r<n;)s=t.charCodeAt(r++),s>=55296&&s<=56319&&r<n?(i=t.charCodeAt(r++),(i&64512)==56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),r--)):e.push(s);return e}function zte(t){for(var e=t.length,r=-1,n,s="";++r<e;)n=t[r],n>65535&&(n-=65536,s+=ra(n>>>10&1023|55296),n=56320|n&1023),s+=ra(n);return s}function PD(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function Xb(t,e){return ra(t>>e&63|128)}function Kte(t,e){if((t&4294967168)==0)return ra(t);var r="";return(t&4294965248)==0?r=ra(t>>6&31|192):(t&4294901760)==0?(PD(t,e)||(t=65533),r=ra(t>>12&15|224),r+=Xb(t,6)):(t&4292870144)==0&&(r=ra(t>>18&7|240),r+=Xb(t,12),r+=Xb(t,6)),r+=ra(t&63|128),r}function Hte(t,e){e=e||{};for(var r=e.strict!==!1,n=MD(t),s=n.length,i=-1,o,a="";++i<s;)o=n[i],a+=Kte(o,r);return a}function Lc(){if(na>=Jf)throw Error("Invalid byte index");var t=Gf[na]&255;if(na++,(t&192)==128)return t&63;throw Error("Invalid continuation byte")}function Gte(t){var e,r,n,s,i;if(na>Jf)throw Error("Invalid byte index");if(na==Jf)return!1;if(e=Gf[na]&255,na++,(e&128)==0)return e;if((e&224)==192){if(r=Lc(),i=(e&31)<<6|r,i>=128)return i;throw Error("Invalid continuation byte")}if((e&240)==224){if(r=Lc(),n=Lc(),i=(e&15)<<12|r<<6|n,i>=2048)return PD(i,t)?i:65533;throw Error("Invalid continuation byte")}if((e&248)==240&&(r=Lc(),n=Lc(),s=Lc(),i=(e&7)<<18|r<<12|n<<6|s,i>=65536&&i<=1114111))return i;throw Error("Invalid UTF-8 detected")}var Gf,Jf,na;function Jte(t,e){e=e||{};var r=e.strict!==!1;Gf=MD(t),Jf=Gf.length,na=0;for(var n=[],s;(s=Gte(r))!==!1;)n.push(s);return zte(n)}BD.exports={version:"2.1.2",encode:Hte,decode:Jte}});var LD=m(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});dr.packets=dr.protocol=void 0;dr.encodePacket=Zb;dr.encodeBase64Packet=RD;dr.decodePacket=eS;dr.decodeBase64Packet=FD;dr.encodePayload=Zte;dr.decodePayload=tre;dr.encodePayloadAsBinary=qD;dr.decodePayloadAsBinary=jD;var kD=ID();dr.protocol=3;var Yte=t=>{for(let e of t)if(e.data instanceof ArrayBuffer||ArrayBuffer.isView(e.data))return!0;return!1};dr.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6};var Uc=Object.keys(dr.packets),Ks={type:"error",data:"parser error"},Qte=Buffer.concat([]);function Zb(t,e,r,n){if(typeof e=="function"&&(n=e,e=null),typeof r=="function"&&(n=r,r=null),Buffer.isBuffer(t.data))return ND(t,e,n);if(t.data&&(t.data.buffer||t.data)instanceof ArrayBuffer)return ND({type:t.type,data:tS(t.data)},e,n);var s=dr.packets[t.type];return t.data!==void 0&&(s+=r?kD.encode(String(t.data),{strict:!1}):String(t.data)),n(""+s)}function ND(t,e,r){if(!e)return RD(t,r);var n=t.data,s=Buffer.allocUnsafe(1);return s[0]=dr.packets[t.type],r(Buffer.concat([s,n]))}function RD(t,e){var r=Buffer.isBuffer(t.data)?t.data:tS(t.data),n="b"+dr.packets[t.type];return n+=r.toString("base64"),e(n)}function eS(t,e,r){if(t===void 0)return Ks;let n;if(typeof t=="string")return n=t.charAt(0),n==="b"?FD(t.slice(1),e):r&&(t=Xte(t),t===!1)||Number(n)!=n||!Uc[n]?Ks:t.length>1?{type:Uc[n],data:t.slice(1)}:{type:Uc[n]};if(e==="arraybuffer"){var s=new Uint8Array(t);return n=s[0],{type:Uc[n],data:s.buffer.slice(1)}}return t instanceof ArrayBuffer&&(t=tS(t)),n=t[0],{type:Uc[n],data:t.slice(1)}}function Xte(t){try{t=kD.decode(t,{strict:!1})}catch{return!1}return t}function FD(t,e){var r=Uc[t.charAt(0)],n=Buffer.from(t.slice(1),"base64");if(e==="arraybuffer"){for(var s=new Uint8Array(n.length),i=0;i<s.length;i++)s[i]=n[i];n=s.buffer}return{type:r,data:n}}function Zte(t,e,r){if(typeof e=="function"&&(r=e,e=null),e&&Yte(t))return qD(t,r);if(!t.length)return r("0:");function n(s,i){Zb(s,e,!1,function(o){i(null,ere(o))})}$D(t,n,function(s,i){return r(i.join(""))})}function ere(t){return t.length+":"+t}function $D(t,e,r){let n=new Array(t.length),s=0;for(let i=0;i<t.length;i++)e(t[i],(o,a)=>{n[i]=a,++s===t.length&&r(null,n)})}function tre(t,e,r){if(typeof t!="string")return jD(t,e,r);if(typeof e=="function"&&(r=e,e=null),t==="")return r(Ks,0,1);for(var n="",s,i,o,a=0,u=t.length;a<u;a++){var c=t.charAt(a);if(c!==":"){n+=c;continue}if(n===""||n!=(s=Number(n))||(i=t.slice(a+1,a+1+s),n!=i.length))return r(Ks,0,1);if(i.length){if(o=eS(i,e,!1),Ks.type===o.type&&Ks.data===o.data)return r(Ks,0,1);var l=r(o,a+s,u);if(l===!1)return}a+=s,n=""}if(n!=="")return r(Ks,0,1)}function rre(t){for(var e="",r=0,n=t.length;r<n;r++)e+=String.fromCharCode(t[r]);return e}function nre(t){for(var e=Buffer.allocUnsafe(t.length),r=0,n=t.length;r<n;r++)e.writeUInt8(t.charCodeAt(r),r);return e}function tS(t){var e=t.byteLength||t.length,r=t.byteOffset||0;return Buffer.from(t.buffer||t,r,e)}function qD(t,e){if(!t.length)return e(Qte);$D(t,sre,function(r,n){return e(Buffer.concat(n))})}function sre(t,e){function r(n){var s=""+n.length,i;if(typeof n=="string"){i=Buffer.allocUnsafe(s.length+2),i[0]=0;for(var o=0;o<s.length;o++)i[o+1]=parseInt(s[o],10);return i[i.length-1]=255,e(null,Buffer.concat([i,nre(n)]))}i=Buffer.allocUnsafe(s.length+2),i[0]=1;for(var o=0;o<s.length;o++)i[o+1]=parseInt(s[o],10);i[i.length-1]=255,e(null,Buffer.concat([i,n]))}Zb(t,!0,!0,r)}function jD(t,e,r){typeof e=="function"&&(r=e,e=null);for(var n=t,s=[],i;n.length>0;){var o="",a=n[0]===0;for(i=1;n[i]!==255;i++){if(o.length>310)return r(Ks,0,1);o+=""+n[i]}n=n.slice(o.length+1);var u=parseInt(o,10),c=n.slice(1,u+1);a&&(c=rre(c)),s.push(c),n=n.slice(u+1)}var l=s.length;for(i=0;i<l;i++){var p=s[i];r(eS(p,e,!0),i,l)}}});var rS=m((YDe,UD)=>{var Vc=1e3,Wc=Vc*60,zc=Wc*60,du=zc*24,ire=du*7,ore=du*365.25;UD.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return are(t);if(r==="number"&&isFinite(t))return e.long?cre(t):ure(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function are(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*ore;case"weeks":case"week":case"w":return r*ire;case"days":case"day":case"d":return r*du;case"hours":case"hour":case"hrs":case"hr":case"h":return r*zc;case"minutes":case"minute":case"mins":case"min":case"m":return r*Wc;case"seconds":case"second":case"secs":case"sec":case"s":return r*Vc;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function ure(t){var e=Math.abs(t);return e>=du?Math.round(t/du)+"d":e>=zc?Math.round(t/zc)+"h":e>=Wc?Math.round(t/Wc)+"m":e>=Vc?Math.round(t/Vc)+"s":t+"ms"}function cre(t){var e=Math.abs(t);return e>=du?Yf(t,e,du,"day"):e>=zc?Yf(t,e,zc,"hour"):e>=Wc?Yf(t,e,Wc,"minute"):e>=Vc?Yf(t,e,Vc,"second"):t+" ms"}function Yf(t,e,r,n){var s=e>=r*1.5;return Math.round(t/r)+" "+n+(s?"s":"")}});var nS=m((QDe,VD)=>{function lre(t){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=s,r.enabled=a,r.humanize=rS(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let p=0;for(let d=0;d<l.length;d++)p=(p<<5)-p+l.charCodeAt(d),p|=0;return r.colors[Math.abs(p)%r.colors.length]}r.selectColor=e;function r(l){let p,d=null,h,f;function y(...g){if(!y.enabled)return;let _=y,S=Number(new Date),O=S-(p||S);_.diff=O,_.prev=p,_.curr=S,p=S,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let E=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(x,v)=>{if(x==="%%")return"%";E++;let R=r.formatters[v];if(typeof R=="function"){let M=g[E];x=R.call(_,M),g.splice(E,1),E--}return x}),r.formatArgs.call(_,g),(_.log||r.log).apply(_,g)}return y.namespace=l,y.useColors=r.useColors(),y.color=r.selectColor(l),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(h!==r.namespaces&&(h=r.namespaces,f=r.enabled(l)),f),set:g=>{d=g}}),typeof r.init=="function"&&r.init(y),y}function n(l,p){let d=r(this.namespace+(typeof p>"u"?":":p)+l);return d.log=this.log,d}function s(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let p=(typeof l=="string"?l:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let d of p)d[0]==="-"?r.skips.push(d.slice(1)):r.names.push(d)}function i(l,p){let d=0,h=0,f=-1,y=0;for(;d<l.length;)if(h<p.length&&(p[h]===l[d]||p[h]==="*"))p[h]==="*"?(f=h,y=d,h++):(d++,h++);else if(f!==-1)h=f+1,y++,d=y;else return!1;for(;h<p.length&&p[h]==="*";)h++;return h===p.length}function o(){let l=[...r.names,...r.skips.map(p=>"-"+p)].join(",");return r.enable(""),l}function a(l){for(let p of r.skips)if(i(l,p))return!1;for(let p of r.names)if(i(l,p))return!0;return!1}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}VD.exports=lre});var WD=m((vn,Qf)=>{vn.formatArgs=dre;vn.save=hre;vn.load=fre;vn.useColors=pre;vn.storage=mre();vn.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();vn.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function pre(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function dre(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Qf.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(r++,s==="%c"&&(n=r))}),t.splice(n,0,e)}vn.log=console.debug||console.log||(()=>{});function hre(t){try{t?vn.storage.setItem("debug",t):vn.storage.removeItem("debug")}catch{}}function fre(){let t;try{t=vn.storage.getItem("debug")||vn.storage.getItem("DEBUG")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function mre(){try{return localStorage}catch{}}Qf.exports=nS()(vn);var{formatters:yre}=Qf.exports;yre.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var KD=m((hr,Zf)=>{var gre=require("tty"),Xf=require("util");hr.init=Ore;hr.log=Sre;hr.formatArgs=Ere;hr.save=wre;hr.load=Are;hr.useColors=_re;hr.destroy=Xf.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");hr.colors=[6,2,3,4,5,1];try{let t=require("supports-color");t&&(t.stderr||t).level>=2&&(hr.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}hr.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(s,i)=>i.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function _re(){return"colors"in hr.inspectOpts?!!hr.inspectOpts.colors:gre.isatty(process.stderr.fd)}function Ere(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,s="\x1B[3"+(n<8?n:"8;5;"+n),i=`  ${s};1m${e} \x1B[0m`;t[0]=i+t[0].split(`
`).join(`
`+i),t.push(s+"m+"+Zf.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=bre()+e+" "+t[0]}function bre(){return hr.inspectOpts.hideDate?"":new Date().toISOString()+" "}function Sre(...t){return process.stderr.write(Xf.formatWithOptions(hr.inspectOpts,...t)+`
`)}function wre(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function Are(){return process.env.DEBUG}function Ore(t){t.inspectOpts={};let e=Object.keys(hr.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=hr.inspectOpts[e[r]]}Zf.exports=nS()(hr);var{formatters:zD}=Zf.exports;zD.o=function(t){return this.inspectOpts.colors=this.useColors,Xf.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};zD.O=function(t){return this.inspectOpts.colors=this.useColors,Xf.inspect(t,this.inspectOpts)}});var fr=m((XDe,sS)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?sS.exports=WD():sS.exports=KD()});var hu=m(tm=>{"use strict";Object.defineProperty(tm,"__esModule",{value:!0});tm.Transport=void 0;var Cre=require("events"),vre=T1(),xre=LD(),Tre=fr(),HD=(0,Tre.default)("engine:transport");function Dre(){}var em=class extends Cre.EventEmitter{get readyState(){return this._readyState}set readyState(e){HD("readyState updated from %s to %s (%s)",this._readyState,e,this.name),this._readyState=e}constructor(e){super(),this.writable=!1,this._readyState="open",this.discarded=!1,this.protocol=e._query.EIO==="4"?4:3,this.parser=this.protocol===4?vre:xre,this.supportsBinary=!(e._query&&e._query.b64)}discard(){this.discarded=!0}onRequest(e){}close(e){this.readyState==="closed"||this.readyState==="closing"||(this.readyState="closing",this.doClose(e||Dre))}onError(e,r){if(this.listeners("error").length){let n=new Error(e);n.type="TransportError",n.description=r,this.emit("error",n)}else HD("ignored transport error %s (%s)",e,r)}onPacket(e){this.emit("packet",e)}onData(e){this.onPacket(this.parser.decodePacket(e))}onClose(){this.readyState="closed",this.emit("close")}};tm.Transport=em;em.upgradesTo=[]});var oS=m(rm=>{"use strict";Object.defineProperty(rm,"__esModule",{value:!0});rm.Polling=void 0;var Mre=hu(),GD=require("zlib"),Pre=Uf(),Bre=fr(),Jn=(0,Bre.default)("engine:polling"),Ire={gzip:GD.createGzip,deflate:GD.createDeflate},iS=class extends Mre.Transport{constructor(e){super(e),this.closeTimeout=30*1e3}get name(){return"polling"}onRequest(e){let r=e.res;e.res=null,e.method==="GET"?this.onPollRequest(e,r):e.method==="POST"?this.onDataRequest(e,r):(r.writeHead(500),r.end())}onPollRequest(e,r){if(this.req){Jn("request overlap"),this.onError("overlap from client"),r.writeHead(400),r.end();return}Jn("setting request"),this.req=e,this.res=r;let n=()=>{this.onError("poll connection closed prematurely")},s=()=>{e.removeListener("close",n),this.req=this.res=null};e.cleanup=s,e.on("close",n),this.writable=!0,this.emit("ready"),this.writable&&this.shouldClose&&(Jn("triggering empty send to append close packet"),this.send([{type:"noop"}]))}onDataRequest(e,r){if(this.dataReq){this.onError("data request overlap from client"),r.writeHead(400),r.end();return}let n=e.headers["content-type"]==="application/octet-stream";if(n&&this.protocol===4)return this.onError("invalid content");this.dataReq=e,this.dataRes=r;let s=n?Buffer.concat([]):"",i=()=>{e.removeListener("data",a),e.removeListener("end",u),e.removeListener("close",o),this.dataReq=this.dataRes=s=null},o=()=>{i(),this.onError("data request connection closed prematurely")},a=c=>{let l;n?(s=Buffer.concat([s,c]),l=s.length):(s+=c,l=Buffer.byteLength(s)),l>this.maxHttpBufferSize&&(r.writeHead(413).end(),i())},u=()=>{this.onData(s);let c={"Content-Type":"text/html","Content-Length":"2"};r.writeHead(200,this.headers(e,c)),r.end("ok"),i()};e.on("close",o),n||e.setEncoding("utf8"),e.on("data",a),e.on("end",u)}onData(e){Jn('received "%s"',e);let r=n=>{if(n.type==="close")return Jn("got xhr close packet"),this.onClose(),!1;this.onPacket(n)};this.protocol===3?this.parser.decodePayload(e,r):this.parser.decodePayload(e).forEach(r)}onClose(){this.writable&&this.send([{type:"noop"}]),super.onClose()}send(e){this.writable=!1,this.shouldClose&&(Jn("appending close packet to payload"),e.push({type:"close"}),this.shouldClose(),this.shouldClose=null);let r=n=>{let s=e.some(i=>i.options&&i.options.compress);this.write(n,{compress:s})};this.protocol===3?this.parser.encodePayload(e,this.supportsBinary,r):this.parser.encodePayload(e,r)}write(e,r){Jn('writing "%s"',e),this.doWrite(e,r,()=>{this.req.cleanup(),this.emit("drain")})}doWrite(e,r,n){let s=typeof e=="string",o={"Content-Type":s?"text/plain; charset=UTF-8":"application/octet-stream"},a=l=>{o["Content-Length"]=typeof l=="string"?Buffer.byteLength(l):l.length,this.res.writeHead(200,this.headers(this.req,o)),this.res.end(l),n()};if(!this.httpCompression||!r.compress){a(e);return}if((s?Buffer.byteLength(e):e.length)<this.httpCompression.threshold){a(e);return}let c=Pre(this.req).encodings(["gzip","deflate"]);if(!c){a(e);return}this.compress(e,c,(l,p)=>{if(l){this.res.writeHead(500),this.res.end(),n(l);return}o["Content-Encoding"]=c,a(p)})}compress(e,r,n){Jn("compressing");let s=[],i=0;Ire[r](this.httpCompression).on("error",n).on("data",function(o){s.push(o),i+=o.length}).on("end",function(){n(null,Buffer.concat(s,i))}).end(e)}doClose(e){Jn("closing");let r;this.dataReq&&(Jn("aborting ongoing data request"),this.dataReq.destroy());let n=()=>{clearTimeout(r),e(),this.onClose()};this.writable?(Jn("transport writable - closing right away"),this.send([{type:"close"}]),n()):this.discarded?(Jn("transport discarded - closing right away"),n()):(Jn("transport not writable - buffering orderly close"),this.shouldClose=n,r=setTimeout(n,this.closeTimeout))}headers(e,r={}){let n=e.headers["user-agent"];return n&&(~n.indexOf(";MSIE")||~n.indexOf("Trident/"))&&(r["X-XSS-Protection"]="0"),r["cache-control"]="no-store",this.emit("headers",r,e),r}};rm.Polling=iS});var JD=m(nm=>{"use strict";Object.defineProperty(nm,"__esModule",{value:!0});nm.JSONP=void 0;var Nre=oS(),kre=require("querystring"),Rre=/\\\\n/g,Fre=/(\\)?\\n/g,aS=class extends Nre.Polling{constructor(e){super(e),this.head="___eio["+(e._query.j||"").replace(/[^0-9]/g,"")+"](",this.foot=");"}onData(e){e=kre.parse(e).d,typeof e=="string"&&(e=e.replace(Fre,function(r,n){return n?r:`
`}),super.onData(e.replace(Rre,"\\n")))}doWrite(e,r,n){let s=JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029");e=this.head+s+this.foot,super.doWrite(e,r,n)}};nm.JSONP=aS});var QD=m(sm=>{"use strict";Object.defineProperty(sm,"__esModule",{value:!0});sm.WebSocket=void 0;var $re=hu(),qre=fr(),YD=(0,qre.default)("engine:ws"),uS=class extends $re.Transport{constructor(e){super(e),this._doSend=r=>{this.socket.send(r,this._onSent)},this._doSendLast=r=>{this.socket.send(r,this._onSentLast)},this._onSent=r=>{r&&this.onError("write error",r.stack)},this._onSentLast=r=>{r?this.onError("write error",r.stack):(this.emit("drain"),this.writable=!0,this.emit("ready"))},this.socket=e.websocket,this.socket.on("message",(r,n)=>{let s=n?r:r.toString();YD('received "%s"',s),super.onData(s)}),this.socket.once("close",this.onClose.bind(this)),this.socket.on("error",this.onError.bind(this)),this.writable=!0,this.perMessageDeflate=null}get name(){return"websocket"}get handlesUpgrades(){return!0}send(e){this.writable=!1;for(let r=0;r<e.length;r++){let n=e[r],s=r+1===e.length;this._canSendPreEncodedFrame(n)?this.socket._sender.sendFrame(n.options.wsPreEncodedFrame,s?this._onSentLast:this._onSent):this.parser.encodePacket(n,this.supportsBinary,s?this._doSendLast:this._doSend)}}_canSendPreEncodedFrame(e){var r,n,s;return!this.perMessageDeflate&&typeof((n=(r=this.socket)===null||r===void 0?void 0:r._sender)===null||n===void 0?void 0:n.sendFrame)=="function"&&((s=e.options)===null||s===void 0?void 0:s.wsPreEncodedFrame)!==void 0}doClose(e){YD("closing"),this.socket.close(),e&&e()}};sm.WebSocket=uS});var lS=m(im=>{"use strict";Object.defineProperty(im,"__esModule",{value:!0});im.WebTransport=void 0;var jre=hu(),Lre=fr(),Ure=T1(),Kc=(0,Lre.default)("engine:webtransport"),cS=class extends jre.Transport{constructor(e,r,n){super({_query:{EIO:"4"}}),this.session=e;let s=(0,Ure.createPacketEncoderStream)();s.readable.pipeTo(r.writable).catch(()=>{Kc("the stream was closed")}),this.writer=s.writable.getWriter(),(async()=>{try{for(;;){let{value:i,done:o}=await n.read();if(o){Kc("session is closed");break}Kc("received chunk: %o",i),this.onPacket(i)}}catch(i){Kc("error while reading: %s",i.message)}})(),e.closed.then(()=>this.onClose()),this.writable=!0}get name(){return"webtransport"}async send(e){this.writable=!1;try{for(let r=0;r<e.length;r++){let n=e[r];await this.writer.write(n)}}catch(r){Kc("error while writing: %s",r.message)}this.emit("drain"),this.writable=!0,this.emit("ready")}doClose(e){Kc("closing WebTransport session"),this.session.close(),e&&e()}};im.WebTransport=cS});var dS=m(pS=>{"use strict";Object.defineProperty(pS,"__esModule",{value:!0});var Vre=oS(),Wre=JD(),zre=QD(),Kre=lS();pS.default={polling:XD,websocket:zre.WebSocket,webtransport:Kre.WebTransport};function XD(t){return typeof t._query.j=="string"?new Wre.JSONP(t):new Vre.Polling(t)}XD.upgradesTo=["websocket","webtransport"]});var fS=m(om=>{"use strict";Object.defineProperty(om,"__esModule",{value:!0});om.Socket=void 0;var Hre=require("events"),Gre=fr(),io=require("timers"),qt=(0,Gre.default)("engine:socket"),hS=class extends Hre.EventEmitter{get readyState(){return this._readyState}set readyState(e){qt("readyState updated from %s to %s",this._readyState,e),this._readyState=e}constructor(e,r,n,s,i){super(),this._readyState="opening",this.upgrading=!1,this.upgraded=!1,this.writeBuffer=[],this.packetsFn=[],this.sentCallbackFn=[],this.cleanupFn=[],this.id=e,this.server=r,this.request=s,this.protocol=i,s&&(s.websocket&&s.websocket._socket?this.remoteAddress=s.websocket._socket.remoteAddress:this.remoteAddress=s.connection.remoteAddress),this.pingTimeoutTimer=null,this.pingIntervalTimer=null,this.setTransport(n),this.onOpen()}onOpen(){this.readyState="open",this.transport.sid=this.id,this.sendPacket("open",JSON.stringify({sid:this.id,upgrades:this.getAvailableUpgrades(),pingInterval:this.server.opts.pingInterval,pingTimeout:this.server.opts.pingTimeout,maxPayload:this.server.opts.maxHttpBufferSize})),this.server.opts.initialPacket&&this.sendPacket("message",this.server.opts.initialPacket),this.emit("open"),this.protocol===3?this.resetPingTimeout():this.schedulePing()}onPacket(e){if(this.readyState!=="open")return qt("packet received with closed socket");switch(qt(`received packet ${e.type}`),this.emit("packet",e),e.type){case"ping":if(this.transport.protocol!==3){this.onError(new Error("invalid heartbeat direction"));return}qt("got ping"),this.pingTimeoutTimer.refresh(),this.sendPacket("pong"),this.emit("heartbeat");break;case"pong":if(this.transport.protocol===3){this.onError(new Error("invalid heartbeat direction"));return}qt("got pong"),(0,io.clearTimeout)(this.pingTimeoutTimer),this.pingIntervalTimer.refresh(),this.emit("heartbeat");break;case"error":this.onClose("parse error");break;case"message":this.emit("data",e.data),this.emit("message",e.data);break}}onError(e){qt("transport error"),this.onClose("transport error",e)}schedulePing(){this.pingIntervalTimer=(0,io.setTimeout)(()=>{qt("writing ping packet - expecting pong within %sms",this.server.opts.pingTimeout),this.sendPacket("ping"),this.resetPingTimeout()},this.server.opts.pingInterval)}resetPingTimeout(){(0,io.clearTimeout)(this.pingTimeoutTimer),this.pingTimeoutTimer=(0,io.setTimeout)(()=>{this.readyState!=="closed"&&this.onClose("ping timeout")},this.protocol===3?this.server.opts.pingInterval+this.server.opts.pingTimeout:this.server.opts.pingTimeout)}setTransport(e){let r=this.onError.bind(this),n=()=>this.flush(),s=this.onPacket.bind(this),i=this.onDrain.bind(this),o=this.onClose.bind(this,"transport close");this.transport=e,this.transport.once("error",r),this.transport.on("ready",n),this.transport.on("packet",s),this.transport.on("drain",i),this.transport.once("close",o),this.cleanupFn.push(function(){e.removeListener("error",r),e.removeListener("ready",n),e.removeListener("packet",s),e.removeListener("drain",i),e.removeListener("close",o)})}onDrain(){if(this.sentCallbackFn.length>0){qt("executing batch send callback");let e=this.sentCallbackFn.shift();if(e)for(let r=0;r<e.length;r++)e[r](this.transport)}}_maybeUpgrade(e){qt('might upgrade socket transport from "%s" to "%s"',this.transport.name,e.name),this.upgrading=!0;let r=(0,io.setTimeout)(()=>{qt("client did not complete upgrade - closing transport"),o(),e.readyState==="open"&&e.close()},this.server.opts.upgradeTimeout),n,s=l=>{l.type==="ping"&&l.data==="probe"?(qt("got probe ping packet, sending pong"),e.send([{type:"pong",data:"probe"}]),this.emit("upgrading",e),clearInterval(n),n=setInterval(i,100)):l.type==="upgrade"&&this.readyState!=="closed"?(qt("got upgrade packet - upgrading"),o(),this.transport.discard(),this.upgraded=!0,this.clearTransport(),this.setTransport(e),this.emit("upgrade",e),this.flush(),this.readyState==="closing"&&e.close(()=>{this.onClose("forced close")})):(o(),e.close())},i=()=>{this.transport.name==="polling"&&this.transport.writable&&(qt("writing a noop packet to polling for fast upgrade"),this.transport.send([{type:"noop"}]))},o=()=>{this.upgrading=!1,clearInterval(n),(0,io.clearTimeout)(r),e.removeListener("packet",s),e.removeListener("close",u),e.removeListener("error",a),this.removeListener("close",c)},a=l=>{qt("client did not complete upgrade - %s",l),o(),e.close(),e=null},u=()=>{a("transport closed")},c=()=>{a("socket closed")};e.on("packet",s),e.once("close",u),e.once("error",a),this.once("close",c)}clearTransport(){let e,r=this.cleanupFn.length;for(let n=0;n<r;n++)e=this.cleanupFn.shift(),e();this.transport.on("error",function(){qt("error triggered by discarded transport")}),this.transport.close(),(0,io.clearTimeout)(this.pingTimeoutTimer)}onClose(e,r){this.readyState!=="closed"&&(this.readyState="closed",(0,io.clearTimeout)(this.pingIntervalTimer),(0,io.clearTimeout)(this.pingTimeoutTimer),process.nextTick(()=>{this.writeBuffer=[]}),this.packetsFn=[],this.sentCallbackFn=[],this.clearTransport(),this.emit("close",e,r))}send(e,r,n){return this.sendPacket("message",e,r,n),this}write(e,r,n){return this.sendPacket("message",e,r,n),this}sendPacket(e,r,n={},s){if(typeof n=="function"&&(s=n,n={}),this.readyState!=="closing"&&this.readyState!=="closed"){qt('sending packet "%s" (%s)',e,r),n.compress=n.compress!==!1;let i={type:e,options:n};r&&(i.data=r),this.emit("packetCreate",i),this.writeBuffer.push(i),typeof s=="function"&&this.packetsFn.push(s),this.flush()}}flush(){if(this.readyState!=="closed"&&this.transport.writable&&this.writeBuffer.length){qt("flushing buffer to transport"),this.emit("flush",this.writeBuffer),this.server.emit("flush",this,this.writeBuffer);let e=this.writeBuffer;this.writeBuffer=[],this.packetsFn.length?(this.sentCallbackFn.push(this.packetsFn),this.packetsFn=[]):this.sentCallbackFn.push(null),this.transport.send(e),this.emit("drain"),this.server.emit("drain",this)}}getAvailableUpgrades(){let e=[],r=this.server.upgrades(this.transport.name);for(let n=0;n<r.length;++n){let s=r[n];this.server.opts.transports.indexOf(s)!==-1&&e.push(s)}return e}close(e){if(e&&(this.readyState==="open"||this.readyState==="closing"))return this.closeTransport(e);if(this.readyState==="open"){if(this.readyState="closing",this.writeBuffer.length){qt("there are %d remaining packets in the buffer, waiting for the 'drain' event",this.writeBuffer.length),this.once("drain",()=>{qt("all packets have been sent, closing the transport"),this.closeTransport(e)});return}qt("the buffer is empty, closing the transport right away"),this.closeTransport(e)}}closeTransport(e){qt("closing the transport (discard? %s)",!!e),e&&this.transport.discard(),this.transport.close(this.onClose.bind(this,"forced close"))}};om.Socket=hS});var tM=m(mS=>{"use strict";mS.parse=tne;mS.serialize=rne;var Jre=Object.prototype.toString,Yre=Object.prototype.hasOwnProperty,Qre=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,Xre=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,Zre=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,ene=/^[\u0020-\u003A\u003D-\u007E]*$/;function tne(t,e){if(typeof t!="string")throw new TypeError("argument str must be a string");var r={},n=t.length;if(n<2)return r;var s=e&&e.decode||nne,i=0,o=0,a=0;do{if(o=t.indexOf("=",i),o===-1)break;if(a=t.indexOf(";",i),a===-1)a=n;else if(o>a){i=t.lastIndexOf(";",o-1)+1;continue}var u=ZD(t,i,o),c=eM(t,o,u),l=t.slice(u,c);if(!Yre.call(r,l)){var p=ZD(t,o+1,a),d=eM(t,a,p);t.charCodeAt(p)===34&&t.charCodeAt(d-1)===34&&(p++,d--);var h=t.slice(p,d);r[l]=ine(h,s)}i=a+1}while(i<n);return r}function ZD(t,e,r){do{var n=t.charCodeAt(e);if(n!==32&&n!==9)return e}while(++e<r);return r}function eM(t,e,r){for(;e>r;){var n=t.charCodeAt(--e);if(n!==32&&n!==9)return e+1}return r}function rne(t,e,r){var n=r&&r.encode||encodeURIComponent;if(typeof n!="function")throw new TypeError("option encode is invalid");if(!Qre.test(t))throw new TypeError("argument name is invalid");var s=n(e);if(!Xre.test(s))throw new TypeError("argument val is invalid");var i=t+"="+s;if(!r)return i;if(r.maxAge!=null){var o=Math.floor(r.maxAge);if(!isFinite(o))throw new TypeError("option maxAge is invalid");i+="; Max-Age="+o}if(r.domain){if(!Zre.test(r.domain))throw new TypeError("option domain is invalid");i+="; Domain="+r.domain}if(r.path){if(!ene.test(r.path))throw new TypeError("option path is invalid");i+="; Path="+r.path}if(r.expires){var a=r.expires;if(!sne(a)||isNaN(a.valueOf()))throw new TypeError("option expires is invalid");i+="; Expires="+a.toUTCString()}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.partitioned&&(i+="; Partitioned"),r.priority){var u=typeof r.priority=="string"?r.priority.toLowerCase():r.priority;switch(u){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(r.sameSite){var c=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(c){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return i}function nne(t){return t.indexOf("%")!==-1?decodeURIComponent(t):t}function sne(t){return Jre.call(t)==="[object Date]"}function ine(t,e){try{return e(t)}catch{return t}}});var oo=m((aMe,sM)=>{"use strict";var rM=["nodebuffer","arraybuffer","fragments"],nM=typeof Blob<"u";nM&&rM.push("blob");sM.exports={BINARY_TYPES:rM,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:nM,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var D1=m((uMe,am)=>{"use strict";var{EMPTY_BUFFER:one}=oo(),yS=Buffer[Symbol.species];function ane(t,e){if(t.length===0)return one;if(t.length===1)return t[0];let r=Buffer.allocUnsafe(e),n=0;for(let s=0;s<t.length;s++){let i=t[s];r.set(i,n),n+=i.length}return n<e?new yS(r.buffer,r.byteOffset,n):r}function iM(t,e,r,n,s){for(let i=0;i<s;i++)r[n+i]=t[i]^e[i&3]}function oM(t,e){for(let r=0;r<t.length;r++)t[r]^=e[r&3]}function une(t){return t.length===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.length)}function gS(t){if(gS.readOnly=!0,Buffer.isBuffer(t))return t;let e;return t instanceof ArrayBuffer?e=new yS(t):ArrayBuffer.isView(t)?e=new yS(t.buffer,t.byteOffset,t.byteLength):(e=Buffer.from(t),gS.readOnly=!1),e}am.exports={concat:ane,mask:iM,toArrayBuffer:une,toBuffer:gS,unmask:oM};if(!process.env.WS_NO_BUFFER_UTIL)try{let t=require("bufferutil");am.exports.mask=function(e,r,n,s,i){i<48?iM(e,r,n,s,i):t.mask(e,r,n,s,i)},am.exports.unmask=function(e,r){e.length<32?oM(e,r):t.unmask(e,r)}}catch{}});var cM=m((cMe,uM)=>{"use strict";var aM=Symbol("kDone"),_S=Symbol("kRun"),ES=class{constructor(e){this[aM]=()=>{this.pending--,this[_S]()},this.concurrency=e||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[_S]()}[_S](){if(this.pending!==this.concurrency&&this.jobs.length){let e=this.jobs.shift();this.pending++,e(this[aM])}}};uM.exports=ES});var P1=m((lMe,hM)=>{"use strict";var M1=require("zlib"),lM=D1(),cne=cM(),{kStatusCode:pM}=oo(),lne=Buffer[Symbol.species],pne=Buffer.from([0,0,255,255]),cm=Symbol("permessage-deflate"),ao=Symbol("total-length"),Hc=Symbol("callback"),sa=Symbol("buffers"),Gc=Symbol("error"),um,bS=class{constructor(e,r,n){if(this._maxPayload=n|0,this._options=e||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!r,this._deflate=null,this._inflate=null,this.params=null,!um){let s=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;um=new cne(s)}}static get extensionName(){return"permessage-deflate"}offer(){let e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let e=this._deflate[Hc];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){let r=this._options,n=e.find(s=>!(r.serverNoContextTakeover===!1&&s.server_no_context_takeover||s.server_max_window_bits&&(r.serverMaxWindowBits===!1||typeof r.serverMaxWindowBits=="number"&&r.serverMaxWindowBits>s.server_max_window_bits)||typeof r.clientMaxWindowBits=="number"&&!s.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return r.serverNoContextTakeover&&(n.server_no_context_takeover=!0),r.clientNoContextTakeover&&(n.client_no_context_takeover=!0),typeof r.serverMaxWindowBits=="number"&&(n.server_max_window_bits=r.serverMaxWindowBits),typeof r.clientMaxWindowBits=="number"?n.client_max_window_bits=r.clientMaxWindowBits:(n.client_max_window_bits===!0||r.clientMaxWindowBits===!1)&&delete n.client_max_window_bits,n}acceptAsClient(e){let r=e[0];if(this._options.clientNoContextTakeover===!1&&r.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!r.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(r.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&r.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return r}normalizeParams(e){return e.forEach(r=>{Object.keys(r).forEach(n=>{let s=r[n];if(s.length>1)throw new Error(`Parameter "${n}" must have only a single value`);if(s=s[0],n==="client_max_window_bits"){if(s!==!0){let i=+s;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${n}": ${s}`);s=i}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${n}": ${s}`)}else if(n==="server_max_window_bits"){let i=+s;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${n}": ${s}`);s=i}else if(n==="client_no_context_takeover"||n==="server_no_context_takeover"){if(s!==!0)throw new TypeError(`Invalid value for parameter "${n}": ${s}`)}else throw new Error(`Unknown parameter "${n}"`);r[n]=s})}),e}decompress(e,r,n){um.add(s=>{this._decompress(e,r,(i,o)=>{s(),n(i,o)})})}compress(e,r,n){um.add(s=>{this._compress(e,r,(i,o)=>{s(),n(i,o)})})}_decompress(e,r,n){let s=this._isServer?"client":"server";if(!this._inflate){let i=`${s}_max_window_bits`,o=typeof this.params[i]!="number"?M1.Z_DEFAULT_WINDOWBITS:this.params[i];this._inflate=M1.createInflateRaw({...this._options.zlibInflateOptions,windowBits:o}),this._inflate[cm]=this,this._inflate[ao]=0,this._inflate[sa]=[],this._inflate.on("error",hne),this._inflate.on("data",dM)}this._inflate[Hc]=n,this._inflate.write(e),r&&this._inflate.write(pne),this._inflate.flush(()=>{let i=this._inflate[Gc];if(i){this._inflate.close(),this._inflate=null,n(i);return}let o=lM.concat(this._inflate[sa],this._inflate[ao]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[ao]=0,this._inflate[sa]=[],r&&this.params[`${s}_no_context_takeover`]&&this._inflate.reset()),n(null,o)})}_compress(e,r,n){let s=this._isServer?"server":"client";if(!this._deflate){let i=`${s}_max_window_bits`,o=typeof this.params[i]!="number"?M1.Z_DEFAULT_WINDOWBITS:this.params[i];this._deflate=M1.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:o}),this._deflate[ao]=0,this._deflate[sa]=[],this._deflate.on("data",dne)}this._deflate[Hc]=n,this._deflate.write(e),this._deflate.flush(M1.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let i=lM.concat(this._deflate[sa],this._deflate[ao]);r&&(i=new lne(i.buffer,i.byteOffset,i.length-4)),this._deflate[Hc]=null,this._deflate[ao]=0,this._deflate[sa]=[],r&&this.params[`${s}_no_context_takeover`]&&this._deflate.reset(),n(null,i)})}};hM.exports=bS;function dne(t){this[sa].push(t),this[ao]+=t.length}function dM(t){if(this[ao]+=t.length,this[cm]._maxPayload<1||this[ao]<=this[cm]._maxPayload){this[sa].push(t);return}this[Gc]=new RangeError("Max payload size exceeded"),this[Gc].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[Gc][pM]=1009,this.removeListener("data",dM),this.reset()}function hne(t){if(this[cm]._inflate=null,this[Gc]){this[Hc](this[Gc]);return}t[pM]=1007,this[Hc](t)}});var Jc=m((pMe,lm)=>{"use strict";var{isUtf8:fM}=require("buffer"),{hasBlob:fne}=oo(),mne=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function yne(t){return t>=1e3&&t<=1014&&t!==1004&&t!==1005&&t!==1006||t>=3e3&&t<=4999}function SS(t){let e=t.length,r=0;for(;r<e;)if((t[r]&128)===0)r++;else if((t[r]&224)===192){if(r+1===e||(t[r+1]&192)!==128||(t[r]&254)===192)return!1;r+=2}else if((t[r]&240)===224){if(r+2>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||t[r]===224&&(t[r+1]&224)===128||t[r]===237&&(t[r+1]&224)===160)return!1;r+=3}else if((t[r]&248)===240){if(r+3>=e||(t[r+1]&192)!==128||(t[r+2]&192)!==128||(t[r+3]&192)!==128||t[r]===240&&(t[r+1]&240)===128||t[r]===244&&t[r+1]>143||t[r]>244)return!1;r+=4}else return!1;return!0}function gne(t){return fne&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&(t[Symbol.toStringTag]==="Blob"||t[Symbol.toStringTag]==="File")}lm.exports={isBlob:gne,isValidStatusCode:yne,isValidUTF8:SS,tokenChars:mne};if(fM)lm.exports.isValidUTF8=function(t){return t.length<24?SS(t):fM(t)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let t=require("utf-8-validate");lm.exports.isValidUTF8=function(e){return e.length<32?SS(e):t(e)}}catch{}});var vS=m((dMe,SM)=>{"use strict";var{Writable:_ne}=require("stream"),mM=P1(),{BINARY_TYPES:Ene,EMPTY_BUFFER:yM,kStatusCode:bne,kWebSocket:Sne}=oo(),{concat:wS,toArrayBuffer:wne,unmask:Ane}=D1(),{isValidStatusCode:One,isValidUTF8:gM}=Jc(),pm=Buffer[Symbol.species],gs=0,_M=1,EM=2,bM=3,AS=4,OS=5,dm=6,CS=class extends _ne{constructor(e={}){super(),this._allowSynchronousEvents=e.allowSynchronousEvents!==void 0?e.allowSynchronousEvents:!0,this._binaryType=e.binaryType||Ene[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=e.maxPayload|0,this._skipUTF8Validation=!!e.skipUTF8Validation,this[Sne]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=gs}_write(e,r,n){if(this._opcode===8&&this._state==gs)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){let n=this._buffers[0];return this._buffers[0]=new pm(n.buffer,n.byteOffset+e,n.length-e),new pm(n.buffer,n.byteOffset,e)}let r=Buffer.allocUnsafe(e);do{let n=this._buffers[0],s=r.length-e;e>=n.length?r.set(this._buffers.shift(),s):(r.set(new Uint8Array(n.buffer,n.byteOffset,e),s),this._buffers[0]=new pm(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return r}startLoop(e){this._loop=!0;do switch(this._state){case gs:this.getInfo(e);break;case _M:this.getPayloadLength16(e);break;case EM:this.getPayloadLength64(e);break;case bM:this.getMask();break;case AS:this.getData(e);break;case OS:case dm:this._loop=!1;return}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2){this._loop=!1;return}let r=this.consume(2);if((r[0]&48)!==0){let s=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");e(s);return}let n=(r[0]&64)===64;if(n&&!this._extensions[mM.extensionName]){let s=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(s);return}if(this._fin=(r[0]&128)===128,this._opcode=r[0]&15,this._payloadLength=r[1]&127,this._opcode===0){if(n){let s=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(s);return}if(!this._fragmented){let s=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");e(s);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let s=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(s);return}this._compressed=n}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let s=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");e(s);return}if(n){let s=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");e(s);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let s=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");e(s);return}}else{let s=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");e(s);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(r[1]&128)===128,this._isServer){if(!this._masked){let s=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");e(s);return}}else if(this._masked){let s=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");e(s);return}this._payloadLength===126?this._state=_M:this._payloadLength===127?this._state=EM:this.haveLength(e)}getPayloadLength16(e){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e)}getPayloadLength64(e){if(this._bufferedBytes<8){this._loop=!1;return}let r=this.consume(8),n=r.readUInt32BE(0);if(n>Math.pow(2,21)-1){let s=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");e(s);return}this._payloadLength=n*Math.pow(2,32)+r.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let r=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");e(r);return}this._masked?this._state=bM:this._state=AS}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=AS}getData(e){let r=yM;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}r=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0&&Ane(r,this._mask)}if(this._opcode>7){this.controlMessage(r,e);return}if(this._compressed){this._state=OS,this.decompress(r,e);return}r.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(r)),this.dataMessage(e)}decompress(e,r){this._extensions[mM.extensionName].decompress(e,this._fin,(s,i)=>{if(s)return r(s);if(i.length){if(this._messageLength+=i.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let o=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");r(o);return}this._fragments.push(i)}this.dataMessage(r),this._state===gs&&this.startLoop(r)})}dataMessage(e){if(!this._fin){this._state=gs;return}let r=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let s;this._binaryType==="nodebuffer"?s=wS(n,r):this._binaryType==="arraybuffer"?s=wne(wS(n,r)):this._binaryType==="blob"?s=new Blob(n):s=n,this._allowSynchronousEvents?(this.emit("message",s,!0),this._state=gs):(this._state=dm,setImmediate(()=>{this.emit("message",s,!0),this._state=gs,this.startLoop(e)}))}else{let s=wS(n,r);if(!this._skipUTF8Validation&&!gM(s)){let i=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");e(i);return}this._state===OS||this._allowSynchronousEvents?(this.emit("message",s,!1),this._state=gs):(this._state=dm,setImmediate(()=>{this.emit("message",s,!1),this._state=gs,this.startLoop(e)}))}}controlMessage(e,r){if(this._opcode===8){if(e.length===0)this._loop=!1,this.emit("conclude",1005,yM),this.end();else{let n=e.readUInt16BE(0);if(!One(n)){let i=this.createError(RangeError,`invalid status code ${n}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");r(i);return}let s=new pm(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!gM(s)){let i=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");r(i);return}this._loop=!1,this.emit("conclude",n,s),this.end()}this._state=gs;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",e),this._state=gs):(this._state=dm,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",e),this._state=gs,this.startLoop(r)}))}createError(e,r,n,s,i){this._loop=!1,this._errored=!0;let o=new e(n?`Invalid WebSocket frame: ${r}`:r);return Error.captureStackTrace(o,this.createError),o.code=i,o[bne]=s,o}};SM.exports=CS});var DS=m((fMe,OM)=>{"use strict";var{Duplex:hMe}=require("stream"),{randomFillSync:Cne}=require("crypto"),wM=P1(),{EMPTY_BUFFER:vne,kWebSocket:xne,NOOP:Tne}=oo(),{isBlob:Yc,isValidStatusCode:Dne}=Jc(),{mask:AM,toBuffer:fu}=D1(),_s=Symbol("kByteLength"),Mne=Buffer.alloc(4),hm=8*1024,mu,Qc=hm,Hs=0,Pne=1,Bne=2,xS=class t{constructor(e,r,n){this._extensions=r||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=Hs,this.onerror=Tne,this[xne]=void 0}static frame(e,r){let n,s=!1,i=2,o=!1;r.mask&&(n=r.maskBuffer||Mne,r.generateMask?r.generateMask(n):(Qc===hm&&(mu===void 0&&(mu=Buffer.alloc(hm)),Cne(mu,0,hm),Qc=0),n[0]=mu[Qc++],n[1]=mu[Qc++],n[2]=mu[Qc++],n[3]=mu[Qc++]),o=(n[0]|n[1]|n[2]|n[3])===0,i=6);let a;typeof e=="string"?(!r.mask||o)&&r[_s]!==void 0?a=r[_s]:(e=Buffer.from(e),a=e.length):(a=e.length,s=r.mask&&r.readOnly&&!o);let u=a;a>=65536?(i+=8,u=127):a>125&&(i+=2,u=126);let c=Buffer.allocUnsafe(s?a+i:i);return c[0]=r.fin?r.opcode|128:r.opcode,r.rsv1&&(c[0]|=64),c[1]=u,u===126?c.writeUInt16BE(a,2):u===127&&(c[2]=c[3]=0,c.writeUIntBE(a,4,6)),r.mask?(c[1]|=128,c[i-4]=n[0],c[i-3]=n[1],c[i-2]=n[2],c[i-1]=n[3],o?[c,e]:s?(AM(e,n,c,i,a),[c]):(AM(e,n,e,0,a),[c,e])):[c,e]}close(e,r,n,s){let i;if(e===void 0)i=vne;else{if(typeof e!="number"||!Dne(e))throw new TypeError("First argument must be a valid error code number");if(r===void 0||!r.length)i=Buffer.allocUnsafe(2),i.writeUInt16BE(e,0);else{let a=Buffer.byteLength(r);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");i=Buffer.allocUnsafe(2+a),i.writeUInt16BE(e,0),typeof r=="string"?i.write(r,2):i.set(r,2)}}let o={[_s]:i.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._state!==Hs?this.enqueue([this.dispatch,i,!1,o,s]):this.sendFrame(t.frame(i,o),s)}ping(e,r,n){let s,i;if(typeof e=="string"?(s=Buffer.byteLength(e),i=!1):Yc(e)?(s=e.size,i=!1):(e=fu(e),s=e.length,i=fu.readOnly),s>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[_s]:s,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:!1};Yc(e)?this._state!==Hs?this.enqueue([this.getBlobData,e,!1,o,n]):this.getBlobData(e,!1,o,n):this._state!==Hs?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(t.frame(e,o),n)}pong(e,r,n){let s,i;if(typeof e=="string"?(s=Buffer.byteLength(e),i=!1):Yc(e)?(s=e.size,i=!1):(e=fu(e),s=e.length,i=fu.readOnly),s>125)throw new RangeError("The data size must not be greater than 125 bytes");let o={[_s]:s,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:!1};Yc(e)?this._state!==Hs?this.enqueue([this.getBlobData,e,!1,o,n]):this.getBlobData(e,!1,o,n):this._state!==Hs?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(t.frame(e,o),n)}send(e,r,n){let s=this._extensions[wM.extensionName],i=r.binary?2:1,o=r.compress,a,u;typeof e=="string"?(a=Buffer.byteLength(e),u=!1):Yc(e)?(a=e.size,u=!1):(e=fu(e),a=e.length,u=fu.readOnly),this._firstFragment?(this._firstFragment=!1,o&&s&&s.params[s._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(o=a>=s._threshold),this._compress=o):(o=!1,i=0),r.fin&&(this._firstFragment=!0);let c={[_s]:a,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:i,readOnly:u,rsv1:o};Yc(e)?this._state!==Hs?this.enqueue([this.getBlobData,e,this._compress,c,n]):this.getBlobData(e,this._compress,c,n):this._state!==Hs?this.enqueue([this.dispatch,e,this._compress,c,n]):this.dispatch(e,this._compress,c,n)}getBlobData(e,r,n,s){this._bufferedBytes+=n[_s],this._state=Bne,e.arrayBuffer().then(i=>{if(this._socket.destroyed){let a=new Error("The socket was closed while the blob was being read");process.nextTick(TS,this,a,s);return}this._bufferedBytes-=n[_s];let o=fu(i);r?this.dispatch(o,r,n,s):(this._state=Hs,this.sendFrame(t.frame(o,n),s),this.dequeue())}).catch(i=>{process.nextTick(Ine,this,i,s)})}dispatch(e,r,n,s){if(!r){this.sendFrame(t.frame(e,n),s);return}let i=this._extensions[wM.extensionName];this._bufferedBytes+=n[_s],this._state=Pne,i.compress(e,n.fin,(o,a)=>{if(this._socket.destroyed){let u=new Error("The socket was closed while data was being compressed");TS(this,u,s);return}this._bufferedBytes-=n[_s],this._state=Hs,n.readOnly=!1,this.sendFrame(t.frame(a,n),s),this.dequeue()})}dequeue(){for(;this._state===Hs&&this._queue.length;){let e=this._queue.shift();this._bufferedBytes-=e[3][_s],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][_s],this._queue.push(e)}sendFrame(e,r){e.length===2?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],r),this._socket.uncork()):this._socket.write(e[0],r)}};OM.exports=xS;function TS(t,e,r){typeof r=="function"&&r(e);for(let n=0;n<t._queue.length;n++){let s=t._queue[n],i=s[s.length-1];typeof i=="function"&&i(e)}}function Ine(t,e,r){TS(t,e,r),t.onerror(e)}});var IM=m((mMe,BM)=>{"use strict";var{kForOnEventAttribute:B1,kListener:MS}=oo(),CM=Symbol("kCode"),vM=Symbol("kData"),xM=Symbol("kError"),TM=Symbol("kMessage"),DM=Symbol("kReason"),Xc=Symbol("kTarget"),MM=Symbol("kType"),PM=Symbol("kWasClean"),uo=class{constructor(e){this[Xc]=null,this[MM]=e}get target(){return this[Xc]}get type(){return this[MM]}};Object.defineProperty(uo.prototype,"target",{enumerable:!0});Object.defineProperty(uo.prototype,"type",{enumerable:!0});var yu=class extends uo{constructor(e,r={}){super(e),this[CM]=r.code===void 0?0:r.code,this[DM]=r.reason===void 0?"":r.reason,this[PM]=r.wasClean===void 0?!1:r.wasClean}get code(){return this[CM]}get reason(){return this[DM]}get wasClean(){return this[PM]}};Object.defineProperty(yu.prototype,"code",{enumerable:!0});Object.defineProperty(yu.prototype,"reason",{enumerable:!0});Object.defineProperty(yu.prototype,"wasClean",{enumerable:!0});var Zc=class extends uo{constructor(e,r={}){super(e),this[xM]=r.error===void 0?null:r.error,this[TM]=r.message===void 0?"":r.message}get error(){return this[xM]}get message(){return this[TM]}};Object.defineProperty(Zc.prototype,"error",{enumerable:!0});Object.defineProperty(Zc.prototype,"message",{enumerable:!0});var I1=class extends uo{constructor(e,r={}){super(e),this[vM]=r.data===void 0?null:r.data}get data(){return this[vM]}};Object.defineProperty(I1.prototype,"data",{enumerable:!0});var Nne={addEventListener(t,e,r={}){for(let s of this.listeners(t))if(!r[B1]&&s[MS]===e&&!s[B1])return;let n;if(t==="message")n=function(i,o){let a=new I1("message",{data:o?i:i.toString()});a[Xc]=this,fm(e,this,a)};else if(t==="close")n=function(i,o){let a=new yu("close",{code:i,reason:o.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[Xc]=this,fm(e,this,a)};else if(t==="error")n=function(i){let o=new Zc("error",{error:i,message:i.message});o[Xc]=this,fm(e,this,o)};else if(t==="open")n=function(){let i=new uo("open");i[Xc]=this,fm(e,this,i)};else return;n[B1]=!!r[B1],n[MS]=e,r.once?this.once(t,n):this.on(t,n)},removeEventListener(t,e){for(let r of this.listeners(t))if(r[MS]===e&&!r[B1]){this.removeListener(t,r);break}}};BM.exports={CloseEvent:yu,ErrorEvent:Zc,Event:uo,EventTarget:Nne,MessageEvent:I1};function fm(t,e,r){typeof t=="object"&&t.handleEvent?t.handleEvent.call(t,r):t.call(e,r)}});var PS=m((yMe,NM)=>{"use strict";var{tokenChars:N1}=Jc();function Bi(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}function kne(t){let e=Object.create(null),r=Object.create(null),n=!1,s=!1,i=!1,o,a,u=-1,c=-1,l=-1,p=0;for(;p<t.length;p++)if(c=t.charCodeAt(p),o===void 0)if(l===-1&&N1[c]===1)u===-1&&(u=p);else if(p!==0&&(c===32||c===9))l===-1&&u!==-1&&(l=p);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${p}`);l===-1&&(l=p);let h=t.slice(u,l);c===44?(Bi(e,h,r),r=Object.create(null)):o=h,u=l=-1}else throw new SyntaxError(`Unexpected character at index ${p}`);else if(a===void 0)if(l===-1&&N1[c]===1)u===-1&&(u=p);else if(c===32||c===9)l===-1&&u!==-1&&(l=p);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${p}`);l===-1&&(l=p),Bi(r,t.slice(u,l),!0),c===44&&(Bi(e,o,r),r=Object.create(null),o=void 0),u=l=-1}else if(c===61&&u!==-1&&l===-1)a=t.slice(u,p),u=l=-1;else throw new SyntaxError(`Unexpected character at index ${p}`);else if(s){if(N1[c]!==1)throw new SyntaxError(`Unexpected character at index ${p}`);u===-1?u=p:n||(n=!0),s=!1}else if(i)if(N1[c]===1)u===-1&&(u=p);else if(c===34&&u!==-1)i=!1,l=p;else if(c===92)s=!0;else throw new SyntaxError(`Unexpected character at index ${p}`);else if(c===34&&t.charCodeAt(p-1)===61)i=!0;else if(l===-1&&N1[c]===1)u===-1&&(u=p);else if(u!==-1&&(c===32||c===9))l===-1&&(l=p);else if(c===59||c===44){if(u===-1)throw new SyntaxError(`Unexpected character at index ${p}`);l===-1&&(l=p);let h=t.slice(u,l);n&&(h=h.replace(/\\/g,""),n=!1),Bi(r,a,h),c===44&&(Bi(e,o,r),r=Object.create(null),o=void 0),a=void 0,u=l=-1}else throw new SyntaxError(`Unexpected character at index ${p}`);if(u===-1||i||c===32||c===9)throw new SyntaxError("Unexpected end of input");l===-1&&(l=p);let d=t.slice(u,l);return o===void 0?Bi(e,d,r):(a===void 0?Bi(r,d,!0):n?Bi(r,a,d.replace(/\\/g,"")):Bi(r,a,d),Bi(e,o,r)),e}function Rne(t){return Object.keys(t).map(e=>{let r=t[e];return Array.isArray(r)||(r=[r]),r.map(n=>[e].concat(Object.keys(n).map(s=>{let i=n[s];return Array.isArray(i)||(i=[i]),i.map(o=>o===!0?s:`${s}=${o}`).join("; ")})).join("; ")).join(", ")}).join(", ")}NM.exports={format:Rne,parse:kne}});var _m=m((EMe,KM)=>{"use strict";var Fne=require("events"),$ne=require("https"),qne=require("http"),FM=require("net"),jne=require("tls"),{randomBytes:Lne,createHash:Une}=require("crypto"),{Duplex:gMe,Readable:_Me}=require("stream"),{URL:BS}=require("url"),ia=P1(),Vne=vS(),Wne=DS(),{isBlob:zne}=Jc(),{BINARY_TYPES:kM,EMPTY_BUFFER:mm,GUID:Kne,kForOnEventAttribute:IS,kListener:Hne,kStatusCode:Gne,kWebSocket:mr,NOOP:$M}=oo(),{EventTarget:{addEventListener:Jne,removeEventListener:Yne}}=IM(),{format:Qne,parse:Xne}=PS(),{toBuffer:Zne}=D1(),ese=30*1e3,qM=Symbol("kAborted"),NS=[8,13],co=["CONNECTING","OPEN","CLOSING","CLOSED"],tse=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,yt=class t extends Fne{constructor(e,r,n){super(),this._binaryType=kM[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=mm,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=t.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,e!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,r===void 0?r=[]:Array.isArray(r)||(typeof r=="object"&&r!==null?(n=r,r=[]):r=[r]),jM(this,e,r,n)):(this._autoPong=n.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){kM.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,r,n){let s=new Vne({allowSynchronousEvents:n.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation}),i=new Wne(e,this._extensions,n.generateMask);this._receiver=s,this._sender=i,this._socket=e,s[mr]=this,i[mr]=this,e[mr]=this,s.on("conclude",sse),s.on("drain",ise),s.on("error",ose),s.on("message",ase),s.on("ping",use),s.on("pong",cse),i.onerror=lse,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),r.length>0&&e.unshift(r),e.on("close",VM),e.on("data",gm),e.on("end",WM),e.on("error",zM),this._readyState=t.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[ia.extensionName]&&this._extensions[ia.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=t.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,r){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){Yn(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===t.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=t.CLOSING,this._sender.close(e,r,!this._isServer,n=>{n||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),UM(this)}}pause(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!0,this._socket.pause())}ping(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){kS(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.ping(e||mm,r,n)}pong(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){kS(this,e,n);return}r===void 0&&(r=!this._isServer),this._sender.pong(e||mm,r,n)}resume(){this.readyState===t.CONNECTING||this.readyState===t.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,r,n){if(this.readyState===t.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof r=="function"&&(n=r,r={}),typeof e=="number"&&(e=e.toString()),this.readyState!==t.OPEN){kS(this,e,n);return}let s={binary:typeof e!="string",mask:!this._isServer,compress:!0,fin:!0,...r};this._extensions[ia.extensionName]||(s.compress=!1),this._sender.send(e||mm,s,n)}terminate(){if(this.readyState!==t.CLOSED){if(this.readyState===t.CONNECTING){Yn(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=t.CLOSING,this._socket.destroy())}}};Object.defineProperty(yt,"CONNECTING",{enumerable:!0,value:co.indexOf("CONNECTING")});Object.defineProperty(yt.prototype,"CONNECTING",{enumerable:!0,value:co.indexOf("CONNECTING")});Object.defineProperty(yt,"OPEN",{enumerable:!0,value:co.indexOf("OPEN")});Object.defineProperty(yt.prototype,"OPEN",{enumerable:!0,value:co.indexOf("OPEN")});Object.defineProperty(yt,"CLOSING",{enumerable:!0,value:co.indexOf("CLOSING")});Object.defineProperty(yt.prototype,"CLOSING",{enumerable:!0,value:co.indexOf("CLOSING")});Object.defineProperty(yt,"CLOSED",{enumerable:!0,value:co.indexOf("CLOSED")});Object.defineProperty(yt.prototype,"CLOSED",{enumerable:!0,value:co.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(t=>{Object.defineProperty(yt.prototype,t,{enumerable:!0})});["open","error","close","message"].forEach(t=>{Object.defineProperty(yt.prototype,`on${t}`,{enumerable:!0,get(){for(let e of this.listeners(t))if(e[IS])return e[Hne];return null},set(e){for(let r of this.listeners(t))if(r[IS]){this.removeListener(t,r);break}typeof e=="function"&&this.addEventListener(t,e,{[IS]:!0})}})});yt.prototype.addEventListener=Jne;yt.prototype.removeEventListener=Yne;KM.exports=yt;function jM(t,e,r,n){let s={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:NS[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...n,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(t._autoPong=s.autoPong,!NS.includes(s.protocolVersion))throw new RangeError(`Unsupported protocol version: ${s.protocolVersion} (supported versions: ${NS.join(", ")})`);let i;if(e instanceof BS)i=e;else try{i=new BS(e)}catch{throw new SyntaxError(`Invalid URL: ${e}`)}i.protocol==="http:"?i.protocol="ws:":i.protocol==="https:"&&(i.protocol="wss:"),t._url=i.href;let o=i.protocol==="wss:",a=i.protocol==="ws+unix:",u;if(i.protocol!=="ws:"&&!o&&!a?u=`The URL's protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"`:a&&!i.pathname?u="The URL's pathname is empty":i.hash&&(u="The URL contains a fragment identifier"),u){let y=new SyntaxError(u);if(t._redirects===0)throw y;ym(t,y);return}let c=o?443:80,l=Lne(16).toString("base64"),p=o?$ne.request:qne.request,d=new Set,h;if(s.createConnection=s.createConnection||(o?nse:rse),s.defaultPort=s.defaultPort||c,s.port=i.port||c,s.host=i.hostname.startsWith("[")?i.hostname.slice(1,-1):i.hostname,s.headers={...s.headers,"Sec-WebSocket-Version":s.protocolVersion,"Sec-WebSocket-Key":l,Connection:"Upgrade",Upgrade:"websocket"},s.path=i.pathname+i.search,s.timeout=s.handshakeTimeout,s.perMessageDeflate&&(h=new ia(s.perMessageDeflate!==!0?s.perMessageDeflate:{},!1,s.maxPayload),s.headers["Sec-WebSocket-Extensions"]=Qne({[ia.extensionName]:h.offer()})),r.length){for(let y of r){if(typeof y!="string"||!tse.test(y)||d.has(y))throw new SyntaxError("An invalid or duplicated subprotocol was specified");d.add(y)}s.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(s.origin&&(s.protocolVersion<13?s.headers["Sec-WebSocket-Origin"]=s.origin:s.headers.Origin=s.origin),(i.username||i.password)&&(s.auth=`${i.username}:${i.password}`),a){let y=s.path.split(":");s.socketPath=y[0],s.path=y[1]}let f;if(s.followRedirects){if(t._redirects===0){t._originalIpc=a,t._originalSecure=o,t._originalHostOrSocketPath=a?s.socketPath:i.host;let y=n&&n.headers;if(n={...n,headers:{}},y)for(let[g,_]of Object.entries(y))n.headers[g.toLowerCase()]=_}else if(t.listenerCount("redirect")===0){let y=a?t._originalIpc?s.socketPath===t._originalHostOrSocketPath:!1:t._originalIpc?!1:i.host===t._originalHostOrSocketPath;(!y||t._originalSecure&&!o)&&(delete s.headers.authorization,delete s.headers.cookie,y||delete s.headers.host,s.auth=void 0)}s.auth&&!n.headers.authorization&&(n.headers.authorization="Basic "+Buffer.from(s.auth).toString("base64")),f=t._req=p(s),t._redirects&&t.emit("redirect",t.url,f)}else f=t._req=p(s);s.timeout&&f.on("timeout",()=>{Yn(t,f,"Opening handshake has timed out")}),f.on("error",y=>{f===null||f[qM]||(f=t._req=null,ym(t,y))}),f.on("response",y=>{let g=y.headers.location,_=y.statusCode;if(g&&s.followRedirects&&_>=300&&_<400){if(++t._redirects>s.maxRedirects){Yn(t,f,"Maximum redirects exceeded");return}f.abort();let S;try{S=new BS(g,e)}catch{let E=new SyntaxError(`Invalid URL: ${g}`);ym(t,E);return}jM(t,S,r,n)}else t.emit("unexpected-response",f,y)||Yn(t,f,`Unexpected server response: ${y.statusCode}`)}),f.on("upgrade",(y,g,_)=>{if(t.emit("upgrade",y),t.readyState!==yt.CONNECTING)return;f=t._req=null;let S=y.headers.upgrade;if(S===void 0||S.toLowerCase()!=="websocket"){Yn(t,g,"Invalid Upgrade header");return}let O=Une("sha1").update(l+Kne).digest("base64");if(y.headers["sec-websocket-accept"]!==O){Yn(t,g,"Invalid Sec-WebSocket-Accept header");return}let E=y.headers["sec-websocket-protocol"],A;if(E!==void 0?d.size?d.has(E)||(A="Server sent an invalid subprotocol"):A="Server sent a subprotocol but none was requested":d.size&&(A="Server sent no subprotocol"),A){Yn(t,g,A);return}E&&(t._protocol=E);let x=y.headers["sec-websocket-extensions"];if(x!==void 0){if(!h){Yn(t,g,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let v;try{v=Xne(x)}catch{Yn(t,g,"Invalid Sec-WebSocket-Extensions header");return}let R=Object.keys(v);if(R.length!==1||R[0]!==ia.extensionName){Yn(t,g,"Server indicated an extension that was not requested");return}try{h.accept(v[ia.extensionName])}catch{Yn(t,g,"Invalid Sec-WebSocket-Extensions header");return}t._extensions[ia.extensionName]=h}t.setSocket(g,_,{allowSynchronousEvents:s.allowSynchronousEvents,generateMask:s.generateMask,maxPayload:s.maxPayload,skipUTF8Validation:s.skipUTF8Validation})}),s.finishRequest?s.finishRequest(f,t):f.end()}function ym(t,e){t._readyState=yt.CLOSING,t._errorEmitted=!0,t.emit("error",e),t.emitClose()}function rse(t){return t.path=t.socketPath,FM.connect(t)}function nse(t){return t.path=void 0,!t.servername&&t.servername!==""&&(t.servername=FM.isIP(t.host)?"":t.host),jne.connect(t)}function Yn(t,e,r){t._readyState=yt.CLOSING;let n=new Error(r);Error.captureStackTrace(n,Yn),e.setHeader?(e[qM]=!0,e.abort(),e.socket&&!e.socket.destroyed&&e.socket.destroy(),process.nextTick(ym,t,n)):(e.destroy(n),e.once("error",t.emit.bind(t,"error")),e.once("close",t.emitClose.bind(t)))}function kS(t,e,r){if(e){let n=zne(e)?e.size:Zne(e).length;t._socket?t._sender._bufferedBytes+=n:t._bufferedAmount+=n}if(r){let n=new Error(`WebSocket is not open: readyState ${t.readyState} (${co[t.readyState]})`);process.nextTick(r,n)}}function sse(t,e){let r=this[mr];r._closeFrameReceived=!0,r._closeMessage=e,r._closeCode=t,r._socket[mr]!==void 0&&(r._socket.removeListener("data",gm),process.nextTick(LM,r._socket),t===1005?r.close():r.close(t,e))}function ise(){let t=this[mr];t.isPaused||t._socket.resume()}function ose(t){let e=this[mr];e._socket[mr]!==void 0&&(e._socket.removeListener("data",gm),process.nextTick(LM,e._socket),e.close(t[Gne])),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t))}function RM(){this[mr].emitClose()}function ase(t,e){this[mr].emit("message",t,e)}function use(t){let e=this[mr];e._autoPong&&e.pong(t,!this._isServer,$M),e.emit("ping",t)}function cse(t){this[mr].emit("pong",t)}function LM(t){t.resume()}function lse(t){let e=this[mr];e.readyState!==yt.CLOSED&&(e.readyState===yt.OPEN&&(e._readyState=yt.CLOSING,UM(e)),this._socket.end(),e._errorEmitted||(e._errorEmitted=!0,e.emit("error",t)))}function UM(t){t._closeTimer=setTimeout(t._socket.destroy.bind(t._socket),ese)}function VM(){let t=this[mr];this.removeListener("close",VM),this.removeListener("data",gm),this.removeListener("end",WM),t._readyState=yt.CLOSING;let e;!this._readableState.endEmitted&&!t._closeFrameReceived&&!t._receiver._writableState.errorEmitted&&(e=t._socket.read())!==null&&t._receiver.write(e),t._receiver.end(),this[mr]=void 0,clearTimeout(t._closeTimer),t._receiver._writableState.finished||t._receiver._writableState.errorEmitted?t.emitClose():(t._receiver.on("error",RM),t._receiver.on("finish",RM))}function gm(t){this[mr]._receiver.write(t)||this.pause()}function WM(){let t=this[mr];t._readyState=yt.CLOSING,t._receiver.end(),this.end()}function zM(){let t=this[mr];this.removeListener("error",zM),this.on("error",$M),t&&(t._readyState=yt.CLOSING,this.destroy())}});var YM=m((SMe,JM)=>{"use strict";var bMe=_m(),{Duplex:pse}=require("stream");function HM(t){t.emit("close")}function dse(){!this.destroyed&&this._writableState.finished&&this.destroy()}function GM(t){this.removeListener("error",GM),this.destroy(),this.listenerCount("error")===0&&this.emit("error",t)}function hse(t,e){let r=!0,n=new pse({...e,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return t.on("message",function(i,o){let a=!o&&n._readableState.objectMode?i.toString():i;n.push(a)||t.pause()}),t.once("error",function(i){n.destroyed||(r=!1,n.destroy(i))}),t.once("close",function(){n.destroyed||n.push(null)}),n._destroy=function(s,i){if(t.readyState===t.CLOSED){i(s),process.nextTick(HM,n);return}let o=!1;t.once("error",function(u){o=!0,i(u)}),t.once("close",function(){o||i(s),process.nextTick(HM,n)}),r&&t.terminate()},n._final=function(s){if(t.readyState===t.CONNECTING){t.once("open",function(){n._final(s)});return}t._socket!==null&&(t._socket._writableState.finished?(s(),n._readableState.endEmitted&&n.destroy()):(t._socket.once("finish",function(){s()}),t.close()))},n._read=function(){t.isPaused&&t.resume()},n._write=function(s,i,o){if(t.readyState===t.CONNECTING){t.once("open",function(){n._write(s,i,o)});return}t.send(s,o)},n.on("end",dse),n.on("error",GM),n}JM.exports=hse});var XM=m((wMe,QM)=>{"use strict";var{tokenChars:fse}=Jc();function mse(t){let e=new Set,r=-1,n=-1,s=0;for(s;s<t.length;s++){let o=t.charCodeAt(s);if(n===-1&&fse[o]===1)r===-1&&(r=s);else if(s!==0&&(o===32||o===9))n===-1&&r!==-1&&(n=s);else if(o===44){if(r===-1)throw new SyntaxError(`Unexpected character at index ${s}`);n===-1&&(n=s);let a=t.slice(r,n);if(e.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);e.add(a),r=n=-1}else throw new SyntaxError(`Unexpected character at index ${s}`)}if(r===-1||n!==-1)throw new SyntaxError("Unexpected end of input");let i=t.slice(r,s);if(e.has(i))throw new SyntaxError(`The "${i}" subprotocol is duplicated`);return e.add(i),e}QM.exports={parse:mse}});var iP=m((OMe,sP)=>{"use strict";var yse=require("events"),Em=require("http"),{Duplex:AMe}=require("stream"),{createHash:gse}=require("crypto"),ZM=PS(),gu=P1(),_se=XM(),Ese=_m(),{GUID:bse,kWebSocket:Sse}=oo(),wse=/^[+/0-9A-Za-z]{22}==$/,eP=0,tP=1,nP=2,RS=class extends yse{constructor(e,r){if(super(),e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:Ese,...e},e.port==null&&!e.server&&!e.noServer||e.port!=null&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(e.port!=null?(this._server=Em.createServer((n,s)=>{let i=Em.STATUS_CODES[426];s.writeHead(426,{"Content-Length":i.length,"Content-Type":"text/plain"}),s.end(i)}),this._server.listen(e.port,e.host,e.backlog,r)):e.server&&(this._server=e.server),this._server){let n=this.emit.bind(this,"connection");this._removeListeners=Ase(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(s,i,o)=>{this.handleUpgrade(s,i,o,n)}})}e.perMessageDeflate===!0&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=eP}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(this._state===nP){e&&this.once("close",()=>{e(new Error("The server is not running"))}),process.nextTick(k1,this);return}if(e&&this.once("close",e),this._state!==tP)if(this._state=tP,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(k1,this):process.nextTick(k1,this);else{let r=this._server;this._removeListeners(),this._removeListeners=this._server=null,r.close(()=>{k1(this)})}}shouldHandle(e){if(this.options.path){let r=e.url.indexOf("?");if((r!==-1?e.url.slice(0,r):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,r,n,s){r.on("error",rP);let i=e.headers["sec-websocket-key"],o=e.headers.upgrade,a=+e.headers["sec-websocket-version"];if(e.method!=="GET"){_u(this,e,r,405,"Invalid HTTP method");return}if(o===void 0||o.toLowerCase()!=="websocket"){_u(this,e,r,400,"Invalid Upgrade header");return}if(i===void 0||!wse.test(i)){_u(this,e,r,400,"Missing or invalid Sec-WebSocket-Key header");return}if(a!==13&&a!==8){_u(this,e,r,400,"Missing or invalid Sec-WebSocket-Version header",{"Sec-WebSocket-Version":"13, 8"});return}if(!this.shouldHandle(e)){R1(r,400);return}let u=e.headers["sec-websocket-protocol"],c=new Set;if(u!==void 0)try{c=_se.parse(u)}catch{_u(this,e,r,400,"Invalid Sec-WebSocket-Protocol header");return}let l=e.headers["sec-websocket-extensions"],p={};if(this.options.perMessageDeflate&&l!==void 0){let d=new gu(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let h=ZM.parse(l);h[gu.extensionName]&&(d.accept(h[gu.extensionName]),p[gu.extensionName]=d)}catch{_u(this,e,r,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let d={origin:e.headers[`${a===8?"sec-websocket-origin":"origin"}`],secure:!!(e.socket.authorized||e.socket.encrypted),req:e};if(this.options.verifyClient.length===2){this.options.verifyClient(d,(h,f,y,g)=>{if(!h)return R1(r,f||401,y,g);this.completeUpgrade(p,i,c,e,r,n,s)});return}if(!this.options.verifyClient(d))return R1(r,401)}this.completeUpgrade(p,i,c,e,r,n,s)}completeUpgrade(e,r,n,s,i,o,a){if(!i.readable||!i.writable)return i.destroy();if(i[Sse])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>eP)return R1(i,503);let c=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${gse("sha1").update(r+bse).digest("base64")}`],l=new this.options.WebSocket(null,void 0,this.options);if(n.size){let p=this.options.handleProtocols?this.options.handleProtocols(n,s):n.values().next().value;p&&(c.push(`Sec-WebSocket-Protocol: ${p}`),l._protocol=p)}if(e[gu.extensionName]){let p=e[gu.extensionName].params,d=ZM.format({[gu.extensionName]:[p]});c.push(`Sec-WebSocket-Extensions: ${d}`),l._extensions=e}this.emit("headers",c,s),i.write(c.concat(`\r
`).join(`\r
`)),i.removeListener("error",rP),l.setSocket(i,o,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(l),l.on("close",()=>{this.clients.delete(l),this._shouldEmitClose&&!this.clients.size&&process.nextTick(k1,this)})),a(l,s)}};sP.exports=RS;function Ase(t,e){for(let r of Object.keys(e))t.on(r,e[r]);return function(){for(let n of Object.keys(e))t.removeListener(n,e[n])}}function k1(t){t._state=nP,t.emit("close")}function rP(){this.destroy()}function R1(t,e,r,n){r=r||Em.STATUS_CODES[e],n={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...n},t.once("finish",t.destroy),t.end(`HTTP/1.1 ${e} ${Em.STATUS_CODES[e]}\r
`+Object.keys(n).map(s=>`${s}: ${n[s]}`).join(`\r
`)+`\r
\r
`+r)}function _u(t,e,r,n,s,i){if(t.listenerCount("wsClientError")){let o=new Error(s);Error.captureStackTrace(o,_u),t.emit("wsClientError",o,r,e)}else R1(r,n,s,i)}});var FS=m((CMe,oP)=>{"use strict";var lo=_m();lo.createWebSocketStream=YM();lo.Server=iP();lo.Receiver=vS();lo.Sender=DS();lo.WebSocket=lo;lo.WebSocketServer=lo.Server;oP.exports=lo});var cP=m((vMe,uP)=>{"use strict";var aP=Object.getOwnPropertySymbols,Ose=Object.prototype.hasOwnProperty,Cse=Object.prototype.propertyIsEnumerable;function vse(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function xse(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map(function(i){return e[i]});if(n.join("")!=="0123456789")return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(i){s[i]=i}),Object.keys(Object.assign({},s)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}uP.exports=xse()?Object.assign:function(t,e){for(var r,n=vse(t),s,i=1;i<arguments.length;i++){r=Object(arguments[i]);for(var o in r)Ose.call(r,o)&&(n[o]=r[o]);if(aP){s=aP(r);for(var a=0;a<s.length;a++)Cse.call(r,s[a])&&(n[s[a]]=r[s[a]])}}return n}});var dP=m((xMe,$S)=>{"use strict";$S.exports=Dse;$S.exports.append=pP;var Tse=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/;function pP(t,e){if(typeof t!="string")throw new TypeError("header argument is required");if(!e)throw new TypeError("field argument is required");for(var r=Array.isArray(e)?e:lP(String(e)),n=0;n<r.length;n++)if(!Tse.test(r[n]))throw new TypeError("field argument contains an invalid header name");if(t==="*")return t;var s=t,i=lP(t.toLowerCase());if(r.indexOf("*")!==-1||i.indexOf("*")!==-1)return"*";for(var o=0;o<r.length;o++){var a=r[o].toLowerCase();i.indexOf(a)===-1&&(i.push(a),s=s?s+", "+r[o]:r[o])}return s}function lP(t){for(var e=0,r=[],n=0,s=0,i=t.length;s<i;s++)switch(t.charCodeAt(s)){case 32:n===e&&(n=e=s+1);break;case 44:r.push(t.substring(n,e)),n=e=s+1;break;default:e=s+1;break}return r.push(t.substring(n,e)),r}function Dse(t,e){if(!t||!t.getHeader||!t.setHeader)throw new TypeError("res argument is required");var r=t.getHeader("Vary")||"",n=Array.isArray(r)?r.join(", "):String(r);(r=pP(n,e))&&t.setHeader("Vary",r)}});var qS=m((TMe,hP)=>{(function(){"use strict";var t=cP(),e=dP(),r={origin:"*",methods:"GET,HEAD,PUT,PATCH,POST,DELETE",preflightContinue:!1,optionsSuccessStatus:204};function n(f){return typeof f=="string"||f instanceof String}function s(f,y){if(Array.isArray(y)){for(var g=0;g<y.length;++g)if(s(f,y[g]))return!0;return!1}else return n(y)?f===y:y instanceof RegExp?y.test(f):!!y}function i(f,y){var g=y.headers.origin,_=[],S;return!f.origin||f.origin==="*"?_.push([{key:"Access-Control-Allow-Origin",value:"*"}]):n(f.origin)?(_.push([{key:"Access-Control-Allow-Origin",value:f.origin}]),_.push([{key:"Vary",value:"Origin"}])):(S=s(g,f.origin),_.push([{key:"Access-Control-Allow-Origin",value:S?g:!1}]),_.push([{key:"Vary",value:"Origin"}])),_}function o(f){var y=f.methods;return y.join&&(y=f.methods.join(",")),{key:"Access-Control-Allow-Methods",value:y}}function a(f){return f.credentials===!0?{key:"Access-Control-Allow-Credentials",value:"true"}:null}function u(f,y){var g=f.allowedHeaders||f.headers,_=[];return g?g.join&&(g=g.join(",")):(g=y.headers["access-control-request-headers"],_.push([{key:"Vary",value:"Access-Control-Request-Headers"}])),g&&g.length&&_.push([{key:"Access-Control-Allow-Headers",value:g}]),_}function c(f){var y=f.exposedHeaders;if(y)y.join&&(y=y.join(","));else return null;return y&&y.length?{key:"Access-Control-Expose-Headers",value:y}:null}function l(f){var y=(typeof f.maxAge=="number"||f.maxAge)&&f.maxAge.toString();return y&&y.length?{key:"Access-Control-Max-Age",value:y}:null}function p(f,y){for(var g=0,_=f.length;g<_;g++){var S=f[g];S&&(Array.isArray(S)?p(S,y):S.key==="Vary"&&S.value?e(y,S.value):S.value&&y.setHeader(S.key,S.value))}}function d(f,y,g,_){var S=[],O=y.method&&y.method.toUpperCase&&y.method.toUpperCase();O==="OPTIONS"?(S.push(i(f,y)),S.push(a(f)),S.push(o(f)),S.push(u(f,y)),S.push(l(f)),S.push(c(f)),p(S,g),f.preflightContinue?_():(g.statusCode=f.optionsSuccessStatus,g.setHeader("Content-Length","0"),g.end())):(S.push(i(f,y)),S.push(a(f)),S.push(c(f)),p(S,g),_())}function h(f){var y=null;return typeof f=="function"?y=f:y=function(g,_){_(null,f)},function(_,S,O){y(_,function(E,A){if(E)O(E);else{var x=t({},r,A),v=null;x.origin&&typeof x.origin=="function"?v=x.origin:x.origin&&(v=function(R,M){M(null,x.origin)}),v?v(_.headers.origin,function(R,M){R||!M?O(R):(x.origin=M,d(x,_,S,O))}):O()}})}}hP.exports=h})()});var LS=m(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});rl.Server=rl.BaseServer=void 0;var fP=Hb(),bm=dS(),Mse=require("events"),mP=fS(),Pse=fr(),Bse=tM(),Ise=FS(),yP=lS(),Nse=T1(),Se=(0,Pse.default)("engine"),el=Symbol("responseHeaders");function kse(t){try{let e=JSON.parse(t);if(typeof e.sid=="string")return e.sid}catch{}}var tl=class extends Mse.EventEmitter{constructor(e={}){super(),this.middlewares=[],this.clients={},this.clientsCount=0,this.opts=Object.assign({wsEngine:Ise.Server,pingTimeout:2e4,pingInterval:25e3,upgradeTimeout:1e4,maxHttpBufferSize:1e6,transports:["polling","websocket"],allowUpgrades:!0,httpCompression:{threshold:1024},cors:!1,allowEIO3:!1},e),e.cookie&&(this.opts.cookie=Object.assign({name:"io",path:"/",httpOnly:e.cookie.path!==!1,sameSite:"lax"},e.cookie)),this.opts.cors&&this.use(qS()(this.opts.cors)),e.perMessageDeflate&&(this.opts.perMessageDeflate=Object.assign({threshold:1024},e.perMessageDeflate)),this.init()}_computePath(e){let r=(e.path||"/engine.io").replace(/\/$/,"");return e.addTrailingSlash!==!1&&(r+="/"),r}upgrades(e){return this.opts.allowUpgrades?bm.default[e].upgradesTo||[]:[]}verify(e,r,n){let s=e._query.transport;if(!~this.opts.transports.indexOf(s)||s==="webtransport")return Se('unknown transport "%s"',s),n(ht.errors.UNKNOWN_TRANSPORT,{transport:s});if(Rse(e.headers.origin)){let a=e.headers.origin;return e.headers.origin=null,Se("origin header invalid"),n(ht.errors.BAD_REQUEST,{name:"INVALID_ORIGIN",origin:a})}let o=e._query.sid;if(o){if(!this.clients.hasOwnProperty(o))return Se('unknown sid "%s"',o),n(ht.errors.UNKNOWN_SID,{sid:o});let a=this.clients[o].transport.name;if(!r&&a!==s)return Se("bad request: unexpected transport without upgrade"),n(ht.errors.BAD_REQUEST,{name:"TRANSPORT_MISMATCH",transport:s,previousTransport:a})}else return e.method!=="GET"?n(ht.errors.BAD_HANDSHAKE_METHOD,{method:e.method}):s==="websocket"&&!r?(Se("invalid transport upgrade"),n(ht.errors.BAD_REQUEST,{name:"TRANSPORT_HANDSHAKE_ERROR"})):this.opts.allowRequest?this.opts.allowRequest(e,(a,u)=>{if(!u)return n(ht.errors.FORBIDDEN,{message:a});n()}):n();n()}use(e){this.middlewares.push(e)}_applyMiddlewares(e,r,n){if(this.middlewares.length===0)return Se("no middleware to apply, skipping"),n();let s=i=>{Se("applying middleware n\xB0%d",i+1),this.middlewares[i](e,r,o=>{if(o)return n(o);i+1<this.middlewares.length?s(i+1):n()})};s(0)}close(){Se("closing all open clients");for(let e in this.clients)this.clients.hasOwnProperty(e)&&this.clients[e].close(!0);return this.cleanup(),this}generateId(e){return fP.generateId()}async handshake(e,r,n){let s=r._query.EIO==="4"?4:3;if(s===3&&!this.opts.allowEIO3){Se("unsupported protocol version"),this.emit("connection_error",{req:r,code:ht.errors.UNSUPPORTED_PROTOCOL_VERSION,message:ht.errorMessages[ht.errors.UNSUPPORTED_PROTOCOL_VERSION],context:{protocol:s}}),n(ht.errors.UNSUPPORTED_PROTOCOL_VERSION);return}let i;try{i=await this.generateId(r)}catch(u){Se("error while generating an id"),this.emit("connection_error",{req:r,code:ht.errors.BAD_REQUEST,message:ht.errorMessages[ht.errors.BAD_REQUEST],context:{name:"ID_GENERATION_ERROR",error:u}}),n(ht.errors.BAD_REQUEST);return}Se('handshaking client "%s"',i);try{var o=this.createTransport(e,r);e==="polling"?(o.maxHttpBufferSize=this.opts.maxHttpBufferSize,o.httpCompression=this.opts.httpCompression):e==="websocket"&&(o.perMessageDeflate=this.opts.perMessageDeflate)}catch(u){Se('error handshaking to transport "%s"',e),this.emit("connection_error",{req:r,code:ht.errors.BAD_REQUEST,message:ht.errorMessages[ht.errors.BAD_REQUEST],context:{name:"TRANSPORT_HANDSHAKE_ERROR",error:u}}),n(ht.errors.BAD_REQUEST);return}let a=new mP.Socket(i,this,o,r,s);return o.on("headers",(u,c)=>{!c._query.sid&&(this.opts.cookie&&(u["Set-Cookie"]=[(0,Bse.serialize)(this.opts.cookie.name,i,this.opts.cookie)]),this.emit("initial_headers",u,c)),this.emit("headers",u,c)}),o.onRequest(r),this.clients[i]=a,this.clientsCount++,a.once("close",()=>{delete this.clients[i],this.clientsCount--}),this.emit("connection",a),o}async onWebTransportSession(e){let r=setTimeout(()=>{Se("the client failed to establish a bidirectional stream in the given period"),e.close()},this.opts.upgradeTimeout),s=await e.incomingBidirectionalStreams.getReader().read();if(s.done){Se("session is closed");return}let i=s.value,o=(0,Nse.createPacketDecoderStream)(this.opts.maxHttpBufferSize,"nodebuffer"),a=i.readable.pipeThrough(o).getReader(),{value:u,done:c}=await a.read();if(c){Se("stream is closed");return}if(clearTimeout(r),u.type!=="open")return Se("invalid WebTransport handshake"),e.close();if(u.data===void 0){let d=new yP.WebTransport(e,i,a),h=fP.generateId();Se('handshaking client "%s" (WebTransport)',h);let f=new mP.Socket(h,this,d,null,4);this.clients[h]=f,this.clientsCount++,f.once("close",()=>{delete this.clients[h],this.clientsCount--}),this.emit("connection",f);return}let l=kse(u.data);if(!l)return Se("invalid WebTransport handshake"),e.close();let p=this.clients[l];if(!p)Se("upgrade attempt for closed client"),e.close();else if(p.upgrading)Se("transport has already been trying to upgrade"),e.close();else if(p.upgraded)Se("transport had already been upgraded"),e.close();else{Se("upgrading existing transport");let d=new yP.WebTransport(e,i,a);p._maybeUpgrade(d)}}};rl.BaseServer=tl;tl.errors={UNKNOWN_TRANSPORT:0,UNKNOWN_SID:1,BAD_HANDSHAKE_METHOD:2,BAD_REQUEST:3,FORBIDDEN:4,UNSUPPORTED_PROTOCOL_VERSION:5};tl.errorMessages={0:"Transport unknown",1:"Session ID unknown",2:"Bad handshake method",3:"Bad request",4:"Forbidden",5:"Unsupported protocol version"};var jS=class{constructor(e,r){this.req=e,this.socket=r,e[el]={}}setHeader(e,r){this.req[el][e]=r}getHeader(e){return this.req[el][e]}removeHeader(e){delete this.req[el][e]}write(){}writeHead(){}end(){this.socket.destroy()}},ht=class t extends tl{init(){~this.opts.transports.indexOf("websocket")&&(this.ws&&this.ws.close(),this.ws=new this.opts.wsEngine({noServer:!0,clientTracking:!1,perMessageDeflate:this.opts.perMessageDeflate,maxPayload:this.opts.maxHttpBufferSize}),typeof this.ws.on=="function"&&this.ws.on("headers",(e,r)=>{let n=r[el]||{};delete r[el],!r._query.sid&&this.emit("initial_headers",n,r),this.emit("headers",n,r),Se("writing headers: %j",n),Object.keys(n).forEach(i=>{e.push(`${i}: ${n[i]}`)})}))}cleanup(){this.ws&&(Se("closing webSocketServer"),this.ws.close())}prepare(e){if(!e._query){let r=new URL(e.url,"https://socket.io");e._query=Object.fromEntries(r.searchParams.entries())}}createTransport(e,r){return new bm.default[e](r)}handleRequest(e,r){Se('handling "%s" http request "%s"',e.method,e.url),this.prepare(e),e.res=r;let n=(s,i)=>{if(s!==void 0){this.emit("connection_error",{req:e,code:s,message:t.errorMessages[s],context:i}),gP(r,s,i);return}if(e._query.sid)Se("setting new request for existing client"),this.clients[e._query.sid].transport.onRequest(e);else{let o=(a,u)=>gP(r,a,u);this.handshake(e._query.transport,e,o)}};this._applyMiddlewares(e,r,s=>{s?n(t.errors.BAD_REQUEST,{name:"MIDDLEWARE_FAILURE"}):this.verify(e,!1,n)})}handleUpgrade(e,r,n){this.prepare(e);let s=new jS(e,r),i=(o,a)=>{if(o!==void 0){this.emit("connection_error",{req:e,code:o,message:t.errorMessages[o],context:a}),_P(r,o,a);return}let u=Buffer.from(n);n=null,s.writeHead(),this.ws.handleUpgrade(e,r,u,c=>{this.onWebSocket(e,r,c)})};this._applyMiddlewares(e,s,o=>{o?i(t.errors.BAD_REQUEST,{name:"MIDDLEWARE_FAILURE"}):this.verify(e,!0,i)})}onWebSocket(e,r,n){if(n.on("error",i),bm.default[e._query.transport]!==void 0&&!bm.default[e._query.transport].prototype.handlesUpgrades){Se("transport doesnt handle upgraded requests"),n.close();return}let s=e._query.sid;if(e.websocket=n,s){let o=this.clients[s];if(!o)Se("upgrade attempt for closed client"),n.close();else if(o.upgrading)Se("transport has already been trying to upgrade"),n.close();else if(o.upgraded)Se("transport had already been upgraded"),n.close();else{Se("upgrading existing transport"),n.removeListener("error",i);let a=this.createTransport(e._query.transport,e);a.perMessageDeflate=this.opts.perMessageDeflate,o._maybeUpgrade(a)}}else{let o=(a,u)=>_P(r,a,u);this.handshake(e._query.transport,e,o)}function i(){Se("websocket error before upgrade")}}attach(e,r={}){let n=this._computePath(r),s=r.destroyUpgradeTimeout||1e3;function i(a){return n===a.url.slice(0,n.length)}let o=e.listeners("request").slice(0);e.removeAllListeners("request"),e.on("close",this.close.bind(this)),e.on("listening",this.init.bind(this)),e.on("request",(a,u)=>{if(i(a))Se('intercepting request for path "%s"',n),this.handleRequest(a,u);else{let c=0,l=o.length;for(;c<l;c++)o[c].call(e,a,u)}}),~this.opts.transports.indexOf("websocket")&&e.on("upgrade",(a,u,c)=>{i(a)?this.handleUpgrade(a,u,c):r.destroyUpgrade!==!1&&setTimeout(function(){if(u.writable&&u.bytesWritten<=0)return u.on("error",l=>{Se("error while destroying upgrade: %s",l.message)}),u.end()},s)})}};rl.Server=ht;function gP(t,e,r){let n=e===ht.errors.FORBIDDEN?403:400,s=r&&r.message?r.message:ht.errorMessages[e];t.writeHead(n,{"Content-Type":"application/json"}),t.end(JSON.stringify({code:e,message:s}))}function _P(t,e,r={}){if(t.on("error",()=>{Se("ignoring error from closed connection")}),t.writable){let n=r.message||ht.errorMessages[e],s=Buffer.byteLength(n);t.write(`HTTP/1.1 400 Bad Request\r
Connection: close\r
Content-type: text/html\r
Content-Length: `+s+`\r
\r
`+n)}t.destroy()}var F1=[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];function Rse(t){if(t+="",t.length<1)return!1;if(!F1[t.charCodeAt(0)])return Se('invalid header, index 0, char "%s"',t.charCodeAt(0)),!0;if(t.length<2)return!1;if(!F1[t.charCodeAt(1)])return Se('invalid header, index 1, char "%s"',t.charCodeAt(1)),!0;if(t.length<3)return!1;if(!F1[t.charCodeAt(2)])return Se('invalid header, index 2, char "%s"',t.charCodeAt(2)),!0;if(t.length<4)return!1;if(!F1[t.charCodeAt(3)])return Se('invalid header, index 3, char "%s"',t.charCodeAt(3)),!0;for(let e=4;e<t.length;++e)if(!F1[t.charCodeAt(e)])return Se('invalid header, index "%i", char "%s"',e,t.charCodeAt(e)),!0;return!1}});var bP=m(Sm=>{"use strict";Object.defineProperty(Sm,"__esModule",{value:!0});Sm.Polling=void 0;var Fse=hu(),EP=require("zlib"),$se=Uf(),qse=fr(),Es=(0,qse.default)("engine:polling"),jse={gzip:EP.createGzip,deflate:EP.createDeflate},US=class extends Fse.Transport{constructor(e){super(e),this.closeTimeout=30*1e3}get name(){return"polling"}onRequest(e){let r=e.res;e.res=null,e.getMethod()==="get"?this.onPollRequest(e,r):e.getMethod()==="post"?this.onDataRequest(e,r):(r.writeStatus("500 Internal Server Error"),r.end())}onPollRequest(e,r){if(this.req){Es("request overlap"),this.onError("overlap from client"),r.writeStatus("500 Internal Server Error"),r.end();return}Es("setting request"),this.req=e,this.res=r;let n=()=>{this.writable=!1,this.onError("poll connection closed prematurely")},s=()=>{this.req=this.res=null};e.cleanup=s,r.onAborted(n),this.writable=!0,this.emit("ready"),this.writable&&this.shouldClose&&(Es("triggering empty send to append close packet"),this.send([{type:"noop"}]))}onDataRequest(e,r){if(this.dataReq){this.onError("data request overlap from client"),r.writeStatus("500 Internal Server Error"),r.end();return}let n=Number(e.headers["content-length"]);if(!n){this.onError("content-length header required"),r.writeStatus("411 Length Required").end();return}if(n>this.maxHttpBufferSize){this.onError("payload too large"),r.writeStatus("413 Payload Too Large").end();return}if(e.headers["content-type"]==="application/octet-stream"&&this.protocol===4)return this.onError("invalid content");this.dataReq=e,this.dataRes=r;let i,o=0,a={"Content-Type":"text/html"};this.headers(e,a);for(let c in a)r.writeHeader(c,String(a[c]));let u=c=>{this.onData(c.toString()),this.onDataRequestCleanup(),r.cork(()=>{r.end("ok")})};r.onAborted(()=>{this.onDataRequestCleanup(),this.onError("data request connection closed prematurely")}),r.onData((c,l)=>{let p=o+c.byteLength;if(p>n){this.onError("content-length mismatch"),r.close();return}if(!i){if(l){u(Buffer.from(c));return}i=Buffer.allocUnsafe(n)}if(Buffer.from(c).copy(i,o),l){if(p!=n){this.onError("content-length mismatch"),r.writeStatus("400 Content-Length Mismatch").end(),this.onDataRequestCleanup();return}u(i);return}o=p})}onDataRequestCleanup(){this.dataReq=this.dataRes=null}onData(e){Es('received "%s"',e);let r=n=>{if(n.type==="close")return Es("got xhr close packet"),this.onClose(),!1;this.onPacket(n)};this.protocol===3?this.parser.decodePayload(e,r):this.parser.decodePayload(e).forEach(r)}onClose(){this.writable&&this.send([{type:"noop"}]),super.onClose()}send(e){this.writable=!1,this.shouldClose&&(Es("appending close packet to payload"),e.push({type:"close"}),this.shouldClose(),this.shouldClose=null);let r=n=>{let s=e.some(i=>i.options&&i.options.compress);this.write(n,{compress:s})};this.protocol===3?this.parser.encodePayload(e,this.supportsBinary,r):this.parser.encodePayload(e,r)}write(e,r){Es('writing "%s"',e),this.doWrite(e,r,()=>{this.req.cleanup(),this.emit("drain")})}doWrite(e,r,n){let s=typeof e=="string",o={"Content-Type":s?"text/plain; charset=UTF-8":"application/octet-stream"},a=l=>{this.headers(this.req,o),this.res.cork(()=>{Object.keys(o).forEach(p=>{this.res.writeHeader(p,String(o[p]))}),this.res.end(l)}),n()};if(!this.httpCompression||!r.compress){a(e);return}if((s?Buffer.byteLength(e):e.length)<this.httpCompression.threshold){a(e);return}let c=$se(this.req).encodings(["gzip","deflate"]);if(!c){a(e);return}this.compress(e,c,(l,p)=>{if(l){this.res.writeStatus("500 Internal Server Error"),this.res.end(),n(l);return}o["Content-Encoding"]=c,a(p)})}compress(e,r,n){Es("compressing");let s=[],i=0;jse[r](this.httpCompression).on("error",n).on("data",function(o){s.push(o),i+=o.length}).on("end",function(){n(null,Buffer.concat(s,i))}).end(e)}doClose(e){Es("closing");let r,n=()=>{clearTimeout(r),e(),this.onClose()};this.writable?(Es("transport writable - closing right away"),this.send([{type:"close"}]),n()):this.discarded?(Es("transport discarded - closing right away"),n()):(Es("transport not writable - buffering orderly close"),this.shouldClose=n,r=setTimeout(n,this.closeTimeout))}headers(e,r){r=r||{};let n=e.headers["user-agent"];return n&&(~n.indexOf(";MSIE")||~n.indexOf("Trident/"))&&(r["X-XSS-Protection"]="0"),r["cache-control"]="no-store",this.emit("headers",r,e),r}};Sm.Polling=US});var wP=m(wm=>{"use strict";Object.defineProperty(wm,"__esModule",{value:!0});wm.WebSocket=void 0;var Lse=hu(),Use=fr(),SP=(0,Use.default)("engine:ws"),VS=class extends Lse.Transport{constructor(e){super(e),this.writable=!1,this.perMessageDeflate=null}get name(){return"websocket"}get handlesUpgrades(){return!0}send(e){this.writable=!1;for(let r=0;r<e.length;r++){let n=e[r],s=r+1===e.length,i=o=>{let a=typeof o!="string",u=this.perMessageDeflate&&Buffer.byteLength(o)>this.perMessageDeflate.threshold;SP('writing "%s"',o),this.socket.send(o,a,u),s&&(this.emit("drain"),this.writable=!0,this.emit("ready"))};n.options&&typeof n.options.wsPreEncoded=="string"?i(n.options.wsPreEncoded):this.parser.encodePacket(n,this.supportsBinary,i)}}doClose(e){SP("closing"),e&&e(),this.socket.end()}};wm.WebSocket=VS});var AP=m(WS=>{"use strict";Object.defineProperty(WS,"__esModule",{value:!0});var Vse=bP(),Wse=wP();WS.default={polling:Vse.Polling,websocket:Wse.WebSocket}});var OP=m(Am=>{"use strict";Object.defineProperty(Am,"__esModule",{value:!0});Am.uServer=void 0;var zse=fr(),Eu=LS(),Kse=AP(),oa=(0,zse.default)("engine:uws"),zS=class extends Eu.BaseServer{init(){}cleanup(){}prepare(e,r){e.method=e.getMethod().toUpperCase(),e.url=e.getUrl();let n=new URLSearchParams(e.getQuery());e._query=Object.fromEntries(n.entries()),e.headers={},e.forEach((s,i)=>{e.headers[s]=i}),e.connection={remoteAddress:Buffer.from(r.getRemoteAddressAsText()).toString()},r.onAborted(()=>{oa("response has been aborted")})}createTransport(e,r){return new Kse.default[e](r)}attach(e,r={}){let n=this._computePath(r);e.any(n,this.handleRequest.bind(this)).ws(n,{compression:r.compression,idleTimeout:r.idleTimeout,maxBackpressure:r.maxBackpressure,maxPayloadLength:this.opts.maxHttpBufferSize,upgrade:this.handleUpgrade.bind(this),open:s=>{let i=s.getUserData().transport;i.socket=s,i.writable=!0,i.emit("ready")},message:(s,i,o)=>{s.getUserData().transport.onData(o?i:Buffer.from(i).toString())},close:(s,i,o)=>{s.getUserData().transport.onClose(i,o)}})}_applyMiddlewares(e,r,n){if(this.middlewares.length===0)return n();e.res=new KS(r),super._applyMiddlewares(e,e.res,s=>{e.res.writeHead(),n(s)})}handleRequest(e,r){oa('handling "%s" http request "%s"',r.getMethod(),r.getUrl()),this.prepare(r,e),r.res=e;let n=(s,i)=>{if(s!==void 0){this.emit("connection_error",{req:r,code:s,message:Eu.Server.errorMessages[s],context:i}),this.abortRequest(r.res,s,i);return}if(r._query.sid)oa("setting new request for existing client"),this.clients[r._query.sid].transport.onRequest(r);else{let o=(a,u)=>this.abortRequest(e,a,u);this.handshake(r._query.transport,r,o)}};this._applyMiddlewares(r,e,s=>{s?n(Eu.Server.errors.BAD_REQUEST,{name:"MIDDLEWARE_FAILURE"}):this.verify(r,!1,n)})}handleUpgrade(e,r,n){oa("on upgrade"),this.prepare(r,e),r.res=e;let s=async(i,o)=>{if(i!==void 0){this.emit("connection_error",{req:r,code:i,message:Eu.Server.errorMessages[i],context:o}),this.abortRequest(e,i,o);return}let a=r._query.sid,u;if(a){let c=this.clients[a];if(c){if(c.upgrading)return oa("transport has already been trying to upgrade"),e.close();if(c.upgraded)return oa("transport had already been upgraded"),e.close();oa("upgrading existing transport"),u=this.createTransport(r._query.transport,r),c._maybeUpgrade(u)}else return oa("upgrade attempt for closed client"),e.close()}else if(u=await this.handshake(r._query.transport,r,(c,l)=>this.abortRequest(e,c,l)),!u)return;r.res.writeStatus("101 Switching Protocols"),e.upgrade({transport:u},r.getHeader("sec-websocket-key"),r.getHeader("sec-websocket-protocol"),r.getHeader("sec-websocket-extensions"),n)};this._applyMiddlewares(r,e,i=>{i?s(Eu.Server.errors.BAD_REQUEST,{name:"MIDDLEWARE_FAILURE"}):this.verify(r,!0,s)})}abortRequest(e,r,n){let s=r===Eu.Server.errors.FORBIDDEN?"403 Forbidden":"400 Bad Request",i=n&&n.message?n.message:Eu.Server.errorMessages[r];e.writeStatus(s),e.writeHeader("Content-Type","application/json"),e.end(JSON.stringify({code:r,message:i}))}};Am.uServer=zS;var KS=class{constructor(e){this.res=e,this.statusWritten=!1,this.headers=[],this.isAborted=!1}set statusCode(e){e&&this.writeStatus(e===200?"200 OK":"204 No Content")}writeHead(e){this.statusCode=e}setHeader(e,r){Array.isArray(r)?r.forEach(n=>{this.writeHeader(e,n)}):this.writeHeader(e,r)}removeHeader(){}getHeader(){}writeStatus(e){if(!this.isAborted)return this.res.writeStatus(e),this.statusWritten=!0,this.writeBufferedHeaders(),this}writeHeader(e,r){this.isAborted||e!=="Content-Length"&&(this.statusWritten?this.res.writeHeader(e,r):this.headers.push([e,r]))}writeBufferedHeaders(){this.headers.forEach(([e,r])=>{this.res.writeHeader(e,r)})}end(e){this.isAborted||this.res.cork(()=>{this.statusWritten||this.writeBufferedHeaders(),this.res.end(e)})}onData(e){this.isAborted||this.res.onData(e)}onAborted(e){this.isAborted||this.res.onAborted(()=>{this.isAborted=!0,e()})}cork(e){this.isAborted||this.res.cork(e)}}});var TP=m(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.protocol=yr.Transport=yr.Socket=yr.uServer=yr.parser=yr.transports=yr.Server=void 0;yr.listen=Xse;yr.attach=xP;var Hse=require("http"),CP=LS();Object.defineProperty(yr,"Server",{enumerable:!0,get:function(){return CP.Server}});var Gse=dS();yr.transports=Gse.default;var vP=T1();yr.parser=vP;var Jse=OP();Object.defineProperty(yr,"uServer",{enumerable:!0,get:function(){return Jse.uServer}});var Yse=fS();Object.defineProperty(yr,"Socket",{enumerable:!0,get:function(){return Yse.Socket}});var Qse=hu();Object.defineProperty(yr,"Transport",{enumerable:!0,get:function(){return Qse.Transport}});yr.protocol=vP.protocol;function Xse(t,e,r){typeof e=="function"&&(r=e,e={});let n=(0,Hse.createServer)(function(i,o){o.writeHead(501),o.end("Not Implemented")}),s=xP(n,e);return s.httpServer=n,n.listen(t,r),s}function xP(t,e){let r=new CP.Server(e);return r.attach(t,e),r}});var MP=m(DP=>{DP.Emitter=ln;function ln(t){if(t)return Zse(t)}function Zse(t){for(var e in ln.prototype)t[e]=ln.prototype[e];return t}ln.prototype.on=ln.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};ln.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this};ln.prototype.off=ln.prototype.removeListener=ln.prototype.removeAllListeners=ln.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+t];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,s=0;s<r.length;s++)if(n=r[s],n===e||n.fn===e){r.splice(s,1);break}return r.length===0&&delete this._callbacks["$"+t],this};ln.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,s=r.length;n<s;++n)r[n].apply(this,e)}return this};ln.prototype.emitReserved=ln.prototype.emit;ln.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};ln.prototype.hasListeners=function(t){return!!this.listeners(t).length}});var HS=m(Cm=>{"use strict";Object.defineProperty(Cm,"__esModule",{value:!0});Cm.isBinary=BP;Cm.hasBinary=Om;var eie=typeof ArrayBuffer=="function",tie=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,PP=Object.prototype.toString,rie=typeof Blob=="function"||typeof Blob<"u"&&PP.call(Blob)==="[object BlobConstructor]",nie=typeof File=="function"||typeof File<"u"&&PP.call(File)==="[object FileConstructor]";function BP(t){return eie&&(t instanceof ArrayBuffer||tie(t))||rie&&t instanceof Blob||nie&&t instanceof File}function Om(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(Om(t[r]))return!0;return!1}if(BP(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Om(t.toJSON(),!0);for(let r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&Om(t[r]))return!0;return!1}});var IP=m(vm=>{"use strict";Object.defineProperty(vm,"__esModule",{value:!0});vm.deconstructPacket=iie;vm.reconstructPacket=oie;var sie=HS();function iie(t){let e=[],r=t.data,n=t;return n.data=GS(r,e),n.attachments=e.length,{packet:n,buffers:e}}function GS(t,e){if(!t)return t;if((0,sie.isBinary)(t)){let r={_placeholder:!0,num:e.length};return e.push(t),r}else if(Array.isArray(t)){let r=new Array(t.length);for(let n=0;n<t.length;n++)r[n]=GS(t[n],e);return r}else if(typeof t=="object"&&!(t instanceof Date)){let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=GS(t[n],e));return r}return t}function oie(t,e){return t.data=JS(t.data,e),delete t.attachments,t}function JS(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=JS(t[r],e);else if(typeof t=="object")for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=JS(t[r],e));return t}});var $1=m(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});Gs.Decoder=Gs.Encoder=Gs.PacketType=Gs.protocol=void 0;Gs.isPacketValid=hie;var aie=MP(),NP=IP(),kP=HS(),uie=fr(),YS=(0,uie.default)("socket.io-parser"),RP=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];Gs.protocol=5;var Qe;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Qe||(Gs.PacketType=Qe={}));var QS=class{constructor(e){this.replacer=e}encode(e){return YS("encoding packet %j",e),(e.type===Qe.EVENT||e.type===Qe.ACK)&&(0,kP.hasBinary)(e)?this.encodeAsBinary({type:e.type===Qe.EVENT?Qe.BINARY_EVENT:Qe.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let r=""+e.type;return(e.type===Qe.BINARY_EVENT||e.type===Qe.BINARY_ACK)&&(r+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(r+=e.nsp+","),e.id!=null&&(r+=e.id),e.data!=null&&(r+=JSON.stringify(e.data,this.replacer)),YS("encoded %j as %s",e,r),r}encodeAsBinary(e){let r=(0,NP.deconstructPacket)(e),n=this.encodeAsString(r.packet),s=r.buffers;return s.unshift(n),s}};Gs.Encoder=QS;var XS=class t extends aie.Emitter{constructor(e){super(),this.reviver=e}add(e){let r;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(e);let n=r.type===Qe.BINARY_EVENT;n||r.type===Qe.BINARY_ACK?(r.type=n?Qe.EVENT:Qe.ACK,this.reconstructor=new ZS(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if((0,kP.isBinary)(e)||e.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(e),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let r=0,n={type:Number(e.charAt(0))};if(Qe[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Qe.BINARY_EVENT||n.type===Qe.BINARY_ACK){let i=r+1;for(;e.charAt(++r)!=="-"&&r!=e.length;);let o=e.substring(i,r);if(o!=Number(o)||e.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(e.charAt(r+1)==="/"){let i=r+1;for(;++r&&!(e.charAt(r)===","||r===e.length););n.nsp=e.substring(i,r)}else n.nsp="/";let s=e.charAt(r+1);if(s!==""&&Number(s)==s){let i=r+1;for(;++r;){let o=e.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===e.length)break}n.id=Number(e.substring(i,r+1))}if(e.charAt(++r)){let i=this.tryParse(e.substr(r));if(t.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return YS("decoded %s as %j",e,n),n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,r){switch(e){case Qe.CONNECT:return xm(r);case Qe.DISCONNECT:return r===void 0;case Qe.CONNECT_ERROR:return typeof r=="string"||xm(r);case Qe.EVENT:case Qe.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&RP.indexOf(r[0])===-1);case Qe.ACK:case Qe.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}};Gs.Decoder=XS;var ZS=class{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){let r=(0,NP.reconstructPacket)(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}};function cie(t){return typeof t=="string"}var lie=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};function pie(t){return t===void 0||lie(t)}function xm(t){return Object.prototype.toString.call(t)==="[object Object]"}function die(t,e){switch(t){case Qe.CONNECT:return e===void 0||xm(e);case Qe.DISCONNECT:return e===void 0;case Qe.EVENT:return Array.isArray(e)&&(typeof e[0]=="number"||typeof e[0]=="string"&&RP.indexOf(e[0])===-1);case Qe.ACK:return Array.isArray(e);case Qe.CONNECT_ERROR:return typeof e=="string"||xm(e);default:return!1}}function hie(t){return cie(t.nsp)&&pie(t.id)&&die(t.type,t.data)}});var FP=m(nl=>{"use strict";var fie=nl&&nl.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nl,"__esModule",{value:!0});nl.Client=void 0;var Tm=$1(),mie=fie(fr()),Js=(0,mie.default)("socket.io:client"),ew=class{constructor(e,r){this.sockets=new Map,this.nsps=new Map,this.server=e,this.conn=r,this.encoder=e.encoder,this.decoder=new e._parser.Decoder,this.id=r.id,this.setup()}get request(){return this.conn.request}setup(){this.onclose=this.onclose.bind(this),this.ondata=this.ondata.bind(this),this.onerror=this.onerror.bind(this),this.ondecoded=this.ondecoded.bind(this),this.decoder.on("decoded",this.ondecoded),this.conn.on("data",this.ondata),this.conn.on("error",this.onerror),this.conn.on("close",this.onclose),this.connectTimeout=setTimeout(()=>{this.nsps.size===0?(Js("no namespace joined yet, close the client"),this.close()):Js("the client has already joined a namespace, nothing to do")},this.server._connectTimeout)}connect(e,r={}){if(this.server._nsps.has(e))return Js("connecting to namespace %s",e),this.doConnect(e,r);this.server._checkNamespace(e,r,n=>{n?this.doConnect(e,r):(Js("creation of namespace %s was denied",e),this._packet({type:Tm.PacketType.CONNECT_ERROR,nsp:e,data:{message:"Invalid namespace"}}))})}doConnect(e,r){let n=this.server.of(e);n._add(this,r,s=>{this.sockets.set(s.id,s),this.nsps.set(n.name,s),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=void 0)})}_disconnect(){for(let e of this.sockets.values())e.disconnect();this.sockets.clear(),this.close()}_remove(e){if(this.sockets.has(e.id)){let r=this.sockets.get(e.id).nsp.name;this.sockets.delete(e.id),this.nsps.delete(r)}else Js("ignoring remove for %s",e.id)}close(){this.conn.readyState==="open"&&(Js("forcing transport close"),this.conn.close(),this.onclose("forced server close"))}_packet(e,r={}){if(this.conn.readyState!=="open"){Js("ignoring packet write %j",e);return}let n=r.preEncoded?e:this.encoder.encode(e);this.writeToEngine(n,r)}writeToEngine(e,r){if(r.volatile&&!this.conn.transport.writable){Js("volatile packet is discarded since the transport is not currently writable");return}let n=Array.isArray(e)?e:[e];for(let s of n)this.conn.write(s,r)}ondata(e){try{this.decoder.add(e)}catch(r){Js("invalid packet format"),this.onerror(r)}}ondecoded(e){let{namespace:r,authPayload:n}=this._parseNamespace(e),s=this.nsps.get(r);!s&&e.type===Tm.PacketType.CONNECT?this.connect(r,n):s&&e.type!==Tm.PacketType.CONNECT&&e.type!==Tm.PacketType.CONNECT_ERROR?process.nextTick(function(){s._onpacket(e)}):(Js("invalid state (packet type: %s)",e.type),this.close())}_parseNamespace(e){if(this.conn.protocol!==3)return{namespace:e.nsp,authPayload:e.data};let r=new URL(e.nsp,"https://socket.io");return{namespace:r.pathname,authPayload:Object.fromEntries(r.searchParams.entries())}}onerror(e){for(let r of this.sockets.values())r._onerror(e);this.conn.close()}onclose(e,r){Js("client close with reason %s",e),this.destroy();for(let n of this.sockets.values())n._onclose(e,r);this.sockets.clear(),this.decoder.destroy()}destroy(){this.conn.removeListener("data",this.ondata),this.conn.removeListener("error",this.onerror),this.conn.removeListener("close",this.onclose),this.decoder.removeListener("decoded",this.ondecoded),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=void 0)}};nl.Client=ew});var Mm=m(Dm=>{"use strict";Object.defineProperty(Dm,"__esModule",{value:!0});Dm.StrictEventEmitter=void 0;var yie=require("events"),tw=class extends yie.EventEmitter{on(e,r){return super.on(e,r)}once(e,r){return super.once(e,r)}emit(e,...r){return super.emit(e,...r)}emitReserved(e,...r){return super.emit(e,...r)}emitUntyped(e,...r){return super.emit(e,...r)}listeners(e){return super.listeners(e)}};Dm.StrictEventEmitter=tw});var rw=m(Pm=>{"use strict";Object.defineProperty(Pm,"__esModule",{value:!0});Pm.RESERVED_EVENTS=void 0;Pm.RESERVED_EVENTS=new Set(["connect","connect_error","disconnect","disconnecting","newListener","removeListener"])});var nw=m(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});sl.RemoteSocket=sl.BroadcastOperator=void 0;var gie=rw(),_ie=$1(),Bm=class t{constructor(e,r=new Set,n=new Set,s={}){this.adapter=e,this.rooms=r,this.exceptRooms=n,this.flags=s}to(e){let r=new Set(this.rooms);return Array.isArray(e)?e.forEach(n=>r.add(n)):r.add(e),new t(this.adapter,r,this.exceptRooms,this.flags)}in(e){return this.to(e)}except(e){let r=new Set(this.exceptRooms);return Array.isArray(e)?e.forEach(n=>r.add(n)):r.add(e),new t(this.adapter,this.rooms,r,this.flags)}compress(e){let r=Object.assign({},this.flags,{compress:e});return new t(this.adapter,this.rooms,this.exceptRooms,r)}get volatile(){let e=Object.assign({},this.flags,{volatile:!0});return new t(this.adapter,this.rooms,this.exceptRooms,e)}get local(){let e=Object.assign({},this.flags,{local:!0});return new t(this.adapter,this.rooms,this.exceptRooms,e)}timeout(e){let r=Object.assign({},this.flags,{timeout:e});return new t(this.adapter,this.rooms,this.exceptRooms,r)}emit(e,...r){if(gie.RESERVED_EVENTS.has(e))throw new Error(`"${String(e)}" is a reserved event name`);let n=[e,...r],s={type:_ie.PacketType.EVENT,data:n};if(!(typeof n[n.length-1]=="function"))return this.adapter.broadcast(s,{rooms:this.rooms,except:this.exceptRooms,flags:this.flags}),!0;let o=n.pop(),a=!1,u=[],c=setTimeout(()=>{a=!0,o.apply(this,[new Error("operation has timed out"),this.flags.expectSingleResponse?null:u])},this.flags.timeout),l=-1,p=0,d=0,h=()=>{!a&&l===p&&u.length===d&&(clearTimeout(c),o.apply(this,[null,this.flags.expectSingleResponse?u[0]:u]))};return this.adapter.broadcastWithAck(s,{rooms:this.rooms,except:this.exceptRooms,flags:this.flags},f=>{d+=f,p++,h()},f=>{u.push(f),h()}),this.adapter.serverCount().then(f=>{l=f,h()}),!0}emitWithAck(e,...r){return new Promise((n,s)=>{r.push((i,o)=>i?(i.responses=o,s(i)):n(o)),this.emit(e,...r)})}allSockets(){if(!this.adapter)throw new Error("No adapter for this namespace, are you trying to get the list of clients of a dynamic namespace?");return this.adapter.sockets(this.rooms)}fetchSockets(){return this.adapter.fetchSockets({rooms:this.rooms,except:this.exceptRooms,flags:this.flags}).then(e=>e.map(r=>r.server?r:new Im(this.adapter,r)))}socketsJoin(e){this.adapter.addSockets({rooms:this.rooms,except:this.exceptRooms,flags:this.flags},Array.isArray(e)?e:[e])}socketsLeave(e){this.adapter.delSockets({rooms:this.rooms,except:this.exceptRooms,flags:this.flags},Array.isArray(e)?e:[e])}disconnectSockets(e=!1){this.adapter.disconnectSockets({rooms:this.rooms,except:this.exceptRooms,flags:this.flags},e)}};sl.BroadcastOperator=Bm;var Im=class{constructor(e,r){this.id=r.id,this.handshake=r.handshake,this.rooms=new Set(r.rooms),this.data=r.data,this.operator=new Bm(e,new Set([this.id]),new Set,{expectSingleResponse:!0})}timeout(e){return this.operator.timeout(e)}emit(e,...r){return this.operator.emit(e,...r)}join(e){return this.operator.socketsJoin(e)}leave(e){return this.operator.socketsLeave(e)}disconnect(e=!1){return this.operator.disconnectSockets(e),this}};sl.RemoteSocket=Im});var iw=m(il=>{"use strict";var jP=il&&il.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(il,"__esModule",{value:!0});il.Socket=void 0;var bs=$1(),Eie=jP(fr()),bie=Mm(),$P=jP(Hb()),Sie=nw(),wie=rw(),Kr=(0,Eie.default)("socket.io:socket"),Aie=new Set(["transport error","transport close","forced close","ping timeout","server shutting down","forced server close"]);function qP(){}var sw=class extends bie.StrictEventEmitter{constructor(e,r,n,s){super(),this.nsp=e,this.client=r,this.recovered=!1,this.data={},this.connected=!1,this.acks=new Map,this.fns=[],this.flags={},this.server=e.server,this.adapter=e.adapter,s?(this.id=s.sid,this.pid=s.pid,s.rooms.forEach(i=>this.join(i)),this.data=s.data,s.missedPackets.forEach(i=>{this.packet({type:bs.PacketType.EVENT,data:i})}),this.recovered=!0):(r.conn.protocol===3?this.id=e.name!=="/"?e.name+"#"+r.id:r.id:this.id=$P.default.generateId(),this.server._opts.connectionStateRecovery&&(this.pid=$P.default.generateId())),this.handshake=this.buildHandshake(n),this.on("error",qP)}buildHandshake(e){var r,n,s,i;return{headers:((r=this.request)===null||r===void 0?void 0:r.headers)||{},time:new Date+"",address:this.conn.remoteAddress,xdomain:!!(!((n=this.request)===null||n===void 0)&&n.headers.origin),secure:!this.request||!!this.request.connection.encrypted,issued:+new Date,url:(s=this.request)===null||s===void 0?void 0:s.url,query:((i=this.request)===null||i===void 0?void 0:i._query)||{},auth:e}}emit(e,...r){if(wie.RESERVED_EVENTS.has(e))throw new Error(`"${String(e)}" is a reserved event name`);let n=[e,...r],s={type:bs.PacketType.EVENT,data:n};if(typeof n[n.length-1]=="function"){let o=this.nsp._ids++;Kr("emitting packet with ack id %d",o),this.registerAckCallback(o,n.pop()),s.id=o}let i=Object.assign({},this.flags);return this.flags={},this.nsp.server.opts.connectionStateRecovery?this.adapter.broadcast(s,{rooms:new Set([this.id]),except:new Set,flags:i}):(this.notifyOutgoingListeners(s),this.packet(s,i)),!0}emitWithAck(e,...r){let n=this.flags.timeout!==void 0;return new Promise((s,i)=>{r.push((o,a)=>n?o?i(o):s(a):s(o)),this.emit(e,...r)})}registerAckCallback(e,r){let n=this.flags.timeout;if(n===void 0){this.acks.set(e,r);return}let s=setTimeout(()=>{Kr("event with ack id %d has timed out after %d ms",e,n),this.acks.delete(e),r.call(this,new Error("operation has timed out"))},n);this.acks.set(e,(...i)=>{clearTimeout(s),r.apply(this,[null,...i])})}to(e){return this.newBroadcastOperator().to(e)}in(e){return this.newBroadcastOperator().in(e)}except(e){return this.newBroadcastOperator().except(e)}send(...e){return this.emit("message",...e),this}write(...e){return this.emit("message",...e),this}packet(e,r={}){e.nsp=this.nsp.name,r.compress=r.compress!==!1,this.client._packet(e,r)}join(e){return Kr("join room %s",e),this.adapter.addAll(this.id,new Set(Array.isArray(e)?e:[e]))}leave(e){return Kr("leave room %s",e),this.adapter.del(this.id,e)}leaveAll(){this.adapter.delAll(this.id)}_onconnect(){Kr("socket connected - writing packet"),this.connected=!0,this.join(this.id),this.conn.protocol===3?this.packet({type:bs.PacketType.CONNECT}):this.packet({type:bs.PacketType.CONNECT,data:{sid:this.id,pid:this.pid}})}_onpacket(e){switch(Kr("got packet %j",e),e.type){case bs.PacketType.EVENT:this.onevent(e);break;case bs.PacketType.BINARY_EVENT:this.onevent(e);break;case bs.PacketType.ACK:this.onack(e);break;case bs.PacketType.BINARY_ACK:this.onack(e);break;case bs.PacketType.DISCONNECT:this.ondisconnect();break}}onevent(e){let r=e.data||[];if(Kr("emitting event %j",r),e.id!=null&&(Kr("attaching ack callback to event"),r.push(this.ack(e.id))),this._anyListeners&&this._anyListeners.length){let n=this._anyListeners.slice();for(let s of n)s.apply(this,r)}this.dispatch(r)}ack(e){let r=this,n=!1;return function(){if(n)return;let s=Array.prototype.slice.call(arguments);Kr("sending ack %j",s),r.packet({id:e,type:bs.PacketType.ACK,data:s}),n=!0}}onack(e){let r=this.acks.get(e.id);typeof r=="function"?(Kr("calling ack %s with %j",e.id,e.data),r.apply(this,e.data),this.acks.delete(e.id)):Kr("bad ack %s",e.id)}ondisconnect(){Kr("got disconnect packet"),this._onclose("client namespace disconnect")}_onerror(e){this.emitReserved("error",e)}_onclose(e,r){if(!this.connected)return this;Kr("closing socket - reason %s",e),this.emitReserved("disconnecting",e,r),this.server._opts.connectionStateRecovery&&Aie.has(e)&&(Kr("connection state recovery is enabled for sid %s",this.id),this.adapter.persistSession({sid:this.id,pid:this.pid,rooms:[...this.rooms],data:this.data})),this._cleanup(),this.client._remove(this),this.connected=!1,this.emitReserved("disconnect",e,r)}_cleanup(){this.leaveAll(),this.nsp._remove(this),this.join=qP}_error(e){this.packet({type:bs.PacketType.CONNECT_ERROR,data:e})}disconnect(e=!1){return this.connected?(e?this.client._disconnect():(this.packet({type:bs.PacketType.DISCONNECT}),this._onclose("server namespace disconnect")),this):this}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}get broadcast(){return this.newBroadcastOperator()}get local(){return this.newBroadcastOperator().local}timeout(e){return this.flags.timeout=e,this}dispatch(e){Kr("dispatching an event %j",e),this.run(e,r=>{process.nextTick(()=>{if(r)return this._onerror(r);this.connected?super.emitUntyped.apply(this,e):Kr("ignore packet received after disconnection")})})}use(e){return this.fns.push(e),this}run(e,r){if(!this.fns.length)return r();let n=this.fns.slice(0);function s(i){n[i](e,o=>{if(o)return r(o);if(!n[i+1])return r();s(i+1)})}s(0)}get disconnected(){return!this.connected}get request(){return this.client.request}get conn(){return this.client.conn}get rooms(){return this.adapter.socketRooms(this.id)||new Set}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let r=this._anyListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(e===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let r=this._anyOutgoingListeners.slice();for(let n of r)n.apply(this,e.data)}}newBroadcastOperator(){let e=Object.assign({},this.flags);return this.flags={},new Sie.BroadcastOperator(this.adapter,new Set,new Set([this.id]),e)}};il.Socket=sw});var aw=m(po=>{"use strict";var Oie=po&&po.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(po,"__esModule",{value:!0});po.Namespace=po.RESERVED_EVENTS=void 0;var LP=iw(),Cie=Mm(),vie=Oie(fr()),Qn=nw(),ol=(0,vie.default)("socket.io:namespace");po.RESERVED_EVENTS=new Set(["connect","connection","new_namespace"]);var ow=class extends Cie.StrictEventEmitter{constructor(e,r){super(),this.sockets=new Map,this._preConnectSockets=new Map,this._fns=[],this._ids=0,this.server=e,this.name=r,this._initAdapter()}_initAdapter(){this.adapter=new(this.server.adapter())(this),Promise.resolve(this.adapter.init()).catch(e=>{ol("error while initializing adapter: %s",e)})}use(e){return this._fns.push(e),this}run(e,r){if(!this._fns.length)return r();let n=this._fns.slice(0);function s(i){n[i](e,o=>{if(o)return r(o);if(!n[i+1])return r();s(i+1)})}s(0)}to(e){return new Qn.BroadcastOperator(this.adapter).to(e)}in(e){return new Qn.BroadcastOperator(this.adapter).in(e)}except(e){return new Qn.BroadcastOperator(this.adapter).except(e)}async _add(e,r,n){var s;ol("adding socket to nsp %s",this.name);let i=await this._createSocket(e,r);if(this._preConnectSockets.set(i.id,i),!((s=this.server.opts.connectionStateRecovery)===null||s===void 0)&&s.skipMiddlewares&&i.recovered&&e.conn.readyState==="open")return this._doConnect(i,n);this.run(i,o=>{process.nextTick(()=>{if(e.conn.readyState!=="open"){ol("next called after client was closed - ignoring socket"),i._cleanup();return}if(o)return ol("middleware error, sending CONNECT_ERROR packet to the client"),i._cleanup(),e.conn.protocol===3?i._error(o.data||o.message):i._error({message:o.message,data:o.data});this._doConnect(i,n)})})}async _createSocket(e,r){let n=r.pid,s=r.offset;if(this.server.opts.connectionStateRecovery&&typeof n=="string"&&typeof s=="string"){let i;try{i=await this.adapter.restoreSession(n,s)}catch(o){ol("error while restoring session: %s",o)}if(i)return ol("connection state recovered for sid %s",i.sid),new LP.Socket(this,e,r,i)}return new LP.Socket(this,e,r)}_doConnect(e,r){this._preConnectSockets.delete(e.id),this.sockets.set(e.id,e),e._onconnect(),r&&r(e),this.emitReserved("connect",e),this.emitReserved("connection",e)}_remove(e){this.sockets.delete(e.id)||this._preConnectSockets.delete(e.id)}emit(e,...r){return new Qn.BroadcastOperator(this.adapter).emit(e,...r)}send(...e){return this.emit("message",...e),this}write(...e){return this.emit("message",...e),this}serverSideEmit(e,...r){if(po.RESERVED_EVENTS.has(e))throw new Error(`"${String(e)}" is a reserved event name`);return r.unshift(e),this.adapter.serverSideEmit(r),!0}serverSideEmitWithAck(e,...r){return new Promise((n,s)=>{r.push((i,o)=>i?(i.responses=o,s(i)):n(o)),this.serverSideEmit(e,...r)})}_onServerSideEmit(e){super.emitUntyped.apply(this,e)}allSockets(){return new Qn.BroadcastOperator(this.adapter).allSockets()}compress(e){return new Qn.BroadcastOperator(this.adapter).compress(e)}get volatile(){return new Qn.BroadcastOperator(this.adapter).volatile}get local(){return new Qn.BroadcastOperator(this.adapter).local}timeout(e){return new Qn.BroadcastOperator(this.adapter).timeout(e)}fetchSockets(){return new Qn.BroadcastOperator(this.adapter).fetchSockets()}socketsJoin(e){return new Qn.BroadcastOperator(this.adapter).socketsJoin(e)}socketsLeave(e){return new Qn.BroadcastOperator(this.adapter).socketsLeave(e)}disconnectSockets(e=!1){return new Qn.BroadcastOperator(this.adapter).disconnectSockets(e)}};po.Namespace=ow});var KP=m(q1=>{"use strict";Object.defineProperty(q1,"__esModule",{value:!0});q1.encode=uw;q1.decode=xie;q1.yeast=Tie;var WP="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Nm=64,zP={},UP=0,aa=0,VP;function uw(t){let e="";do e=WP[t%Nm]+e,t=Math.floor(t/Nm);while(t>0);return e}function xie(t){let e=0;for(aa=0;aa<t.length;aa++)e=e*Nm+zP[t.charAt(aa)];return e}function Tie(){let t=uw(+new Date);return t!==VP?(UP=0,VP=t):t+"."+uw(UP++)}for(;aa<Nm;aa++)zP[WP[aa]]=aa});var pw=m(al=>{"use strict";var cw;Object.defineProperty(al,"__esModule",{value:!0});al.SessionAwareAdapter=al.Adapter=void 0;var Die=require("events"),Mie=KP(),km=FS(),Pie=typeof((cw=km?.Sender)===null||cw===void 0?void 0:cw.frame)=="function",Rm=class extends Die.EventEmitter{constructor(e){super(),this.nsp=e,this.rooms=new Map,this.sids=new Map,this.encoder=e.server.encoder}init(){}close(){}serverCount(){return Promise.resolve(1)}addAll(e,r){this.sids.has(e)||this.sids.set(e,new Set);for(let n of r)this.sids.get(e).add(n),this.rooms.has(n)||(this.rooms.set(n,new Set),this.emit("create-room",n)),this.rooms.get(n).has(e)||(this.rooms.get(n).add(e),this.emit("join-room",n,e))}del(e,r){this.sids.has(e)&&this.sids.get(e).delete(r),this._del(r,e)}_del(e,r){let n=this.rooms.get(e);n!=null&&(n.delete(r)&&this.emit("leave-room",e,r),n.size===0&&this.rooms.delete(e)&&this.emit("delete-room",e))}delAll(e){if(this.sids.has(e)){for(let r of this.sids.get(e))this._del(r,e);this.sids.delete(e)}}broadcast(e,r){let n=r.flags||{},s={preEncoded:!0,volatile:n.volatile,compress:n.compress};e.nsp=this.nsp.name;let i=this._encode(e,s);this.apply(r,o=>{typeof o.notifyOutgoingListeners=="function"&&o.notifyOutgoingListeners(e),o.client.writeToEngine(i,s)})}broadcastWithAck(e,r,n,s){let i=r.flags||{},o={preEncoded:!0,volatile:i.volatile,compress:i.compress};e.nsp=this.nsp.name,e.id=this.nsp._ids++;let a=this._encode(e,o),u=0;this.apply(r,c=>{u++,c.acks.set(e.id,s),typeof c.notifyOutgoingListeners=="function"&&c.notifyOutgoingListeners(e),c.client.writeToEngine(a,o)}),n(u)}_encode(e,r){let n=this.encoder.encode(e);if(Pie&&n.length===1&&typeof n[0]=="string"){let s=Buffer.from("4"+n[0]);r.wsPreEncodedFrame=km.Sender.frame(s,{readOnly:!1,mask:!1,rsv1:!1,opcode:1,fin:!0})}return n}sockets(e){let r=new Set;return this.apply({rooms:e},n=>{r.add(n.id)}),Promise.resolve(r)}socketRooms(e){return this.sids.get(e)}fetchSockets(e){let r=[];return this.apply(e,n=>{r.push(n)}),Promise.resolve(r)}addSockets(e,r){this.apply(e,n=>{n.join(r)})}delSockets(e,r){this.apply(e,n=>{r.forEach(s=>n.leave(s))})}disconnectSockets(e,r){this.apply(e,n=>{n.disconnect(r)})}apply(e,r){let n=e.rooms,s=this.computeExceptSids(e.except);if(n.size){let i=new Set;for(let o of n)if(this.rooms.has(o))for(let a of this.rooms.get(o)){if(i.has(a)||s.has(a))continue;let u=this.nsp.sockets.get(a);u&&(r(u),i.add(a))}}else for(let[i]of this.sids){if(s.has(i))continue;let o=this.nsp.sockets.get(i);o&&r(o)}}computeExceptSids(e){let r=new Set;if(e&&e.size>0)for(let n of e)this.rooms.has(n)&&this.rooms.get(n).forEach(s=>r.add(s));return r}serverSideEmit(e){console.warn("this adapter does not support the serverSideEmit() functionality")}persistSession(e){}restoreSession(e,r){return null}};al.Adapter=Rm;var lw=class extends Rm{constructor(e){super(e),this.nsp=e,this.sessions=new Map,this.packets=[],this.maxDisconnectionDuration=e.server.opts.connectionStateRecovery.maxDisconnectionDuration,setInterval(()=>{let n=Date.now()-this.maxDisconnectionDuration;this.sessions.forEach((s,i)=>{s.disconnectedAt<n&&this.sessions.delete(i)});for(let s=this.packets.length-1;s>=0;s--)if(this.packets[s].emittedAt<n){this.packets.splice(0,s+1);break}},60*1e3).unref()}persistSession(e){e.disconnectedAt=Date.now(),this.sessions.set(e.pid,e)}restoreSession(e,r){let n=this.sessions.get(e);if(!n)return null;if(n.disconnectedAt+this.maxDisconnectionDuration<Date.now())return this.sessions.delete(e),null;let i=this.packets.findIndex(a=>a.id===r);if(i===-1)return null;let o=[];for(let a=i+1;a<this.packets.length;a++){let u=this.packets[a];Bie(n.rooms,u.opts)&&o.push(u.data)}return Promise.resolve(Object.assign(Object.assign({},n),{missedPackets:o}))}broadcast(e,r){var n;let s=e.type===2,i=e.id===void 0,o=((n=r.flags)===null||n===void 0?void 0:n.volatile)===void 0;if(s&&i&&o){let a=(0,Mie.yeast)();e.data.push(a),this.packets.push({id:a,opts:r,data:e.data,emittedAt:Date.now()})}super.broadcast(e,r)}};al.SessionAwareAdapter=lw;function Bie(t,e){let r=e.rooms.size===0||t.some(s=>e.rooms.has(s)),n=t.every(s=>!e.except.has(s));return r&&n}});var HP=m(Ii=>{"use strict";var Iie=Ii&&Ii.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.ClusterAdapterWithHeartbeat=Ii.ClusterAdapter=Ii.MessageType=void 0;var Nie=pw(),kie=fr(),Rie=require("crypto"),St=(0,kie.debug)("socket.io-adapter"),Fie="emitter",Fm=5e3;function cl(){return(0,Rie.randomBytes)(8).toString("hex")}var de;(function(t){t[t.INITIAL_HEARTBEAT=1]="INITIAL_HEARTBEAT",t[t.HEARTBEAT=2]="HEARTBEAT",t[t.BROADCAST=3]="BROADCAST",t[t.SOCKETS_JOIN=4]="SOCKETS_JOIN",t[t.SOCKETS_LEAVE=5]="SOCKETS_LEAVE",t[t.DISCONNECT_SOCKETS=6]="DISCONNECT_SOCKETS",t[t.FETCH_SOCKETS=7]="FETCH_SOCKETS",t[t.FETCH_SOCKETS_RESPONSE=8]="FETCH_SOCKETS_RESPONSE",t[t.SERVER_SIDE_EMIT=9]="SERVER_SIDE_EMIT",t[t.SERVER_SIDE_EMIT_RESPONSE=10]="SERVER_SIDE_EMIT_RESPONSE",t[t.BROADCAST_CLIENT_COUNT=11]="BROADCAST_CLIENT_COUNT",t[t.BROADCAST_ACK=12]="BROADCAST_ACK",t[t.ADAPTER_CLOSE=13]="ADAPTER_CLOSE"})(de||(Ii.MessageType=de={}));function bu(t){return{rooms:[...t.rooms],except:[...t.except],flags:t.flags}}function ul(t){return{rooms:new Set(t.rooms),except:new Set(t.except),flags:t.flags}}var $m=class extends Nie.Adapter{constructor(e){super(e),this.requests=new Map,this.ackRequests=new Map,this.uid=cl()}onMessage(e,r){if(e.uid===this.uid)return St("[%s] ignore message from self",this.uid);if(e.nsp!==this.nsp.name)return St("[%s] ignore message from another namespace (%s)",this.uid,e.nsp);switch(St("[%s] new event of type %d from %s",this.uid,e.type,e.uid),e.type){case de.BROADCAST:{if(e.data.requestId!==void 0)super.broadcastWithAck(e.data.packet,ul(e.data.opts),s=>{St("[%s] waiting for %d client acknowledgements",this.uid,s),this.publishResponse(e.uid,{type:de.BROADCAST_CLIENT_COUNT,data:{requestId:e.data.requestId,clientCount:s}})},s=>{St("[%s] received acknowledgement with value %j",this.uid,s),this.publishResponse(e.uid,{type:de.BROADCAST_ACK,data:{requestId:e.data.requestId,packet:s}})});else{let s=e.data.packet,i=ul(e.data.opts);this.addOffsetIfNecessary(s,i,r),super.broadcast(s,i)}break}case de.SOCKETS_JOIN:super.addSockets(ul(e.data.opts),e.data.rooms);break;case de.SOCKETS_LEAVE:super.delSockets(ul(e.data.opts),e.data.rooms);break;case de.DISCONNECT_SOCKETS:super.disconnectSockets(ul(e.data.opts),e.data.close);break;case de.FETCH_SOCKETS:{St("[%s] calling fetchSockets with opts %j",this.uid,e.data.opts),super.fetchSockets(ul(e.data.opts)).then(n=>{this.publishResponse(e.uid,{type:de.FETCH_SOCKETS_RESPONSE,data:{requestId:e.data.requestId,sockets:n.map(s=>{let i=s.handshake,{sessionStore:o}=i,a=Iie(i,["sessionStore"]);return{id:s.id,handshake:a,rooms:[...s.rooms],data:s.data}})}})});break}case de.SERVER_SIDE_EMIT:{let n=e.data.packet;if(!(e.data.requestId!==void 0)){this.nsp._onServerSideEmit(n);return}let i=!1,o=a=>{i||(i=!0,St("[%s] calling acknowledgement with %j",this.uid,a),this.publishResponse(e.uid,{type:de.SERVER_SIDE_EMIT_RESPONSE,data:{requestId:e.data.requestId,packet:a}}))};this.nsp._onServerSideEmit([...n,o]);break}case de.BROADCAST_CLIENT_COUNT:case de.BROADCAST_ACK:case de.FETCH_SOCKETS_RESPONSE:case de.SERVER_SIDE_EMIT_RESPONSE:this.onResponse(e);break;default:St("[%s] unknown message type: %s",this.uid,e.type)}}onResponse(e){var r,n;let s=e.data.requestId;switch(St("[%s] received response %s to request %s",this.uid,e.type,s),e.type){case de.BROADCAST_CLIENT_COUNT:{(r=this.ackRequests.get(s))===null||r===void 0||r.clientCountCallback(e.data.clientCount);break}case de.BROADCAST_ACK:{(n=this.ackRequests.get(s))===null||n===void 0||n.ack(e.data.packet);break}case de.FETCH_SOCKETS_RESPONSE:{let i=this.requests.get(s);if(!i)return;i.current++,e.data.sockets.forEach(o=>i.responses.push(o)),i.current===i.expected&&(clearTimeout(i.timeout),i.resolve(i.responses),this.requests.delete(s));break}case de.SERVER_SIDE_EMIT_RESPONSE:{let i=this.requests.get(s);if(!i)return;i.current++,i.responses.push(e.data.packet),i.current===i.expected&&(clearTimeout(i.timeout),i.resolve(null,i.responses),this.requests.delete(s));break}default:St("[%s] unknown response type: %s",this.uid,e.type)}}async broadcast(e,r){var n;if(!((n=r.flags)===null||n===void 0?void 0:n.local))try{let i=await this.publishAndReturnOffset({type:de.BROADCAST,data:{packet:e,opts:bu(r)}});this.addOffsetIfNecessary(e,r,i)}catch(i){return St("[%s] error while broadcasting message: %s",this.uid,i.message)}super.broadcast(e,r)}addOffsetIfNecessary(e,r,n){var s;if(!this.nsp.server.opts.connectionStateRecovery)return;let i=e.type===2,o=e.id===void 0,a=((s=r.flags)===null||s===void 0?void 0:s.volatile)===void 0;i&&o&&a&&e.data.push(n)}broadcastWithAck(e,r,n,s){var i;if(!((i=r?.flags)===null||i===void 0?void 0:i.local)){let a=cl();this.ackRequests.set(a,{clientCountCallback:n,ack:s}),this.publish({type:de.BROADCAST,data:{packet:e,requestId:a,opts:bu(r)}}),setTimeout(()=>{this.ackRequests.delete(a)},r.flags.timeout)}super.broadcastWithAck(e,r,n,s)}async addSockets(e,r){var n;if(!((n=e.flags)===null||n===void 0?void 0:n.local))try{await this.publishAndReturnOffset({type:de.SOCKETS_JOIN,data:{opts:bu(e),rooms:r}})}catch(i){St("[%s] error while publishing message: %s",this.uid,i.message)}super.addSockets(e,r)}async delSockets(e,r){var n;if(!((n=e.flags)===null||n===void 0?void 0:n.local))try{await this.publishAndReturnOffset({type:de.SOCKETS_LEAVE,data:{opts:bu(e),rooms:r}})}catch(i){St("[%s] error while publishing message: %s",this.uid,i.message)}super.delSockets(e,r)}async disconnectSockets(e,r){var n;if(!((n=e.flags)===null||n===void 0?void 0:n.local))try{await this.publishAndReturnOffset({type:de.DISCONNECT_SOCKETS,data:{opts:bu(e),close:r}})}catch(i){St("[%s] error while publishing message: %s",this.uid,i.message)}super.disconnectSockets(e,r)}async fetchSockets(e){var r;let[n,s]=await Promise.all([super.fetchSockets(e),this.serverCount()]),i=s-1;if(!((r=e.flags)===null||r===void 0)&&r.local||i<=0)return n;let o=cl();return new Promise((a,u)=>{let c=setTimeout(()=>{let p=this.requests.get(o);p&&(u(new Error(`timeout reached: only ${p.current} responses received out of ${p.expected}`)),this.requests.delete(o))},e.flags.timeout||Fm),l={type:de.FETCH_SOCKETS,resolve:a,timeout:c,current:0,expected:i,responses:n};this.requests.set(o,l),this.publish({type:de.FETCH_SOCKETS,data:{opts:bu(e),requestId:o}})})}async serverSideEmit(e){if(!(typeof e[e.length-1]=="function"))return this.publish({type:de.SERVER_SIDE_EMIT,data:{packet:e}});let n=e.pop(),s=await this.serverCount()-1;if(St('[%s] waiting for %d responses to "serverSideEmit" request',this.uid,s),s<=0)return n(null,[]);let i=cl(),o=setTimeout(()=>{let u=this.requests.get(i);u&&(n(new Error(`timeout reached: only ${u.current} responses received out of ${u.expected}`),u.responses),this.requests.delete(i))},Fm),a={type:de.SERVER_SIDE_EMIT,resolve:n,timeout:o,current:0,expected:s,responses:[]};this.requests.set(i,a),this.publish({type:de.SERVER_SIDE_EMIT,data:{requestId:i,packet:e}})}publish(e){St("[%s] sending message %s",this.uid,e.type),this.publishAndReturnOffset(e).catch(r=>{St("[%s] error while publishing message: %s",this.uid,r)})}publishAndReturnOffset(e){return e.uid=this.uid,e.nsp=this.nsp.name,this.doPublish(e)}publishResponse(e,r){r.uid=this.uid,r.nsp=this.nsp.name,St("[%s] sending response %s to %s",this.uid,r.type,e),this.doPublishResponse(e,r).catch(n=>{St("[%s] error while publishing response: %s",this.uid,n)})}};Ii.ClusterAdapter=$m;var dw=class extends $m{constructor(e,r){super(e),this.nodesMap=new Map,this.customRequests=new Map,this._opts=Object.assign({heartbeatInterval:5e3,heartbeatTimeout:1e4},r),this.cleanupTimer=setInterval(()=>{let n=Date.now();this.nodesMap.forEach((s,i)=>{n-s>this._opts.heartbeatTimeout&&(St("[%s] node %s seems down",this.uid,i),this.removeNode(i))})},1e3)}init(){this.publish({type:de.INITIAL_HEARTBEAT})}scheduleHeartbeat(){this.heartbeatTimer?this.heartbeatTimer.refresh():this.heartbeatTimer=setTimeout(()=>{this.publish({type:de.HEARTBEAT})},this._opts.heartbeatInterval)}close(){this.publish({type:de.ADAPTER_CLOSE}),clearTimeout(this.heartbeatTimer),this.cleanupTimer&&clearInterval(this.cleanupTimer)}onMessage(e,r){if(e.uid===this.uid)return St("[%s] ignore message from self",this.uid);switch(e.uid&&e.uid!==Fie&&this.nodesMap.set(e.uid,Date.now()),e.type){case de.INITIAL_HEARTBEAT:this.publish({type:de.HEARTBEAT});break;case de.HEARTBEAT:break;case de.ADAPTER_CLOSE:this.removeNode(e.uid);break;default:super.onMessage(e,r)}}serverCount(){return Promise.resolve(1+this.nodesMap.size)}publish(e){return this.scheduleHeartbeat(),super.publish(e)}async serverSideEmit(e){if(!(typeof e[e.length-1]=="function"))return this.publish({type:de.SERVER_SIDE_EMIT,data:{packet:e}});let n=e.pop(),s=this.nodesMap.size;if(St('[%s] waiting for %d responses to "serverSideEmit" request',this.uid,s),s<=0)return n(null,[]);let i=cl(),o=setTimeout(()=>{let u=this.customRequests.get(i);u&&(n(new Error(`timeout reached: missing ${u.missingUids.size} responses`),u.responses),this.customRequests.delete(i))},Fm),a={type:de.SERVER_SIDE_EMIT,resolve:n,timeout:o,missingUids:new Set([...this.nodesMap.keys()]),responses:[]};this.customRequests.set(i,a),this.publish({type:de.SERVER_SIDE_EMIT,data:{requestId:i,packet:e}})}async fetchSockets(e){var r;let[n,s]=await Promise.all([super.fetchSockets({rooms:e.rooms,except:e.except,flags:{local:!0}}),this.serverCount()]),i=s-1;if(!((r=e.flags)===null||r===void 0)&&r.local||i<=0)return n;let o=cl();return new Promise((a,u)=>{let c=setTimeout(()=>{let p=this.customRequests.get(o);p&&(u(new Error(`timeout reached: missing ${p.missingUids.size} responses`)),this.customRequests.delete(o))},e.flags.timeout||Fm),l={type:de.FETCH_SOCKETS,resolve:a,timeout:c,missingUids:new Set([...this.nodesMap.keys()]),responses:n};this.customRequests.set(o,l),this.publish({type:de.FETCH_SOCKETS,data:{opts:bu(e),requestId:o}})})}onResponse(e){let r=e.data.requestId;switch(St("[%s] received response %s to request %s",this.uid,e.type,r),e.type){case de.FETCH_SOCKETS_RESPONSE:{let n=this.customRequests.get(r);if(!n)return;e.data.sockets.forEach(s=>n.responses.push(s)),n.missingUids.delete(e.uid),n.missingUids.size===0&&(clearTimeout(n.timeout),n.resolve(n.responses),this.customRequests.delete(r));break}case de.SERVER_SIDE_EMIT_RESPONSE:{let n=this.customRequests.get(r);if(!n)return;n.responses.push(e.data.packet),n.missingUids.delete(e.uid),n.missingUids.size===0&&(clearTimeout(n.timeout),n.resolve(null,n.responses),this.customRequests.delete(r));break}default:super.onResponse(e)}}removeNode(e){this.customRequests.forEach((r,n)=>{r.missingUids.delete(e),r.missingUids.size===0&&(clearTimeout(r.timeout),r.type===de.FETCH_SOCKETS?r.resolve(r.responses):r.type===de.SERVER_SIDE_EMIT&&r.resolve(null,r.responses),this.customRequests.delete(n))}),this.nodesMap.delete(e)}};Ii.ClusterAdapterWithHeartbeat=dw});var qm=m(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});Ss.MessageType=Ss.ClusterAdapterWithHeartbeat=Ss.ClusterAdapter=Ss.SessionAwareAdapter=Ss.Adapter=void 0;var GP=pw();Object.defineProperty(Ss,"Adapter",{enumerable:!0,get:function(){return GP.Adapter}});Object.defineProperty(Ss,"SessionAwareAdapter",{enumerable:!0,get:function(){return GP.SessionAwareAdapter}});var hw=HP();Object.defineProperty(Ss,"ClusterAdapter",{enumerable:!0,get:function(){return hw.ClusterAdapter}});Object.defineProperty(Ss,"ClusterAdapterWithHeartbeat",{enumerable:!0,get:function(){return hw.ClusterAdapterWithHeartbeat}});Object.defineProperty(Ss,"MessageType",{enumerable:!0,get:function(){return hw.MessageType}})});var QP=m(ll=>{"use strict";var $ie=ll&&ll.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ll,"__esModule",{value:!0});ll.ParentNamespace=void 0;var JP=aw(),qie=qm(),jie=$ie(fr()),YP=(0,jie.default)("socket.io:parent-namespace"),jm=class t extends JP.Namespace{constructor(e){super(e,"/_"+t.count++),this.children=new Set}_initAdapter(){this.adapter=new fw(this)}emit(e,...r){return this.children.forEach(n=>{n.emit(e,...r)}),!0}createChild(e){YP("creating child namespace %s",e);let r=new JP.Namespace(this.server,e);if(this._fns.forEach(n=>r.use(n)),this.listeners("connect").forEach(n=>r.on("connect",n)),this.listeners("connection").forEach(n=>r.on("connection",n)),this.children.add(r),this.server._opts.cleanupEmptyChildNamespaces){let n=r._remove;r._remove=s=>{n.call(r,s),r.sockets.size===0&&(YP("closing child namespace %s",e),r.adapter.close(),this.server._nsps.delete(r.name),this.children.delete(r))}}return this.server._nsps.set(e,r),this.server.sockets.emitReserved("new_namespace",r),r}fetchSockets(){throw new Error("fetchSockets() is not supported on parent namespaces")}};ll.ParentNamespace=jm;jm.count=0;var fw=class extends qie.Adapter{broadcast(e,r){this.nsp.children.forEach(n=>{n.adapter.broadcast(e,r)})}}});var nB=m(wu=>{"use strict";var Lie=wu&&wu.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wu,"__esModule",{value:!0});wu.patchAdapter=Vie;wu.restoreAdapter=Wie;wu.serveFile=Kie;var Su=qm(),XP=require("fs"),Uie=Lie(fr()),Lm=(0,Uie.default)("socket.io:adapter-uws"),mw="",{addAll:eB,del:tB,broadcast:rB}=Su.Adapter.prototype;function Vie(t){Su.Adapter.prototype.addAll=function(e,r){let n=!this.sids.has(e);eB.call(this,e,r);let s=this.nsp.sockets.get(e)||this.nsp._preConnectSockets.get(e);if(s){if(s.conn.transport.name==="websocket"){ZP(this.nsp.name,s,n,r);return}n&&s.conn.on("upgrade",()=>{let i=this.sids.get(e);i&&ZP(this.nsp.name,s,n,i)})}},Su.Adapter.prototype.del=function(e,r){tB.call(this,e,r);let n=this.nsp.sockets.get(e)||this.nsp._preConnectSockets.get(e);if(n&&n.conn.transport.name==="websocket"){let s=n.conn.id,i=n.conn.transport.socket,o=`${this.nsp.name}${mw}${r}`;Lm("unsubscribe connection %s from topic %s",s,o),i.unsubscribe(o)}},Su.Adapter.prototype.broadcast=function(e,r){if(!(r.rooms.size<=1&&r.except.size===0)){rB.call(this,e,r);return}let s=r.flags||{},i={preEncoded:!0,volatile:s.volatile,compress:s.compress};e.nsp=this.nsp.name;let o=this.encoder.encode(e),a=r.rooms.size===0?this.nsp.name:`${this.nsp.name}${mw}${r.rooms.keys().next().value}`;Lm("fast publish to %s",a),o.forEach(u=>{let c=typeof u!="string";t.publish(a,c?u:"4"+u,c)}),this.apply(r,u=>{u.conn.transport.name!=="websocket"&&u.client.writeToEngine(o,i)})}}function ZP(t,e,r,n){let s=e.conn.id,i=e.conn.transport.socket;r&&(Lm("subscribe connection %s to topic %s",s,t),i.subscribe(t)),n.forEach(o=>{let a=`${t}${mw}${o}`;Lm("subscribe connection %s to topic %s",s,a),i.subscribe(a)})}function Wie(){Su.Adapter.prototype.addAll=eB,Su.Adapter.prototype.del=tB,Su.Adapter.prototype.broadcast=rB}var zie=t=>{let{buffer:e,byteOffset:r,byteLength:n}=t;return e.slice(r,r+n)};function Kie(t,e){let{size:r}=(0,XP.statSync)(e),n=(0,XP.createReadStream)(e),s=()=>!n.destroyed&&n.destroy(),i=a=>{throw s(),a},o=a=>{let u=zie(a);t.cork(()=>{let c=t.getWriteOffset(),[l,p]=t.tryEnd(u,r);!p&&!l&&(n.pause(),t.onWritable(d=>{let[h,f]=t.tryEnd(u.slice(d-c),r);return!f&&h&&n.resume(),h}))})};t.onAborted(s),n.on("data",o).on("error",i).on("end",s)}});var sB=m((QMe,Hie)=>{Hie.exports={name:"socket.io",version:"4.8.3",description:"node.js realtime framework server",keywords:["realtime","framework","websocket","tcp","events","socket","io"],files:["dist/","client-dist/","wrapper.mjs","!**/*.tsbuildinfo"],directories:{doc:"docs/",example:"example/",lib:"lib/",test:"test/"},type:"commonjs",main:"./dist/index.js",exports:{".":{types:"./dist/index.d.ts",import:"./wrapper.mjs",require:"./dist/index.js"},"./package.json":"./package.json"},types:"./dist/index.d.ts",license:"MIT",homepage:"https://github.com/socketio/socket.io/tree/main/packages/socket.io#readme",repository:{type:"git",url:"git+https://github.com/socketio/socket.io.git"},bugs:{url:"https://github.com/socketio/socket.io/issues"},scripts:{compile:"rimraf ./dist && tsc",test:"npm run format:check && npm run compile && npm run test:types && npm run test:unit","test:types":"tsd","test:unit":"nyc mocha --import=tsx --reporter spec --slow 200 --bail --timeout 10000 test/index.ts","format:check":'prettier --check "lib/**/*.ts" "test/**/*.ts"',"format:fix":'prettier --write "lib/**/*.ts" "test/**/*.ts"',prepack:"npm run compile"},dependencies:{accepts:"~1.3.4",base64id:"~2.0.0",cors:"~2.8.5",debug:"~4.4.1","engine.io":"~6.6.0","socket.io-adapter":"~2.5.2","socket.io-parser":"~4.2.4"},contributors:[{name:"Guillermo Rauch",email:"rauchg@gmail.com"},{name:"Arnout Kazemier",email:"info@3rd-eden.com"},{name:"Vladimir Dronnikov",email:"dronnikov@gmail.com"},{name:"Einar Otto Stangvik",email:"einaros@gmail.com"}],engines:{node:">=10.2.0"},tsd:{directory:"test"}}});var dB=m((Hr,j1)=>{"use strict";var Gie=Hr&&Hr.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Jie=Hr&&Hr.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),Yie=Hr&&Hr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Gie(e,t,r);return Jie(e,t),e},_w=Hr&&Hr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hr,"__esModule",{value:!0});Hr.Namespace=Hr.Socket=Hr.Server=void 0;var Qie=_w(require("http")),Xie=require("fs"),yw=require("zlib"),Zie=Uf(),Um=require("stream"),iB=require("path"),oB=TP(),eoe=FP(),aB=require("events"),Ew=aw();Object.defineProperty(Hr,"Namespace",{enumerable:!0,get:function(){return Ew.Namespace}});var toe=QP(),uB=qm(),roe=Yie($1()),noe=_w(fr()),pB=iw();Object.defineProperty(Hr,"Socket",{enumerable:!0,get:function(){return pB.Socket}});var soe=Mm(),gw=nB(),ioe=_w(qS()),pn=(0,noe.default)("socket.io:server"),cB=sB().version,lB=/\.map/,pl=class t extends soe.StrictEventEmitter{constructor(e,r={}){super(),this._nsps=new Map,this.parentNsps=new Map,this.parentNamespacesFromRegExp=new Map,typeof e=="object"&&e instanceof Object&&!e.listen&&(r=e,e=void 0),this.path(r.path||"/socket.io"),this.connectTimeout(r.connectTimeout||45e3),this.serveClient(r.serveClient!==!1),this._parser=r.parser||roe,this.encoder=new this._parser.Encoder,this.opts=r,r.connectionStateRecovery?(r.connectionStateRecovery=Object.assign({maxDisconnectionDuration:120*1e3,skipMiddlewares:!0},r.connectionStateRecovery),this.adapter(r.adapter||uB.SessionAwareAdapter)):this.adapter(r.adapter||uB.Adapter),r.cleanupEmptyChildNamespaces=!!r.cleanupEmptyChildNamespaces,this.sockets=this.of("/"),(e||typeof e=="number")&&this.attach(e),this.opts.cors&&(this._corsMiddleware=(0,ioe.default)(this.opts.cors))}get _opts(){return this.opts}serveClient(e){return arguments.length?(this._serveClient=e,this):this._serveClient}_checkNamespace(e,r,n){if(this.parentNsps.size===0)return n(!1);let s=this.parentNsps.keys(),i=()=>{let o=s.next();if(o.done)return n(!1);o.value(e,r,(a,u)=>{if(a||!u)return i();if(this._nsps.has(e))return pn("dynamic namespace %s already exists",e),n(this._nsps.get(e));let c=this.parentNsps.get(o.value).createChild(e);pn("dynamic namespace %s was created",e),n(c)})};i()}path(e){if(!arguments.length)return this._path;this._path=e.replace(/\/$/,"");let r=this._path.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");return this.clientPathRegex=new RegExp("^"+r+"/socket\\.io(\\.msgpack|\\.esm)?(\\.min)?\\.js(\\.map)?(?:\\?|$)"),this}connectTimeout(e){return e===void 0?this._connectTimeout:(this._connectTimeout=e,this)}adapter(e){if(!arguments.length)return this._adapter;this._adapter=e;for(let r of this._nsps.values())r._initAdapter();return this}listen(e,r={}){return this.attach(e,r)}attach(e,r={}){if(typeof e=="function"){let n="You are trying to attach socket.io to an express request handler function. Please pass a http.Server instance.";throw new Error(n)}if(Number(e)==e&&(e=Number(e)),typeof e=="number"){pn("creating http server and binding to %d",e);let n=e;e=Qie.default.createServer((s,i)=>{i.writeHead(404),i.end()}),e.listen(n)}return Object.assign(r,this.opts),r.path=r.path||this._path,this.initEngine(e,r),this}attachApp(e,r={}){Object.assign(r,this.opts),r.path=r.path||this._path,pn("creating uWebSockets.js-based engine with opts %j",r);let n=new oB.uServer(r);n.attach(e,r),this.bind(n),this._serveClient&&e.get(`${this._path}/*`,(s,i)=>{if(!this.clientPathRegex.test(i.getUrl())){i.setYield(!0);return}let o=i.getUrl().replace(this._path,"").replace(/\?.*$/,"").replace(/^\//,""),a=lB.test(o),u=a?"map":"source",c='"'+cB+'"',l="W/"+c,p=i.getHeader("if-none-match");if(p&&(c===p||l===p)){pn("serve client %s 304",u),s.writeStatus("304 Not Modified"),s.end();return}pn("serve client %s",u),s.writeHeader("cache-control","public, max-age=0"),s.writeHeader("content-type","application/"+(a?"json":"javascript")+"; charset=utf-8"),s.writeHeader("etag",c);let d=iB.join(__dirname,"../client-dist/",o);(0,gw.serveFile)(s,d)}),(0,gw.patchAdapter)(e)}initEngine(e,r){pn("creating engine.io instance with opts %j",r),this.eio=(0,oB.attach)(e,r),this._serveClient&&this.attachServe(e),this.httpServer=e,this.bind(this.eio)}attachServe(e){pn("attaching client serving req handler");let r=e.listeners("request").slice(0);e.removeAllListeners("request"),e.on("request",(n,s)=>{if(this.clientPathRegex.test(n.url))this._corsMiddleware?this._corsMiddleware(n,s,()=>{this.serve(n,s)}):this.serve(n,s);else for(let i=0;i<r.length;i++)r[i].call(e,n,s)})}serve(e,r){let n=e.url.replace(this._path,"").replace(/\?.*$/,""),s=lB.test(n),i=s?"map":"source",o='"'+cB+'"',a="W/"+o,u=e.headers["if-none-match"];if(u&&(o===u||a===u)){pn("serve client %s 304",i),r.writeHead(304),r.end();return}pn("serve client %s",i),r.setHeader("Cache-Control","public, max-age=0"),r.setHeader("Content-Type","application/"+(s?"json":"javascript")+"; charset=utf-8"),r.setHeader("ETag",o),t.sendFile(n,e,r)}static sendFile(e,r,n){let s=(0,Xie.createReadStream)(iB.join(__dirname,"../client-dist/",e)),i=Zie(r).encodings(["br","gzip","deflate"]),o=a=>{a&&n.end()};switch(i){case"br":n.writeHead(200,{"content-encoding":"br"}),(0,Um.pipeline)(s,(0,yw.createBrotliCompress)(),n,o);break;case"gzip":n.writeHead(200,{"content-encoding":"gzip"}),(0,Um.pipeline)(s,(0,yw.createGzip)(),n,o);break;case"deflate":n.writeHead(200,{"content-encoding":"deflate"}),(0,Um.pipeline)(s,(0,yw.createDeflate)(),n,o);break;default:n.writeHead(200),(0,Um.pipeline)(s,n,o)}}bind(e){return this.engine=e,this.engine.on("connection",this.onconnection.bind(this)),this}onconnection(e){pn("incoming connection with id %s",e.id);let r=new eoe.Client(this,e);return e.protocol===3&&r.connect("/"),this}of(e,r){if(typeof e=="function"||e instanceof RegExp){let s=new toe.ParentNamespace(this);return pn("initializing parent namespace %s",s.name),typeof e=="function"?this.parentNsps.set(e,s):(this.parentNsps.set((i,o,a)=>a(null,e.test(i)),s),this.parentNamespacesFromRegExp.set(e,s)),r&&s.on("connect",r),s}String(e)[0]!=="/"&&(e="/"+e);let n=this._nsps.get(e);if(!n){for(let[s,i]of this.parentNamespacesFromRegExp)if(s.test(e))return pn("attaching namespace %s to parent namespace %s",e,s),i.createChild(e);pn("initializing namespace %s",e),n=new Ew.Namespace(this,e),this._nsps.set(e,n),e!=="/"&&this.sockets.emitReserved("new_namespace",n)}return r&&n.on("connect",r),n}async close(e){if(await Promise.allSettled([...this._nsps.values()].map(async r=>{r.sockets.forEach(n=>{n._onclose("server shutting down")}),await r.adapter.close()})),this.engine.close(),(0,gw.restoreAdapter)(),this.httpServer)return new Promise(r=>{this.httpServer.close(n=>{e&&e(n),n&&pn("server was not running"),r()})});e&&e()}use(e){return this.sockets.use(e),this}to(e){return this.sockets.to(e)}in(e){return this.sockets.in(e)}except(e){return this.sockets.except(e)}send(...e){return this.sockets.emit("message",...e),this}write(...e){return this.sockets.emit("message",...e),this}serverSideEmit(e,...r){return this.sockets.serverSideEmit(e,...r)}serverSideEmitWithAck(e,...r){return this.sockets.serverSideEmitWithAck(e,...r)}allSockets(){return this.sockets.allSockets()}compress(e){return this.sockets.compress(e)}get volatile(){return this.sockets.volatile}get local(){return this.sockets.local}timeout(e){return this.sockets.timeout(e)}fetchSockets(){return this.sockets.fetchSockets()}socketsJoin(e){return this.sockets.socketsJoin(e)}socketsLeave(e){return this.sockets.socketsLeave(e)}disconnectSockets(e=!1){return this.sockets.disconnectSockets(e)}};Hr.Server=pl;var ooe=Object.keys(aB.EventEmitter.prototype).filter(function(t){return typeof aB.EventEmitter.prototype[t]=="function"});ooe.forEach(function(t){pl.prototype[t]=function(){return this.sockets[t].apply(this.sockets,arguments)}});j1.exports=(t,e)=>new pl(t,e);j1.exports.Server=pl;j1.exports.Namespace=Ew.Namespace;j1.exports.Socket=pB.Socket});var mB=m((tPe,L1)=>{function aoe(t){return t&&t.__esModule?t:{default:t}}L1.exports=aoe,L1.exports.__esModule=!0,L1.exports.default=L1.exports});var Sw=m(bw=>{"use strict";Object.defineProperty(bw,"__esModule",{value:!0});var uoe=require("crypto"),coe=(t,e)=>(0,uoe.createHash)(t).update(e).digest();bw.default=coe});var Dt=m(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.concatKdf=nr.lengthAndInput=nr.uint32be=nr.uint64be=nr.p2s=nr.concat=nr.decoder=nr.encoder=void 0;var loe=Sw();nr.encoder=new TextEncoder;nr.decoder=new TextDecoder;var Vm=2**32;function Aw(...t){let e=t.reduce((s,{length:i})=>s+i,0),r=new Uint8Array(e),n=0;return t.forEach(s=>{r.set(s,n),n+=s.length}),r}nr.concat=Aw;function poe(t,e){return Aw(nr.encoder.encode(t),new Uint8Array([0]),e)}nr.p2s=poe;function ww(t,e,r){if(e<0||e>=Vm)throw new RangeError(`value must be >= 0 and <= ${Vm-1}. Received ${e}`);t.set([e>>>24,e>>>16,e>>>8,e&255],r)}function doe(t){let e=Math.floor(t/Vm),r=t%Vm,n=new Uint8Array(8);return ww(n,e,0),ww(n,r,4),n}nr.uint64be=doe;function Ow(t){let e=new Uint8Array(4);return ww(e,t),e}nr.uint32be=Ow;function hoe(t){return Aw(Ow(t.length),t)}nr.lengthAndInput=hoe;async function foe(t,e,r){let n=Math.ceil((e>>3)/32),s=new Uint8Array(n*32);for(let i=0;i<n;i++){let o=new Uint8Array(4+t.length+r.length);o.set(Ow(i+1)),o.set(t,4),o.set(r,4+t.length),s.set(await(0,loe.default)("sha256",o),i*32)}return s.slice(0,e>>3)}nr.concatKdf=foe});var Gr=m(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.decode=Ys.encode=Ys.encodeBase64=Ys.decodeBase64=void 0;var dl=require("buffer"),moe=Dt(),yB;function yoe(t){let e=t;return e instanceof Uint8Array&&(e=moe.decoder.decode(e)),e}dl.Buffer.isEncoding("base64url")?Ys.encode=yB=t=>dl.Buffer.from(t).toString("base64url"):Ys.encode=yB=t=>dl.Buffer.from(t).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");var goe=t=>dl.Buffer.from(t,"base64");Ys.decodeBase64=goe;var _oe=t=>dl.Buffer.from(t).toString("base64");Ys.encodeBase64=_oe;var Eoe=t=>dl.Buffer.from(yoe(t),"base64");Ys.decode=Eoe});var fe=m(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.JWSSignatureVerificationFailed=Fe.JWKSTimeout=Fe.JWKSMultipleMatchingKeys=Fe.JWKSNoMatchingKey=Fe.JWKSInvalid=Fe.JWKInvalid=Fe.JWTInvalid=Fe.JWSInvalid=Fe.JWEInvalid=Fe.JWEDecompressionFailed=Fe.JWEDecryptionFailed=Fe.JOSENotSupported=Fe.JOSEAlgNotAllowed=Fe.JWTExpired=Fe.JWTClaimValidationFailed=Fe.JOSEError=void 0;var gr=class extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){var r;super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(r=Error.captureStackTrace)===null||r===void 0||r.call(Error,this,this.constructor)}};Fe.JOSEError=gr;var Cw=class extends gr{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(e,r="unspecified",n="unspecified"){super(e),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=r,this.reason=n}};Fe.JWTClaimValidationFailed=Cw;var vw=class extends gr{static get code(){return"ERR_JWT_EXPIRED"}constructor(e,r="unspecified",n="unspecified"){super(e),this.code="ERR_JWT_EXPIRED",this.claim=r,this.reason=n}};Fe.JWTExpired=vw;var xw=class extends gr{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}};Fe.JOSEAlgNotAllowed=xw;var Tw=class extends gr{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}};Fe.JOSENotSupported=Tw;var Dw=class extends gr{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}};Fe.JWEDecryptionFailed=Dw;var Mw=class extends gr{constructor(){super(...arguments),this.code="ERR_JWE_DECOMPRESSION_FAILED",this.message="decompression operation failed"}static get code(){return"ERR_JWE_DECOMPRESSION_FAILED"}};Fe.JWEDecompressionFailed=Mw;var Pw=class extends gr{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}};Fe.JWEInvalid=Pw;var Bw=class extends gr{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}};Fe.JWSInvalid=Bw;var Iw=class extends gr{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}};Fe.JWTInvalid=Iw;var Nw=class extends gr{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}};Fe.JWKInvalid=Nw;var kw=class extends gr{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}};Fe.JWKSInvalid=kw;var Rw=class extends gr{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}};Fe.JWKSNoMatchingKey=Rw;var Fw=class extends gr{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}};Fe.JWKSMultipleMatchingKeys=Fw;var $w=class extends gr{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}};Fe.JWKSTimeout=$w;var qw=class extends gr{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}};Fe.JWSSignatureVerificationFailed=qw});var U1=m(Wm=>{"use strict";Object.defineProperty(Wm,"__esModule",{value:!0});Wm.default=void 0;var boe=require("crypto");Object.defineProperty(Wm,"default",{enumerable:!0,get:function(){return boe.randomFillSync}})});var zm=m(V1=>{"use strict";Object.defineProperty(V1,"__esModule",{value:!0});V1.bitLength=void 0;var Soe=fe(),woe=U1();function gB(t){switch(t){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new Soe.JOSENotSupported(`Unsupported JWE Algorithm: ${t}`)}}V1.bitLength=gB;V1.default=t=>(0,woe.default)(new Uint8Array(gB(t)>>3))});var Lw=m(jw=>{"use strict";Object.defineProperty(jw,"__esModule",{value:!0});var Aoe=fe(),Ooe=zm(),Coe=(t,e)=>{if(e.length<<3!==(0,Ooe.bitLength)(t))throw new Aoe.JWEInvalid("Invalid Initialization Vector length")};jw.default=Coe});var ws=m(Uw=>{"use strict";Object.defineProperty(Uw,"__esModule",{value:!0});var voe=require("crypto"),_B=require("util");Uw.default=_B.types.isKeyObject?t=>_B.types.isKeyObject(t):t=>t!=null&&t instanceof voe.KeyObject});var zw=m(Ww=>{"use strict";Object.defineProperty(Ww,"__esModule",{value:!0});var Vw=fe(),xoe=ws(),Toe=(t,e)=>{let r;switch(t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":r=parseInt(t.slice(-3),10);break;case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(t.slice(1,4),10);break;default:throw new Vw.JOSENotSupported(`Content Encryption Algorithm ${t} is not supported either by JOSE or your javascript runtime`)}if(e instanceof Uint8Array){let n=e.byteLength<<3;if(n!==r)throw new Vw.JWEInvalid(`Invalid Content Encryption Key length. Expected ${r} bits, got ${n} bits`);return}if((0,xoe.default)(e)&&e.type==="secret"){let n=e.symmetricKeySize<<3;if(n!==r)throw new Vw.JWEInvalid(`Invalid Content Encryption Key length. Expected ${r} bits, got ${n} bits`);return}throw new TypeError("Invalid Content Encryption Key type")};Ww.default=Toe});var EB=m(Kw=>{"use strict";Object.defineProperty(Kw,"__esModule",{value:!0});var Doe=require("crypto"),Moe=Doe.timingSafeEqual;Kw.default=Moe});var Gw=m(Hw=>{"use strict";Object.defineProperty(Hw,"__esModule",{value:!0});var Poe=require("crypto"),bB=Dt();function Boe(t,e,r,n,s,i){let o=(0,bB.concat)(t,e,r,(0,bB.uint64be)(t.length<<3)),a=(0,Poe.createHmac)(`sha${n}`,s);return a.update(o),a.digest().slice(0,i>>3)}Hw.default=Boe});var As=m(W1=>{"use strict";Object.defineProperty(W1,"__esModule",{value:!0});W1.isCryptoKey=void 0;var Ioe=require("crypto"),SB=require("util"),Noe=Ioe.webcrypto;W1.default=Noe;W1.isCryptoKey=SB.types.isCryptoKey?t=>SB.types.isCryptoKey(t):t=>!1});var ca=m(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.checkEncCryptoKey=hl.checkSigCryptoKey=void 0;function Cr(t,e="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${e} must be ${t}`)}function ua(t,e){return t.name===e}function Km(t){return parseInt(t.name.slice(4),10)}function koe(t){switch(t){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function wB(t,e){if(e.length&&!e.some(r=>t.usages.includes(r))){let r="CryptoKey does not support this operation, its usages must include ";if(e.length>2){let n=e.pop();r+=`one of ${e.join(", ")}, or ${n}.`}else e.length===2?r+=`one of ${e[0]} or ${e[1]}.`:r+=`${e[0]}.`;throw new TypeError(r)}}function Roe(t,e,...r){switch(e){case"HS256":case"HS384":case"HS512":{if(!ua(t.algorithm,"HMAC"))throw Cr("HMAC");let n=parseInt(e.slice(2),10);if(Km(t.algorithm.hash)!==n)throw Cr(`SHA-${n}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!ua(t.algorithm,"RSASSA-PKCS1-v1_5"))throw Cr("RSASSA-PKCS1-v1_5");let n=parseInt(e.slice(2),10);if(Km(t.algorithm.hash)!==n)throw Cr(`SHA-${n}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!ua(t.algorithm,"RSA-PSS"))throw Cr("RSA-PSS");let n=parseInt(e.slice(2),10);if(Km(t.algorithm.hash)!==n)throw Cr(`SHA-${n}`,"algorithm.hash");break}case"EdDSA":{if(t.algorithm.name!=="Ed25519"&&t.algorithm.name!=="Ed448")throw Cr("Ed25519 or Ed448");break}case"ES256":case"ES384":case"ES512":{if(!ua(t.algorithm,"ECDSA"))throw Cr("ECDSA");let n=koe(e);if(t.algorithm.namedCurve!==n)throw Cr(n,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}wB(t,r)}hl.checkSigCryptoKey=Roe;function Foe(t,e,...r){switch(e){case"A128GCM":case"A192GCM":case"A256GCM":{if(!ua(t.algorithm,"AES-GCM"))throw Cr("AES-GCM");let n=parseInt(e.slice(1,4),10);if(t.algorithm.length!==n)throw Cr(n,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!ua(t.algorithm,"AES-KW"))throw Cr("AES-KW");let n=parseInt(e.slice(1,4),10);if(t.algorithm.length!==n)throw Cr(n,"algorithm.length");break}case"ECDH":{switch(t.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw Cr("ECDH, X25519, or X448")}break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!ua(t.algorithm,"PBKDF2"))throw Cr("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!ua(t.algorithm,"RSA-OAEP"))throw Cr("RSA-OAEP");let n=parseInt(e.slice(9),10)||1;if(Km(t.algorithm.hash)!==n)throw Cr(`SHA-${n}`,"algorithm.hash");break}default:throw new TypeError("CryptoKey does not support this operation")}wB(t,r)}hl.checkEncCryptoKey=Foe});var Os=m(z1=>{"use strict";Object.defineProperty(z1,"__esModule",{value:!0});z1.withAlg=void 0;function AB(t,e,...r){if(r.length>2){let n=r.pop();t+=`one of type ${r.join(", ")}, or ${n}.`}else r.length===2?t+=`one of type ${r[0]} or ${r[1]}.`:t+=`of type ${r[0]}.`;return e==null?t+=` Received ${e}`:typeof e=="function"&&e.name?t+=` Received function ${e.name}`:typeof e=="object"&&e!=null&&e.constructor&&e.constructor.name&&(t+=` Received an instance of ${e.constructor.name}`),t}z1.default=(t,...e)=>AB("Key must be ",t,...e);function $oe(t,e,...r){return AB(`Key for the ${t} algorithm must be `,e,...r)}z1.withAlg=$oe});var Hm=m(Yw=>{"use strict";Object.defineProperty(Yw,"__esModule",{value:!0});var qoe=require("crypto"),Jw;Yw.default=t=>(Jw||(Jw=new Set((0,qoe.getCiphers)())),Jw.has(t))});var Cs=m(K1=>{"use strict";Object.defineProperty(K1,"__esModule",{value:!0});K1.types=void 0;var Gm=As(),joe=ws();K1.default=t=>(0,joe.default)(t)||(0,Gm.isCryptoKey)(t);var OB=["KeyObject"];K1.types=OB;(globalThis.CryptoKey||!(Gm.default===null||Gm.default===void 0)&&Gm.default.CryptoKey)&&OB.push("CryptoKey")});var Zw=m(Xw=>{"use strict";Object.defineProperty(Xw,"__esModule",{value:!0});var Qw=require("crypto"),Loe=Lw(),Uoe=zw(),Voe=Dt(),fl=fe(),Woe=EB(),zoe=Gw(),Koe=As(),Hoe=ca(),CB=ws(),Goe=Os(),vB=Hm(),Joe=Cs();function Yoe(t,e,r,n,s,i){let o=parseInt(t.slice(1,4),10);(0,CB.default)(e)&&(e=e.export());let a=e.subarray(o>>3),u=e.subarray(0,o>>3),c=parseInt(t.slice(-3),10),l=`aes-${o}-cbc`;if(!(0,vB.default)(l))throw new fl.JOSENotSupported(`alg ${t} is not supported by your javascript runtime`);let p=(0,zoe.default)(i,n,r,c,u,o),d;try{d=(0,Woe.default)(s,p)}catch{}if(!d)throw new fl.JWEDecryptionFailed;let h;try{let f=(0,Qw.createDecipheriv)(l,a,n);h=(0,Voe.concat)(f.update(r),f.final())}catch{}if(!h)throw new fl.JWEDecryptionFailed;return h}function Qoe(t,e,r,n,s,i){let a=`aes-${parseInt(t.slice(1,4),10)}-gcm`;if(!(0,vB.default)(a))throw new fl.JOSENotSupported(`alg ${t} is not supported by your javascript runtime`);try{let u=(0,Qw.createDecipheriv)(a,e,n,{authTagLength:16});u.setAuthTag(s),i.byteLength&&u.setAAD(i,{plaintextLength:r.length});let c=u.update(r);return u.final(),c}catch{throw new fl.JWEDecryptionFailed}}var Xoe=(t,e,r,n,s,i)=>{let o;if((0,Koe.isCryptoKey)(e))(0,Hoe.checkEncCryptoKey)(e,t,"decrypt"),o=Qw.KeyObject.from(e);else if(e instanceof Uint8Array||(0,CB.default)(e))o=e;else throw new TypeError((0,Goe.default)(e,...Joe.types,"Uint8Array"));switch((0,Uoe.default)(t,o),(0,Loe.default)(t,n),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return Yoe(t,o,r,n,s,i);case"A128GCM":case"A192GCM":case"A256GCM":return Qoe(t,o,r,n,s,i);default:throw new fl.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}};Xw.default=Xoe});var e3=m(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.deflate=ml.inflate=void 0;var xB=require("util"),TB=require("zlib"),Zoe=fe(),eae=(0,xB.promisify)(TB.inflateRaw),tae=(0,xB.promisify)(TB.deflateRaw),rae=t=>eae(t,{maxOutputLength:25e4}).catch(()=>{throw new Zoe.JWEDecompressionFailed});ml.inflate=rae;var nae=t=>tae(t);ml.deflate=nae});var yl=m(t3=>{"use strict";Object.defineProperty(t3,"__esModule",{value:!0});var sae=(...t)=>{let e=t.filter(Boolean);if(e.length===0||e.length===1)return!0;let r;for(let n of e){let s=Object.keys(n);if(!r||r.size===0){r=new Set(s);continue}for(let i of s){if(r.has(i))return!1;r.add(i)}}return!0};t3.default=sae});var xn=m(r3=>{"use strict";Object.defineProperty(r3,"__esModule",{value:!0});function iae(t){return typeof t=="object"&&t!==null}function oae(t){if(!iae(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}r3.default=oae});var Ym=m(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});gl.unwrap=gl.wrap=void 0;var DB=require("buffer"),Jm=require("crypto"),MB=fe(),PB=Dt(),aae=As(),uae=ca(),cae=ws(),lae=Os(),BB=Hm(),pae=Cs();function IB(t,e){if(t.symmetricKeySize<<3!==parseInt(e.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${e}`)}function NB(t,e,r){if((0,cae.default)(t))return t;if(t instanceof Uint8Array)return(0,Jm.createSecretKey)(t);if((0,aae.isCryptoKey)(t))return(0,uae.checkEncCryptoKey)(t,e,r),Jm.KeyObject.from(t);throw new TypeError((0,lae.default)(t,...pae.types,"Uint8Array"))}var dae=(t,e,r)=>{let s=`aes${parseInt(t.slice(1,4),10)}-wrap`;if(!(0,BB.default)(s))throw new MB.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`);let i=NB(e,t,"wrapKey");IB(i,t);let o=(0,Jm.createCipheriv)(s,i,DB.Buffer.alloc(8,166));return(0,PB.concat)(o.update(r),o.final())};gl.wrap=dae;var hae=(t,e,r)=>{let s=`aes${parseInt(t.slice(1,4),10)}-wrap`;if(!(0,BB.default)(s))throw new MB.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`);let i=NB(e,t,"unwrapKey");IB(i,t);let o=(0,Jm.createDecipheriv)(s,i,DB.Buffer.alloc(8,166));return(0,PB.concat)(o.update(r),o.final())};gl.unwrap=hae});var H1=m(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});Qs.setCurve=Qs.weakMap=void 0;var Qm=require("buffer"),kB=require("crypto"),RB=fe(),fae=As(),mae=ws(),yae=Os(),gae=Cs(),_ae=Qm.Buffer.from([42,134,72,206,61,3,1,7]),Eae=Qm.Buffer.from([43,129,4,0,34]),bae=Qm.Buffer.from([43,129,4,0,35]),Sae=Qm.Buffer.from([43,129,4,0,10]);Qs.weakMap=new WeakMap;var wae=t=>{switch(t){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new RB.JOSENotSupported("Unsupported key curve for this operation")}},FB=(t,e)=>{var r;let n;if((0,fae.isCryptoKey)(t))n=kB.KeyObject.from(t);else if((0,mae.default)(t))n=t;else throw new TypeError((0,yae.default)(t,...gae.types));if(n.type==="secret")throw new TypeError('only "private" or "public" type keys can be used for this operation');switch(n.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${n.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${n.asymmetricKeyType.slice(1)}`;case"ec":{if(Qs.weakMap.has(n))return Qs.weakMap.get(n);let s=(r=n.asymmetricKeyDetails)===null||r===void 0?void 0:r.namedCurve;if(!s&&n.type==="private")s=FB((0,kB.createPublicKey)(n),!0);else if(!s){let o=n.export({format:"der",type:"spki"}),a=o[1]<128?14:15,u=o[a],c=o.slice(a+1,a+1+u);if(c.equals(_ae))s="prime256v1";else if(c.equals(Eae))s="secp384r1";else if(c.equals(bae))s="secp521r1";else if(c.equals(Sae))s="secp256k1";else throw new RB.JOSENotSupported("Unsupported key curve for this operation")}if(e)return s;let i=wae(s);return Qs.weakMap.set(n,i),i}default:throw new TypeError("Invalid asymmetric key type for this operation")}};function Aae(t,e){Qs.weakMap.set(t,e)}Qs.setCurve=Aae;Qs.default=FB});var u3=m(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});la.ecdhAllowed=la.generateEpk=la.deriveKey=void 0;var G1=require("crypto"),Oae=require("util"),qB=H1(),Au=Dt(),Cae=fe(),s3=As(),$B=ca(),i3=ws(),o3=Os(),a3=Cs(),n3=(0,Oae.promisify)(G1.generateKeyPair);async function vae(t,e,r,n,s=new Uint8Array(0),i=new Uint8Array(0)){let o;if((0,s3.isCryptoKey)(t))(0,$B.checkEncCryptoKey)(t,"ECDH"),o=G1.KeyObject.from(t);else if((0,i3.default)(t))o=t;else throw new TypeError((0,o3.default)(t,...a3.types));let a;if((0,s3.isCryptoKey)(e))(0,$B.checkEncCryptoKey)(e,"ECDH","deriveBits"),a=G1.KeyObject.from(e);else if((0,i3.default)(e))a=e;else throw new TypeError((0,o3.default)(e,...a3.types));let u=(0,Au.concat)((0,Au.lengthAndInput)(Au.encoder.encode(r)),(0,Au.lengthAndInput)(s),(0,Au.lengthAndInput)(i),(0,Au.uint32be)(n)),c=(0,G1.diffieHellman)({privateKey:a,publicKey:o});return(0,Au.concatKdf)(c,n,u)}la.deriveKey=vae;async function xae(t){let e;if((0,s3.isCryptoKey)(t))e=G1.KeyObject.from(t);else if((0,i3.default)(t))e=t;else throw new TypeError((0,o3.default)(t,...a3.types));switch(e.asymmetricKeyType){case"x25519":return n3("x25519");case"x448":return n3("x448");case"ec":{let r=(0,qB.default)(e);return n3("ec",{namedCurve:r})}default:throw new Cae.JOSENotSupported("Invalid or unsupported EPK")}}la.generateEpk=xae;var Tae=t=>["P-256","P-384","P-521","X25519","X448"].includes((0,qB.default)(t));la.ecdhAllowed=Tae});var jB=m(c3=>{"use strict";Object.defineProperty(c3,"__esModule",{value:!0});var Dae=fe();function Mae(t){if(!(t instanceof Uint8Array)||t.length<8)throw new Dae.JWEInvalid("PBES2 Salt Input must be 8 or more octets")}c3.default=Mae});var l3=m(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.decrypt=_l.encrypt=void 0;var Pae=require("util"),LB=require("crypto"),Bae=U1(),UB=Dt(),Iae=Gr(),VB=Ym(),WB=jB(),Nae=As(),kae=ca(),Rae=ws(),Fae=Os(),$ae=Cs(),zB=(0,Pae.promisify)(LB.pbkdf2);function KB(t,e){if((0,Rae.default)(t))return t.export();if(t instanceof Uint8Array)return t;if((0,Nae.isCryptoKey)(t))return(0,kae.checkEncCryptoKey)(t,e,"deriveBits","deriveKey"),LB.KeyObject.from(t).export();throw new TypeError((0,Fae.default)(t,...$ae.types,"Uint8Array"))}var qae=async(t,e,r,n=2048,s=(0,Bae.default)(new Uint8Array(16)))=>{(0,WB.default)(s);let i=(0,UB.p2s)(t,s),o=parseInt(t.slice(13,16),10)>>3,a=KB(e,t),u=await zB(a,i,n,o,`sha${t.slice(8,11)}`);return{encryptedKey:await(0,VB.wrap)(t.slice(-6),u,r),p2c:n,p2s:(0,Iae.encode)(s)}};_l.encrypt=qae;var jae=async(t,e,r,n,s)=>{(0,WB.default)(s);let i=(0,UB.p2s)(t,s),o=parseInt(t.slice(13,16),10)>>3,a=KB(e,t),u=await zB(a,i,n,o,`sha${t.slice(8,11)}`);return(0,VB.unwrap)(t.slice(-6),u,r)};_l.decrypt=jae});var J1=m(Xs=>{"use strict";Object.defineProperty(Xs,"__esModule",{value:!0});Xs.setModulusLength=Xs.weakMap=void 0;Xs.weakMap=new WeakMap;var Xm=(t,e)=>{let r=t.readUInt8(1);if((r&128)===0)return e===0?r:Xm(t.subarray(2+r),e-1);let n=r&127;r=0;for(let s=0;s<n;s++){r<<=8;let i=t.readUInt8(2+s);r|=i}return e===0?r:Xm(t.subarray(2+r),e-1)},Lae=(t,e)=>{let r=t.readUInt8(1);if((r&128)===0)return Xm(t.subarray(2),e);let n=r&127;return Xm(t.subarray(2+n),e)},Uae=t=>{var e,r;if(Xs.weakMap.has(t))return Xs.weakMap.get(t);let n=(r=(e=t.asymmetricKeyDetails)===null||e===void 0?void 0:e.modulusLength)!==null&&r!==void 0?r:Lae(t.export({format:"der",type:"pkcs1"}),t.type==="private"?1:0)-1<<3;return Xs.weakMap.set(t,n),n},Vae=(t,e)=>{Xs.weakMap.set(t,e)};Xs.setModulusLength=Vae;Xs.default=(t,e)=>{if(Uae(t)<2048)throw new TypeError(`${e} requires key modulusLength to be 2048 bits or larger`)}});var p3=m(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});El.decrypt=El.encrypt=void 0;var Y1=require("crypto"),Wae=J1(),zae=As(),Kae=ca(),Hae=ws(),Gae=Os(),Jae=Cs(),HB=(t,e)=>{if(t.asymmetricKeyType!=="rsa")throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");(0,Wae.default)(t,e)},GB=t=>{switch(t){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return Y1.constants.RSA_PKCS1_OAEP_PADDING;case"RSA1_5":return Y1.constants.RSA_PKCS1_PADDING;default:return}},JB=t=>{switch(t){case"RSA-OAEP":return"sha1";case"RSA-OAEP-256":return"sha256";case"RSA-OAEP-384":return"sha384";case"RSA-OAEP-512":return"sha512";default:return}};function YB(t,e,...r){if((0,Hae.default)(t))return t;if((0,zae.isCryptoKey)(t))return(0,Kae.checkEncCryptoKey)(t,e,...r),Y1.KeyObject.from(t);throw new TypeError((0,Gae.default)(t,...Jae.types))}var Yae=(t,e,r)=>{let n=GB(t),s=JB(t),i=YB(e,t,"wrapKey","encrypt");return HB(i,t),(0,Y1.publicEncrypt)({key:i,oaepHash:s,padding:n},r)};El.encrypt=Yae;var Qae=(t,e,r)=>{let n=GB(t),s=JB(t),i=YB(e,t,"unwrapKey","decrypt");return HB(i,t),(0,Y1.privateDecrypt)({key:i,oaepHash:s,padding:n},r)};El.decrypt=Qae});var X1=m(Q1=>{"use strict";Object.defineProperty(Q1,"__esModule",{value:!0});Q1.bitLength=void 0;var Xae=fe(),Zae=U1();function QB(t){switch(t){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new Xae.JOSENotSupported(`Unsupported JWE Algorithm: ${t}`)}}Q1.bitLength=QB;Q1.default=t=>(0,Zae.default)(new Uint8Array(QB(t)>>3))});var e0=m(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});vs.fromX509=vs.fromSPKI=vs.fromPKCS8=vs.toPKCS8=vs.toSPKI=void 0;var Zm=require("crypto"),XB=require("buffer"),eue=As(),tue=ws(),rue=Os(),nue=Cs(),ZB=(t,e,r)=>{let n;if((0,eue.isCryptoKey)(r)){if(!r.extractable)throw new TypeError("CryptoKey is not extractable");n=Zm.KeyObject.from(r)}else if((0,tue.default)(r))n=r;else throw new TypeError((0,rue.default)(r,...nue.types));if(n.type!==t)throw new TypeError(`key is not a ${t} key`);return n.export({format:"pem",type:e})},sue=t=>ZB("public","spki",t);vs.toSPKI=sue;var iue=t=>ZB("private","pkcs8",t);vs.toPKCS8=iue;var oue=t=>(0,Zm.createPrivateKey)({key:XB.Buffer.from(t.replace(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,""),"base64"),type:"pkcs8",format:"der"});vs.fromPKCS8=oue;var aue=t=>(0,Zm.createPublicKey)({key:XB.Buffer.from(t.replace(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,""),"base64"),type:"spki",format:"der"});vs.fromSPKI=aue;var uue=t=>(0,Zm.createPublicKey)({key:t,type:"spki",format:"pem"});vs.fromX509=uue});var eI=m(f3=>{"use strict";Object.defineProperty(f3,"__esModule",{value:!0});var Yt=require("buffer"),cue=fe(),lue=2,pue=3,due=4,hue=48,d3=Yt.Buffer.from([0]),t0=Yt.Buffer.from([lue]),fue=Yt.Buffer.from([pue]),mue=Yt.Buffer.from([hue]),yue=Yt.Buffer.from([due]),pa=t=>{if(t<128)return Yt.Buffer.from([t]);let e=Yt.Buffer.alloc(5);e.writeUInt32BE(t,1);let r=1;for(;e[r]===0;)r++;return e[r-1]=128|5-r,e.slice(r-1)},gue=new Map([["P-256",Yt.Buffer.from("06 08 2A 86 48 CE 3D 03 01 07".replace(/ /g,""),"hex")],["secp256k1",Yt.Buffer.from("06 05 2B 81 04 00 0A".replace(/ /g,""),"hex")],["P-384",Yt.Buffer.from("06 05 2B 81 04 00 22".replace(/ /g,""),"hex")],["P-521",Yt.Buffer.from("06 05 2B 81 04 00 23".replace(/ /g,""),"hex")],["ecPublicKey",Yt.Buffer.from("06 07 2A 86 48 CE 3D 02 01".replace(/ /g,""),"hex")],["X25519",Yt.Buffer.from("06 03 2B 65 6E".replace(/ /g,""),"hex")],["X448",Yt.Buffer.from("06 03 2B 65 6F".replace(/ /g,""),"hex")],["Ed25519",Yt.Buffer.from("06 03 2B 65 70".replace(/ /g,""),"hex")],["Ed448",Yt.Buffer.from("06 03 2B 65 71".replace(/ /g,""),"hex")]]),h3=class{constructor(){this.length=0,this.elements=[]}oidFor(e){let r=gue.get(e);if(!r)throw new cue.JOSENotSupported("Invalid or unsupported OID");this.elements.push(r),this.length+=r.length}zero(){this.elements.push(t0,Yt.Buffer.from([1]),d3),this.length+=3}one(){this.elements.push(t0,Yt.Buffer.from([1]),Yt.Buffer.from([1])),this.length+=3}unsignedInteger(e){if(e[0]&128){let r=pa(e.length+1);this.elements.push(t0,r,d3,e),this.length+=2+r.length+e.length}else{let r=0;for(;e[r]===0&&(e[r+1]&128)===0;)r++;let n=pa(e.length-r);this.elements.push(t0,pa(e.length-r),e.slice(r)),this.length+=1+n.length+e.length-r}}octStr(e){let r=pa(e.length);this.elements.push(yue,pa(e.length),e),this.length+=1+r.length+e.length}bitStr(e){let r=pa(e.length+1);this.elements.push(fue,pa(e.length+1),d3,e),this.length+=1+r.length+e.length+1}add(e){this.elements.push(e),this.length+=e.length}end(e=mue){let r=pa(this.length);return Yt.Buffer.concat([e,r,...this.elements],1+r.length+this.length)}};f3.default=h3});var Z1=m(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.jwkImport=Ni.jwkExport=Ni.rsaPssParams=Ni.oneShotCallback=void 0;var[da,r0]=process.versions.node.split(".").map(t=>parseInt(t,10));Ni.oneShotCallback=da>=16||da===15&&r0>=13;Ni.rsaPssParams=!("electron"in process.versions)&&(da>=17||da===16&&r0>=9);Ni.jwkExport=da>=16||da===15&&r0>=9;Ni.jwkImport=da>=16||da===15&&r0>=12});var rI=m(m3=>{"use strict";Object.defineProperty(m3,"__esModule",{value:!0});var _r=require("buffer"),ho=require("crypto"),_ue=Gr(),Eue=fe(),tI=H1(),bue=J1(),Zs=eI(),Sue=Z1(),wue=t=>{if(Sue.jwkImport&&t.kty!=="oct")return t.d?(0,ho.createPrivateKey)({format:"jwk",key:t}):(0,ho.createPublicKey)({format:"jwk",key:t});switch(t.kty){case"oct":return(0,ho.createSecretKey)((0,_ue.decode)(t.k));case"RSA":{let e=new Zs.default,r=t.d!==void 0,n=_r.Buffer.from(t.n,"base64"),s=_r.Buffer.from(t.e,"base64");r?(e.zero(),e.unsignedInteger(n),e.unsignedInteger(s),e.unsignedInteger(_r.Buffer.from(t.d,"base64")),e.unsignedInteger(_r.Buffer.from(t.p,"base64")),e.unsignedInteger(_r.Buffer.from(t.q,"base64")),e.unsignedInteger(_r.Buffer.from(t.dp,"base64")),e.unsignedInteger(_r.Buffer.from(t.dq,"base64")),e.unsignedInteger(_r.Buffer.from(t.qi,"base64"))):(e.unsignedInteger(n),e.unsignedInteger(s));let o={key:e.end(),format:"der",type:"pkcs1"},a=r?(0,ho.createPrivateKey)(o):(0,ho.createPublicKey)(o);return(0,bue.setModulusLength)(a,n.length<<3),a}case"EC":{let e=new Zs.default,r=t.d!==void 0,n=_r.Buffer.concat([_r.Buffer.alloc(1,4),_r.Buffer.from(t.x,"base64"),_r.Buffer.from(t.y,"base64")]);if(r){e.zero();let a=new Zs.default;a.oidFor("ecPublicKey"),a.oidFor(t.crv),e.add(a.end());let u=new Zs.default;u.one(),u.octStr(_r.Buffer.from(t.d,"base64"));let c=new Zs.default;c.bitStr(n);let l=c.end(_r.Buffer.from([161]));u.add(l);let p=u.end(),d=new Zs.default;d.add(p);let h=d.end(_r.Buffer.from([4]));e.add(h);let f=e.end(),y=(0,ho.createPrivateKey)({key:f,format:"der",type:"pkcs8"});return(0,tI.setCurve)(y,t.crv),y}let s=new Zs.default;s.oidFor("ecPublicKey"),s.oidFor(t.crv),e.add(s.end()),e.bitStr(n);let i=e.end(),o=(0,ho.createPublicKey)({key:i,format:"der",type:"spki"});return(0,tI.setCurve)(o,t.crv),o}case"OKP":{let e=new Zs.default;if(t.d!==void 0){e.zero();let i=new Zs.default;i.oidFor(t.crv),e.add(i.end());let o=new Zs.default;o.octStr(_r.Buffer.from(t.d,"base64"));let a=o.end(_r.Buffer.from([4]));e.add(a);let u=e.end();return(0,ho.createPrivateKey)({key:u,format:"der",type:"pkcs8"})}let n=new Zs.default;n.oidFor(t.crv),e.add(n.end()),e.bitStr(_r.Buffer.from(t.x,"base64"));let s=e.end();return(0,ho.createPublicKey)({key:s,format:"der",type:"spki"})}default:throw new Eue.JOSENotSupported('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}};m3.default=wue});var ed=m(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});ki.importJWK=ki.importPKCS8=ki.importX509=ki.importSPKI=void 0;var Aue=Gr(),y3=e0(),nI=rI(),sI=fe(),Oue=xn();async function Cue(t,e,r){if(typeof t!="string"||t.indexOf("-----BEGIN PUBLIC KEY-----")!==0)throw new TypeError('"spki" must be SPKI formatted string');return(0,y3.fromSPKI)(t,e,r)}ki.importSPKI=Cue;async function vue(t,e,r){if(typeof t!="string"||t.indexOf("-----BEGIN CERTIFICATE-----")!==0)throw new TypeError('"x509" must be X.509 formatted string');return(0,y3.fromX509)(t,e,r)}ki.importX509=vue;async function xue(t,e,r){if(typeof t!="string"||t.indexOf("-----BEGIN PRIVATE KEY-----")!==0)throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return(0,y3.fromPKCS8)(t,e,r)}ki.importPKCS8=xue;async function Tue(t,e,r){var n;if(!(0,Oue.default)(t))throw new TypeError("JWK must be an object");switch(e||(e=t.alg),t.kty){case"oct":if(typeof t.k!="string"||!t.k)throw new TypeError('missing "k" (Key Value) Parameter value');return r??(r=t.ext!==!0),r?(0,nI.default)({...t,alg:e,ext:(n=t.ext)!==null&&n!==void 0?n:!1}):(0,Aue.decode)(t.k);case"RSA":if(t.oth!==void 0)throw new sI.JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return(0,nI.default)({...t,alg:e});default:throw new sI.JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}ki.importJWK=Tue});var td=m(g3=>{"use strict";Object.defineProperty(g3,"__esModule",{value:!0});var iI=Os(),Ri=Cs(),Due=(t,e)=>{if(!(e instanceof Uint8Array)){if(!(0,Ri.default)(e))throw new TypeError((0,iI.withAlg)(t,e,...Ri.types,"Uint8Array"));if(e.type!=="secret")throw new TypeError(`${Ri.types.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}},Mue=(t,e,r)=>{if(!(0,Ri.default)(e))throw new TypeError((0,iI.withAlg)(t,e,...Ri.types));if(e.type==="secret")throw new TypeError(`${Ri.types.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if(r==="sign"&&e.type==="public")throw new TypeError(`${Ri.types.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if(r==="decrypt"&&e.type==="public")throw new TypeError(`${Ri.types.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(e.algorithm&&r==="verify"&&e.type==="private")throw new TypeError(`${Ri.types.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(e.algorithm&&r==="encrypt"&&e.type==="private")throw new TypeError(`${Ri.types.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)},Pue=(t,e,r)=>{t.startsWith("HS")||t==="dir"||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?Due(t,e):Mue(t,e,r)};g3.default=Pue});var S3=m(b3=>{"use strict";Object.defineProperty(b3,"__esModule",{value:!0});var _3=require("crypto"),Bue=Lw(),Iue=zw(),Nue=Dt(),kue=Gw(),Rue=As(),Fue=ca(),oI=ws(),$ue=Os(),E3=fe(),aI=Hm(),que=Cs();function jue(t,e,r,n,s){let i=parseInt(t.slice(1,4),10);(0,oI.default)(r)&&(r=r.export());let o=r.subarray(i>>3),a=r.subarray(0,i>>3),u=`aes-${i}-cbc`;if(!(0,aI.default)(u))throw new E3.JOSENotSupported(`alg ${t} is not supported by your javascript runtime`);let c=(0,_3.createCipheriv)(u,o,n),l=(0,Nue.concat)(c.update(e),c.final()),p=parseInt(t.slice(-3),10),d=(0,kue.default)(s,n,l,p,a,i);return{ciphertext:l,tag:d}}function Lue(t,e,r,n,s){let o=`aes-${parseInt(t.slice(1,4),10)}-gcm`;if(!(0,aI.default)(o))throw new E3.JOSENotSupported(`alg ${t} is not supported by your javascript runtime`);let a=(0,_3.createCipheriv)(o,r,n,{authTagLength:16});s.byteLength&&a.setAAD(s,{plaintextLength:e.length});let u=a.update(e);a.final();let c=a.getAuthTag();return{ciphertext:u,tag:c}}var Uue=(t,e,r,n,s)=>{let i;if((0,Rue.isCryptoKey)(r))(0,Fue.checkEncCryptoKey)(r,t,"encrypt"),i=_3.KeyObject.from(r);else if(r instanceof Uint8Array||(0,oI.default)(r))i=r;else throw new TypeError((0,$ue.default)(r,...que.types,"Uint8Array"));switch((0,Iue.default)(t,i),(0,Bue.default)(t,n),t){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return jue(t,e,i,n,s);case"A128GCM":case"A192GCM":case"A256GCM":return Lue(t,e,i,n,s);default:throw new E3.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}};b3.default=Uue});var w3=m(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.unwrap=bl.wrap=void 0;var Vue=S3(),Wue=Zw(),zue=zm(),uI=Gr();async function Kue(t,e,r,n){let s=t.slice(0,7);n||(n=(0,zue.default)(s));let{ciphertext:i,tag:o}=await(0,Vue.default)(s,r,e,n,new Uint8Array(0));return{encryptedKey:i,iv:(0,uI.encode)(n),tag:(0,uI.encode)(o)}}bl.wrap=Kue;async function Hue(t,e,r,n,s){let i=t.slice(0,7);return(0,Wue.default)(i,e,r,n,s,new Uint8Array(0))}bl.unwrap=Hue});var pI=m(A3=>{"use strict";Object.defineProperty(A3,"__esModule",{value:!0});var cI=Ym(),lI=u3(),Gue=l3(),Jue=p3(),rd=Gr(),Mt=fe(),Yue=X1(),Que=ed(),Xue=td(),Zue=xn(),ece=w3();async function tce(t,e,r,n,s){switch((0,Xue.default)(t,e,"decrypt"),t){case"dir":{if(r!==void 0)throw new Mt.JWEInvalid("Encountered unexpected JWE Encrypted Key");return e}case"ECDH-ES":if(r!==void 0)throw new Mt.JWEInvalid("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!(0,Zue.default)(n.epk))throw new Mt.JWEInvalid('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!lI.ecdhAllowed(e))throw new Mt.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let i=await(0,Que.importJWK)(n.epk,t),o,a;if(n.apu!==void 0){if(typeof n.apu!="string")throw new Mt.JWEInvalid('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{o=(0,rd.decode)(n.apu)}catch{throw new Mt.JWEInvalid("Failed to base64url decode the apu")}}if(n.apv!==void 0){if(typeof n.apv!="string")throw new Mt.JWEInvalid('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{a=(0,rd.decode)(n.apv)}catch{throw new Mt.JWEInvalid("Failed to base64url decode the apv")}}let u=await lI.deriveKey(i,e,t==="ECDH-ES"?n.enc:t,t==="ECDH-ES"?(0,Yue.bitLength)(n.enc):parseInt(t.slice(-5,-2),10),o,a);if(t==="ECDH-ES")return u;if(r===void 0)throw new Mt.JWEInvalid("JWE Encrypted Key missing");return(0,cI.unwrap)(t.slice(-6),u,r)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(r===void 0)throw new Mt.JWEInvalid("JWE Encrypted Key missing");return(0,Jue.decrypt)(t,e,r)}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{if(r===void 0)throw new Mt.JWEInvalid("JWE Encrypted Key missing");if(typeof n.p2c!="number")throw new Mt.JWEInvalid('JOSE Header "p2c" (PBES2 Count) missing or invalid');let i=s?.maxPBES2Count||1e4;if(n.p2c>i)throw new Mt.JWEInvalid('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if(typeof n.p2s!="string")throw new Mt.JWEInvalid('JOSE Header "p2s" (PBES2 Salt) missing or invalid');let o;try{o=(0,rd.decode)(n.p2s)}catch{throw new Mt.JWEInvalid("Failed to base64url decode the p2s")}return(0,Gue.decrypt)(t,e,r,n.p2c,o)}case"A128KW":case"A192KW":case"A256KW":{if(r===void 0)throw new Mt.JWEInvalid("JWE Encrypted Key missing");return(0,cI.unwrap)(t,e,r)}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{if(r===void 0)throw new Mt.JWEInvalid("JWE Encrypted Key missing");if(typeof n.iv!="string")throw new Mt.JWEInvalid('JOSE Header "iv" (Initialization Vector) missing or invalid');if(typeof n.tag!="string")throw new Mt.JWEInvalid('JOSE Header "tag" (Authentication Tag) missing or invalid');let i;try{i=(0,rd.decode)(n.iv)}catch{throw new Mt.JWEInvalid("Failed to base64url decode the iv")}let o;try{o=(0,rd.decode)(n.tag)}catch{throw new Mt.JWEInvalid("Failed to base64url decode the tag")}return(0,ece.unwrap)(t,e,r,i,o)}default:throw new Mt.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}}A3.default=tce});var Sl=m(O3=>{"use strict";Object.defineProperty(O3,"__esModule",{value:!0});var rce=fe();function nce(t,e,r,n,s){if(s.crit!==void 0&&n.crit===void 0)throw new t('"crit" (Critical) Header Parameter MUST be integrity protected');if(!n||n.crit===void 0)return new Set;if(!Array.isArray(n.crit)||n.crit.length===0||n.crit.some(o=>typeof o!="string"||o.length===0))throw new t('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let i;r!==void 0?i=new Map([...Object.entries(r),...e.entries()]):i=e;for(let o of n.crit){if(!i.has(o))throw new rce.JOSENotSupported(`Extension Header Parameter "${o}" is not recognized`);if(s[o]===void 0)throw new t(`Extension Header Parameter "${o}" is missing`);if(i.get(o)&&n[o]===void 0)throw new t(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(n.crit)}O3.default=nce});var v3=m(C3=>{"use strict";Object.defineProperty(C3,"__esModule",{value:!0});var sce=(t,e)=>{if(e!==void 0&&(!Array.isArray(e)||e.some(r=>typeof r!="string")))throw new TypeError(`"${t}" option must be an array of strings`);if(e)return new Set(e)};C3.default=sce});var s0=m(n0=>{"use strict";Object.defineProperty(n0,"__esModule",{value:!0});n0.flattenedDecrypt=void 0;var wl=Gr(),ice=Zw(),oce=e3(),ot=fe(),ace=yl(),x3=xn(),uce=pI(),nd=Dt(),cce=X1(),lce=Sl(),dI=v3();async function pce(t,e,r){var n;if(!(0,x3.default)(t))throw new ot.JWEInvalid("Flattened JWE must be an object");if(t.protected===void 0&&t.header===void 0&&t.unprotected===void 0)throw new ot.JWEInvalid("JOSE Header missing");if(typeof t.iv!="string")throw new ot.JWEInvalid("JWE Initialization Vector missing or incorrect type");if(typeof t.ciphertext!="string")throw new ot.JWEInvalid("JWE Ciphertext missing or incorrect type");if(typeof t.tag!="string")throw new ot.JWEInvalid("JWE Authentication Tag missing or incorrect type");if(t.protected!==void 0&&typeof t.protected!="string")throw new ot.JWEInvalid("JWE Protected Header incorrect type");if(t.encrypted_key!==void 0&&typeof t.encrypted_key!="string")throw new ot.JWEInvalid("JWE Encrypted Key incorrect type");if(t.aad!==void 0&&typeof t.aad!="string")throw new ot.JWEInvalid("JWE AAD incorrect type");if(t.header!==void 0&&!(0,x3.default)(t.header))throw new ot.JWEInvalid("JWE Shared Unprotected Header incorrect type");if(t.unprotected!==void 0&&!(0,x3.default)(t.unprotected))throw new ot.JWEInvalid("JWE Per-Recipient Unprotected Header incorrect type");let s;if(t.protected)try{let E=(0,wl.decode)(t.protected);s=JSON.parse(nd.decoder.decode(E))}catch{throw new ot.JWEInvalid("JWE Protected Header is invalid")}if(!(0,ace.default)(s,t.header,t.unprotected))throw new ot.JWEInvalid("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let i={...s,...t.header,...t.unprotected};if((0,lce.default)(ot.JWEInvalid,new Map,r?.crit,s,i),i.zip!==void 0){if(!s||!s.zip)throw new ot.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(i.zip!=="DEF")throw new ot.JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:o,enc:a}=i;if(typeof o!="string"||!o)throw new ot.JWEInvalid("missing JWE Algorithm (alg) in JWE Header");if(typeof a!="string"||!a)throw new ot.JWEInvalid("missing JWE Encryption Algorithm (enc) in JWE Header");let u=r&&(0,dI.default)("keyManagementAlgorithms",r.keyManagementAlgorithms),c=r&&(0,dI.default)("contentEncryptionAlgorithms",r.contentEncryptionAlgorithms);if(u&&!u.has(o))throw new ot.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(c&&!c.has(a))throw new ot.JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter not allowed');let l;if(t.encrypted_key!==void 0)try{l=(0,wl.decode)(t.encrypted_key)}catch{throw new ot.JWEInvalid("Failed to base64url decode the encrypted_key")}let p=!1;typeof e=="function"&&(e=await e(s,t),p=!0);let d;try{d=await(0,uce.default)(o,e,l,i,r)}catch(E){if(E instanceof TypeError||E instanceof ot.JWEInvalid||E instanceof ot.JOSENotSupported)throw E;d=(0,cce.default)(a)}let h,f;try{h=(0,wl.decode)(t.iv)}catch{throw new ot.JWEInvalid("Failed to base64url decode the iv")}try{f=(0,wl.decode)(t.tag)}catch{throw new ot.JWEInvalid("Failed to base64url decode the tag")}let y=nd.encoder.encode((n=t.protected)!==null&&n!==void 0?n:""),g;t.aad!==void 0?g=(0,nd.concat)(y,nd.encoder.encode("."),nd.encoder.encode(t.aad)):g=y;let _;try{_=(0,wl.decode)(t.ciphertext)}catch{throw new ot.JWEInvalid("Failed to base64url decode the ciphertext")}let S=await(0,ice.default)(a,d,_,h,f,g);i.zip==="DEF"&&(S=await(r?.inflateRaw||oce.inflate)(S));let O={plaintext:S};if(t.protected!==void 0&&(O.protectedHeader=s),t.aad!==void 0)try{O.additionalAuthenticatedData=(0,wl.decode)(t.aad)}catch{throw new ot.JWEInvalid("Failed to base64url decode the aad")}return t.unprotected!==void 0&&(O.sharedUnprotectedHeader=t.unprotected),t.header!==void 0&&(O.unprotectedHeader=t.header),p?{...O,key:e}:O}n0.flattenedDecrypt=pce});var T3=m(i0=>{"use strict";Object.defineProperty(i0,"__esModule",{value:!0});i0.compactDecrypt=void 0;var dce=s0(),hI=fe(),hce=Dt();async function fce(t,e,r){if(t instanceof Uint8Array&&(t=hce.decoder.decode(t)),typeof t!="string")throw new hI.JWEInvalid("Compact JWE must be a string or Uint8Array");let{0:n,1:s,2:i,3:o,4:a,length:u}=t.split(".");if(u!==5)throw new hI.JWEInvalid("Invalid Compact JWE");let c=await(0,dce.flattenedDecrypt)({ciphertext:o,iv:i||void 0,protected:n||void 0,tag:a||void 0,encrypted_key:s||void 0},e,r),l={plaintext:c.plaintext,protectedHeader:c.protectedHeader};return typeof e=="function"?{...l,key:c.key}:l}i0.compactDecrypt=fce});var mI=m(a0=>{"use strict";Object.defineProperty(a0,"__esModule",{value:!0});a0.generalDecrypt=void 0;var mce=s0(),o0=fe(),fI=xn();async function yce(t,e,r){if(!(0,fI.default)(t))throw new o0.JWEInvalid("General JWE must be an object");if(!Array.isArray(t.recipients)||!t.recipients.every(fI.default))throw new o0.JWEInvalid("JWE Recipients missing or incorrect type");if(!t.recipients.length)throw new o0.JWEInvalid("JWE Recipients has no members");for(let n of t.recipients)try{return await(0,mce.flattenedDecrypt)({aad:t.aad,ciphertext:t.ciphertext,encrypted_key:n.encrypted_key,header:n.header,iv:t.iv,protected:t.protected,tag:t.tag,unprotected:t.unprotected},e,r)}catch{}throw new o0.JWEDecryptionFailed}a0.generalDecrypt=yce});var yI=m(M3=>{"use strict";Object.defineProperty(M3,"__esModule",{value:!0});var gce=2,_ce=48,D3=class{constructor(e){if(e[0]!==_ce)throw new TypeError;if(this.buffer=e,this.offset=1,this.decodeLength()!==e.length-this.offset)throw new TypeError}decodeLength(){let e=this.buffer[this.offset++];if(e&128){let r=e&-129;e=0;for(let n=0;n<r;n++)e=e<<8|this.buffer[this.offset+n];this.offset+=r}return e}unsignedInteger(){if(this.buffer[this.offset++]!==gce)throw new TypeError;let e=this.decodeLength();this.buffer[this.offset]===0&&(this.offset++,e--);let r=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,r}end(){if(this.offset!==this.buffer.length)throw new TypeError}};M3.default=D3});var gI=m(B3=>{"use strict";Object.defineProperty(B3,"__esModule",{value:!0});var u0=require("crypto"),vr=Gr(),Ece=yI(),c0=fe(),P3=H1(),bce=As(),Sce=ws(),wce=Os(),Ace=Cs(),Oce=Z1(),l0=t=>{let e;if((0,bce.isCryptoKey)(t)){if(!t.extractable)throw new TypeError("CryptoKey is not extractable");e=u0.KeyObject.from(t)}else if((0,Sce.default)(t))e=t;else{if(t instanceof Uint8Array)return{kty:"oct",k:(0,vr.encode)(t)};throw new TypeError((0,wce.default)(t,...Ace.types,"Uint8Array"))}if(Oce.jwkExport){if(e.type!=="secret"&&!["rsa","ec","ed25519","x25519","ed448","x448"].includes(e.asymmetricKeyType))throw new c0.JOSENotSupported("Unsupported key asymmetricKeyType");return e.export({format:"jwk"})}switch(e.type){case"secret":return{kty:"oct",k:(0,vr.encode)(e.export())};case"private":case"public":switch(e.asymmetricKeyType){case"rsa":{let r=e.export({format:"der",type:"pkcs1"}),n=new Ece.default(r);e.type==="private"&&n.unsignedInteger();let s=(0,vr.encode)(n.unsignedInteger()),i=(0,vr.encode)(n.unsignedInteger()),o;return e.type==="private"&&(o={d:(0,vr.encode)(n.unsignedInteger()),p:(0,vr.encode)(n.unsignedInteger()),q:(0,vr.encode)(n.unsignedInteger()),dp:(0,vr.encode)(n.unsignedInteger()),dq:(0,vr.encode)(n.unsignedInteger()),qi:(0,vr.encode)(n.unsignedInteger())}),n.end(),{kty:"RSA",n:s,e:i,...o}}case"ec":{let r=(0,P3.default)(e),n,s,i;switch(r){case"secp256k1":n=64,s=33,i=-1;break;case"P-256":n=64,s=36,i=-1;break;case"P-384":n=96,s=35,i=-3;break;case"P-521":n=132,s=35,i=-3;break;default:throw new c0.JOSENotSupported("Unsupported curve")}if(e.type==="public"){let a=e.export({type:"spki",format:"der"});return{kty:"EC",crv:r,x:(0,vr.encode)(a.subarray(-n,-n/2)),y:(0,vr.encode)(a.subarray(-n/2))}}let o=e.export({type:"pkcs8",format:"der"});return o.length<100&&(s+=i),{...l0((0,u0.createPublicKey)(e)),d:(0,vr.encode)(o.subarray(s,s+n/2))}}case"ed25519":case"x25519":{let r=(0,P3.default)(e);if(e.type==="public"){let s=e.export({type:"spki",format:"der"});return{kty:"OKP",crv:r,x:(0,vr.encode)(s.subarray(-32))}}let n=e.export({type:"pkcs8",format:"der"});return{...l0((0,u0.createPublicKey)(e)),d:(0,vr.encode)(n.subarray(-32))}}case"ed448":case"x448":{let r=(0,P3.default)(e);if(e.type==="public"){let s=e.export({type:"spki",format:"der"});return{kty:"OKP",crv:r,x:(0,vr.encode)(s.subarray(r==="Ed448"?-57:-56))}}let n=e.export({type:"pkcs8",format:"der"});return{...l0((0,u0.createPublicKey)(e)),d:(0,vr.encode)(n.subarray(r==="Ed448"?-57:-56))}}default:throw new c0.JOSENotSupported("Unsupported key asymmetricKeyType")}default:throw new c0.JOSENotSupported("Unsupported key type")}};B3.default=l0});var I3=m(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.exportJWK=ha.exportPKCS8=ha.exportSPKI=void 0;var Cce=e0(),vce=e0(),xce=gI();async function Tce(t){return(0,Cce.toSPKI)(t)}ha.exportSPKI=Tce;async function Dce(t){return(0,vce.toPKCS8)(t)}ha.exportPKCS8=Dce;async function Mce(t){return(0,xce.default)(t)}ha.exportJWK=Mce});var R3=m(k3=>{"use strict";Object.defineProperty(k3,"__esModule",{value:!0});var _I=Ym(),N3=u3(),Pce=l3(),Bce=p3(),EI=Gr(),Al=X1(),bI=fe(),Ice=I3(),Nce=td(),kce=w3();async function Rce(t,e,r,n,s={}){let i,o,a;switch((0,Nce.default)(t,r,"encrypt"),t){case"dir":{a=r;break}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!N3.ecdhAllowed(r))throw new bI.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:u,apv:c}=s,{epk:l}=s;l||(l=(await N3.generateEpk(r)).privateKey);let{x:p,y:d,crv:h,kty:f}=await(0,Ice.exportJWK)(l),y=await N3.deriveKey(r,l,t==="ECDH-ES"?e:t,t==="ECDH-ES"?(0,Al.bitLength)(e):parseInt(t.slice(-5,-2),10),u,c);if(o={epk:{x:p,crv:h,kty:f}},f==="EC"&&(o.epk.y=d),u&&(o.apu=(0,EI.encode)(u)),c&&(o.apv=(0,EI.encode)(c)),t==="ECDH-ES"){a=y;break}a=n||(0,Al.default)(e);let g=t.slice(-6);i=await(0,_I.wrap)(g,y,a);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{a=n||(0,Al.default)(e),i=await(0,Bce.encrypt)(t,r,a);break}case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{a=n||(0,Al.default)(e);let{p2c:u,p2s:c}=s;({encryptedKey:i,...o}=await(0,Pce.encrypt)(t,r,a,u,c));break}case"A128KW":case"A192KW":case"A256KW":{a=n||(0,Al.default)(e),i=await(0,_I.wrap)(t,r,a);break}case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{a=n||(0,Al.default)(e);let{iv:u}=s;({encryptedKey:i,...o}=await(0,kce.wrap)(t,r,a,u));break}default:throw new bI.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:a,encryptedKey:i,parameters:o}}k3.default=Rce});var p0=m(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.FlattenedEncrypt=Cu.unprotected=void 0;var Ol=Gr(),SI=S3(),Fce=e3(),$ce=zm(),qce=R3(),Ou=fe(),jce=yl(),Cl=Dt(),Lce=Sl();Cu.unprotected=Symbol();var F3=class{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("plaintext must be an instance of Uint8Array");this._plaintext=e}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._sharedUnprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}async encrypt(e,r){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new Ou.JWEInvalid("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!(0,jce.default)(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new Ou.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let n={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if((0,Lce.default)(Ou.JWEInvalid,new Map,r?.crit,this._protectedHeader,n),n.zip!==void 0){if(!this._protectedHeader||!this._protectedHeader.zip)throw new Ou.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if(n.zip!=="DEF")throw new Ou.JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:s,enc:i}=n;if(typeof s!="string"||!s)throw new Ou.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(typeof i!="string"||!i)throw new Ou.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let o;if(s==="dir"){if(this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if(s==="ECDH-ES"&&this._cek)throw new TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");let a;{let f;({cek:a,encryptedKey:o,parameters:f}=await(0,qce.default)(s,i,e,this._cek,this._keyManagementParameters)),f&&(r&&Cu.unprotected in r?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...f}:this.setUnprotectedHeader(f):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...f}:this.setProtectedHeader(f))}this._iv||(this._iv=(0,$ce.default)(i));let u,c,l;this._protectedHeader?c=Cl.encoder.encode((0,Ol.encode)(JSON.stringify(this._protectedHeader))):c=Cl.encoder.encode(""),this._aad?(l=(0,Ol.encode)(this._aad),u=(0,Cl.concat)(c,Cl.encoder.encode("."),Cl.encoder.encode(l))):u=c;let p,d;if(n.zip==="DEF"){let f=await(r?.deflateRaw||Fce.deflate)(this._plaintext);({ciphertext:p,tag:d}=await(0,SI.default)(i,f,a,this._iv,u))}else({ciphertext:p,tag:d}=await(0,SI.default)(i,this._plaintext,a,this._iv,u));let h={ciphertext:(0,Ol.encode)(p),iv:(0,Ol.encode)(this._iv),tag:(0,Ol.encode)(d)};return o&&(h.encrypted_key=(0,Ol.encode)(o)),l&&(h.aad=l),this._protectedHeader&&(h.protected=Cl.decoder.decode(c)),this._sharedUnprotectedHeader&&(h.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(h.header=this._unprotectedHeader),h}};Cu.FlattenedEncrypt=F3});var wI=m(d0=>{"use strict";Object.defineProperty(d0,"__esModule",{value:!0});d0.GeneralEncrypt=void 0;var $3=p0(),fa=fe(),Uce=X1(),Vce=yl(),Wce=R3(),zce=Gr(),Kce=Sl(),q3=class{constructor(e,r,n){this.parent=e,this.key=r,this.options=n}setUnprotectedHeader(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addRecipient(...e){return this.parent.addRecipient(...e)}encrypt(...e){return this.parent.encrypt(...e)}done(){return this.parent}},j3=class{constructor(e){this._recipients=[],this._plaintext=e}addRecipient(e,r){let n=new q3(this,e,{crit:r?.crit});return this._recipients.push(n),n}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setSharedUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}setAdditionalAuthenticatedData(e){return this._aad=e,this}async encrypt(e){var r,n,s;if(!this._recipients.length)throw new fa.JWEInvalid("at least one recipient must be added");if(e={deflateRaw:e?.deflateRaw},this._recipients.length===1){let[u]=this._recipients,c=await new $3.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(u.unprotectedHeader).encrypt(u.key,{...u.options,...e}),l={ciphertext:c.ciphertext,iv:c.iv,recipients:[{}],tag:c.tag};return c.aad&&(l.aad=c.aad),c.protected&&(l.protected=c.protected),c.unprotected&&(l.unprotected=c.unprotected),c.encrypted_key&&(l.recipients[0].encrypted_key=c.encrypted_key),c.header&&(l.recipients[0].header=c.header),l}let i;for(let u=0;u<this._recipients.length;u++){let c=this._recipients[u];if(!(0,Vce.default)(this._protectedHeader,this._unprotectedHeader,c.unprotectedHeader))throw new fa.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let l={...this._protectedHeader,...this._unprotectedHeader,...c.unprotectedHeader},{alg:p}=l;if(typeof p!="string"||!p)throw new fa.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if(p==="dir"||p==="ECDH-ES")throw new fa.JWEInvalid('"dir" and "ECDH-ES" alg may only be used with a single recipient');if(typeof l.enc!="string"||!l.enc)throw new fa.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(!i)i=l.enc;else if(i!==l.enc)throw new fa.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients');if((0,Kce.default)(fa.JWEInvalid,new Map,c.options.crit,this._protectedHeader,l),l.zip!==void 0&&(!this._protectedHeader||!this._protectedHeader.zip))throw new fa.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}let o=(0,Uce.default)(i),a={ciphertext:"",iv:"",recipients:[],tag:""};for(let u=0;u<this._recipients.length;u++){let c=this._recipients[u],l={};a.recipients.push(l);let d={...this._protectedHeader,...this._unprotectedHeader,...c.unprotectedHeader}.alg.startsWith("PBES2")?2048+u:void 0;if(u===0){let y=await new $3.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(o).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(c.unprotectedHeader).setKeyManagementParameters({p2c:d}).encrypt(c.key,{...c.options,...e,[$3.unprotected]:!0});a.ciphertext=y.ciphertext,a.iv=y.iv,a.tag=y.tag,y.aad&&(a.aad=y.aad),y.protected&&(a.protected=y.protected),y.unprotected&&(a.unprotected=y.unprotected),l.encrypted_key=y.encrypted_key,y.header&&(l.header=y.header);continue}let{encryptedKey:h,parameters:f}=await(0,Wce.default)(((r=c.unprotectedHeader)===null||r===void 0?void 0:r.alg)||((n=this._protectedHeader)===null||n===void 0?void 0:n.alg)||((s=this._unprotectedHeader)===null||s===void 0?void 0:s.alg),i,c.key,o,{p2c:d});l.encrypted_key=(0,zce.encode)(h),(c.unprotectedHeader||f)&&(l.header={...c.unprotectedHeader,...f})}return a}};d0.GeneralEncrypt=j3});var U3=m(L3=>{"use strict";Object.defineProperty(L3,"__esModule",{value:!0});var Hce=fe();function Gce(t){switch(t){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"EdDSA":return;default:throw new Hce.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}L3.default=Gce});var z3=m(W3=>{"use strict";Object.defineProperty(W3,"__esModule",{value:!0});var AI=require("crypto"),Jce=H1(),Yce=fe(),V3=J1(),vl=Z1(),OI={padding:AI.constants.RSA_PKCS1_PSS_PADDING,saltLength:AI.constants.RSA_PSS_SALTLEN_DIGEST},Qce=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);function Xce(t,e){switch(t){case"EdDSA":if(!["ed25519","ed448"].includes(e.asymmetricKeyType))throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");return e;case"RS256":case"RS384":case"RS512":if(e.asymmetricKeyType!=="rsa")throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,V3.default)(e,t),e;case(vl.rsaPssParams&&"PS256"):case(vl.rsaPssParams&&"PS384"):case(vl.rsaPssParams&&"PS512"):if(e.asymmetricKeyType==="rsa-pss"){let{hashAlgorithm:r,mgf1HashAlgorithm:n,saltLength:s}=e.asymmetricKeyDetails,i=parseInt(t.slice(-3),10);if(r!==void 0&&(r!==`sha${i}`||n!==r))throw new TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${t}`);if(s!==void 0&&s>i>>3)throw new TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${t}`)}else if(e.asymmetricKeyType!=="rsa")throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");return(0,V3.default)(e,t),{key:e,...OI};case(!vl.rsaPssParams&&"PS256"):case(!vl.rsaPssParams&&"PS384"):case(!vl.rsaPssParams&&"PS512"):if(e.asymmetricKeyType!=="rsa")throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,V3.default)(e,t),{key:e,...OI};case"ES256":case"ES256K":case"ES384":case"ES512":{if(e.asymmetricKeyType!=="ec")throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let r=(0,Jce.default)(e),n=Qce.get(t);if(r!==n)throw new TypeError(`Invalid key curve for the algorithm, its curve must be ${n}, got ${r}`);return{dsaEncoding:"ieee-p1363",key:e}}default:throw new Yce.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}W3.default=Xce});var CI=m(K3=>{"use strict";Object.defineProperty(K3,"__esModule",{value:!0});var Zce=fe();function ele(t){switch(t){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new Zce.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`)}}K3.default=ele});var J3=m(G3=>{"use strict";Object.defineProperty(G3,"__esModule",{value:!0});var H3=require("crypto"),tle=As(),rle=ca(),vI=Os(),xI=Cs();function nle(t,e,r){if(e instanceof Uint8Array){if(!t.startsWith("HS"))throw new TypeError((0,vI.default)(e,...xI.types));return(0,H3.createSecretKey)(e)}if(e instanceof H3.KeyObject)return e;if((0,tle.isCryptoKey)(e))return(0,rle.checkSigCryptoKey)(e,t,r),H3.KeyObject.from(e);throw new TypeError((0,vI.default)(e,...xI.types,"Uint8Array"))}G3.default=nle});var X3=m(Q3=>{"use strict";Object.defineProperty(Q3,"__esModule",{value:!0});var h0=require("crypto"),sle=require("util"),ile=U3(),ole=CI(),ale=z3(),ule=J3(),Y3;h0.sign.length>3?Y3=(0,sle.promisify)(h0.sign):Y3=h0.sign;var cle=async(t,e,r)=>{let n=(0,ule.default)(t,e,"sign");if(t.startsWith("HS")){let s=h0.createHmac((0,ole.default)(t),n);return s.update(r),s.digest()}return Y3((0,ile.default)(t),r,(0,ale.default)(t,n))};Q3.default=cle});var TI=m(eA=>{"use strict";Object.defineProperty(eA,"__esModule",{value:!0});var f0=require("crypto"),lle=require("util"),ple=U3(),dle=z3(),hle=X3(),fle=J3(),mle=Z1(),Z3;f0.verify.length>4&&mle.oneShotCallback?Z3=(0,lle.promisify)(f0.verify):Z3=f0.verify;var yle=async(t,e,r,n)=>{let s=(0,fle.default)(t,e,"verify");if(t.startsWith("HS")){let a=await(0,hle.default)(t,s,n),u=r;try{return f0.timingSafeEqual(u,a)}catch{return!1}}let i=(0,ple.default)(t),o=(0,dle.default)(t,s);try{return await Z3(i,n,o,r)}catch{return!1}};eA.default=yle});var y0=m(m0=>{"use strict";Object.defineProperty(m0,"__esModule",{value:!0});m0.flattenedVerify=void 0;var tA=Gr(),gle=TI(),xr=fe(),xl=Dt(),_le=yl(),DI=xn(),Ele=td(),ble=Sl(),Sle=v3();async function wle(t,e,r){var n;if(!(0,DI.default)(t))throw new xr.JWSInvalid("Flattened JWS must be an object");if(t.protected===void 0&&t.header===void 0)throw new xr.JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');if(t.protected!==void 0&&typeof t.protected!="string")throw new xr.JWSInvalid("JWS Protected Header incorrect type");if(t.payload===void 0)throw new xr.JWSInvalid("JWS Payload missing");if(typeof t.signature!="string")throw new xr.JWSInvalid("JWS Signature missing or incorrect type");if(t.header!==void 0&&!(0,DI.default)(t.header))throw new xr.JWSInvalid("JWS Unprotected Header incorrect type");let s={};if(t.protected)try{let g=(0,tA.decode)(t.protected);s=JSON.parse(xl.decoder.decode(g))}catch{throw new xr.JWSInvalid("JWS Protected Header is invalid")}if(!(0,_le.default)(s,t.header))throw new xr.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let i={...s,...t.header},o=(0,ble.default)(xr.JWSInvalid,new Map([["b64",!0]]),r?.crit,s,i),a=!0;if(o.has("b64")&&(a=s.b64,typeof a!="boolean"))throw new xr.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:u}=i;if(typeof u!="string"||!u)throw new xr.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');let c=r&&(0,Sle.default)("algorithms",r.algorithms);if(c&&!c.has(u))throw new xr.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(a){if(typeof t.payload!="string")throw new xr.JWSInvalid("JWS Payload must be a string")}else if(typeof t.payload!="string"&&!(t.payload instanceof Uint8Array))throw new xr.JWSInvalid("JWS Payload must be a string or an Uint8Array instance");let l=!1;typeof e=="function"&&(e=await e(s,t),l=!0),(0,Ele.default)(u,e,"verify");let p=(0,xl.concat)(xl.encoder.encode((n=t.protected)!==null&&n!==void 0?n:""),xl.encoder.encode("."),typeof t.payload=="string"?xl.encoder.encode(t.payload):t.payload),d;try{d=(0,tA.decode)(t.signature)}catch{throw new xr.JWSInvalid("Failed to base64url decode the signature")}if(!await(0,gle.default)(u,e,d,p))throw new xr.JWSSignatureVerificationFailed;let f;if(a)try{f=(0,tA.decode)(t.payload)}catch{throw new xr.JWSInvalid("Failed to base64url decode the payload")}else typeof t.payload=="string"?f=xl.encoder.encode(t.payload):f=t.payload;let y={payload:f};return t.protected!==void 0&&(y.protectedHeader=s),t.header!==void 0&&(y.unprotectedHeader=t.header),l?{...y,key:e}:y}m0.flattenedVerify=wle});var rA=m(g0=>{"use strict";Object.defineProperty(g0,"__esModule",{value:!0});g0.compactVerify=void 0;var Ale=y0(),MI=fe(),Ole=Dt();async function Cle(t,e,r){if(t instanceof Uint8Array&&(t=Ole.decoder.decode(t)),typeof t!="string")throw new MI.JWSInvalid("Compact JWS must be a string or Uint8Array");let{0:n,1:s,2:i,length:o}=t.split(".");if(o!==3)throw new MI.JWSInvalid("Invalid Compact JWS");let a=await(0,Ale.flattenedVerify)({payload:s,protected:n,signature:i},e,r),u={payload:a.payload,protectedHeader:a.protectedHeader};return typeof e=="function"?{...u,key:a.key}:u}g0.compactVerify=Cle});var BI=m(_0=>{"use strict";Object.defineProperty(_0,"__esModule",{value:!0});_0.generalVerify=void 0;var vle=y0(),nA=fe(),PI=xn();async function xle(t,e,r){if(!(0,PI.default)(t))throw new nA.JWSInvalid("General JWS must be an object");if(!Array.isArray(t.signatures)||!t.signatures.every(PI.default))throw new nA.JWSInvalid("JWS Signatures missing or incorrect type");for(let n of t.signatures)try{return await(0,vle.flattenedVerify)({header:n.header,payload:t.payload,protected:n.protected,signature:n.signature},e,r)}catch{}throw new nA.JWSSignatureVerificationFailed}_0.generalVerify=xle});var iA=m(sA=>{"use strict";Object.defineProperty(sA,"__esModule",{value:!0});sA.default=t=>Math.floor(t.getTime()/1e3)});var uA=m(aA=>{"use strict";Object.defineProperty(aA,"__esModule",{value:!0});var II=60,NI=II*60,oA=NI*24,Tle=oA*7,Dle=oA*365.25,Mle=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;aA.default=t=>{let e=Mle.exec(t);if(!e)throw new TypeError("Invalid time period format");let r=parseFloat(e[1]);switch(e[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(r);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(r*II);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(r*NI);case"day":case"days":case"d":return Math.round(r*oA);case"week":case"weeks":case"w":return Math.round(r*Tle);default:return Math.round(r*Dle)}}});var E0=m(cA=>{"use strict";Object.defineProperty(cA,"__esModule",{value:!0});var Xn=fe(),Ple=Dt(),Ble=iA(),kI=uA(),Ile=xn(),RI=t=>t.toLowerCase().replace(/^application\//,""),Nle=(t,e)=>typeof t=="string"?e.includes(t):Array.isArray(t)?e.some(Set.prototype.has.bind(new Set(t))):!1;cA.default=(t,e,r={})=>{let{typ:n}=r;if(n&&(typeof t.typ!="string"||RI(t.typ)!==RI(n)))throw new Xn.JWTClaimValidationFailed('unexpected "typ" JWT header value',"typ","check_failed");let s;try{s=JSON.parse(Ple.decoder.decode(e))}catch{}if(!(0,Ile.default)(s))throw new Xn.JWTInvalid("JWT Claims Set must be a top-level JSON object");let{requiredClaims:i=[],issuer:o,subject:a,audience:u,maxTokenAge:c}=r;c!==void 0&&i.push("iat"),u!==void 0&&i.push("aud"),a!==void 0&&i.push("sub"),o!==void 0&&i.push("iss");for(let h of new Set(i.reverse()))if(!(h in s))throw new Xn.JWTClaimValidationFailed(`missing required "${h}" claim`,h,"missing");if(o&&!(Array.isArray(o)?o:[o]).includes(s.iss))throw new Xn.JWTClaimValidationFailed('unexpected "iss" claim value',"iss","check_failed");if(a&&s.sub!==a)throw new Xn.JWTClaimValidationFailed('unexpected "sub" claim value',"sub","check_failed");if(u&&!Nle(s.aud,typeof u=="string"?[u]:u))throw new Xn.JWTClaimValidationFailed('unexpected "aud" claim value',"aud","check_failed");let l;switch(typeof r.clockTolerance){case"string":l=(0,kI.default)(r.clockTolerance);break;case"number":l=r.clockTolerance;break;case"undefined":l=0;break;default:throw new TypeError("Invalid clockTolerance option type")}let{currentDate:p}=r,d=(0,Ble.default)(p||new Date);if((s.iat!==void 0||c)&&typeof s.iat!="number")throw new Xn.JWTClaimValidationFailed('"iat" claim must be a number',"iat","invalid");if(s.nbf!==void 0){if(typeof s.nbf!="number")throw new Xn.JWTClaimValidationFailed('"nbf" claim must be a number',"nbf","invalid");if(s.nbf>d+l)throw new Xn.JWTClaimValidationFailed('"nbf" claim timestamp check failed',"nbf","check_failed")}if(s.exp!==void 0){if(typeof s.exp!="number")throw new Xn.JWTClaimValidationFailed('"exp" claim must be a number',"exp","invalid");if(s.exp<=d-l)throw new Xn.JWTExpired('"exp" claim timestamp check failed',"exp","check_failed")}if(c){let h=d-s.iat,f=typeof c=="number"?c:(0,kI.default)(c);if(h-l>f)throw new Xn.JWTExpired('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(h<0-l)throw new Xn.JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return s}});var FI=m(b0=>{"use strict";Object.defineProperty(b0,"__esModule",{value:!0});b0.jwtVerify=void 0;var kle=rA(),Rle=E0(),Fle=fe();async function $le(t,e,r){var n;let s=await(0,kle.compactVerify)(t,e,r);if(!((n=s.protectedHeader.crit)===null||n===void 0)&&n.includes("b64")&&s.protectedHeader.b64===!1)throw new Fle.JWTInvalid("JWTs MUST NOT use unencoded payload");let o={payload:(0,Rle.default)(s.protectedHeader,s.payload,r),protectedHeader:s.protectedHeader};return typeof e=="function"?{...o,key:s.key}:o}b0.jwtVerify=$le});var $I=m(S0=>{"use strict";Object.defineProperty(S0,"__esModule",{value:!0});S0.jwtDecrypt=void 0;var qle=T3(),jle=E0(),lA=fe();async function Lle(t,e,r){let n=await(0,qle.compactDecrypt)(t,e,r),s=(0,jle.default)(n.protectedHeader,n.plaintext,r),{protectedHeader:i}=n;if(i.iss!==void 0&&i.iss!==s.iss)throw new lA.JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(i.sub!==void 0&&i.sub!==s.sub)throw new lA.JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(i.aud!==void 0&&JSON.stringify(i.aud)!==JSON.stringify(s.aud))throw new lA.JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',"aud","mismatch");let o={payload:s,protectedHeader:i};return typeof e=="function"?{...o,key:n.key}:o}S0.jwtDecrypt=Lle});var dA=m(w0=>{"use strict";Object.defineProperty(w0,"__esModule",{value:!0});w0.CompactEncrypt=void 0;var Ule=p0(),pA=class{constructor(e){this._flattened=new Ule.FlattenedEncrypt(e)}setContentEncryptionKey(e){return this._flattened.setContentEncryptionKey(e),this}setInitializationVector(e){return this._flattened.setInitializationVector(e),this}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}setKeyManagementParameters(e){return this._flattened.setKeyManagementParameters(e),this}async encrypt(e,r){let n=await this._flattened.encrypt(e,r);return[n.protected,n.encrypted_key,n.iv,n.ciphertext,n.tag].join(".")}};w0.CompactEncrypt=pA});var O0=m(A0=>{"use strict";Object.defineProperty(A0,"__esModule",{value:!0});A0.FlattenedSign=void 0;var hA=Gr(),Vle=X3(),Wle=yl(),sd=fe(),vu=Dt(),zle=td(),Kle=Sl(),fA=class{constructor(e){if(!(e instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=e}setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setUnprotectedHeader(e){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=e,this}async sign(e,r){if(!this._protectedHeader&&!this._unprotectedHeader)throw new sd.JWSInvalid("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!(0,Wle.default)(this._protectedHeader,this._unprotectedHeader))throw new sd.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let n={...this._protectedHeader,...this._unprotectedHeader},s=(0,Kle.default)(sd.JWSInvalid,new Map([["b64",!0]]),r?.crit,this._protectedHeader,n),i=!0;if(s.has("b64")&&(i=this._protectedHeader.b64,typeof i!="boolean"))throw new sd.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:o}=n;if(typeof o!="string"||!o)throw new sd.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');(0,zle.default)(o,e,"sign");let a=this._payload;i&&(a=vu.encoder.encode((0,hA.encode)(a)));let u;this._protectedHeader?u=vu.encoder.encode((0,hA.encode)(JSON.stringify(this._protectedHeader))):u=vu.encoder.encode("");let c=(0,vu.concat)(u,vu.encoder.encode("."),a),l=await(0,Vle.default)(o,e,c),p={signature:(0,hA.encode)(l),payload:""};return i&&(p.payload=vu.decoder.decode(a)),this._unprotectedHeader&&(p.header=this._unprotectedHeader),this._protectedHeader&&(p.protected=vu.decoder.decode(u)),p}};A0.FlattenedSign=fA});var yA=m(C0=>{"use strict";Object.defineProperty(C0,"__esModule",{value:!0});C0.CompactSign=void 0;var Hle=O0(),mA=class{constructor(e){this._flattened=new Hle.FlattenedSign(e)}setProtectedHeader(e){return this._flattened.setProtectedHeader(e),this}async sign(e,r){let n=await this._flattened.sign(e,r);if(n.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${n.protected}.${n.payload}.${n.signature}`}};C0.CompactSign=mA});var jI=m(v0=>{"use strict";Object.defineProperty(v0,"__esModule",{value:!0});v0.GeneralSign=void 0;var Gle=O0(),qI=fe(),gA=class{constructor(e,r,n){this.parent=e,this.key=r,this.options=n}setProtectedHeader(e){if(this.protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this.protectedHeader=e,this}setUnprotectedHeader(e){if(this.unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=e,this}addSignature(...e){return this.parent.addSignature(...e)}sign(...e){return this.parent.sign(...e)}done(){return this.parent}},_A=class{constructor(e){this._signatures=[],this._payload=e}addSignature(e,r){let n=new gA(this,e,r);return this._signatures.push(n),n}async sign(){if(!this._signatures.length)throw new qI.JWSInvalid("at least one signature must be added");let e={signatures:[],payload:""};for(let r=0;r<this._signatures.length;r++){let n=this._signatures[r],s=new Gle.FlattenedSign(this._payload);s.setProtectedHeader(n.protectedHeader),s.setUnprotectedHeader(n.unprotectedHeader);let{payload:i,...o}=await s.sign(n.key,n.options);if(r===0)e.payload=i;else if(e.payload!==i)throw new qI.JWSInvalid("inconsistent use of JWS Unencoded Payload (RFC7797)");e.signatures.push(o)}return e}};v0.GeneralSign=_A});var T0=m(x0=>{"use strict";Object.defineProperty(x0,"__esModule",{value:!0});x0.ProduceJWT=void 0;var EA=iA(),Jle=xn(),LI=uA(),bA=class{constructor(e){if(!(0,Jle.default)(e))throw new TypeError("JWT Claims Set MUST be an object");this._payload=e}setIssuer(e){return this._payload={...this._payload,iss:e},this}setSubject(e){return this._payload={...this._payload,sub:e},this}setAudience(e){return this._payload={...this._payload,aud:e},this}setJti(e){return this._payload={...this._payload,jti:e},this}setNotBefore(e){return typeof e=="number"?this._payload={...this._payload,nbf:e}:this._payload={...this._payload,nbf:(0,EA.default)(new Date)+(0,LI.default)(e)},this}setExpirationTime(e){return typeof e=="number"?this._payload={...this._payload,exp:e}:this._payload={...this._payload,exp:(0,EA.default)(new Date)+(0,LI.default)(e)},this}setIssuedAt(e){return typeof e>"u"?this._payload={...this._payload,iat:(0,EA.default)(new Date)}:this._payload={...this._payload,iat:e},this}};x0.ProduceJWT=bA});var UI=m(D0=>{"use strict";Object.defineProperty(D0,"__esModule",{value:!0});D0.SignJWT=void 0;var Yle=yA(),Qle=fe(),Xle=Dt(),Zle=T0(),SA=class extends Zle.ProduceJWT{setProtectedHeader(e){return this._protectedHeader=e,this}async sign(e,r){var n;let s=new Yle.CompactSign(Xle.encoder.encode(JSON.stringify(this._payload)));if(s.setProtectedHeader(this._protectedHeader),Array.isArray((n=this._protectedHeader)===null||n===void 0?void 0:n.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new Qle.JWTInvalid("JWTs MUST NOT use unencoded payload");return s.sign(e,r)}};D0.SignJWT=SA});var VI=m(M0=>{"use strict";Object.defineProperty(M0,"__esModule",{value:!0});M0.EncryptJWT=void 0;var epe=dA(),tpe=Dt(),rpe=T0(),wA=class extends rpe.ProduceJWT{setProtectedHeader(e){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=e,this}setKeyManagementParameters(e){if(this._keyManagementParameters)throw new TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=e,this}setContentEncryptionKey(e){if(this._cek)throw new TypeError("setContentEncryptionKey can only be called once");return this._cek=e,this}setInitializationVector(e){if(this._iv)throw new TypeError("setInitializationVector can only be called once");return this._iv=e,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(e,r){let n=new epe.CompactEncrypt(tpe.encoder.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),n.setProtectedHeader(this._protectedHeader),this._iv&&n.setInitializationVector(this._iv),this._cek&&n.setContentEncryptionKey(this._cek),this._keyManagementParameters&&n.setKeyManagementParameters(this._keyManagementParameters),n.encrypt(e,r)}};M0.EncryptJWT=wA});var KI=m(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});Tl.calculateJwkThumbprintUri=Tl.calculateJwkThumbprint=void 0;var npe=Sw(),spe=Gr(),WI=fe(),ipe=Dt(),ope=xn(),ma=(t,e)=>{if(typeof t!="string"||!t)throw new WI.JWKInvalid(`${e} missing or invalid`)};async function zI(t,e){if(!(0,ope.default)(t))throw new TypeError("JWK must be an object");if(e??(e="sha256"),e!=="sha256"&&e!=="sha384"&&e!=="sha512")throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let r;switch(t.kty){case"EC":ma(t.crv,'"crv" (Curve) Parameter'),ma(t.x,'"x" (X Coordinate) Parameter'),ma(t.y,'"y" (Y Coordinate) Parameter'),r={crv:t.crv,kty:t.kty,x:t.x,y:t.y};break;case"OKP":ma(t.crv,'"crv" (Subtype of Key Pair) Parameter'),ma(t.x,'"x" (Public Key) Parameter'),r={crv:t.crv,kty:t.kty,x:t.x};break;case"RSA":ma(t.e,'"e" (Exponent) Parameter'),ma(t.n,'"n" (Modulus) Parameter'),r={e:t.e,kty:t.kty,n:t.n};break;case"oct":ma(t.k,'"k" (Key Value) Parameter'),r={k:t.k,kty:t.kty};break;default:throw new WI.JOSENotSupported('"kty" (Key Type) Parameter missing or unsupported')}let n=ipe.encoder.encode(JSON.stringify(r));return(0,spe.encode)(await(0,npe.default)(e,n))}Tl.calculateJwkThumbprint=zI;async function ape(t,e){e??(e="sha256");let r=await zI(t,e);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${e.slice(-3)}:${r}`}Tl.calculateJwkThumbprintUri=ape});var GI=m(P0=>{"use strict";Object.defineProperty(P0,"__esModule",{value:!0});P0.EmbeddedJWK=void 0;var upe=ed(),cpe=xn(),HI=fe();async function lpe(t,e){let r={...t,...e?.header};if(!(0,cpe.default)(r.jwk))throw new HI.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a JSON object');let n=await(0,upe.importJWK)({...r.jwk,ext:!0},r.alg,!0);if(n instanceof Uint8Array||n.type!=="public")throw new HI.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a public key');return n}P0.EmbeddedJWK=lpe});var AA=m(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});ya.createLocalJWKSet=ya.LocalJWKSet=ya.isJWKSLike=void 0;var ppe=ed(),id=fe(),dpe=xn();function hpe(t){switch(typeof t=="string"&&t.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new id.JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set')}}function YI(t){return t&&typeof t=="object"&&Array.isArray(t.keys)&&t.keys.every(fpe)}ya.isJWKSLike=YI;function fpe(t){return(0,dpe.default)(t)}function mpe(t){return typeof structuredClone=="function"?structuredClone(t):JSON.parse(JSON.stringify(t))}var B0=class{constructor(e){if(this._cached=new WeakMap,!YI(e))throw new id.JWKSInvalid("JSON Web Key Set malformed");this._jwks=mpe(e)}async getKey(e,r){let{alg:n,kid:s}={...e,...r?.header},i=hpe(n),o=this._jwks.keys.filter(c=>{let l=i===c.kty;if(l&&typeof s=="string"&&(l=s===c.kid),l&&typeof c.alg=="string"&&(l=n===c.alg),l&&typeof c.use=="string"&&(l=c.use==="sig"),l&&Array.isArray(c.key_ops)&&(l=c.key_ops.includes("verify")),l&&n==="EdDSA"&&(l=c.crv==="Ed25519"||c.crv==="Ed448"),l)switch(n){case"ES256":l=c.crv==="P-256";break;case"ES256K":l=c.crv==="secp256k1";break;case"ES384":l=c.crv==="P-384";break;case"ES512":l=c.crv==="P-521";break}return l}),{0:a,length:u}=o;if(u===0)throw new id.JWKSNoMatchingKey;if(u!==1){let c=new id.JWKSMultipleMatchingKeys,{_cached:l}=this;throw c[Symbol.asyncIterator]=async function*(){for(let p of o)try{yield await JI(l,p,n)}catch{continue}},c}return JI(this._cached,a,n)}};ya.LocalJWKSet=B0;async function JI(t,e,r){let n=t.get(e)||t.set(e,{}).get(e);if(n[r]===void 0){let s=await(0,ppe.importJWK)({...e,ext:!0},r);if(s instanceof Uint8Array||s.type!=="public")throw new id.JWKSInvalid("JSON Web Key Set members must be public keys");n[r]=s}return n[r]}function ype(t){let e=new B0(t);return async function(r,n){return e.getKey(r,n)}}ya.createLocalJWKSet=ype});var ZI=m(CA=>{"use strict";Object.defineProperty(CA,"__esModule",{value:!0});var gpe=require("http"),_pe=require("https"),QI=require("events"),OA=fe(),XI=Dt(),Epe=async(t,e,r)=>{let n;switch(t.protocol){case"https:":n=_pe.get;break;case"http:":n=gpe.get;break;default:throw new TypeError("Unsupported URL protocol.")}let{agent:s,headers:i}=r,o=n(t.href,{agent:s,timeout:e,headers:i}),[a]=await Promise.race([(0,QI.once)(o,"response"),(0,QI.once)(o,"timeout")]);if(!a)throw o.destroy(),new OA.JWKSTimeout;if(a.statusCode!==200)throw new OA.JOSEError("Expected 200 OK from the JSON Web Key Set HTTP response");let u=[];for await(let c of a)u.push(c);try{return JSON.parse(XI.decoder.decode((0,XI.concat)(...u)))}catch{throw new OA.JOSEError("Failed to parse the JSON Web Key Set HTTP response as JSON")}};CA.default=Epe});var rN=m(I0=>{"use strict";Object.defineProperty(I0,"__esModule",{value:!0});I0.createRemoteJWKSet=void 0;var bpe=ZI(),eN=fe(),tN=AA();function Spe(){return typeof WebSocketPair<"u"||typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"||typeof EdgeRuntime<"u"&&EdgeRuntime==="vercel"}var vA=class extends tN.LocalJWKSet{constructor(e,r){if(super({keys:[]}),this._jwks=void 0,!(e instanceof URL))throw new TypeError("url must be an instance of URL");this._url=new URL(e.href),this._options={agent:r?.agent,headers:r?.headers},this._timeoutDuration=typeof r?.timeoutDuration=="number"?r?.timeoutDuration:5e3,this._cooldownDuration=typeof r?.cooldownDuration=="number"?r?.cooldownDuration:3e4,this._cacheMaxAge=typeof r?.cacheMaxAge=="number"?r?.cacheMaxAge:6e5}coolingDown(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cooldownDuration:!1}fresh(){return typeof this._jwksTimestamp=="number"?Date.now()<this._jwksTimestamp+this._cacheMaxAge:!1}async getKey(e,r){(!this._jwks||!this.fresh())&&await this.reload();try{return await super.getKey(e,r)}catch(n){if(n instanceof eN.JWKSNoMatchingKey&&this.coolingDown()===!1)return await this.reload(),super.getKey(e,r);throw n}}async reload(){this._pendingFetch&&Spe()&&(this._pendingFetch=void 0),this._pendingFetch||(this._pendingFetch=(0,bpe.default)(this._url,this._timeoutDuration,this._options).then(e=>{if(!(0,tN.isJWKSLike)(e))throw new eN.JWKSInvalid("JSON Web Key Set malformed");this._jwks={keys:e.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(e=>{throw this._pendingFetch=void 0,e})),await this._pendingFetch}};function wpe(t,e){let r=new vA(t,e);return async function(n,s){return r.getKey(n,s)}}I0.createRemoteJWKSet=wpe});var nN=m(k0=>{"use strict";Object.defineProperty(k0,"__esModule",{value:!0});k0.UnsecuredJWT=void 0;var N0=Gr(),Ape=Dt(),xA=fe(),Ope=E0(),Cpe=T0(),TA=class extends Cpe.ProduceJWT{encode(){let e=N0.encode(JSON.stringify({alg:"none"})),r=N0.encode(JSON.stringify(this._payload));return`${e}.${r}.`}static decode(e,r){if(typeof e!="string")throw new xA.JWTInvalid("Unsecured JWT must be a string");let{0:n,1:s,2:i,length:o}=e.split(".");if(o!==3||i!=="")throw new xA.JWTInvalid("Invalid Unsecured JWT");let a;try{if(a=JSON.parse(Ape.decoder.decode(N0.decode(n))),a.alg!=="none")throw new Error}catch{throw new xA.JWTInvalid("Invalid Unsecured JWT")}return{payload:(0,Ope.default)(a,N0.decode(s),r),header:a}}};k0.UnsecuredJWT=TA});var R0=m(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.decode=Dl.encode=void 0;var sN=Gr();Dl.encode=sN.encode;Dl.decode=sN.decode});var iN=m(F0=>{"use strict";Object.defineProperty(F0,"__esModule",{value:!0});F0.decodeProtectedHeader=void 0;var vpe=R0(),xpe=Dt(),Tpe=xn();function Dpe(t){let e;if(typeof t=="string"){let r=t.split(".");(r.length===3||r.length===5)&&([e]=r)}else if(typeof t=="object"&&t)if("protected"in t)e=t.protected;else throw new TypeError("Token does not contain a Protected Header");try{if(typeof e!="string"||!e)throw new Error;let r=JSON.parse(xpe.decoder.decode((0,vpe.decode)(e)));if(!(0,Tpe.default)(r))throw new Error;return r}catch{throw new TypeError("Invalid Token or Protected Header formatting")}}F0.decodeProtectedHeader=Dpe});var oN=m($0=>{"use strict";Object.defineProperty($0,"__esModule",{value:!0});$0.decodeJwt=void 0;var Mpe=R0(),Ppe=Dt(),Bpe=xn(),xu=fe();function Ipe(t){if(typeof t!="string")throw new xu.JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");let{1:e,length:r}=t.split(".");if(r===5)throw new xu.JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(r!==3)throw new xu.JWTInvalid("Invalid JWT");if(!e)throw new xu.JWTInvalid("JWTs must contain a payload");let n;try{n=(0,Mpe.decode)(e)}catch{throw new xu.JWTInvalid("Failed to base64url decode the payload")}let s;try{s=JSON.parse(Ppe.decoder.decode(n))}catch{throw new xu.JWTInvalid("Failed to parse the decoded payload as JSON")}if(!(0,Bpe.default)(s))throw new xu.JWTInvalid("Invalid JWT Claims Set");return s}$0.decodeJwt=Ipe});var DA=m(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});Ml.generateKeyPair=Ml.generateSecret=void 0;var uN=require("crypto"),Npe=require("util"),kpe=U1(),aN=J1(),od=fe(),Fi=(0,Npe.promisify)(uN.generateKeyPair);async function Rpe(t,e){let r;switch(t){case"HS256":case"HS384":case"HS512":case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":r=parseInt(t.slice(-3),10);break;case"A128KW":case"A192KW":case"A256KW":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":r=parseInt(t.slice(1,4),10);break;default:throw new od.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return(0,uN.createSecretKey)((0,kpe.default)(new Uint8Array(r>>3)))}Ml.generateSecret=Rpe;async function Fpe(t,e){var r,n;switch(t){case"RS256":case"RS384":case"RS512":case"PS256":case"PS384":case"PS512":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":case"RSA1_5":{let i=(r=e?.modulusLength)!==null&&r!==void 0?r:2048;if(typeof i!="number"||i<2048)throw new od.JOSENotSupported("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");let o=await Fi("rsa",{modulusLength:i,publicExponent:65537});return(0,aN.setModulusLength)(o.privateKey,i),(0,aN.setModulusLength)(o.publicKey,i),o}case"ES256":return Fi("ec",{namedCurve:"P-256"});case"ES256K":return Fi("ec",{namedCurve:"secp256k1"});case"ES384":return Fi("ec",{namedCurve:"P-384"});case"ES512":return Fi("ec",{namedCurve:"P-521"});case"EdDSA":switch(e?.crv){case void 0:case"Ed25519":return Fi("ed25519");case"Ed448":return Fi("ed448");default:throw new od.JOSENotSupported("Invalid or unsupported crv option provided, supported values are Ed25519 and Ed448")}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":let s=(n=e?.crv)!==null&&n!==void 0?n:"P-256";switch(s){case void 0:case"P-256":case"P-384":case"P-521":return Fi("ec",{namedCurve:s});case"X25519":return Fi("x25519");case"X448":return Fi("x448");default:throw new od.JOSENotSupported("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}default:throw new od.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}}Ml.generateKeyPair=Fpe});var cN=m(q0=>{"use strict";Object.defineProperty(q0,"__esModule",{value:!0});q0.generateKeyPair=void 0;var $pe=DA();async function qpe(t,e){return(0,$pe.generateKeyPair)(t,e)}q0.generateKeyPair=qpe});var lN=m(j0=>{"use strict";Object.defineProperty(j0,"__esModule",{value:!0});j0.generateSecret=void 0;var jpe=DA();async function Lpe(t,e){return(0,jpe.generateSecret)(t,e)}j0.generateSecret=Lpe});var pN=m(MA=>{"use strict";Object.defineProperty(MA,"__esModule",{value:!0});MA.default="node:crypto"});var dN=m(PA=>{"use strict";Object.defineProperty(PA,"__esModule",{value:!0});var Upe=pN();PA.default=Upe.default});var fN=m(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.cryptoRuntime=J.base64url=J.generateSecret=J.generateKeyPair=J.errors=J.decodeJwt=J.decodeProtectedHeader=J.importJWK=J.importX509=J.importPKCS8=J.importSPKI=J.exportJWK=J.exportSPKI=J.exportPKCS8=J.UnsecuredJWT=J.createRemoteJWKSet=J.createLocalJWKSet=J.EmbeddedJWK=J.calculateJwkThumbprintUri=J.calculateJwkThumbprint=J.EncryptJWT=J.SignJWT=J.GeneralSign=J.FlattenedSign=J.CompactSign=J.FlattenedEncrypt=J.CompactEncrypt=J.jwtDecrypt=J.jwtVerify=J.generalVerify=J.flattenedVerify=J.compactVerify=J.GeneralEncrypt=J.generalDecrypt=J.flattenedDecrypt=J.compactDecrypt=void 0;var Vpe=T3();Object.defineProperty(J,"compactDecrypt",{enumerable:!0,get:function(){return Vpe.compactDecrypt}});var Wpe=s0();Object.defineProperty(J,"flattenedDecrypt",{enumerable:!0,get:function(){return Wpe.flattenedDecrypt}});var zpe=mI();Object.defineProperty(J,"generalDecrypt",{enumerable:!0,get:function(){return zpe.generalDecrypt}});var Kpe=wI();Object.defineProperty(J,"GeneralEncrypt",{enumerable:!0,get:function(){return Kpe.GeneralEncrypt}});var Hpe=rA();Object.defineProperty(J,"compactVerify",{enumerable:!0,get:function(){return Hpe.compactVerify}});var Gpe=y0();Object.defineProperty(J,"flattenedVerify",{enumerable:!0,get:function(){return Gpe.flattenedVerify}});var Jpe=BI();Object.defineProperty(J,"generalVerify",{enumerable:!0,get:function(){return Jpe.generalVerify}});var Ype=FI();Object.defineProperty(J,"jwtVerify",{enumerable:!0,get:function(){return Ype.jwtVerify}});var Qpe=$I();Object.defineProperty(J,"jwtDecrypt",{enumerable:!0,get:function(){return Qpe.jwtDecrypt}});var Xpe=dA();Object.defineProperty(J,"CompactEncrypt",{enumerable:!0,get:function(){return Xpe.CompactEncrypt}});var Zpe=p0();Object.defineProperty(J,"FlattenedEncrypt",{enumerable:!0,get:function(){return Zpe.FlattenedEncrypt}});var e1e=yA();Object.defineProperty(J,"CompactSign",{enumerable:!0,get:function(){return e1e.CompactSign}});var t1e=O0();Object.defineProperty(J,"FlattenedSign",{enumerable:!0,get:function(){return t1e.FlattenedSign}});var r1e=jI();Object.defineProperty(J,"GeneralSign",{enumerable:!0,get:function(){return r1e.GeneralSign}});var n1e=UI();Object.defineProperty(J,"SignJWT",{enumerable:!0,get:function(){return n1e.SignJWT}});var s1e=VI();Object.defineProperty(J,"EncryptJWT",{enumerable:!0,get:function(){return s1e.EncryptJWT}});var hN=KI();Object.defineProperty(J,"calculateJwkThumbprint",{enumerable:!0,get:function(){return hN.calculateJwkThumbprint}});Object.defineProperty(J,"calculateJwkThumbprintUri",{enumerable:!0,get:function(){return hN.calculateJwkThumbprintUri}});var i1e=GI();Object.defineProperty(J,"EmbeddedJWK",{enumerable:!0,get:function(){return i1e.EmbeddedJWK}});var o1e=AA();Object.defineProperty(J,"createLocalJWKSet",{enumerable:!0,get:function(){return o1e.createLocalJWKSet}});var a1e=rN();Object.defineProperty(J,"createRemoteJWKSet",{enumerable:!0,get:function(){return a1e.createRemoteJWKSet}});var u1e=nN();Object.defineProperty(J,"UnsecuredJWT",{enumerable:!0,get:function(){return u1e.UnsecuredJWT}});var BA=I3();Object.defineProperty(J,"exportPKCS8",{enumerable:!0,get:function(){return BA.exportPKCS8}});Object.defineProperty(J,"exportSPKI",{enumerable:!0,get:function(){return BA.exportSPKI}});Object.defineProperty(J,"exportJWK",{enumerable:!0,get:function(){return BA.exportJWK}});var L0=ed();Object.defineProperty(J,"importSPKI",{enumerable:!0,get:function(){return L0.importSPKI}});Object.defineProperty(J,"importPKCS8",{enumerable:!0,get:function(){return L0.importPKCS8}});Object.defineProperty(J,"importX509",{enumerable:!0,get:function(){return L0.importX509}});Object.defineProperty(J,"importJWK",{enumerable:!0,get:function(){return L0.importJWK}});var c1e=iN();Object.defineProperty(J,"decodeProtectedHeader",{enumerable:!0,get:function(){return c1e.decodeProtectedHeader}});var l1e=oN();Object.defineProperty(J,"decodeJwt",{enumerable:!0,get:function(){return l1e.decodeJwt}});J.errors=fe();var p1e=cN();Object.defineProperty(J,"generateKeyPair",{enumerable:!0,get:function(){return p1e.generateKeyPair}});var d1e=lN();Object.defineProperty(J,"generateSecret",{enumerable:!0,get:function(){return d1e.generateSecret}});J.base64url=R0();var h1e=dN();Object.defineProperty(J,"cryptoRuntime",{enumerable:!0,get:function(){return h1e.default}})});var yN=m(IA=>{"use strict";Object.defineProperty(IA,"__esModule",{value:!0});var mN=require("crypto");IA.default=(t,e,r,n,s)=>{let i=parseInt(t.substr(3),10)>>3||20,o=(0,mN.createHmac)(t,r.byteLength?r:new Uint8Array(i)).update(e).digest(),a=Math.ceil(s/i),u=new Uint8Array(i*a+n.byteLength+1),c=0,l=0;for(let p=1;p<=a;p++)u.set(n,l),u[l+n.byteLength]=p,u.set((0,mN.createHmac)(t,o).update(u.subarray(c,l+n.byteLength+1)).digest(),l),c=l,l+=i;return u.slice(0,s)}});var EN=m(NA=>{"use strict";Object.defineProperty(NA,"__esModule",{value:!0});var gN=require("crypto"),f1e=yN(),_N;typeof gN.hkdf=="function"&&!process.versions.electron&&(_N=async(...t)=>new Promise((e,r)=>{gN.hkdf(...t,(n,s)=>{n?r(n):e(new Uint8Array(s))})}));NA.default=async(t,e,r,n,s)=>(_N||f1e.default)(t,e,r,n,s)});var SN=m(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.default=Pl.hkdf=void 0;var m1e=EN();function y1e(t){switch(t){case"sha256":case"sha384":case"sha512":case"sha1":return t;default:throw new TypeError('unsupported "digest" value')}}function kA(t,e){if(typeof t=="string")return new TextEncoder().encode(t);if(!(t instanceof Uint8Array))throw new TypeError(`"${e}"" must be an instance of Uint8Array or a string`);return t}function g1e(t){let e=kA(t,"ikm");if(!e.byteLength)throw new TypeError('"ikm" must be at least one byte in length');return e}function _1e(t){let e=kA(t,"info");if(e.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return e}function E1e(t,e){if(typeof t!="number"||!Number.isInteger(t)||t<1)throw new TypeError('"keylen" must be a positive integer');let r=parseInt(e.substr(3),10)>>3||20;if(t>255*r)throw new TypeError('"keylen" too large');return t}async function bN(t,e,r,n,s){return(0,m1e.default)(y1e(t),g1e(e),kA(r,"salt"),_1e(n),E1e(s,t))}Pl.hkdf=bN;Pl.default=bN});function ad(){return U0>V0.length-16&&(wN.default.randomFillSync(V0),U0=0),V0.slice(U0,U0+=16)}var wN,V0,U0,RA=cn(()=>{wN=Mi(require("crypto")),V0=new Uint8Array(256),U0=V0.length});var AN,ON=cn(()=>{AN=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function b1e(t){return typeof t=="string"&&AN.test(t)}var ga,ud=cn(()=>{ON();ga=b1e});function S1e(t,e=0){let r=(Tr[t[e+0]]+Tr[t[e+1]]+Tr[t[e+2]]+Tr[t[e+3]]+"-"+Tr[t[e+4]]+Tr[t[e+5]]+"-"+Tr[t[e+6]]+Tr[t[e+7]]+"-"+Tr[t[e+8]]+Tr[t[e+9]]+"-"+Tr[t[e+10]]+Tr[t[e+11]]+Tr[t[e+12]]+Tr[t[e+13]]+Tr[t[e+14]]+Tr[t[e+15]]).toLowerCase();if(!ga(r))throw TypeError("Stringified UUID is invalid");return r}var Tr,_a,cd=cn(()=>{ud();Tr=[];for(let t=0;t<256;++t)Tr.push((t+256).toString(16).substr(1));_a=S1e});function w1e(t,e,r){let n=e&&r||0,s=e||new Array(16);t=t||{};let i=t.node||CN,o=t.clockseq!==void 0?t.clockseq:FA;if(i==null||o==null){let d=t.random||(t.rng||ad)();i==null&&(i=CN=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),o==null&&(o=FA=(d[6]<<8|d[7])&16383)}let a=t.msecs!==void 0?t.msecs:Date.now(),u=t.nsecs!==void 0?t.nsecs:qA+1,c=a-$A+(u-qA)/1e4;if(c<0&&t.clockseq===void 0&&(o=o+1&16383),(c<0||a>$A)&&t.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");$A=a,qA=u,FA=o,a+=122192928e5;let l=((a&268435455)*1e4+u)%4294967296;s[n++]=l>>>24&255,s[n++]=l>>>16&255,s[n++]=l>>>8&255,s[n++]=l&255;let p=a/4294967296*1e4&268435455;s[n++]=p>>>8&255,s[n++]=p&255,s[n++]=p>>>24&15|16,s[n++]=p>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(let d=0;d<6;++d)s[n+d]=i[d];return e||_a(s)}var CN,FA,$A,qA,vN,xN=cn(()=>{RA();cd();$A=0,qA=0;vN=w1e});function A1e(t){if(!ga(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var W0,jA=cn(()=>{ud();W0=A1e});function O1e(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}function z0(t,e,r){function n(s,i,o,a){if(typeof s=="string"&&(s=O1e(s)),typeof i=="string"&&(i=W0(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+s.length);if(u.set(i),u.set(s,i.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,o){a=a||0;for(let c=0;c<16;++c)o[a+c]=u[c];return o}return _a(u)}try{n.name=t}catch{}return n.DNS=C1e,n.URL=v1e,n}var C1e,v1e,LA=cn(()=>{cd();jA();C1e="6ba7b810-9dad-11d1-80b4-00c04fd430c8",v1e="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function x1e(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),TN.default.createHash("md5").update(t).digest()}var TN,DN,MN=cn(()=>{TN=Mi(require("crypto"));DN=x1e});var T1e,PN,BN=cn(()=>{LA();MN();T1e=z0("v3",48,DN),PN=T1e});function D1e(t,e,r){t=t||{};let n=t.random||(t.rng||ad)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let s=0;s<16;++s)e[r+s]=n[s];return e}return _a(n)}var IN,NN=cn(()=>{RA();cd();IN=D1e});function M1e(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),kN.default.createHash("sha1").update(t).digest()}var kN,RN,FN=cn(()=>{kN=Mi(require("crypto"));RN=M1e});var P1e,$N,qN=cn(()=>{LA();FN();P1e=z0("v5",80,RN),$N=P1e});var jN,LN=cn(()=>{jN="00000000-0000-0000-0000-000000000000"});function B1e(t){if(!ga(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}var UN,VN=cn(()=>{ud();UN=B1e});var WN={};Jee(WN,{NIL:()=>jN,parse:()=>W0,stringify:()=>_a,v1:()=>vN,v3:()=>PN,v4:()=>IN,v5:()=>$N,validate:()=>ga,version:()=>UN});var zN=cn(()=>{xN();BN();NN();qN();LN();VN();ud();cd();jA()});var YN=m(dd=>{"use strict";Object.defineProperty(dd,"__esModule",{value:!0});dd.SessionStore=void 0;dd.defaultCookies=N1e;function I1e(t,e){GN(t,e),e.add(t)}function UA(t,e,r){GN(t,e),e.set(t,r)}function GN(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Zn(t,e){return t.get(pd(t,e))}function KN(t,e,r){return t.set(pd(t,e),r),r}function pd(t,e,r){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:r;throw new TypeError("Private element is not present on this object")}var JN=4096,WA=163,VA=JN-WA;function N1e(t){let e=t?"__Secure-":"";return{sessionToken:{name:`${e}next-auth.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t}},callbackUrl:{name:`${e}next-auth.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t}},csrfToken:{name:`${t?"__Host-":""}next-auth.csrf-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t}},pkceCodeVerifier:{name:`${e}next-auth.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t,maxAge:900}},state:{name:`${e}next-auth.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t,maxAge:900}},nonce:{name:`${e}next-auth.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:t}}}}var $i=new WeakMap,ld=new WeakMap,zA=new WeakMap,K0=new WeakSet,KA=class{constructor(e,r,n){I1e(this,K0),UA(this,$i,{}),UA(this,ld,void 0),UA(this,zA,void 0),KN(zA,this,n),KN(ld,this,e);let{cookies:s}=r,{name:i}=e;if(typeof s?.getAll=="function")for(let{name:o,value:a}of s.getAll())o.startsWith(i)&&(Zn($i,this)[o]=a);else if(s instanceof Map)for(let o of s.keys())o.startsWith(i)&&(Zn($i,this)[o]=s.get(o));else for(let o in s)o.startsWith(i)&&(Zn($i,this)[o]=s[o])}get value(){return Object.keys(Zn($i,this)).sort((r,n)=>{var s,i;let o=parseInt((s=r.split(".").pop())!==null&&s!==void 0?s:"0"),a=parseInt((i=n.split(".").pop())!==null&&i!==void 0?i:"0");return o-a}).map(r=>Zn($i,this)[r]).join("")}chunk(e,r){let n=pd(K0,this,HN).call(this),s=pd(K0,this,k1e).call(this,{name:Zn(ld,this).name,value:e,options:{...Zn(ld,this).options,...r}});for(let i of s)n[i.name]=i;return Object.values(n)}clean(){return Object.values(pd(K0,this,HN).call(this))}};dd.SessionStore=KA;function k1e(t){let e=Math.ceil(t.value.length/VA);if(e===1)return Zn($i,this)[t.name]=t.value,[t];let r=[];for(let n=0;n<e;n++){let s=`${t.name}.${n}`,i=t.value.substr(n*VA,VA);r.push({...t,name:s,value:i}),Zn($i,this)[s]=i}return Zn(zA,this).debug("CHUNKING_SESSION_COOKIE",{message:`Session cookie exceeds allowed ${JN} bytes.`,emptyCookieSize:WA,valueSize:t.value.length,chunks:r.map(n=>n.value.length+WA)}),r}function HN(){let t={};for(let r in Zn($i,this)){var e;(e=Zn($i,this))===null||e===void 0||delete e[r],t[r]={name:r,value:"",options:{...Zn(ld,this).options,maxAge:0}}}return t}});var XN=m(QN=>{"use strict";Object.defineProperty(QN,"__esModule",{value:!0})});var rk=m(Ea=>{"use strict";var R1e=mB();Object.defineProperty(Ea,"__esModule",{value:!0});var F1e={encode:!0,decode:!0,getToken:!0};Ea.decode=ek;Ea.encode=V1e;Ea.getToken=W1e;var ZN=fN(),$1e=R1e(SN()),q1e=(zN(),Yee(WN)),j1e=YN(),HA=XN();Object.keys(HA).forEach(function(t){t==="default"||t==="__esModule"||Object.prototype.hasOwnProperty.call(F1e,t)||t in Ea&&Ea[t]===HA[t]||Object.defineProperty(Ea,t,{enumerable:!0,get:function(){return HA[t]}})});var L1e=720*60*60,U1e=()=>Date.now()/1e3|0;async function V1e(t){let{token:e={},secret:r,maxAge:n=L1e,salt:s=""}=t,i=await tk(r,s);return await new ZN.EncryptJWT(e).setProtectedHeader({alg:"dir",enc:"A256GCM"}).setIssuedAt().setExpirationTime(U1e()+n).setJti((0,q1e.v4)()).encrypt(i)}async function ek(t){let{token:e,secret:r,salt:n=""}=t;if(!e)return null;let s=await tk(r,n),{payload:i}=await(0,ZN.jwtDecrypt)(e,s,{clockTolerance:15});return i}async function W1e(t){var e,r,n,s;let{req:i,secureCookie:o=(e=(r=process.env.NEXTAUTH_URL)===null||r===void 0?void 0:r.startsWith("https://"))!==null&&e!==void 0?e:!!process.env.VERCEL,cookieName:a=o?"__Secure-next-auth.session-token":"next-auth.session-token",raw:u,decode:c=ek,logger:l=console,secret:p=(n=process.env.NEXTAUTH_SECRET)!==null&&n!==void 0?n:process.env.AUTH_SECRET}=t;if(!i)throw new Error("Must pass `req` to JWT getToken()");let h=new j1e.SessionStore({name:a,options:{secure:o}},{cookies:i.cookies,headers:i.headers},l).value,f=i.headers instanceof Headers?i.headers.get("authorization"):(s=i.headers)===null||s===void 0?void 0:s.authorization;if(!h&&f?.split(" ")[0]==="Bearer"){let y=f.split(" ")[1];h=decodeURIComponent(y)}if(!h)return null;if(u)return h;try{return await c({token:h,secret:p})}catch{return null}}async function tk(t,e){return await(0,$1e.default)("sha256",t,e,`NextAuth.js Generated Encryption Key${e?` (${e})`:""}`,32)}});var T6=m(Le=>{"use strict";var z1e=(()=>{let t=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array.prototype),Symbol.toStringTag).get;return e=>t.call(e)})();function ba(t){return z1e(t)==="Uint8Array"}function E6(t){return typeof t=="object"&&t!=null&&Symbol.toStringTag in t&&(t[Symbol.toStringTag]==="ArrayBuffer"||t[Symbol.toStringTag]==="SharedArrayBuffer")}function Nl(t){return t instanceof RegExp||Object.prototype.toString.call(t)==="[object RegExp]"}function b6(t){return typeof t=="object"&&t!=null&&Symbol.toStringTag in t&&t[Symbol.toStringTag]==="Map"}function kl(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function es(t,e){return JSON.stringify(t,(r,n)=>typeof n=="bigint"?{$numberLong:`${n}`}:b6(n)?Object.fromEntries(n):n)}function K1e(t){if(t!=null&&typeof t=="object"&&"stylize"in t&&typeof t.stylize=="function")return t.stylize}var Mu=7,$l=Symbol.for("@@mdb.bson.version"),yd=2147483647,gd=-2147483648,Sk=Math.pow(2,63)-1,wk=-Math.pow(2,63),Ak=Math.pow(2,53),Ok=-Math.pow(2,53),S6=1,Ck=2,w6=3,vk=4,A6=5,H1e=6,xk=7,Tk=8,Dk=9,O6=10,J0=11,G1e=12,C6=13,Mk=14,Pk=15,md=16,Bk=17,v6=18,Ik=19,Nk=255,kk=127,J1e=0,x6=4,Rk=Object.freeze({double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:-1,maxKey:127}),k=class extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor(e,r){super(e,r)}static isBSONError(e){return e!=null&&typeof e=="object"&&"bsonError"in e&&e.bsonError===!0&&"name"in e&&"message"in e&&"stack"in e}},yo=class extends k{get name(){return"BSONVersionError"}constructor(){super(`Unsupported BSON version, bson types must be from bson ${Mu}.x.x`)}},ql=class extends k{get name(){return"BSONRuntimeError"}constructor(e){super(e)}},Ts=class extends k{get name(){return"BSONOffsetError"}offset;constructor(e,r,n){super(`${e}. offset: ${r}`,n),this.offset=r}},ik,ok;function Fk(t,e,r,n){if(n){ik??=new TextDecoder("utf8",{fatal:!0});try{return ik.decode(t.subarray(e,r))}catch(s){throw new k("Invalid UTF-8 string in BSON document",{cause:s})}}return ok??=new TextDecoder("utf8",{fatal:!1}),ok.decode(t.subarray(e,r))}function $k(t,e,r){if(t.length===0)return"";let n=r-e;if(n===0)return"";if(n>20)return null;if(n===1&&t[e]<128)return String.fromCharCode(t[e]);if(n===2&&t[e]<128&&t[e+1]<128)return String.fromCharCode(t[e])+String.fromCharCode(t[e+1]);if(n===3&&t[e]<128&&t[e+1]<128&&t[e+2]<128)return String.fromCharCode(t[e])+String.fromCharCode(t[e+1])+String.fromCharCode(t[e+2]);let s=[];for(let i=e;i<r;i++){let o=t[i];if(o>127)return null;s.push(o)}return String.fromCharCode(...s)}function Y1e(t,e,r){if(e.length===0)return 0;if(e.length>25||t.length-r<e.length)return null;for(let n=0,s=r;n<e.length;n++,s++){let i=e.charCodeAt(n);if(i>127)return null;t[s]=i}return e.length}function Q1e(t){return ti.fromNumberArray(Array.from({length:t},()=>Math.floor(Math.random()*256)))}function X1e(t){return crypto.getRandomValues(ti.allocate(t))}var Z1e=(()=>{let{crypto:t}=globalThis;return t!=null&&typeof t.getRandomValues=="function"?X1e:Q1e})(),ti={isUint8Array:ba,toLocalBufferType(t){if(Buffer.isBuffer(t))return t;if(ArrayBuffer.isView(t))return Buffer.from(t.buffer,t.byteOffset,t.byteLength);let e=t?.[Symbol.toStringTag]??Object.prototype.toString.call(t);if(e==="ArrayBuffer"||e==="SharedArrayBuffer"||e==="[object ArrayBuffer]"||e==="[object SharedArrayBuffer]")return Buffer.from(t);throw new k("Cannot create Buffer from the passed potentialBuffer.")},allocate(t){return Buffer.alloc(t)},allocateUnsafe(t){return Buffer.allocUnsafe(t)},compare(t,e){return ti.toLocalBufferType(t).compare(e)},concat(t){return Buffer.concat(t)},equals(t,e){return ti.toLocalBufferType(t).equals(e)},fromNumberArray(t){return Buffer.from(t)},fromBase64(t){return Buffer.from(t,"base64")},fromUTF8(t){return Buffer.from(t,"utf8")},toBase64(t){return ti.toLocalBufferType(t).toString("base64")},fromISO88591(t){return Buffer.from(t,"binary")},toISO88591(t){return ti.toLocalBufferType(t).toString("binary")},fromHex(t){return Buffer.from(t,"hex")},toHex(t){return ti.toLocalBufferType(t).toString("hex")},toUTF8(t,e,r,n){let s=r-e<=20?$k(t,e,r):null;if(s!=null)return s;let i=ti.toLocalBufferType(t).toString("utf8",e,r);if(n){for(let o=0;o<i.length;o++)if(i.charCodeAt(o)===65533){Fk(t,e,r,!0);break}}return i},utf8ByteLength(t){return Buffer.byteLength(t,"utf8")},encodeUTF8Into(t,e,r){let n=Y1e(t,e,r);return n??ti.toLocalBufferType(t).write(e,r,void 0,"utf8")},randomBytes:Z1e,swap32(t){return ti.toLocalBufferType(t).swap32()}};function ede(){let{navigator:t}=globalThis;return typeof t=="object"&&t.product==="ReactNative"}function tde(t){if(t<0)throw new RangeError(`The argument 'byteLength' is invalid. Received ${t}`);return Du.fromNumberArray(Array.from({length:t},()=>Math.floor(Math.random()*256)))}var rde=(()=>{let{crypto:t}=globalThis;if(t!=null&&typeof t.getRandomValues=="function")return e=>t.getRandomValues(Du.allocate(e));if(ede()){let{console:e}=globalThis;e?.warn?.("BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return tde})(),ak=/(\d|[a-f])/i,Du={isUint8Array:ba,toLocalBufferType(t){let e=t?.[Symbol.toStringTag]??Object.prototype.toString.call(t);if(e==="Uint8Array")return t;if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));if(e==="ArrayBuffer"||e==="SharedArrayBuffer"||e==="[object ArrayBuffer]"||e==="[object SharedArrayBuffer]")return new Uint8Array(t);throw new k("Cannot make a Uint8Array from passed potentialBuffer.")},allocate(t){if(typeof t!="number")throw new TypeError(`The "size" argument must be of type number. Received ${String(t)}`);return new Uint8Array(t)},allocateUnsafe(t){return Du.allocate(t)},compare(t,e){if(t===e)return 0;let r=Math.min(t.length,e.length);for(let n=0;n<r;n++){if(t[n]<e[n])return-1;if(t[n]>e[n])return 1}return t.length<e.length?-1:t.length>e.length?1:0},concat(t){if(t.length===0)return Du.allocate(0);let e=0;for(let s of t)e+=s.length;let r=Du.allocate(e),n=0;for(let s of t)r.set(s,n),n+=s.length;return r},equals(t,e){if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},fromNumberArray(t){return Uint8Array.from(t)},fromBase64(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))},fromUTF8(t){return new TextEncoder().encode(t)},toBase64(t){return btoa(Du.toISO88591(t))},fromISO88591(t){return Uint8Array.from(t,e=>e.charCodeAt(0)&255)},toISO88591(t){return Array.from(Uint16Array.from(t),e=>String.fromCharCode(e)).join("")},fromHex(t){let e=t.length%2===0?t:t.slice(0,t.length-1),r=[];for(let n=0;n<e.length;n+=2){let s=e[n],i=e[n+1];if(!ak.test(s)||!ak.test(i))break;let o=Number.parseInt(`${s}${i}`,16);r.push(o)}return Uint8Array.from(r)},toHex(t){return Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")},toUTF8(t,e,r,n){let s=r-e<=20?$k(t,e,r):null;return s??Fk(t,e,r,n)},utf8ByteLength(t){return new TextEncoder().encode(t).byteLength},encodeUTF8Into(t,e,r){let n=new TextEncoder().encode(e);return t.set(n,r),n.byteLength},randomBytes:rde,swap32(t){if(t.length%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t.length;e+=4){let r=t[e],n=t[e+1],s=t[e+2],i=t[e+3];t[e]=i,t[e+1]=s,t[e+2]=n,t[e+3]=r}return t}},nde=typeof Buffer=="function"&&Buffer.prototype?._isBuffer!==!0,B=nde?ti:Du,Q0=Symbol.for("@@mdb.bson.type"),Jr=class{get[Q0](){return this._bsontype}get[$l](){return Mu}[Symbol.for("nodejs.util.inspect.custom")](e,r,n){return this.inspect(e,r,n)}},Rl=new Float64Array(1),je=new Uint8Array(Rl.buffer,0,8);Rl[0]=-1;var GA=je[7]===0,ie={isBigEndian:GA,getNonnegativeInt32LE(t,e){if(t[e+3]>127)throw new RangeError(`Size cannot be negative at offset: ${e}`);return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24},getInt32LE(t,e){return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24},getUint32LE(t,e){return t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216},getUint32BE(t,e){return t[e+3]+t[e+2]*256+t[e+1]*65536+t[e]*16777216},getBigInt64LE(t,e){let r=BigInt(t[e+4]+t[e+5]*256+t[e+6]*65536+(t[e+7]<<24)),n=BigInt(t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216);return(r<<32n)+n},getFloat64LE:GA?(t,e)=>(je[7]=t[e],je[6]=t[e+1],je[5]=t[e+2],je[4]=t[e+3],je[3]=t[e+4],je[2]=t[e+5],je[1]=t[e+6],je[0]=t[e+7],Rl[0]):(t,e)=>(je[0]=t[e],je[1]=t[e+1],je[2]=t[e+2],je[3]=t[e+3],je[4]=t[e+4],je[5]=t[e+5],je[6]=t[e+6],je[7]=t[e+7],Rl[0]),setInt32BE(t,e,r){return t[e+3]=r,r>>>=8,t[e+2]=r,r>>>=8,t[e+1]=r,r>>>=8,t[e]=r,4},setInt32LE(t,e,r){return t[e]=r,r>>>=8,t[e+1]=r,r>>>=8,t[e+2]=r,r>>>=8,t[e+3]=r,4},setBigInt64LE(t,e,r){let n=0xffffffffn,s=Number(r&n);t[e]=s,s>>=8,t[e+1]=s,s>>=8,t[e+2]=s,s>>=8,t[e+3]=s;let i=Number(r>>32n&n);return t[e+4]=i,i>>=8,t[e+5]=i,i>>=8,t[e+6]=i,i>>=8,t[e+7]=i,8},setFloat64LE:GA?(t,e,r)=>(Rl[0]=r,t[e]=je[7],t[e+1]=je[6],t[e+2]=je[5],t[e+3]=je[4],t[e+4]=je[3],t[e+5]=je[2],t[e+6]=je[1],t[e+7]=je[0],8):(t,e,r)=>(Rl[0]=r,t[e]=je[0],t[e+1]=je[1],t[e+2]=je[2],t[e+3]=je[3],t[e+4]=je[4],t[e+5]=je[5],t[e+6]=je[6],t[e+7]=je[7],8)},Pt=class t extends Jr{get _bsontype(){return"Binary"}static BSON_BINARY_SUBTYPE_DEFAULT=0;static BUFFER_SIZE=256;static SUBTYPE_DEFAULT=0;static SUBTYPE_FUNCTION=1;static SUBTYPE_BYTE_ARRAY=2;static SUBTYPE_UUID_OLD=3;static SUBTYPE_UUID=4;static SUBTYPE_MD5=5;static SUBTYPE_ENCRYPTED=6;static SUBTYPE_COLUMN=7;static SUBTYPE_SENSITIVE=8;static SUBTYPE_VECTOR=9;static SUBTYPE_USER_DEFINED=128;static VECTOR_TYPE=Object.freeze({Int8:3,Float32:39,PackedBit:16});buffer;sub_type;position;constructor(e,r){if(super(),e!=null&&typeof e=="string"&&!ArrayBuffer.isView(e)&&!E6(e)&&!Array.isArray(e))throw new k("Binary can only be constructed from Uint8Array or number[]");this.sub_type=r??t.BSON_BINARY_SUBTYPE_DEFAULT,e==null?(this.buffer=B.allocate(t.BUFFER_SIZE),this.position=0):(this.buffer=Array.isArray(e)?B.fromNumberArray(e):B.toLocalBufferType(e),this.position=this.buffer.byteLength)}put(e){if(typeof e=="string"&&e.length!==1)throw new k("only accepts single character String");if(typeof e!="number"&&e.length!==1)throw new k("only accepts single character Uint8Array or Array");let r;if(typeof e=="string"?r=e.charCodeAt(0):typeof e=="number"?r=e:r=e[0],r<0||r>255)throw new k("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=r;else{let n=B.allocate(t.BUFFER_SIZE+this.buffer.length);n.set(this.buffer,0),this.buffer=n,this.buffer[this.position++]=r}}write(e,r){if(r=typeof r=="number"?r:this.position,this.buffer.byteLength<r+e.length){let n=B.allocate(this.buffer.byteLength+e.length);n.set(this.buffer,0),this.buffer=n}if(ArrayBuffer.isView(e))this.buffer.set(B.toLocalBufferType(e),r),this.position=r+e.byteLength>this.position?r+e.length:this.position;else if(typeof e=="string")throw new k("input cannot be string")}read(e,r){r=r&&r>0?r:this.position;let n=e+r;return this.buffer.subarray(e,n>this.position?this.position:n)}value(){return this.buffer.length===this.position?this.buffer:this.buffer.subarray(0,this.position)}length(){return this.position}toJSON(){return B.toBase64(this.buffer.subarray(0,this.position))}toString(e){return e==="hex"?B.toHex(this.buffer.subarray(0,this.position)):e==="base64"?B.toBase64(this.buffer.subarray(0,this.position)):e==="utf8"||e==="utf-8"?B.toUTF8(this.buffer,0,this.position,!1):B.toUTF8(this.buffer,0,this.position,!1)}toExtendedJSON(e){e=e||{},this.sub_type===t.SUBTYPE_VECTOR&&fo(this);let r=B.toBase64(this.buffer),n=Number(this.sub_type).toString(16);return e.legacy?{$binary:r,$type:n.length===1?"0"+n:n}:{$binary:{base64:r,subType:n.length===1?"0"+n:n}}}toUUID(){if(this.sub_type===t.SUBTYPE_UUID)return new wa(this.buffer.subarray(0,this.position));throw new k(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${t.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString(e,r){return new t(B.fromHex(e),r)}static createFromBase64(e,r){return new t(B.fromBase64(e),r)}static fromExtendedJSON(e,r){r=r||{};let n,s;if("$binary"in e?r.legacy&&typeof e.$binary=="string"&&"$type"in e?(s=e.$type?parseInt(e.$type,16):0,n=B.fromBase64(e.$binary)):typeof e.$binary!="string"&&(s=e.$binary.subType?parseInt(e.$binary.subType,16):0,n=B.fromBase64(e.$binary.base64)):"$uuid"in e&&(s=4,n=wa.bytesFromString(e.$uuid)),!n)throw new k(`Unexpected Binary Extended JSON format ${JSON.stringify(e)}`);return s===x6?new wa(n):new t(n,s)}inspect(e,r,n){n??=es;let s=B.toBase64(this.buffer.subarray(0,this.position)),i=n(s,r),o=n(this.sub_type,r);return`Binary.createFromBase64(${i}, ${o})`}toInt8Array(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new k("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.Int8)throw new k("Binary datatype field is not Int8");return fo(this),new Int8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toFloat32Array(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new k("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.Float32)throw new k("Binary datatype field is not Float32");fo(this);let e=new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position));return ie.isBigEndian&&B.swap32(e),new Float32Array(e.buffer)}toPackedBits(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new k("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.PackedBit)throw new k("Binary datatype field is not packed bit");return fo(this),new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toBits(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new k("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.PackedBit)throw new k("Binary datatype field is not packed bit");fo(this);let r=(this.length()-2)*8-this.buffer[1],n=new Int8Array(r);for(let s=0;s<n.length;s++){let i=s/8|0,o=this.buffer[i+2],a=7-s%8,u=o>>a&1;n[s]=u}return n}static fromInt8Array(e){let r=B.allocate(e.byteLength+2);r[0]=t.VECTOR_TYPE.Int8,r[1]=0;let n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.set(n,2);let s=new this(r,this.SUBTYPE_VECTOR);return fo(s),s}static fromFloat32Array(e){let r=B.allocate(e.byteLength+2);r[0]=t.VECTOR_TYPE.Float32,r[1]=0;let n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);r.set(n,2),ie.isBigEndian&&B.swap32(new Uint8Array(r.buffer,2));let s=new this(r,this.SUBTYPE_VECTOR);return fo(s),s}static fromPackedBits(e,r=0){let n=B.allocate(e.byteLength+2);n[0]=t.VECTOR_TYPE.PackedBit,n[1]=r,n.set(e,2);let s=new this(n,this.SUBTYPE_VECTOR);return fo(s),s}static fromBits(e){let r=e.length+7>>>3,n=new Uint8Array(r+2);n[0]=t.VECTOR_TYPE.PackedBit;let s=e.length%8;n[1]=s===0?0:8-s;for(let i=0;i<e.length;i++){let o=i>>>3,a=e[i];if(a!==0&&a!==1)throw new k(`Invalid bit value at ${i}: must be 0 or 1, found ${e[i]}`);if(a===0)continue;let u=7-i%8;n[o+2]|=a<<u}return new this(n,t.SUBTYPE_VECTOR)}};function fo(t){if(t.sub_type!==Pt.SUBTYPE_VECTOR)return;let e=t.position,r=t.buffer[0],n=t.buffer[1];if((r===Pt.VECTOR_TYPE.Float32||r===Pt.VECTOR_TYPE.Int8)&&n!==0)throw new k("Invalid Vector: padding must be zero for int8 and float32 vectors");if(r===Pt.VECTOR_TYPE.Float32&&e!==0&&e-2!==0&&(e-2)%4!==0)throw new k("Invalid Vector: Float32 vector must contain a multiple of 4 bytes");if(r===Pt.VECTOR_TYPE.PackedBit&&n!==0&&e===2)throw new k("Invalid Vector: padding must be zero for packed bit vectors that are empty");if(r===Pt.VECTOR_TYPE.PackedBit&&n>7)throw new k(`Invalid Vector: padding must be a value between 0 and 7. found: ${n}`)}var JA=16,sde=/^[0-9A-F]{32}$/i,ide=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,wa=class t extends Pt{constructor(e){let r;if(e==null)r=t.generate();else if(e instanceof t)r=B.toLocalBufferType(new Uint8Array(e.buffer));else if(ArrayBuffer.isView(e)&&e.byteLength===JA)r=B.toLocalBufferType(e);else if(typeof e=="string")r=t.bytesFromString(e);else throw new k("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");super(r,x6)}get id(){return this.buffer}set id(e){this.buffer=e}toHexString(e=!0){return e?[B.toHex(this.buffer.subarray(0,4)),B.toHex(this.buffer.subarray(4,6)),B.toHex(this.buffer.subarray(6,8)),B.toHex(this.buffer.subarray(8,10)),B.toHex(this.buffer.subarray(10,16))].join("-"):B.toHex(this.buffer)}toString(e){return e==="hex"?B.toHex(this.id):e==="base64"?B.toBase64(this.id):this.toHexString()}toJSON(){return this.toHexString()}equals(e){if(!e)return!1;if(e instanceof t)return B.equals(e.id,this.id);try{return B.equals(new t(e).id,this.id)}catch{return!1}}toBinary(){return new Pt(this.id,Pt.SUBTYPE_UUID)}static generate(){let e=B.randomBytes(JA);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,e}static isValid(e){return e?typeof e=="string"?t.isValidUUIDString(e):ba(e)?e.byteLength===JA:e._bsontype==="Binary"&&e.sub_type===this.SUBTYPE_UUID&&e.buffer.byteLength===16:!1}static createFromHexString(e){let r=t.bytesFromString(e);return new t(r)}static createFromBase64(e){return new t(B.fromBase64(e))}static bytesFromString(e){if(!t.isValidUUIDString(e))throw new k("UUID string representation must be 32 hex digits or canonical hyphenated representation");return B.fromHex(e.replace(/-/g,""))}static isValidUUIDString(e){return sde.test(e)||ide.test(e)}inspect(e,r,n){return n??=es,`new UUID(${n(this.toHexString(),r)})`}},go=class t extends Jr{get _bsontype(){return"Code"}code;scope;constructor(e,r){super(),this.code=e.toString(),this.scope=r??null}toJSON(){return this.scope!=null?{code:this.code,scope:this.scope}:{code:this.code}}toExtendedJSON(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}static fromExtendedJSON(e){return new t(e.$code,e.$scope)}inspect(e,r,n){n??=es;let s=n(this.code,r),i=s.includes(`
`);this.scope!=null&&(s+=`,${i?`
`:" "}${n(this.scope,r)}`);let o=i&&this.scope===null;return`new Code(${i?`
`:""}${s}${o?`
`:""})`}};function qk(t){return t!=null&&typeof t=="object"&&"$id"in t&&t.$id!=null&&"$ref"in t&&typeof t.$ref=="string"&&(!("$db"in t)||"$db"in t&&typeof t.$db=="string")}var qi=class t extends Jr{get _bsontype(){return"DBRef"}collection;oid;db;fields;constructor(e,r,n,s){super();let i=e.split(".");i.length===2&&(n=i.shift(),e=i.shift()),this.collection=e,this.oid=r,this.db=n,this.fields=s||{}}get namespace(){return this.collection}set namespace(e){this.collection=e}toJSON(){let e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return this.db!=null&&(e.$db=this.db),e}toExtendedJSON(e){e=e||{};let r={$ref:this.collection,$id:this.oid};return e.legacy||(this.db&&(r.$db=this.db),r=Object.assign(r,this.fields)),r}static fromExtendedJSON(e){let r=Object.assign({},e);return delete r.$ref,delete r.$id,delete r.$db,new t(e.$ref,e.$id,e.$db,r)}inspect(e,r,n){n??=es;let s=[n(this.namespace,r),n(this.oid,r),...this.db?[n(this.db,r)]:[],...Object.keys(this.fields).length>0?[n(this.fields,r)]:[]];return s[1]=n===es?`new ObjectId(${s[1]})`:s[1],`new DBRef(${s.join(", ")})`}};function jk(t){if(t==="")return t;let e=0,r=t[e]==="-",n=t[e]==="+";(n||r)&&(e+=1);let s=!1;for(;e<t.length&&t[e]==="0";++e)s=!0;return s?`${r?"-":""}${t.length===e?"0":t.slice(e)}`:n?t.slice(1):t}function ode(t,e){e=e??10;let r="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,e);return new RegExp(`[^-+${r}]`,"i").test(t)?!1:t}var xs;try{xs=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var uk=65536,ade=1<<24,Fl=uk*uk,Lk=Fl*Fl,ck=Lk/2,lk={},pk={},ude=20,cde=/^(\+?0|(\+|-)?[1-9][0-9]*)$/,Z=class t extends Jr{get _bsontype(){return"Long"}get __isLong__(){return!0}high;low;unsigned;constructor(e=0,r,n){super();let s=typeof r=="boolean"?r:!!n,i=typeof r=="number"?r:0,o=typeof e=="string"?t.fromString(e,s):typeof e=="bigint"?t.fromBigInt(e,s):{low:e|0,high:i|0,unsigned:s};this.low=o.low,this.high=o.high,this.unsigned=o.unsigned}static TWO_PWR_24=t.fromInt(ade);static MAX_UNSIGNED_VALUE=t.fromBits(-1,-1,!0);static ZERO=t.fromInt(0);static UZERO=t.fromInt(0,!0);static ONE=t.fromInt(1);static UONE=t.fromInt(1,!0);static NEG_ONE=t.fromInt(-1);static MAX_VALUE=t.fromBits(-1,2147483647,!1);static MIN_VALUE=t.fromBits(0,-2147483648,!1);static fromBits(e,r,n){return new t(e,r,n)}static fromInt(e,r){let n,s,i;return r?(e>>>=0,(i=0<=e&&e<256)&&(s=pk[e],s)?s:(n=t.fromBits(e,(e|0)<0?-1:0,!0),i&&(pk[e]=n),n)):(e|=0,(i=-128<=e&&e<128)&&(s=lk[e],s)?s:(n=t.fromBits(e,e<0?-1:0,!1),i&&(lk[e]=n),n))}static fromNumber(e,r){if(isNaN(e))return r?t.UZERO:t.ZERO;if(r){if(e<0)return t.UZERO;if(e>=Lk)return t.MAX_UNSIGNED_VALUE}else{if(e<=-ck)return t.MIN_VALUE;if(e+1>=ck)return t.MAX_VALUE}return e<0?t.fromNumber(-e,r).neg():t.fromBits(e%Fl|0,e/Fl|0,r)}static fromBigInt(e,r){let n=0xffffffffn,s=32n;return new t(Number(e&n),Number(e>>s&n),r)}static _fromString(e,r,n){if(e.length===0)throw new k("empty string");if(n<2||36<n)throw new k("radix");let s;if((s=e.indexOf("-"))>0)throw new k("interior hyphen");if(s===0)return t._fromString(e.substring(1),r,n).neg();let i=t.fromNumber(Math.pow(n,8)),o=t.ZERO;for(let a=0;a<e.length;a+=8){let u=Math.min(8,e.length-a),c=parseInt(e.substring(a,a+u),n);if(u<8){let l=t.fromNumber(Math.pow(n,u));o=o.mul(l).add(t.fromNumber(c))}else o=o.mul(i),o=o.add(t.fromNumber(c))}return o.unsigned=r,o}static fromStringStrict(e,r,n){let s=!1;if(typeof r=="number"?(n=r,r=!1):s=!!r,n??=10,e.trim()!==e)throw new k(`Input: '${e}' contains leading and/or trailing whitespace`);if(!ode(e,n))throw new k(`Input: '${e}' contains invalid characters for radix: ${n}`);let i=jk(e),o=t._fromString(i,s,n);if(o.toString(n).toLowerCase()!==i.toLowerCase())throw new k(`Input: ${e} is not representable as ${o.unsigned?"an unsigned":"a signed"} 64-bit Long ${n!=null?`with radix: ${n}`:""}`);return o}static fromString(e,r,n){let s=!1;return typeof r=="number"?(n=r,r=!1):s=!!r,n??=10,e==="NaN"&&n<24||(e==="Infinity"||e==="+Infinity"||e==="-Infinity")&&n<35?t.ZERO:t._fromString(e,s,n)}static fromBytes(e,r,n){return n?t.fromBytesLE(e,r):t.fromBytesBE(e,r)}static fromBytesLE(e,r){return new t(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)}static fromBytesBE(e,r){return new t(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)}static isLong(e){return e!=null&&typeof e=="object"&&"__isLong__"in e&&e.__isLong__===!0}static fromValue(e,r){return typeof e=="number"?t.fromNumber(e,r):typeof e=="string"?t.fromString(e,r):t.fromBits(e.low,e.high,typeof r=="boolean"?r:e.unsigned)}add(e){t.isLong(e)||(e=t.fromValue(e));let r=this.high>>>16,n=this.high&65535,s=this.low>>>16,i=this.low&65535,o=e.high>>>16,a=e.high&65535,u=e.low>>>16,c=e.low&65535,l=0,p=0,d=0,h=0;return h+=i+c,d+=h>>>16,h&=65535,d+=s+u,p+=d>>>16,d&=65535,p+=n+a,l+=p>>>16,p&=65535,l+=r+o,l&=65535,t.fromBits(d<<16|h,l<<16|p,this.unsigned)}and(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)}compare(e){if(t.isLong(e)||(e=t.fromValue(e)),this.eq(e))return 0;let r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1}comp(e){return this.compare(e)}divide(e){if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())throw new k("division by zero");if(xs){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;let i=(this.unsigned?xs.div_u:xs.div_s)(this.low,this.high,e.low,e.high);return t.fromBits(i,xs.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;let r,n,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return t.UZERO;if(e.gt(this.shru(1)))return t.UONE;s=t.UZERO}else{if(this.eq(t.MIN_VALUE))return e.eq(t.ONE)||e.eq(t.NEG_ONE)?t.MIN_VALUE:e.eq(t.MIN_VALUE)?t.ONE:(r=this.shr(1).div(e).shl(1),r.eq(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(n=this.sub(e.mul(r)),s=r.add(n.div(e)),s));if(e.eq(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=t.ZERO}for(n=this;n.gte(e);){r=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));let i=Math.ceil(Math.log(r)/Math.LN2),o=i<=48?1:Math.pow(2,i-48),a=t.fromNumber(r),u=a.mul(e);for(;u.isNegative()||u.gt(n);)r-=o,a=t.fromNumber(r,this.unsigned),u=a.mul(e);a.isZero()&&(a=t.ONE),s=s.add(a),n=n.sub(u)}return s}div(e){return this.divide(e)}equals(e){return t.isLong(e)||(e=t.fromValue(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low}eq(e){return this.equals(e)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){if(this.isNegative())return this.eq(t.MIN_VALUE)?64:this.neg().getNumBitsAbs();let e=this.high!==0?this.high:this.low,r;for(r=31;r>0&&(e&1<<r)===0;r--);return this.high!==0?r+33:r+1}greaterThan(e){return this.comp(e)>0}gt(e){return this.greaterThan(e)}greaterThanOrEqual(e){return this.comp(e)>=0}gte(e){return this.greaterThanOrEqual(e)}ge(e){return this.greaterThanOrEqual(e)}isEven(){return(this.low&1)===0}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return(this.low&1)===1}isPositive(){return this.unsigned||this.high>=0}isZero(){return this.high===0&&this.low===0}lessThan(e){return this.comp(e)<0}lt(e){return this.lessThan(e)}lessThanOrEqual(e){return this.comp(e)<=0}lte(e){return this.lessThanOrEqual(e)}modulo(e){if(t.isLong(e)||(e=t.fromValue(e)),xs){let r=(this.unsigned?xs.rem_u:xs.rem_s)(this.low,this.high,e.low,e.high);return t.fromBits(r,xs.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))}mod(e){return this.modulo(e)}rem(e){return this.modulo(e)}multiply(e){if(this.isZero())return t.ZERO;if(t.isLong(e)||(e=t.fromValue(e)),xs){let f=xs.mul(this.low,this.high,e.low,e.high);return t.fromBits(f,xs.get_high(),this.unsigned)}if(e.isZero())return t.ZERO;if(this.eq(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.eq(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(t.TWO_PWR_24)&&e.lt(t.TWO_PWR_24))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);let r=this.high>>>16,n=this.high&65535,s=this.low>>>16,i=this.low&65535,o=e.high>>>16,a=e.high&65535,u=e.low>>>16,c=e.low&65535,l=0,p=0,d=0,h=0;return h+=i*c,d+=h>>>16,h&=65535,d+=s*c,p+=d>>>16,d&=65535,d+=i*u,p+=d>>>16,d&=65535,p+=n*c,l+=p>>>16,p&=65535,p+=s*u,l+=p>>>16,p&=65535,p+=i*a,l+=p>>>16,p&=65535,l+=r*c+n*u+s*a+i*o,l&=65535,t.fromBits(d<<16|h,l<<16|p,this.unsigned)}mul(e){return this.multiply(e)}negate(){return!this.unsigned&&this.eq(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)}neg(){return this.negate()}not(){return t.fromBits(~this.low,~this.high,this.unsigned)}notEquals(e){return!this.equals(e)}neq(e){return this.notEquals(e)}ne(e){return this.notEquals(e)}or(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)}shiftLeft(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)}shl(e){return this.shiftLeft(e)}shiftRight(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)}shr(e){return this.shiftRight(e)}shiftRightUnsigned(e){if(t.isLong(e)&&(e=e.toInt()),e&=63,e===0)return this;{let r=this.high;if(e<32){let n=this.low;return t.fromBits(n>>>e|r<<32-e,r>>>e,this.unsigned)}else return e===32?t.fromBits(r,0,this.unsigned):t.fromBits(r>>>e-32,0,this.unsigned)}}shr_u(e){return this.shiftRightUnsigned(e)}shru(e){return this.shiftRightUnsigned(e)}subtract(e){return t.isLong(e)||(e=t.fromValue(e)),this.add(e.neg())}sub(e){return this.subtract(e)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){return this.unsigned?(this.high>>>0)*Fl+(this.low>>>0):this.high*Fl+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes(e){return e?this.toBytesLE():this.toBytesBE()}toBytesLE(){let e=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]}toBytesBE(){let e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255]}toSigned(){return this.unsigned?t.fromBits(this.low,this.high,!1):this}toString(e){if(e=e||10,e<2||36<e)throw new k("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(t.MIN_VALUE)){let i=t.fromNumber(e),o=this.div(i),a=o.mul(i).sub(this);return o.toString(e)+a.toInt().toString(e)}else return"-"+this.neg().toString(e);let r=t.fromNumber(Math.pow(e,6),this.unsigned),n=this,s="";for(;;){let i=n.div(r),a=(n.sub(i.mul(r)).toInt()>>>0).toString(e);if(n=i,n.isZero())return a+s;for(;a.length<6;)a="0"+a;s=""+a+s}}toUnsigned(){return this.unsigned?this:t.fromBits(this.low,this.high,!0)}xor(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)}eqz(){return this.isZero()}le(e){return this.lessThanOrEqual(e)}toExtendedJSON(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}}static fromExtendedJSON(e,r){let{useBigInt64:n=!1,relaxed:s=!0}={...r};if(e.$numberLong.length>ude)throw new k("$numberLong string is too long");if(!cde.test(e.$numberLong))throw new k(`$numberLong string "${e.$numberLong}" is in an invalid format`);if(n){let o=BigInt(e.$numberLong);return BigInt.asIntN(64,o)}let i=t.fromString(e.$numberLong);return s?i.toNumber():i}inspect(e,r,n){n??=es;let s=n(this.toString(),r),i=this.unsigned?`, ${n(this.unsigned,r)}`:"";return`new Long(${s}${i})`}},lde=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,pde=/^(\+|-)?(Infinity|inf)$/i,dde=/^(\+|-)?NaN$/i,Bl=6111,hd=-6176,dk=6176,hk=34,YA=B.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),fk=B.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),mk=B.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),hde=/^([-+])?(\d+)?$/,fde=31,yk=16383,mde=30,yde=31;function gk(t){return!isNaN(parseInt(t,10))}function gde(t){let e=Z.fromNumber(1e9),r=Z.fromNumber(0);if(!t.parts[0]&&!t.parts[1]&&!t.parts[2]&&!t.parts[3])return{quotient:t,rem:r};for(let n=0;n<=3;n++)r=r.shiftLeft(32),r=r.add(new Z(t.parts[n],0)),t.parts[n]=r.div(e).low,r=r.modulo(e);return{quotient:t,rem:r}}function _de(t,e){if(!t&&!e)return{high:Z.fromNumber(0),low:Z.fromNumber(0)};let r=t.shiftRightUnsigned(32),n=new Z(t.getLowBits(),0),s=e.shiftRightUnsigned(32),i=new Z(e.getLowBits(),0),o=r.multiply(s),a=r.multiply(i),u=n.multiply(s),c=n.multiply(i);return o=o.add(a.shiftRightUnsigned(32)),a=new Z(a.getLowBits(),0).add(u).add(c.shiftRightUnsigned(32)),o=o.add(a.shiftRightUnsigned(32)),c=a.shiftLeft(32).add(new Z(c.getLowBits(),0)),{high:o,low:c}}function Ede(t,e){let r=t.high>>>0,n=e.high>>>0;if(r<n)return!0;if(r===n){let s=t.low>>>0,i=e.low>>>0;if(s<i)return!0}return!1}function ei(t,e){throw new k(`"${t}" is not a valid Decimal128 string - ${e}`)}var Pu=class t extends Jr{get _bsontype(){return"Decimal128"}bytes;constructor(e){if(super(),typeof e=="string")this.bytes=t.fromString(e).bytes;else if(e instanceof Uint8Array||ba(e)){if(e.byteLength!==16)throw new k("Decimal128 must take a Buffer of 16 bytes");this.bytes=e}else throw new k("Decimal128 must take a Buffer or string")}static fromString(e){return t._fromString(e,{allowRounding:!1})}static fromStringWithRounding(e){return t._fromString(e,{allowRounding:!0})}static _fromString(e,r){let n=!1,s=!1,i=!1,o=!1,a=0,u=0,c=0,l=0,p=0,d=[0],h=0,f=0,y=0,g=0,_=new Z(0,0),S=new Z(0,0),O=0,E=0;if(e.length>=7e3)throw new k(""+e+" not a valid Decimal128 string");let A=e.match(lde),x=e.match(pde),v=e.match(dde);if(!A&&!x&&!v||e.length===0)throw new k(""+e+" not a valid Decimal128 string");if(A){let j=A[2],U=A[4],oe=A[5],Q=A[6];U&&Q===void 0&&ei(e,"missing exponent power"),U&&j===void 0&&ei(e,"missing exponent base"),U===void 0&&(oe||Q)&&ei(e,"missing e before exponent")}if((e[E]==="+"||e[E]==="-")&&(s=!0,n=e[E++]==="-"),!gk(e[E])&&e[E]!=="."){if(e[E]==="i"||e[E]==="I")return new t(n?fk:mk);if(e[E]==="N")return new t(YA)}for(;gk(e[E])||e[E]===".";){if(e[E]==="."){i&&ei(e,"contains multiple periods"),i=!0,E=E+1;continue}h<hk&&(e[E]!=="0"||o)&&(o||(p=u),o=!0,d[f++]=parseInt(e[E],10),h=h+1),o&&(c=c+1),i&&(l=l+1),u=u+1,E=E+1}if(i&&!u)throw new k(""+e+" not a valid Decimal128 string");if(e[E]==="e"||e[E]==="E"){let j=e.substr(++E).match(hde);if(!j||!j[2])return new t(YA);g=parseInt(j[0],10),E=E+j[0].length}if(e[E])return new t(YA);if(!h)d[0]=0,c=1,h=1,a=0;else if(y=h-1,a=c,a!==1)for(;e[p+a-1+Number(s)+Number(i)]==="0";)a=a-1;for(g<=l&&l>g+16384?g=hd:g=g-l;g>Bl;){if(y=y+1,y>=hk){if(a===0){g=Bl;break}ei(e,"overflow")}g=g-1}if(r.allowRounding){for(;g<hd||h<c;){if(y===0&&a<h){g=hd,a=0;break}if(h<c?c=c-1:y=y-1,g<Bl)g=g+1;else{if(d.join("").match(/^0+$/)){g=Bl;break}ei(e,"overflow")}}if(y+1<a){let j=u;i&&(p=p+1,j=j+1),s&&(p=p+1,j=j+1);let U=parseInt(e[p+y+1],10),oe=0;if(U>=5&&(oe=1,U===5)){oe=d[y]%2===1?1:0;for(let Q=p+y+2;Q<j;Q++)if(parseInt(e[Q],10)){oe=1;break}}if(oe){let Q=y;for(;Q>=0&&++d[Q]>9;Q--)if(d[Q]=0,Q===0)if(g<Bl)g=g+1,d[Q]=1;else return new t(n?fk:mk)}}}else{for(;g<hd||h<c;){if(y===0){if(a===0){g=hd;break}ei(e,"exponent underflow")}h<c?(e[c-1+Number(s)+Number(i)]!=="0"&&a!==0&&ei(e,"inexact rounding"),c=c-1):(d[y]!==0&&ei(e,"inexact rounding"),y=y-1),g<Bl?g=g+1:ei(e,"overflow")}y+1<a&&(i&&(p=p+1),s&&(p=p+1),parseInt(e[p+y+1],10)!==0&&ei(e,"inexact rounding"))}if(_=Z.fromNumber(0),S=Z.fromNumber(0),a===0)_=Z.fromNumber(0),S=Z.fromNumber(0);else if(y<17){let j=0;for(S=Z.fromNumber(d[j++]),_=new Z(0,0);j<=y;j++)S=S.multiply(Z.fromNumber(10)),S=S.add(Z.fromNumber(d[j]))}else{let j=0;for(_=Z.fromNumber(d[j++]);j<=y-17;j++)_=_.multiply(Z.fromNumber(10)),_=_.add(Z.fromNumber(d[j]));for(S=Z.fromNumber(d[j++]);j<=y;j++)S=S.multiply(Z.fromNumber(10)),S=S.add(Z.fromNumber(d[j]))}let R=_de(_,Z.fromString("100000000000000000"));R.low=R.low.add(S),Ede(R.low,S)&&(R.high=R.high.add(Z.fromNumber(1))),O=g+dk;let M={low:Z.fromNumber(0),high:Z.fromNumber(0)};R.high.shiftRightUnsigned(49).and(Z.fromNumber(1)).equals(Z.fromNumber(1))?(M.high=M.high.or(Z.fromNumber(3).shiftLeft(61)),M.high=M.high.or(Z.fromNumber(O).and(Z.fromNumber(16383).shiftLeft(47))),M.high=M.high.or(R.high.and(Z.fromNumber(0x7fffffffffff)))):(M.high=M.high.or(Z.fromNumber(O&16383).shiftLeft(49)),M.high=M.high.or(R.high.and(Z.fromNumber(562949953421311)))),M.low=R.low,n&&(M.high=M.high.or(Z.fromString("9223372036854775808")));let I=B.allocateUnsafe(16);return E=0,I[E++]=M.low.low&255,I[E++]=M.low.low>>8&255,I[E++]=M.low.low>>16&255,I[E++]=M.low.low>>24&255,I[E++]=M.low.high&255,I[E++]=M.low.high>>8&255,I[E++]=M.low.high>>16&255,I[E++]=M.low.high>>24&255,I[E++]=M.high.low&255,I[E++]=M.high.low>>8&255,I[E++]=M.high.low>>16&255,I[E++]=M.high.low>>24&255,I[E++]=M.high.high&255,I[E++]=M.high.high>>8&255,I[E++]=M.high.high>>16&255,I[E++]=M.high.high>>24&255,new t(I)}toString(){let e,r=0,n=new Array(36);for(let E=0;E<n.length;E++)n[E]=0;let s=0,i=!1,o,a={parts:[0,0,0,0]},u,c,l=[];s=0;let p=this.bytes,d=p[s++]|p[s++]<<8|p[s++]<<16|p[s++]<<24,h=p[s++]|p[s++]<<8|p[s++]<<16|p[s++]<<24,f=p[s++]|p[s++]<<8|p[s++]<<16|p[s++]<<24,y=p[s++]|p[s++]<<8|p[s++]<<16|p[s++]<<24;s=0,{low:new Z(d,h),high:new Z(f,y)}.high.lessThan(Z.ZERO)&&l.push("-");let _=y>>26&fde;if(_>>3===3){if(_===mde)return l.join("")+"Infinity";if(_===yde)return"NaN";e=y>>15&yk,o=8+(y>>14&1)}else o=y>>14&7,e=y>>17&yk;let S=e-dk;if(a.parts[0]=(y&16383)+((o&15)<<14),a.parts[1]=f,a.parts[2]=h,a.parts[3]=d,a.parts[0]===0&&a.parts[1]===0&&a.parts[2]===0&&a.parts[3]===0)i=!0;else for(c=3;c>=0;c--){let E=0,A=gde(a);if(a=A.quotient,E=A.rem.low,!!E)for(u=8;u>=0;u--)n[c*9+u]=E%10,E=Math.floor(E/10)}if(i)r=1,n[s]=0;else for(r=36;!n[s];)r=r-1,s=s+1;let O=r-1+S;if(O>=34||O<=-7||S>0){if(r>34)return l.push("0"),S>0?l.push(`E+${S}`):S<0&&l.push(`E${S}`),l.join("");l.push(`${n[s++]}`),r=r-1,r&&l.push(".");for(let E=0;E<r;E++)l.push(`${n[s++]}`);l.push("E"),O>0?l.push(`+${O}`):l.push(`${O}`)}else if(S>=0)for(let E=0;E<r;E++)l.push(`${n[s++]}`);else{let E=r+S;if(E>0)for(let A=0;A<E;A++)l.push(`${n[s++]}`);else l.push("0");for(l.push(".");E++<0;)l.push("0");for(let A=0;A<r-Math.max(E-1,0);A++)l.push(`${n[s++]}`)}return l.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON(e){return t.fromString(e.$numberDecimal)}inspect(e,r,n){return n??=es,`new Decimal128(${n(this.toString(),r)})`}},Aa=class t extends Jr{get _bsontype(){return"Double"}value;constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=+e}static fromString(e){let r=Number(e);if(e==="NaN")return new t(NaN);if(e==="Infinity")return new t(1/0);if(e==="-Infinity")return new t(-1/0);if(!Number.isFinite(r))throw new k(`Input: ${e} is not representable as a Double`);if(e.trim()!==e)throw new k(`Input: '${e}' contains whitespace`);if(e==="")throw new k("Input is an empty string");if(/[^-0-9.+eE]/.test(e))throw new k(`Input: '${e}' is not in decimal or exponential notation`);return new t(r)}valueOf(){return this.value}toJSON(){return this.value}toString(e){return this.value.toString(e)}toExtendedJSON(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-0.0"}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON(e,r){let n=parseFloat(e.$numberDouble);return r&&r.relaxed?n:new t(n)}inspect(e,r,n){return n??=es,`new Double(${n(this.value,r)})`}},Oa=class t extends Jr{get _bsontype(){return"Int32"}value;constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=+e|0}static fromString(e){let r=jk(e),n=Number(e);if(yd<n)throw new k(`Input: '${e}' is larger than the maximum value for Int32`);if(gd>n)throw new k(`Input: '${e}' is smaller than the minimum value for Int32`);if(Number.isSafeInteger(n)){if(n.toString()!==r)throw new k(`Input: '${e}' is not a valid Int32 string`)}else throw new k(`Input: '${e}' is not a safe integer`);return new t(n)}valueOf(){return this.value}toString(e){return this.value.toString(e)}toJSON(){return this.value}toExtendedJSON(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}}static fromExtendedJSON(e,r){return r&&r.relaxed?parseInt(e.$numberInt,10):new t(e.$numberInt)}inspect(e,r,n){return n??=es,`new Int32(${n(this.value,r)})`}},Bu=class t extends Jr{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new t}inspect(){return"new MaxKey()"}},Iu=class t extends Jr{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new t}inspect(){return"new MinKey()"}},Tu=null,fd=new WeakMap,Ca=class t extends Jr{get _bsontype(){return"ObjectId"}static index=Math.floor(Math.random()*16777215);static cacheHexString;buffer;constructor(e){super();let r;if(typeof e=="object"&&e&&"id"in e){if(typeof e.id!="string"&&!ArrayBuffer.isView(e.id))throw new k("Argument passed in must have an id that is of type string or Buffer");"toHexString"in e&&typeof e.toHexString=="function"?r=B.fromHex(e.toHexString()):r=e.id}else r=e;if(r==null)this.buffer=t.generate();else if(ArrayBuffer.isView(r)&&r.byteLength===12)this.buffer=B.toLocalBufferType(r);else if(typeof r=="string")if(t.validateHexString(r))this.buffer=B.fromHex(r),t.cacheHexString&&fd.set(this,r);else throw new k("input must be a 24 character hex string, 12 byte Uint8Array, or an integer");else throw new k("Argument passed in does not match the accepted types")}get id(){return this.buffer}set id(e){this.buffer=e,t.cacheHexString&&fd.set(this,B.toHex(e))}static validateHexString(e){if(e?.length!==24)return!1;for(let r=0;r<24;r++){let n=e.charCodeAt(r);if(!(n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70))return!1}return!0}toHexString(){if(t.cacheHexString){let r=fd.get(this);if(r)return r}let e=B.toHex(this.id);return t.cacheHexString&&fd.set(this,e),e}static getInc(){return t.index=(t.index+1)%16777215}static generate(e){typeof e!="number"&&(e=Math.floor(Date.now()/1e3));let r=t.getInc(),n=B.allocateUnsafe(12);return ie.setInt32BE(n,0,e),Tu===null&&(Tu=B.randomBytes(5)),n[4]=Tu[0],n[5]=Tu[1],n[6]=Tu[2],n[7]=Tu[3],n[8]=Tu[4],n[11]=r&255,n[10]=r>>8&255,n[9]=r>>16&255,n}toString(e){return e==="base64"?B.toBase64(this.id):e==="hex"?this.toHexString():this.toHexString()}toJSON(){return this.toHexString()}static is(e){return e!=null&&typeof e=="object"&&"_bsontype"in e&&e._bsontype==="ObjectId"}equals(e){if(e==null)return!1;if(t.is(e))return this.buffer[11]===e.buffer[11]&&B.equals(this.buffer,e.buffer);if(typeof e=="string")return e.toLowerCase()===this.toHexString();if(typeof e=="object"&&typeof e.toHexString=="function"){let r=e.toHexString(),n=this.toHexString();return typeof r=="string"&&r.toLowerCase()===n}return!1}getTimestamp(){let e=new Date,r=ie.getUint32BE(this.buffer,0);return e.setTime(Math.floor(r)*1e3),e}static createPk(){return new t}serializeInto(e,r){return e[r]=this.buffer[0],e[r+1]=this.buffer[1],e[r+2]=this.buffer[2],e[r+3]=this.buffer[3],e[r+4]=this.buffer[4],e[r+5]=this.buffer[5],e[r+6]=this.buffer[6],e[r+7]=this.buffer[7],e[r+8]=this.buffer[8],e[r+9]=this.buffer[9],e[r+10]=this.buffer[10],e[r+11]=this.buffer[11],12}static createFromTime(e){let r=B.allocate(12);for(let n=11;n>=4;n--)r[n]=0;return ie.setInt32BE(r,0,e),new t(r)}static createFromHexString(e){if(e?.length!==24)throw new k("hex string must be 24 characters");return new t(B.fromHex(e))}static createFromBase64(e){if(e?.length!==16)throw new k("base64 string must be 16 characters");return new t(B.fromBase64(e))}static isValid(e){if(e==null)return!1;if(typeof e=="string")return t.validateHexString(e);try{return new t(e),!0}catch{return!1}}toExtendedJSON(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}static fromExtendedJSON(e){return new t(e.$oid)}isCached(){return t.cacheHexString&&fd.has(this)}inspect(e,r,n){return n??=es,`new ObjectId(${n(this.toHexString(),r)})`}};function H0(t,e,r){let n=5;if(Array.isArray(t))for(let s=0;s<t.length;s++)n+=_k(s.toString(),t[s],e,!0,r);else{typeof t?.toBSON=="function"&&(t=t.toBSON());for(let s of Object.keys(t))n+=_k(s,t[s],e,!1,r)}return n}function _k(t,e,r=!1,n=!1,s=!1){switch(typeof e?.toBSON=="function"&&(e=e.toBSON()),typeof e){case"string":return 1+B.utf8ByteLength(t)+1+4+B.utf8ByteLength(e)+1;case"number":return Math.floor(e)===e&&e>=Ok&&e<=Ak&&e>=gd&&e<=yd?(t!=null?B.utf8ByteLength(t)+1:0)+5:(t!=null?B.utf8ByteLength(t)+1:0)+9;case"undefined":return n||!s?(t!=null?B.utf8ByteLength(t)+1:0)+1:0;case"boolean":return(t!=null?B.utf8ByteLength(t)+1:0)+2;case"object":if(e!=null&&typeof e._bsontype=="string"&&e[$l]!==Mu)throw new yo;if(e==null||e._bsontype==="MinKey"||e._bsontype==="MaxKey")return(t!=null?B.utf8ByteLength(t)+1:0)+1;if(e._bsontype==="ObjectId")return(t!=null?B.utf8ByteLength(t)+1:0)+13;if(e instanceof Date||kl(e))return(t!=null?B.utf8ByteLength(t)+1:0)+9;if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer||E6(e))return(t!=null?B.utf8ByteLength(t)+1:0)+6+e.byteLength;if(e._bsontype==="Long"||e._bsontype==="Double"||e._bsontype==="Timestamp")return(t!=null?B.utf8ByteLength(t)+1:0)+9;if(e._bsontype==="Decimal128")return(t!=null?B.utf8ByteLength(t)+1:0)+17;if(e._bsontype==="Code")return e.scope!=null&&Object.keys(e.scope).length>0?(t!=null?B.utf8ByteLength(t)+1:0)+1+4+4+B.utf8ByteLength(e.code.toString())+1+H0(e.scope,r,s):(t!=null?B.utf8ByteLength(t)+1:0)+1+4+B.utf8ByteLength(e.code.toString())+1;if(e._bsontype==="Binary"){let i=e;return i.sub_type===Pt.SUBTYPE_BYTE_ARRAY?(t!=null?B.utf8ByteLength(t)+1:0)+(i.position+1+4+1+4):(t!=null?B.utf8ByteLength(t)+1:0)+(i.position+1+4+1)}else{if(e._bsontype==="Symbol")return(t!=null?B.utf8ByteLength(t)+1:0)+B.utf8ByteLength(e.value)+4+1+1;if(e._bsontype==="DBRef"){let i=Object.assign({$ref:e.collection,$id:e.oid},e.fields);return e.db!=null&&(i.$db=e.db),(t!=null?B.utf8ByteLength(t)+1:0)+1+H0(i,r,s)}else return e instanceof RegExp||Nl(e)?(t!=null?B.utf8ByteLength(t)+1:0)+1+B.utf8ByteLength(e.source)+1+(e.global?1:0)+(e.ignoreCase?1:0)+(e.multiline?1:0)+1:e._bsontype==="BSONRegExp"?(t!=null?B.utf8ByteLength(t)+1:0)+1+B.utf8ByteLength(e.pattern)+1+B.utf8ByteLength(e.options)+1:(t!=null?B.utf8ByteLength(t)+1:0)+H0(e,r,s)+1}case"function":return r?(t!=null?B.utf8ByteLength(t)+1:0)+1+4+B.utf8ByteLength(e.toString())+1:0;case"bigint":return(t!=null?B.utf8ByteLength(t)+1:0)+9;case"symbol":return 0;default:throw new k(`Unrecognized JS type: ${typeof e}`)}}function bde(t){return t.split("").sort().join("")}var _o=class t extends Jr{get _bsontype(){return"BSONRegExp"}pattern;options;constructor(e,r){if(super(),this.pattern=e,this.options=bde(r??""),this.pattern.indexOf("\0")!==-1)throw new k(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(this.options.indexOf("\0")!==-1)throw new k(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let n=0;n<this.options.length;n++)if(!(this.options[n]==="i"||this.options[n]==="m"||this.options[n]==="x"||this.options[n]==="l"||this.options[n]==="s"||this.options[n]==="u"))throw new k(`The regular expression option [${this.options[n]}] is not supported`)}static parseOptions(e){return e?e.split("").sort().join(""):""}toExtendedJSON(e){return e=e||{},e.legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON(e){if("$regex"in e)if(typeof e.$regex!="string"){if(e.$regex._bsontype==="BSONRegExp")return e}else return new t(e.$regex,t.parseOptions(e.$options));if("$regularExpression"in e)return new t(e.$regularExpression.pattern,t.parseOptions(e.$regularExpression.options));throw new k(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(e)}`)}inspect(e,r,n){let s=K1e(r)??(a=>a);n??=es;let i=s(n(this.pattern),"regexp"),o=s(n(this.options),"regexp");return`new BSONRegExp(${i}, ${o})`}},Nu=class t extends Jr{get _bsontype(){return"BSONSymbol"}value;constructor(e){super(),this.value=e}valueOf(){return this.value}toString(){return this.value}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON(e){return new t(e.$symbol)}inspect(e,r,n){return n??=es,`new BSONSymbol(${n(this.value,r)})`}},Sde=Z,ku=class t extends Sde{get _bsontype(){return"Timestamp"}get[Q0](){return"Timestamp"}static MAX_VALUE=Z.MAX_UNSIGNED_VALUE;get i(){return this.low>>>0}get t(){return this.high>>>0}constructor(e){if(e==null)super(0,0,!0);else if(typeof e=="bigint")super(e,!0);else if(Z.isLong(e))super(e.low,e.high,!0);else if(typeof e=="object"&&"t"in e&&"i"in e){if(typeof e.t!="number"&&(typeof e.t!="object"||e.t._bsontype!=="Int32"))throw new k("Timestamp constructed from { t, i } must provide t as a number");if(typeof e.i!="number"&&(typeof e.i!="object"||e.i._bsontype!=="Int32"))throw new k("Timestamp constructed from { t, i } must provide i as a number");let r=Number(e.t),n=Number(e.i);if(r<0||Number.isNaN(r))throw new k("Timestamp constructed from { t, i } must provide a positive t");if(n<0||Number.isNaN(n))throw new k("Timestamp constructed from { t, i } must provide a positive i");if(r>4294967295)throw new k("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if(n>4294967295)throw new k("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super(n,r,!0)}else throw new k("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }")}toJSON(){return{$timestamp:this.toString()}}static fromInt(e){return new t(Z.fromInt(e,!0))}static fromNumber(e){return new t(Z.fromNumber(e,!0))}static fromBits(e,r){return new t({i:e,t:r})}static fromString(e,r){return new t(Z.fromString(e,!0,r))}toExtendedJSON(){return{$timestamp:{t:this.t,i:this.i}}}static fromExtendedJSON(e){let r=Z.isLong(e.$timestamp.i)?e.$timestamp.i.getLowBitsUnsigned():e.$timestamp.i,n=Z.isLong(e.$timestamp.t)?e.$timestamp.t.getLowBitsUnsigned():e.$timestamp.t;return new t({t:n,i:r})}inspect(e,r,n){n??=es;let s=n(this.t,r),i=n(this.i,r);return`new Timestamp({ t: ${s}, i: ${i} })`}},wde=Z.fromNumber(Ak),Ade=Z.fromNumber(Ok);function Uk(t,e,r){e=e??{};let n=e&&e.index?e.index:0,s=ie.getInt32LE(t,n);if(s<5)throw new k(`bson size must be >= 5, is ${s}`);if(e.allowObjectSmallerThanBufferSize&&t.length<s)throw new k(`buffer length ${t.length} must be >= bson size ${s}`);if(!e.allowObjectSmallerThanBufferSize&&t.length!==s)throw new k(`buffer length ${t.length} must === bson size ${s}`);if(s+n>t.byteLength)throw new k(`(bson size ${s} + options.index ${n} must be <= buffer length ${t.byteLength})`);if(t[n+s-1]!==0)throw new k("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return G0(t,n,e,r)}var Ode=/^\$ref$|^\$id$|^\$db$/;function G0(t,e,r,n=!1){let s=r.fieldsAsRaw==null?null:r.fieldsAsRaw,i=r.raw==null?!1:r.raw,o=typeof r.bsonRegExp=="boolean"?r.bsonRegExp:!1,a=r.promoteBuffers??!1,u=r.promoteLongs??!0,c=r.promoteValues??!0,l=r.useBigInt64??!1;if(l&&!c)throw new k("Must either request bigint or Long for int64 deserialization");if(l&&!u)throw new k("Must either request bigint or Long for int64 deserialization");let p=r.validation==null?{utf8:!0}:r.validation,d=!0,h,f,y=p.utf8;if(typeof y=="boolean")h=y;else{d=!1;let A=Object.keys(y).map(function(x){return y[x]});if(A.length===0)throw new k("UTF-8 validation setting cannot be empty");if(typeof A[0]!="boolean")throw new k("Invalid UTF-8 validation option, must specify boolean values");if(h=A[0],!A.every(x=>x===h))throw new k("Invalid UTF-8 validation option - keys must be all true or all false")}if(!d){f=new Set;for(let A of Object.keys(y))f.add(A)}let g=e;if(t.length<5)throw new k("corrupt bson message < 5 bytes long");let _=ie.getInt32LE(t,e);if(e+=4,_<5||_>t.length)throw new k("corrupt bson message");let S=n?[]:{},O=0,E=n?!1:null;for(;;){let A=t[e++];if(A===0)break;let x=e;for(;t[x]!==0&&x<t.length;)x++;if(x>=t.byteLength)throw new k("Bad BSON Document: illegal CString");let v=n?O++:B.toUTF8(t,e,x,!1),R=!0;d||f?.has(v)?R=h:R=!h,E!==!1&&v[0]==="$"&&(E=Ode.test(v));let M;if(e=x+1,A===Ck){let I=ie.getInt32LE(t,e);if(e+=4,I<=0||I>t.length-e||t[e+I-1]!==0)throw new k("bad string length in bson");M=B.toUTF8(t,e,e+I-1,R),e=e+I}else if(A===xk){let I=B.allocateUnsafe(12);for(let j=0;j<12;j++)I[j]=t[e+j];M=new Ca(I),e=e+12}else if(A===md&&c===!1)M=new Oa(ie.getInt32LE(t,e)),e+=4;else if(A===md)M=ie.getInt32LE(t,e),e+=4;else if(A===S6)M=ie.getFloat64LE(t,e),e+=8,c===!1&&(M=new Aa(M));else if(A===Dk){let I=ie.getInt32LE(t,e),j=ie.getInt32LE(t,e+4);e+=8,M=new Date(new Z(I,j).toNumber())}else if(A===Tk){if(t[e]!==0&&t[e]!==1)throw new k("illegal boolean type value");M=t[e++]===1}else if(A===w6){let I=e,j=ie.getInt32LE(t,e);if(j<=0||j>t.length-e)throw new k("bad embedded document length in bson");if(i)M=t.subarray(e,e+j);else{let U=r;d||(U={...r,validation:{utf8:R}}),M=G0(t,I,U,!1)}e=e+j}else if(A===vk){let I=e,j=ie.getInt32LE(t,e),U=r,oe=e+j;if(s&&s[v]&&(U={...r,raw:!0}),d||(U={...U,validation:{utf8:R}}),M=G0(t,I,U,!0),e=e+j,t[e-1]!==0)throw new k("invalid array terminator byte");if(e!==oe)throw new k("corrupted array bson")}else if(A===H1e)M=void 0;else if(A===O6)M=null;else if(A===v6)if(l)M=ie.getBigInt64LE(t,e),e+=8;else{let I=ie.getInt32LE(t,e),j=ie.getInt32LE(t,e+4);e+=8;let U=new Z(I,j);u&&c===!0?M=U.lessThanOrEqual(wde)&&U.greaterThanOrEqual(Ade)?U.toNumber():U:M=U}else if(A===Ik){let I=B.allocateUnsafe(16);for(let j=0;j<16;j++)I[j]=t[e+j];e=e+16,M=new Pu(I)}else if(A===A6){let I=ie.getInt32LE(t,e);e+=4;let j=I,U=t[e++];if(I<0)throw new k("Negative binary type element size found");if(I>t.byteLength)throw new k("Binary type size larger than document size");if(U===Pt.SUBTYPE_BYTE_ARRAY){if(I=ie.getInt32LE(t,e),e+=4,I<0)throw new k("Negative binary type element size found for subtype 0x02");if(I>j-4)throw new k("Binary type with subtype 0x02 contains too long binary size");if(I<j-4)throw new k("Binary type with subtype 0x02 contains too short binary size")}a&&c?M=B.toLocalBufferType(t.subarray(e,e+I)):(M=new Pt(t.subarray(e,e+I),U),U===x6&&wa.isValid(M)&&(M=M.toUUID())),e=e+I}else if(A===J0&&o===!1){for(x=e;t[x]!==0&&x<t.length;)x++;if(x>=t.length)throw new k("Bad BSON Document: illegal CString");let I=B.toUTF8(t,e,x,!1);for(e=x+1,x=e;t[x]!==0&&x<t.length;)x++;if(x>=t.length)throw new k("Bad BSON Document: illegal CString");let j=B.toUTF8(t,e,x,!1);e=x+1;let U=new Array(j.length);for(x=0;x<j.length;x++)switch(j[x]){case"m":U[x]="m";break;case"s":U[x]="g";break;case"i":U[x]="i";break}M=new RegExp(I,U.join(""))}else if(A===J0&&o===!0){for(x=e;t[x]!==0&&x<t.length;)x++;if(x>=t.length)throw new k("Bad BSON Document: illegal CString");let I=B.toUTF8(t,e,x,!1);for(e=x+1,x=e;t[x]!==0&&x<t.length;)x++;if(x>=t.length)throw new k("Bad BSON Document: illegal CString");let j=B.toUTF8(t,e,x,!1);e=x+1,M=new _o(I,j)}else if(A===Mk){let I=ie.getInt32LE(t,e);if(e+=4,I<=0||I>t.length-e||t[e+I-1]!==0)throw new k("bad string length in bson");let j=B.toUTF8(t,e,e+I-1,R);M=c?j:new Nu(j),e=e+I}else if(A===Bk)M=new ku({i:ie.getUint32LE(t,e),t:ie.getUint32LE(t,e+4)}),e+=8;else if(A===Nk)M=new Iu;else if(A===kk)M=new Bu;else if(A===C6){let I=ie.getInt32LE(t,e);if(e+=4,I<=0||I>t.length-e||t[e+I-1]!==0)throw new k("bad string length in bson");let j=B.toUTF8(t,e,e+I-1,R);M=new go(j),e=e+I}else if(A===Pk){let I=ie.getInt32LE(t,e);if(e+=4,I<13)throw new k("code_w_scope total size shorter minimum expected length");let j=ie.getInt32LE(t,e);if(e+=4,j<=0||j>t.length-e||t[e+j-1]!==0)throw new k("bad string length in bson");let U=B.toUTF8(t,e,e+j-1,R);e=e+j;let oe=e,Q=ie.getInt32LE(t,e),un=G0(t,oe,r,!1);if(e=e+Q,I<8+Q+j)throw new k("code_w_scope total size is too short, truncating scope");if(I>8+Q+j)throw new k("code_w_scope total size is too long, clips outer document");M=new go(U,un)}else if(A===G1e){let I=ie.getInt32LE(t,e);if(e+=4,I<=0||I>t.length-e||t[e+I-1]!==0)throw new k("bad string length in bson");let j=B.toUTF8(t,e,e+I-1,R);e=e+I;let U=B.allocateUnsafe(12);for(let Q=0;Q<12;Q++)U[Q]=t[e+Q];let oe=new Ca(U);e=e+12,M=new qi(j,oe)}else throw new k(`Detected unknown BSON type ${A.toString(16)} for fieldname "${v}"`);v==="__proto__"?Object.defineProperty(S,v,{value:M,writable:!0,enumerable:!0,configurable:!0}):S[v]=M}if(_!==e-g)throw n?new k("corrupt array bson"):new k("corrupt object bson");if(!E)return S;if(qk(S)){let A=Object.assign({},S);return delete A.$ref,delete A.$id,delete A.$db,new qi(S.$ref,S.$id,S.$db,A)}return S}var Y0=/\x00/,Ek=new Set(["$db","$ref","$id","$clusterTime"]);function QA(t,e,r,n){t[n++]=Ck;let s=B.encodeUTF8Into(t,e,n);n=n+s+1,t[n-1]=0;let i=B.encodeUTF8Into(t,r,n+4);return ie.setInt32LE(t,n,i+1),n=n+4+i,t[n++]=0,n}function XA(t,e,r,n){let i=!Object.is(r,-0)&&Number.isSafeInteger(r)&&r<=yd&&r>=gd?md:S6;t[n++]=i;let o=B.encodeUTF8Into(t,e,n);return n=n+o,t[n++]=0,i===md?n+=ie.setInt32LE(t,n,r):n+=ie.setFloat64LE(t,n,r),n}function ZA(t,e,r,n){t[n++]=v6;let s=B.encodeUTF8Into(t,e,n);return n+=s,t[n++]=0,n+=ie.setBigInt64LE(t,n,r),n}function Il(t,e,r,n){t[n++]=O6;let s=B.encodeUTF8Into(t,e,n);return n=n+s,t[n++]=0,n}function e6(t,e,r,n){t[n++]=Tk;let s=B.encodeUTF8Into(t,e,n);return n=n+s,t[n++]=0,t[n++]=r?1:0,n}function t6(t,e,r,n){t[n++]=Dk;let s=B.encodeUTF8Into(t,e,n);n=n+s,t[n++]=0;let i=Z.fromNumber(r.getTime()),o=i.getLowBits(),a=i.getHighBits();return n+=ie.setInt32LE(t,n,o),n+=ie.setInt32LE(t,n,a),n}function r6(t,e,r,n){t[n++]=J0;let s=B.encodeUTF8Into(t,e,n);if(n=n+s,t[n++]=0,r.source&&r.source.match(Y0)!=null)throw new k("value "+r.source+" must not contain null bytes");return n=n+B.encodeUTF8Into(t,r.source,n),t[n++]=0,r.ignoreCase&&(t[n++]=105),r.global&&(t[n++]=115),r.multiline&&(t[n++]=109),t[n++]=0,n}function n6(t,e,r,n){t[n++]=J0;let s=B.encodeUTF8Into(t,e,n);if(n=n+s,t[n++]=0,r.pattern.match(Y0)!=null)throw new k("pattern "+r.pattern+" must not contain null bytes");n=n+B.encodeUTF8Into(t,r.pattern,n),t[n++]=0;let i=r.options.split("").sort().join("");return n=n+B.encodeUTF8Into(t,i,n),t[n++]=0,n}function s6(t,e,r,n){r===null?t[n++]=O6:r._bsontype==="MinKey"?t[n++]=Nk:t[n++]=kk;let s=B.encodeUTF8Into(t,e,n);return n=n+s,t[n++]=0,n}function i6(t,e,r,n){t[n++]=xk;let s=B.encodeUTF8Into(t,e,n);return n=n+s,t[n++]=0,n+=r.serializeInto(t,n),n}function o6(t,e,r,n){t[n++]=A6;let s=B.encodeUTF8Into(t,e,n);n=n+s,t[n++]=0;let i=r.length;if(n+=ie.setInt32LE(t,n,i),t[n++]=J1e,i<=16)for(let o=0;o<i;o++)t[n+o]=r[o];else t.set(r,n);return n=n+i,n}function a6(t,e,r,n,s,i,o,a,u){if(u.has(r))throw new k("Cannot convert circular structure to BSON");u.add(r),t[n++]=Array.isArray(r)?vk:w6;let c=B.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let l=_d(t,r,s,n,i+1,o,a,u);return u.delete(r),l}function u6(t,e,r,n){t[n++]=Ik;let s=B.encodeUTF8Into(t,e,n);n=n+s,t[n++]=0;for(let i=0;i<16;i++)t[n+i]=r.bytes[i];return n+16}function c6(t,e,r,n){t[n++]=r._bsontype==="Long"?v6:Bk;let s=B.encodeUTF8Into(t,e,n);n=n+s,t[n++]=0;let i=r.getLowBits(),o=r.getHighBits();return n+=ie.setInt32LE(t,n,i),n+=ie.setInt32LE(t,n,o),n}function l6(t,e,r,n){r=r.valueOf(),t[n++]=md;let s=B.encodeUTF8Into(t,e,n);return n=n+s,t[n++]=0,n+=ie.setInt32LE(t,n,r),n}function p6(t,e,r,n){t[n++]=S6;let s=B.encodeUTF8Into(t,e,n);return n=n+s,t[n++]=0,n+=ie.setFloat64LE(t,n,r.value),n}function d6(t,e,r,n){t[n++]=C6;let s=B.encodeUTF8Into(t,e,n);n=n+s,t[n++]=0;let i=r.toString(),o=B.encodeUTF8Into(t,i,n+4)+1;return ie.setInt32LE(t,n,o),n=n+4+o-1,t[n++]=0,n}function h6(t,e,r,n,s=!1,i=0,o=!1,a=!0,u){if(r.scope&&typeof r.scope=="object"){t[n++]=Pk;let c=B.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let l=n,p=r.code;n=n+4;let d=B.encodeUTF8Into(t,p,n+4)+1;ie.setInt32LE(t,n,d),t[n+4+d-1]=0,n=n+d+4;let h=_d(t,r.scope,s,n,i+1,o,a,u);n=h-1;let f=h-l;l+=ie.setInt32LE(t,l,f),t[n++]=0}else{t[n++]=C6;let c=B.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let l=r.code.toString(),p=B.encodeUTF8Into(t,l,n+4)+1;ie.setInt32LE(t,n,p),n=n+4+p-1,t[n++]=0}return n}function f6(t,e,r,n){t[n++]=A6;let s=B.encodeUTF8Into(t,e,n);n=n+s,t[n++]=0;let i=r.buffer,o=r.position;if(r.sub_type===Pt.SUBTYPE_BYTE_ARRAY&&(o=o+4),n+=ie.setInt32LE(t,n,o),t[n++]=r.sub_type,r.sub_type===Pt.SUBTYPE_BYTE_ARRAY&&(o=o-4,n+=ie.setInt32LE(t,n,o)),r.sub_type===Pt.SUBTYPE_VECTOR&&fo(r),o<=16)for(let a=0;a<o;a++)t[n+a]=i[a];else t.set(i,n);return n=n+r.position,n}function m6(t,e,r,n){t[n++]=Mk;let s=B.encodeUTF8Into(t,e,n);n=n+s,t[n++]=0;let i=B.encodeUTF8Into(t,r.value,n+4)+1;return ie.setInt32LE(t,n,i),n=n+4+i-1,t[n++]=0,n}function y6(t,e,r,n,s,i,o){t[n++]=w6;let a=B.encodeUTF8Into(t,e,n);n=n+a,t[n++]=0;let u=n,c={$ref:r.collection||r.namespace,$id:r.oid};r.db!=null&&(c.$db=r.db),c=Object.assign(c,r.fields);let l=_d(t,c,!1,n,s+1,i,!0,o),p=l-u;return u+=ie.setInt32LE(t,n,p),l}function _d(t,e,r,n,s,i,o,a){if(a==null){if(e==null)return t[0]=5,t[1]=0,t[2]=0,t[3]=0,t[4]=0,5;if(Array.isArray(e))throw new k("serialize does not support an array as the root input");if(typeof e!="object")throw new k("serialize does not support non-object as the root input");if("_bsontype"in e&&typeof e._bsontype=="string")throw new k("BSON types cannot be serialized as a document");if(kl(e)||Nl(e)||ba(e)||E6(e))throw new k("date, regexp, typedarray, and arraybuffer cannot be BSON documents");a=new Set}a.add(e);let u=n+4;if(Array.isArray(e))for(let l=0;l<e.length;l++){let p=`${l}`,d=e[l];typeof d?.toBSON=="function"&&(d=d.toBSON());let h=typeof d;if(d===void 0)u=Il(t,p,d,u);else if(d===null)u=Il(t,p,d,u);else if(h==="string")u=QA(t,p,d,u);else if(h==="number")u=XA(t,p,d,u);else if(h==="bigint")u=ZA(t,p,d,u);else if(h==="boolean")u=e6(t,p,d,u);else if(h==="object"&&d._bsontype==null)d instanceof Date||kl(d)?u=t6(t,p,d,u):d instanceof Uint8Array||ba(d)?u=o6(t,p,d,u):d instanceof RegExp||Nl(d)?u=r6(t,p,d,u):u=a6(t,p,d,u,r,s,i,o,a);else if(h==="object"){if(d[$l]!==Mu)throw new yo;if(d._bsontype==="ObjectId")u=i6(t,p,d,u);else if(d._bsontype==="Decimal128")u=u6(t,p,d,u);else if(d._bsontype==="Long"||d._bsontype==="Timestamp")u=c6(t,p,d,u);else if(d._bsontype==="Double")u=p6(t,p,d,u);else if(d._bsontype==="Code")u=h6(t,p,d,u,r,s,i,o,a);else if(d._bsontype==="Binary")u=f6(t,p,d,u);else if(d._bsontype==="BSONSymbol")u=m6(t,p,d,u);else if(d._bsontype==="DBRef")u=y6(t,p,d,u,s,i,a);else if(d._bsontype==="BSONRegExp")u=n6(t,p,d,u);else if(d._bsontype==="Int32")u=l6(t,p,d,u);else if(d._bsontype==="MinKey"||d._bsontype==="MaxKey")u=s6(t,p,d,u);else if(typeof d._bsontype<"u")throw new k(`Unrecognized or invalid _bsontype: ${String(d._bsontype)}`)}else h==="function"&&i&&(u=d6(t,p,d,u))}else if(e instanceof Map||b6(e)){let l=e.entries(),p=!1;for(;!p;){let d=l.next();if(p=!!d.done,p)continue;let h=d.value?d.value[0]:void 0,f=d.value?d.value[1]:void 0;typeof f?.toBSON=="function"&&(f=f.toBSON());let y=typeof f;if(typeof h=="string"&&!Ek.has(h)){if(h.match(Y0)!=null)throw new k("key "+h+" must not contain null bytes");if(r){if(h[0]==="$")throw new k("key "+h+" must not start with '$'");if(h.includes("."))throw new k("key "+h+" must not contain '.'")}}if(f===void 0)o===!1&&(u=Il(t,h,f,u));else if(f===null)u=Il(t,h,f,u);else if(y==="string")u=QA(t,h,f,u);else if(y==="number")u=XA(t,h,f,u);else if(y==="bigint")u=ZA(t,h,f,u);else if(y==="boolean")u=e6(t,h,f,u);else if(y==="object"&&f._bsontype==null)f instanceof Date||kl(f)?u=t6(t,h,f,u):f instanceof Uint8Array||ba(f)?u=o6(t,h,f,u):f instanceof RegExp||Nl(f)?u=r6(t,h,f,u):u=a6(t,h,f,u,r,s,i,o,a);else if(y==="object"){if(f[$l]!==Mu)throw new yo;if(f._bsontype==="ObjectId")u=i6(t,h,f,u);else if(f._bsontype==="Decimal128")u=u6(t,h,f,u);else if(f._bsontype==="Long"||f._bsontype==="Timestamp")u=c6(t,h,f,u);else if(f._bsontype==="Double")u=p6(t,h,f,u);else if(f._bsontype==="Code")u=h6(t,h,f,u,r,s,i,o,a);else if(f._bsontype==="Binary")u=f6(t,h,f,u);else if(f._bsontype==="BSONSymbol")u=m6(t,h,f,u);else if(f._bsontype==="DBRef")u=y6(t,h,f,u,s,i,a);else if(f._bsontype==="BSONRegExp")u=n6(t,h,f,u);else if(f._bsontype==="Int32")u=l6(t,h,f,u);else if(f._bsontype==="MinKey"||f._bsontype==="MaxKey")u=s6(t,h,f,u);else if(typeof f._bsontype<"u")throw new k(`Unrecognized or invalid _bsontype: ${String(f._bsontype)}`)}else y==="function"&&i&&(u=d6(t,h,f,u))}}else{if(typeof e?.toBSON=="function"&&(e=e.toBSON(),e!=null&&typeof e!="object"))throw new k("toBSON function did not return an object");for(let l of Object.keys(e)){let p=e[l];typeof p?.toBSON=="function"&&(p=p.toBSON());let d=typeof p;if(typeof l=="string"&&!Ek.has(l)){if(l.match(Y0)!=null)throw new k("key "+l+" must not contain null bytes");if(r){if(l[0]==="$")throw new k("key "+l+" must not start with '$'");if(l.includes("."))throw new k("key "+l+" must not contain '.'")}}if(p===void 0)o===!1&&(u=Il(t,l,p,u));else if(p===null)u=Il(t,l,p,u);else if(d==="string")u=QA(t,l,p,u);else if(d==="number")u=XA(t,l,p,u);else if(d==="bigint")u=ZA(t,l,p,u);else if(d==="boolean")u=e6(t,l,p,u);else if(d==="object"&&p._bsontype==null)p instanceof Date||kl(p)?u=t6(t,l,p,u):p instanceof Uint8Array||ba(p)?u=o6(t,l,p,u):p instanceof RegExp||Nl(p)?u=r6(t,l,p,u):u=a6(t,l,p,u,r,s,i,o,a);else if(d==="object"){if(p[$l]!==Mu)throw new yo;if(p._bsontype==="ObjectId")u=i6(t,l,p,u);else if(p._bsontype==="Decimal128")u=u6(t,l,p,u);else if(p._bsontype==="Long"||p._bsontype==="Timestamp")u=c6(t,l,p,u);else if(p._bsontype==="Double")u=p6(t,l,p,u);else if(p._bsontype==="Code")u=h6(t,l,p,u,r,s,i,o,a);else if(p._bsontype==="Binary")u=f6(t,l,p,u);else if(p._bsontype==="BSONSymbol")u=m6(t,l,p,u);else if(p._bsontype==="DBRef")u=y6(t,l,p,u,s,i,a);else if(p._bsontype==="BSONRegExp")u=n6(t,l,p,u);else if(p._bsontype==="Int32")u=l6(t,l,p,u);else if(p._bsontype==="MinKey"||p._bsontype==="MaxKey")u=s6(t,l,p,u);else if(typeof p._bsontype<"u")throw new k(`Unrecognized or invalid _bsontype: ${String(p._bsontype)}`)}else d==="function"&&i&&(u=d6(t,l,p,u))}}a.delete(e),t[u++]=0;let c=u-n;return n+=ie.setInt32LE(t,n,c),u}function Cde(t){return t!=null&&typeof t=="object"&&"_bsontype"in t&&typeof t._bsontype=="string"}var vde={$oid:Ca,$binary:Pt,$uuid:Pt,$symbol:Nu,$numberInt:Oa,$numberDecimal:Pu,$numberDouble:Aa,$numberLong:Z,$minKey:Iu,$maxKey:Bu,$regex:_o,$regularExpression:_o,$timestamp:ku};function Vk(t,e={}){if(typeof t=="number"){let n=t<=yd&&t>=gd,s=t<=Sk&&t>=wk;if(e.relaxed||e.legacy)return t;if(Number.isInteger(t)&&!Object.is(t,-0)){if(n)return new Oa(t);if(s)return e.useBigInt64?BigInt(t):Z.fromNumber(t)}return new Aa(t)}if(t==null||typeof t!="object")return t;if(t.$undefined)return null;let r=Object.keys(t).filter(n=>n.startsWith("$")&&t[n]!=null);for(let n=0;n<r.length;n++){let s=vde[r[n]];if(s)return s.fromExtendedJSON(t,e)}if(t.$date!=null){let n=t.$date,s=new Date;if(e.legacy)if(typeof n=="number")s.setTime(n);else if(typeof n=="string")s.setTime(Date.parse(n));else if(typeof n=="bigint")s.setTime(Number(n));else throw new ql(`Unrecognized type for EJSON date: ${typeof n}`);else if(typeof n=="string")s.setTime(Date.parse(n));else if(Z.isLong(n))s.setTime(n.toNumber());else if(typeof n=="number"&&e.relaxed)s.setTime(n);else if(typeof n=="bigint")s.setTime(Number(n));else throw new ql(`Unrecognized type for EJSON date: ${typeof n}`);return s}if(t.$code!=null){let n=Object.assign({},t);return t.$scope&&(n.$scope=Vk(t.$scope)),go.fromExtendedJSON(t)}if(qk(t)||t.$dbPointer){let n=t.$ref?t:t.$dbPointer;if(n instanceof qi)return n;let s=Object.keys(n).filter(o=>o.startsWith("$")),i=!0;if(s.forEach(o=>{["$ref","$id","$db"].indexOf(o)===-1&&(i=!1)}),i)return qi.fromExtendedJSON(n)}return t}function xde(t,e){return t.map((r,n)=>{e.seenObjects.push({propertyName:`index ${n}`,obj:null});try{return mo(r,e)}finally{e.seenObjects.pop()}})}function bk(t){let e=t.toISOString();return t.getUTCMilliseconds()!==0?e:e.slice(0,-5)+"Z"}function mo(t,e){if(t instanceof Map||b6(t)){let r=Object.create(null);for(let[n,s]of t){if(typeof n!="string")throw new k("Can only serialize maps with string keys");r[n]=s}return mo(r,e)}if((typeof t=="object"||typeof t=="function")&&t!==null){let r=e.seenObjects.findIndex(n=>n.obj===t);if(r!==-1){let n=e.seenObjects.map(l=>l.propertyName),s=n.slice(0,r).map(l=>`${l} -> `).join(""),i=n[r],o=" -> "+n.slice(r+1,n.length-1).map(l=>`${l} -> `).join(""),a=n[n.length-1],u=" ".repeat(s.length+i.length/2),c="-".repeat(o.length+(i.length+a.length)/2-1);throw new k(`Converting circular structure to EJSON:
    ${s}${i}${o}${a}
    ${u}\\${c}/`)}e.seenObjects[e.seenObjects.length-1].obj=t}if(Array.isArray(t))return xde(t,e);if(t===void 0)return null;if(t instanceof Date||kl(t)){let r=t.getTime(),n=r>-1&&r<2534023188e5;return e.legacy?e.relaxed&&n?{$date:t.getTime()}:{$date:bk(t)}:e.relaxed&&n?{$date:bk(t)}:{$date:{$numberLong:t.getTime().toString()}}}if(typeof t=="number"&&(!e.relaxed||!isFinite(t))){if(Number.isInteger(t)&&!Object.is(t,-0)){if(t>=gd&&t<=yd)return{$numberInt:t.toString()};if(t>=wk&&t<=Sk)return{$numberLong:t.toString()}}return{$numberDouble:Object.is(t,-0)?"-0.0":t.toString()}}if(typeof t=="bigint")return e.relaxed?Number(BigInt.asIntN(64,t)):{$numberLong:BigInt.asIntN(64,t).toString()};if(t instanceof RegExp||Nl(t)){let r=t.flags;if(r===void 0){let s=t.toString().match(/[gimuy]*$/);s&&(r=s[0])}return new _o(t.source,r).toExtendedJSON(e)}return t!=null&&typeof t=="object"?Dde(t,e):t}var Tde={Binary:t=>new Pt(t.value(),t.sub_type),Code:t=>new go(t.code,t.scope),DBRef:t=>new qi(t.collection||t.namespace,t.oid,t.db,t.fields),Decimal128:t=>new Pu(t.bytes),Double:t=>new Aa(t.value),Int32:t=>new Oa(t.value),Long:t=>Z.fromBits(t.low!=null?t.low:t.low_,t.low!=null?t.high:t.high_,t.low!=null?t.unsigned:t.unsigned_),MaxKey:()=>new Bu,MinKey:()=>new Iu,ObjectId:t=>new Ca(t),BSONRegExp:t=>new _o(t.pattern,t.options),BSONSymbol:t=>new Nu(t.value),Timestamp:t=>ku.fromBits(t.low,t.high)};function Dde(t,e){if(t==null||typeof t!="object")throw new k("not an object instance");let r=t._bsontype;if(typeof r>"u"){let n={};for(let s of Object.keys(t)){e.seenObjects.push({propertyName:s,obj:null});try{let i=mo(t[s],e);s==="__proto__"?Object.defineProperty(n,s,{value:i,writable:!0,enumerable:!0,configurable:!0}):n[s]=i}finally{e.seenObjects.pop()}}return n}else{if(t!=null&&typeof t=="object"&&typeof t._bsontype=="string"&&t[$l]!==Mu)throw new yo;if(Cde(t)){let n=t;if(typeof n.toExtendedJSON!="function"){let s=Tde[t._bsontype];if(!s)throw new k("Unrecognized or invalid _bsontype: "+t._bsontype);n=s(n)}return r==="Code"&&n.scope?n=new go(n.code,mo(n.scope,e)):r==="DBRef"&&n.oid&&(n=new qi(mo(n.collection,e),mo(n.oid,e),mo(n.db,e),mo(n.fields,e))),n.toExtendedJSON(e)}else throw new k("_bsontype must be a string, but was: "+typeof r)}}function Wk(t,e){let r={useBigInt64:e?.useBigInt64??!1,relaxed:e?.relaxed??!0,legacy:e?.legacy??!1};return JSON.parse(t,(n,s)=>{if(n.indexOf("\0")!==-1)throw new k(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify(n)}`);return Vk(s,r)})}function zk(t,e,r,n){r!=null&&typeof r=="object"&&(n=r,r=0),e!=null&&typeof e=="object"&&!Array.isArray(e)&&(n=e,e=void 0,r=0);let s=Object.assign({relaxed:!0,legacy:!1},n,{seenObjects:[{propertyName:"(root)",obj:null}]}),i=mo(t,s);return JSON.stringify(i,e,r)}function Mde(t,e){return e=e||{},JSON.parse(zk(t,e))}function Pde(t,e){return e=e||{},Wk(JSON.stringify(t),e)}var Ru=Object.create(null);Ru.parse=Wk;Ru.stringify=zk;Ru.serialize=Mde;Ru.deserialize=Pde;Object.freeze(Ru);var wt={double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:255,maxKey:127};function g6(t,e){try{return ie.getNonnegativeInt32LE(t,e)}catch(r){throw new Ts("BSON size cannot be negative",e,{cause:r})}}function _6(t,e){let r=e;for(;t[r]!==0;r++);if(r===t.length-1)throw new Ts("Null terminator not found",e);return r}function Bde(t,e=0){if(e??=0,t.length<5)throw new Ts(`Input must be at least 5 bytes, got ${t.length} bytes`,e);let r=g6(t,e);if(r>t.length-e)throw new Ts(`Parsed documentSize (${r} bytes) does not match input length (${t.length} bytes)`,e);if(t[e+r-1]!==0)throw new Ts("BSON documents must end in 0x00",e+r);let n=[],s=e+4;for(;s<=r+e;){let i=t[s];if(s+=1,i===0){if(s-e!==r)throw new Ts("Invalid 0x00 type byte",s);break}let o=s,a=_6(t,s)-o;s+=a+1;let u;if(i===wt.double||i===wt.long||i===wt.date||i===wt.timestamp)u=8;else if(i===wt.int)u=4;else if(i===wt.objectId)u=12;else if(i===wt.decimal)u=16;else if(i===wt.bool)u=1;else if(i===wt.null||i===wt.undefined||i===wt.maxKey||i===wt.minKey)u=0;else if(i===wt.regex)u=_6(t,_6(t,s)+1)+1-s;else if(i===wt.object||i===wt.array||i===wt.javascriptWithScope)u=g6(t,s);else if(i===wt.string||i===wt.binData||i===wt.dbPointer||i===wt.javascript||i===wt.symbol)u=g6(t,s)+4,i===wt.binData&&(u+=1),i===wt.dbPointer&&(u+=12);else throw new Ts(`Invalid 0x${i.toString(16).padStart(2,"0")} type byte`,s);if(u>r)throw new Ts("value reports length larger than document",s);n.push([i,o,a,s,u]),s+=u}return n}var jl=Object.create(null);jl.parseToElements=Bde;jl.ByteUtils=B;jl.NumberUtils=ie;Object.freeze(jl);var Kk=1024*1024*17,Sa=B.allocate(Kk);function Hk(t){Sa.length<t&&(Sa=B.allocate(t))}function Gk(t,e={}){let r=typeof e.checkKeys=="boolean"?e.checkKeys:!1,n=typeof e.serializeFunctions=="boolean"?e.serializeFunctions:!1,s=typeof e.ignoreUndefined=="boolean"?e.ignoreUndefined:!0,i=typeof e.minInternalBufferSize=="number"?e.minInternalBufferSize:Kk;Sa.length<i&&(Sa=B.allocate(i));let o=_d(Sa,t,r,0,0,n,s,null),a=B.allocateUnsafe(o);return a.set(Sa.subarray(0,o),0),a}function Jk(t,e,r={}){let n=typeof r.checkKeys=="boolean"?r.checkKeys:!1,s=typeof r.serializeFunctions=="boolean"?r.serializeFunctions:!1,i=typeof r.ignoreUndefined=="boolean"?r.ignoreUndefined:!0,o=typeof r.index=="number"?r.index:0,a=_d(Sa,t,n,0,0,s,i,null);return e.set(Sa.subarray(0,a),o),o+a-1}function Yk(t,e={}){return Uk(B.toLocalBufferType(t),e)}function Qk(t,e={}){e=e||{};let r=typeof e.serializeFunctions=="boolean"?e.serializeFunctions:!1,n=typeof e.ignoreUndefined=="boolean"?e.ignoreUndefined:!0;return H0(t,r,n)}function Xk(t,e,r,n,s,i){let o=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},i),a=B.toLocalBufferType(t),u=e;for(let c=0;c<r;c++){let l=ie.getInt32LE(a,u);o.index=u,n[s+c]=Uk(a,o),u=u+l}return u}var Ide=Object.freeze({__proto__:null,BSONError:k,BSONOffsetError:Ts,BSONRegExp:_o,BSONRuntimeError:ql,BSONSymbol:Nu,BSONType:Rk,BSONValue:Jr,BSONVersionError:yo,Binary:Pt,ByteUtils:B,Code:go,DBRef:qi,Decimal128:Pu,Double:Aa,EJSON:Ru,Int32:Oa,Long:Z,MaxKey:Bu,MinKey:Iu,NumberUtils:ie,ObjectId:Ca,Timestamp:ku,UUID:wa,bsonType:Q0,calculateObjectSize:Qk,deserialize:Yk,deserializeStream:Xk,onDemand:jl,serialize:Gk,serializeWithBufferAndIndex:Jk,setInternalBufferSize:Hk});Le.BSON=Ide;Le.BSONError=k;Le.BSONOffsetError=Ts;Le.BSONRegExp=_o;Le.BSONRuntimeError=ql;Le.BSONSymbol=Nu;Le.BSONType=Rk;Le.BSONValue=Jr;Le.BSONVersionError=yo;Le.Binary=Pt;Le.ByteUtils=B;Le.Code=go;Le.DBRef=qi;Le.Decimal128=Pu;Le.Double=Aa;Le.EJSON=Ru;Le.Int32=Oa;Le.Long=Z;Le.MaxKey=Bu;Le.MinKey=Iu;Le.NumberUtils=ie;Le.ObjectId=Ca;Le.Timestamp=ku;Le.UUID=wa;Le.bsonType=Q0;Le.calculateObjectSize=Qk;Le.deserialize=Yk;Le.deserializeStream=Xk;Le.onDemand=jl;Le.serialize=Gk;Le.serializeWithBufferAndIndex=Jk;Le.setInternalBufferSize=Hk});var pe=m(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.toUTF8=ne.getBigInt64LE=ne.getFloat64LE=ne.getInt32LE=ne.UUID=ne.Timestamp=ne.serialize=ne.ObjectId=ne.MinKey=ne.MaxKey=ne.Long=ne.Int32=ne.EJSON=ne.Double=ne.deserialize=ne.Decimal128=ne.DBRef=ne.Code=ne.calculateObjectSize=ne.BSONType=ne.BSONSymbol=ne.BSONRegExp=ne.BSONError=ne.BSON=ne.Binary=void 0;ne.parseToElementsToArray=Nde;ne.pluckBSONSerializeOptions=kde;ne.resolveBSONOptions=Rde;ne.parseUtf8ValidationOption=Fde;var Ed=T6(),jt=T6();Object.defineProperty(ne,"Binary",{enumerable:!0,get:function(){return jt.Binary}});Object.defineProperty(ne,"BSON",{enumerable:!0,get:function(){return jt.BSON}});Object.defineProperty(ne,"BSONError",{enumerable:!0,get:function(){return jt.BSONError}});Object.defineProperty(ne,"BSONRegExp",{enumerable:!0,get:function(){return jt.BSONRegExp}});Object.defineProperty(ne,"BSONSymbol",{enumerable:!0,get:function(){return jt.BSONSymbol}});Object.defineProperty(ne,"BSONType",{enumerable:!0,get:function(){return jt.BSONType}});Object.defineProperty(ne,"calculateObjectSize",{enumerable:!0,get:function(){return jt.calculateObjectSize}});Object.defineProperty(ne,"Code",{enumerable:!0,get:function(){return jt.Code}});Object.defineProperty(ne,"DBRef",{enumerable:!0,get:function(){return jt.DBRef}});Object.defineProperty(ne,"Decimal128",{enumerable:!0,get:function(){return jt.Decimal128}});Object.defineProperty(ne,"deserialize",{enumerable:!0,get:function(){return jt.deserialize}});Object.defineProperty(ne,"Double",{enumerable:!0,get:function(){return jt.Double}});Object.defineProperty(ne,"EJSON",{enumerable:!0,get:function(){return jt.EJSON}});Object.defineProperty(ne,"Int32",{enumerable:!0,get:function(){return jt.Int32}});Object.defineProperty(ne,"Long",{enumerable:!0,get:function(){return jt.Long}});Object.defineProperty(ne,"MaxKey",{enumerable:!0,get:function(){return jt.MaxKey}});Object.defineProperty(ne,"MinKey",{enumerable:!0,get:function(){return jt.MinKey}});Object.defineProperty(ne,"ObjectId",{enumerable:!0,get:function(){return jt.ObjectId}});Object.defineProperty(ne,"serialize",{enumerable:!0,get:function(){return jt.serialize}});Object.defineProperty(ne,"Timestamp",{enumerable:!0,get:function(){return jt.Timestamp}});Object.defineProperty(ne,"UUID",{enumerable:!0,get:function(){return jt.UUID}});function Nde(t,e){let r=Ed.BSON.onDemand.parseToElements(t,e);return Array.isArray(r)?r:[...r]}ne.getInt32LE=Ed.BSON.onDemand.NumberUtils.getInt32LE;ne.getFloat64LE=Ed.BSON.onDemand.NumberUtils.getFloat64LE;ne.getBigInt64LE=Ed.BSON.onDemand.NumberUtils.getBigInt64LE;ne.toUTF8=Ed.BSON.onDemand.ByteUtils.toUTF8;function kde(t){let{fieldsAsRaw:e,useBigInt64:r,promoteValues:n,promoteBuffers:s,promoteLongs:i,serializeFunctions:o,ignoreUndefined:a,bsonRegExp:u,raw:c,enableUtf8Validation:l}=t;return{fieldsAsRaw:e,useBigInt64:r,promoteValues:n,promoteBuffers:s,promoteLongs:i,serializeFunctions:o,ignoreUndefined:a,bsonRegExp:u,raw:c,enableUtf8Validation:l}}function Rde(t,e){let r=e?.bsonOptions;return{raw:t?.raw??r?.raw??!1,useBigInt64:t?.useBigInt64??r?.useBigInt64??!1,promoteLongs:t?.promoteLongs??r?.promoteLongs??!0,promoteValues:t?.promoteValues??r?.promoteValues??!0,promoteBuffers:t?.promoteBuffers??r?.promoteBuffers??!1,ignoreUndefined:t?.ignoreUndefined??r?.ignoreUndefined??!1,bsonRegExp:t?.bsonRegExp??r?.bsonRegExp??!1,serializeFunctions:t?.serializeFunctions??r?.serializeFunctions??!1,fieldsAsRaw:t?.fieldsAsRaw??r?.fieldsAsRaw??{},enableUtf8Validation:t?.enableUtf8Validation??r?.enableUtf8Validation??!0}}function Fde(t){return t?.enableUtf8Validation===!1?{utf8:!1}:{utf8:{writeErrors:!1}}}});var z=m(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.MongoWriteConcernError=P.MongoServerSelectionError=P.MongoSystemError=P.MongoMissingDependencyError=P.MongoMissingCredentialsError=P.MongoCompatibilityError=P.MongoInvalidArgumentError=P.MongoParseError=P.MongoNetworkTimeoutError=P.MongoNetworkError=P.MongoClientClosedError=P.MongoTopologyClosedError=P.MongoCursorExhaustedError=P.MongoServerClosedError=P.MongoCursorInUseError=P.MongoOperationTimeoutError=P.MongoUnexpectedServerResponseError=P.MongoGridFSChunkError=P.MongoGridFSStreamError=P.MongoTailableCursorError=P.MongoChangeStreamError=P.MongoClientBulkWriteExecutionError=P.MongoClientBulkWriteCursorError=P.MongoClientBulkWriteError=P.MongoGCPError=P.MongoAzureError=P.MongoOIDCError=P.MongoAWSError=P.MongoKerberosError=P.MongoExpiredSessionError=P.MongoTransactionError=P.MongoNotConnectedError=P.MongoDecompressionError=P.MongoBatchReExecutionError=P.MongoStalePrimaryError=P.MongoRuntimeError=P.MongoAPIError=P.MongoDriverError=P.MongoServerError=P.MongoError=P.MongoErrorLabel=P.GET_MORE_RESUMABLE_CODES=P.MONGODB_ERROR_CODES=P.NODE_IS_RECOVERING_ERROR_MESSAGE=P.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=P.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=void 0;P.needsRetryableWriteLabel=qde;P.isRetryableWriteError=eR;P.isRetryableReadError=jde;P.isNodeShuttingDownError=zde;P.isSDAMUnrecoverableError=Kde;P.isNetworkTimeoutError=Hde;P.isResumableError=Gde;P.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=new RegExp("not master","i");P.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=new RegExp("not master or secondary","i");P.NODE_IS_RECOVERING_ERROR_MESSAGE=new RegExp("node is recovering","i");P.MONGODB_ERROR_CODES=Object.freeze({HostUnreachable:6,HostNotFound:7,AuthenticationFailed:18,NetworkTimeout:89,ShutdownInProgress:91,PrimarySteppedDown:189,ExceededTimeLimit:262,SocketException:9001,NotWritablePrimary:10107,InterruptedAtShutdown:11600,InterruptedDueToReplStateChange:11602,NotPrimaryNoSecondaryOk:13435,NotPrimaryOrSecondary:13436,StaleShardVersion:63,StaleEpoch:150,StaleConfig:13388,RetryChangeStream:234,FailedToSatisfyReadPreference:133,CursorNotFound:43,LegacyNotPrimary:10058,WriteConcernTimeout:64,NamespaceNotFound:26,IllegalOperation:20,MaxTimeMSExpired:50,UnknownReplWriteConcern:79,UnsatisfiableWriteConcern:100,Reauthenticate:391,ReadConcernMajorityNotAvailableYet:134});P.GET_MORE_RESUMABLE_CODES=new Set([P.MONGODB_ERROR_CODES.HostUnreachable,P.MONGODB_ERROR_CODES.HostNotFound,P.MONGODB_ERROR_CODES.NetworkTimeout,P.MONGODB_ERROR_CODES.ShutdownInProgress,P.MONGODB_ERROR_CODES.PrimarySteppedDown,P.MONGODB_ERROR_CODES.ExceededTimeLimit,P.MONGODB_ERROR_CODES.SocketException,P.MONGODB_ERROR_CODES.NotWritablePrimary,P.MONGODB_ERROR_CODES.InterruptedAtShutdown,P.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,P.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,P.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,P.MONGODB_ERROR_CODES.StaleShardVersion,P.MONGODB_ERROR_CODES.StaleEpoch,P.MONGODB_ERROR_CODES.StaleConfig,P.MONGODB_ERROR_CODES.RetryChangeStream,P.MONGODB_ERROR_CODES.FailedToSatisfyReadPreference,P.MONGODB_ERROR_CODES.CursorNotFound]);P.MongoErrorLabel=Object.freeze({RetryableWriteError:"RetryableWriteError",TransientTransactionError:"TransientTransactionError",UnknownTransactionCommitResult:"UnknownTransactionCommitResult",ResumableChangeStreamError:"ResumableChangeStreamError",HandshakeError:"HandshakeError",ResetPool:"ResetPool",PoolRequestedRetry:"PoolRequestedRetry",InterruptInUseConnections:"InterruptInUseConnections",NoWritesPerformed:"NoWritesPerformed"});function $de(t){return t!=null&&typeof t=="object"&&"errors"in t&&Array.isArray(t.errors)}var ri=class extends Error{get errorLabels(){return Array.from(this.errorLabelSet)}constructor(e,r){super(e,r),this.errorLabelSet=new Set}static buildErrorMessage(e){return typeof e=="string"?e:$de(e)&&e.message.length===0?e.errors.length===0?"AggregateError has an empty errors array. Please check the `cause` property for more information.":e.errors.map(({message:r})=>r).join(", "):e!=null&&typeof e=="object"&&"message"in e&&typeof e.message=="string"?e.message:"empty error message"}get name(){return"MongoError"}get errmsg(){return this.message}hasErrorLabel(e){return this.errorLabelSet.has(e)}addErrorLabel(e){this.errorLabelSet.add(e)}};P.MongoError=ri;var bd=class extends ri{constructor(e){if(super(e.message||e.errmsg||e.$err||"n/a"),e.errorLabels)for(let r of e.errorLabels)this.addErrorLabel(r);this.errorResponse=e;for(let r in e)r!=="errorLabels"&&r!=="errmsg"&&r!=="message"&&r!=="errorResponse"&&(this[r]=e[r])}get name(){return"MongoServerError"}};P.MongoServerError=bd;var Fu=class extends ri{constructor(e,r){super(e,r)}get name(){return"MongoDriverError"}};P.MongoDriverError=Fu;var Dr=class extends Fu{constructor(e,r){super(e,r)}get name(){return"MongoAPIError"}};P.MongoAPIError=Dr;var Tn=class extends Fu{constructor(e,r){super(e,r)}get name(){return"MongoRuntimeError"}};P.MongoRuntimeError=Tn;var M6=class extends Tn{constructor(e,r){super(e,r)}get name(){return"MongoStalePrimaryError"}};P.MongoStalePrimaryError=M6;var P6=class extends Dr{constructor(e="This batch has already been executed, create new batch to execute"){super(e)}get name(){return"MongoBatchReExecutionError"}};P.MongoBatchReExecutionError=P6;var B6=class extends Tn{constructor(e){super(e)}get name(){return"MongoDecompressionError"}};P.MongoDecompressionError=B6;var I6=class extends Dr{constructor(e){super(e)}get name(){return"MongoNotConnectedError"}};P.MongoNotConnectedError=I6;var N6=class extends Dr{constructor(e){super(e)}get name(){return"MongoTransactionError"}};P.MongoTransactionError=N6;var k6=class extends Dr{constructor(e="Cannot use a session that has ended"){super(e)}get name(){return"MongoExpiredSessionError"}};P.MongoExpiredSessionError=k6;var R6=class extends Tn{constructor(e){super(e)}get name(){return"MongoKerberosError"}};P.MongoKerberosError=R6;var F6=class extends Tn{constructor(e,r){super(e,r)}get name(){return"MongoAWSError"}};P.MongoAWSError=F6;var Sd=class extends Tn{constructor(e){super(e)}get name(){return"MongoOIDCError"}};P.MongoOIDCError=Sd;var $6=class extends Sd{constructor(e){super(e)}get name(){return"MongoAzureError"}};P.MongoAzureError=$6;var q6=class extends Sd{constructor(e){super(e)}get name(){return"MongoGCPError"}};P.MongoGCPError=q6;var j6=class extends bd{constructor(e){super(e),this.writeConcernErrors=[],this.writeErrors=new Map}get name(){return"MongoClientBulkWriteError"}};P.MongoClientBulkWriteError=j6;var L6=class extends Tn{constructor(e){super(e)}get name(){return"MongoClientBulkWriteCursorError"}};P.MongoClientBulkWriteCursorError=L6;var U6=class extends Tn{constructor(e){super(e)}get name(){return"MongoClientBulkWriteExecutionError"}};P.MongoClientBulkWriteExecutionError=U6;var V6=class extends Tn{constructor(e){super(e)}get name(){return"MongoChangeStreamError"}};P.MongoChangeStreamError=V6;var W6=class extends Dr{constructor(e="Tailable cursor does not support this operation"){super(e)}get name(){return"MongoTailableCursorError"}};P.MongoTailableCursorError=W6;var z6=class extends Tn{constructor(e){super(e)}get name(){return"MongoGridFSStreamError"}};P.MongoGridFSStreamError=z6;var K6=class extends Tn{constructor(e){super(e)}get name(){return"MongoGridFSChunkError"}};P.MongoGridFSChunkError=K6;var H6=class extends Tn{constructor(e,r){super(e,r)}get name(){return"MongoUnexpectedServerResponseError"}};P.MongoUnexpectedServerResponseError=H6;var G6=class extends Fu{get name(){return"MongoOperationTimeoutError"}};P.MongoOperationTimeoutError=G6;var J6=class extends Dr{constructor(e="Cursor is already initialized"){super(e)}get name(){return"MongoCursorInUseError"}};P.MongoCursorInUseError=J6;var Y6=class extends Dr{constructor(e="Server is closed"){super(e)}get name(){return"MongoServerClosedError"}};P.MongoServerClosedError=Y6;var Q6=class extends Dr{constructor(e){super(e||"Cursor is exhausted")}get name(){return"MongoCursorExhaustedError"}};P.MongoCursorExhaustedError=Q6;var X6=class extends Dr{constructor(e="Topology is closed"){super(e)}get name(){return"MongoTopologyClosedError"}};P.MongoTopologyClosedError=X6;var Z6=class extends Dr{constructor(){super("Operation interrupted because client was closed")}get name(){return"MongoClientClosedError"}};P.MongoClientClosedError=Z6;var va=class extends ri{constructor(e,r){super(e,{cause:r?.cause}),this.beforeHandshake=!!r?.beforeHandshake}get name(){return"MongoNetworkError"}};P.MongoNetworkError=va;var eO=class extends va{constructor(e,r){super(e,r)}get name(){return"MongoNetworkTimeoutError"}};P.MongoNetworkTimeoutError=eO;var X0=class extends Fu{constructor(e){super(e)}get name(){return"MongoParseError"}};P.MongoParseError=X0;var tO=class extends Dr{constructor(e,r){super(e,r)}get name(){return"MongoInvalidArgumentError"}};P.MongoInvalidArgumentError=tO;var rO=class extends Dr{constructor(e){super(e)}get name(){return"MongoCompatibilityError"}};P.MongoCompatibilityError=rO;var nO=class extends Dr{constructor(e){super(e)}get name(){return"MongoMissingCredentialsError"}};P.MongoMissingCredentialsError=nO;var sO=class extends Dr{constructor(e,r){super(e,r),this.dependencyName=r.dependencyName}get name(){return"MongoMissingDependencyError"}};P.MongoMissingDependencyError=sO;var Z0=class extends ri{constructor(e,r){r&&r.error?super(ri.buildErrorMessage(r.error.message||r.error),{cause:r.error}):super(e),r&&(this.reason=r),this.code=r.error?.code}get name(){return"MongoSystemError"}};P.MongoSystemError=Z0;var ey=class extends Z0{constructor(e,r){super(e,r)}get name(){return"MongoServerSelectionError"}};P.MongoServerSelectionError=ey;var ty=class extends bd{constructor(e){super({...e.writeConcernError,...e}),this.errInfo=e.writeConcernError.errInfo,this.result=e}get name(){return"MongoWriteConcernError"}};P.MongoWriteConcernError=ty;var Zk=new Set([P.MONGODB_ERROR_CODES.HostUnreachable,P.MONGODB_ERROR_CODES.HostNotFound,P.MONGODB_ERROR_CODES.NetworkTimeout,P.MONGODB_ERROR_CODES.ShutdownInProgress,P.MONGODB_ERROR_CODES.PrimarySteppedDown,P.MONGODB_ERROR_CODES.SocketException,P.MONGODB_ERROR_CODES.NotWritablePrimary,P.MONGODB_ERROR_CODES.InterruptedAtShutdown,P.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,P.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,P.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,P.MONGODB_ERROR_CODES.ExceededTimeLimit,P.MONGODB_ERROR_CODES.ReadConcernMajorityNotAvailableYet]),D6=Zk;function qde(t,e,r){if(t instanceof va)return!0;if(t instanceof ri&&(e>=9||eR(t))&&!t.hasErrorLabel(P.MongoErrorLabel.HandshakeError))return!1;if(t instanceof ty){if(r==="Mongos"&&e<9)return D6.has(t.result.code??0);let i=t.result.writeConcernError.code??Number(t.code);return D6.has(Number.isNaN(i)?0:i)}return t instanceof ri?D6.has(Number(t.code)):!!(P.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)||P.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message))}function eR(t){return t.hasErrorLabel(P.MongoErrorLabel.RetryableWriteError)||t.hasErrorLabel(P.MongoErrorLabel.PoolRequestedRetry)}function jde(t){return!!((typeof t.code=="number"?Zk.has(t.code):!1)||t instanceof va||P.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)||P.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message))}var Lde=new Set([P.MONGODB_ERROR_CODES.ShutdownInProgress,P.MONGODB_ERROR_CODES.PrimarySteppedDown,P.MONGODB_ERROR_CODES.InterruptedAtShutdown,P.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,P.MONGODB_ERROR_CODES.NotPrimaryOrSecondary]),Ude=new Set([P.MONGODB_ERROR_CODES.NotWritablePrimary,P.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,P.MONGODB_ERROR_CODES.LegacyNotPrimary]),Vde=new Set([P.MONGODB_ERROR_CODES.InterruptedAtShutdown,P.MONGODB_ERROR_CODES.ShutdownInProgress]);function tR(t){return typeof t.code=="number"?Lde.has(t.code):P.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE.test(t.message)||P.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message)}function Wde(t){return typeof t.code=="number"?Ude.has(t.code):tR(t)?!1:P.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)}function zde(t){return!!(typeof t.code=="number"&&Vde.has(t.code))}function Kde(t){return t instanceof X0||t==null?!0:tR(t)||Wde(t)}function Hde(t){return!!(t instanceof va&&t.message.match(/timed out/))}function Gde(t,e){return t==null||!(t instanceof ri)?!1:t instanceof va||t instanceof ey?!0:e!=null&&e>=9?t.code===P.MONGODB_ERROR_CODES.CursorNotFound?!0:t.hasErrorLabel(P.MongoErrorLabel.ResumableChangeStreamError):typeof t.code=="number"?P.GET_MORE_RESUMABLE_CODES.has(t.code):!1}});var Eo=m(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.OP_MSG=Me.OP_COMPRESSED=Me.OP_DELETE=Me.OP_QUERY=Me.OP_INSERT=Me.OP_UPDATE=Me.OP_REPLY=Me.MIN_SUPPORTED_RAW_DATA_SERVER_VERSION=Me.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION=Me.MIN_SUPPORTED_QE_SERVER_VERSION=Me.MIN_SUPPORTED_QE_WIRE_VERSION=Me.MAX_SUPPORTED_WIRE_VERSION=Me.MIN_SUPPORTED_WIRE_VERSION=Me.MIN_SUPPORTED_SNAPSHOT_READS_SERVER_VERSION=Me.MIN_SUPPORTED_SNAPSHOT_READS_WIRE_VERSION=Me.MAX_SUPPORTED_SERVER_VERSION=Me.MIN_SUPPORTED_SERVER_VERSION=void 0;Me.MIN_SUPPORTED_SERVER_VERSION="4.2";Me.MAX_SUPPORTED_SERVER_VERSION="8.2";Me.MIN_SUPPORTED_SNAPSHOT_READS_WIRE_VERSION=13;Me.MIN_SUPPORTED_SNAPSHOT_READS_SERVER_VERSION="5.0";Me.MIN_SUPPORTED_WIRE_VERSION=8;Me.MAX_SUPPORTED_WIRE_VERSION=27;Me.MIN_SUPPORTED_QE_WIRE_VERSION=21;Me.MIN_SUPPORTED_QE_SERVER_VERSION="7.0";Me.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION=27;Me.MIN_SUPPORTED_RAW_DATA_SERVER_VERSION="8.2";Me.OP_REPLY=1;Me.OP_UPDATE=2001;Me.OP_INSERT=2002;Me.OP_QUERY=2004;Me.OP_DELETE=2006;Me.OP_COMPRESSED=2012;Me.OP_MSG=2013});var Lt=m(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.END=D.CHANGE=D.INIT=D.MORE=D.RESPONSE=D.SERVER_HEARTBEAT_FAILED=D.SERVER_HEARTBEAT_SUCCEEDED=D.SERVER_HEARTBEAT_STARTED=D.COMMAND_FAILED=D.COMMAND_SUCCEEDED=D.COMMAND_STARTED=D.CLUSTER_TIME_RECEIVED=D.CONNECTION_CHECKED_IN=D.CONNECTION_CHECKED_OUT=D.CONNECTION_CHECK_OUT_FAILED=D.CONNECTION_CHECK_OUT_STARTED=D.CONNECTION_CLOSED=D.CONNECTION_READY=D.CONNECTION_CREATED=D.CONNECTION_POOL_READY=D.CONNECTION_POOL_CLEARED=D.CONNECTION_POOL_CLOSED=D.CONNECTION_POOL_CREATED=D.WAITING_FOR_SUITABLE_SERVER=D.SERVER_SELECTION_SUCCEEDED=D.SERVER_SELECTION_FAILED=D.SERVER_SELECTION_STARTED=D.TOPOLOGY_DESCRIPTION_CHANGED=D.TOPOLOGY_CLOSED=D.TOPOLOGY_OPENING=D.SERVER_DESCRIPTION_CHANGED=D.SERVER_CLOSED=D.SERVER_OPENING=D.DESCRIPTION_RECEIVED=D.UNPINNED=D.PINNED=D.MESSAGE=D.ENDED=D.CLOSED=D.CONNECT=D.OPEN=D.CLOSE=D.TIMEOUT=D.ERROR=D.SYSTEM_JS_COLLECTION=D.SYSTEM_COMMAND_COLLECTION=D.SYSTEM_USER_COLLECTION=D.SYSTEM_PROFILE_COLLECTION=D.SYSTEM_INDEX_COLLECTION=D.SYSTEM_NAMESPACE_COLLECTION=void 0;D.kDecoratedKeys=D.kDecorateResult=D.LEGACY_HELLO_COMMAND_CAMEL_CASE=D.LEGACY_HELLO_COMMAND=D.MONGO_CLIENT_EVENTS=D.LOCAL_SERVER_EVENTS=D.SERVER_RELAY_EVENTS=D.APM_EVENTS=D.TOPOLOGY_EVENTS=D.CMAP_EVENTS=D.HEARTBEAT_EVENTS=D.RESUME_TOKEN_CHANGED=void 0;D.SYSTEM_NAMESPACE_COLLECTION="system.namespaces";D.SYSTEM_INDEX_COLLECTION="system.indexes";D.SYSTEM_PROFILE_COLLECTION="system.profile";D.SYSTEM_USER_COLLECTION="system.users";D.SYSTEM_COMMAND_COLLECTION="$cmd";D.SYSTEM_JS_COLLECTION="system.js";D.ERROR="error";D.TIMEOUT="timeout";D.CLOSE="close";D.OPEN="open";D.CONNECT="connect";D.CLOSED="closed";D.ENDED="ended";D.MESSAGE="message";D.PINNED="pinned";D.UNPINNED="unpinned";D.DESCRIPTION_RECEIVED="descriptionReceived";D.SERVER_OPENING="serverOpening";D.SERVER_CLOSED="serverClosed";D.SERVER_DESCRIPTION_CHANGED="serverDescriptionChanged";D.TOPOLOGY_OPENING="topologyOpening";D.TOPOLOGY_CLOSED="topologyClosed";D.TOPOLOGY_DESCRIPTION_CHANGED="topologyDescriptionChanged";D.SERVER_SELECTION_STARTED="serverSelectionStarted";D.SERVER_SELECTION_FAILED="serverSelectionFailed";D.SERVER_SELECTION_SUCCEEDED="serverSelectionSucceeded";D.WAITING_FOR_SUITABLE_SERVER="waitingForSuitableServer";D.CONNECTION_POOL_CREATED="connectionPoolCreated";D.CONNECTION_POOL_CLOSED="connectionPoolClosed";D.CONNECTION_POOL_CLEARED="connectionPoolCleared";D.CONNECTION_POOL_READY="connectionPoolReady";D.CONNECTION_CREATED="connectionCreated";D.CONNECTION_READY="connectionReady";D.CONNECTION_CLOSED="connectionClosed";D.CONNECTION_CHECK_OUT_STARTED="connectionCheckOutStarted";D.CONNECTION_CHECK_OUT_FAILED="connectionCheckOutFailed";D.CONNECTION_CHECKED_OUT="connectionCheckedOut";D.CONNECTION_CHECKED_IN="connectionCheckedIn";D.CLUSTER_TIME_RECEIVED="clusterTimeReceived";D.COMMAND_STARTED="commandStarted";D.COMMAND_SUCCEEDED="commandSucceeded";D.COMMAND_FAILED="commandFailed";D.SERVER_HEARTBEAT_STARTED="serverHeartbeatStarted";D.SERVER_HEARTBEAT_SUCCEEDED="serverHeartbeatSucceeded";D.SERVER_HEARTBEAT_FAILED="serverHeartbeatFailed";D.RESPONSE="response";D.MORE="more";D.INIT="init";D.CHANGE="change";D.END="end";D.RESUME_TOKEN_CHANGED="resumeTokenChanged";D.HEARTBEAT_EVENTS=Object.freeze([D.SERVER_HEARTBEAT_STARTED,D.SERVER_HEARTBEAT_SUCCEEDED,D.SERVER_HEARTBEAT_FAILED]);D.CMAP_EVENTS=Object.freeze([D.CONNECTION_POOL_CREATED,D.CONNECTION_POOL_READY,D.CONNECTION_POOL_CLEARED,D.CONNECTION_POOL_CLOSED,D.CONNECTION_CREATED,D.CONNECTION_READY,D.CONNECTION_CLOSED,D.CONNECTION_CHECK_OUT_STARTED,D.CONNECTION_CHECK_OUT_FAILED,D.CONNECTION_CHECKED_OUT,D.CONNECTION_CHECKED_IN]);D.TOPOLOGY_EVENTS=Object.freeze([D.SERVER_OPENING,D.SERVER_CLOSED,D.SERVER_DESCRIPTION_CHANGED,D.TOPOLOGY_OPENING,D.TOPOLOGY_CLOSED,D.TOPOLOGY_DESCRIPTION_CHANGED,D.ERROR,D.TIMEOUT,D.CLOSE]);D.APM_EVENTS=Object.freeze([D.COMMAND_STARTED,D.COMMAND_SUCCEEDED,D.COMMAND_FAILED]);D.SERVER_RELAY_EVENTS=Object.freeze([D.SERVER_HEARTBEAT_STARTED,D.SERVER_HEARTBEAT_SUCCEEDED,D.SERVER_HEARTBEAT_FAILED,D.COMMAND_STARTED,D.COMMAND_SUCCEEDED,D.COMMAND_FAILED,...D.CMAP_EVENTS]);D.LOCAL_SERVER_EVENTS=Object.freeze([D.CONNECT,D.DESCRIPTION_RECEIVED,D.CLOSED,D.ENDED]);D.MONGO_CLIENT_EVENTS=Object.freeze([...D.CMAP_EVENTS,...D.APM_EVENTS,...D.TOPOLOGY_EVENTS,...D.HEARTBEAT_EVENTS]);D.LEGACY_HELLO_COMMAND="ismaster";D.LEGACY_HELLO_COMMAND_CAMEL_CASE="isMaster";D.kDecorateResult=Symbol.for("@@mdb.decorateDecryptionResult");D.kDecoratedKeys=Symbol.for("@@mdb.decryptedKeys")});var si=m(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});ni.ReadConcern=ni.ReadConcernLevel=void 0;ni.ReadConcernLevel=Object.freeze({local:"local",majority:"majority",linearizable:"linearizable",available:"available",snapshot:"snapshot"});var iO=class t{constructor(e){this.level=ni.ReadConcernLevel[e]??e}static fromOptions(e){if(e!=null){if(e.readConcern){let{readConcern:r}=e;if(r instanceof t)return r;if(typeof r=="string")return new t(r);if("level"in r&&r.level)return new t(r.level)}if(e.level)return new t(e.level)}}static get MAJORITY(){return ni.ReadConcernLevel.majority}static get AVAILABLE(){return ni.ReadConcernLevel.available}static get LINEARIZABLE(){return ni.ReadConcernLevel.linearizable}static get SNAPSHOT(){return ni.ReadConcernLevel.snapshot}toJSON(){return{level:this.level}}};ni.ReadConcern=iO});var sr=m(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});Yr.ReadPreference=Yr.ReadPreferenceMode=void 0;var $u=z();Yr.ReadPreferenceMode=Object.freeze({primary:"primary",primaryPreferred:"primaryPreferred",secondary:"secondary",secondaryPreferred:"secondaryPreferred",nearest:"nearest"});var oO=class t{static{this.PRIMARY=Yr.ReadPreferenceMode.primary}static{this.PRIMARY_PREFERRED=Yr.ReadPreferenceMode.primaryPreferred}static{this.SECONDARY=Yr.ReadPreferenceMode.secondary}static{this.SECONDARY_PREFERRED=Yr.ReadPreferenceMode.secondaryPreferred}static{this.NEAREST=Yr.ReadPreferenceMode.nearest}static{this.primary=new t(Yr.ReadPreferenceMode.primary)}static{this.primaryPreferred=new t(Yr.ReadPreferenceMode.primaryPreferred)}static{this.secondary=new t(Yr.ReadPreferenceMode.secondary)}static{this.secondaryPreferred=new t(Yr.ReadPreferenceMode.secondaryPreferred)}static{this.nearest=new t(Yr.ReadPreferenceMode.nearest)}constructor(e,r,n){if(!t.isValid(e))throw new $u.MongoInvalidArgumentError(`Invalid read preference mode ${JSON.stringify(e)}`);if(n==null&&typeof r=="object"&&!Array.isArray(r))n=r,r=void 0;else if(r&&!Array.isArray(r))throw new $u.MongoInvalidArgumentError("ReadPreference tags must be an array");if(this.mode=e,this.tags=r,this.hedge=n?.hedge,this.maxStalenessSeconds=void 0,n=n??{},n.maxStalenessSeconds!=null){if(n.maxStalenessSeconds<=0)throw new $u.MongoInvalidArgumentError("maxStalenessSeconds must be a positive integer");this.maxStalenessSeconds=n.maxStalenessSeconds}if(this.mode===t.PRIMARY){if(this.tags&&Array.isArray(this.tags)&&this.tags.length>0)throw new $u.MongoInvalidArgumentError("Primary read preference cannot be combined with tags");if(this.maxStalenessSeconds)throw new $u.MongoInvalidArgumentError("Primary read preference cannot be combined with maxStalenessSeconds");if(this.hedge)throw new $u.MongoInvalidArgumentError("Primary read preference cannot be combined with hedge")}}get preference(){return this.mode}static fromString(e){return new t(e)}static fromOptions(e){if(!e)return;let r=e.readPreference??e.session?.transaction.options.readPreference,n=e.readPreferenceTags;if(r!=null){if(typeof r=="string")return new t(r,n,{maxStalenessSeconds:e.maxStalenessSeconds,hedge:e.hedge});if(!(r instanceof t)&&typeof r=="object"){let s=r.mode||r.preference;if(s&&typeof s=="string")return new t(s,r.tags??n,{maxStalenessSeconds:r.maxStalenessSeconds,hedge:e.hedge})}return n&&(r.tags=n),r}}static translate(e){if(e.readPreference==null)return e;let r=e.readPreference;if(typeof r=="string")e.readPreference=new t(r);else if(r&&!(r instanceof t)&&typeof r=="object"){let n=r.mode||r.preference;n&&typeof n=="string"&&(e.readPreference=new t(n,r.tags,{maxStalenessSeconds:r.maxStalenessSeconds}))}else if(!(r instanceof t))throw new $u.MongoInvalidArgumentError(`Invalid read preference: ${r}`);return e}static isValid(e){return new Set([t.PRIMARY,t.PRIMARY_PREFERRED,t.SECONDARY,t.SECONDARY_PREFERRED,t.NEAREST,null]).has(e)}isValid(e){return t.isValid(typeof e=="string"?e:this.mode)}secondaryOk(){return new Set([t.PRIMARY_PREFERRED,t.SECONDARY,t.SECONDARY_PREFERRED,t.NEAREST]).has(this.mode)}equals(e){return e.mode===this.mode}toJSON(){let e={mode:this.mode};return Array.isArray(this.tags)&&(e.tags=this.tags),this.maxStalenessSeconds&&(e.maxStalenessSeconds=this.maxStalenessSeconds),this.hedge&&(e.hedge=this.hedge),e}};Yr.ReadPreference=oO});var ts=m(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.ServerType=dn.TopologyType=dn.STATE_CONNECTED=dn.STATE_CONNECTING=dn.STATE_CLOSED=dn.STATE_CLOSING=void 0;dn._advanceClusterTime=Jde;dn.STATE_CLOSING="closing";dn.STATE_CLOSED="closed";dn.STATE_CONNECTING="connecting";dn.STATE_CONNECTED="connected";dn.TopologyType=Object.freeze({Single:"Single",ReplicaSetNoPrimary:"ReplicaSetNoPrimary",ReplicaSetWithPrimary:"ReplicaSetWithPrimary",Sharded:"Sharded",Unknown:"Unknown",LoadBalanced:"LoadBalanced"});dn.ServerType=Object.freeze({Standalone:"Standalone",Mongos:"Mongos",PossiblePrimary:"PossiblePrimary",RSPrimary:"RSPrimary",RSSecondary:"RSSecondary",RSArbiter:"RSArbiter",RSOther:"RSOther",RSGhost:"RSGhost",Unknown:"Unknown",LoadBalancer:"LoadBalancer"});function Jde(t,e){(t.clusterTime==null||e.clusterTime.greaterThan(t.clusterTime.clusterTime))&&(t.clusterTime=e)}});var hn=m(qu=>{"use strict";Object.defineProperty(qu,"__esModule",{value:!0});qu.WriteConcern=qu.WRITE_CONCERN_KEYS=void 0;qu.throwIfWriteConcernError=Qde;var rR=ze(),Yde=z();qu.WRITE_CONCERN_KEYS=["w","wtimeout","j","journal","fsync"];var aO=class t{constructor(e,r,n,s){e!=null&&(Number.isNaN(Number(e))?this.w=e:this.w=Number(e)),r!=null&&(this.wtimeoutMS=this.wtimeout=r),n!=null&&(this.journal=this.j=n),s!=null&&(this.journal=this.j=!!s)}static apply(e,r){let n={};return r.w!=null&&(n.w=r.w),r.wtimeoutMS!=null&&(n.wtimeout=r.wtimeoutMS),r.journal!=null&&(n.j=r.j),e.writeConcern=n,e}static fromOptions(e,r){if(e==null)return;r=r??{};let n;typeof e=="string"||typeof e=="number"?n={w:e}:e instanceof t?n=e:n=e.writeConcern;let i={...r instanceof t?r:r.writeConcern,...n},{w:o=void 0,wtimeout:a=void 0,j:u=void 0,fsync:c=void 0,journal:l=void 0,wtimeoutMS:p=void 0}=i;if(o!=null||a!=null||p!=null||u!=null||l!=null||c!=null)return new t(o,a??p,u??l,c)}};qu.WriteConcern=aO;function Qde(t){if(typeof t=="object"&&t!=null){let e=rR.MongoDBResponse.is(t)&&t.has("writeConcernError")?t.toObject():!rR.MongoDBResponse.is(t)&&"writeConcernError"in t?t:null;if(e!=null)throw new Yde.MongoWriteConcernError(e)}}});var X=m(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.kDispose=W.randomBytes=W.COSMOS_DB_MSG=W.DOCUMENT_DB_MSG=W.COSMOS_DB_CHECK=W.DOCUMENT_DB_CHECK=W.MONGODB_WARNING_CODE=W.DEFAULT_PK_FACTORY=W.HostAddress=W.BufferPool=W.List=W.MongoDBCollectionNamespace=W.MongoDBNamespace=W.ByteUtils=void 0;W.isUint8Array=ihe;W.hostMatchesWildcards=ohe;W.normalizeHintField=ahe;W.isObject=cO;W.mergeOptions=che;W.filterOptions=lhe;W.isPromiseLike=phe;W.decorateWithCollation=dhe;W.decorateWithReadConcern=hhe;W.getTopology=fhe;W.ns=mhe;W.makeCounter=yhe;W.uuidV4=ghe;W.maxWireVersion=_he;W.arrayStrictEqual=Ehe;W.errorStrictEqual=bhe;W.makeStateMachine=She;W.now=uR;W.calculateDurationInMs=whe;W.hasAtomicOperators=cR;W.resolveTimeoutOptions=Ahe;W.resolveOptions=Ohe;W.isSuperset=lR;W.isHello=Che;W.setDifference=vhe;W.isRecord=The;W.emitWarning=pR;W.emitWarningOnce=Dhe;W.enumToString=Mhe;W.supportsRetryableWrites=Phe;W.shuffle=Bhe;W.commandSupportsReadConcern=Ihe;W.compareObjectId=Nhe;W.parseInteger=dR;W.parseUnsignedInteger=khe;W.checkParentDomainMatch=Rhe;W.get=Fhe;W.request=$he;W.isHostMatch=qhe;W.promiseWithResolvers=hO;W.squashError=jhe;W.once=Lhe;W.maybeAddIdToDocuments=Uhe;W.fileIsAccessible=Vhe;W.csotMin=Whe;W.noop=zhe;W.decorateDecryptionResult=hR;W.addAbortListener=fO;W.abortable=Khe;var oR=require("crypto"),Xde=require("fs"),aR=require("http"),uO=require("timers"),Zde=require("url"),ehe=require("url"),the=require("util"),dO=pe(),nR=Eo(),ry=Lt(),fn=z(),rhe=si(),nhe=sr(),she=ts(),sR=hn();W.ByteUtils={toLocalBufferType(t){return Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength)},equals(t,e){return W.ByteUtils.toLocalBufferType(t).equals(e)},compare(t,e){return W.ByteUtils.toLocalBufferType(t).compare(e)},toBase64(t){return W.ByteUtils.toLocalBufferType(t).toString("base64")}};function ihe(t){return t!=null&&typeof t=="object"&&Symbol.toStringTag in t&&t[Symbol.toStringTag]==="Uint8Array"}function ohe(t,e){for(let r of e)if(t===r||r.startsWith("*.")&&t?.endsWith(r.substring(2,r.length))||r.startsWith("*/")&&t?.endsWith(r.substring(2,r.length)))return!0;return!1}function ahe(t){let e;if(typeof t=="string")e=t;else if(Array.isArray(t))e={},t.forEach(r=>{e[r]=1});else if(t!=null&&typeof t=="object"){e={};for(let r in t)e[r]=t[r]}return e}var uhe=t=>Object.prototype.toString.call(t);function cO(t){return uhe(t)==="[object Object]"}function che(t,e){return{...t,...e}}function lhe(t,e){let r={};for(let n in t)e.includes(n)&&(r[n]=t[n]);return r}function phe(t){return t!=null&&typeof t=="object"&&"then"in t&&typeof t.then=="function"}function dhe(t,e){e.collation&&typeof e.collation=="object"&&(t.collation=e.collation)}function hhe(t,e,r){if(r&&r.session&&r.session.inTransaction())return;let n=Object.assign({},t.readConcern||{});e.s.readConcern&&Object.assign(n,e.s.readConcern),Object.keys(n).length>0&&Object.assign(t,{readConcern:n})}function fhe(t){if("topology"in t&&t.topology)return t.topology;if("client"in t&&t.client.topology)return t.client.topology;throw new fn.MongoNotConnectedError("MongoClient must be connected to perform this operation")}function mhe(t){return wd.fromString(t)}var wd=class t{constructor(e,r){this.db=e,this.collection=r===""?void 0:r}toString(){return this.collection?`${this.db}.${this.collection}`:this.db}withCollection(e){return new ny(this.db,e)}static fromString(e){if(typeof e!="string"||e==="")throw new fn.MongoRuntimeError(`Cannot parse namespace from "${e}"`);let[r,...n]=e.split("."),s=n.join(".");return new t(r,s===""?void 0:s)}};W.MongoDBNamespace=wd;var ny=class extends wd{constructor(e,r){super(e,r),this.collection=r}static fromString(e){return super.fromString(e)}};W.MongoDBCollectionNamespace=ny;function*yhe(t=0){let e=t;for(;;){let r=e;e+=1,yield r}}function ghe(){let t=oR.randomBytes(16);return t[6]=t[6]&15|64,t[8]=t[8]&63|128,t}function _he(t){if(t){if(t.hello)return t.hello.maxWireVersion;if(t.serverApi?.version||t.loadBalanced)return nR.MAX_SUPPORTED_WIRE_VERSION;if("lastHello"in t&&typeof t.lastHello=="function"){let e=t.lastHello();if(e)return e.maxWireVersion}if(t.description&&"maxWireVersion"in t.description&&t.description.maxWireVersion!=null)return t.description.maxWireVersion}return 0}function Ehe(t,e){return!Array.isArray(t)||!Array.isArray(e)?!1:t.length===e.length&&t.every((r,n)=>r===e[n])}function bhe(t,e){return t===e?!0:!t||!e?t===e:!(t==null&&e!=null||t!=null&&e==null||t.constructor.name!==e.constructor.name||t.message!==e.message)}function She(t){return function(r,n){let s=t[r.s.state];if(s&&s.indexOf(n)<0)throw new fn.MongoRuntimeError(`illegal state transition from [${r.s.state}] => [${n}], allowed: [${s}]`);r.emit("stateChanged",r.s.state,n),r.s.state=n}}function uR(){let t=process.hrtime();return Math.floor(t[0]*1e3+t[1]/1e6)}function whe(t){if(typeof t!="number")return-1;let e=uR()-t;return e<0?0:e}function cR(t,e){if(Array.isArray(t)){for(let n of t)if(cR(n))return!0;return!1}let r=Object.keys(t);if(e?.ignoreUndefined){let n=!0;for(let s of r)if(t[s]!==void 0){n=!1;break}if(n)throw new fn.MongoInvalidArgumentError("Update operations require that all atomic operators have defined values, but none were provided.")}return r.length>0&&r[0][0]==="$"}function Ahe(t,e){let{socketTimeoutMS:r,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:s,timeoutMS:i}=t.s.options;return{socketTimeoutMS:r,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:s,timeoutMS:i,...e}}function Ohe(t,e){let r=Object.assign({},e,(0,dO.resolveBSONOptions)(e,t)),n=e?.timeoutMS??t?.timeoutMS,s=e?.session;if(!s?.inTransaction()){let a=rhe.ReadConcern.fromOptions(e)??t?.readConcern;a&&(r.readConcern=a);let u=sR.WriteConcern.fromOptions(e)??t?.writeConcern;u&&(n!=null&&(u=sR.WriteConcern.fromOptions({writeConcern:{...u,wtimeout:void 0,wtimeoutMS:void 0}})),r.writeConcern=u)}r.timeoutMS=n;let i=nhe.ReadPreference.fromOptions(e)??t?.readPreference;if(i&&(r.readPreference=i),s?.explicit&&s?.timeoutContext!=null&&e?.timeoutMS!=null)throw new fn.MongoInvalidArgumentError("An operation cannot be given a timeoutMS setting when inside a withTransaction call that has a timeoutMS setting");return r}function lR(t,e){t=Array.isArray(t)?new Set(t):t,e=Array.isArray(e)?new Set(e):e;for(let r of e)if(!t.has(r))return!1;return!0}function Che(t){return!!(t[ry.LEGACY_HELLO_COMMAND]||t.hello)}function vhe(t,e){let r=new Set(t);for(let n of e)r.delete(n);return r}var xhe=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);function The(t,e=void 0){if(!cO(t))return!1;let r=t.constructor;if(r&&r.prototype&&(!cO(r.prototype)||!xhe(r.prototype,"isPrototypeOf")))return!1;if(e){let n=Object.keys(t);return lR(n,e)}return!0}var sy=class{get length(){return this.count}get[Symbol.toStringTag](){return"List"}constructor(){this.count=0,this.head={next:null,prev:null,value:null},this.head.next=this.head,this.head.prev=this.head}toArray(){return Array.from(this)}toString(){return`head <=> ${this.toArray().join(" <=> ")} <=> head`}*[Symbol.iterator](){for(let e of this.nodes())yield e.value}*nodes(){let e=this.head.next;for(;e!==this.head;){let{next:r}=e;yield e,e=r}}push(e){this.count+=1;let r={next:this.head,prev:this.head.prev,value:e};this.head.prev.next=r,this.head.prev=r}pushMany(e){for(let r of e)this.push(r)}unshift(e){this.count+=1;let r={next:this.head.next,prev:this.head,value:e};this.head.next.prev=r,this.head.next=r}remove(e){if(e===this.head||this.length===0)return null;this.count-=1;let r=e.prev,n=e.next;return r.next=n,n.prev=r,e.value}shift(){return this.remove(this.head.next)}pop(){return this.remove(this.head.prev)}prune(e){for(let r of this.nodes())e(r.value)&&this.remove(r)}clear(){this.count=0,this.head.next=this.head,this.head.prev=this.head}first(){return this.head.next.value}last(){return this.head.prev.value}};W.List=sy;var lO=class{constructor(){this.buffers=new sy,this.totalByteLength=0}get length(){return this.totalByteLength}append(e){this.buffers.push(e),this.totalByteLength+=e.length}getInt32(){if(this.totalByteLength<4)return null;let e=this.buffers.first();if(e!=null&&e.byteLength>=4)return e.readInt32LE(0);let r=this.read(4),n=r.readInt32LE(0);return this.totalByteLength+=4,this.buffers.unshift(r),n}read(e){if(typeof e!="number"||e<0)throw new fn.MongoInvalidArgumentError('Argument "size" must be a non-negative number');if(e>this.totalByteLength)return Buffer.alloc(0);let r=Buffer.allocUnsafe(e);for(let n=0;n<e;){let s=this.buffers.shift();if(s==null)break;let i=e-n,o=Math.min(i,s.byteLength),a=s.subarray(0,o);r.set(a,n),n+=o,this.totalByteLength-=o,o<s.byteLength&&this.buffers.unshift(s.subarray(o))}return r}};W.BufferPool=lO;var pO=class t{constructor(e){this.host=void 0,this.port=void 0,this.socketPath=void 0,this.isIPv6=!1;let r=e.split(" ").join("%20");if(r.endsWith(".sock")){this.socketPath=decodeURIComponent(r);return}let n=`iLoveJS://${r}`,s;try{s=new ehe.URL(n)}catch(u){let c=new fn.MongoRuntimeError(`Unable to parse ${r} with URL`);throw c.cause=u,c}let i=s.hostname,o=s.port,a=decodeURIComponent(i).toLowerCase();if(a.startsWith("[")&&a.endsWith("]")&&(this.isIPv6=!0,a=a.substring(1,i.length-1)),this.host=a.toLowerCase(),typeof o=="number"?this.port=o:typeof o=="string"&&o!==""?this.port=Number.parseInt(o,10):this.port=27017,this.port===0)throw new fn.MongoParseError("Invalid port (zero) with hostname");Object.freeze(this)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new HostAddress('${this.toString()}')`}toString(){return typeof this.host=="string"?this.isIPv6?`[${this.host}]:${this.port}`:`${this.host}:${this.port}`:`${this.socketPath}`}static fromString(e){return new t(e)}static fromHostPort(e,r){return e.includes(":")&&(e=`[${e}]`),t.fromString(`${e}:${r}`)}static fromSrvRecord({name:e,port:r}){return t.fromHostPort(e,r)}toHostPort(){if(this.socketPath)return{host:this.socketPath,port:0};let e=this.host??"",r=this.port??0;return{host:e,port:r}}};W.HostAddress=pO;W.DEFAULT_PK_FACTORY={createPk(){return new dO.ObjectId}};W.MONGODB_WARNING_CODE="MONGODB DRIVER";function pR(t){return process.emitWarning(t,{code:W.MONGODB_WARNING_CODE})}var iR=new Set;function Dhe(t){if(!iR.has(t))return iR.add(t),pR(t)}function Mhe(t){return Object.values(t).join(", ")}function Phe(t){return t?!!(t.loadBalanced||t.description.logicalSessionTimeoutMinutes!=null&&t.description.type!==she.ServerType.Standalone):!1}function Bhe(t,e=0){let r=Array.from(t);if(e>r.length)throw new fn.MongoRuntimeError("Limit must be less than the number of items");let n=r.length,s=e%r.length===0?1:r.length-e;for(;n>s;){let i=Math.floor(Math.random()*n);n-=1;let o=r[n];r[n]=r[i],r[i]=o}return e%r.length===0?r:r.slice(s)}function Ihe(t){return!!(t.aggregate||t.count||t.distinct||t.find||t.geoNear)}function Nhe(t,e){return t==null&&e==null?0:t==null?-1:e==null?1:W.ByteUtils.compare(t.id,e.id)}function dR(t){if(typeof t=="number")return Math.trunc(t);let e=Number.parseInt(String(t),10);return Number.isNaN(e)?null:e}function khe(t){let e=dR(t);return e!=null&&e>=0?e:null}function Rhe(t,e){let r=t.endsWith(".")?t.slice(0,t.length-1):t,n=e.endsWith(".")?e.slice(0,e.length-1):e,s=/^.*?\./,i=n.split(".").length<3,o=`.${r.replace(s,"")}`,a=i?n:`.${n.replace(s,"")}`;if(a.startsWith(".")||(a="."+a),i&&r.split(".").length<=n.split(".").length)throw new fn.MongoAPIError("Server record does not have at least one more domain level than parent URI");if(!o.endsWith(a))throw new fn.MongoAPIError("Server record does not share hostname with parent URI")}function Fhe(t,e={}){return new Promise((r,n)=>{let s,i=aR.get(t,e,o=>{o.setEncoding("utf8");let a="";o.on("data",u=>a+=u),o.on("end",()=>{(0,uO.clearTimeout)(s),r({status:o.statusCode,body:a})})}).on("error",o=>{(0,uO.clearTimeout)(s),n(o)}).end();s=(0,uO.setTimeout)(()=>{i.destroy(new fn.MongoNetworkTimeoutError("request timed out after 10 seconds"))},1e4)})}async function $he(t,e={}){return await new Promise((r,n)=>{let s={method:"GET",timeout:1e4,json:!0,...Zde.parse(t),...e},i=aR.request(s,o=>{o.setEncoding("utf8");let a="";o.on("data",u=>{a+=u}),o.once("end",()=>{if(e.json===!1){r(a);return}try{let u=JSON.parse(a);r(u)}catch{n(new fn.MongoRuntimeError(`Invalid JSON response: "${a}"`))}})});i.once("timeout",()=>i.destroy(new fn.MongoNetworkTimeoutError(`Network request to ${t} timed out after ${e.timeout} ms`))),i.once("error",o=>n(o)),i.end()})}W.DOCUMENT_DB_CHECK=/(\.docdb\.amazonaws\.com$)|(\.docdb-elastic\.amazonaws\.com$)/;W.COSMOS_DB_CHECK=/\.cosmos\.azure\.com$/;W.DOCUMENT_DB_MSG="You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb";W.COSMOS_DB_MSG="You appear to be connected to a CosmosDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/cosmosdb";function qhe(t,e){return!!(e&&t.test(e.toLowerCase()))}function hO(){let t,e;return{promise:new Promise(function(s,i){t=s,e=i}),resolve:t,reject:e}}function jhe(t){}W.randomBytes=(0,the.promisify)(oR.randomBytes);async function Lhe(t,e,r){r?.signal?.throwIfAborted();let{promise:n,resolve:s,reject:i}=hO(),o=c=>s(c),a=c=>i(c),u=fO(r?.signal,function(){i(this.reason)});t.once(e,o).once("error",a);try{return await n}finally{t.off(e,o),t.off("error",a),u?.[W.kDispose]()}}function Uhe(t,e,r){return(r.forceServerObjectId??t.db.options?.forceServerObjectId??!1)||e._id==null&&(e._id=t.s.pkFactory.createPk()),e}async function Vhe(t,e){try{return await Xde.promises.access(t,e),!0}catch{return!1}}function Whe(t,e){return t===0?e:e===0?t:Math.min(t,e)}function zhe(){}function hR(t,e,r=!0){if(r&&(Buffer.isBuffer(e)&&(e=(0,dO.deserialize)(e)),Buffer.isBuffer(t)))throw new fn.MongoRuntimeError("Expected result of decryption to be deserialized BSON object");if(!(!t||typeof t!="object"))for(let n of Object.keys(t)){let s=e[n];if(s&&s._bsontype==="Binary"&&s.sub_type===6){t[ry.kDecoratedKeys]||Object.defineProperty(t,ry.kDecoratedKeys,{value:[],configurable:!0,enumerable:!1,writable:!1}),t[ry.kDecoratedKeys].push(n);continue}hR(t[n],s,!1)}}W.kDispose=Symbol.dispose??Symbol("dispose");function fO(t,e){if(t!=null)return t.addEventListener("abort",e,{once:!0}),{[W.kDispose]:()=>t.removeEventListener("abort",e)}}async function Khe(t,{signal:e}){if(e==null)return await t;let{promise:r,reject:n}=hO(),s=e.aborted?n(e.reason):fO(e,function(){n(this.reason)});try{return await Promise.race([t,r])}finally{s?.[W.kDispose]()}}});var fR=m(iy=>{"use strict";Object.defineProperty(iy,"__esModule",{value:!0});iy.OnDemandDocument=void 0;var ve=pe(),Ad={type:0,nameOffset:1,nameLength:2,offset:3,length:4},mO=class t{constructor(e,r=0,n=!1,s){this.cache=Object.create(null),this.indexFound=Object.create(null),this.bson=e,this.offset=r,this.isArray=n,this.elements=s??(0,ve.parseToElementsToArray)(this.bson,r)}isElementName(e,r){let n=r[Ad.nameLength],s=r[Ad.nameOffset];if(e.length!==n)return!1;let i=s+n;for(let o=s,a=0;a<e.length&&o<i;a++,o++)if(this.bson[o]!==e.charCodeAt(a))return!1;return!0}getElement(e){let r=this.cache[e];if(r===!1)return null;if(r!=null)return r;if(typeof e=="number")if(this.isArray)if(e<this.elements.length){let s={element:this.elements[e],value:void 0};return this.cache[e]=s,this.indexFound[e]=!0,s}else return null;else return null;for(let n=0;n<this.elements.length;n++){let s=this.elements[n];if(!(n in this.indexFound)&&this.isElementName(e,s)){let i={element:s,value:void 0};return this.cache[e]=i,this.indexFound[n]=!0,i}}return this.cache[e]=!1,null}toJSValue(e,r){let n=e[Ad.type],s=e[Ad.offset],i=e[Ad.length];if(r!==n)return null;switch(r){case ve.BSONType.null:case ve.BSONType.undefined:return null;case ve.BSONType.double:return(0,ve.getFloat64LE)(this.bson,s);case ve.BSONType.int:return(0,ve.getInt32LE)(this.bson,s);case ve.BSONType.long:return(0,ve.getBigInt64LE)(this.bson,s);case ve.BSONType.bool:return!!this.bson[s];case ve.BSONType.objectId:return new ve.ObjectId(this.bson.subarray(s,s+12));case ve.BSONType.timestamp:return new ve.Timestamp((0,ve.getBigInt64LE)(this.bson,s));case ve.BSONType.string:return(0,ve.toUTF8)(this.bson,s+4,s+i-1,!1);case ve.BSONType.binData:{let o=(0,ve.getInt32LE)(this.bson,s),a=this.bson[s+4];if(a===2){let u=(0,ve.getInt32LE)(this.bson,s+1+4);if(u<0)throw new ve.BSONError("Negative binary type element size found for subtype 0x02");if(u>o-4)throw new ve.BSONError("Binary type with subtype 0x02 contains too long binary size");if(u<o-4)throw new ve.BSONError("Binary type with subtype 0x02 contains too short binary size");return new ve.Binary(this.bson.subarray(s+1+4+4,s+1+4+4+u),2)}return new ve.Binary(this.bson.subarray(s+1+4,s+1+4+o),a)}case ve.BSONType.date:return new Date(Number((0,ve.getBigInt64LE)(this.bson,s)));case ve.BSONType.object:return new t(this.bson,s);case ve.BSONType.array:return new t(this.bson,s,!0);default:throw new ve.BSONError(`Unsupported BSON type: ${r}`)}}size(){return this.elements.length}has(e){let r=this.cache[e];return r===!1?!1:r!=null?!0:this.getElement(e)!=null}get(e,r,n){let s=this.getElement(e);if(s==null){if(n===!0)throw new ve.BSONError(`BSON element "${e}" is missing`);return null}if(s.value==null){let i=this.toJSValue(s.element,r);if(i==null){if(n===!0)throw new ve.BSONError(`BSON element "${e}" is missing`);return null}s.value=i}return s.value}getNumber(e,r){let n=this.get(e,ve.BSONType.bool),s=n==null?null:n?1:0,i=this.get(e,ve.BSONType.long),o=i==null?null:Number(i),a=s??o??this.get(e,ve.BSONType.int)??this.get(e,ve.BSONType.double);if(r===!0&&a==null)throw new ve.BSONError(`BSON element "${e}" is missing`);return a}toObject(e){return(0,ve.deserialize)(this.bson,{...e,index:this.offset,allowObjectSmallerThanBufferSize:!0})}toBytes(){let e=(0,ve.getInt32LE)(this.bson,this.offset);return this.bson.subarray(this.offset,this.offset+e)}};iy.OnDemandDocument=mO});var ze=m(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.ClientBulkWriteCursorResponse=ii.ExplainedCursorResponse=ii.CursorResponse=ii.MongoDBResponse=void 0;ii.isErrorResponse=yR;var Pe=pe(),ju=z(),mR=X(),Hhe=fR(),oy={type:0,nameOffset:1,nameLength:2,offset:3,length:4};function yR(t,e){for(let r=0;r<e.length;r++){let n=e[r];if(n[oy.nameLength]===2){let s=n[oy.nameOffset];if(t[s]===111&&t[s+1]===107){let i=n[oy.offset],o=n[oy.length];for(let a=i;a<i+o;a++)if(t[a]!==0)return!1;return!0}}}return!0}var ay=class t extends Hhe.OnDemandDocument{get(e,r,n){try{return super.get(e,r,n)}catch(s){throw new ju.MongoUnexpectedServerResponseError(s.message,{cause:s})}}static is(e){return e instanceof t}static make(e){let r=(0,Pe.parseToElementsToArray)(e,0);return yR(e,r)?new t(e,0,!1,r):new this(e,0,!1,r)}static{this.empty=new t(new Uint8Array([13,0,0,0,16,111,107,0,1,0,0,0,0]))}get isMaxTimeExpiredError(){if(this.ok===0&&this.code===ju.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;if(this.ok===0)return!1;if(this.get("writeConcernError",Pe.BSONType.object)?.getNumber("code")===ju.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;let n=this.get("writeErrors",Pe.BSONType.array);if(n?.size()){for(let s=0;s<n.size();s++)if(n.get(s,Pe.BSONType.object)?.getNumber("code")===ju.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0}return!1}get recoveryToken(){return this.get("recoveryToken",Pe.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}get atClusterTime(){return this.get("cursor",Pe.BSONType.object)?.get("atClusterTime",Pe.BSONType.timestamp)??this.get("atClusterTime",Pe.BSONType.timestamp)}get operationTime(){return this.get("operationTime",Pe.BSONType.timestamp)}get ok(){return this.getNumber("ok")?1:0}get $err(){return this.get("$err",Pe.BSONType.string)}get errmsg(){return this.get("errmsg",Pe.BSONType.string)}get code(){return this.getNumber("code")}get $clusterTime(){if(!("clusterTime"in this)){let e=this.get("$clusterTime",Pe.BSONType.object);if(e==null)return this.clusterTime=null,null;let r=e.get("clusterTime",Pe.BSONType.timestamp,!0),n=e.get("signature",Pe.BSONType.object)?.toObject();this.clusterTime={clusterTime:r,signature:n}}return this.clusterTime??null}toObject(e){let r={...(0,Pe.pluckBSONSerializeOptions)(e??{}),validation:(0,Pe.parseUtf8ValidationOption)(e)};return super.toObject(r)}};ii.MongoDBResponse=ay;var Od=class t extends ay{constructor(){super(...arguments),this._batch=null,this.iterated=0,this._encryptedBatch=null}static get emptyGetMore(){return new t((0,Pe.serialize)({ok:1,cursor:{id:0n,nextBatch:[]}}))}static is(e){return e instanceof t||e===t.emptyGetMore}get cursor(){return this.get("cursor",Pe.BSONType.object,!0)}get id(){try{return Pe.Long.fromBigInt(this.cursor.get("id",Pe.BSONType.long,!0))}catch(e){throw new ju.MongoUnexpectedServerResponseError(e.message,{cause:e})}}get ns(){let e=this.cursor.get("ns",Pe.BSONType.string);return e!=null?(0,mR.ns)(e):null}get length(){return Math.max(this.batchSize-this.iterated,0)}get encryptedBatch(){if(this.encryptedResponse==null)return null;if(this._encryptedBatch!=null)return this._encryptedBatch;let e=this.encryptedResponse?.get("cursor",Pe.BSONType.object);if(e?.has("firstBatch"))this._encryptedBatch=e.get("firstBatch",Pe.BSONType.array,!0);else if(e?.has("nextBatch"))this._encryptedBatch=e.get("nextBatch",Pe.BSONType.array,!0);else throw new ju.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._encryptedBatch}get batch(){if(this._batch!=null)return this._batch;let e=this.cursor;if(e.has("firstBatch"))this._batch=e.get("firstBatch",Pe.BSONType.array,!0);else if(e.has("nextBatch"))this._batch=e.get("nextBatch",Pe.BSONType.array,!0);else throw new ju.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._batch}get batchSize(){return this.batch?.size()}get postBatchResumeToken(){return this.cursor.get("postBatchResumeToken",Pe.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}shift(e){if(this.iterated>=this.batchSize)return null;let r=this.batch.get(this.iterated,Pe.BSONType.object,!0)??null,n=this.encryptedBatch?.get(this.iterated,Pe.BSONType.object,!0)??null;if(this.iterated+=1,e?.raw)return r.toBytes();{let s=r.toObject(e);return n&&(0,mR.decorateDecryptionResult)(s,n.toObject(e),!0),s}}clear(){this.iterated=this.batchSize}};ii.CursorResponse=Od;var yO=class extends Od{constructor(){super(...arguments),this.isExplain=!0,this._length=1}get id(){return Pe.Long.fromBigInt(0n)}get batchSize(){return 0}get ns(){return null}get length(){return this._length}shift(e){return this._length===0?null:(this._length-=1,this.toObject(e))}};ii.ExplainedCursorResponse=yO;var gO=class extends Od{get insertedCount(){return this.get("nInserted",Pe.BSONType.int,!0)}get upsertedCount(){return this.get("nUpserted",Pe.BSONType.int,!0)}get matchedCount(){return this.get("nMatched",Pe.BSONType.int,!0)}get modifiedCount(){return this.get("nModified",Pe.BSONType.int,!0)}get deletedCount(){return this.get("nDeleted",Pe.BSONType.int,!0)}get writeConcernError(){return this.get("writeConcernError",Pe.BSONType.object,!1)}};ii.ClientBulkWriteCursorResponse=gO});var Cd=m(ji=>{"use strict";Object.defineProperty(ji,"__esModule",{value:!0});ji.Explain=ji.ExplainVerbosity=void 0;ji.validateExplainTimeoutOptions=Jhe;ji.decorateWithExplain=Yhe;var Ghe=z();ji.ExplainVerbosity=Object.freeze({queryPlanner:"queryPlanner",queryPlannerExtended:"queryPlannerExtended",executionStats:"executionStats",allPlansExecution:"allPlansExecution"});var _O=class t{constructor(e,r){typeof e=="boolean"?this.verbosity=e?ji.ExplainVerbosity.allPlansExecution:ji.ExplainVerbosity.queryPlanner:this.verbosity=e,this.maxTimeMS=r}static fromOptions({explain:e}={}){if(e==null)return;if(typeof e=="boolean"||typeof e=="string")return new t(e);let{verbosity:r,maxTimeMS:n}=e;return new t(r,n)}};ji.Explain=_O;function Jhe(t,e){let{maxTimeMS:r,timeoutMS:n}=t;if(n!=null&&(r!=null||e?.maxTimeMS!=null))throw new Ghe.MongoAPIError("Cannot use maxTimeMS with timeoutMS for explain commands.")}function Yhe(t,e){let{verbosity:r,maxTimeMS:n}=e,s={explain:t,verbosity:r};return typeof n=="number"&&(s.maxTimeMS=n),s}});var Xe=m(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.AbstractOperation=Ds.Aspect=void 0;Ds.defineAspects=Xhe;var Qhe=pe(),EO=sr();Ds.Aspect={READ_OPERATION:Symbol("READ_OPERATION"),WRITE_OPERATION:Symbol("WRITE_OPERATION"),RETRYABLE:Symbol("RETRYABLE"),EXPLAINABLE:Symbol("EXPLAINABLE"),SKIP_COLLATION:Symbol("SKIP_COLLATION"),CURSOR_CREATING:Symbol("CURSOR_CREATING"),MUST_SELECT_SAME_SERVER:Symbol("MUST_SELECT_SAME_SERVER"),COMMAND_BATCHING:Symbol("COMMAND_BATCHING"),SUPPORTS_RAW_DATA:Symbol("SUPPORTS_RAW_DATA")};var bO=class{constructor(e={}){this.readPreference=this.hasAspect(Ds.Aspect.WRITE_OPERATION)?EO.ReadPreference.primary:EO.ReadPreference.fromOptions(e)??EO.ReadPreference.primary,this.bsonOptions=(0,Qhe.resolveBSONOptions)(e),this._session=e.session!=null?e.session:void 0,this.options=e,this.bypassPinningCheck=!!e.bypassPinningCheck}hasAspect(e){let r=this.constructor;return r.aspects==null?!1:r.aspects.has(e)}get session(){return this._session}set session(e){this._session=e}clearSession(){this._session=void 0}resetBatch(){return!0}get canRetryRead(){return this.hasAspect(Ds.Aspect.RETRYABLE)&&this.hasAspect(Ds.Aspect.READ_OPERATION)}get canRetryWrite(){return this.hasAspect(Ds.Aspect.RETRYABLE)&&this.hasAspect(Ds.Aspect.WRITE_OPERATION)}handleOk(e){return e.toObject(this.bsonOptions)}handleError(e){throw e}};Ds.AbstractOperation=bO;function Xhe(t,e){return!Array.isArray(e)&&!(e instanceof Set)&&(e=[e]),e=new Set(e),Object.defineProperty(t,"aspects",{value:e,writable:!1}),e}});var At=m(cy=>{"use strict";Object.defineProperty(cy,"__esModule",{value:!0});cy.CommandOperation=void 0;var Zhe=Eo(),efe=z(),SO=Cd(),tfe=si(),uy=X(),gR=hn(),Lu=Xe(),wO=class extends Lu.AbstractOperation{constructor(e,r){super(r),this.options=r??{};let n=r?.dbName||r?.authdb;if(n?this.ns=new uy.MongoDBNamespace(n,"$cmd"):this.ns=e?e.s.namespace.withCollection("$cmd"):new uy.MongoDBNamespace("admin","$cmd"),this.readConcern=tfe.ReadConcern.fromOptions(r),this.writeConcern=gR.WriteConcern.fromOptions(r),this.hasAspect(Lu.Aspect.EXPLAINABLE))this.explain=SO.Explain.fromOptions(r),this.explain&&(0,SO.validateExplainTimeoutOptions)(this.options,this.explain);else if(r?.explain!=null)throw new efe.MongoInvalidArgumentError('Option "explain" is not supported on this command')}get canRetryWrite(){return this.hasAspect(Lu.Aspect.EXPLAINABLE)?this.explain==null:super.canRetryWrite}buildOptions(e){return{...this.options,...this.bsonOptions,timeoutContext:e,readPreference:this.readPreference,session:this.session}}buildCommand(e,r){let n=this.buildCommandDocument(e,r),s=this.session&&this.session.inTransaction();return this.readConcern&&(0,uy.commandSupportsReadConcern)(n)&&!s&&Object.assign(n,{readConcern:this.readConcern}),this.writeConcern&&this.hasAspect(Lu.Aspect.WRITE_OPERATION)&&!s&&gR.WriteConcern.apply(n,this.writeConcern),this.options.collation&&typeof this.options.collation=="object"&&!this.hasAspect(Lu.Aspect.SKIP_COLLATION)&&Object.assign(n,{collation:this.options.collation}),typeof this.options.maxTimeMS=="number"&&(n.maxTimeMS=this.options.maxTimeMS),this.options.rawData!=null&&this.hasAspect(Lu.Aspect.SUPPORTS_RAW_DATA)&&(0,uy.maxWireVersion)(e)>=Zhe.MIN_SUPPORTED_RAW_DATA_WIRE_VERSION&&(n.rawData=this.options.rawData),this.hasAspect(Lu.Aspect.EXPLAINABLE)&&this.explain?(0,SO.decorateWithExplain)(n,this.explain):n}};cy.CommandOperation=wO});var OO=m(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});bo.DeleteManyOperation=bo.DeleteOneOperation=bo.DeleteOperation=void 0;bo.makeDeleteStatement=AO;var rfe=ze(),vd=z(),nfe=X(),sfe=At(),mn=Xe(),Ll=class extends sfe.CommandOperation{constructor(e,r,n){super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=rfe.MongoDBResponse,this.options=n,this.ns=e,this.statements=r}get commandName(){return"delete"}get canRetryWrite(){return super.canRetryWrite===!1?!1:this.statements.every(e=>e.limit!=null?e.limit>0:!0)}buildCommandDocument(e,r){let n=this.options,s=typeof n.ordered=="boolean"?n.ordered:!0,i={delete:this.ns.collection,deletes:this.statements,ordered:s};if(n.let&&(i.let=n.let),n.comment!==void 0&&(i.comment=n.comment),this.writeConcern&&this.writeConcern.w===0&&(0,nfe.maxWireVersion)(e)<9&&this.statements.find(a=>a.hint))throw new vd.MongoCompatibilityError("hint for the delete command is only supported on MongoDB 4.4+");return i}};bo.DeleteOperation=Ll;var ly=class extends Ll{constructor(e,r,n){super(e,[AO(r,{...n,limit:1})],n)}handleOk(e){let r=super.handleOk(e);if(this.explain)return r;if(r.code)throw new vd.MongoServerError(r);if(r.writeErrors)throw new vd.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:r.n}}};bo.DeleteOneOperation=ly;var py=class extends Ll{constructor(e,r,n){super(e,[AO(r,n)],n)}handleOk(e){let r=super.handleOk(e);if(this.explain)return r;if(r.code)throw new vd.MongoServerError(r);if(r.writeErrors)throw new vd.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:r.n}}};bo.DeleteManyOperation=py;function AO(t,e){let r={q:t,limit:typeof e.limit=="number"?e.limit:0};return e.collation&&(r.collation=e.collation),e.hint&&(r.hint=e.hint),r}(0,mn.defineAspects)(Ll,[mn.Aspect.RETRYABLE,mn.Aspect.WRITE_OPERATION,mn.Aspect.SUPPORTS_RAW_DATA]);(0,mn.defineAspects)(ly,[mn.Aspect.RETRYABLE,mn.Aspect.WRITE_OPERATION,mn.Aspect.EXPLAINABLE,mn.Aspect.SKIP_COLLATION,mn.Aspect.SUPPORTS_RAW_DATA]);(0,mn.defineAspects)(py,[mn.Aspect.WRITE_OPERATION,mn.Aspect.EXPLAINABLE,mn.Aspect.SKIP_COLLATION,mn.Aspect.SUPPORTS_RAW_DATA])});var Td=m(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});So.MIN_SECONDARY_WRITE_WIRE_VERSION=void 0;So.writableServerSelector=ofe;So.sameServerSelector=afe;So.secondaryWritableServerSelector=ufe;So.readPreferenceServerSelector=vO;var CO=z(),xd=sr(),ns=ts(),ife=1e4,_R=90;So.MIN_SECONDARY_WRITE_WIRE_VERSION=13;function ofe(){return function(e,r){return dy(e,r.filter(n=>n.isWritable))}}function afe(t){return function(r,n){return t?n.filter(s=>s.address===t.address&&s.type!==ns.ServerType.Unknown):[]}}function ufe(t,e){return!e||!t||t&&t<So.MIN_SECONDARY_WRITE_WIRE_VERSION?vO(xd.ReadPreference.primary):vO(e)}function cfe(t,e,r){if(t.maxStalenessSeconds==null||t.maxStalenessSeconds<0)return r;let n=t.maxStalenessSeconds,s=(e.heartbeatFrequencyMS+ife)/1e3;if(n<s)throw new CO.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${s} seconds`);if(n<_R)throw new CO.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${_R} seconds`);if(e.type===ns.TopologyType.ReplicaSetWithPrimary){let i=Array.from(e.servers.values()).filter(hy)[0];return r.reduce((o,a)=>{let c=(a.lastUpdateTime-a.lastWriteDate-(i.lastUpdateTime-i.lastWriteDate)+e.heartbeatFrequencyMS)/1e3,l=t.maxStalenessSeconds??0;return c<=l&&o.push(a),o},[])}if(e.type===ns.TopologyType.ReplicaSetNoPrimary){if(r.length===0)return r;let i=r.reduce((o,a)=>a.lastWriteDate>o.lastWriteDate?a:o);return r.reduce((o,a)=>{let c=(i.lastWriteDate-a.lastWriteDate+e.heartbeatFrequencyMS)/1e3,l=t.maxStalenessSeconds??0;return c<=l&&o.push(a),o},[])}return r}function lfe(t,e){let r=Object.keys(t),n=Object.keys(e);for(let s=0;s<r.length;++s){let i=r[s];if(n.indexOf(i)===-1||e[i]!==t[i])return!1}return!0}function pfe(t,e){if(t.tags==null||Array.isArray(t.tags)&&t.tags.length===0)return e;for(let r=0;r<t.tags.length;++r){let n=t.tags[r],s=e.reduce((i,o)=>(lfe(n,o.tags)&&i.push(o),i),[]);if(s.length)return s}return[]}function dy(t,e){let r=e.reduce((s,i)=>Math.min(i.roundTripTime,s),1/0),n=r+t.localThresholdMS;return e.reduce((s,i)=>(i.roundTripTime<=n&&i.roundTripTime>=r&&s.push(i),s),[])}function hy(t){return t.type===ns.ServerType.RSPrimary}function dfe(t){return t.type===ns.ServerType.RSSecondary}function hfe(t){return t.type===ns.ServerType.RSSecondary||t.type===ns.ServerType.RSPrimary}function ER(t){return t.type!==ns.ServerType.Unknown}function ffe(t){return t.type===ns.ServerType.LoadBalancer}function vO(t){if(!t.isValid())throw new CO.MongoInvalidArgumentError("Invalid read preference specified");return function(r,n,s=[]){if(r.type===ns.TopologyType.LoadBalanced)return n.filter(ffe);if(r.type===ns.TopologyType.Unknown)return[];if(r.type===ns.TopologyType.Single)return dy(r,n.filter(ER));if(r.type===ns.TopologyType.Sharded){let u=n.filter(l=>!s.includes(l)),c=u.length>0?u:s;return dy(r,c.filter(ER))}let i=t.mode;if(i===xd.ReadPreference.PRIMARY)return n.filter(hy);if(i===xd.ReadPreference.PRIMARY_PREFERRED){let u=n.filter(hy);if(u.length)return u}let o=i===xd.ReadPreference.NEAREST?hfe:dfe,a=dy(r,pfe(t,cfe(t,r,n.filter(o))));return i===xd.ReadPreference.SECONDARY_PREFERRED&&a.length===0?n.filter(hy):a}}});var ir=m(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.LegacyTimeoutContext=Ps.CSOTTimeoutContext=Ps.TimeoutContext=Ps.Timeout=Ps.TimeoutError=void 0;var bR=require("timers"),Uu=z(),xO=X(),Dd=class extends Error{get name(){return"TimeoutError"}constructor(e,r){super(e,r),this.duration=r.duration}static is(e){return e!=null&&typeof e=="object"&&"name"in e&&e.name==="TimeoutError"}};Ps.TimeoutError=Dd;var Ms=class t extends Promise{get remainingTime(){return this.timedOut?0:this.duration===0?1/0:this.start+this.duration-Math.trunc(performance.now())}get timeElapsed(){return Math.trunc(performance.now())-this.start}constructor(e=()=>null,r){let n=r?.duration??0,s=!!r?.unref,i=r?.rejection;if(n<0)throw new Uu.MongoInvalidArgumentError("Cannot create a Timeout with a negative duration");let o;super((a,u)=>{o=u,e(xO.noop,u)}),this.ended=null,this.timedOut=!1,this.cleared=!1,this.duration=n,this.start=Math.trunc(performance.now()),i==null&&this.duration>0?(this.id=(0,bR.setTimeout)(()=>{this.ended=Math.trunc(performance.now()),this.timedOut=!0,o(new Dd(`Expired after ${n}ms`,{duration:n}))},this.duration),typeof this.id.unref=="function"&&s&&this.id.unref()):i!=null&&(this.ended=Math.trunc(performance.now()),this.timedOut=!0,o(i))}clear(){(0,bR.clearTimeout)(this.id),this.id=void 0,this.timedOut=!1,this.cleared=!0}throwIfExpired(){if(this.timedOut)throw this.then(void 0,xO.squashError),new Dd("Timed out",{duration:this.duration})}static expires(e,r){return new t(void 0,{duration:e,unref:r})}static reject(e){return new t(void 0,{duration:0,unref:!0,rejection:e})}};Ps.Timeout=Ms;function mfe(t){return t!=null&&typeof t=="object"&&"serverSelectionTimeoutMS"in t&&typeof t.serverSelectionTimeoutMS=="number"&&"waitQueueTimeoutMS"in t&&typeof t.waitQueueTimeoutMS=="number"}function yfe(t){return t!=null&&typeof t=="object"&&"serverSelectionTimeoutMS"in t&&typeof t.serverSelectionTimeoutMS=="number"&&"timeoutMS"in t&&typeof t.timeoutMS=="number"}var Md=class{static create(e){if(e.session?.timeoutContext!=null)return e.session?.timeoutContext;if(yfe(e))return new fy(e);if(mfe(e))return new my(e);throw new Uu.MongoRuntimeError("Unrecognized options")}};Ps.TimeoutContext=Md;var fy=class t extends Md{constructor(e){super(),this.minRoundTripTime=0,this.start=Math.trunc(performance.now()),this.timeoutMS=e.timeoutMS,this.serverSelectionTimeoutMS=e.serverSelectionTimeoutMS,this.socketTimeoutMS=e.socketTimeoutMS,this.clearServerSelectionTimeout=!1}get maxTimeMS(){return this.remainingTimeMS-this.minRoundTripTime}get remainingTimeMS(){let e=Math.trunc(performance.now())-this.start;return this.timeoutMS<=0?1/0:this.timeoutMS-e}csotEnabled(){return!0}get serverSelectionTimeout(){if(typeof this._serverSelectionTimeout!="object"||this._serverSelectionTimeout?.cleared){let{remainingTimeMS:e,serverSelectionTimeoutMS:r}=this;if(e<=0)return Ms.reject(new Uu.MongoOperationTimeoutError(`Timed out in server selection after ${this.timeoutMS}ms`));r!==0&&(0,xO.csotMin)(e,r)===r?this._serverSelectionTimeout=Ms.expires(r):e>0&&Number.isFinite(e)?this._serverSelectionTimeout=Ms.expires(e):this._serverSelectionTimeout=null}return this._serverSelectionTimeout}get connectionCheckoutTimeout(){if(typeof this._connectionCheckoutTimeout!="object"||this._connectionCheckoutTimeout?.cleared)if(typeof this._serverSelectionTimeout=="object")this._connectionCheckoutTimeout=this._serverSelectionTimeout;else throw new Uu.MongoRuntimeError("Unreachable. If you are seeing this error, please file a ticket on the NODE driver project on Jira");return this._connectionCheckoutTimeout}get timeoutForSocketWrite(){let{remainingTimeMS:e}=this;return Number.isFinite(e)?e>0?Ms.expires(e):Ms.reject(new Uu.MongoOperationTimeoutError("Timed out before socket write")):null}get timeoutForSocketRead(){let{remainingTimeMS:e}=this;return Number.isFinite(e)?e>0?Ms.expires(e):Ms.reject(new Uu.MongoOperationTimeoutError("Timed out before socket read")):null}refresh(){this.start=Math.trunc(performance.now()),this.minRoundTripTime=0,this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}clear(){this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}getRemainingTimeMSOrThrow(e){let{remainingTimeMS:r}=this;if(r<=0)throw new Uu.MongoOperationTimeoutError(e??`Expired after ${this.timeoutMS}ms`);return r}clone(){let e=new t({timeoutMS:this.timeoutMS,serverSelectionTimeoutMS:this.serverSelectionTimeoutMS});return e.start=this.start,e}refreshed(){return new t(this)}addMaxTimeMSToCommand(e,r){if(r.omitMaxTimeMS)return;let n=this.remainingTimeMS-this.minRoundTripTime;n>0&&Number.isFinite(n)&&(e.maxTimeMS=n)}getSocketTimeoutMS(){return 0}};Ps.CSOTTimeoutContext=fy;var my=class t extends Md{constructor(e){super(),this.options=e,this.clearServerSelectionTimeout=!0}csotEnabled(){return!1}get serverSelectionTimeout(){return this.options.serverSelectionTimeoutMS!=null&&this.options.serverSelectionTimeoutMS>0?Ms.expires(this.options.serverSelectionTimeoutMS):null}get connectionCheckoutTimeout(){return this.options.waitQueueTimeoutMS!=null&&this.options.waitQueueTimeoutMS>0?Ms.expires(this.options.waitQueueTimeoutMS):null}get timeoutForSocketWrite(){return null}get timeoutForSocketRead(){return null}refresh(){}clear(){}get maxTimeMS(){return null}refreshed(){return new t(this.options)}addMaxTimeMSToCommand(e,r){}getSocketTimeoutMS(){return this.options.socketTimeoutMS}};Ps.LegacyTimeoutContext=my});var Pd=m(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.AggregateOperation=Vu.DB_AGGREGATE_COLLECTION=void 0;var TO=ze(),gfe=z(),_fe=hn(),Efe=At(),Ul=Xe();Vu.DB_AGGREGATE_COLLECTION=1;var yy=class extends Efe.CommandOperation{constructor(e,r,n){if(super(void 0,{...n,dbName:e.db}),this.SERVER_COMMAND_RESPONSE_TYPE=TO.CursorResponse,this.options={...n},this.target=e.collection||Vu.DB_AGGREGATE_COLLECTION,this.pipeline=r,this.hasWriteStage=!1,typeof n?.out=="string")this.pipeline=this.pipeline.concat({$out:n.out}),this.hasWriteStage=!0;else if(r.length>0){let s=r[r.length-1];(s.$out||s.$merge)&&(this.hasWriteStage=!0)}if(this.hasWriteStage||delete this.options.writeConcern,n?.cursor!=null&&typeof n.cursor!="object")throw new gfe.MongoInvalidArgumentError("Cursor options must be an object");this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?TO.ExplainedCursorResponse:TO.CursorResponse}get commandName(){return"aggregate"}get canRetryRead(){return!this.hasWriteStage}addToPipeline(e){this.pipeline.push(e)}buildCommandDocument(){let e=this.options,r={aggregate:this.target,pipeline:this.pipeline};return this.hasWriteStage&&this.writeConcern&&_fe.WriteConcern.apply(r,this.writeConcern),e.bypassDocumentValidation===!0&&(r.bypassDocumentValidation=e.bypassDocumentValidation),typeof e.allowDiskUse=="boolean"&&(r.allowDiskUse=e.allowDiskUse),e.hint&&(r.hint=e.hint),e.let&&(r.let=e.let),e.comment!==void 0&&(r.comment=e.comment),r.cursor=e.cursor||{},e.batchSize&&!this.hasWriteStage&&(r.cursor.batchSize=e.batchSize),r}handleOk(e){return e}};Vu.AggregateOperation=yy;(0,Ul.defineAspects)(yy,[Ul.Aspect.READ_OPERATION,Ul.Aspect.RETRYABLE,Ul.Aspect.EXPLAINABLE,Ul.Aspect.CURSOR_CREATING,Ul.Aspect.SUPPORTS_RAW_DATA])});var Er=m(_y=>{"use strict";Object.defineProperty(_y,"__esModule",{value:!0});_y.executeOperation=Ofe;_y.autoConnect=OR;var bfe=Eo(),Qr=z(),SR=sr(),wR=Td(),Sfe=ir(),gy=X(),wfe=Pd(),wo=Xe(),Afe=Qr.MONGODB_ERROR_CODES.IllegalOperation,AR="This MongoDB deployment does not support retryable writes. Please add retryWrites=false to your connection string.";async function Ofe(t,e,r){if(!(e instanceof wo.AbstractOperation))throw new Qr.MongoRuntimeError("This method requires a valid operation instance");let n=t.topology==null?await(0,gy.abortable)(OR(t),e.options):t.topology,s=e.session,i;if(s==null)i=Symbol(),s=t.startSession({owner:i,explicit:!1});else{if(s.hasEnded)throw new Qr.MongoExpiredSessionError("Use of expired sessions is not permitted");if(s.snapshotEnabled&&(0,gy.maxWireVersion)(n)<bfe.MIN_SUPPORTED_SNAPSHOT_READS_WIRE_VERSION)throw new Qr.MongoCompatibilityError("Snapshot reads require MongoDB 5.0 or later");if(s.client!==t)throw new Qr.MongoInvalidArgumentError("ClientSession must be from the same MongoClient")}e.session??=s;let o=e.readPreference??SR.ReadPreference.primary,a=!!s?.inTransaction(),u=e.hasAspect(wo.Aspect.READ_OPERATION);if(a&&!o.equals(SR.ReadPreference.primary)&&(u||e.commandName==="runCommand"))throw new Qr.MongoTransactionError(`Read preference in a transaction must be primary, not: ${o.mode}`);s?.isPinned&&s.transaction.isCommitted&&!e.bypassPinningCheck&&s.unpin(),r??=Sfe.TimeoutContext.create({session:s,serverSelectionTimeoutMS:t.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:t.s.options.waitQueueTimeoutMS,timeoutMS:e.options.timeoutMS});try{return await Cfe(e,{topology:n,timeoutContext:r,session:s,readPreference:o})}finally{s?.owner!=null&&s.owner===i&&await s.endSession()}}async function OR(t){if(t.topology==null){if(t.s.hasBeenClosed)throw new Qr.MongoNotConnectedError("Client must be connected before running operations");t.s.options.__skipPingOnConnect=!0;try{if(await t.connect(),t.topology==null)throw new Qr.MongoRuntimeError("client.connect did not create a topology but also did not throw");return t.topology}finally{delete t.s.options.__skipPingOnConnect}}return t.topology}async function Cfe(t,{topology:e,timeoutContext:r,session:n,readPreference:s}){let i;t.hasAspect(wo.Aspect.MUST_SELECT_SAME_SERVER)?i=(0,wR.sameServerSelector)(t.server?.description):t instanceof wfe.AggregateOperation&&t.hasWriteStage?i=(0,wR.secondaryWritableServerSelector)(e.commonWireVersion,s):i=s;let o=await e.selectServer(i,{session:n,operationName:t.commandName,timeoutContext:r,signal:t.options.signal}),a=t.hasAspect(wo.Aspect.READ_OPERATION),u=t.hasAspect(wo.Aspect.WRITE_OPERATION),c=n?.inTransaction()??!1,l=e.s.options.retryReads&&!c&&t.canRetryRead,p=e.s.options.retryWrites&&!c&&(0,gy.supportsRetryableWrites)(o)&&t.canRetryWrite,d=t.hasAspect(wo.Aspect.RETRYABLE)&&n!=null&&(a&&l||u&&p);u&&p&&n!=null&&(t.options.willRetryWrite=!0,n.incrementTransactionNumber());let h=d?r.csotEnabled()?1/0:2:1,f,y;for(let g=0;g<h;g++){if(f){if(u&&f.code===Afe)throw new Qr.MongoServerError({message:AR,errmsg:AR,originalError:f});if(t.hasAspect(wo.Aspect.COMMAND_BATCHING)&&!t.canRetryWrite||u&&!(0,Qr.isRetryableWriteError)(f)||a&&!(0,Qr.isRetryableReadError)(f))throw f;if(f instanceof Qr.MongoNetworkError&&t.hasAspect(wo.Aspect.CURSOR_CREATING)&&n!=null&&n.isPinned&&!n.inTransaction()&&n.unpin({force:!0,forceClear:!0}),o=await e.selectServer(i,{session:n,operationName:t.commandName,previousServer:y,signal:t.options.signal}),u&&!(0,gy.supportsRetryableWrites)(o))throw new Qr.MongoUnexpectedServerResponseError("Selected server does not support retryable writes")}t.server=o;try{g>0&&t.hasAspect(wo.Aspect.COMMAND_BATCHING)&&t.resetBatch();try{let _=await o.command(t,r);return t.handleOk(_)}catch(_){return t.handleError(_)}}catch(_){if(!(_ instanceof Qr.MongoError))throw _;if(f!=null&&_.hasErrorLabel(Qr.MongoErrorLabel.NoWritesPerformed))throw f;y=o.description,f=_,r.clear()}}throw f??new Qr.MongoRuntimeError("Tried to propagate retryability error, but no error was found.")}});var DO=m(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});Vl.InsertOneOperation=Vl.InsertOperation=void 0;var vfe=ze(),CR=z(),xfe=X(),Tfe=At(),xa=Xe(),Bd=class extends Tfe.CommandOperation{constructor(e,r,n){super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=vfe.MongoDBResponse,this.options={...n,checkKeys:n.checkKeys??!1},this.ns=e,this.documents=r}get commandName(){return"insert"}buildCommandDocument(e,r){let n=this.options??{},s=typeof n.ordered=="boolean"?n.ordered:!0,i={insert:this.ns.collection,documents:this.documents,ordered:s};return typeof n.bypassDocumentValidation=="boolean"&&(i.bypassDocumentValidation=n.bypassDocumentValidation),n.comment!==void 0&&(i.comment=n.comment),i}};Vl.InsertOperation=Bd;var Ey=class extends Bd{constructor(e,r,n){super(e.s.namespace,[(0,xfe.maybeAddIdToDocuments)(e,r,n)],n)}handleOk(e){let r=super.handleOk(e);if(r.code)throw new CR.MongoServerError(r);if(r.writeErrors)throw new CR.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,insertedId:this.documents[0]._id}}};Vl.InsertOneOperation=Ey;(0,xa.defineAspects)(Bd,[xa.Aspect.RETRYABLE,xa.Aspect.WRITE_OPERATION,xa.Aspect.SUPPORTS_RAW_DATA]);(0,xa.defineAspects)(Ey,[xa.Aspect.RETRYABLE,xa.Aspect.WRITE_OPERATION,xa.Aspect.SUPPORTS_RAW_DATA])});var zl=m(MO=>{"use strict";Object.defineProperty(MO,"__esModule",{value:!0});MO.formatSort=qfe;var vR=z();function Wl(t=1){let e=`${t}`.toLowerCase();if(Dfe(t))return t;switch(e){case"ascending":case"asc":case"1":return 1;case"descending":case"desc":case"-1":return-1;default:throw new vR.MongoInvalidArgumentError(`Invalid sort direction: ${JSON.stringify(t)}`)}}function Dfe(t){return typeof t=="object"&&t!=null&&"$meta"in t&&typeof t.$meta=="string"}function Mfe(t){if(Array.isArray(t)&&t.length===2)try{return Wl(t[1]),!0}catch{return!1}return!1}function Pfe(t){return Array.isArray(t)&&Array.isArray(t[0])}function Bfe(t){return t instanceof Map&&t.size>0}function Ife(t){return Array.isArray(t)}function Nfe(t){return new Map([[`${t[0]}`,Wl([t[1]])]])}function kfe(t){let e=t.map(([r,n])=>[`${r}`,Wl(n)]);return new Map(e)}function Rfe(t){let e=t.map(r=>[`${r}`,1]);return new Map(e)}function Ffe(t){let e=Object.entries(t).map(([r,n])=>[`${r}`,Wl(n)]);return new Map(e)}function $fe(t){let e=Array.from(t).map(([r,n])=>[`${r}`,Wl(n)]);return new Map(e)}function qfe(t,e){if(t!=null){if(typeof t=="string")return new Map([[t,Wl(e)]]);if(typeof t!="object")throw new vR.MongoInvalidArgumentError(`Invalid sort format: ${JSON.stringify(t)} Sort must be a valid object`);if(!Ife(t))return Bfe(t)?$fe(t):Object.keys(t).length?Ffe(t):void 0;if(t.length)return Pfe(t)?kfe(t):Mfe(t)?Nfe(t):Rfe(t)}}});var BO=m(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.ReplaceOneOperation=oi.UpdateManyOperation=oi.UpdateOneOperation=oi.UpdateOperation=void 0;oi.makeUpdateStatement=Ay;var jfe=ze(),ai=z(),Lfe=zl(),PO=X(),Ufe=At(),Ut=Xe(),Wu=class extends Ufe.CommandOperation{constructor(e,r,n){super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=jfe.MongoDBResponse,this.options=n,this.ns=e,this.statements=r}get commandName(){return"update"}get canRetryWrite(){return super.canRetryWrite===!1?!1:this.statements.every(e=>e.multi==null||e.multi===!1)}buildCommandDocument(e,r){let n=this.options,s={update:this.ns.collection,updates:this.statements,ordered:n.ordered??!0};return typeof n.bypassDocumentValidation=="boolean"&&(s.bypassDocumentValidation=n.bypassDocumentValidation),n.let&&(s.let=n.let),n.comment!==void 0&&(s.comment=n.comment),s}};oi.UpdateOperation=Wu;var by=class extends Wu{constructor(e,r,n,s){if(super(e,[Ay(r,n,{...s,multi:!1})],s),!(0,PO.hasAtomicOperators)(n,s))throw new ai.MongoInvalidArgumentError("Update document requires atomic operators")}handleOk(e){let r=super.handleOk(e);if(this.explain!=null)return r;if(r.code)throw new ai.MongoServerError(r);if(r.writeErrors)throw new ai.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:r.nModified??r.n,upsertedId:Array.isArray(r.upserted)&&r.upserted.length>0?r.upserted[0]._id:null,upsertedCount:Array.isArray(r.upserted)&&r.upserted.length?r.upserted.length:0,matchedCount:Array.isArray(r.upserted)&&r.upserted.length>0?0:r.n}}};oi.UpdateOneOperation=by;var Sy=class extends Wu{constructor(e,r,n,s){if(super(e,[Ay(r,n,{...s,multi:!0})],s),!(0,PO.hasAtomicOperators)(n,s))throw new ai.MongoInvalidArgumentError("Update document requires atomic operators")}handleOk(e){let r=super.handleOk(e);if(this.explain!=null)return r;if(r.code)throw new ai.MongoServerError(r);if(r.writeErrors)throw new ai.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:r.nModified??r.n,upsertedId:Array.isArray(r.upserted)&&r.upserted.length>0?r.upserted[0]._id:null,upsertedCount:Array.isArray(r.upserted)&&r.upserted.length?r.upserted.length:0,matchedCount:Array.isArray(r.upserted)&&r.upserted.length>0?0:r.n}}};oi.UpdateManyOperation=Sy;var wy=class extends Wu{constructor(e,r,n,s){if(super(e,[Ay(r,n,{...s,multi:!1})],s),(0,PO.hasAtomicOperators)(n))throw new ai.MongoInvalidArgumentError("Replacement document must not contain atomic operators")}handleOk(e){let r=super.handleOk(e);if(this.explain!=null)return r;if(r.code)throw new ai.MongoServerError(r);if(r.writeErrors)throw new ai.MongoServerError(r.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:r.nModified??r.n,upsertedId:Array.isArray(r.upserted)&&r.upserted.length>0?r.upserted[0]._id:null,upsertedCount:Array.isArray(r.upserted)&&r.upserted.length?r.upserted.length:0,matchedCount:Array.isArray(r.upserted)&&r.upserted.length>0?0:r.n}}};oi.ReplaceOneOperation=wy;function Ay(t,e,r){if(t==null||typeof t!="object")throw new ai.MongoInvalidArgumentError("Selector must be a valid JavaScript object");if(e==null||typeof e!="object")throw new ai.MongoInvalidArgumentError("Document must be a valid JavaScript object");let n={q:t,u:e};return typeof r.upsert=="boolean"&&(n.upsert=r.upsert),r.multi&&(n.multi=r.multi),r.hint&&(n.hint=r.hint),r.arrayFilters&&(n.arrayFilters=r.arrayFilters),r.collation&&(n.collation=r.collation),!r.multi&&r.sort!=null&&(n.sort=(0,Lfe.formatSort)(r.sort)),n}(0,Ut.defineAspects)(Wu,[Ut.Aspect.RETRYABLE,Ut.Aspect.WRITE_OPERATION,Ut.Aspect.SKIP_COLLATION,Ut.Aspect.SUPPORTS_RAW_DATA]);(0,Ut.defineAspects)(by,[Ut.Aspect.RETRYABLE,Ut.Aspect.WRITE_OPERATION,Ut.Aspect.EXPLAINABLE,Ut.Aspect.SKIP_COLLATION,Ut.Aspect.SUPPORTS_RAW_DATA]);(0,Ut.defineAspects)(Sy,[Ut.Aspect.WRITE_OPERATION,Ut.Aspect.EXPLAINABLE,Ut.Aspect.SKIP_COLLATION,Ut.Aspect.SUPPORTS_RAW_DATA]);(0,Ut.defineAspects)(wy,[Ut.Aspect.RETRYABLE,Ut.Aspect.WRITE_OPERATION,Ut.Aspect.SKIP_COLLATION,Ut.Aspect.SUPPORTS_RAW_DATA])});var Hl=m($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.BulkOperationBase=$e.FindOperators=$e.MongoBulkWriteError=$e.WriteError=$e.WriteConcernError=$e.BulkWriteResult=$e.Batch=$e.BatchType=void 0;$e.mergeBatchResults=NO;var DR=pe(),or=z(),Nd=OO(),Vfe=Er(),Wfe=DO(),zu=BO(),zfe=ir(),Li=X(),xR=hn();$e.BatchType=Object.freeze({INSERT:1,UPDATE:2,DELETE:3});var IO=class{constructor(e,r){this.originalZeroIndex=r,this.currentIndex=0,this.originalIndexes=[],this.batchType=e,this.operations=[],this.size=0,this.sizeBytes=0}};$e.Batch=IO;var Ta=class t{static generateIdMap(e){let r={};for(let n of e)r[n.index]=n._id;return r}constructor(e,r){this.result=e,this.insertedCount=this.result.nInserted??0,this.matchedCount=this.result.nMatched??0,this.modifiedCount=this.result.nModified??0,this.deletedCount=this.result.nRemoved??0,this.upsertedCount=this.result.upserted.length??0,this.upsertedIds=t.generateIdMap(this.result.upserted),this.insertedIds=t.generateIdMap(this.getSuccessfullyInsertedIds(e,r)),Object.defineProperty(this,"result",{value:this.result,enumerable:!1})}get ok(){return this.result.ok}getSuccessfullyInsertedIds(e,r){return e.writeErrors.length===0?e.insertedIds:r?e.insertedIds.slice(0,e.writeErrors[0].index):e.insertedIds.filter(({index:n})=>!e.writeErrors.some(s=>n===s.index))}getUpsertedIdAt(e){return this.result.upserted[e]}getRawResponse(){return this.result}hasWriteErrors(){return this.result.writeErrors.length>0}getWriteErrorCount(){return this.result.writeErrors.length}getWriteErrorAt(e){return e<this.result.writeErrors.length?this.result.writeErrors[e]:void 0}getWriteErrors(){return this.result.writeErrors}getWriteConcernError(){if(this.result.writeConcernErrors.length!==0){if(this.result.writeConcernErrors.length===1)return this.result.writeConcernErrors[0];{let e="";for(let r=0;r<this.result.writeConcernErrors.length;r++){let n=this.result.writeConcernErrors[r];e=e+n.errmsg,r===0&&(e=e+" and ")}return new Kl({errmsg:e,code:or.MONGODB_ERROR_CODES.WriteConcernTimeout})}}}toString(){return`BulkWriteResult(${DR.EJSON.stringify(this.result)})`}isOk(){return this.result.ok===1}};$e.BulkWriteResult=Ta;var Kl=class{constructor(e){this.serverError=e}get code(){return this.serverError.code}get errmsg(){return this.serverError.errmsg}get errInfo(){return this.serverError.errInfo}toJSON(){return this.serverError}toString(){return`WriteConcernError(${this.errmsg})`}};$e.WriteConcernError=Kl;var kd=class{constructor(e){this.err=e}get code(){return this.err.code}get index(){return this.err.index}get errmsg(){return this.err.errmsg}get errInfo(){return this.err.errInfo}getOperation(){return this.err.op}toJSON(){return{code:this.err.code,index:this.err.index,errmsg:this.err.errmsg,op:this.err.op}}toString(){return`WriteError(${JSON.stringify(this.toJSON())})`}};$e.WriteError=kd;function NO(t,e,r,n){if(r?n=r:n&&n.result&&(n=n.result),n==null)return;if(n.ok===0&&e.ok===1){e.ok=0;let i={index:0,code:n.code||0,errmsg:n.message,errInfo:n.errInfo,op:t.operations[0]};e.writeErrors.push(new kd(i));return}else if(n.ok===0&&e.ok===0)return;MR(t)&&n.n&&(e.nInserted=e.nInserted+n.n),FO(t)&&n.n&&(e.nRemoved=e.nRemoved+n.n);let s=0;if(Array.isArray(n.upserted)){s=n.upserted.length;for(let i=0;i<n.upserted.length;i++)e.upserted.push({index:n.upserted[i].index+t.originalZeroIndex,_id:n.upserted[i]._id})}else n.upserted&&(s=1,e.upserted.push({index:t.originalZeroIndex,_id:n.upserted}));if(RO(t)&&n.n){let i=n.nModified;e.nUpserted=e.nUpserted+s,e.nMatched=e.nMatched+(n.n-s),typeof i=="number"?e.nModified=e.nModified+i:e.nModified=0}if(Array.isArray(n.writeErrors))for(let i=0;i<n.writeErrors.length;i++){let o={index:t.originalIndexes[n.writeErrors[i].index],code:n.writeErrors[i].code,errmsg:n.writeErrors[i].errmsg,errInfo:n.writeErrors[i].errInfo,op:t.operations[n.writeErrors[i].index]};e.writeErrors.push(new kd(o))}n.writeConcernError&&e.writeConcernErrors.push(new Kl(n.writeConcernError))}async function TR(t,e){if(t.s.batches.length===0)return new Ta(t.s.bulkResult,t.isOrdered);for(let n of t.s.batches){let s=(0,Li.resolveOptions)(t,{...e,ordered:t.isOrdered});s.bypassDocumentValidation!==!0&&delete s.bypassDocumentValidation,t.s.bypassDocumentValidation===!0&&(s.bypassDocumentValidation=!0),t.s.checkKeys===!1&&(s.checkKeys=!1),t.retryWrites&&(RO(n)&&(t.retryWrites=t.retryWrites&&!n.operations.some(c=>c.multi)),FO(n)&&(t.retryWrites=t.retryWrites&&!n.operations.some(c=>c.limit===0)));let i=MR(n)?new Wfe.InsertOperation(t.s.namespace,n.operations,s):RO(n)?new zu.UpdateOperation(t.s.namespace,n.operations,s):FO(n)?new Nd.DeleteOperation(t.s.namespace,n.operations,s):null;if(i==null)throw new or.MongoRuntimeError(`Unknown batchType: ${n.batchType}`);let o=null,a;try{a=await(0,Vfe.executeOperation)(t.s.collection.client,i,s.timeoutContext)}catch(c){o=c}if(o!=null)if(o instanceof or.MongoWriteConcernError){NO(n,t.s.bulkResult,o,a);let c=new Ta(t.s.bulkResult,t.isOrdered);throw new Ku({message:o.result.writeConcernError.errmsg,code:o.result.writeConcernError.code},c)}else throw new Ku(o,new Ta(t.s.bulkResult,t.isOrdered));NO(n,t.s.bulkResult,o,a);let u=new Ta(t.s.bulkResult,t.isOrdered);t.handleWriteError(u)}t.s.batches.length=0;let r=new Ta(t.s.bulkResult,t.isOrdered);return t.handleWriteError(r),r}var Ku=class extends or.MongoServerError{constructor(e,r){super(e),this.writeErrors=[],e instanceof Kl?this.err=e:e instanceof Error||(this.message=e.message,this.code=e.code,this.writeErrors=e.writeErrors??[]),this.result=r,Object.assign(this,e)}get name(){return"MongoBulkWriteError"}get insertedCount(){return this.result.insertedCount}get matchedCount(){return this.result.matchedCount}get modifiedCount(){return this.result.modifiedCount}get deletedCount(){return this.result.deletedCount}get upsertedCount(){return this.result.upsertedCount}get insertedIds(){return this.result.insertedIds}get upsertedIds(){return this.result.upsertedIds}};$e.MongoBulkWriteError=Ku;var Oy=class{constructor(e){this.bulkOperation=e}update(e){let r=Id(this.bulkOperation);return this.bulkOperation.addToOperationsList($e.BatchType.UPDATE,(0,zu.makeUpdateStatement)(r.selector,e,{...r,multi:!0}))}updateOne(e){if(!(0,Li.hasAtomicOperators)(e,this.bulkOperation.bsonOptions))throw new or.MongoInvalidArgumentError("Update document requires atomic operators");let r=Id(this.bulkOperation);return this.bulkOperation.addToOperationsList($e.BatchType.UPDATE,(0,zu.makeUpdateStatement)(r.selector,e,{...r,multi:!1}))}replaceOne(e){if((0,Li.hasAtomicOperators)(e))throw new or.MongoInvalidArgumentError("Replacement document must not use atomic operators");let r=Id(this.bulkOperation);return this.bulkOperation.addToOperationsList($e.BatchType.UPDATE,(0,zu.makeUpdateStatement)(r.selector,e,{...r,multi:!1}))}deleteOne(){let e=Id(this.bulkOperation);return this.bulkOperation.addToOperationsList($e.BatchType.DELETE,(0,Nd.makeDeleteStatement)(e.selector,{...e,limit:1}))}delete(){let e=Id(this.bulkOperation);return this.bulkOperation.addToOperationsList($e.BatchType.DELETE,(0,Nd.makeDeleteStatement)(e.selector,{...e,limit:0}))}upsert(){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.upsert=!0,this}collation(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.collation=e,this}arrayFilters(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.arrayFilters=e,this}hint(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.hint=e,this}};$e.FindOperators=Oy;var kO=class{constructor(e,r,n){this.collection=e,this.retryWrites=e.db.options?.retryWrites,this.isOrdered=n;let s=(0,Li.getTopology)(e);r=r??{};let i=e.s.namespace,o=!1,a=void 0,u=s.lastHello(),c=!!(s.s.options&&s.s.options.autoEncrypter),l=u&&u.maxBsonObjectSize?u.maxBsonObjectSize:1024*1024*16,p=c?1024*1024*2:l,d=u&&u.maxWriteBatchSize?u.maxWriteBatchSize:1e3,h=(d-1).toString(10).length+2,f={ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]};this.s={bulkResult:f,currentBatch:void 0,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,currentInsertBatch:void 0,currentUpdateBatch:void 0,currentRemoveBatch:void 0,batches:[],writeConcern:xR.WriteConcern.fromOptions(r),maxBsonObjectSize:l,maxBatchSizeBytes:p,maxWriteBatchSize:d,maxKeySize:h,namespace:i,topology:s,options:r,bsonOptions:(0,DR.resolveBSONOptions)(r),currentOp:a,executed:o,collection:e,err:void 0,checkKeys:typeof r.checkKeys=="boolean"?r.checkKeys:!1},r.bypassDocumentValidation===!0&&(this.s.bypassDocumentValidation=!0)}insert(e){return(0,Li.maybeAddIdToDocuments)(this.collection,e,{forceServerObjectId:this.shouldForceServerObjectId()}),this.addToOperationsList($e.BatchType.INSERT,e)}find(e){if(!e)throw new or.MongoInvalidArgumentError("Bulk find operation must specify a selector");return this.s.currentOp={selector:e},new Oy(this)}raw(e){if(e==null||typeof e!="object")throw new or.MongoInvalidArgumentError("Operation must be an object with an operation key");if("insertOne"in e){let r=this.shouldForceServerObjectId(),n=e.insertOne&&e.insertOne.document==null?e.insertOne:e.insertOne.document;return(0,Li.maybeAddIdToDocuments)(this.collection,n,{forceServerObjectId:r}),this.addToOperationsList($e.BatchType.INSERT,n)}if("replaceOne"in e||"updateOne"in e||"updateMany"in e){if("replaceOne"in e){if("q"in e.replaceOne)throw new or.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,zu.makeUpdateStatement)(e.replaceOne.filter,e.replaceOne.replacement,{...e.replaceOne,multi:!1});if((0,Li.hasAtomicOperators)(r.u))throw new or.MongoInvalidArgumentError("Replacement document must not use atomic operators");return this.addToOperationsList($e.BatchType.UPDATE,r)}if("updateOne"in e){if("q"in e.updateOne)throw new or.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,zu.makeUpdateStatement)(e.updateOne.filter,e.updateOne.update,{...e.updateOne,multi:!1});if(!(0,Li.hasAtomicOperators)(r.u,this.bsonOptions))throw new or.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList($e.BatchType.UPDATE,r)}if("updateMany"in e){if("q"in e.updateMany)throw new or.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,zu.makeUpdateStatement)(e.updateMany.filter,e.updateMany.update,{...e.updateMany,multi:!0});if(!(0,Li.hasAtomicOperators)(r.u,this.bsonOptions))throw new or.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList($e.BatchType.UPDATE,r)}}if("deleteOne"in e){if("q"in e.deleteOne)throw new or.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList($e.BatchType.DELETE,(0,Nd.makeDeleteStatement)(e.deleteOne.filter,{...e.deleteOne,limit:1}))}if("deleteMany"in e){if("q"in e.deleteMany)throw new or.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList($e.BatchType.DELETE,(0,Nd.makeDeleteStatement)(e.deleteMany.filter,{...e.deleteMany,limit:0}))}throw new or.MongoInvalidArgumentError("bulkWrite only supports insertOne, updateOne, updateMany, deleteOne, deleteMany")}get length(){return this.s.currentIndex}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get batches(){let e=[...this.s.batches];return this.isOrdered?this.s.currentBatch&&e.push(this.s.currentBatch):(this.s.currentInsertBatch&&e.push(this.s.currentInsertBatch),this.s.currentUpdateBatch&&e.push(this.s.currentUpdateBatch),this.s.currentRemoveBatch&&e.push(this.s.currentRemoveBatch)),e}async execute(e={}){if(this.s.executed)throw new or.MongoBatchReExecutionError;let r=xR.WriteConcern.fromOptions(e);if(r&&(this.s.writeConcern=r),this.isOrdered?this.s.currentBatch&&this.s.batches.push(this.s.currentBatch):(this.s.currentInsertBatch&&this.s.batches.push(this.s.currentInsertBatch),this.s.currentUpdateBatch&&this.s.batches.push(this.s.currentUpdateBatch),this.s.currentRemoveBatch&&this.s.batches.push(this.s.currentRemoveBatch)),this.s.batches.length===0)throw new or.MongoInvalidArgumentError("Invalid BulkOperation, Batch cannot be empty");this.s.executed=!0;let n=(0,Li.resolveOptions)(this.collection,{...this.s.options,...e});return n.timeoutContext??=zfe.TimeoutContext.create({session:n.session,timeoutMS:n.timeoutMS,serverSelectionTimeoutMS:this.collection.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:this.collection.client.s.options.waitQueueTimeoutMS}),n.session==null?await this.collection.client.withSession({explicit:!1},async s=>await TR(this,{...n,session:s})):await TR(this,{...n})}handleWriteError(e){if(this.s.bulkResult.writeErrors.length>0){let n=this.s.bulkResult.writeErrors[0].errmsg?this.s.bulkResult.writeErrors[0].errmsg:"write operation failed";throw new Ku({message:n,code:this.s.bulkResult.writeErrors[0].code,writeErrors:this.s.bulkResult.writeErrors},e)}let r=e.getWriteConcernError();if(r)throw new Ku(r,e)}shouldForceServerObjectId(){return this.s.options.forceServerObjectId===!0||this.s.collection.db.options?.forceServerObjectId===!0}};$e.BulkOperationBase=kO;function MR(t){return t.batchType===$e.BatchType.INSERT}function RO(t){return t.batchType===$e.BatchType.UPDATE}function FO(t){return t.batchType===$e.BatchType.DELETE}function Id(t){let{currentOp:e}=t.s;return t.s.currentOp=void 0,e||(e={}),e}});var BR=m((JIe,PR)=>{"use strict";var Kfe=Hl().BulkWriteResult;PR.exports=Kfe});var Rd=m(($R,qR)=>{"use strict";var Ui=qR.exports=$R=Object.create(null),IR="disconnected",NR="connected",kR="connecting",RR="disconnecting",FR="uninitialized";Ui[0]=IR;Ui[1]=NR;Ui[2]=kR;Ui[3]=RR;Ui[99]=FR;Ui[IR]=0;Ui[NR]=1;Ui[kR]=2;Ui[RR]=3;Ui[FR]=99});var Da=m((YIe,jR)=>{"use strict";var Hfe=typeof process<"u"&&typeof process.nextTick=="function"?process.nextTick.bind(process):t=>setTimeout(t,0);jR.exports=function(e){return Hfe(e)}});var $O=m((QIe,UR)=>{"use strict";var Gfe=require("events").EventEmitter,Jfe=Rd(),LR=Da();function Ke(t,e,r){r===void 0&&(r={}),this.opts=r,this.name=t,this.collectionName=t,this.conn=e,this.queue=[],this.buffer=!e?._hasOpened,this.emitter=new Gfe,Jfe.connected===this.conn.readyState&&this.onOpen()}Ke.prototype.name;Ke.prototype.collectionName;Ke.prototype.conn;Ke.prototype.onOpen=function(){this.buffer=!1,LR(()=>this.doQueue())};Ke.prototype.onClose=function(){};Ke.prototype.addQueue=function(t,e){return this.queue.push([t,e]),this};Ke.prototype.removeQueue=function(t,e){let r=this.queue.findIndex(n=>n[0]===t&&n[1]===e);return r===-1?!1:(this.queue.splice(r,1),!0)};Ke.prototype.doQueue=function(){for(let e of this.queue)typeof e[0]=="function"?e[0].apply(this,e[1]):this[e[0]].apply(this,e[1]);this.queue=[];let t=this;return LR(function(){t.emitter.emit("queue")}),this};Ke.prototype.ensureIndex=function(){throw new Error("Collection#ensureIndex unimplemented by driver")};Ke.prototype.createIndex=function(){throw new Error("Collection#createIndex unimplemented by driver")};Ke.prototype.findAndModify=function(){throw new Error("Collection#findAndModify unimplemented by driver")};Ke.prototype.findOneAndUpdate=function(){throw new Error("Collection#findOneAndUpdate unimplemented by driver")};Ke.prototype.findOneAndDelete=function(){throw new Error("Collection#findOneAndDelete unimplemented by driver")};Ke.prototype.findOneAndReplace=function(){throw new Error("Collection#findOneAndReplace unimplemented by driver")};Ke.prototype.findOne=function(){throw new Error("Collection#findOne unimplemented by driver")};Ke.prototype.find=function(){throw new Error("Collection#find unimplemented by driver")};Ke.prototype.insert=function(){throw new Error("Collection#insert unimplemented by driver")};Ke.prototype.insertOne=function(){throw new Error("Collection#insertOne unimplemented by driver")};Ke.prototype.insertMany=function(){throw new Error("Collection#insertMany unimplemented by driver")};Ke.prototype.save=function(){throw new Error("Collection#save unimplemented by driver")};Ke.prototype.updateOne=function(){throw new Error("Collection#updateOne unimplemented by driver")};Ke.prototype.updateMany=function(){throw new Error("Collection#updateMany unimplemented by driver")};Ke.prototype.deleteOne=function(){throw new Error("Collection#deleteOne unimplemented by driver")};Ke.prototype.deleteMany=function(){throw new Error("Collection#deleteMany unimplemented by driver")};Ke.prototype.getIndexes=function(){throw new Error("Collection#getIndexes unimplemented by driver")};Ke.prototype.watch=function(){throw new Error("Collection#watch unimplemented by driver")};Ke.prototype._shouldBufferCommands=function(){let e=this.opts;return e.bufferCommands!=null?e.bufferCommands:e?.schemaUserProvidedOptions?.bufferCommands!=null?e.schemaUserProvidedOptions.bufferCommands:this.conn._shouldBufferCommands()};Ke.prototype._getBufferTimeoutMS=function(){let e=this.conn,r=this.opts;return r.bufferTimeoutMS!=null?r.bufferTimeoutMS:r?.schemaUserProvidedOptions?.bufferTimeoutMS!=null?r.schemaUserProvidedOptions.bufferTimeoutMS:e._getBufferTimeoutMS()};UR.exports=Ke});var be=m((XIe,VR)=>{"use strict";var Cy=class extends Error{};Object.defineProperty(Cy.prototype,"name",{value:"MongooseError"});VR.exports=Cy});var zR=m(xy=>{"use strict";Object.defineProperty(xy,"__esModule",{value:!0});xy.ListDatabasesOperation=void 0;var Yfe=ze(),WR=X(),Qfe=At(),qO=Xe(),vy=class extends Qfe.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=Yfe.MongoDBResponse,this.options=r??{},this.ns=new WR.MongoDBNamespace("admin","$cmd")}get commandName(){return"listDatabases"}buildCommandDocument(e,r){let n={listDatabases:1};return typeof this.options.nameOnly=="boolean"&&(n.nameOnly=this.options.nameOnly),this.options.filter&&(n.filter=this.options.filter),typeof this.options.authorizedDatabases=="boolean"&&(n.authorizedDatabases=this.options.authorizedDatabases),(0,WR.maxWireVersion)(e)>=9&&this.options.comment!==void 0&&(n.comment=this.options.comment),n}};xy.ListDatabasesOperation=vy;(0,qO.defineAspects)(vy,[qO.Aspect.READ_OPERATION,qO.Aspect.RETRYABLE])});var jO=m(Dy=>{"use strict";Object.defineProperty(Dy,"__esModule",{value:!0});Dy.RemoveUserOperation=void 0;var Xfe=ze(),Zfe=At(),KR=Xe(),Ty=class extends Zfe.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=Xfe.MongoDBResponse,this.options=n,this.username=r}get commandName(){return"dropUser"}buildCommandDocument(e){return{dropUser:this.username}}handleOk(e){return!0}};Dy.RemoveUserOperation=Ty;(0,KR.defineAspects)(Ty,[KR.Aspect.WRITE_OPERATION])});var Fd=m(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});Gl.RunCursorCommandOperation=Gl.RunCommandOperation=void 0;var HR=ze(),eme=Xe(),My=class extends eme.AbstractOperation{constructor(e,r,n){super(n),this.SERVER_COMMAND_RESPONSE_TYPE=HR.MongoDBResponse,this.command=r,this.options=n,this.ns=e.withCollection("$cmd")}get commandName(){return"runCommand"}buildCommand(e,r){return this.command}buildOptions(e){return{...this.options,session:this.session,timeoutContext:e,signal:this.options.signal,readPreference:this.options.readPreference}}};Gl.RunCommandOperation=My;var LO=class extends My{constructor(){super(...arguments),this.SERVER_COMMAND_RESPONSE_TYPE=HR.CursorResponse}handleOk(e){return e}};Gl.RunCursorCommandOperation=LO});var GR=m(Py=>{"use strict";Object.defineProperty(Py,"__esModule",{value:!0});Py.ValidateCollectionOperation=void 0;var tme=ze(),UO=z(),rme=At(),VO=class extends rme.CommandOperation{constructor(e,r,n){super(e.s.db,n),this.SERVER_COMMAND_RESPONSE_TYPE=tme.MongoDBResponse,this.options=n,this.collectionName=r}get commandName(){return"validate"}buildCommandDocument(e,r){return{validate:this.collectionName,...Object.fromEntries(Object.entries(this.options).filter(n=>n[0]!=="session"))}}handleOk(e){let r=super.handleOk(e);if(r.result!=null&&typeof r.result!="string")throw new UO.MongoUnexpectedServerResponseError("Error with validation data");if(r.result!=null&&r.result.match(/exception|corrupt/)!=null)throw new UO.MongoUnexpectedServerResponseError(`Invalid collection ${this.collectionName}`);if(r.valid!=null&&!r.valid)throw new UO.MongoUnexpectedServerResponseError(`Invalid collection ${this.collectionName}`);return e}};Py.ValidateCollectionOperation=VO});var zO=m(Iy=>{"use strict";Object.defineProperty(Iy,"__esModule",{value:!0});Iy.Admin=void 0;var nme=pe(),By=Er(),sme=zR(),ime=jO(),ome=Fd(),ame=GR(),ume=X(),WO=class{constructor(e){this.s={db:e}}async command(e,r){return await(0,By.executeOperation)(this.s.db.client,new ome.RunCommandOperation(new ume.MongoDBNamespace("admin"),e,{...(0,nme.resolveBSONOptions)(r),session:r?.session,readPreference:r?.readPreference,timeoutMS:r?.timeoutMS??this.s.db.timeoutMS}))}async buildInfo(e){return await this.command({buildinfo:1},e)}async serverInfo(e){return await this.command({buildinfo:1},e)}async serverStatus(e){return await this.command({serverStatus:1},e)}async ping(e){return await this.command({ping:1},e)}async removeUser(e,r){return await(0,By.executeOperation)(this.s.db.client,new ime.RemoveUserOperation(this.s.db,e,{dbName:"admin",...r}))}async validateCollection(e,r={}){return await(0,By.executeOperation)(this.s.db.client,new ame.ValidateCollectionOperation(this,e,r))}async listDatabases(e){return await(0,By.executeOperation)(this.s.db.client,new sme.ListDatabasesOperation(this.s.db,{timeoutMS:this.s.db.timeoutMS,...e}))}async replSetGetStatus(e){return await this.command({replSetGetStatus:1},e)}};Iy.Admin=WO});var HO=m(ky=>{"use strict";Object.defineProperty(ky,"__esModule",{value:!0});ky.OrderedBulkOperation=void 0;var cme=pe(),JR=z(),Ny=Hl(),KO=class extends Ny.BulkOperationBase{constructor(e,r){super(e,r,!0)}addToOperationsList(e,r){let n=cme.calculateObjectSize(r,{checkKeys:!1,ignoreUndefined:!1});if(n>=this.s.maxBsonObjectSize)throw new JR.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);this.s.currentBatch==null&&(this.s.currentBatch=new Ny.Batch(e,this.s.currentIndex));let s=this.s.maxKeySize;if((this.s.currentBatchSize+1>=this.s.maxWriteBatchSize||this.s.currentBatchSize>0&&this.s.currentBatchSizeBytes+s+n>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==e)&&(this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new Ny.Batch(e,this.s.currentIndex),this.s.currentBatchSize=0,this.s.currentBatchSizeBytes=0),e===Ny.BatchType.INSERT&&this.s.bulkResult.insertedIds.push({index:this.s.currentIndex,_id:r._id}),Array.isArray(r))throw new JR.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentBatch.operations.push(r),this.s.currentBatchSize+=1,this.s.currentBatchSizeBytes+=s+n,this.s.currentIndex+=1,this}};ky.OrderedBulkOperation=KO});var JO=m(Ry=>{"use strict";Object.defineProperty(Ry,"__esModule",{value:!0});Ry.UnorderedBulkOperation=void 0;var lme=pe(),YR=z(),Ao=Hl(),GO=class extends Ao.BulkOperationBase{constructor(e,r){super(e,r,!1)}handleWriteError(e){if(!this.s.batches.length)return super.handleWriteError(e)}addToOperationsList(e,r){let n=lme.calculateObjectSize(r,{checkKeys:!1,ignoreUndefined:!1});if(n>=this.s.maxBsonObjectSize)throw new YR.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);this.s.currentBatch=void 0,e===Ao.BatchType.INSERT?this.s.currentBatch=this.s.currentInsertBatch:e===Ao.BatchType.UPDATE?this.s.currentBatch=this.s.currentUpdateBatch:e===Ao.BatchType.DELETE&&(this.s.currentBatch=this.s.currentRemoveBatch);let s=this.s.maxKeySize;if(this.s.currentBatch==null&&(this.s.currentBatch=new Ao.Batch(e,this.s.currentIndex)),(this.s.currentBatch.size+1>=this.s.maxWriteBatchSize||this.s.currentBatch.size>0&&this.s.currentBatch.sizeBytes+s+n>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==e)&&(this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new Ao.Batch(e,this.s.currentIndex)),Array.isArray(r))throw new YR.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.operations.push(r),this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentIndex=this.s.currentIndex+1,e===Ao.BatchType.INSERT?(this.s.currentInsertBatch=this.s.currentBatch,this.s.bulkResult.insertedIds.push({index:this.s.bulkResult.insertedIds.length,_id:r._id})):e===Ao.BatchType.UPDATE?this.s.currentUpdateBatch=this.s.currentBatch:e===Ao.BatchType.DELETE&&(this.s.currentRemoveBatch=this.s.currentBatch),this.s.currentBatch.size+=1,this.s.currentBatch.sizeBytes+=s+n,this}};Ry.UnorderedBulkOperation=GO});var Ba=m(xe=>{"use strict";Object.defineProperty(xe,"__esModule",{value:!0});xe.MongoLogger=xe.MongoLoggableComponent=xe.SEVERITY_LEVEL_MAP=xe.DEFAULT_MAX_DOCUMENT_LENGTH=xe.SeverityLevel=void 0;xe.parseSeverityFromString=ZO;xe.createStdioLogger=Hu;xe.stringifyWithMaxLen=Pa;xe.defaultLogTransform=ZR;var QR=require("util"),XR=pe(),at=Lt(),Gu=X();xe.SeverityLevel=Object.freeze({EMERGENCY:"emergency",ALERT:"alert",CRITICAL:"critical",ERROR:"error",WARNING:"warn",NOTICE:"notice",INFORMATIONAL:"info",DEBUG:"debug",TRACE:"trace",OFF:"off"});xe.DEFAULT_MAX_DOCUMENT_LENGTH=1e3;var XO=class extends Map{constructor(e){let r=[];for(let[n,s]of e)r.push([s,n]);r.push(...e),super(r)}getNumericSeverityLevel(e){return this.get(e)}getSeverityLevelName(e){return this.get(e)}};xe.SEVERITY_LEVEL_MAP=new XO([[xe.SeverityLevel.OFF,-1/0],[xe.SeverityLevel.EMERGENCY,0],[xe.SeverityLevel.ALERT,1],[xe.SeverityLevel.CRITICAL,2],[xe.SeverityLevel.ERROR,3],[xe.SeverityLevel.WARNING,4],[xe.SeverityLevel.NOTICE,5],[xe.SeverityLevel.INFORMATIONAL,6],[xe.SeverityLevel.DEBUG,7],[xe.SeverityLevel.TRACE,8]]);xe.MongoLoggableComponent=Object.freeze({COMMAND:"command",TOPOLOGY:"topology",SERVER_SELECTION:"serverSelection",CONNECTION:"connection",CLIENT:"client"});function ZO(t){let e=Object.values(xe.SeverityLevel),r=t?.toLowerCase();return r!=null&&e.includes(r)?r:null}function Hu(t){return{write:(0,QR.promisify)((e,r)=>{let n=(0,QR.inspect)(e,{compact:!0,breakLength:1/0});t.write(`${n}
`,"utf-8",r)})}}function pme({MONGODB_LOG_PATH:t},{mongodbLogPath:e}){return typeof e=="string"&&/^stderr$/i.test(e)?{mongodbLogPath:Hu(process.stderr),mongodbLogPathIsStdErr:!0}:typeof e=="string"&&/^stdout$/i.test(e)?{mongodbLogPath:Hu(process.stdout),mongodbLogPathIsStdErr:!1}:typeof e=="object"&&typeof e?.write=="function"?{mongodbLogPath:e,mongodbLogPathIsStdErr:!1}:t&&/^stderr$/i.test(t)?{mongodbLogPath:Hu(process.stderr),mongodbLogPathIsStdErr:!0}:t&&/^stdout$/i.test(t)?{mongodbLogPath:Hu(process.stdout),mongodbLogPathIsStdErr:!1}:{mongodbLogPath:Hu(process.stderr),mongodbLogPathIsStdErr:!0}}function Jl(t,e,r){return ZO(t)??ZO(e)??r}function dme(t,e){let r=xe.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(t),n=xe.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(e);return r<n?-1:r>n?1:0}function Pa(t,e,r={}){let n="",s=0,i=function(a,u){if(!(s>=e)){if(a==="")return s+=1,u;if(s+=a.length+4,u==null)return u;switch(typeof u){case"string":s+=u.length+2;break;case"number":case"bigint":s+=String(u).length;break;case"boolean":s+=u?4:5;break;case"object":if((0,Gu.isUint8Array)(u))s+=22+u.byteLength+u.byteLength*.33+18|0;else if("_bsontype"in u){let c=u;switch(c._bsontype){case"Int32":s+=String(c.value).length;break;case"Double":s+=(c.value|0)===c.value?String(c.value).length+2:String(c.value).length;break;case"Long":s+=c.toString().length;break;case"ObjectId":s+=35;break;case"MaxKey":case"MinKey":s+=13;break;case"Binary":s+=22+u.position+u.position*.33+18|0;break;case"Timestamp":s+=19+String(c.t).length+5+String(c.i).length+2;break;case"Code":c.scope==null?s+=c.code.length+10+2:s+=c.code.length+10+11;break;case"BSONRegExp":s+=34+c.pattern.length+13+c.options.length+3;break}}}return u}};if(typeof t=="string")n=t;else if(typeof t=="function")n=t.name;else try{e!==0?n=XR.EJSON.stringify(t,i,0,r):n=XR.EJSON.stringify(t,r)}catch(o){n=`Extended JSON serialization failed with: ${o.message}`}return e!==0&&n.length>e&&n.charCodeAt(e-1)!==n.codePointAt(e-1)&&(e--,e===0)?"":e!==0&&n.length>e?`${n.slice(0,e)}...`:n}function hme(t){let e=t;return e.toLog!==void 0&&typeof e.toLog=="function"}function Fy(t,e,r=xe.DEFAULT_MAX_DOCUMENT_LENGTH){let{selector:n,operation:s,topologyDescription:i,message:o}=e;return t.selector=Pa(n,r),t.operation=s,t.topologyDescription=Pa(i,r),t.message=o,t}function YO(t,e){t.commandName=e.commandName,t.requestId=e.requestId,t.driverConnectionId=e.connectionId;let{host:r,port:n}=Gu.HostAddress.fromString(e.address).toHostPort();return t.serverHost=r,t.serverPort=n,e?.serviceId&&(t.serviceId=e.serviceId.toHexString()),t.databaseName=e.databaseName,t.serverConnectionId=e.serverConnectionId,t}function ss(t,e){let{host:r,port:n}=Gu.HostAddress.fromString(e.address).toHostPort();return t.serverHost=r,t.serverPort=n,t}function Ma(t,e){return t.topologyId=e.topologyId,t}function QO(t,e){let{awaited:r,connectionId:n}=e;t.awaited=r,t.driverConnectionId=e.connectionId;let{host:s,port:i}=Gu.HostAddress.fromString(n).toHostPort();return t.serverHost=s,t.serverPort=i,t}function ZR(t,e=xe.DEFAULT_MAX_DOCUMENT_LENGTH){let r=Object.create(null);switch(t.name){case at.SERVER_SELECTION_STARTED:return r=Fy(r,t,e),r;case at.SERVER_SELECTION_FAILED:return r=Fy(r,t,e),r.failure=t.failure?.message,r;case at.SERVER_SELECTION_SUCCEEDED:return r=Fy(r,t,e),r.serverHost=t.serverHost,r.serverPort=t.serverPort,r;case at.WAITING_FOR_SUITABLE_SERVER:return r=Fy(r,t,e),r.remainingTimeMS=t.remainingTimeMS,r;case at.COMMAND_STARTED:return r=YO(r,t),r.message="Command started",r.command=Pa(t.command,e,{relaxed:!0}),r.databaseName=t.databaseName,r;case at.COMMAND_SUCCEEDED:return r=YO(r,t),r.message="Command succeeded",r.durationMS=t.duration,r.reply=Pa(t.reply,e,{relaxed:!0}),r;case at.COMMAND_FAILED:return r=YO(r,t),r.message="Command failed",r.durationMS=t.duration,r.failure=t.failure?.message??"(redacted)",r;case at.CONNECTION_POOL_CREATED:if(r=ss(r,t),r.message="Connection pool created",t.options){let{maxIdleTimeMS:n,minPoolSize:s,maxPoolSize:i,maxConnecting:o,waitQueueTimeoutMS:a}=t.options;r={...r,maxIdleTimeMS:n,minPoolSize:s,maxPoolSize:i,maxConnecting:o,waitQueueTimeoutMS:a}}return r;case at.CONNECTION_POOL_READY:return r=ss(r,t),r.message="Connection pool ready",r;case at.CONNECTION_POOL_CLEARED:return r=ss(r,t),r.message="Connection pool cleared",t.serviceId?._bsontype==="ObjectId"&&(r.serviceId=t.serviceId?.toHexString()),r;case at.CONNECTION_POOL_CLOSED:return r=ss(r,t),r.message="Connection pool closed",r;case at.CONNECTION_CREATED:return r=ss(r,t),r.message="Connection created",r.driverConnectionId=t.connectionId,r;case at.CONNECTION_READY:return r=ss(r,t),r.message="Connection ready",r.driverConnectionId=t.connectionId,r.durationMS=t.durationMS,r;case at.CONNECTION_CLOSED:switch(r=ss(r,t),r.message="Connection closed",r.driverConnectionId=t.connectionId,t.reason){case"stale":r.reason="Connection became stale because the pool was cleared";break;case"idle":r.reason="Connection has been available but unused for longer than the configured max idle time";break;case"error":r.reason="An error occurred while using the connection",t.error&&(r.error=t.error);break;case"poolClosed":r.reason="Connection pool was closed";break;default:r.reason=`Unknown close reason: ${t.reason}`}return r;case at.CONNECTION_CHECK_OUT_STARTED:return r=ss(r,t),r.message="Connection checkout started",r;case at.CONNECTION_CHECK_OUT_FAILED:switch(r=ss(r,t),r.message="Connection checkout failed",t.reason){case"poolClosed":r.reason="Connection pool was closed";break;case"timeout":r.reason="Wait queue timeout elapsed without a connection becoming available";break;case"connectionError":r.reason="An error occurred while trying to establish a new connection",t.error&&(r.error=t.error);break;default:r.reason=`Unknown close reason: ${t.reason}`}return r.durationMS=t.durationMS,r;case at.CONNECTION_CHECKED_OUT:return r=ss(r,t),r.message="Connection checked out",r.driverConnectionId=t.connectionId,r.durationMS=t.durationMS,r;case at.CONNECTION_CHECKED_IN:return r=ss(r,t),r.message="Connection checked in",r.driverConnectionId=t.connectionId,r;case at.SERVER_OPENING:return r=Ma(r,t),r=ss(r,t),r.message="Starting server monitoring",r;case at.SERVER_CLOSED:return r=Ma(r,t),r=ss(r,t),r.message="Stopped server monitoring",r;case at.SERVER_HEARTBEAT_STARTED:return r=Ma(r,t),r=QO(r,t),r.message="Server heartbeat started",r;case at.SERVER_HEARTBEAT_SUCCEEDED:return r=Ma(r,t),r=QO(r,t),r.message="Server heartbeat succeeded",r.durationMS=t.duration,r.serverConnectionId=t.serverConnectionId,r.reply=Pa(t.reply,e,{relaxed:!0}),r;case at.SERVER_HEARTBEAT_FAILED:return r=Ma(r,t),r=QO(r,t),r.message="Server heartbeat failed",r.durationMS=t.duration,r.failure=t.failure?.message,r;case at.TOPOLOGY_OPENING:return r=Ma(r,t),r.message="Starting topology monitoring",r;case at.TOPOLOGY_CLOSED:return r=Ma(r,t),r.message="Stopped topology monitoring",r;case at.TOPOLOGY_DESCRIPTION_CHANGED:return r=Ma(r,t),r.message="Topology description changed",r.previousDescription=r.reply=Pa(t.previousDescription,e),r.newDescription=r.reply=Pa(t.newDescription,e),r;default:for(let[n,s]of Object.entries(t))s!=null&&(r[n]=s)}return r}var e4=class{constructor(e){this.pendingLog=null,this.error=this.log.bind(this,"error"),this.warn=this.log.bind(this,"warn"),this.info=this.log.bind(this,"info"),this.debug=this.log.bind(this,"debug"),this.trace=this.log.bind(this,"trace"),this.componentSeverities=e.componentSeverities,this.maxDocumentLength=e.maxDocumentLength,this.logDestination=e.logDestination,this.logDestinationIsStdErr=e.logDestinationIsStdErr,this.severities=this.createLoggingSeverities()}createLoggingSeverities(){let e=Object();for(let r of Object.values(xe.MongoLoggableComponent)){e[r]={};for(let n of Object.values(xe.SeverityLevel))e[r][n]=dme(n,this.componentSeverities[r])<=0}return e}turnOffSeverities(){for(let e of Object.values(xe.MongoLoggableComponent)){this.componentSeverities[e]=xe.SeverityLevel.OFF;for(let r of Object.values(xe.SeverityLevel))this.severities[e][r]=!1}}logWriteFailureHandler(e){if(this.logDestinationIsStdErr){this.turnOffSeverities(),this.clearPendingLog();return}this.logDestination=Hu(process.stderr),this.logDestinationIsStdErr=!0,this.clearPendingLog(),this.error(xe.MongoLoggableComponent.CLIENT,{toLog:function(){return{message:"User input for mongodbLogPath is now invalid. Logging is halted.",error:e.message}}}),this.turnOffSeverities(),this.clearPendingLog()}clearPendingLog(){this.pendingLog=null}willLog(e,r){return r===xe.SeverityLevel.OFF?!1:this.severities[e][r]}log(e,r,n){if(!this.willLog(r,e))return;let s={t:new Date,c:r,s:e};if(typeof n=="string"?s.message=n:typeof n=="object"&&(hme(n)?s={...s,...n.toLog()}:s={...s,...ZR(n,this.maxDocumentLength)}),(0,Gu.isPromiseLike)(this.pendingLog)){this.pendingLog=this.pendingLog.then(()=>this.logDestination.write(s)).then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this));return}try{let i=this.logDestination.write(s);(0,Gu.isPromiseLike)(i)&&(this.pendingLog=i.then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this)))}catch(i){this.logWriteFailureHandler(i)}}static resolveOptions(e,r){let n=pme(e,r),s={...e,...r,mongodbLogPath:n.mongodbLogPath,mongodbLogPathIsStdErr:n.mongodbLogPathIsStdErr},i=Jl(s.mongodbLogComponentSeverities?.default,s.MONGODB_LOG_ALL,xe.SeverityLevel.OFF);return{componentSeverities:{command:Jl(s.mongodbLogComponentSeverities?.command,s.MONGODB_LOG_COMMAND,i),topology:Jl(s.mongodbLogComponentSeverities?.topology,s.MONGODB_LOG_TOPOLOGY,i),serverSelection:Jl(s.mongodbLogComponentSeverities?.serverSelection,s.MONGODB_LOG_SERVER_SELECTION,i),connection:Jl(s.mongodbLogComponentSeverities?.connection,s.MONGODB_LOG_CONNECTION,i),client:Jl(s.mongodbLogComponentSeverities?.client,s.MONGODB_LOG_CLIENT,i),default:i},maxDocumentLength:s.mongodbLogMaxDocumentLength??(0,Gu.parseUnsignedInteger)(s.MONGODB_LOG_MAX_DOCUMENT_LENGTH)??1e3,logDestination:s.mongodbLogPath,logDestinationIsStdErr:s.mongodbLogPathIsStdErr}}};xe.MongoLogger=e4});var is=m(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.CancellationToken=Yl.TypedEventEmitter=void 0;var fme=require("events"),mme=Ba(),yme=X(),$y=class extends fme.EventEmitter{emitAndLog(e,...r){this.emit(e,...r),this.component&&this.mongoLogger?.debug(this.component,r[0])}emitAndLogHeartbeat(e,r,n,...s){if(this.emit(e,...s),this.component){let i={topologyId:r,serverConnectionId:n??null,...s[0]};this.mongoLogger?.debug(this.component,i)}}emitAndLogCommand(e,r,n,s,...i){if(e&&this.emit(r,...i),s){let o={databaseName:n,...i[0]};this.mongoLogger?.debug(mme.MongoLoggableComponent.COMMAND,o)}}};Yl.TypedEventEmitter=$y;var t4=class extends $y{constructor(...e){super(...e),this.on("error",yme.noop)}};Yl.CancellationToken=t4});var r4=m(Ly=>{"use strict";Object.defineProperty(Ly,"__esModule",{value:!0});Ly.GetMoreOperation=void 0;var gme=ze(),eF=z(),_me=X(),qy=Xe(),jy=class extends qy.AbstractOperation{constructor(e,r,n,s){super(s),this.SERVER_COMMAND_RESPONSE_TYPE=gme.CursorResponse,this.options=s,this.ns=e,this.cursorId=r,this.server=n}get commandName(){return"getMore"}buildCommand(e){if(this.cursorId==null||this.cursorId.isZero())throw new eF.MongoRuntimeError("Unable to iterate cursor with no id");let r=this.ns.collection;if(r==null)throw new eF.MongoRuntimeError("A collection name must be determined before getMore");let n={getMore:this.cursorId,collection:r};return typeof this.options.batchSize=="number"&&(n.batchSize=Math.abs(this.options.batchSize)),typeof this.options.maxAwaitTimeMS=="number"&&(n.maxTimeMS=this.options.maxAwaitTimeMS),this.options.comment!==void 0&&(0,_me.maxWireVersion)(e)>=9&&(n.comment=this.options.comment),n}buildOptions(e){return{returnFieldSelector:null,documentsReturnedIn:"nextBatch",timeoutContext:e,...this.options}}handleOk(e){return e}};Ly.GetMoreOperation=jy;(0,qy.defineAspects)(jy,[qy.Aspect.READ_OPERATION,qy.Aspect.MUST_SELECT_SAME_SERVER])});var tF=m(Vy=>{"use strict";Object.defineProperty(Vy,"__esModule",{value:!0});Vy.KillCursorsOperation=void 0;var Eme=ze(),bme=z(),n4=Xe(),Uy=class extends n4.AbstractOperation{constructor(e,r,n,s){super(s),this.SERVER_COMMAND_RESPONSE_TYPE=Eme.MongoDBResponse,this.ns=r,this.cursorId=e,this.server=n}get commandName(){return"killCursors"}buildCommand(e,r){let n=this.ns.collection;if(n==null)throw new bme.MongoRuntimeError("A collection name must be determined before killCursors");return{killCursors:n,cursors:[this.cursorId]}}buildOptions(e){return{session:this.session,timeoutContext:e}}handleError(e){}};Vy.KillCursorsOperation=Uy;(0,n4.defineAspects)(Uy,[n4.Aspect.MUST_SELECT_SAME_SERVER])});var i4=m(Wy=>{"use strict";Object.defineProperty(Wy,"__esModule",{value:!0});Wy.ConnectionPoolMetrics=void 0;var s4=class t{constructor(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}static{this.TXN="txn"}static{this.CURSOR="cursor"}static{this.OTHER="other"}markPinned(e){e===t.TXN?this.txnConnections+=1:e===t.CURSOR?this.cursorConnections+=1:this.otherConnections+=1}markUnpinned(e){e===t.TXN?this.txnConnections-=1:e===t.CURSOR?this.cursorConnections-=1:this.otherConnections-=1}info(e){return`Timed out while checking out a connection from connection pool: maxPoolSize: ${e}, connections in use by cursors: ${this.cursorConnections}, connections in use by transactions: ${this.txnConnections}, connections in use by other operations: ${this.otherConnections}`}reset(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}};Wy.ConnectionPoolMetrics=s4});var a4=m(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.Transaction=we.TxnState=void 0;we.isTransactionCommand=xme;var rF=z(),Sme=si(),wme=sr(),Ame=hn();we.TxnState=Object.freeze({NO_TRANSACTION:"NO_TRANSACTION",STARTING_TRANSACTION:"STARTING_TRANSACTION",TRANSACTION_IN_PROGRESS:"TRANSACTION_IN_PROGRESS",TRANSACTION_COMMITTED:"TRANSACTION_COMMITTED",TRANSACTION_COMMITTED_EMPTY:"TRANSACTION_COMMITTED_EMPTY",TRANSACTION_ABORTED:"TRANSACTION_ABORTED"});var Ome={[we.TxnState.NO_TRANSACTION]:[we.TxnState.NO_TRANSACTION,we.TxnState.STARTING_TRANSACTION],[we.TxnState.STARTING_TRANSACTION]:[we.TxnState.TRANSACTION_IN_PROGRESS,we.TxnState.TRANSACTION_COMMITTED,we.TxnState.TRANSACTION_COMMITTED_EMPTY,we.TxnState.TRANSACTION_ABORTED],[we.TxnState.TRANSACTION_IN_PROGRESS]:[we.TxnState.TRANSACTION_IN_PROGRESS,we.TxnState.TRANSACTION_COMMITTED,we.TxnState.TRANSACTION_ABORTED],[we.TxnState.TRANSACTION_COMMITTED]:[we.TxnState.TRANSACTION_COMMITTED,we.TxnState.TRANSACTION_COMMITTED_EMPTY,we.TxnState.STARTING_TRANSACTION,we.TxnState.NO_TRANSACTION],[we.TxnState.TRANSACTION_ABORTED]:[we.TxnState.STARTING_TRANSACTION,we.TxnState.NO_TRANSACTION],[we.TxnState.TRANSACTION_COMMITTED_EMPTY]:[we.TxnState.TRANSACTION_COMMITTED_EMPTY,we.TxnState.NO_TRANSACTION]},Cme=new Set([we.TxnState.STARTING_TRANSACTION,we.TxnState.TRANSACTION_IN_PROGRESS]),vme=new Set([we.TxnState.TRANSACTION_COMMITTED,we.TxnState.TRANSACTION_COMMITTED_EMPTY,we.TxnState.TRANSACTION_ABORTED]),o4=class{constructor(e){e=e??{},this.state=we.TxnState.NO_TRANSACTION,this.options={};let r=Ame.WriteConcern.fromOptions(e);if(r){if(r.w===0)throw new rF.MongoTransactionError("Transactions do not support unacknowledged write concern");this.options.writeConcern=r}e.readConcern&&(this.options.readConcern=Sme.ReadConcern.fromOptions(e)),e.readPreference&&(this.options.readPreference=wme.ReadPreference.fromOptions(e)),e.maxCommitTimeMS&&(this.options.maxTimeMS=e.maxCommitTimeMS),this._pinnedServer=void 0,this._recoveryToken=void 0}get server(){return this._pinnedServer}get recoveryToken(){return this._recoveryToken}get isPinned(){return!!this.server}get isStarting(){return this.state===we.TxnState.STARTING_TRANSACTION}get isActive(){return Cme.has(this.state)}get isCommitted(){return vme.has(this.state)}transition(e){let r=Ome[this.state];if(r&&r.includes(e)){this.state=e,(this.state===we.TxnState.NO_TRANSACTION||this.state===we.TxnState.STARTING_TRANSACTION||this.state===we.TxnState.TRANSACTION_ABORTED)&&this.unpinServer();return}throw new rF.MongoRuntimeError(`Attempted illegal state transition from [${this.state}] to [${e}]`)}pinServer(e){this.isActive&&(this._pinnedServer=e)}unpinServer(){this._pinnedServer=void 0}};we.Transaction=o4;function xme(t){return!!(t.commitTransaction||t.abortTransaction)}});var qd=m(ui=>{"use strict";Object.defineProperty(ui,"__esModule",{value:!0});ui.ServerSessionPool=ui.ServerSession=ui.ClientSession=void 0;ui.maybeClearPinnedConnection=Hy;ui.applySession=Pme;ui.updateSessionFromResponse=Bme;var Ky=pe(),Gy=i4(),iF=Lt(),he=z(),Tme=is(),zy=Er(),u4=Fd(),Dme=si(),c4=sr(),p4=ts(),l4=ir(),Ze=a4(),Mr=X(),Ql=hn(),d4=class t extends Tme.TypedEventEmitter{constructor(e,r,n,s){if(super(),this.timeoutContext=null,this.on("error",Mr.noop),e==null)throw new he.MongoRuntimeError("ClientSession requires a MongoClient");if(r==null||!(r instanceof Jy))throw new he.MongoRuntimeError("ClientSession requires a ServerSessionPool");if(n=n??{},this.snapshotEnabled=n.snapshot===!0,n.causalConsistency===!0&&this.snapshotEnabled)throw new he.MongoInvalidArgumentError('Properties "causalConsistency" and "snapshot" are mutually exclusive');this.client=e,this.sessionPool=r,this.hasEnded=!1,this.clientOptions=s,this.timeoutMS=n.defaultTimeoutMS??e.s.options?.timeoutMS,this.explicit=!!n.explicit,this._serverSession=this.explicit?this.sessionPool.acquire():null,this.txnNumberIncrement=0;let i=this.explicit&&n.snapshot!==!0;this.supports={causalConsistency:n.causalConsistency??i},this.clusterTime=n.initialClusterTime,this.operationTime=void 0,this.owner=n.owner,this.defaultTransactionOptions={...n.defaultTransactionOptions},this.transaction=new Ze.Transaction}get id(){return this.serverSession?.id}get serverSession(){let e=this._serverSession;if(e==null){if(this.explicit)throw new he.MongoRuntimeError("Unexpected null serverSession for an explicit session");if(this.hasEnded)throw new he.MongoRuntimeError("Unexpected null serverSession for an ended implicit session");e=this.sessionPool.acquire(),this._serverSession=e}return e}get loadBalanced(){return this.client.topology?.description.type===p4.TopologyType.LoadBalanced}pin(e){if(this.pinnedConnection)throw TypeError("Cannot pin multiple connections to the same session");this.pinnedConnection=e,e.emit(iF.PINNED,this.inTransaction()?Gy.ConnectionPoolMetrics.TXN:Gy.ConnectionPoolMetrics.CURSOR)}unpin(e){if(this.loadBalanced)return Hy(this,e);this.transaction.unpinServer()}get isPinned(){return this.loadBalanced?!!this.pinnedConnection:this.transaction.isPinned}async endSession(e){try{this.inTransaction()&&await this.abortTransaction({...e,throwTimeout:!0})}catch(r){if(r.name==="MongoOperationTimeoutError")throw r;(0,Mr.squashError)(r)}finally{if(!this.hasEnded){let r=this.serverSession;r!=null&&(this.sessionPool.release(r),this._serverSession=new $d(r)),this.hasEnded=!0,this.emit("ended",this)}Hy(this,{force:!0,...e})}}async[Symbol.asyncDispose](){await this.endSession({force:!0})}advanceOperationTime(e){if(this.operationTime==null){this.operationTime=e;return}e.greaterThan(this.operationTime)&&(this.operationTime=e)}advanceClusterTime(e){if(!e||typeof e!="object")throw new he.MongoInvalidArgumentError("input cluster time must be an object");if(!e.clusterTime||e.clusterTime._bsontype!=="Timestamp")throw new he.MongoInvalidArgumentError('input cluster time "clusterTime" property must be a valid BSON Timestamp');if(!e.signature||e.signature.hash?._bsontype!=="Binary"||typeof e.signature.keyId!="bigint"&&typeof e.signature.keyId!="number"&&e.signature.keyId?._bsontype!=="Long")throw new he.MongoInvalidArgumentError('input cluster time must have a valid "signature" property with BSON Binary hash and BSON Long keyId');(0,p4._advanceClusterTime)(this,e)}equals(e){return!(e instanceof t)||this.id==null||e.id==null?!1:Mr.ByteUtils.equals(this.id.id.buffer,e.id.id.buffer)}incrementTransactionNumber(){this.txnNumberIncrement+=1}inTransaction(){return this.transaction.isActive}startTransaction(e){if(this.snapshotEnabled)throw new he.MongoCompatibilityError("Transactions are not supported in snapshot sessions");if(this.inTransaction())throw new he.MongoTransactionError("Transaction already in progress");this.isPinned&&this.transaction.isCommitted&&this.unpin(),this.commitAttempted=!1,this.incrementTransactionNumber(),this.transaction=new Ze.Transaction({readConcern:e?.readConcern??this.defaultTransactionOptions.readConcern??this.clientOptions?.readConcern,writeConcern:e?.writeConcern??this.defaultTransactionOptions.writeConcern??this.clientOptions?.writeConcern,readPreference:e?.readPreference??this.defaultTransactionOptions.readPreference??this.clientOptions?.readPreference,maxCommitTimeMS:e?.maxCommitTimeMS??this.defaultTransactionOptions.maxCommitTimeMS}),this.transaction.transition(Ze.TxnState.STARTING_TRANSACTION)}async commitTransaction(e){if(this.transaction.state===Ze.TxnState.NO_TRANSACTION)throw new he.MongoTransactionError("No transaction started");if(this.transaction.state===Ze.TxnState.STARTING_TRANSACTION||this.transaction.state===Ze.TxnState.TRANSACTION_COMMITTED_EMPTY){this.transaction.transition(Ze.TxnState.TRANSACTION_COMMITTED_EMPTY);return}if(this.transaction.state===Ze.TxnState.TRANSACTION_ABORTED)throw new he.MongoTransactionError("Cannot call commitTransaction after calling abortTransaction");let r={commitTransaction:1},n=typeof e?.timeoutMS=="number"?e.timeoutMS:typeof this.timeoutMS=="number"?this.timeoutMS:null,s=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;if(s!=null)if(n==null&&this.timeoutContext==null)Ql.WriteConcern.apply(r,{wtimeoutMS:1e4,w:"majority",...s});else{let a=Object.keys(s);(a.length>2||!a.includes("wtimeoutMS")&&!a.includes("wTimeoutMS"))&&Ql.WriteConcern.apply(r,{...s,wtimeoutMS:void 0})}(this.transaction.state===Ze.TxnState.TRANSACTION_COMMITTED||this.commitAttempted)&&(n==null&&this.timeoutContext==null?Ql.WriteConcern.apply(r,{wtimeoutMS:1e4,...s,w:"majority"}):Ql.WriteConcern.apply(r,{w:"majority",...s,wtimeoutMS:void 0})),typeof this.transaction.options.maxTimeMS=="number"&&(r.maxTimeMS=this.transaction.options.maxTimeMS),this.transaction.recoveryToken&&(r.recoveryToken=this.transaction.recoveryToken);let i=new u4.RunCommandOperation(new Mr.MongoDBNamespace("admin"),r,{session:this,readPreference:c4.ReadPreference.primary,bypassPinningCheck:!0}),o=this.timeoutContext??(typeof n=="number"?l4.TimeoutContext.create({serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS,timeoutMS:n}):null);try{await(0,zy.executeOperation)(this.client,i,o),this.commitAttempted=void 0;return}catch(a){if(this.commitAttempted=!0,a instanceof he.MongoError&&(0,he.isRetryableWriteError)(a)){Ql.WriteConcern.apply(r,{wtimeoutMS:1e4,...s,w:"majority"}),this.unpin({force:!0});try{await(0,zy.executeOperation)(this.client,new u4.RunCommandOperation(new Mr.MongoDBNamespace("admin"),r,{session:this,readPreference:c4.ReadPreference.primary,bypassPinningCheck:!0}),o);return}catch(u){throw sF(u)&&u.addErrorLabel(he.MongoErrorLabel.UnknownTransactionCommitResult),nF(u)&&this.unpin({error:u}),u}}throw sF(a)&&a.addErrorLabel(he.MongoErrorLabel.UnknownTransactionCommitResult),nF(a)&&this.unpin({error:a}),a}finally{this.transaction.transition(Ze.TxnState.TRANSACTION_COMMITTED)}}async abortTransaction(e){if(this.transaction.state===Ze.TxnState.NO_TRANSACTION)throw new he.MongoTransactionError("No transaction started");if(this.transaction.state===Ze.TxnState.STARTING_TRANSACTION){this.transaction.transition(Ze.TxnState.TRANSACTION_ABORTED);return}if(this.transaction.state===Ze.TxnState.TRANSACTION_ABORTED)throw new he.MongoTransactionError("Cannot call abortTransaction twice");if(this.transaction.state===Ze.TxnState.TRANSACTION_COMMITTED||this.transaction.state===Ze.TxnState.TRANSACTION_COMMITTED_EMPTY)throw new he.MongoTransactionError("Cannot call abortTransaction after calling commitTransaction");let r={abortTransaction:1},n=typeof e?.timeoutMS=="number"?e.timeoutMS:this.timeoutContext?.csotEnabled()?this.timeoutContext.timeoutMS:typeof this.timeoutMS=="number"?this.timeoutMS:null,s=n!=null?l4.TimeoutContext.create({timeoutMS:n,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null,i=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;i!=null&&n==null&&Ql.WriteConcern.apply(r,{wtimeoutMS:1e4,w:"majority",...i}),this.transaction.recoveryToken&&(r.recoveryToken=this.transaction.recoveryToken);let o=new u4.RunCommandOperation(new Mr.MongoDBNamespace("admin"),r,{session:this,readPreference:c4.ReadPreference.primary,bypassPinningCheck:!0});try{await(0,zy.executeOperation)(this.client,o,s),this.unpin();return}catch(a){if(this.unpin(),a.name==="MongoRuntimeError"||e?.throwTimeout&&a.name==="MongoOperationTimeoutError")throw a;if(a instanceof he.MongoError&&(0,he.isRetryableWriteError)(a))try{await(0,zy.executeOperation)(this.client,o,s);return}catch(u){if(u.name==="MongoRuntimeError"||e?.throwTimeout&&u.name==="MongoOperationTimeoutError")throw u}}finally{this.transaction.transition(Ze.TxnState.TRANSACTION_ABORTED),this.loadBalanced&&Hy(this,{force:!1})}}toBSON(){throw new he.MongoRuntimeError("ClientSession cannot be serialized to BSON.")}async withTransaction(e,r){let s=r?.timeoutMS??this.timeoutMS??null;this.timeoutContext=s!=null?l4.TimeoutContext.create({timeoutMS:s,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null;let i=this.timeoutContext?.csotEnabled()?this.timeoutContext.start:(0,Mr.now)(),o=!1,a;try{for(;!o;){this.startTransaction(r);try{let u=e(this);if(!(0,Mr.isPromiseLike)(u))throw new he.MongoInvalidArgumentError("Function provided to `withTransaction` must return a Promise");if(a=await u,this.transaction.state===Ze.TxnState.NO_TRANSACTION||this.transaction.state===Ze.TxnState.TRANSACTION_COMMITTED||this.transaction.state===Ze.TxnState.TRANSACTION_ABORTED)return a}catch(u){if(!(u instanceof he.MongoError)||u instanceof he.MongoInvalidArgumentError)throw await this.abortTransaction(),u;if((this.transaction.state===Ze.TxnState.STARTING_TRANSACTION||this.transaction.state===Ze.TxnState.TRANSACTION_IN_PROGRESS)&&await this.abortTransaction(),u.hasErrorLabel(he.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||(0,Mr.now)()-i<12e4))continue;throw u}for(;!o;)try{await this.commitTransaction(),o=!0}catch(u){if(!Yy(u)&&u.hasErrorLabel(he.MongoErrorLabel.UnknownTransactionCommitResult)&&(this.timeoutContext!=null||(0,Mr.now)()-i<12e4))continue;if(u.hasErrorLabel(he.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||(0,Mr.now)()-i<12e4))break;throw u}}return a}finally{this.timeoutContext=null}}};ui.ClientSession=d4;var Mme=new Set(["CannotSatisfyWriteConcern","UnknownReplWriteConcern","UnsatisfiableWriteConcern"]);function nF(t){if(t instanceof he.MongoError){if((0,he.isRetryableWriteError)(t)||t instanceof he.MongoWriteConcernError||Yy(t)){if(oF(t))return!0}else if(t.hasErrorLabel(he.MongoErrorLabel.TransientTransactionError))return!0}return!1}function sF(t){let e=(0,he.isRetryableWriteError)(t);return e||=t instanceof he.MongoWriteConcernError,e||=Yy(t),e&&=oF(t),e}function oF(t){let e=t instanceof he.MongoServerError&&t.codeName&&Mme.has(t.codeName);return Yy(t)||!e&&t.code!==he.MONGODB_ERROR_CODES.UnsatisfiableWriteConcern&&t.code!==he.MONGODB_ERROR_CODES.UnknownReplWriteConcern}function Hy(t,e){let r=t.pinnedConnection,n=e?.error;if(t.inTransaction()&&n&&n instanceof he.MongoError&&n.hasErrorLabel(he.MongoErrorLabel.TransientTransactionError))return;let s=t.client.topology;if(r&&s!=null){let o=Array.from(s.s.servers.values())[0];(e?.error==null||e?.force)&&(o.pool.checkIn(r),t.pinnedConnection=void 0,r.emit(iF.UNPINNED,t.transaction.state!==Ze.TxnState.NO_TRANSACTION?Gy.ConnectionPoolMetrics.TXN:Gy.ConnectionPoolMetrics.CURSOR),e?.forceClear&&o.pool.clear({serviceId:r.serviceId}))}}function Yy(t){return t==null||!(t instanceof he.MongoServerError)?!1:t.code===he.MONGODB_ERROR_CODES.MaxTimeMSExpired||t.writeConcernError?.code===he.MONGODB_ERROR_CODES.MaxTimeMSExpired}var $d=class{constructor(e){if(e!=null){let r=Buffer.allocUnsafe(16);r.set(e.id.id.buffer),this.id={id:new Ky.Binary(r,e.id.id.sub_type)},this.lastUse=e.lastUse,this.txnNumber=e.txnNumber,this.isDirty=e.isDirty;return}this.id={id:new Ky.Binary((0,Mr.uuidV4)(),Ky.Binary.SUBTYPE_UUID)},this.lastUse=(0,Mr.now)(),this.txnNumber=0,this.isDirty=!1}hasTimedOut(e){return Math.round((0,Mr.calculateDurationInMs)(this.lastUse)%864e5%36e5/6e4)>e-1}};ui.ServerSession=$d;var Jy=class{constructor(e){if(e==null)throw new he.MongoRuntimeError("ServerSessionPool requires a MongoClient");this.client=e,this.sessions=new Mr.List}acquire(){let e=this.client.topology?.logicalSessionTimeoutMinutes??10,r=null;for(;this.sessions.length>0;){let n=this.sessions.shift();if(n!=null&&(this.client.topology?.loadBalanced||!n.hasTimedOut(e))){r=n;break}}return r==null&&(r=new $d),r}release(e){let r=this.client.topology?.logicalSessionTimeoutMinutes??10;if(this.client.topology?.loadBalanced&&!r&&this.sessions.unshift(e),!!r&&(this.sessions.prune(n=>n.hasTimedOut(r)),!e.hasTimedOut(r))){if(e.isDirty)return;this.sessions.unshift(e)}}};ui.ServerSessionPool=Jy;function Pme(t,e,r){if(t.hasEnded)return new he.MongoExpiredSessionError;let n=t.serverSession;if(n==null)return new he.MongoRuntimeError("Unable to acquire server session");if(r.writeConcern?.w===0)return t&&t.explicit?new he.MongoAPIError("Cannot have explicit session with unacknowledged writes"):void 0;n.lastUse=(0,Mr.now)(),e.lsid=n.id;let s=t.inTransaction()||(0,Ze.isTransactionCommand)(e);if((r.willRetryWrite||s)&&(n.txnNumber+=t.txnNumberIncrement,t.txnNumberIncrement=0,e.txnNumber=Ky.Long.fromNumber(n.txnNumber)),!s){t.transaction.state!==Ze.TxnState.NO_TRANSACTION&&t.transaction.transition(Ze.TxnState.NO_TRANSACTION),t.supports.causalConsistency&&t.operationTime&&(0,Mr.commandSupportsReadConcern)(e)?(e.readConcern=e.readConcern||{},Object.assign(e.readConcern,{afterClusterTime:t.operationTime})):t.snapshotEnabled&&(e.readConcern=e.readConcern||{level:Dme.ReadConcernLevel.snapshot},t.snapshotTime!=null&&Object.assign(e.readConcern,{atClusterTime:t.snapshotTime}));return}if(e.autocommit=!1,t.transaction.state===Ze.TxnState.STARTING_TRANSACTION){t.transaction.transition(Ze.TxnState.TRANSACTION_IN_PROGRESS),e.startTransaction=!0;let o=t.transaction.options.readConcern||t?.clientOptions?.readConcern;o&&(e.readConcern=o),t.supports.causalConsistency&&t.operationTime&&(e.readConcern=e.readConcern||{},Object.assign(e.readConcern,{afterClusterTime:t.operationTime}))}}function Bme(t,e){if(e.$clusterTime&&(0,p4._advanceClusterTime)(t,e.$clusterTime),e.operationTime&&t&&t.supports.causalConsistency&&t.advanceOperationTime(e.operationTime),e.recoveryToken&&t&&t.inTransaction()&&(t.transaction._recoveryToken=e.recoveryToken),t?.snapshotEnabled&&t.snapshotTime==null){let r=e.atClusterTime;r&&(t.snapshotTime=r)}}});var Xr=m(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.CursorTimeoutContext=Bt.AbstractCursor=Bt.CursorTimeoutMode=Bt.CURSOR_FLAGS=void 0;var Ime=require("stream"),Xl=pe(),ar=z(),Nme=is(),aF=Er(),kme=r4(),Rme=tF(),uF=si(),Qy=sr(),Fme=qd(),h4=ir(),os=X();Bt.CURSOR_FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];function cF(){this.client.s.activeCursors.delete(this)}Bt.CursorTimeoutMode=Object.freeze({ITERATION:"iteration",LIFETIME:"cursorLifetime"});var f4=class extends Nme.TypedEventEmitter{static{this.CLOSE="close"}constructor(e,r,n={}){if(super(),this.documents=null,this.hasEmittedClose=!1,this.on("error",os.noop),!e.s.isMongoClient)throw new ar.MongoRuntimeError("Cursor must be constructed with MongoClient");if(this.cursorClient=e,this.cursorNamespace=r,this.cursorId=null,this.initialized=!1,this.isClosed=!1,this.isKilled=!1,this.cursorOptions={readPreference:n.readPreference&&n.readPreference instanceof Qy.ReadPreference?n.readPreference:Qy.ReadPreference.primary,...(0,Xl.pluckBSONSerializeOptions)(n),timeoutMS:n?.timeoutContext?.csotEnabled()?n.timeoutContext.timeoutMS:n.timeoutMS,tailable:n.tailable,awaitData:n.awaitData},this.cursorOptions.timeoutMS!=null)if(n.timeoutMode==null)if(n.tailable){if(n.awaitData&&n.maxAwaitTimeMS!=null&&n.maxAwaitTimeMS>=this.cursorOptions.timeoutMS)throw new ar.MongoInvalidArgumentError("Cannot specify maxAwaitTimeMS >= timeoutMS for a tailable awaitData cursor");this.cursorOptions.timeoutMode=Bt.CursorTimeoutMode.ITERATION}else this.cursorOptions.timeoutMode=Bt.CursorTimeoutMode.LIFETIME;else{if(n.tailable&&n.timeoutMode===Bt.CursorTimeoutMode.LIFETIME)throw new ar.MongoInvalidArgumentError("Cannot set tailable cursor's timeoutMode to LIFETIME");this.cursorOptions.timeoutMode=n.timeoutMode}else if(n.timeoutMode!=null)throw new ar.MongoInvalidArgumentError("Cannot set timeoutMode without setting timeoutMS");this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null&&(this.cursorOptions.timeoutMode===Bt.CursorTimeoutMode.ITERATION&&!this.cursorOptions.tailable||this.cursorOptions.tailable&&!this.cursorOptions.awaitData);let s=uF.ReadConcern.fromOptions(n);s&&(this.cursorOptions.readConcern=s),typeof n.batchSize=="number"&&(this.cursorOptions.batchSize=n.batchSize),n.comment!==void 0&&(this.cursorOptions.comment=n.comment),typeof n.maxTimeMS=="number"&&(this.cursorOptions.maxTimeMS=n.maxTimeMS),typeof n.maxAwaitTimeMS=="number"&&(this.cursorOptions.maxAwaitTimeMS=n.maxAwaitTimeMS),this.cursorSession=n.session??null,this.deserializationOptions={...this.cursorOptions,validation:{utf8:n?.enableUtf8Validation!==!1}},this.timeoutContext=n.timeoutContext,this.signal=n.signal,this.abortListener=(0,os.addAbortListener)(this.signal,()=>{this.close().then(void 0,os.squashError)}),this.trackCursor()}get id(){return this.cursorId??void 0}get isDead(){return(this.cursorId?.isZero()??!1)||this.isClosed||this.isKilled}get client(){return this.cursorClient}get server(){return this.selectedServer}get namespace(){return this.cursorNamespace}get readPreference(){return this.cursorOptions.readPreference}get readConcern(){return this.cursorOptions.readConcern}get session(){return this.cursorSession}set session(e){this.cursorSession=e}get closed(){return this.isClosed&&(this.documents?.length??0)===0}get killed(){return this.isKilled}get loadBalanced(){return!!this.cursorClient.topology?.loadBalanced}async[Symbol.asyncDispose](){await this.close()}trackCursor(){this.cursorClient.s.activeCursors.add(this),this.listeners("close").includes(cF)||this.once("close",cF)}bufferedCount(){return this.documents?.length??0}readBufferedDocuments(e){let r=[],n=Math.min(e??this.documents?.length??0,this.documents?.length??0);for(let s=0;s<n;s++){let i=this.documents?.shift(this.deserializationOptions);i!=null&&r.push(i)}return r}async*[Symbol.asyncIterator](){if(this.signal?.throwIfAborted(),!this.closed)try{for(;;){if(this.isKilled||this.closed||this.cursorId!=null&&this.isDead&&(this.documents?.length??0)===0)return;let e=await this.next();if(e===null)return;yield e,this.signal?.throwIfAborted()}}finally{if(!this.isClosed)try{await this.close()}catch(e){(0,os.squashError)(e)}}}stream(){let e=new m4(this),r=(0,os.addAbortListener)(this.signal,function(){e.destroy(this.reason)});return e.once("end",()=>{r?.[os.kDispose]()}),e}async hasNext(){if(this.signal?.throwIfAborted(),this.cursorId===Xl.Long.ZERO)return!1;this.cursorOptions.timeoutMode===Bt.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{do{if((this.documents?.length??0)!==0)return!0;await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{this.cursorOptions.timeoutMode===Bt.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return!1}async next(){if(this.signal?.throwIfAborted(),this.cursorId===Xl.Long.ZERO)throw new ar.MongoCursorExhaustedError;this.cursorOptions.timeoutMode===Bt.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{do{let e=this.documents?.shift(this.deserializationOptions);if(e!=null)return this.transform!=null?await this.transformDocument(e):e;await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{this.cursorOptions.timeoutMode===Bt.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return null}async tryNext(){if(this.signal?.throwIfAborted(),this.cursorId===Xl.Long.ZERO)throw new ar.MongoCursorExhaustedError;this.cursorOptions.timeoutMode===Bt.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{let e=this.documents?.shift(this.deserializationOptions);if(e!=null)return this.transform!=null?await this.transformDocument(e):e;if(await this.fetchBatch(),e=this.documents?.shift(this.deserializationOptions),e!=null)return this.transform!=null?await this.transformDocument(e):e}finally{this.cursorOptions.timeoutMode===Bt.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return null}async forEach(e){if(this.signal?.throwIfAborted(),typeof e!="function")throw new ar.MongoInvalidArgumentError('Argument "iterator" must be a function');for await(let r of this)if(e(r)===!1)break}async close(e){await this.cleanup(e?.timeoutMS)}async toArray(){this.signal?.throwIfAborted();let e=[];for await(let r of this){e.push(r);let n=this.readBufferedDocuments();if(this.transform!=null)for(let s of n)e.push(await this.transformDocument(s));else for(let s of n)e.push(s)}return e}addCursorFlag(e,r){if(this.throwIfInitialized(),!Bt.CURSOR_FLAGS.includes(e))throw new ar.MongoInvalidArgumentError(`Flag ${e} is not one of ${Bt.CURSOR_FLAGS}`);if(typeof r!="boolean")throw new ar.MongoInvalidArgumentError(`Flag ${e} must be a boolean value`);return this.cursorOptions[e]=r,this}map(e){this.throwIfInitialized();let r=this.transform;return r?this.transform=n=>e(r(n)):this.transform=e,this}withReadPreference(e){if(this.throwIfInitialized(),e instanceof Qy.ReadPreference)this.cursorOptions.readPreference=e;else if(typeof e=="string")this.cursorOptions.readPreference=Qy.ReadPreference.fromString(e);else throw new ar.MongoInvalidArgumentError(`Invalid read preference: ${e}`);return this}withReadConcern(e){this.throwIfInitialized();let r=uF.ReadConcern.fromOptions({readConcern:e});return r&&(this.cursorOptions.readConcern=r),this}maxTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new ar.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.cursorOptions.maxTimeMS=e,this}batchSize(e){if(this.throwIfInitialized(),this.cursorOptions.tailable)throw new ar.MongoTailableCursorError("Tailable cursor does not support batchSize");if(typeof e!="number")throw new ar.MongoInvalidArgumentError('Operation "batchSize" requires an integer');return this.cursorOptions.batchSize=e,this}rewind(){if(this.timeoutContext&&this.timeoutContext.owner!==this)throw new ar.MongoAPIError("Cannot rewind cursor that does not own its timeout context.");this.initialized&&(this.cursorId=null,this.documents?.clear(),this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!1,this.isKilled=!1,this.initialized=!1,this.hasEmittedClose=!1,this.trackCursor(),this.cursorSession?.explicit===!1&&(this.cursorSession.hasEnded||this.cursorSession.endSession().then(void 0,os.squashError),this.cursorSession=null))}async getMore(){if(this.cursorId==null)throw new ar.MongoRuntimeError("Unexpected null cursor id. A cursor creating command should have set this");if(this.selectedServer==null)throw new ar.MongoRuntimeError("Unexpected null selectedServer. A cursor creating command should have set this");if(this.cursorSession==null)throw new ar.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let e={...this.cursorOptions,session:this.cursorSession,batchSize:this.cursorOptions.batchSize},r=new kme.GetMoreOperation(this.cursorNamespace,this.cursorId,this.selectedServer,e);return await(0,aF.executeOperation)(this.cursorClient,r,this.timeoutContext)}async cursorInit(){this.cursorOptions.timeoutMS!=null&&(this.timeoutContext??=new jd(h4.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:this.cursorOptions.timeoutMS}),this));try{this.cursorSession??=this.cursorClient.startSession({owner:this,explicit:!1});let e=await this._initialize(this.cursorSession);this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null;let r=e.response;this.selectedServer=e.server,this.cursorId=r.id,this.cursorNamespace=r.ns??this.namespace,this.documents=r,this.initialized=!0}catch(e){throw this.initialized=!0,await this.cleanup(void 0,e),e}this.isDead&&await this.cleanup()}async fetchBatch(){if(!this.isClosed){if(this.isDead){await this.cleanup();return}if(!(this.cursorId==null&&(await this.cursorInit(),(this.documents?.length??0)!==0||this.isDead))){try{let e=await this.getMore();this.cursorId=e.id,this.documents=e}catch(e){try{await this.cleanup(void 0,e)}catch(r){(0,os.squashError)(r)}throw e}this.isDead&&await this.cleanup()}}}async cleanup(e,r){this.abortListener?.[os.kDispose](),this.isClosed=!0;let n=()=>e!=null?(this.timeoutContext?.clear(),new jd(h4.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:e}),this)):this.timeoutContext?.refreshed();await(async o=>{try{await o()}finally{this.emitClose()}})(async()=>{let o=this.cursorSession;if(o)try{if(!this.isKilled&&this.cursorId&&!this.cursorId.isZero()&&this.cursorNamespace&&this.selectedServer&&!o.hasEnded){this.isKilled=!0;let a=this.cursorId;this.cursorId=Xl.Long.ZERO,await(0,aF.executeOperation)(this.cursorClient,new Rme.KillCursorsOperation(a,this.cursorNamespace,this.selectedServer,{session:o}),n())}}catch(a){(0,os.squashError)(a)}finally{o.owner===this&&await o.endSession({error:r}),o.inTransaction()||(0,Fme.maybeClearPinnedConnection)(o,{error:r})}})}emitClose(){try{!this.hasEmittedClose&&((this.documents?.length??0)===0||this.isClosed)&&this.emit("close")}finally{this.hasEmittedClose=!0}}async transformDocument(e){if(this.transform==null)return e;try{let r=this.transform(e);if(r===null){let n="Cursor returned a `null` document, but the cursor is not exhausted.  Mapping documents to `null` is not supported in the cursor transform.";throw new ar.MongoAPIError(n)}return r}catch(r){try{await this.close()}catch(n){(0,os.squashError)(n)}throw r}}throwIfInitialized(){if(this.initialized)throw new ar.MongoCursorInUseError}};Bt.AbstractCursor=f4;var m4=class extends Ime.Readable{constructor(e){super({objectMode:!0,autoDestroy:!1,highWaterMark:1}),this._readInProgress=!1,this._cursor=e}_read(e){this._readInProgress||(this._readInProgress=!0,this._readNext())}_destroy(e,r){this._cursor.close().then(()=>r(e),n=>r(n))}_readNext(){if(this._cursor.id===Xl.Long.ZERO){this.push(null);return}this._cursor.next().then(e=>{if(e==null)this.push(null);else if(this.destroyed)this._cursor.close().then(void 0,os.squashError);else{if(this.push(e))return this._readNext();this._readInProgress=!1}},e=>e.message.match(/server is closed/)?(this._cursor.close().then(void 0,os.squashError),this.push(null)):e.message.match(/operation was interrupted/)?this.push(null):this.destroy(e)).catch(e=>{this._readInProgress=!1,this.destroy(e)})}},jd=class t extends h4.TimeoutContext{constructor(e,r){super(),this.timeoutContext=e,this.owner=r}get serverSelectionTimeout(){return this.timeoutContext.serverSelectionTimeout}get connectionCheckoutTimeout(){return this.timeoutContext.connectionCheckoutTimeout}get clearServerSelectionTimeout(){return this.timeoutContext.clearServerSelectionTimeout}get timeoutForSocketWrite(){return this.timeoutContext.timeoutForSocketWrite}get timeoutForSocketRead(){return this.timeoutContext.timeoutForSocketRead}csotEnabled(){return this.timeoutContext.csotEnabled()}refresh(){if(typeof this.owner!="symbol")return this.timeoutContext.refresh()}clear(){if(typeof this.owner!="symbol")return this.timeoutContext.clear()}get maxTimeMS(){return this.timeoutContext.maxTimeMS}get timeoutMS(){return this.timeoutContext.csotEnabled()?this.timeoutContext.timeoutMS:null}refreshed(){return new t(this.timeoutContext.refreshed(),this.owner)}addMaxTimeMSToCommand(e,r){this.timeoutContext.addMaxTimeMSToCommand(e,r)}getSocketTimeoutMS(){return this.timeoutContext.getSocketTimeoutMS()}};Bt.CursorTimeoutContext=jd});var Zy=m(Xy=>{"use strict";Object.defineProperty(Xy,"__esModule",{value:!0});Xy.ExplainableCursor=void 0;var $me=Xr(),y4=class extends $me.AbstractCursor{resolveExplainTimeoutOptions(e,r){let n,s;return e==null&&r==null?(n=void 0,s=void 0):e!=null&&r==null?(n=typeof e!="object"||"verbosity"in e?e:void 0,s=typeof e=="object"&&"timeoutMS"in e?e:void 0):(n=e,s=r),{timeout:s,explain:n}}};Xy.ExplainableCursor=y4});var Ld=m(eg=>{"use strict";Object.defineProperty(eg,"__esModule",{value:!0});eg.AggregationCursor=void 0;var g4=z(),lF=Cd(),pF=Pd(),dF=Er(),qme=X(),hF=Xr(),jme=Zy(),_4=class t extends jme.ExplainableCursor{constructor(e,r,n=[],s={}){super(e,r,s),this.pipeline=n,this.aggregateOptions=s;let i=this.pipeline[this.pipeline.length-1];if(this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===hF.CursorTimeoutMode.ITERATION&&(i?.$merge!=null||i?.$out!=null))throw new g4.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode")}clone(){let e=(0,qme.mergeOptions)({},this.aggregateOptions);return delete e.session,new t(this.client,this.namespace,this.pipeline,{...e})}map(e){return super.map(e)}async _initialize(e){let r={...this.aggregateOptions,...this.cursorOptions,session:e,signal:this.signal};if(r.explain)try{(0,lF.validateExplainTimeoutOptions)(r,lF.Explain.fromOptions(r))}catch{throw new g4.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in aggregateOptions")}let n=new pF.AggregateOperation(this.namespace,this.pipeline,r),s=await(0,dF.executeOperation)(this.client,n,this.timeoutContext);return{server:n.server,session:e,response:s}}async explain(e,r){let{explain:n,timeout:s}=this.resolveExplainTimeoutOptions(e,r);return(await(0,dF.executeOperation)(this.client,new pF.AggregateOperation(this.namespace,this.pipeline,{...this.aggregateOptions,...this.cursorOptions,...s,explain:n??!0}))).shift(this.deserializationOptions)}addStage(e){if(this.throwIfInitialized(),this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===hF.CursorTimeoutMode.ITERATION&&(e.$out!=null||e.$merge!=null))throw new g4.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode");return this.pipeline.push(e),this}group(e){return this.addStage({$group:e})}limit(e){return this.addStage({$limit:e})}match(e){return this.addStage({$match:e})}out(e){return this.addStage({$out:e})}project(e){return this.addStage({$project:e})}lookup(e){return this.addStage({$lookup:e})}redact(e){return this.addStage({$redact:e})}skip(e){return this.addStage({$skip:e})}sort(e){return this.addStage({$sort:e})}unwind(e){return this.addStage({$unwind:e})}geoNear(e){return this.addStage({$geoNear:e})}};eg.AggregationCursor=_4});var E4=m(ng=>{"use strict";Object.defineProperty(ng,"__esModule",{value:!0});ng.CountOperation=void 0;var Lme=ze(),Ume=At(),tg=Xe(),rg=class extends Ume.CommandOperation{constructor(e,r,n){super({s:{namespace:e}},n),this.SERVER_COMMAND_RESPONSE_TYPE=Lme.MongoDBResponse,this.options=n,this.collectionName=e.collection,this.query=r}get commandName(){return"count"}buildCommandDocument(e,r){let n=this.options,s={count:this.collectionName,query:this.query};return typeof n.limit=="number"&&(s.limit=n.limit),typeof n.skip=="number"&&(s.skip=n.skip),n.hint!=null&&(s.hint=n.hint),typeof n.maxTimeMS=="number"&&(s.maxTimeMS=n.maxTimeMS),s}handleOk(e){return e.getNumber("n")??0}};ng.CountOperation=rg;(0,tg.defineAspects)(rg,[tg.Aspect.READ_OPERATION,tg.Aspect.RETRYABLE,tg.Aspect.SUPPORTS_RAW_DATA])});var fF=m(ig=>{"use strict";Object.defineProperty(ig,"__esModule",{value:!0});ig.FindOperation=void 0;var b4=ze(),Vme=z(),Wme=zl(),zme=X(),Kme=At(),Zl=Xe(),sg=class extends Kme.CommandOperation{constructor(e,r={},n={}){if(super(void 0,n),this.SERVER_COMMAND_RESPONSE_TYPE=b4.CursorResponse,this.options={...n},delete this.options.writeConcern,this.ns=e,typeof r!="object"||Array.isArray(r))throw new Vme.MongoInvalidArgumentError("Query filter must be a plain object or ObjectId");this.filter=r!=null&&r._bsontype==="ObjectId"?{_id:r}:r,this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?b4.ExplainedCursorResponse:b4.CursorResponse}get commandName(){return"find"}buildOptions(e){return{...this.options,...this.bsonOptions,documentsReturnedIn:"firstBatch",session:this.session,timeoutContext:e}}handleOk(e){return e}buildCommandDocument(){return Hme(this.ns,this.filter,this.options)}};ig.FindOperation=sg;function Hme(t,e,r){let n={find:t.collection,filter:e};if(r.sort&&(n.sort=(0,Wme.formatSort)(r.sort)),r.projection){let s=r.projection;s&&Array.isArray(s)&&(s=s.length?s.reduce((i,o)=>(i[o]=1,i),{}):{_id:1}),n.projection=s}return r.hint&&(n.hint=(0,zme.normalizeHintField)(r.hint)),typeof r.skip=="number"&&(n.skip=r.skip),typeof r.limit=="number"&&(r.limit<0?(n.limit=-r.limit,n.singleBatch=!0):n.limit=r.limit),typeof r.batchSize=="number"&&(r.batchSize<0?n.limit=-r.batchSize:r.batchSize===r.limit?n.batchSize=r.batchSize+1:n.batchSize=r.batchSize),typeof r.singleBatch=="boolean"&&(n.singleBatch=r.singleBatch),r.comment!==void 0&&(n.comment=r.comment),r.max&&(n.max=r.max),r.min&&(n.min=r.min),typeof r.returnKey=="boolean"&&(n.returnKey=r.returnKey),typeof r.showRecordId=="boolean"&&(n.showRecordId=r.showRecordId),typeof r.tailable=="boolean"&&(n.tailable=r.tailable),typeof r.oplogReplay=="boolean"&&(n.oplogReplay=r.oplogReplay),typeof r.timeout=="boolean"?n.noCursorTimeout=!r.timeout:typeof r.noCursorTimeout=="boolean"&&(n.noCursorTimeout=r.noCursorTimeout),typeof r.awaitData=="boolean"&&(n.awaitData=r.awaitData),typeof r.allowPartialResults=="boolean"&&(n.allowPartialResults=r.allowPartialResults),typeof r.allowDiskUse=="boolean"&&(n.allowDiskUse=r.allowDiskUse),r.let&&(n.let=r.let),n}(0,Zl.defineAspects)(sg,[Zl.Aspect.READ_OPERATION,Zl.Aspect.RETRYABLE,Zl.Aspect.EXPLAINABLE,Zl.Aspect.CURSOR_CREATING,Zl.Aspect.SUPPORTS_RAW_DATA])});var O4=m(ep=>{"use strict";Object.defineProperty(ep,"__esModule",{value:!0});ep.FindCursor=ep.FLAGS=void 0;var Gme=ze(),Bs=z(),mF=Cd(),Jme=E4(),S4=Er(),yF=fF(),w4=zl(),og=X(),Yme=Zy();ep.FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];var A4=class t extends Yme.ExplainableCursor{constructor(e,r,n={},s={}){super(e,r,s),this.numReturned=0,this.cursorFilter=n,this.findOptions=s,s.sort!=null&&(this.findOptions.sort=(0,w4.formatSort)(s.sort))}clone(){let e=(0,og.mergeOptions)({},this.findOptions);return delete e.session,new t(this.client,this.namespace,this.cursorFilter,{...e})}map(e){return super.map(e)}async _initialize(e){let r={...this.findOptions,...this.cursorOptions,session:e,signal:this.signal};if(r.explain)try{(0,mF.validateExplainTimeoutOptions)(r,mF.Explain.fromOptions(r))}catch{throw new Bs.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in findOptions")}let n=new yF.FindOperation(this.namespace,this.cursorFilter,r),s=await(0,S4.executeOperation)(this.client,n,this.timeoutContext);return this.numReturned=s.batchSize,{server:n.server,session:e,response:s}}async getMore(){let e=this.numReturned,r=this.findOptions.limit??1/0,n=r-e;if(e===r&&!this.id?.isZero()){try{await this.close()}catch(o){(0,og.squashError)(o)}return Gme.CursorResponse.emptyGetMore}let s=og.noop,{batchSize:i}=this.cursorOptions;i!=null&&i>n&&(this.cursorOptions.batchSize=n,s=()=>{this.cursorOptions.batchSize=i});try{let o=await super.getMore();return this.numReturned=this.numReturned+o.batchSize,o}finally{s?.()}}async count(e){if((0,og.emitWarningOnce)("cursor.count is deprecated and will be removed in the next major version, please use `collection.estimatedDocumentCount` or `collection.countDocuments` instead "),typeof e=="boolean")throw new Bs.MongoInvalidArgumentError("Invalid first parameter to count");return await(0,S4.executeOperation)(this.client,new Jme.CountOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...e}))}async explain(e,r){let{explain:n,timeout:s}=this.resolveExplainTimeoutOptions(e,r);return(await(0,S4.executeOperation)(this.client,new yF.FindOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...s,explain:n??!0}))).shift(this.deserializationOptions)}filter(e){return this.throwIfInitialized(),this.cursorFilter=e,this}hint(e){return this.throwIfInitialized(),this.findOptions.hint=e,this}min(e){return this.throwIfInitialized(),this.findOptions.min=e,this}max(e){return this.throwIfInitialized(),this.findOptions.max=e,this}returnKey(e){return this.throwIfInitialized(),this.findOptions.returnKey=e,this}showRecordId(e){return this.throwIfInitialized(),this.findOptions.showRecordId=e,this}addQueryModifier(e,r){if(this.throwIfInitialized(),e[0]!=="$")throw new Bs.MongoInvalidArgumentError(`${e} is not a valid query modifier`);switch(e.substr(1)){case"comment":this.findOptions.comment=r;break;case"explain":this.findOptions.explain=r;break;case"hint":this.findOptions.hint=r;break;case"max":this.findOptions.max=r;break;case"maxTimeMS":this.findOptions.maxTimeMS=r;break;case"min":this.findOptions.min=r;break;case"orderby":this.findOptions.sort=(0,w4.formatSort)(r);break;case"query":this.cursorFilter=r;break;case"returnKey":this.findOptions.returnKey=r;break;case"showDiskLoc":this.findOptions.showRecordId=r;break;default:throw new Bs.MongoInvalidArgumentError(`Invalid query modifier: ${e}`)}return this}comment(e){return this.throwIfInitialized(),this.findOptions.comment=e,this}maxAwaitTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new Bs.MongoInvalidArgumentError("Argument for maxAwaitTimeMS must be a number");return this.findOptions.maxAwaitTimeMS=e,this}maxTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new Bs.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.findOptions.maxTimeMS=e,this}project(e){return this.throwIfInitialized(),this.findOptions.projection=e,this}sort(e,r){if(this.throwIfInitialized(),this.findOptions.tailable)throw new Bs.MongoTailableCursorError("Tailable cursor does not support sorting");return this.findOptions.sort=(0,w4.formatSort)(e,r),this}allowDiskUse(e=!0){if(this.throwIfInitialized(),!this.findOptions.sort)throw new Bs.MongoInvalidArgumentError('Option "allowDiskUse" requires a sort specification');return e?(this.findOptions.allowDiskUse=!0,this):(this.findOptions.allowDiskUse=!1,this)}collation(e){return this.throwIfInitialized(),this.findOptions.collation=e,this}limit(e){if(this.throwIfInitialized(),this.findOptions.tailable)throw new Bs.MongoTailableCursorError("Tailable cursor does not support limit");if(typeof e!="number")throw new Bs.MongoInvalidArgumentError('Operation "limit" requires an integer');return this.findOptions.limit=e,this}skip(e){if(this.throwIfInitialized(),this.findOptions.tailable)throw new Bs.MongoTailableCursorError("Tailable cursor does not support skip");if(typeof e!="number")throw new Bs.MongoInvalidArgumentError('Operation "skip" requires an integer');return this.findOptions.skip=e,this}};ep.FindCursor=A4});var Ud=m(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.ListIndexesOperation=Ia.DropIndexOperation=Ia.CreateIndexesOperation=void 0;var C4=ze(),Qme=z(),v4=X(),x4=At(),ci=Xe(),Xme=new Set(["background","unique","name","partialFilterExpression","sparse","hidden","expireAfterSeconds","storageEngine","collation","version","weights","default_language","language_override","textIndexVersion","2dsphereIndexVersion","bits","min","max","bucketSize","wildcardProjection"]);function Zme(t){return typeof t=="number"||t==="2d"||t==="2dsphere"||t==="text"||t==="geoHaystack"}function e0e(t){return Array.isArray(t)&&t.length===2&&Zme(t[1])}function t0e(t){let e=new Map,r=!Array.isArray(t)||e0e(t)?[t]:t;for(let n of r)if(typeof n=="string")e.set(n,1);else if(Array.isArray(n))e.set(n[0],n[1]??1);else if(n instanceof Map)for(let[s,i]of n)e.set(s,i);else if((0,v4.isObject)(n))for(let[s,i]of Object.entries(n))e.set(s,i);return e}function r0e(t){let e=Object.entries(t).filter(([r])=>Xme.has(r));return Object.fromEntries(e.map(([r,n])=>r==="version"?["v",n]:[r,n]))}var ag=class t extends x4.CommandOperation{constructor(e,r,n,s){super(e,s),this.SERVER_COMMAND_RESPONSE_TYPE=C4.MongoDBResponse,this.options=s??{},this.options.collation=void 0,this.collectionName=r,this.indexes=n.map(i=>{let o=i.key instanceof Map?i.key:new Map(Object.entries(i.key)),a=i.name??Array.from(o).flat().join("_");return{...r0e(i),name:a,key:o}}),this.ns=e.s.namespace}static fromIndexDescriptionArray(e,r,n,s){return new t(e,r,n,s)}static fromIndexSpecification(e,r,n,s={}){let i=t0e(n),o={...s,key:i};return new t(e,r,[o],s)}get commandName(){return"createIndexes"}buildCommandDocument(e){let r=this.options,n=this.indexes,s=(0,v4.maxWireVersion)(e),i={createIndexes:this.collectionName,indexes:n};if(r.commitQuorum!=null){if(s<9)throw new Qme.MongoCompatibilityError("Option `commitQuorum` for `createIndexes` not supported on servers < 4.4");i.commitQuorum=r.commitQuorum}return i}handleOk(e){return this.indexes.map(n=>n.name||"")}};Ia.CreateIndexesOperation=ag;var ug=class extends x4.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=C4.MongoDBResponse,this.options=n??{},this.collection=e,this.indexName=r,this.ns=e.fullNamespace}get commandName(){return"dropIndexes"}buildCommandDocument(e){return{dropIndexes:this.collection.collectionName,index:this.indexName}}};Ia.DropIndexOperation=ug;var cg=class extends x4.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=C4.CursorResponse,this.options={...r},delete this.options.writeConcern,this.collectionNamespace=e.s.namespace}get commandName(){return"listIndexes"}buildCommandDocument(e){let r=(0,v4.maxWireVersion)(e),n=this.options.batchSize?{batchSize:this.options.batchSize}:{},s={listIndexes:this.collectionNamespace.collection,cursor:n};return r>=9&&this.options.comment!==void 0&&(s.comment=this.options.comment),s}handleOk(e){return e}};Ia.ListIndexesOperation=cg;(0,ci.defineAspects)(cg,[ci.Aspect.READ_OPERATION,ci.Aspect.RETRYABLE,ci.Aspect.CURSOR_CREATING,ci.Aspect.SUPPORTS_RAW_DATA]);(0,ci.defineAspects)(ag,[ci.Aspect.WRITE_OPERATION,ci.Aspect.SUPPORTS_RAW_DATA]);(0,ci.defineAspects)(ug,[ci.Aspect.WRITE_OPERATION,ci.Aspect.SUPPORTS_RAW_DATA])});var D4=m(lg=>{"use strict";Object.defineProperty(lg,"__esModule",{value:!0});lg.ListIndexesCursor=void 0;var n0e=Er(),s0e=Ud(),i0e=Xr(),T4=class t extends i0e.AbstractCursor{constructor(e,r){super(e.client,e.s.namespace,r),this.parent=e,this.options=r}clone(){return new t(this.parent,{...this.options,...this.cursorOptions})}async _initialize(e){let r=new s0e.ListIndexesOperation(this.parent,{...this.cursorOptions,...this.options,session:e}),n=await(0,n0e.executeOperation)(this.parent.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}};lg.ListIndexesCursor=T4});var gF=m(pg=>{"use strict";Object.defineProperty(pg,"__esModule",{value:!0});pg.ListSearchIndexesCursor=void 0;var o0e=Ld(),M4=class extends o0e.AggregationCursor{constructor({fullNamespace:e,client:r},n,s={}){let i=n==null?[{$listSearchIndexes:{}}]:[{$listSearchIndexes:{name:n}}];super(r,e,i,s)}};pg.ListSearchIndexesCursor=M4});var _F=m(hg=>{"use strict";Object.defineProperty(hg,"__esModule",{value:!0});hg.DistinctOperation=void 0;var a0e=ze(),u0e=At(),Vd=Xe(),dg=class extends u0e.CommandOperation{constructor(e,r,n,s){super(e,s),this.SERVER_COMMAND_RESPONSE_TYPE=a0e.MongoDBResponse,this.options=s??{},this.collection=e,this.key=r,this.query=n}get commandName(){return"distinct"}buildCommandDocument(e){let r={distinct:this.collection.collectionName,key:this.key,query:this.query};return this.options.comment!==void 0&&(r.comment=this.options.comment),this.options.hint!=null&&(r.hint=this.options.hint),r}handleOk(e){return this.explain?e.toObject(this.bsonOptions):e.toObject(this.bsonOptions).values}};hg.DistinctOperation=dg;(0,Vd.defineAspects)(dg,[Vd.Aspect.READ_OPERATION,Vd.Aspect.RETRYABLE,Vd.Aspect.EXPLAINABLE,Vd.Aspect.SUPPORTS_RAW_DATA])});var EF=m(mg=>{"use strict";Object.defineProperty(mg,"__esModule",{value:!0});mg.EstimatedDocumentCountOperation=void 0;var c0e=ze(),l0e=At(),Wd=Xe(),fg=class extends l0e.CommandOperation{constructor(e,r={}){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=c0e.MongoDBResponse,this.options=r,this.collectionName=e.collectionName}get commandName(){return"count"}buildCommandDocument(e,r){let n={count:this.collectionName};return typeof this.options.maxTimeMS=="number"&&(n.maxTimeMS=this.options.maxTimeMS),this.options.comment!==void 0&&(n.comment=this.options.comment),n}handleOk(e){return e.getNumber("n")??0}};mg.EstimatedDocumentCountOperation=fg;(0,Wd.defineAspects)(fg,[Wd.Aspect.READ_OPERATION,Wd.Aspect.RETRYABLE,Wd.Aspect.CURSOR_CREATING,Wd.Aspect.SUPPORTS_RAW_DATA])});var N4=m(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.FindOneAndUpdateOperation=as.FindOneAndReplaceOperation=as.FindOneAndDeleteOperation=as.FindAndModifyOperation=as.ReturnDocument=void 0;var p0e=ze(),Na=z(),d0e=sr(),h0e=zl(),yg=X(),f0e=At(),zd=Xe();as.ReturnDocument=Object.freeze({BEFORE:"before",AFTER:"after"});function bF(t,e){return t.new=e.returnDocument===as.ReturnDocument.AFTER,t.upsert=e.upsert===!0,e.bypassDocumentValidation===!0&&(t.bypassDocumentValidation=e.bypassDocumentValidation),t}var Ju=class extends f0e.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=p0e.MongoDBResponse,this.options=n,this.readPreference=d0e.ReadPreference.primary,this.collection=e,this.query=r}get commandName(){return"findAndModify"}buildCommandDocument(e,r){let n=this.options,s={findAndModify:this.collection.collectionName,query:this.query,remove:!1,new:!1,upsert:!1};n.includeResultMetadata??=!1;let i=(0,h0e.formatSort)(n.sort);if(i&&(s.sort=i),n.projection&&(s.fields=n.projection),n.maxTimeMS&&(s.maxTimeMS=n.maxTimeMS),n.writeConcern&&(s.writeConcern=n.writeConcern),n.let&&(s.let=n.let),n.comment!==void 0&&(s.comment=n.comment),(0,yg.decorateWithCollation)(s,n),n.hint){if(this.writeConcern?.w===0&&(0,yg.maxWireVersion)(e)<9)throw new Na.MongoCompatibilityError("hint for the findAndModify command is only supported on MongoDB 4.4+");s.hint=n.hint}return s}handleOk(e){let r=super.handleOk(e);return this.options.includeResultMetadata?r:r.value??null}};as.FindAndModifyOperation=Ju;var P4=class extends Ju{constructor(e,r,n){if(r==null||typeof r!="object")throw new Na.MongoInvalidArgumentError('Argument "filter" must be an object');super(e,r,n)}buildCommandDocument(e,r){let n=super.buildCommandDocument(e,r);return n.remove=!0,n}};as.FindOneAndDeleteOperation=P4;var B4=class extends Ju{constructor(e,r,n,s){if(r==null||typeof r!="object")throw new Na.MongoInvalidArgumentError('Argument "filter" must be an object');if(n==null||typeof n!="object")throw new Na.MongoInvalidArgumentError('Argument "replacement" must be an object');if((0,yg.hasAtomicOperators)(n))throw new Na.MongoInvalidArgumentError("Replacement document must not contain atomic operators");super(e,r,s),this.replacement=n}buildCommandDocument(e,r){let n=super.buildCommandDocument(e,r);return n.update=this.replacement,bF(n,this.options),n}};as.FindOneAndReplaceOperation=B4;var I4=class extends Ju{constructor(e,r,n,s){if(r==null||typeof r!="object")throw new Na.MongoInvalidArgumentError('Argument "filter" must be an object');if(n==null||typeof n!="object")throw new Na.MongoInvalidArgumentError('Argument "update" must be an object');if(!(0,yg.hasAtomicOperators)(n,s))throw new Na.MongoInvalidArgumentError("Update document requires atomic operators");super(e,r,s),this.update=n,this.options=s}buildCommandDocument(e,r){let n=super.buildCommandDocument(e,r);return n.update=this.update,bF(n,this.options),this.options.arrayFilters&&(n.arrayFilters=this.options.arrayFilters),n}};as.FindOneAndUpdateOperation=I4;(0,zd.defineAspects)(Ju,[zd.Aspect.WRITE_OPERATION,zd.Aspect.RETRYABLE,zd.Aspect.EXPLAINABLE,zd.Aspect.SUPPORTS_RAW_DATA])});var k4=m(_g=>{"use strict";Object.defineProperty(_g,"__esModule",{value:!0});_g.RenameOperation=void 0;var m0e=ze(),y0e=tp(),g0e=X(),_0e=At(),SF=Xe(),gg=class extends _0e.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=m0e.MongoDBResponse,this.collection=e,this.newName=r,this.options=n,this.ns=new g0e.MongoDBNamespace("admin","$cmd")}get commandName(){return"renameCollection"}buildCommandDocument(e,r){let n=this.collection.namespace,s=this.collection.s.namespace.withCollection(this.newName).toString(),i=typeof this.options.dropTarget=="boolean"?this.options.dropTarget:!1;return{renameCollection:n,to:s,dropTarget:i}}handleOk(e){return new y0e.Collection(this.collection.db,this.newName,this.collection.s.options)}};_g.RenameOperation=gg;(0,SF.defineAspects)(gg,[SF.Aspect.WRITE_OPERATION])});var wF=m(Eg=>{"use strict";Object.defineProperty(Eg,"__esModule",{value:!0});Eg.CreateSearchIndexesOperation=void 0;var E0e=ze(),b0e=Xe(),R4=class extends b0e.AbstractOperation{constructor(e,r){super(),this.SERVER_COMMAND_RESPONSE_TYPE=E0e.MongoDBResponse,this.collection=e,this.descriptions=r,this.ns=e.fullNamespace}get commandName(){return"createSearchIndexes"}buildCommand(e,r){return{createSearchIndexes:this.collection.fullNamespace.collection,indexes:this.descriptions}}handleOk(e){return super.handleOk(e).indexesCreated.map(r=>r.name)}buildOptions(e){return{session:this.session,timeoutContext:e}}};Eg.CreateSearchIndexesOperation=R4});var OF=m(bg=>{"use strict";Object.defineProperty(bg,"__esModule",{value:!0});bg.DropSearchIndexOperation=void 0;var S0e=ze(),AF=z(),w0e=Xe(),F4=class extends w0e.AbstractOperation{constructor(e,r){super(),this.SERVER_COMMAND_RESPONSE_TYPE=S0e.MongoDBResponse,this.collection=e,this.name=r,this.ns=e.fullNamespace}get commandName(){return"dropSearchIndex"}buildCommand(e,r){let s={dropSearchIndex:this.collection.fullNamespace.collection};return typeof this.name=="string"&&(s.name=this.name),s}handleOk(e){}buildOptions(e){return{session:this.session,timeoutContext:e}}handleError(e){if(!(e instanceof AF.MongoServerError&&e.code===AF.MONGODB_ERROR_CODES.NamespaceNotFound))throw e}};bg.DropSearchIndexOperation=F4});var CF=m(Sg=>{"use strict";Object.defineProperty(Sg,"__esModule",{value:!0});Sg.UpdateSearchIndexOperation=void 0;var A0e=ze(),O0e=Xe(),$4=class extends O0e.AbstractOperation{constructor(e,r,n){super(),this.SERVER_COMMAND_RESPONSE_TYPE=A0e.MongoDBResponse,this.collection=e,this.name=r,this.definition=n,this.ns=e.fullNamespace}get commandName(){return"updateSearchIndex"}buildCommand(e,r){return{updateSearchIndex:this.collection.fullNamespace.collection,name:this.name,definition:this.definition}}handleOk(e){}buildOptions(e){return{session:this.session,timeoutContext:e}}};Sg.UpdateSearchIndexOperation=$4});var tp=m(Ag=>{"use strict";Object.defineProperty(Ag,"__esModule",{value:!0});Ag.Collection=void 0;var C0e=pe(),v0e=HO(),x0e=JO(),T0e=np(),D0e=Ld(),M0e=O4(),P0e=D4(),B0e=gF(),rp=z(),I0e=E4(),vF=OO(),N0e=_F(),k0e=EF(),Vt=Er(),q4=N4(),wg=Ud(),R0e=DO(),F0e=k4(),$0e=wF(),q0e=OF(),j0e=CF(),j4=BO(),L0e=si(),L4=sr(),He=X(),xF=hn(),U4=class{constructor(e,r,n){this.db=e,this.s={db:e,options:n,namespace:new He.MongoDBCollectionNamespace(e.databaseName,r),pkFactory:e.options?.pkFactory??He.DEFAULT_PK_FACTORY,readPreference:L4.ReadPreference.fromOptions(n),bsonOptions:(0,C0e.resolveBSONOptions)(n,e),readConcern:L0e.ReadConcern.fromOptions(n),writeConcern:xF.WriteConcern.fromOptions(n)},this.client=e.client}get dbName(){return this.s.namespace.db}get collectionName(){return this.s.namespace.collection}get namespace(){return this.fullNamespace.toString()}get fullNamespace(){return this.s.namespace}get readConcern(){return this.s.readConcern==null?this.db.readConcern:this.s.readConcern}get readPreference(){return this.s.readPreference==null?this.db.readPreference:this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern==null?this.db.writeConcern:this.s.writeConcern}get hint(){return this.s.collectionHint}set hint(e){this.s.collectionHint=(0,He.normalizeHintField)(e)}get timeoutMS(){return this.s.options.timeoutMS}async insertOne(e,r){return await(0,Vt.executeOperation)(this.client,new R0e.InsertOneOperation(this,e,(0,He.resolveOptions)(this,r)))}async insertMany(e,r){if(!Array.isArray(e))throw new rp.MongoInvalidArgumentError('Argument "docs" must be an array of documents');r=(0,He.resolveOptions)(this,r??{});let n=xF.WriteConcern.fromOptions(r)?.w!==0;try{let s=await this.bulkWrite(e.map(i=>({insertOne:{document:i}})),r);return{acknowledged:n,insertedCount:s.insertedCount,insertedIds:s.insertedIds}}catch(s){throw s&&s.message==="Operation must be an object with an operation key"?new rp.MongoInvalidArgumentError("Collection.insertMany() cannot be called with an array that has null/undefined values"):s}}async bulkWrite(e,r){if(!Array.isArray(e))throw new rp.MongoInvalidArgumentError('Argument "operations" must be an array of documents');r=(0,He.resolveOptions)(this,r??{}),this.client.topology!=null||await(0,Vt.autoConnect)(this.client);let s=r.ordered===!1?this.initializeUnorderedBulkOp(r):this.initializeOrderedBulkOp(r);for(let i of e)s.raw(i);return await s.execute({...r})}async updateOne(e,r,n){return await(0,Vt.executeOperation)(this.client,new j4.UpdateOneOperation(this.s.namespace,e,r,(0,He.resolveOptions)(this,n)))}async replaceOne(e,r,n){return await(0,Vt.executeOperation)(this.client,new j4.ReplaceOneOperation(this.s.namespace,e,r,(0,He.resolveOptions)(this,n)))}async updateMany(e,r,n){return await(0,Vt.executeOperation)(this.client,new j4.UpdateManyOperation(this.s.namespace,e,r,(0,He.resolveOptions)(this,n)))}async deleteOne(e={},r={}){return await(0,Vt.executeOperation)(this.client,new vF.DeleteOneOperation(this.s.namespace,e,(0,He.resolveOptions)(this,r)))}async deleteMany(e={},r={}){return await(0,Vt.executeOperation)(this.client,new vF.DeleteManyOperation(this.s.namespace,e,(0,He.resolveOptions)(this,r)))}async rename(e,r){return await(0,Vt.executeOperation)(this.client,new F0e.RenameOperation(this,e,(0,He.resolveOptions)(void 0,{...r,readPreference:L4.ReadPreference.PRIMARY})))}async drop(e){return await this.db.dropCollection(this.collectionName,e)}async findOne(e={},r={}){let{...n}=r;n.singleBatch=!0;let s=this.find(e,n).limit(1),i=await s.next();return await s.close(),i}find(e={},r={}){return new M0e.FindCursor(this.client,this.s.namespace,e,(0,He.resolveOptions)(this,r))}async options(e){e=(0,He.resolveOptions)(this,e);let[r]=await this.db.listCollections({name:this.collectionName},{...e,nameOnly:!1}).toArray();if(r==null||r.options==null)throw new rp.MongoAPIError(`collection ${this.namespace} not found`);return r.options}async isCapped(e){let{capped:r}=await this.options(e);return!!r}async createIndex(e,r){return(await(0,Vt.executeOperation)(this.client,wg.CreateIndexesOperation.fromIndexSpecification(this,this.collectionName,e,(0,He.resolveOptions)(this,r))))[0]}async createIndexes(e,r){return await(0,Vt.executeOperation)(this.client,wg.CreateIndexesOperation.fromIndexDescriptionArray(this,this.collectionName,e,(0,He.resolveOptions)(this,{...r,maxTimeMS:void 0})))}async dropIndex(e,r){return await(0,Vt.executeOperation)(this.client,new wg.DropIndexOperation(this,e,{...(0,He.resolveOptions)(this,r),readPreference:L4.ReadPreference.primary}))}async dropIndexes(e){try{return await(0,Vt.executeOperation)(this.client,new wg.DropIndexOperation(this,"*",(0,He.resolveOptions)(this,e))),!0}catch(r){if(r instanceof rp.MongoOperationTimeoutError)throw r;return!1}}listIndexes(e){return new P0e.ListIndexesCursor(this,(0,He.resolveOptions)(this,e))}async indexExists(e,r){let n=Array.isArray(e)?e:[e],s=new Set(await this.listIndexes(r).map(({name:i})=>i).toArray());return n.every(i=>s.has(i))}async indexInformation(e){return await this.indexes({...e,full:e?.full??!1})}async estimatedDocumentCount(e){return await(0,Vt.executeOperation)(this.client,new k0e.EstimatedDocumentCountOperation(this,(0,He.resolveOptions)(this,e)))}async countDocuments(e={},r={}){let n=[];n.push({$match:e}),typeof r.skip=="number"&&n.push({$skip:r.skip}),typeof r.limit=="number"&&n.push({$limit:r.limit}),n.push({$group:{_id:1,n:{$sum:1}}});let s=this.aggregate(n,r),i=await s.next();return await s.close(),i?.n??0}async distinct(e,r={},n={}){return await(0,Vt.executeOperation)(this.client,new N0e.DistinctOperation(this,e,r,(0,He.resolveOptions)(this,n)))}async indexes(e){let r=await this.listIndexes(e).toArray();return e?.full??!0?r:Object.fromEntries(r.map(({name:i,key:o})=>[i,Object.entries(o)]))}async findOneAndDelete(e,r){return await(0,Vt.executeOperation)(this.client,new q4.FindOneAndDeleteOperation(this,e,(0,He.resolveOptions)(this,r)))}async findOneAndReplace(e,r,n){return await(0,Vt.executeOperation)(this.client,new q4.FindOneAndReplaceOperation(this,e,r,(0,He.resolveOptions)(this,n)))}async findOneAndUpdate(e,r,n){return await(0,Vt.executeOperation)(this.client,new q4.FindOneAndUpdateOperation(this,e,r,(0,He.resolveOptions)(this,n)))}aggregate(e=[],r){if(!Array.isArray(e))throw new rp.MongoInvalidArgumentError('Argument "pipeline" must be an array of aggregation stages');return new D0e.AggregationCursor(this.client,this.s.namespace,e,(0,He.resolveOptions)(this,r))}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new T0e.ChangeStream(this,e,(0,He.resolveOptions)(this,r))}initializeUnorderedBulkOp(e){return new x0e.UnorderedBulkOperation(this,(0,He.resolveOptions)(this,e))}initializeOrderedBulkOp(e){return new v0e.OrderedBulkOperation(this,(0,He.resolveOptions)(this,e))}async count(e={},r={}){return await(0,Vt.executeOperation)(this.client,new I0e.CountOperation(this.fullNamespace,e,(0,He.resolveOptions)(this,r)))}listSearchIndexes(e,r){r=typeof e=="object"?e:r??{};let n=e==null||typeof e=="object"?null:e;return new B0e.ListSearchIndexesCursor(this,n,r)}async createSearchIndex(e){let[r]=await this.createSearchIndexes([e]);return r}async createSearchIndexes(e){return await(0,Vt.executeOperation)(this.client,new $0e.CreateSearchIndexesOperation(this,e))}async dropSearchIndex(e){return await(0,Vt.executeOperation)(this.client,new q0e.DropSearchIndexOperation(this,e))}async updateSearchIndex(e,r){return await(0,Vt.executeOperation)(this.client,new j0e.UpdateSearchIndexOperation(this,e,r))}};Ag.Collection=U4});var z4=m(Og=>{"use strict";Object.defineProperty(Og,"__esModule",{value:!0});Og.ChangeStreamCursor=void 0;var V4=np(),TF=Lt(),U0e=Pd(),V0e=Er(),DF=X(),W0e=Xr(),W4=class t extends W0e.AbstractCursor{constructor(e,r,n=[],s={}){super(e,r,{...s,tailable:!0,awaitData:!0}),this.pipeline=n,this.changeStreamCursorOptions=s,this._resumeToken=null,this.startAtOperationTime=s.startAtOperationTime??null,s.startAfter?this.resumeToken=s.startAfter:s.resumeAfter&&(this.resumeToken=s.resumeAfter)}set resumeToken(e){this._resumeToken=e,this.emit(V4.ChangeStream.RESUME_TOKEN_CHANGED,e)}get resumeToken(){return this._resumeToken}get resumeOptions(){let e={...this.changeStreamCursorOptions};for(let r of["resumeAfter","startAfter","startAtOperationTime"])delete e[r];return this.resumeToken!=null?this.changeStreamCursorOptions.startAfter&&!this.hasReceived?e.startAfter=this.resumeToken:e.resumeAfter=this.resumeToken:this.startAtOperationTime!=null&&(e.startAtOperationTime=this.startAtOperationTime),e}cacheResumeToken(e){this.bufferedCount()===0&&this.postBatchResumeToken?this.resumeToken=this.postBatchResumeToken:this.resumeToken=e,this.hasReceived=!0}_processBatch(e){let{postBatchResumeToken:r}=e;r&&(this.postBatchResumeToken=r,e.batchSize===0&&(this.resumeToken=r))}clone(){return new t(this.client,this.namespace,this.pipeline,{...this.cursorOptions})}async _initialize(e){let r=new U0e.AggregateOperation(this.namespace,this.pipeline,{...this.cursorOptions,...this.changeStreamCursorOptions,session:e}),n=await(0,V0e.executeOperation)(e.client,r,this.timeoutContext),s=r.server;return this.maxWireVersion=(0,DF.maxWireVersion)(s),this.startAtOperationTime==null&&this.changeStreamCursorOptions.resumeAfter==null&&this.changeStreamCursorOptions.startAfter==null&&(this.startAtOperationTime=n.operationTime),this._processBatch(n),this.emit(TF.INIT,n),this.emit(TF.RESPONSE),{server:s,session:e,response:n}}async getMore(){let e=await super.getMore();return this.maxWireVersion=(0,DF.maxWireVersion)(this.server),this._processBatch(e),this.emit(V4.ChangeStream.MORE,e),this.emit(V4.ChangeStream.RESPONSE),e}};Og.ChangeStreamCursor=W4});var MF=m(vg=>{"use strict";Object.defineProperty(vg,"__esModule",{value:!0});vg.ListCollectionsOperation=void 0;var K4=ze(),z0e=X(),K0e=At(),Kd=Xe(),Cg=class extends K0e.CommandOperation{constructor(e,r,n){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=K4.CursorResponse,this.options={...n},delete this.options.writeConcern,this.db=e,this.filter=r,this.nameOnly=!!this.options.nameOnly,this.authorizedCollections=!!this.options.authorizedCollections,typeof this.options.batchSize=="number"&&(this.batchSize=this.options.batchSize),this.SERVER_COMMAND_RESPONSE_TYPE=this.explain?K4.ExplainedCursorResponse:K4.CursorResponse}get commandName(){return"listCollections"}buildCommandDocument(e){let r={listCollections:1,filter:this.filter,cursor:this.batchSize?{batchSize:this.batchSize}:{},nameOnly:this.nameOnly,authorizedCollections:this.authorizedCollections};return(0,z0e.maxWireVersion)(e)>=9&&this.options.comment!==void 0&&(r.comment=this.options.comment),r}handleOk(e){return e}};vg.ListCollectionsOperation=Cg;(0,Kd.defineAspects)(Cg,[Kd.Aspect.READ_OPERATION,Kd.Aspect.RETRYABLE,Kd.Aspect.CURSOR_CREATING,Kd.Aspect.SUPPORTS_RAW_DATA])});var G4=m(xg=>{"use strict";Object.defineProperty(xg,"__esModule",{value:!0});xg.ListCollectionsCursor=void 0;var H0e=Er(),G0e=MF(),J0e=Xr(),H4=class t extends J0e.AbstractCursor{constructor(e,r,n){super(e.client,e.s.namespace,n),this.parent=e,this.filter=r,this.options=n}clone(){return new t(this.parent,this.filter,{...this.options,...this.cursorOptions})}async _initialize(e){let r=new G0e.ListCollectionsOperation(this.parent,this.filter,{...this.cursorOptions,...this.options,session:e,signal:this.signal}),n=await(0,H0e.executeOperation)(this.parent.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}};xg.ListCollectionsCursor=H4});var BF=m(Tg=>{"use strict";Object.defineProperty(Tg,"__esModule",{value:!0});Tg.RunCommandCursor=void 0;var sp=z(),PF=Er(),Y0e=r4(),Q0e=Fd(),X0e=X(),Z0e=Xr(),J4=class extends Z0e.AbstractCursor{setComment(e){return this.getMoreOptions.comment=e,this}setMaxTimeMS(e){return this.getMoreOptions.maxAwaitTimeMS=e,this}setBatchSize(e){return this.getMoreOptions.batchSize=e,this}clone(){throw new sp.MongoAPIError("Clone not supported, create a new cursor with db.runCursorCommand")}withReadConcern(e){throw new sp.MongoAPIError("RunCommandCursor does not support readConcern it must be attached to the command being run")}addCursorFlag(e,r){throw new sp.MongoAPIError("RunCommandCursor does not support cursor flags, they must be attached to the command being run")}maxTimeMS(e){throw new sp.MongoAPIError("maxTimeMS must be configured on the command document directly, to configure getMore.maxTimeMS use cursor.setMaxTimeMS()")}batchSize(e){throw new sp.MongoAPIError("batchSize must be configured on the command document directly, to configure getMore.batchSize use cursor.setBatchSize()")}constructor(e,r,n={}){super(e.client,(0,X0e.ns)(e.namespace),n),this.getMoreOptions={},this.db=e,this.command=Object.freeze({...r})}async _initialize(e){let r=new Q0e.RunCursorCommandOperation(this.db.s.namespace,this.command,{...this.cursorOptions,session:e,readPreference:this.cursorOptions.readPreference}),n=await(0,PF.executeOperation)(this.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}async getMore(){if(!this.session)throw new sp.MongoRuntimeError("Unexpected null session. A cursor creating command should have set this");let e=new Y0e.GetMoreOperation(this.namespace,this.id,this.server,{...this.cursorOptions,session:this.session,...this.getMoreOptions});return await(0,PF.executeOperation)(this.client,e,this.timeoutContext)}};Tg.RunCommandCursor=J4});var kF=m(Hd=>{"use strict";Object.defineProperty(Hd,"__esModule",{value:!0});Hd.CreateCollectionOperation=void 0;Hd.createCollections=cye;var IF=Eo(),eye=ze(),tye=tp(),rye=z(),nye=ir(),sye=X(),iye=At(),Y4=Er(),oye=Ud(),NF=Xe(),aye=new Set(["w","wtimeout","timeoutMS","j","fsync","pkFactory","raw","readPreference","session","readConcern","writeConcern","raw","fieldsAsRaw","useBigInt64","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","serializeFunctions","ignoreUndefined","enableUtf8Validation"]),uye="Driver support of Queryable Encryption is incompatible with server. Upgrade server to use Queryable Encryption.",ip=class extends iye.CommandOperation{constructor(e,r,n={}){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=eye.MongoDBResponse,this.options=n,this.db=e,this.name=r}get commandName(){return"create"}buildCommandDocument(e,r){let n=([s,i])=>i!=null&&typeof i!="function"&&!aye.has(s);return{create:this.name,...Object.fromEntries(Object.entries(this.options).filter(n))}}handleOk(e){return new tye.Collection(this.db,this.name,this.options)}};Hd.CreateCollectionOperation=ip;async function cye(t,e,r){let n=nye.TimeoutContext.create({session:r.session,serverSelectionTimeoutMS:t.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:t.client.s.options.waitQueueTimeoutMS,timeoutMS:r.timeoutMS}),s=r.encryptedFields??t.client.s.options.autoEncryption?.encryptedFieldsMap?.[`${t.databaseName}.${e}`];if(s){class o extends ip{buildCommandDocument(l,p){if(!l.description.loadBalanced&&(0,sye.maxWireVersion)(l)<IF.MIN_SUPPORTED_QE_WIRE_VERSION)throw new rye.MongoCompatibilityError(`${uye} The minimum server version required is ${IF.MIN_SUPPORTED_QE_SERVER_VERSION}`);return super.buildCommandDocument(l,p)}}let a=s.escCollection??`enxcol_.${e}.esc`,u=s.ecocCollection??`enxcol_.${e}.ecoc`;for(let c of[a,u]){let l=new o(t,c,{clusteredIndex:{key:{_id:1},unique:!0},session:r.session});await(0,Y4.executeOperation)(t.client,l,n)}r.encryptedFields||(r={...r,encryptedFields:s})}let i=await(0,Y4.executeOperation)(t.client,new ip(t,e,r),n);if(s){let o=oye.CreateIndexesOperation.fromIndexSpecification(t,e,{__safeContent__:1},{session:r.session});await(0,Y4.executeOperation)(t.client,o,n)}return i}(0,NF.defineAspects)(ip,[NF.Aspect.WRITE_OPERATION])});var qF=m(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.DropDatabaseOperation=Yu.DropCollectionOperation=void 0;Yu.dropCollections=fye;var lye=ka(),FF=ze(),pye=Xr(),dye=z(),hye=ir(),$F=At(),RF=Er(),Dg=Xe(),op=class extends $F.CommandOperation{constructor(e,r,n={}){super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=FF.MongoDBResponse,this.options=n,this.name=r}get commandName(){return"drop"}buildCommandDocument(e,r){return{drop:this.name}}handleOk(e){return!0}handleError(e){if(!(e instanceof lye.MongoServerError)||Number(e.code)!==dye.MONGODB_ERROR_CODES.NamespaceNotFound)throw e;return!1}};Yu.DropCollectionOperation=op;async function fye(t,e,r){let n=hye.TimeoutContext.create({session:r.session,serverSelectionTimeoutMS:t.client.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:t.client.s.options.waitQueueTimeoutMS,timeoutMS:r.timeoutMS}),s=t.client.s.options.autoEncryption?.encryptedFieldsMap,i=r.encryptedFields??s?.[`${t.databaseName}.${e}`];if(!i&&s&&(i=(await t.listCollections({name:e},{nameOnly:!1,session:r.session,timeoutContext:new pye.CursorTimeoutContext(n,Symbol())}).toArray())?.[0]?.options?.encryptedFields),i){let o=i.escCollection||`enxcol_.${e}.esc`,a=i.ecocCollection||`enxcol_.${e}.ecoc`;for(let u of[o,a]){let c=new op(t,u,r);await(0,RF.executeOperation)(t.client,c,n)}}return await(0,RF.executeOperation)(t.client,new op(t,e,r),n)}var Mg=class extends $F.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=FF.MongoDBResponse,this.options=r}get commandName(){return"dropDatabase"}buildCommandDocument(e,r){return{dropDatabase:1}}handleOk(e){return!0}};Yu.DropDatabaseOperation=Mg;(0,Dg.defineAspects)(op,[Dg.Aspect.WRITE_OPERATION]);(0,Dg.defineAspects)(Mg,[Dg.Aspect.WRITE_OPERATION])});var LF=m(Pg=>{"use strict";Object.defineProperty(Pg,"__esModule",{value:!0});Pg.ProfilingLevelOperation=void 0;var mye=pe(),yye=ze(),jF=z(),gye=At(),Q4=class extends yye.MongoDBResponse{get was(){return this.get("was",mye.BSONType.int,!0)}},X4=class extends gye.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=Q4,this.options=r}get commandName(){return"profile"}buildCommandDocument(e){return{profile:-1}}handleOk(e){if(e.ok===1){let r=e.was;if(r===0)return"off";if(r===1)return"slow_only";if(r===2)return"all";throw new jF.MongoUnexpectedServerResponseError(`Illegal profiling level value ${r}`)}else throw new jF.MongoUnexpectedServerResponseError("Error with profile command")}};Pg.ProfilingLevelOperation=X4});var eC=m(Vi=>{"use strict";Object.defineProperty(Vi,"__esModule",{value:!0});Vi.SetProfilingLevelOperation=Vi.ProfilingLevel=void 0;var _ye=ze(),Eye=z(),bye=X(),Sye=At(),wye=new Set(["off","slow_only","all"]);Vi.ProfilingLevel=Object.freeze({off:"off",slowOnly:"slow_only",all:"all"});var Z4=class extends Sye.CommandOperation{constructor(e,r,n){switch(super(e,n),this.SERVER_COMMAND_RESPONSE_TYPE=_ye.MongoDBResponse,this.options=n,r){case Vi.ProfilingLevel.off:this.profile=0;break;case Vi.ProfilingLevel.slowOnly:this.profile=1;break;case Vi.ProfilingLevel.all:this.profile=2;break;default:this.profile=0;break}this.level=r}get commandName(){return"profile"}buildCommandDocument(e){let r=this.level;if(!wye.has(r))throw new Eye.MongoInvalidArgumentError(`Profiling level must be one of "${(0,bye.enumToString)(Vi.ProfilingLevel)}"`);return{profile:this.profile}}handleOk(e){return this.level}};Vi.SetProfilingLevelOperation=Z4});var VF=m(Ig=>{"use strict";Object.defineProperty(Ig,"__esModule",{value:!0});Ig.DbStatsOperation=void 0;var Aye=ze(),Oye=At(),UF=Xe(),Bg=class extends Oye.CommandOperation{constructor(e,r){super(e,r),this.SERVER_COMMAND_RESPONSE_TYPE=Aye.MongoDBResponse,this.options=r}get commandName(){return"dbStats"}buildCommandDocument(e){let r={dbStats:!0};return this.options.scale!=null&&(r.scale=this.options.scale),r}};Ig.DbStatsOperation=Bg;(0,UF.defineAspects)(Bg,[UF.Aspect.READ_OPERATION])});var kg=m(Ng=>{"use strict";Object.defineProperty(Ng,"__esModule",{value:!0});Ng.Db=void 0;var Cye=zO(),WF=pe(),vye=np(),zF=tp(),ap=Lt(),xye=Ld(),Tye=G4(),Dye=BF(),KF=z(),Mye=kF(),HF=qF(),Ra=Er(),Pye=Ud(),Bye=LF(),Iye=jO(),Nye=k4(),kye=Fd(),Rye=eC(),Fye=VF(),$ye=si(),GF=sr(),br=X(),qye=hn(),jye=["writeConcern","readPreference","readPreferenceTags","native_parser","forceServerObjectId","pkFactory","serializeFunctions","raw","authSource","ignoreUndefined","readConcern","retryMiliSeconds","numberOfRetries","useBigInt64","promoteBuffers","promoteLongs","bsonRegExp","enableUtf8Validation","promoteValues","compression","retryWrites","timeoutMS"],tC=class{static{this.SYSTEM_NAMESPACE_COLLECTION=ap.SYSTEM_NAMESPACE_COLLECTION}static{this.SYSTEM_INDEX_COLLECTION=ap.SYSTEM_INDEX_COLLECTION}static{this.SYSTEM_PROFILE_COLLECTION=ap.SYSTEM_PROFILE_COLLECTION}static{this.SYSTEM_USER_COLLECTION=ap.SYSTEM_USER_COLLECTION}static{this.SYSTEM_COMMAND_COLLECTION=ap.SYSTEM_COMMAND_COLLECTION}static{this.SYSTEM_JS_COLLECTION=ap.SYSTEM_JS_COLLECTION}constructor(e,r,n){if(n=n??{},n=(0,br.filterOptions)(n,jye),typeof r=="string"&&r.includes("."))throw new KF.MongoInvalidArgumentError("Database names cannot contain the character '.'");this.s={options:n,readPreference:GF.ReadPreference.fromOptions(n),bsonOptions:(0,WF.resolveBSONOptions)(n,e),pkFactory:n?.pkFactory??br.DEFAULT_PK_FACTORY,readConcern:$ye.ReadConcern.fromOptions(n),writeConcern:qye.WriteConcern.fromOptions(n),namespace:new br.MongoDBNamespace(r)},this.client=e}get databaseName(){return this.s.namespace.db}get options(){return this.s.options}get secondaryOk(){return this.s.readPreference?.preference!=="primary"||!1}get readConcern(){return this.s.readConcern}get readPreference(){return this.s.readPreference==null?this.client.readPreference:this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get namespace(){return this.s.namespace.toString()}get timeoutMS(){return this.s.options?.timeoutMS}async createCollection(e,r){return r=(0,br.resolveOptions)(this,r),await(0,Mye.createCollections)(this,e,r)}async command(e,r){return await(0,Ra.executeOperation)(this.client,new kye.RunCommandOperation(this.s.namespace,e,(0,br.resolveOptions)(void 0,{...(0,WF.resolveBSONOptions)(r),timeoutMS:r?.timeoutMS??this.timeoutMS,session:r?.session,readPreference:r?.readPreference,signal:r?.signal})))}aggregate(e=[],r){return new xye.AggregationCursor(this.client,this.s.namespace,e,(0,br.resolveOptions)(this,r))}admin(){return new Cye.Admin(this)}collection(e,r={}){if(typeof r=="function")throw new KF.MongoInvalidArgumentError("The callback form of this helper has been removed.");return new zF.Collection(this,e,(0,br.resolveOptions)(this,r))}async stats(e){return await(0,Ra.executeOperation)(this.client,new Fye.DbStatsOperation(this,(0,br.resolveOptions)(this,e)))}listCollections(e={},r={}){return new Tye.ListCollectionsCursor(this,e,(0,br.resolveOptions)(this,r))}async renameCollection(e,r,n){return await(0,Ra.executeOperation)(this.client,new Nye.RenameOperation(this.collection(e),r,(0,br.resolveOptions)(void 0,{...n,new_collection:!0,readPreference:GF.ReadPreference.primary})))}async dropCollection(e,r){return r=(0,br.resolveOptions)(this,r),await(0,HF.dropCollections)(this,e,r)}async dropDatabase(e){return await(0,Ra.executeOperation)(this.client,new HF.DropDatabaseOperation(this,(0,br.resolveOptions)(this,e)))}async collections(e){return e=(0,br.resolveOptions)(this,e),(await this.listCollections({},{...e,nameOnly:!0}).toArray()).filter(({name:n})=>!n.includes("$")).map(({name:n})=>new zF.Collection(this,n,this.s.options))}async createIndex(e,r,n){return(await(0,Ra.executeOperation)(this.client,Pye.CreateIndexesOperation.fromIndexSpecification(this,e,r,n)))[0]}async removeUser(e,r){return await(0,Ra.executeOperation)(this.client,new Iye.RemoveUserOperation(this,e,(0,br.resolveOptions)(this,r)))}async setProfilingLevel(e,r){return await(0,Ra.executeOperation)(this.client,new Rye.SetProfilingLevelOperation(this,e,(0,br.resolveOptions)(this,r)))}async profilingLevel(e){return await(0,Ra.executeOperation)(this.client,new Bye.ProfilingLevelOperation(this,(0,br.resolveOptions)(this,e)))}async indexInformation(e,r){return await this.collection(e).indexInformation((0,br.resolveOptions)(this,r))}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new vye.ChangeStream(this,e,(0,br.resolveOptions)(this,r))}runCursorCommand(e,r){return new Dye.RunCommandCursor(this,e,r)}};Ng.Db=tC});var pi=m(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});li.aws4=void 0;li.getKerberos=Lye;li.getZstdLibrary=Uye;li.getAwsCredentialProvider=Vye;li.getGcpMetadata=Wye;li.getSnappy=zye;li.getSocks=Kye;li.getMongoDBClientEncryption=Gye;var Fa=z();function Gd(t){let e=t?{kModuleError:t}:{};return new Proxy(e,{get:(r,n)=>{if(n==="kModuleError")return t;throw t},set:()=>{throw t}})}function Lye(){let t;try{t=require("kerberos")}catch(e){t=Gd(new Fa.MongoMissingDependencyError("Optional module `kerberos` not found. Please install it to enable kerberos authentication",{cause:e,dependencyName:"kerberos"}))}return t}function Uye(){let t;try{t=require("@mongodb-js/zstd")}catch(e){t=Gd(new Fa.MongoMissingDependencyError("Optional module `@mongodb-js/zstd` not found. Please install it to enable zstd compression",{cause:e,dependencyName:"zstd"}))}return t}function Vye(){try{return require("@aws-sdk/credential-providers")}catch(t){return Gd(new Fa.MongoMissingDependencyError("Optional module `@aws-sdk/credential-providers` not found. Please install it to enable getting aws credentials via the official sdk.",{cause:t,dependencyName:"@aws-sdk/credential-providers"}))}}function Wye(){try{return require("gcp-metadata")}catch(t){return Gd(new Fa.MongoMissingDependencyError("Optional module `gcp-metadata` not found. Please install it to enable getting gcp credentials via the official sdk.",{cause:t,dependencyName:"gcp-metadata"}))}}function zye(){try{return require("snappy")}catch(t){return{kModuleError:new Fa.MongoMissingDependencyError("Optional module `snappy` not found. Please install it to enable snappy compression",{cause:t,dependencyName:"snappy"})}}}function Kye(){try{return require("socks")}catch(t){return{kModuleError:new Fa.MongoMissingDependencyError("Optional module `socks` not found. Please install it to connections over a SOCKS5 proxy",{cause:t,dependencyName:"socks"})}}}li.aws4=Hye();function Hye(){let t;try{t=require("aws4")}catch(e){t=Gd(new Fa.MongoMissingDependencyError("Optional module `aws4` not found. Please install it to enable AWS authentication",{cause:e,dependencyName:"aws4"}))}return t}function Gye(){let t=null;try{t=require("mongodb-client-encryption")}catch(e){return{kModuleError:new Fa.MongoMissingDependencyError("Optional module `mongodb-client-encryption` not found. Please install it to use auto encryption or ClientEncryption.",{cause:e,dependencyName:"mongodb-client-encryption"})}}return t}});var $a=m(up=>{"use strict";Object.defineProperty(up,"__esModule",{value:!0});up.AuthProvider=up.AuthContext=void 0;var Jye=z(),rC=class{constructor(e,r,n){this.reauthenticating=!1,this.connection=e,this.credentials=r,this.options=n}};up.AuthContext=rC;var nC=class{async prepare(e,r){return e}async reauth(e){if(e.reauthenticating)throw new Jye.MongoRuntimeError("Reauthentication already in progress.");try{e.reauthenticating=!0,await this.auth(e)}finally{e.reauthenticating=!1}}};up.AuthProvider=nC});var Rg=m(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});di.GSSAPI=di.GSSAPICanonicalizationValue=void 0;di.performGSSAPICanonicalizeHostName=QF;di.resolveCname=aC;var iC=require("dns"),Yye=pi(),JF=z(),Qye=X(),Xye=$a();di.GSSAPICanonicalizationValue=Object.freeze({on:!0,off:!1,none:"none",forward:"forward",forwardAndReverse:"forwardAndReverse"});async function sC(t,e){return await t.command((0,Qye.ns)("$external.$cmd"),e)}var Jd,oC=class extends Xye.AuthProvider{async auth(e){let{connection:r,credentials:n}=e;if(n==null)throw new JF.MongoMissingCredentialsError("Credentials required for GSSAPI authentication");let{username:s}=n,i=await Zye(e),o=await i.step(""),a=await sC(r,ege(o)),u=await YF(i,10,a.payload),c=await sC(r,tge(u,a.conversationId)),l=await rge(i,s,c.payload);await sC(r,{saslContinue:1,conversationId:c.conversationId,payload:l})}};di.GSSAPI=oC;async function Zye(t){let{hostAddress:e}=t.options,{credentials:r}=t;if(!e||typeof e.host!="string"||!r)throw new JF.MongoInvalidArgumentError("Connection must have host and port and credentials defined.");if(nge(),"kModuleError"in Jd)throw Jd.kModuleError;let{initializeClient:n}=Jd,{username:s,password:i}=r,o=r.mechanismProperties,a=o.SERVICE_NAME??"mongodb",u=await QF(e.host,o),c={};i!=null&&Object.assign(c,{user:s,password:i});let l=o.SERVICE_HOST??u,p=`${a}${process.platform==="win32"?"/":"@"}${l}`;return"SERVICE_REALM"in o&&(p=`${p}@${o.SERVICE_REALM}`),await n(p,c)}function ege(t){return{saslStart:1,mechanism:"GSSAPI",payload:t,autoAuthorize:1}}function tge(t,e){return{saslContinue:1,conversationId:e,payload:t}}async function YF(t,e,r){try{return await t.step(r)||""}catch(n){if(e===0)throw n;return await YF(t,e-1,r)}}async function rge(t,e,r){let n=await t.unwrap(r);return await t.wrap(n||"",{user:e})}async function QF(t,e){let r=e.CANONICALIZE_HOST_NAME;if(!r||r===di.GSSAPICanonicalizationValue.none)return t;if(r===di.GSSAPICanonicalizationValue.on||r===di.GSSAPICanonicalizationValue.forwardAndReverse){let{address:n}=await iC.promises.lookup(t);try{let s=await iC.promises.resolvePtr(n);return s.length>0?s[0]:t}catch{return await aC(t)}}else return await aC(t)}async function aC(t){try{let e=await iC.promises.resolveCname(t);return e.length>0?e[0]:t}catch{return t}}function nge(){Jd||(Jd=(0,Yye.getKerberos)())}});var zi=m(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});Wi.AUTH_MECHS_AUTH_SRC_EXTERNAL=Wi.AuthMechanism=void 0;Wi.AuthMechanism=Object.freeze({MONGODB_AWS:"MONGODB-AWS",MONGODB_DEFAULT:"DEFAULT",MONGODB_GSSAPI:"GSSAPI",MONGODB_PLAIN:"PLAIN",MONGODB_SCRAM_SHA1:"SCRAM-SHA-1",MONGODB_SCRAM_SHA256:"SCRAM-SHA-256",MONGODB_X509:"MONGODB-X509",MONGODB_OIDC:"MONGODB-OIDC"});Wi.AUTH_MECHS_AUTH_SRC_EXTERNAL=new Set([Wi.AuthMechanism.MONGODB_GSSAPI,Wi.AuthMechanism.MONGODB_AWS,Wi.AuthMechanism.MONGODB_OIDC,Wi.AuthMechanism.MONGODB_X509])});var Fg=m(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});Qu.MongoCredentials=Qu.DEFAULT_ALLOWED_HOSTS=void 0;var Is=z(),sge=Rg(),yn=zi();function ige(t){return t&&Array.isArray(t.saslSupportedMechs)?t.saslSupportedMechs.includes(yn.AuthMechanism.MONGODB_SCRAM_SHA256)?yn.AuthMechanism.MONGODB_SCRAM_SHA256:yn.AuthMechanism.MONGODB_SCRAM_SHA1:yn.AuthMechanism.MONGODB_SCRAM_SHA256}var XF=["test","azure","gcp","k8s"],ZF="Auth mechanism property ALLOWED_HOSTS must be an array of strings.";Qu.DEFAULT_ALLOWED_HOSTS=["*.mongodb.net","*.mongodb-qa.net","*.mongodb-dev.net","*.mongodbgov.net","localhost","127.0.0.1","::1"];var oge="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure or gcp.",uC=class t{constructor(e){this.username=e.username??"",this.password=e.password,this.source=e.source,!this.source&&e.db&&(this.source=e.db),this.mechanism=e.mechanism||yn.AuthMechanism.MONGODB_DEFAULT,this.mechanismProperties=e.mechanismProperties||{},this.mechanism===yn.AuthMechanism.MONGODB_OIDC&&!this.mechanismProperties.ALLOWED_HOSTS&&(this.mechanismProperties={...this.mechanismProperties,ALLOWED_HOSTS:Qu.DEFAULT_ALLOWED_HOSTS}),Object.freeze(this.mechanismProperties),Object.freeze(this)}equals(e){return this.mechanism===e.mechanism&&this.username===e.username&&this.password===e.password&&this.source===e.source}resolveAuthMechanism(e){return this.mechanism.match(/DEFAULT/i)?new t({username:this.username,password:this.password,source:this.source,mechanism:ige(e),mechanismProperties:this.mechanismProperties}):this}validate(){if((this.mechanism===yn.AuthMechanism.MONGODB_GSSAPI||this.mechanism===yn.AuthMechanism.MONGODB_PLAIN||this.mechanism===yn.AuthMechanism.MONGODB_SCRAM_SHA1||this.mechanism===yn.AuthMechanism.MONGODB_SCRAM_SHA256)&&!this.username)throw new Is.MongoMissingCredentialsError(`Username required for mechanism '${this.mechanism}'`);if(this.mechanism===yn.AuthMechanism.MONGODB_OIDC){if(this.username&&this.mechanismProperties.ENVIRONMENT&&this.mechanismProperties.ENVIRONMENT!=="azure")throw new Is.MongoInvalidArgumentError(`username and ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' may not be used together for mechanism '${this.mechanism}'.`);if(this.username&&this.password)throw new Is.MongoInvalidArgumentError(`No password is allowed in ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' for '${this.mechanism}'.`);if((this.mechanismProperties.ENVIRONMENT==="azure"||this.mechanismProperties.ENVIRONMENT==="gcp")&&!this.mechanismProperties.TOKEN_RESOURCE)throw new Is.MongoInvalidArgumentError(oge);if(this.mechanismProperties.ENVIRONMENT&&!XF.includes(this.mechanismProperties.ENVIRONMENT))throw new Is.MongoInvalidArgumentError(`Currently only a ENVIRONMENT in ${XF.join(",")} is supported for mechanism '${this.mechanism}'.`);if(!this.mechanismProperties.ENVIRONMENT&&!this.mechanismProperties.OIDC_CALLBACK&&!this.mechanismProperties.OIDC_HUMAN_CALLBACK)throw new Is.MongoInvalidArgumentError(`Either a ENVIRONMENT, OIDC_CALLBACK, or OIDC_HUMAN_CALLBACK must be specified for mechanism '${this.mechanism}'.`);if(this.mechanismProperties.ALLOWED_HOSTS){let r=this.mechanismProperties.ALLOWED_HOSTS;if(!Array.isArray(r))throw new Is.MongoInvalidArgumentError(ZF);for(let n of r)if(typeof n!="string")throw new Is.MongoInvalidArgumentError(ZF)}}if(yn.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(this.mechanism)&&this.source!=null&&this.source!=="$external")throw new Is.MongoAPIError(`Invalid source '${this.source}' for mechanism '${this.mechanism}' specified.`);if(this.mechanism===yn.AuthMechanism.MONGODB_PLAIN&&this.source==null)throw new Is.MongoAPIError("PLAIN Authentication Mechanism needs an auth source");if(this.mechanism===yn.AuthMechanism.MONGODB_X509&&this.password!=null){if(this.password===""){Reflect.set(this,"password",void 0);return}throw new Is.MongoAPIError("Password not allowed for mechanism MONGODB-X509")}let e=this.mechanismProperties.CANONICALIZE_HOST_NAME??!1;if(!Object.values(sge.GSSAPICanonicalizationValue).includes(e))throw new Is.MongoAPIError(`Invalid CANONICALIZE_HOST_NAME value: ${e}`)}static merge(e,r){return new t({username:r.username??e?.username??"",password:r.password??e?.password??"",mechanism:r.mechanism??e?.mechanism??yn.AuthMechanism.MONGODB_DEFAULT,mechanismProperties:r.mechanismProperties??e?.mechanismProperties??{},source:r.source??r.db??e?.source??"admin"})}};Qu.MongoCredentials=uC});var e$=m((zNe,age)=>{age.exports={name:"mongodb",version:"7.0.0",description:"The official MongoDB driver for Node.js",main:"lib/index.js",files:["lib","src","etc/prepare.js","mongodb.d.ts","tsconfig.json"],types:"mongodb.d.ts",repository:{type:"git",url:"git@github.com:mongodb/node-mongodb-native.git"},keywords:["mongodb","driver","official"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},dependencies:{"@mongodb-js/saslprep":"^1.3.0",bson:"^7.0.0","mongodb-connection-string-url":"^7.0.0"},peerDependencies:{"@aws-sdk/credential-providers":"^3.806.0","@mongodb-js/zstd":"^7.0.0","gcp-metadata":"^7.0.1",kerberos:"^7.0.0","mongodb-client-encryption":">=7.0.0 <7.1.0",snappy:"^7.3.2",socks:"^2.8.6"},peerDependenciesMeta:{"@aws-sdk/credential-providers":{optional:!0},"@mongodb-js/zstd":{optional:!0},kerberos:{optional:!0},snappy:{optional:!0},"mongodb-client-encryption":{optional:!0},"gcp-metadata":{optional:!0},socks:{optional:!0}},devDependencies:{"@aws-sdk/credential-providers":"^3.876.0","@iarna/toml":"^2.2.5","@istanbuljs/nyc-config-typescript":"^1.0.2","@microsoft/api-extractor":"^7.52.11","@microsoft/tsdoc-config":"^0.17.1","@mongodb-js/zstd":"^7.0.0","@types/chai":"^4.3.17","@types/chai-subset":"^1.3.5","@types/express":"^5.0.3","@types/kerberos":"^1.1.5","@types/mocha":"^10.0.9","@types/node":"^22.15.3","@types/saslprep":"^1.0.3","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/sinon-chai":"^4.0.0","@types/whatwg-url":"^13.0.0","@typescript-eslint/eslint-plugin":"^8.41.0","@typescript-eslint/parser":"^8.31.1",chai:"^4.4.1","chai-subset":"^1.6.0",chalk:"^4.1.2",eslint:"^9.34.0","eslint-config-prettier":"^10.1.8","eslint-plugin-mocha":"^10.4.1","eslint-plugin-prettier":"^5.5.4","eslint-plugin-simple-import-sort":"^12.1.1","eslint-plugin-tsdoc":"^0.4.0","eslint-plugin-unused-imports":"^4.2.0",express:"^5.1.0","gcp-metadata":"^7.0.1","js-yaml":"^4.1.0",mocha:"^11.7.1","mocha-sinon":"^2.1.2","mongodb-client-encryption":"^7.0.0",nyc:"^15.1.0",prettier:"^3.6.2",semver:"^7.7.2",sinon:"^18.0.1","sinon-chai":"^3.7.0",snappy:"^7.3.2",socks:"^2.8.7","source-map-support":"^0.5.21","ts-node":"^10.9.2",tsd:"^0.33.0",typescript:"5.8.3","typescript-cached-transpile":"^0.0.6","v8-heapsnapshot":"^1.3.1",yargs:"^18.0.0"},license:"Apache-2.0",engines:{node:">=20.19.0"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},homepage:"https://github.com/mongodb/node-mongodb-native",scripts:{"build:evergreen":"node .evergreen/generate_evergreen_tasks.js","build:ts":"node ./node_modules/typescript/bin/tsc","build:dts":"npm run build:ts && api-extractor run && node etc/clean_definition_files.cjs && ESLINT_USE_FLAT_CONFIG=false eslint --no-ignore --fix mongodb.d.ts","build:docs":"./etc/docs/build.ts","build:typedoc":"typedoc","build:nightly":"node ./.github/scripts/nightly.mjs","check:bench":"npm --prefix test/benchmarks/driver_bench start","check:coverage":"nyc npm run test:all","check:integration-coverage":"nyc npm run check:test","check:lambda":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/handler.test.js","check:lambda:aws":"nyc mocha --config test/mocha_lambda.js test/integration/node-specific/examples/aws_handler.test.js","check:lint":"npm run build:dts && npm run check:dts && npm run check:eslint && npm run check:tsd","check:eslint":"npm run build:dts && ESLINT_USE_FLAT_CONFIG=false eslint -v && ESLINT_USE_FLAT_CONFIG=false eslint --max-warnings=0 --ext '.js,.ts' src test","check:tsd":"tsd --version && tsd","check:dependencies":"mocha test/action/dependency.test.ts","check:dts":"node ./node_modules/typescript/bin/tsc --target es2023 --module commonjs --noEmit mongodb.d.ts && tsd","check:search-indexes":"nyc mocha --config test/mocha_mongodb.js test/manual/search-index-management.prose.test.ts","check:test":"mocha --config test/mocha_mongodb.js test/integration","check:unit":"nyc mocha test/unit","check:ts":"node ./node_modules/typescript/bin/tsc -v && node ./node_modules/typescript/bin/tsc --noEmit","check:atlas":"nyc mocha --config test/manual/mocharc.js test/manual/atlas_connectivity.test.ts","check:drivers-atlas-testing":"nyc mocha --config test/mocha_mongodb.js test/atlas/drivers_atlas_testing.test.ts","check:aws":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_aws.test.ts test/integration/auth/mongodb_aws.prose.test.ts","check:oidc-auth":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/auth.spec.test.ts","check:oidc-test":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc.prose.test.ts","check:oidc-azure":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_azure.prose.05.test.ts","check:oidc-gcp":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_gcp.prose.06.test.ts","check:oidc-k8s":"nyc mocha --config test/mocha_mongodb.js test/integration/auth/mongodb_oidc_k8s.prose.07.test.ts","check:kerberos":"nyc mocha --config test/manual/mocharc.js test/manual/kerberos.test.ts","check:tls":"nyc mocha --config test/manual/mocharc.js test/manual/tls_support.test.ts","check:ldap":"nyc mocha --config test/manual/mocharc.js test/manual/ldap.test.ts","check:socks5":"nyc mocha --config test/manual/mocharc.js test/manual/socks5.test.ts","check:csfle":"nyc mocha --config test/mocha_mongodb.js test/integration/client-side-encryption","check:snappy":"nyc mocha test/unit/assorted/snappy.test.js","check:x509":"nyc mocha test/manual/x509_auth.test.ts","fix:eslint":"npm run check:eslint -- --fix",prepare:"node etc/prepare.js","preview:docs":"ts-node etc/docs/preview.ts",test:"npm run check:lint && npm run test:all","test:all":"npm run check:unit && npm run check:test","update:docs":"npm run build:docs -- --yes"},tsd:{directory:"test/types",compilerOptions:{strict:!0,target:"esnext",module:"commonjs",moduleResolution:"node"}}}});var cC=m(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});Xu.LimitedSizeDocument=void 0;Xu.isDriverInfoEqual=lge;Xu.makeClientMetadata=pge;Xu.getFAASEnv=n$;var Yd=require("os"),Qd=require("process"),cp=pe(),t$=z(),uge=X(),cge=e$().version;function lge(t,e){let r=(n,s)=>(n||=void 0,s||=void 0,n===s);return r(t.name,e.name)&&r(t.platform,e.platform)&&r(t.version,e.version)}var Xd=class{constructor(e){this.document=new Map,this.documentSize=5,this.maxSize=e}ifItFitsItSits(e,r){let n=cp.BSON.serialize(new Map().set(e,r)).byteLength-5;return n+this.documentSize>this.maxSize?!1:(this.documentSize+=n,this.document.set(e,r),!0)}toObject(){return cp.BSON.deserialize(cp.BSON.serialize(this.document),{promoteLongs:!1,promoteBuffers:!1,promoteValues:!1,useBigInt64:!1})}};Xu.LimitedSizeDocument=Xd;async function pge(t,{appName:e=""}){let r=new Xd(512);if(e.length>0){let a=Buffer.byteLength(e,"utf8")<=128?e:Buffer.from(e,"utf8").subarray(0,128).toString("utf8");r.ifItFitsItSits("application",{name:a})}let n={name:"nodejs",version:cge};for(let{name:a="",version:u=""}of t)a.length>0&&(n.name=`${n.name}|${a}`),u.length>0&&(n.version=`${n.version}|${u}`);if(!r.ifItFitsItSits("driver",n))throw new t$.MongoInvalidArgumentError("Unable to include driverInfo name and version, metadata cannot exceed 512 bytes");let s=fge();for(let{platform:a=""}of t)a.length>0&&(s=`${s}|${a}`);if(!r.ifItFitsItSits("platform",s))throw new t$.MongoInvalidArgumentError("Unable to include driverInfo platform, metadata cannot exceed 512 bytes");let i=new Map().set("name",Qd.platform).set("architecture",Qd.arch).set("version",Yd.release()).set("type",Yd.type());if(!r.ifItFitsItSits("os",i)){for(let a of i.keys())if(i.delete(a),i.size===0||r.ifItFitsItSits("os",i))break}let o=n$();if(o!=null&&!r.ifItFitsItSits("env",o)){for(let a of o.keys())if(o.delete(a),o.size===0||r.ifItFitsItSits("env",o))break}return await hge(r.toObject())}var r$;async function dge(){r$??=(0,uge.fileIsAccessible)("/.dockerenv");let t=await r$,{KUBERNETES_SERVICE_HOST:e=""}=Qd.env,r=e.length>0,n={};return t&&(n.runtime="docker"),r&&(n.orchestrator="kubernetes"),n}async function hge(t){let e=await dge();if(Object.keys(e).length===0)return t;let r=new Xd(512),n={...t?.env,container:e};for(let[s,i]of Object.entries(t))s!=="env"?r.ifItFitsItSits(s,i):r.ifItFitsItSits("env",n)||r.ifItFitsItSits("env",i);return"env"in t||r.ifItFitsItSits("env",n),r.toObject()}function n$(){let{AWS_EXECUTION_ENV:t="",AWS_LAMBDA_RUNTIME_API:e="",FUNCTIONS_WORKER_RUNTIME:r="",K_SERVICE:n="",FUNCTION_NAME:s="",VERCEL:i="",AWS_LAMBDA_FUNCTION_MEMORY_SIZE:o="",AWS_REGION:a="",FUNCTION_MEMORY_MB:u="",FUNCTION_REGION:c="",FUNCTION_TIMEOUT_SEC:l="",VERCEL_REGION:p=""}=Qd.env,d=t.startsWith("AWS_Lambda_")||e.length>0,h=r.length>0,f=n.length>0||s.length>0,y=i.length>0,g=new Map;return y&&!(h||f)?(p.length>0&&g.set("region",p),g.set("name","vercel"),g):d&&!(h||f||y)?(a.length>0&&g.set("region",a),o.length>0&&Number.isInteger(+o)&&g.set("memory_mb",new cp.Int32(o)),g.set("name","aws.lambda"),g):h&&!(f||d||y)?(g.set("name","azure.func"),g):f&&!(h||d||y)?(c.length>0&&g.set("region",c),u.length>0&&Number.isInteger(+u)&&g.set("memory_mb",new cp.Int32(u)),l.length>0&&Number.isInteger(+l)&&g.set("timeout_sec",new cp.Int32(l)),g.set("name","gcp.func"),g):null}function fge(){return"Deno"in globalThis?`Deno v${typeof Deno?.version?.deno=="string"?Deno?.version?.deno:"0.0.0-unknown"}, ${Yd.endianness()}`:"Bun"in globalThis?`Bun v${typeof Bun?.version=="string"?Bun?.version:"0.0.0-unknown"}, ${Yd.endianness()}`:`Node.js ${Qd.version}, ${Yd.endianness()}`}});var qg=m(Ge=>{"use strict";function et(t,e,r){return r.globals&&(t=r.globals[t.name]),new t(`${r.context?r.context:"Value"} ${e}.`)}function dp(t,e){if(typeof t=="bigint")throw et(TypeError,"is a BigInt which cannot be converted to a number",e);return e.globals?e.globals.Number(t):Number(t)}function i$(t){return t>0&&t%1===.5&&(t&1)===0||t<0&&t%1===-.5&&(t&1)===1?Zd(Math.floor(t)):Zd(Math.round(t))}function $g(t){return Zd(Math.trunc(t))}function s$(t){return t<0?-1:1}function mge(t,e){let r=t%e;return s$(e)!==s$(r)?r+e:r}function Zd(t){return t===0?0:t}function hp(t,{unsigned:e}){let r,n;e?(r=0,n=2**t-1):(r=-(2**(t-1)),n=2**(t-1)-1);let s=2**t,i=2**(t-1);return(o,a={})=>{let u=dp(o,a);if(u=Zd(u),a.enforceRange){if(!Number.isFinite(u))throw et(TypeError,"is not a finite number",a);if(u=$g(u),u<r||u>n)throw et(TypeError,`is outside the accepted range of ${r} to ${n}, inclusive`,a);return u}return!Number.isNaN(u)&&a.clamp?(u=Math.min(Math.max(u,r),n),u=i$(u),u):!Number.isFinite(u)||u===0?0:(u=$g(u),u>=r&&u<=n?u:(u=mge(u,s),!e&&u>=i?u-s:u))}}function o$(t,{unsigned:e}){let r=Number.MAX_SAFE_INTEGER,n=e?0:Number.MIN_SAFE_INTEGER,s=e?BigInt.asUintN:BigInt.asIntN;return(i,o={})=>{let a=dp(i,o);if(a=Zd(a),o.enforceRange){if(!Number.isFinite(a))throw et(TypeError,"is not a finite number",o);if(a=$g(a),a<n||a>r)throw et(TypeError,`is outside the accepted range of ${n} to ${r}, inclusive`,o);return a}if(!Number.isNaN(a)&&o.clamp)return a=Math.min(Math.max(a,n),r),a=i$(a),a;if(!Number.isFinite(a)||a===0)return 0;let u=BigInt($g(a));return u=s(t,u),Number(u)}}Ge.any=t=>t;Ge.undefined=()=>{};Ge.boolean=t=>!!t;Ge.byte=hp(8,{unsigned:!1});Ge.octet=hp(8,{unsigned:!0});Ge.short=hp(16,{unsigned:!1});Ge["unsigned short"]=hp(16,{unsigned:!0});Ge.long=hp(32,{unsigned:!1});Ge["unsigned long"]=hp(32,{unsigned:!0});Ge["long long"]=o$(64,{unsigned:!1});Ge["unsigned long long"]=o$(64,{unsigned:!0});Ge.double=(t,e={})=>{let r=dp(t,e);if(!Number.isFinite(r))throw et(TypeError,"is not a finite floating-point value",e);return r};Ge["unrestricted double"]=(t,e={})=>dp(t,e);Ge.float=(t,e={})=>{let r=dp(t,e);if(!Number.isFinite(r))throw et(TypeError,"is not a finite floating-point value",e);if(Object.is(r,-0))return r;let n=Math.fround(r);if(!Number.isFinite(n))throw et(TypeError,"is outside the range of a single-precision floating-point value",e);return n};Ge["unrestricted float"]=(t,e={})=>{let r=dp(t,e);return isNaN(r)||Object.is(r,-0)?r:Math.fround(r)};Ge.DOMString=(t,e={})=>{if(e.treatNullAsEmptyString&&t===null)return"";if(typeof t=="symbol")throw et(TypeError,"is a symbol, which cannot be converted to a string",e);return(e.globals?e.globals.String:String)(t)};Ge.ByteString=(t,e={})=>{let r=Ge.DOMString(t,e),n;for(let s=0;(n=r.codePointAt(s))!==void 0;++s)if(n>255)throw et(TypeError,"is not a valid ByteString",e);return r};Ge.USVString=(t,e={})=>{let r=Ge.DOMString(t,e),n=r.length,s=[];for(let i=0;i<n;++i){let o=r.charCodeAt(i);if(o<55296||o>57343)s.push(String.fromCodePoint(o));else if(56320<=o&&o<=57343)s.push(String.fromCodePoint(65533));else if(i===n-1)s.push(String.fromCodePoint(65533));else{let a=r.charCodeAt(i+1);if(56320<=a&&a<=57343){let u=o&1023,c=a&1023;s.push(String.fromCodePoint(65536+1024*u+c)),++i}else s.push(String.fromCodePoint(65533))}}return s.join("")};Ge.object=(t,e={})=>{if(t===null||typeof t!="object"&&typeof t!="function")throw et(TypeError,"is not an object",e);return t};var yge=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get,gge=typeof SharedArrayBuffer=="function"?Object.getOwnPropertyDescriptor(SharedArrayBuffer.prototype,"byteLength").get:null;function lC(t){try{return yge.call(t),!0}catch{return!1}}function lp(t){try{return gge.call(t),!0}catch{return!1}}function pp(t){try{return new Uint8Array(t),!1}catch{return!0}}Ge.ArrayBuffer=(t,e={})=>{if(!lC(t))throw e.allowShared&&!lp(t)?et(TypeError,"is not an ArrayBuffer or SharedArrayBuffer",e):et(TypeError,"is not an ArrayBuffer",e);if(pp(t))throw et(TypeError,"is a detached ArrayBuffer",e);return t};var _ge=Object.getOwnPropertyDescriptor(DataView.prototype,"byteLength").get;Ge.DataView=(t,e={})=>{try{_ge.call(t)}catch{throw et(TypeError,"is not a DataView",e)}if(!e.allowShared&&lp(t.buffer))throw et(TypeError,"is backed by a SharedArrayBuffer, which is not allowed",e);if(pp(t.buffer))throw et(TypeError,"is backed by a detached ArrayBuffer",e);return t};var Ege=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array).prototype,Symbol.toStringTag).get;[Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Uint8ClampedArray,Float32Array,Float64Array].forEach(t=>{let{name:e}=t,r=/^[AEIOU]/u.test(e)?"an":"a";Ge[e]=(n,s={})=>{if(!ArrayBuffer.isView(n)||Ege.call(n)!==e)throw et(TypeError,`is not ${r} ${e} object`,s);if(!s.allowShared&&lp(n.buffer))throw et(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",s);if(pp(n.buffer))throw et(TypeError,"is a view on a detached ArrayBuffer",s);return n}});Ge.ArrayBufferView=(t,e={})=>{if(!ArrayBuffer.isView(t))throw et(TypeError,"is not a view on an ArrayBuffer or SharedArrayBuffer",e);if(!e.allowShared&&lp(t.buffer))throw et(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",e);if(pp(t.buffer))throw et(TypeError,"is a view on a detached ArrayBuffer",e);return t};Ge.BufferSource=(t,e={})=>{if(ArrayBuffer.isView(t)){if(!e.allowShared&&lp(t.buffer))throw et(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",e);if(pp(t.buffer))throw et(TypeError,"is a view on a detached ArrayBuffer",e);return t}if(!e.allowShared&&!lC(t))throw et(TypeError,"is not an ArrayBuffer or a view on one",e);if(e.allowShared&&!lp(t)&&!lC(t))throw et(TypeError,"is not an ArrayBuffer, SharedArrayBuffer, or a view on one",e);if(pp(t))throw et(TypeError,"is a detached ArrayBuffer",e);return t};Ge.DOMTimeStamp=Ge["unsigned long long"]});var Lg=m((h$,f$)=>{"use strict";function bge(t){return typeof t=="object"&&t!==null||typeof t=="function"}var a$=Function.prototype.call.bind(Object.prototype.hasOwnProperty);function Sge(t,e){for(let r of Reflect.ownKeys(e)){let n=Reflect.getOwnPropertyDescriptor(e,r);if(n&&!Reflect.defineProperty(t,r,n))throw new TypeError(`Cannot redefine property: ${String(r)}`)}}function wge(t,e){let r=l$(t);return Object.defineProperties(Object.create(r["%Object.prototype%"]),Object.getOwnPropertyDescriptors(e))}var u$=Symbol("wrapper"),c$=Symbol("impl"),fp=Symbol("SameObject caches"),jg=Symbol.for("[webidl2js] constructor registry"),Age=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);function l$(t){if(a$(t,jg))return t[jg];let e=Object.create(null);e["%Object.prototype%"]=t.Object.prototype,e["%IteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(new t.Array()[Symbol.iterator]()));try{e["%AsyncIteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(t.eval("(async function* () {})").prototype))}catch{e["%AsyncIteratorPrototype%"]=Age}return t[jg]=e,e}function Oge(t,e,r){return t[fp]||(t[fp]=Object.create(null)),e in t[fp]||(t[fp][e]=r()),t[fp][e]}function p$(t){return t?t[u$]:null}function d$(t){return t?t[c$]:null}function Cge(t){let e=p$(t);return e||t}function vge(t){let e=d$(t);return e||t}var xge=Symbol("internal");function Tge(t){if(typeof t!="string")return!1;let e=t>>>0;if(e===2**32-1)return!1;let r=`${e}`;return t===r}var Dge=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get;function Mge(t){try{return Dge.call(t),!0}catch{return!1}}function Pge([t,e],r){let n;switch(r){case"key":n=t;break;case"value":n=e;break;case"key+value":n=[t,e];break}return{value:n,done:!1}}var Bge=Symbol("supports property index"),Ige=Symbol("supported property indices"),Nge=Symbol("supports property name"),kge=Symbol("supported property names"),Rge=Symbol("indexed property get"),Fge=Symbol("indexed property set new"),$ge=Symbol("indexed property set existing"),qge=Symbol("named property get"),jge=Symbol("named property set new"),Lge=Symbol("named property set existing"),Uge=Symbol("named property delete"),Vge=Symbol("async iterator get the next iteration result"),Wge=Symbol("async iterator return steps"),zge=Symbol("async iterator initialization steps"),Kge=Symbol("async iterator end of iteration");f$.exports=h$={isObject:bge,hasOwn:a$,define:Sge,newObjectInRealm:wge,wrapperSymbol:u$,implSymbol:c$,getSameObject:Oge,ctorRegistrySymbol:jg,initCtorRegistry:l$,wrapperForImpl:p$,implForWrapper:d$,tryWrapperForImpl:Cge,tryImplForWrapper:vge,iterInternalSymbol:xge,isArrayBuffer:Mge,isArrayIndexPropName:Tge,supportsPropertyIndex:Bge,supportedPropertyIndices:Ige,supportsPropertyName:Nge,supportedPropertyNames:kge,indexedGet:Rge,indexedSetNew:Fge,indexedSetExisting:$ge,namedGet:qge,namedSetNew:jge,namedSetExisting:Lge,namedDelete:Uge,asyncIteratorNext:Vge,asyncIteratorReturn:Wge,asyncIteratorInit:zge,asyncIteratorEOI:Kge,iteratorResult:Pge}});var w$=m((GNe,S$)=>{"use strict";var Hge=/^xn--/,Gge=/[^\0-\x7F]/,Jge=/[\x2E\u3002\uFF0E\uFF61]/g,Yge={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},pC=35,Ki=Math.floor,dC=String.fromCharCode;function qa(t){throw new RangeError(Yge[t])}function Qge(t,e){let r=[],n=t.length;for(;n--;)r[n]=e(t[n]);return r}function y$(t,e){let r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(Jge,".");let s=t.split("."),i=Qge(s,e).join(".");return n+i}function g$(t){let e=[],r=0,n=t.length;for(;r<n;){let s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){let i=t.charCodeAt(r++);(i&64512)==56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),r--)}else e.push(s)}return e}var Xge=t=>String.fromCodePoint(...t),Zge=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:36},m$=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},_$=function(t,e,r){let n=0;for(t=r?Ki(t/700):t>>1,t+=Ki(t/e);t>pC*26>>1;n+=36)t=Ki(t/pC);return Ki(n+(pC+1)*t/(t+38))},E$=function(t){let e=[],r=t.length,n=0,s=128,i=72,o=t.lastIndexOf("-");o<0&&(o=0);for(let a=0;a<o;++a)t.charCodeAt(a)>=128&&qa("not-basic"),e.push(t.charCodeAt(a));for(let a=o>0?o+1:0;a<r;){let u=n;for(let l=1,p=36;;p+=36){a>=r&&qa("invalid-input");let d=Zge(t.charCodeAt(a++));d>=36&&qa("invalid-input"),d>Ki((2147483647-n)/l)&&qa("overflow"),n+=d*l;let h=p<=i?1:p>=i+26?26:p-i;if(d<h)break;let f=36-h;l>Ki(2147483647/f)&&qa("overflow"),l*=f}let c=e.length+1;i=_$(n-u,c,u==0),Ki(n/c)>2147483647-s&&qa("overflow"),s+=Ki(n/c),n%=c,e.splice(n++,0,s)}return String.fromCodePoint(...e)},b$=function(t){let e=[];t=g$(t);let r=t.length,n=128,s=0,i=72;for(let u of t)u<128&&e.push(dC(u));let o=e.length,a=o;for(o&&e.push("-");a<r;){let u=2147483647;for(let l of t)l>=n&&l<u&&(u=l);let c=a+1;u-n>Ki((2147483647-s)/c)&&qa("overflow"),s+=(u-n)*c,n=u;for(let l of t)if(l<n&&++s>2147483647&&qa("overflow"),l===n){let p=s;for(let d=36;;d+=36){let h=d<=i?1:d>=i+26?26:d-i;if(p<h)break;let f=p-h,y=36-h;e.push(dC(m$(h+f%y,0))),p=Ki(f/y)}e.push(dC(m$(p,0))),i=_$(s,c,a===o),s=0,++a}++s,++n}return e.join("")},e2e=function(t){return y$(t,function(e){return Hge.test(e)?E$(e.slice(4).toLowerCase()):e})},t2e=function(t){return y$(t,function(e){return Gge.test(e)?"xn--"+b$(e):e})},r2e={version:"2.3.1",ucs2:{decode:g$,encode:Xge},decode:E$,encode:b$,toASCII:t2e,toUnicode:e2e};S$.exports=r2e});var O$=m((JNe,A$)=>{"use strict";var n2e=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113B8}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]/u,s2e=/[\u094D\u09CD\u0A4D\u0ACD\u0B4D\u0BCD\u0C4D\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E3A\u0EBA\u0F84\u1039\u103A\u1714\u1715\u1734\u17D2\u1A60\u1B44\u1BAA\u1BAB\u1BF2\u1BF3\u2D7F\uA806\uA82C\uA8C4\uA953\uA9C0\uAAF6\uABED\u{10A3F}\u{11046}\u{11070}\u{1107F}\u{110B9}\u{11133}\u{11134}\u{111C0}\u{11235}\u{112EA}\u{1134D}\u{113CE}-\u{113D0}\u{11442}\u{114C2}\u{115BF}\u{1163F}\u{116B6}\u{1172B}\u{11839}\u{1193D}\u{1193E}\u{119E0}\u{11A34}\u{11A47}\u{11A99}\u{11C3F}\u{11D44}\u{11D45}\u{11D97}\u{11F41}\u{11F42}\u{1612F}]/u,i2e=/[\u0620\u0626\u0628\u062A-\u062E\u0633-\u063F\u0641-\u0647\u0649\u064A\u066E\u066F\u0678-\u0687\u069A-\u06BF\u06C1\u06C2\u06CC\u06CE\u06D0\u06D1\u06FA-\u06FC\u06FF\u0712-\u0714\u071A-\u071D\u071F-\u0727\u0729\u072B\u072D\u072E\u074E-\u0758\u075C-\u076A\u076D-\u0770\u0772\u0775-\u0777\u077A-\u077F\u07CA-\u07EA\u0841-\u0845\u0848\u084A-\u0853\u0855\u0860\u0862-\u0865\u0868\u0886\u0889-\u088D\u08A0-\u08A9\u08AF\u08B0\u08B3-\u08B8\u08BA-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA872\u{10AC0}-\u{10AC4}\u{10ACD}\u{10AD3}-\u{10ADC}\u{10ADE}-\u{10AE0}\u{10AEB}-\u{10AEE}\u{10B80}\u{10B82}\u{10B86}-\u{10B88}\u{10B8A}\u{10B8B}\u{10B8D}\u{10B90}\u{10BAD}\u{10BAE}\u{10D00}-\u{10D21}\u{10D23}\u{10EC3}\u{10EC4}\u{10F30}-\u{10F32}\u{10F34}-\u{10F44}\u{10F51}-\u{10F53}\u{10F70}-\u{10F73}\u{10F76}-\u{10F81}\u{10FB0}\u{10FB2}\u{10FB3}\u{10FB8}\u{10FBB}\u{10FBC}\u{10FBE}\u{10FBF}\u{10FC1}\u{10FC4}\u{10FCA}\u{10FCB}\u{1E900}-\u{1E943}][\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*\u200C[\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13430}-\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*[\u0620\u0622-\u063F\u0641-\u064A\u066E\u066F\u0671-\u0673\u0675-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u077F\u07CA-\u07EA\u0840-\u0858\u0860\u0862-\u0865\u0867-\u086A\u0870-\u0882\u0886\u0889-\u088E\u08A0-\u08AC\u08AE-\u08C8\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA871\u{10AC0}-\u{10AC5}\u{10AC7}\u{10AC9}\u{10ACA}\u{10ACE}-\u{10AD6}\u{10AD8}-\u{10AE1}\u{10AE4}\u{10AEB}-\u{10AEF}\u{10B80}-\u{10B91}\u{10BA9}-\u{10BAE}\u{10D01}-\u{10D23}\u{10EC2}-\u{10EC4}\u{10F30}-\u{10F44}\u{10F51}-\u{10F54}\u{10F70}-\u{10F81}\u{10FB0}\u{10FB2}-\u{10FB6}\u{10FB8}-\u{10FBF}\u{10FC1}-\u{10FC4}\u{10FC9}\u{10FCA}\u{1E900}-\u{1E943}]/u,o2e=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,a2e=/[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u249C-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCEF}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D800}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]/u,u2e=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D4A}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,c2e=/^[\0-\x08\x0E-\x1B!-@\[-`\{-\x84\x86-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02B9\u02BA\u02C2-\u02CF\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u036F\u0374\u0375\u037E\u0384\u0385\u0387\u03F6\u0483-\u0489\u058A\u058D-\u058F\u0591-\u05C7\u05D0-\u05EA\u05EF-\u05F4\u0600-\u070D\u070F-\u074A\u074D-\u07B1\u07C0-\u07FA\u07FD-\u082D\u0830-\u083E\u0840-\u085B\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u0897-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09F2\u09F3\u09FB\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AF1\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0BF3-\u0BFA\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C78-\u0C7E\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E3F\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39-\u0F3D\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1390-\u1399\u1400\u169B\u169C\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DB\u17DD\u17F0-\u17F9\u1800-\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1940\u1944\u1945\u19DE-\u19FF\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u200B-\u200D\u200F-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2070\u2074-\u207E\u2080-\u208E\u20A0-\u20C0\u20D0-\u20F0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u2150-\u215F\u2189-\u218B\u2190-\u2335\u237B-\u2394\u2396-\u2429\u2440-\u244A\u2460-\u249B\u24EA-\u26AB\u26AD-\u27FF\u2900-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF9-\u2CFF\u2D7F\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u3004\u3008-\u3020\u302A-\u302D\u3030\u3036\u3037\u303D-\u303F\u3099-\u309C\u30A0\u30FB\u31C0-\u31E5\u31EF\u321D\u321E\u3250-\u325F\u327C-\u327E\u32B1-\u32BF\u32CC-\u32CF\u3377-\u337A\u33DE\u33DF\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA60D-\uA60F\uA66F-\uA67F\uA69E\uA69F\uA6F0\uA6F1\uA700-\uA721\uA788\uA802\uA806\uA80B\uA825\uA826\uA828-\uA82C\uA838\uA839\uA874-\uA877\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uAB6A\uAB6B\uABE5\uABE8\uABED\uFB1D-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD8F\uFD92-\uFDC7\uFDCF\uFDF0-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE74\uFE76-\uFEFC\uFEFF\uFF01-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10101}\u{10140}-\u{1018C}\u{10190}-\u{1019C}\u{101A0}\u{101FD}\u{102E0}-\u{102FB}\u{10376}-\u{1037A}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{1091F}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A38}-\u{10A3A}\u{10A3F}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE6}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B39}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D27}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D69}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAB}-\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10EFC}-\u{10F27}\u{10F30}-\u{10F59}\u{10F70}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{11001}\u{11038}-\u{11046}\u{11052}-\u{11065}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{11660}-\u{1166C}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{11FD5}-\u{11FF1}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE2}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CC00}-\u{1CCD5}\u{1CCF0}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D1E9}\u{1D1EA}\u{1D200}-\u{1D245}\u{1D300}-\u{1D356}\u{1D6C1}\u{1D6DB}\u{1D6FB}\u{1D715}\u{1D735}\u{1D74F}\u{1D76F}\u{1D789}\u{1D7A9}\u{1D7C3}\u{1D7CE}-\u{1D7FF}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E2FF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8D6}\u{1E900}-\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F10F}\u{1F12F}\u{1F16A}-\u{1F16F}\u{1F1AD}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*$/u,l2e=/[0-9\xB2\xB3\xB9\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\u{102E1}-\u{102FB}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10D40}-\u{10D65}\u{10D6F}-\u{10D85}\u{10D8E}\u{10D8F}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10EC2}-\u{10EC4}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u,p2e=/[0-9\xB2\xB3\xB9\u06F0-\u06F9\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFF10-\uFF19\u{102E1}-\u{102FB}\u{1CCF0}-\u{1CCF9}\u{1D7CE}-\u{1D7FF}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}]/u,d2e=/[\u0600-\u0605\u0660-\u0669\u066B\u066C\u06DD\u0890\u0891\u08E2\u{10D30}-\u{10D39}\u{10D40}-\u{10D49}\u{10E60}-\u{10E7E}]/u,h2e=/^[\0-\x08\x0E-\x1B!-\x84\x86-\u0377\u037A-\u037F\u0384-\u038A\u038C\u038E-\u03A1\u03A3-\u052F\u0531-\u0556\u0559-\u058A\u058D-\u058F\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0606\u0607\u0609\u060A\u060C\u060E-\u061A\u064B-\u065F\u066A\u0670\u06D6-\u06DC\u06DE-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07F6-\u07F9\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A76\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AF1\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B77\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BFA\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C77-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4F\u0D54-\u0D63\u0D66-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E3A\u0E3F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F47\u0F49-\u0F6C\u0F71-\u0F97\u0F99-\u0FBC\u0FBE-\u0FCC\u0FCE-\u0FDA\u1000-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u137C\u1380-\u1399\u13A0-\u13F5\u13F8-\u13FD\u1400-\u167F\u1681-\u169C\u16A0-\u16F8\u1700-\u1715\u171F-\u1736\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u1800-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1940\u1944-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u19DE-\u1A1B\u1A1E-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1AB0-\u1ACE\u1B00-\u1B4C\u1B4E-\u1BF3\u1BFC-\u1C37\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD0-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u200B-\u200E\u2010-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2071\u2074-\u208E\u2090-\u209C\u20A0-\u20C0\u20D0-\u20F0\u2100-\u218B\u2190-\u2429\u2440-\u244A\u2460-\u2B73\u2B76-\u2B95\u2B97-\u2CF3\u2CF9-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3001-\u303F\u3041-\u3096\u3099-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31E5\u31EF-\u321E\u3220-\uA48C\uA490-\uA4C6\uA4D0-\uA62B\uA640-\uA6F7\uA700-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA82C\uA830-\uA839\uA840-\uA877\uA880-\uA8C5\uA8CE-\uA8D9\uA8E0-\uA953\uA95F-\uA97C\uA980-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA5C-\uAAC2\uAADB-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB6B\uAB70-\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1E\uFB29\uFD3E-\uFD4F\uFDCF\uFDFD-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}-\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1018E}\u{10190}-\u{1019C}\u{101A0}\u{101D0}-\u{101FD}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E0}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{1037A}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{1091F}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10B39}-\u{10B3F}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6E}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{1104D}\u{11052}-\u{11075}\u{1107F}-\u{110C2}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11100}-\u{11134}\u{11136}-\u{11147}\u{11150}-\u{11176}\u{11180}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{11241}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112EA}\u{112F0}-\u{112F9}\u{11300}-\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133B}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113C0}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}-\u{113D5}\u{113D7}\u{113D8}\u{113E1}\u{113E2}\u{11400}-\u{1145B}\u{1145D}-\u{11461}\u{11480}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B5}\u{115B8}-\u{115DD}\u{11600}-\u{11644}\u{11650}-\u{11659}\u{11660}-\u{1166C}\u{11680}-\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171D}-\u{1172B}\u{11730}-\u{11746}\u{11800}-\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D7}\u{119DA}-\u{119E4}\u{11A00}-\u{11A47}\u{11A50}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C36}\u{11C38}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D47}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF8}\u{11F00}-\u{11F10}\u{11F12}-\u{11F3A}\u{11F3E}-\u{11F5A}\u{11FB0}\u{11FC0}-\u{11FF1}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{13455}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF0}-\u{16AF5}\u{16B00}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F4F}-\u{16F87}\u{16F8F}-\u{16F9F}\u{16FE0}-\u{16FE4}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}-\u{1BCA3}\u{1CC00}-\u{1CCF9}\u{1CD00}-\u{1CEB3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D1EA}\u{1D200}-\u{1D245}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D300}-\u{1D356}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D7CB}\u{1D7CE}-\u{1DA8B}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E030}-\u{1E06D}\u{1E08F}\u{1E100}-\u{1E12C}\u{1E130}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AE}\u{1E2C0}-\u{1E2F9}\u{1E2FF}\u{1E4D0}-\u{1E4F9}\u{1E5D0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F1AD}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}-\u{1F8BB}\u{1F8C0}\u{1F8C1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA89}\u{1FA8F}-\u{1FAC6}\u{1FACE}-\u{1FADC}\u{1FADF}-\u{1FAE9}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]*$/u,f2e=/[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u06F0-\u06F9\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B4E-\u1B6A\u1B74-\u1B7F\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u2488-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CD\uA7D0\uA7D1\uA7D3\uA7D5-\uA7DC\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E1}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{105C0}-\u{105F3}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11380}-\u{11389}\u{1138B}\u{1138E}\u{11390}-\u{113B5}\u{113B7}-\u{113BA}\u{113C2}\u{113C5}\u{113C7}-\u{113CA}\u{113CC}\u{113CD}\u{113CF}\u{113D1}\u{113D3}-\u{113D5}\u{113D7}\u{113D8}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{116D0}-\u{116E3}\u{11700}-\u{1171A}\u{1171E}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11BC0}-\u{11BE1}\u{11BF0}-\u{11BF9}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{13460}-\u{143FA}\u{14400}-\u{14646}\u{16100}-\u{1611D}\u{1612A}-\u{1612C}\u{16130}-\u{16139}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16D40}-\u{16D79}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18CFF}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CCD6}-\u{1CCF9}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D7CE}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E5D0}-\u{1E5ED}\u{1E5F0}-\u{1E5FA}\u{1E5FF}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F100}-\u{1F10A}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1FBF0}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2EBF0}-\u{2EE5D}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0897-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10D69}-\u{10D6D}\u{10EAB}\u{10EAC}\u{10EFC}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{113BB}-\u{113C0}\u{113CE}\u{113D0}\u{113D2}\u{113E1}\u{113E2}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11F5A}\u{13440}\u{13447}-\u{13455}\u{1611E}-\u{16129}\u{1612D}-\u{1612F}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E5EE}\u{1E5EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u;A$.exports={combiningMarks:n2e,combiningClassVirama:s2e,validZWNJ:i2e,bidiDomain:o2e,bidiS1LTR:a2e,bidiS1RTL:u2e,bidiS2:c2e,bidiS3:l2e,bidiS4EN:p2e,bidiS4AN:d2e,bidiS5:h2e,bidiS6:f2e}});var C$=m((YNe,m2e)=>{m2e.exports=[[[0,44],2],[[45,46],2],[47,2],[[48,57],2],[[58,64],2],[65,1,"a"],[66,1,"b"],[67,1,"c"],[68,1,"d"],[69,1,"e"],[70,1,"f"],[71,1,"g"],[72,1,"h"],[73,1,"i"],[74,1,"j"],[75,1,"k"],[76,1,"l"],[77,1,"m"],[78,1,"n"],[79,1,"o"],[80,1,"p"],[81,1,"q"],[82,1,"r"],[83,1,"s"],[84,1,"t"],[85,1,"u"],[86,1,"v"],[87,1,"w"],[88,1,"x"],[89,1,"y"],[90,1,"z"],[[91,96],2],[[97,122],2],[[123,127],2],[[128,159],3],[160,1," "],[[161,167],2],[168,1," \u0308"],[169,2],[170,1,"a"],[[171,172],2],[173,7],[174,2],[175,1," \u0304"],[[176,177],2],[178,1,"2"],[179,1,"3"],[180,1," \u0301"],[181,1,"\u03BC"],[182,2],[183,2],[184,1," \u0327"],[185,1,"1"],[186,1,"o"],[187,2],[188,1,"1\u20444"],[189,1,"1\u20442"],[190,1,"3\u20444"],[191,2],[192,1,"\xE0"],[193,1,"\xE1"],[194,1,"\xE2"],[195,1,"\xE3"],[196,1,"\xE4"],[197,1,"\xE5"],[198,1,"\xE6"],[199,1,"\xE7"],[200,1,"\xE8"],[201,1,"\xE9"],[202,1,"\xEA"],[203,1,"\xEB"],[204,1,"\xEC"],[205,1,"\xED"],[206,1,"\xEE"],[207,1,"\xEF"],[208,1,"\xF0"],[209,1,"\xF1"],[210,1,"\xF2"],[211,1,"\xF3"],[212,1,"\xF4"],[213,1,"\xF5"],[214,1,"\xF6"],[215,2],[216,1,"\xF8"],[217,1,"\xF9"],[218,1,"\xFA"],[219,1,"\xFB"],[220,1,"\xFC"],[221,1,"\xFD"],[222,1,"\xFE"],[223,6,"ss"],[[224,246],2],[247,2],[[248,255],2],[256,1,"\u0101"],[257,2],[258,1,"\u0103"],[259,2],[260,1,"\u0105"],[261,2],[262,1,"\u0107"],[263,2],[264,1,"\u0109"],[265,2],[266,1,"\u010B"],[267,2],[268,1,"\u010D"],[269,2],[270,1,"\u010F"],[271,2],[272,1,"\u0111"],[273,2],[274,1,"\u0113"],[275,2],[276,1,"\u0115"],[277,2],[278,1,"\u0117"],[279,2],[280,1,"\u0119"],[281,2],[282,1,"\u011B"],[283,2],[284,1,"\u011D"],[285,2],[286,1,"\u011F"],[287,2],[288,1,"\u0121"],[289,2],[290,1,"\u0123"],[291,2],[292,1,"\u0125"],[293,2],[294,1,"\u0127"],[295,2],[296,1,"\u0129"],[297,2],[298,1,"\u012B"],[299,2],[300,1,"\u012D"],[301,2],[302,1,"\u012F"],[303,2],[304,1,"i\u0307"],[305,2],[[306,307],1,"ij"],[308,1,"\u0135"],[309,2],[310,1,"\u0137"],[[311,312],2],[313,1,"\u013A"],[314,2],[315,1,"\u013C"],[316,2],[317,1,"\u013E"],[318,2],[[319,320],1,"l\xB7"],[321,1,"\u0142"],[322,2],[323,1,"\u0144"],[324,2],[325,1,"\u0146"],[326,2],[327,1,"\u0148"],[328,2],[329,1,"\u02BCn"],[330,1,"\u014B"],[331,2],[332,1,"\u014D"],[333,2],[334,1,"\u014F"],[335,2],[336,1,"\u0151"],[337,2],[338,1,"\u0153"],[339,2],[340,1,"\u0155"],[341,2],[342,1,"\u0157"],[343,2],[344,1,"\u0159"],[345,2],[346,1,"\u015B"],[347,2],[348,1,"\u015D"],[349,2],[350,1,"\u015F"],[351,2],[352,1,"\u0161"],[353,2],[354,1,"\u0163"],[355,2],[356,1,"\u0165"],[357,2],[358,1,"\u0167"],[359,2],[360,1,"\u0169"],[361,2],[362,1,"\u016B"],[363,2],[364,1,"\u016D"],[365,2],[366,1,"\u016F"],[367,2],[368,1,"\u0171"],[369,2],[370,1,"\u0173"],[371,2],[372,1,"\u0175"],[373,2],[374,1,"\u0177"],[375,2],[376,1,"\xFF"],[377,1,"\u017A"],[378,2],[379,1,"\u017C"],[380,2],[381,1,"\u017E"],[382,2],[383,1,"s"],[384,2],[385,1,"\u0253"],[386,1,"\u0183"],[387,2],[388,1,"\u0185"],[389,2],[390,1,"\u0254"],[391,1,"\u0188"],[392,2],[393,1,"\u0256"],[394,1,"\u0257"],[395,1,"\u018C"],[[396,397],2],[398,1,"\u01DD"],[399,1,"\u0259"],[400,1,"\u025B"],[401,1,"\u0192"],[402,2],[403,1,"\u0260"],[404,1,"\u0263"],[405,2],[406,1,"\u0269"],[407,1,"\u0268"],[408,1,"\u0199"],[[409,411],2],[412,1,"\u026F"],[413,1,"\u0272"],[414,2],[415,1,"\u0275"],[416,1,"\u01A1"],[417,2],[418,1,"\u01A3"],[419,2],[420,1,"\u01A5"],[421,2],[422,1,"\u0280"],[423,1,"\u01A8"],[424,2],[425,1,"\u0283"],[[426,427],2],[428,1,"\u01AD"],[429,2],[430,1,"\u0288"],[431,1,"\u01B0"],[432,2],[433,1,"\u028A"],[434,1,"\u028B"],[435,1,"\u01B4"],[436,2],[437,1,"\u01B6"],[438,2],[439,1,"\u0292"],[440,1,"\u01B9"],[[441,443],2],[444,1,"\u01BD"],[[445,451],2],[[452,454],1,"d\u017E"],[[455,457],1,"lj"],[[458,460],1,"nj"],[461,1,"\u01CE"],[462,2],[463,1,"\u01D0"],[464,2],[465,1,"\u01D2"],[466,2],[467,1,"\u01D4"],[468,2],[469,1,"\u01D6"],[470,2],[471,1,"\u01D8"],[472,2],[473,1,"\u01DA"],[474,2],[475,1,"\u01DC"],[[476,477],2],[478,1,"\u01DF"],[479,2],[480,1,"\u01E1"],[481,2],[482,1,"\u01E3"],[483,2],[484,1,"\u01E5"],[485,2],[486,1,"\u01E7"],[487,2],[488,1,"\u01E9"],[489,2],[490,1,"\u01EB"],[491,2],[492,1,"\u01ED"],[493,2],[494,1,"\u01EF"],[[495,496],2],[[497,499],1,"dz"],[500,1,"\u01F5"],[501,2],[502,1,"\u0195"],[503,1,"\u01BF"],[504,1,"\u01F9"],[505,2],[506,1,"\u01FB"],[507,2],[508,1,"\u01FD"],[509,2],[510,1,"\u01FF"],[511,2],[512,1,"\u0201"],[513,2],[514,1,"\u0203"],[515,2],[516,1,"\u0205"],[517,2],[518,1,"\u0207"],[519,2],[520,1,"\u0209"],[521,2],[522,1,"\u020B"],[523,2],[524,1,"\u020D"],[525,2],[526,1,"\u020F"],[527,2],[528,1,"\u0211"],[529,2],[530,1,"\u0213"],[531,2],[532,1,"\u0215"],[533,2],[534,1,"\u0217"],[535,2],[536,1,"\u0219"],[537,2],[538,1,"\u021B"],[539,2],[540,1,"\u021D"],[541,2],[542,1,"\u021F"],[543,2],[544,1,"\u019E"],[545,2],[546,1,"\u0223"],[547,2],[548,1,"\u0225"],[549,2],[550,1,"\u0227"],[551,2],[552,1,"\u0229"],[553,2],[554,1,"\u022B"],[555,2],[556,1,"\u022D"],[557,2],[558,1,"\u022F"],[559,2],[560,1,"\u0231"],[561,2],[562,1,"\u0233"],[563,2],[[564,566],2],[[567,569],2],[570,1,"\u2C65"],[571,1,"\u023C"],[572,2],[573,1,"\u019A"],[574,1,"\u2C66"],[[575,576],2],[577,1,"\u0242"],[578,2],[579,1,"\u0180"],[580,1,"\u0289"],[581,1,"\u028C"],[582,1,"\u0247"],[583,2],[584,1,"\u0249"],[585,2],[586,1,"\u024B"],[587,2],[588,1,"\u024D"],[589,2],[590,1,"\u024F"],[591,2],[[592,680],2],[[681,685],2],[[686,687],2],[688,1,"h"],[689,1,"\u0266"],[690,1,"j"],[691,1,"r"],[692,1,"\u0279"],[693,1,"\u027B"],[694,1,"\u0281"],[695,1,"w"],[696,1,"y"],[[697,705],2],[[706,709],2],[[710,721],2],[[722,727],2],[728,1," \u0306"],[729,1," \u0307"],[730,1," \u030A"],[731,1," \u0328"],[732,1," \u0303"],[733,1," \u030B"],[734,2],[735,2],[736,1,"\u0263"],[737,1,"l"],[738,1,"s"],[739,1,"x"],[740,1,"\u0295"],[[741,745],2],[[746,747],2],[748,2],[749,2],[750,2],[[751,767],2],[[768,831],2],[832,1,"\u0300"],[833,1,"\u0301"],[834,2],[835,1,"\u0313"],[836,1,"\u0308\u0301"],[837,1,"\u03B9"],[[838,846],2],[847,7],[[848,855],2],[[856,860],2],[[861,863],2],[[864,865],2],[866,2],[[867,879],2],[880,1,"\u0371"],[881,2],[882,1,"\u0373"],[883,2],[884,1,"\u02B9"],[885,2],[886,1,"\u0377"],[887,2],[[888,889],3],[890,1," \u03B9"],[[891,893],2],[894,1,";"],[895,1,"\u03F3"],[[896,899],3],[900,1," \u0301"],[901,1," \u0308\u0301"],[902,1,"\u03AC"],[903,1,"\xB7"],[904,1,"\u03AD"],[905,1,"\u03AE"],[906,1,"\u03AF"],[907,3],[908,1,"\u03CC"],[909,3],[910,1,"\u03CD"],[911,1,"\u03CE"],[912,2],[913,1,"\u03B1"],[914,1,"\u03B2"],[915,1,"\u03B3"],[916,1,"\u03B4"],[917,1,"\u03B5"],[918,1,"\u03B6"],[919,1,"\u03B7"],[920,1,"\u03B8"],[921,1,"\u03B9"],[922,1,"\u03BA"],[923,1,"\u03BB"],[924,1,"\u03BC"],[925,1,"\u03BD"],[926,1,"\u03BE"],[927,1,"\u03BF"],[928,1,"\u03C0"],[929,1,"\u03C1"],[930,3],[931,1,"\u03C3"],[932,1,"\u03C4"],[933,1,"\u03C5"],[934,1,"\u03C6"],[935,1,"\u03C7"],[936,1,"\u03C8"],[937,1,"\u03C9"],[938,1,"\u03CA"],[939,1,"\u03CB"],[[940,961],2],[962,6,"\u03C3"],[[963,974],2],[975,1,"\u03D7"],[976,1,"\u03B2"],[977,1,"\u03B8"],[978,1,"\u03C5"],[979,1,"\u03CD"],[980,1,"\u03CB"],[981,1,"\u03C6"],[982,1,"\u03C0"],[983,2],[984,1,"\u03D9"],[985,2],[986,1,"\u03DB"],[987,2],[988,1,"\u03DD"],[989,2],[990,1,"\u03DF"],[991,2],[992,1,"\u03E1"],[993,2],[994,1,"\u03E3"],[995,2],[996,1,"\u03E5"],[997,2],[998,1,"\u03E7"],[999,2],[1e3,1,"\u03E9"],[1001,2],[1002,1,"\u03EB"],[1003,2],[1004,1,"\u03ED"],[1005,2],[1006,1,"\u03EF"],[1007,2],[1008,1,"\u03BA"],[1009,1,"\u03C1"],[1010,1,"\u03C3"],[1011,2],[1012,1,"\u03B8"],[1013,1,"\u03B5"],[1014,2],[1015,1,"\u03F8"],[1016,2],[1017,1,"\u03C3"],[1018,1,"\u03FB"],[1019,2],[1020,2],[1021,1,"\u037B"],[1022,1,"\u037C"],[1023,1,"\u037D"],[1024,1,"\u0450"],[1025,1,"\u0451"],[1026,1,"\u0452"],[1027,1,"\u0453"],[1028,1,"\u0454"],[1029,1,"\u0455"],[1030,1,"\u0456"],[1031,1,"\u0457"],[1032,1,"\u0458"],[1033,1,"\u0459"],[1034,1,"\u045A"],[1035,1,"\u045B"],[1036,1,"\u045C"],[1037,1,"\u045D"],[1038,1,"\u045E"],[1039,1,"\u045F"],[1040,1,"\u0430"],[1041,1,"\u0431"],[1042,1,"\u0432"],[1043,1,"\u0433"],[1044,1,"\u0434"],[1045,1,"\u0435"],[1046,1,"\u0436"],[1047,1,"\u0437"],[1048,1,"\u0438"],[1049,1,"\u0439"],[1050,1,"\u043A"],[1051,1,"\u043B"],[1052,1,"\u043C"],[1053,1,"\u043D"],[1054,1,"\u043E"],[1055,1,"\u043F"],[1056,1,"\u0440"],[1057,1,"\u0441"],[1058,1,"\u0442"],[1059,1,"\u0443"],[1060,1,"\u0444"],[1061,1,"\u0445"],[1062,1,"\u0446"],[1063,1,"\u0447"],[1064,1,"\u0448"],[1065,1,"\u0449"],[1066,1,"\u044A"],[1067,1,"\u044B"],[1068,1,"\u044C"],[1069,1,"\u044D"],[1070,1,"\u044E"],[1071,1,"\u044F"],[[1072,1103],2],[1104,2],[[1105,1116],2],[1117,2],[[1118,1119],2],[1120,1,"\u0461"],[1121,2],[1122,1,"\u0463"],[1123,2],[1124,1,"\u0465"],[1125,2],[1126,1,"\u0467"],[1127,2],[1128,1,"\u0469"],[1129,2],[1130,1,"\u046B"],[1131,2],[1132,1,"\u046D"],[1133,2],[1134,1,"\u046F"],[1135,2],[1136,1,"\u0471"],[1137,2],[1138,1,"\u0473"],[1139,2],[1140,1,"\u0475"],[1141,2],[1142,1,"\u0477"],[1143,2],[1144,1,"\u0479"],[1145,2],[1146,1,"\u047B"],[1147,2],[1148,1,"\u047D"],[1149,2],[1150,1,"\u047F"],[1151,2],[1152,1,"\u0481"],[1153,2],[1154,2],[[1155,1158],2],[1159,2],[[1160,1161],2],[1162,1,"\u048B"],[1163,2],[1164,1,"\u048D"],[1165,2],[1166,1,"\u048F"],[1167,2],[1168,1,"\u0491"],[1169,2],[1170,1,"\u0493"],[1171,2],[1172,1,"\u0495"],[1173,2],[1174,1,"\u0497"],[1175,2],[1176,1,"\u0499"],[1177,2],[1178,1,"\u049B"],[1179,2],[1180,1,"\u049D"],[1181,2],[1182,1,"\u049F"],[1183,2],[1184,1,"\u04A1"],[1185,2],[1186,1,"\u04A3"],[1187,2],[1188,1,"\u04A5"],[1189,2],[1190,1,"\u04A7"],[1191,2],[1192,1,"\u04A9"],[1193,2],[1194,1,"\u04AB"],[1195,2],[1196,1,"\u04AD"],[1197,2],[1198,1,"\u04AF"],[1199,2],[1200,1,"\u04B1"],[1201,2],[1202,1,"\u04B3"],[1203,2],[1204,1,"\u04B5"],[1205,2],[1206,1,"\u04B7"],[1207,2],[1208,1,"\u04B9"],[1209,2],[1210,1,"\u04BB"],[1211,2],[1212,1,"\u04BD"],[1213,2],[1214,1,"\u04BF"],[1215,2],[1216,1,"\u04CF"],[1217,1,"\u04C2"],[1218,2],[1219,1,"\u04C4"],[1220,2],[1221,1,"\u04C6"],[1222,2],[1223,1,"\u04C8"],[1224,2],[1225,1,"\u04CA"],[1226,2],[1227,1,"\u04CC"],[1228,2],[1229,1,"\u04CE"],[1230,2],[1231,2],[1232,1,"\u04D1"],[1233,2],[1234,1,"\u04D3"],[1235,2],[1236,1,"\u04D5"],[1237,2],[1238,1,"\u04D7"],[1239,2],[1240,1,"\u04D9"],[1241,2],[1242,1,"\u04DB"],[1243,2],[1244,1,"\u04DD"],[1245,2],[1246,1,"\u04DF"],[1247,2],[1248,1,"\u04E1"],[1249,2],[1250,1,"\u04E3"],[1251,2],[1252,1,"\u04E5"],[1253,2],[1254,1,"\u04E7"],[1255,2],[1256,1,"\u04E9"],[1257,2],[1258,1,"\u04EB"],[1259,2],[1260,1,"\u04ED"],[1261,2],[1262,1,"\u04EF"],[1263,2],[1264,1,"\u04F1"],[1265,2],[1266,1,"\u04F3"],[1267,2],[1268,1,"\u04F5"],[1269,2],[1270,1,"\u04F7"],[1271,2],[1272,1,"\u04F9"],[1273,2],[1274,1,"\u04FB"],[1275,2],[1276,1,"\u04FD"],[1277,2],[1278,1,"\u04FF"],[1279,2],[1280,1,"\u0501"],[1281,2],[1282,1,"\u0503"],[1283,2],[1284,1,"\u0505"],[1285,2],[1286,1,"\u0507"],[1287,2],[1288,1,"\u0509"],[1289,2],[1290,1,"\u050B"],[1291,2],[1292,1,"\u050D"],[1293,2],[1294,1,"\u050F"],[1295,2],[1296,1,"\u0511"],[1297,2],[1298,1,"\u0513"],[1299,2],[1300,1,"\u0515"],[1301,2],[1302,1,"\u0517"],[1303,2],[1304,1,"\u0519"],[1305,2],[1306,1,"\u051B"],[1307,2],[1308,1,"\u051D"],[1309,2],[1310,1,"\u051F"],[1311,2],[1312,1,"\u0521"],[1313,2],[1314,1,"\u0523"],[1315,2],[1316,1,"\u0525"],[1317,2],[1318,1,"\u0527"],[1319,2],[1320,1,"\u0529"],[1321,2],[1322,1,"\u052B"],[1323,2],[1324,1,"\u052D"],[1325,2],[1326,1,"\u052F"],[1327,2],[1328,3],[1329,1,"\u0561"],[1330,1,"\u0562"],[1331,1,"\u0563"],[1332,1,"\u0564"],[1333,1,"\u0565"],[1334,1,"\u0566"],[1335,1,"\u0567"],[1336,1,"\u0568"],[1337,1,"\u0569"],[1338,1,"\u056A"],[1339,1,"\u056B"],[1340,1,"\u056C"],[1341,1,"\u056D"],[1342,1,"\u056E"],[1343,1,"\u056F"],[1344,1,"\u0570"],[1345,1,"\u0571"],[1346,1,"\u0572"],[1347,1,"\u0573"],[1348,1,"\u0574"],[1349,1,"\u0575"],[1350,1,"\u0576"],[1351,1,"\u0577"],[1352,1,"\u0578"],[1353,1,"\u0579"],[1354,1,"\u057A"],[1355,1,"\u057B"],[1356,1,"\u057C"],[1357,1,"\u057D"],[1358,1,"\u057E"],[1359,1,"\u057F"],[1360,1,"\u0580"],[1361,1,"\u0581"],[1362,1,"\u0582"],[1363,1,"\u0583"],[1364,1,"\u0584"],[1365,1,"\u0585"],[1366,1,"\u0586"],[[1367,1368],3],[1369,2],[[1370,1375],2],[1376,2],[[1377,1414],2],[1415,1,"\u0565\u0582"],[1416,2],[1417,2],[1418,2],[[1419,1420],3],[[1421,1422],2],[1423,2],[1424,3],[[1425,1441],2],[1442,2],[[1443,1455],2],[[1456,1465],2],[1466,2],[[1467,1469],2],[1470,2],[1471,2],[1472,2],[[1473,1474],2],[1475,2],[1476,2],[1477,2],[1478,2],[1479,2],[[1480,1487],3],[[1488,1514],2],[[1515,1518],3],[1519,2],[[1520,1524],2],[[1525,1535],3],[[1536,1539],3],[1540,3],[1541,3],[[1542,1546],2],[1547,2],[1548,2],[[1549,1551],2],[[1552,1557],2],[[1558,1562],2],[1563,2],[1564,3],[1565,2],[1566,2],[1567,2],[1568,2],[[1569,1594],2],[[1595,1599],2],[1600,2],[[1601,1618],2],[[1619,1621],2],[[1622,1624],2],[[1625,1630],2],[1631,2],[[1632,1641],2],[[1642,1645],2],[[1646,1647],2],[[1648,1652],2],[1653,1,"\u0627\u0674"],[1654,1,"\u0648\u0674"],[1655,1,"\u06C7\u0674"],[1656,1,"\u064A\u0674"],[[1657,1719],2],[[1720,1721],2],[[1722,1726],2],[1727,2],[[1728,1742],2],[1743,2],[[1744,1747],2],[1748,2],[[1749,1756],2],[1757,3],[1758,2],[[1759,1768],2],[1769,2],[[1770,1773],2],[[1774,1775],2],[[1776,1785],2],[[1786,1790],2],[1791,2],[[1792,1805],2],[1806,3],[1807,3],[[1808,1836],2],[[1837,1839],2],[[1840,1866],2],[[1867,1868],3],[[1869,1871],2],[[1872,1901],2],[[1902,1919],2],[[1920,1968],2],[1969,2],[[1970,1983],3],[[1984,2037],2],[[2038,2042],2],[[2043,2044],3],[2045,2],[[2046,2047],2],[[2048,2093],2],[[2094,2095],3],[[2096,2110],2],[2111,3],[[2112,2139],2],[[2140,2141],3],[2142,2],[2143,3],[[2144,2154],2],[[2155,2159],3],[[2160,2183],2],[2184,2],[[2185,2190],2],[2191,3],[[2192,2193],3],[[2194,2198],3],[2199,2],[[2200,2207],2],[2208,2],[2209,2],[[2210,2220],2],[[2221,2226],2],[[2227,2228],2],[2229,2],[[2230,2237],2],[[2238,2247],2],[[2248,2258],2],[2259,2],[[2260,2273],2],[2274,3],[2275,2],[[2276,2302],2],[2303,2],[2304,2],[[2305,2307],2],[2308,2],[[2309,2361],2],[[2362,2363],2],[[2364,2381],2],[2382,2],[2383,2],[[2384,2388],2],[2389,2],[[2390,2391],2],[2392,1,"\u0915\u093C"],[2393,1,"\u0916\u093C"],[2394,1,"\u0917\u093C"],[2395,1,"\u091C\u093C"],[2396,1,"\u0921\u093C"],[2397,1,"\u0922\u093C"],[2398,1,"\u092B\u093C"],[2399,1,"\u092F\u093C"],[[2400,2403],2],[[2404,2405],2],[[2406,2415],2],[2416,2],[[2417,2418],2],[[2419,2423],2],[2424,2],[[2425,2426],2],[[2427,2428],2],[2429,2],[[2430,2431],2],[2432,2],[[2433,2435],2],[2436,3],[[2437,2444],2],[[2445,2446],3],[[2447,2448],2],[[2449,2450],3],[[2451,2472],2],[2473,3],[[2474,2480],2],[2481,3],[2482,2],[[2483,2485],3],[[2486,2489],2],[[2490,2491],3],[2492,2],[2493,2],[[2494,2500],2],[[2501,2502],3],[[2503,2504],2],[[2505,2506],3],[[2507,2509],2],[2510,2],[[2511,2518],3],[2519,2],[[2520,2523],3],[2524,1,"\u09A1\u09BC"],[2525,1,"\u09A2\u09BC"],[2526,3],[2527,1,"\u09AF\u09BC"],[[2528,2531],2],[[2532,2533],3],[[2534,2545],2],[[2546,2554],2],[2555,2],[2556,2],[2557,2],[2558,2],[[2559,2560],3],[2561,2],[2562,2],[2563,2],[2564,3],[[2565,2570],2],[[2571,2574],3],[[2575,2576],2],[[2577,2578],3],[[2579,2600],2],[2601,3],[[2602,2608],2],[2609,3],[2610,2],[2611,1,"\u0A32\u0A3C"],[2612,3],[2613,2],[2614,1,"\u0A38\u0A3C"],[2615,3],[[2616,2617],2],[[2618,2619],3],[2620,2],[2621,3],[[2622,2626],2],[[2627,2630],3],[[2631,2632],2],[[2633,2634],3],[[2635,2637],2],[[2638,2640],3],[2641,2],[[2642,2648],3],[2649,1,"\u0A16\u0A3C"],[2650,1,"\u0A17\u0A3C"],[2651,1,"\u0A1C\u0A3C"],[2652,2],[2653,3],[2654,1,"\u0A2B\u0A3C"],[[2655,2661],3],[[2662,2676],2],[2677,2],[2678,2],[[2679,2688],3],[[2689,2691],2],[2692,3],[[2693,2699],2],[2700,2],[2701,2],[2702,3],[[2703,2705],2],[2706,3],[[2707,2728],2],[2729,3],[[2730,2736],2],[2737,3],[[2738,2739],2],[2740,3],[[2741,2745],2],[[2746,2747],3],[[2748,2757],2],[2758,3],[[2759,2761],2],[2762,3],[[2763,2765],2],[[2766,2767],3],[2768,2],[[2769,2783],3],[2784,2],[[2785,2787],2],[[2788,2789],3],[[2790,2799],2],[2800,2],[2801,2],[[2802,2808],3],[2809,2],[[2810,2815],2],[2816,3],[[2817,2819],2],[2820,3],[[2821,2828],2],[[2829,2830],3],[[2831,2832],2],[[2833,2834],3],[[2835,2856],2],[2857,3],[[2858,2864],2],[2865,3],[[2866,2867],2],[2868,3],[2869,2],[[2870,2873],2],[[2874,2875],3],[[2876,2883],2],[2884,2],[[2885,2886],3],[[2887,2888],2],[[2889,2890],3],[[2891,2893],2],[[2894,2900],3],[2901,2],[[2902,2903],2],[[2904,2907],3],[2908,1,"\u0B21\u0B3C"],[2909,1,"\u0B22\u0B3C"],[2910,3],[[2911,2913],2],[[2914,2915],2],[[2916,2917],3],[[2918,2927],2],[2928,2],[2929,2],[[2930,2935],2],[[2936,2945],3],[[2946,2947],2],[2948,3],[[2949,2954],2],[[2955,2957],3],[[2958,2960],2],[2961,3],[[2962,2965],2],[[2966,2968],3],[[2969,2970],2],[2971,3],[2972,2],[2973,3],[[2974,2975],2],[[2976,2978],3],[[2979,2980],2],[[2981,2983],3],[[2984,2986],2],[[2987,2989],3],[[2990,2997],2],[2998,2],[[2999,3001],2],[[3002,3005],3],[[3006,3010],2],[[3011,3013],3],[[3014,3016],2],[3017,3],[[3018,3021],2],[[3022,3023],3],[3024,2],[[3025,3030],3],[3031,2],[[3032,3045],3],[3046,2],[[3047,3055],2],[[3056,3058],2],[[3059,3066],2],[[3067,3071],3],[3072,2],[[3073,3075],2],[3076,2],[[3077,3084],2],[3085,3],[[3086,3088],2],[3089,3],[[3090,3112],2],[3113,3],[[3114,3123],2],[3124,2],[[3125,3129],2],[[3130,3131],3],[3132,2],[3133,2],[[3134,3140],2],[3141,3],[[3142,3144],2],[3145,3],[[3146,3149],2],[[3150,3156],3],[[3157,3158],2],[3159,3],[[3160,3161],2],[3162,2],[[3163,3164],3],[3165,2],[[3166,3167],3],[[3168,3169],2],[[3170,3171],2],[[3172,3173],3],[[3174,3183],2],[[3184,3190],3],[3191,2],[[3192,3199],2],[3200,2],[3201,2],[[3202,3203],2],[3204,2],[[3205,3212],2],[3213,3],[[3214,3216],2],[3217,3],[[3218,3240],2],[3241,3],[[3242,3251],2],[3252,3],[[3253,3257],2],[[3258,3259],3],[[3260,3261],2],[[3262,3268],2],[3269,3],[[3270,3272],2],[3273,3],[[3274,3277],2],[[3278,3284],3],[[3285,3286],2],[[3287,3292],3],[3293,2],[3294,2],[3295,3],[[3296,3297],2],[[3298,3299],2],[[3300,3301],3],[[3302,3311],2],[3312,3],[[3313,3314],2],[3315,2],[[3316,3327],3],[3328,2],[3329,2],[[3330,3331],2],[3332,2],[[3333,3340],2],[3341,3],[[3342,3344],2],[3345,3],[[3346,3368],2],[3369,2],[[3370,3385],2],[3386,2],[[3387,3388],2],[3389,2],[[3390,3395],2],[3396,2],[3397,3],[[3398,3400],2],[3401,3],[[3402,3405],2],[3406,2],[3407,2],[[3408,3411],3],[[3412,3414],2],[3415,2],[[3416,3422],2],[3423,2],[[3424,3425],2],[[3426,3427],2],[[3428,3429],3],[[3430,3439],2],[[3440,3445],2],[[3446,3448],2],[3449,2],[[3450,3455],2],[3456,3],[3457,2],[[3458,3459],2],[3460,3],[[3461,3478],2],[[3479,3481],3],[[3482,3505],2],[3506,3],[[3507,3515],2],[3516,3],[3517,2],[[3518,3519],3],[[3520,3526],2],[[3527,3529],3],[3530,2],[[3531,3534],3],[[3535,3540],2],[3541,3],[3542,2],[3543,3],[[3544,3551],2],[[3552,3557],3],[[3558,3567],2],[[3568,3569],3],[[3570,3571],2],[3572,2],[[3573,3584],3],[[3585,3634],2],[3635,1,"\u0E4D\u0E32"],[[3636,3642],2],[[3643,3646],3],[3647,2],[[3648,3662],2],[3663,2],[[3664,3673],2],[[3674,3675],2],[[3676,3712],3],[[3713,3714],2],[3715,3],[3716,2],[3717,3],[3718,2],[[3719,3720],2],[3721,2],[3722,2],[3723,3],[3724,2],[3725,2],[[3726,3731],2],[[3732,3735],2],[3736,2],[[3737,3743],2],[3744,2],[[3745,3747],2],[3748,3],[3749,2],[3750,3],[3751,2],[[3752,3753],2],[[3754,3755],2],[3756,2],[[3757,3762],2],[3763,1,"\u0ECD\u0EB2"],[[3764,3769],2],[3770,2],[[3771,3773],2],[[3774,3775],3],[[3776,3780],2],[3781,3],[3782,2],[3783,3],[[3784,3789],2],[3790,2],[3791,3],[[3792,3801],2],[[3802,3803],3],[3804,1,"\u0EAB\u0E99"],[3805,1,"\u0EAB\u0EA1"],[[3806,3807],2],[[3808,3839],3],[3840,2],[[3841,3850],2],[3851,2],[3852,1,"\u0F0B"],[[3853,3863],2],[[3864,3865],2],[[3866,3871],2],[[3872,3881],2],[[3882,3892],2],[3893,2],[3894,2],[3895,2],[3896,2],[3897,2],[[3898,3901],2],[[3902,3906],2],[3907,1,"\u0F42\u0FB7"],[[3908,3911],2],[3912,3],[[3913,3916],2],[3917,1,"\u0F4C\u0FB7"],[[3918,3921],2],[3922,1,"\u0F51\u0FB7"],[[3923,3926],2],[3927,1,"\u0F56\u0FB7"],[[3928,3931],2],[3932,1,"\u0F5B\u0FB7"],[[3933,3944],2],[3945,1,"\u0F40\u0FB5"],[3946,2],[[3947,3948],2],[[3949,3952],3],[[3953,3954],2],[3955,1,"\u0F71\u0F72"],[3956,2],[3957,1,"\u0F71\u0F74"],[3958,1,"\u0FB2\u0F80"],[3959,1,"\u0FB2\u0F71\u0F80"],[3960,1,"\u0FB3\u0F80"],[3961,1,"\u0FB3\u0F71\u0F80"],[[3962,3968],2],[3969,1,"\u0F71\u0F80"],[[3970,3972],2],[3973,2],[[3974,3979],2],[[3980,3983],2],[[3984,3986],2],[3987,1,"\u0F92\u0FB7"],[[3988,3989],2],[3990,2],[3991,2],[3992,3],[[3993,3996],2],[3997,1,"\u0F9C\u0FB7"],[[3998,4001],2],[4002,1,"\u0FA1\u0FB7"],[[4003,4006],2],[4007,1,"\u0FA6\u0FB7"],[[4008,4011],2],[4012,1,"\u0FAB\u0FB7"],[4013,2],[[4014,4016],2],[[4017,4023],2],[4024,2],[4025,1,"\u0F90\u0FB5"],[[4026,4028],2],[4029,3],[[4030,4037],2],[4038,2],[[4039,4044],2],[4045,3],[4046,2],[4047,2],[[4048,4049],2],[[4050,4052],2],[[4053,4056],2],[[4057,4058],2],[[4059,4095],3],[[4096,4129],2],[4130,2],[[4131,4135],2],[4136,2],[[4137,4138],2],[4139,2],[[4140,4146],2],[[4147,4149],2],[[4150,4153],2],[[4154,4159],2],[[4160,4169],2],[[4170,4175],2],[[4176,4185],2],[[4186,4249],2],[[4250,4253],2],[[4254,4255],2],[4256,1,"\u2D00"],[4257,1,"\u2D01"],[4258,1,"\u2D02"],[4259,1,"\u2D03"],[4260,1,"\u2D04"],[4261,1,"\u2D05"],[4262,1,"\u2D06"],[4263,1,"\u2D07"],[4264,1,"\u2D08"],[4265,1,"\u2D09"],[4266,1,"\u2D0A"],[4267,1,"\u2D0B"],[4268,1,"\u2D0C"],[4269,1,"\u2D0D"],[4270,1,"\u2D0E"],[4271,1,"\u2D0F"],[4272,1,"\u2D10"],[4273,1,"\u2D11"],[4274,1,"\u2D12"],[4275,1,"\u2D13"],[4276,1,"\u2D14"],[4277,1,"\u2D15"],[4278,1,"\u2D16"],[4279,1,"\u2D17"],[4280,1,"\u2D18"],[4281,1,"\u2D19"],[4282,1,"\u2D1A"],[4283,1,"\u2D1B"],[4284,1,"\u2D1C"],[4285,1,"\u2D1D"],[4286,1,"\u2D1E"],[4287,1,"\u2D1F"],[4288,1,"\u2D20"],[4289,1,"\u2D21"],[4290,1,"\u2D22"],[4291,1,"\u2D23"],[4292,1,"\u2D24"],[4293,1,"\u2D25"],[4294,3],[4295,1,"\u2D27"],[[4296,4300],3],[4301,1,"\u2D2D"],[[4302,4303],3],[[4304,4342],2],[[4343,4344],2],[[4345,4346],2],[4347,2],[4348,1,"\u10DC"],[[4349,4351],2],[[4352,4441],2],[[4442,4446],2],[[4447,4448],7],[[4449,4514],2],[[4515,4519],2],[[4520,4601],2],[[4602,4607],2],[[4608,4614],2],[4615,2],[[4616,4678],2],[4679,2],[4680,2],[4681,3],[[4682,4685],2],[[4686,4687],3],[[4688,4694],2],[4695,3],[4696,2],[4697,3],[[4698,4701],2],[[4702,4703],3],[[4704,4742],2],[4743,2],[4744,2],[4745,3],[[4746,4749],2],[[4750,4751],3],[[4752,4782],2],[4783,2],[4784,2],[4785,3],[[4786,4789],2],[[4790,4791],3],[[4792,4798],2],[4799,3],[4800,2],[4801,3],[[4802,4805],2],[[4806,4807],3],[[4808,4814],2],[4815,2],[[4816,4822],2],[4823,3],[[4824,4846],2],[4847,2],[[4848,4878],2],[4879,2],[4880,2],[4881,3],[[4882,4885],2],[[4886,4887],3],[[4888,4894],2],[4895,2],[[4896,4934],2],[4935,2],[[4936,4954],2],[[4955,4956],3],[[4957,4958],2],[4959,2],[4960,2],[[4961,4988],2],[[4989,4991],3],[[4992,5007],2],[[5008,5017],2],[[5018,5023],3],[[5024,5108],2],[5109,2],[[5110,5111],3],[5112,1,"\u13F0"],[5113,1,"\u13F1"],[5114,1,"\u13F2"],[5115,1,"\u13F3"],[5116,1,"\u13F4"],[5117,1,"\u13F5"],[[5118,5119],3],[5120,2],[[5121,5740],2],[[5741,5742],2],[[5743,5750],2],[[5751,5759],2],[5760,3],[[5761,5786],2],[[5787,5788],2],[[5789,5791],3],[[5792,5866],2],[[5867,5872],2],[[5873,5880],2],[[5881,5887],3],[[5888,5900],2],[5901,2],[[5902,5908],2],[5909,2],[[5910,5918],3],[5919,2],[[5920,5940],2],[[5941,5942],2],[[5943,5951],3],[[5952,5971],2],[[5972,5983],3],[[5984,5996],2],[5997,3],[[5998,6e3],2],[6001,3],[[6002,6003],2],[[6004,6015],3],[[6016,6067],2],[[6068,6069],7],[[6070,6099],2],[[6100,6102],2],[6103,2],[[6104,6107],2],[6108,2],[6109,2],[[6110,6111],3],[[6112,6121],2],[[6122,6127],3],[[6128,6137],2],[[6138,6143],3],[[6144,6154],2],[[6155,6158],7],[6159,7],[[6160,6169],2],[[6170,6175],3],[[6176,6263],2],[6264,2],[[6265,6271],3],[[6272,6313],2],[6314,2],[[6315,6319],3],[[6320,6389],2],[[6390,6399],3],[[6400,6428],2],[[6429,6430],2],[6431,3],[[6432,6443],2],[[6444,6447],3],[[6448,6459],2],[[6460,6463],3],[6464,2],[[6465,6467],3],[[6468,6469],2],[[6470,6509],2],[[6510,6511],3],[[6512,6516],2],[[6517,6527],3],[[6528,6569],2],[[6570,6571],2],[[6572,6575],3],[[6576,6601],2],[[6602,6607],3],[[6608,6617],2],[6618,2],[[6619,6621],3],[[6622,6623],2],[[6624,6655],2],[[6656,6683],2],[[6684,6685],3],[[6686,6687],2],[[6688,6750],2],[6751,3],[[6752,6780],2],[[6781,6782],3],[[6783,6793],2],[[6794,6799],3],[[6800,6809],2],[[6810,6815],3],[[6816,6822],2],[6823,2],[[6824,6829],2],[[6830,6831],3],[[6832,6845],2],[6846,2],[[6847,6848],2],[[6849,6862],2],[[6863,6911],3],[[6912,6987],2],[6988,2],[6989,3],[[6990,6991],2],[[6992,7001],2],[[7002,7018],2],[[7019,7027],2],[[7028,7036],2],[[7037,7038],2],[7039,2],[[7040,7082],2],[[7083,7085],2],[[7086,7097],2],[[7098,7103],2],[[7104,7155],2],[[7156,7163],3],[[7164,7167],2],[[7168,7223],2],[[7224,7226],3],[[7227,7231],2],[[7232,7241],2],[[7242,7244],3],[[7245,7293],2],[[7294,7295],2],[7296,1,"\u0432"],[7297,1,"\u0434"],[7298,1,"\u043E"],[7299,1,"\u0441"],[[7300,7301],1,"\u0442"],[7302,1,"\u044A"],[7303,1,"\u0463"],[7304,1,"\uA64B"],[7305,1,"\u1C8A"],[7306,2],[[7307,7311],3],[7312,1,"\u10D0"],[7313,1,"\u10D1"],[7314,1,"\u10D2"],[7315,1,"\u10D3"],[7316,1,"\u10D4"],[7317,1,"\u10D5"],[7318,1,"\u10D6"],[7319,1,"\u10D7"],[7320,1,"\u10D8"],[7321,1,"\u10D9"],[7322,1,"\u10DA"],[7323,1,"\u10DB"],[7324,1,"\u10DC"],[7325,1,"\u10DD"],[7326,1,"\u10DE"],[7327,1,"\u10DF"],[7328,1,"\u10E0"],[7329,1,"\u10E1"],[7330,1,"\u10E2"],[7331,1,"\u10E3"],[7332,1,"\u10E4"],[7333,1,"\u10E5"],[7334,1,"\u10E6"],[7335,1,"\u10E7"],[7336,1,"\u10E8"],[7337,1,"\u10E9"],[7338,1,"\u10EA"],[7339,1,"\u10EB"],[7340,1,"\u10EC"],[7341,1,"\u10ED"],[7342,1,"\u10EE"],[7343,1,"\u10EF"],[7344,1,"\u10F0"],[7345,1,"\u10F1"],[7346,1,"\u10F2"],[7347,1,"\u10F3"],[7348,1,"\u10F4"],[7349,1,"\u10F5"],[7350,1,"\u10F6"],[7351,1,"\u10F7"],[7352,1,"\u10F8"],[7353,1,"\u10F9"],[7354,1,"\u10FA"],[[7355,7356],3],[7357,1,"\u10FD"],[7358,1,"\u10FE"],[7359,1,"\u10FF"],[[7360,7367],2],[[7368,7375],3],[[7376,7378],2],[7379,2],[[7380,7410],2],[[7411,7414],2],[7415,2],[[7416,7417],2],[7418,2],[[7419,7423],3],[[7424,7467],2],[7468,1,"a"],[7469,1,"\xE6"],[7470,1,"b"],[7471,2],[7472,1,"d"],[7473,1,"e"],[7474,1,"\u01DD"],[7475,1,"g"],[7476,1,"h"],[7477,1,"i"],[7478,1,"j"],[7479,1,"k"],[7480,1,"l"],[7481,1,"m"],[7482,1,"n"],[7483,2],[7484,1,"o"],[7485,1,"\u0223"],[7486,1,"p"],[7487,1,"r"],[7488,1,"t"],[7489,1,"u"],[7490,1,"w"],[7491,1,"a"],[7492,1,"\u0250"],[7493,1,"\u0251"],[7494,1,"\u1D02"],[7495,1,"b"],[7496,1,"d"],[7497,1,"e"],[7498,1,"\u0259"],[7499,1,"\u025B"],[7500,1,"\u025C"],[7501,1,"g"],[7502,2],[7503,1,"k"],[7504,1,"m"],[7505,1,"\u014B"],[7506,1,"o"],[7507,1,"\u0254"],[7508,1,"\u1D16"],[7509,1,"\u1D17"],[7510,1,"p"],[7511,1,"t"],[7512,1,"u"],[7513,1,"\u1D1D"],[7514,1,"\u026F"],[7515,1,"v"],[7516,1,"\u1D25"],[7517,1,"\u03B2"],[7518,1,"\u03B3"],[7519,1,"\u03B4"],[7520,1,"\u03C6"],[7521,1,"\u03C7"],[7522,1,"i"],[7523,1,"r"],[7524,1,"u"],[7525,1,"v"],[7526,1,"\u03B2"],[7527,1,"\u03B3"],[7528,1,"\u03C1"],[7529,1,"\u03C6"],[7530,1,"\u03C7"],[7531,2],[[7532,7543],2],[7544,1,"\u043D"],[[7545,7578],2],[7579,1,"\u0252"],[7580,1,"c"],[7581,1,"\u0255"],[7582,1,"\xF0"],[7583,1,"\u025C"],[7584,1,"f"],[7585,1,"\u025F"],[7586,1,"\u0261"],[7587,1,"\u0265"],[7588,1,"\u0268"],[7589,1,"\u0269"],[7590,1,"\u026A"],[7591,1,"\u1D7B"],[7592,1,"\u029D"],[7593,1,"\u026D"],[7594,1,"\u1D85"],[7595,1,"\u029F"],[7596,1,"\u0271"],[7597,1,"\u0270"],[7598,1,"\u0272"],[7599,1,"\u0273"],[7600,1,"\u0274"],[7601,1,"\u0275"],[7602,1,"\u0278"],[7603,1,"\u0282"],[7604,1,"\u0283"],[7605,1,"\u01AB"],[7606,1,"\u0289"],[7607,1,"\u028A"],[7608,1,"\u1D1C"],[7609,1,"\u028B"],[7610,1,"\u028C"],[7611,1,"z"],[7612,1,"\u0290"],[7613,1,"\u0291"],[7614,1,"\u0292"],[7615,1,"\u03B8"],[[7616,7619],2],[[7620,7626],2],[[7627,7654],2],[[7655,7669],2],[[7670,7673],2],[7674,2],[7675,2],[7676,2],[7677,2],[[7678,7679],2],[7680,1,"\u1E01"],[7681,2],[7682,1,"\u1E03"],[7683,2],[7684,1,"\u1E05"],[7685,2],[7686,1,"\u1E07"],[7687,2],[7688,1,"\u1E09"],[7689,2],[7690,1,"\u1E0B"],[7691,2],[7692,1,"\u1E0D"],[7693,2],[7694,1,"\u1E0F"],[7695,2],[7696,1,"\u1E11"],[7697,2],[7698,1,"\u1E13"],[7699,2],[7700,1,"\u1E15"],[7701,2],[7702,1,"\u1E17"],[7703,2],[7704,1,"\u1E19"],[7705,2],[7706,1,"\u1E1B"],[7707,2],[7708,1,"\u1E1D"],[7709,2],[7710,1,"\u1E1F"],[7711,2],[7712,1,"\u1E21"],[7713,2],[7714,1,"\u1E23"],[7715,2],[7716,1,"\u1E25"],[7717,2],[7718,1,"\u1E27"],[7719,2],[7720,1,"\u1E29"],[7721,2],[7722,1,"\u1E2B"],[7723,2],[7724,1,"\u1E2D"],[7725,2],[7726,1,"\u1E2F"],[7727,2],[7728,1,"\u1E31"],[7729,2],[7730,1,"\u1E33"],[7731,2],[7732,1,"\u1E35"],[7733,2],[7734,1,"\u1E37"],[7735,2],[7736,1,"\u1E39"],[7737,2],[7738,1,"\u1E3B"],[7739,2],[7740,1,"\u1E3D"],[7741,2],[7742,1,"\u1E3F"],[7743,2],[7744,1,"\u1E41"],[7745,2],[7746,1,"\u1E43"],[7747,2],[7748,1,"\u1E45"],[7749,2],[7750,1,"\u1E47"],[7751,2],[7752,1,"\u1E49"],[7753,2],[7754,1,"\u1E4B"],[7755,2],[7756,1,"\u1E4D"],[7757,2],[7758,1,"\u1E4F"],[7759,2],[7760,1,"\u1E51"],[7761,2],[7762,1,"\u1E53"],[7763,2],[7764,1,"\u1E55"],[7765,2],[7766,1,"\u1E57"],[7767,2],[7768,1,"\u1E59"],[7769,2],[7770,1,"\u1E5B"],[7771,2],[7772,1,"\u1E5D"],[7773,2],[7774,1,"\u1E5F"],[7775,2],[7776,1,"\u1E61"],[7777,2],[7778,1,"\u1E63"],[7779,2],[7780,1,"\u1E65"],[7781,2],[7782,1,"\u1E67"],[7783,2],[7784,1,"\u1E69"],[7785,2],[7786,1,"\u1E6B"],[7787,2],[7788,1,"\u1E6D"],[7789,2],[7790,1,"\u1E6F"],[7791,2],[7792,1,"\u1E71"],[7793,2],[7794,1,"\u1E73"],[7795,2],[7796,1,"\u1E75"],[7797,2],[7798,1,"\u1E77"],[7799,2],[7800,1,"\u1E79"],[7801,2],[7802,1,"\u1E7B"],[7803,2],[7804,1,"\u1E7D"],[7805,2],[7806,1,"\u1E7F"],[7807,2],[7808,1,"\u1E81"],[7809,2],[7810,1,"\u1E83"],[7811,2],[7812,1,"\u1E85"],[7813,2],[7814,1,"\u1E87"],[7815,2],[7816,1,"\u1E89"],[7817,2],[7818,1,"\u1E8B"],[7819,2],[7820,1,"\u1E8D"],[7821,2],[7822,1,"\u1E8F"],[7823,2],[7824,1,"\u1E91"],[7825,2],[7826,1,"\u1E93"],[7827,2],[7828,1,"\u1E95"],[[7829,7833],2],[7834,1,"a\u02BE"],[7835,1,"\u1E61"],[[7836,7837],2],[7838,1,"\xDF"],[7839,2],[7840,1,"\u1EA1"],[7841,2],[7842,1,"\u1EA3"],[7843,2],[7844,1,"\u1EA5"],[7845,2],[7846,1,"\u1EA7"],[7847,2],[7848,1,"\u1EA9"],[7849,2],[7850,1,"\u1EAB"],[7851,2],[7852,1,"\u1EAD"],[7853,2],[7854,1,"\u1EAF"],[7855,2],[7856,1,"\u1EB1"],[7857,2],[7858,1,"\u1EB3"],[7859,2],[7860,1,"\u1EB5"],[7861,2],[7862,1,"\u1EB7"],[7863,2],[7864,1,"\u1EB9"],[7865,2],[7866,1,"\u1EBB"],[7867,2],[7868,1,"\u1EBD"],[7869,2],[7870,1,"\u1EBF"],[7871,2],[7872,1,"\u1EC1"],[7873,2],[7874,1,"\u1EC3"],[7875,2],[7876,1,"\u1EC5"],[7877,2],[7878,1,"\u1EC7"],[7879,2],[7880,1,"\u1EC9"],[7881,2],[7882,1,"\u1ECB"],[7883,2],[7884,1,"\u1ECD"],[7885,2],[7886,1,"\u1ECF"],[7887,2],[7888,1,"\u1ED1"],[7889,2],[7890,1,"\u1ED3"],[7891,2],[7892,1,"\u1ED5"],[7893,2],[7894,1,"\u1ED7"],[7895,2],[7896,1,"\u1ED9"],[7897,2],[7898,1,"\u1EDB"],[7899,2],[7900,1,"\u1EDD"],[7901,2],[7902,1,"\u1EDF"],[7903,2],[7904,1,"\u1EE1"],[7905,2],[7906,1,"\u1EE3"],[7907,2],[7908,1,"\u1EE5"],[7909,2],[7910,1,"\u1EE7"],[7911,2],[7912,1,"\u1EE9"],[7913,2],[7914,1,"\u1EEB"],[7915,2],[7916,1,"\u1EED"],[7917,2],[7918,1,"\u1EEF"],[7919,2],[7920,1,"\u1EF1"],[7921,2],[7922,1,"\u1EF3"],[7923,2],[7924,1,"\u1EF5"],[7925,2],[7926,1,"\u1EF7"],[7927,2],[7928,1,"\u1EF9"],[7929,2],[7930,1,"\u1EFB"],[7931,2],[7932,1,"\u1EFD"],[7933,2],[7934,1,"\u1EFF"],[7935,2],[[7936,7943],2],[7944,1,"\u1F00"],[7945,1,"\u1F01"],[7946,1,"\u1F02"],[7947,1,"\u1F03"],[7948,1,"\u1F04"],[7949,1,"\u1F05"],[7950,1,"\u1F06"],[7951,1,"\u1F07"],[[7952,7957],2],[[7958,7959],3],[7960,1,"\u1F10"],[7961,1,"\u1F11"],[7962,1,"\u1F12"],[7963,1,"\u1F13"],[7964,1,"\u1F14"],[7965,1,"\u1F15"],[[7966,7967],3],[[7968,7975],2],[7976,1,"\u1F20"],[7977,1,"\u1F21"],[7978,1,"\u1F22"],[7979,1,"\u1F23"],[7980,1,"\u1F24"],[7981,1,"\u1F25"],[7982,1,"\u1F26"],[7983,1,"\u1F27"],[[7984,7991],2],[7992,1,"\u1F30"],[7993,1,"\u1F31"],[7994,1,"\u1F32"],[7995,1,"\u1F33"],[7996,1,"\u1F34"],[7997,1,"\u1F35"],[7998,1,"\u1F36"],[7999,1,"\u1F37"],[[8e3,8005],2],[[8006,8007],3],[8008,1,"\u1F40"],[8009,1,"\u1F41"],[8010,1,"\u1F42"],[8011,1,"\u1F43"],[8012,1,"\u1F44"],[8013,1,"\u1F45"],[[8014,8015],3],[[8016,8023],2],[8024,3],[8025,1,"\u1F51"],[8026,3],[8027,1,"\u1F53"],[8028,3],[8029,1,"\u1F55"],[8030,3],[8031,1,"\u1F57"],[[8032,8039],2],[8040,1,"\u1F60"],[8041,1,"\u1F61"],[8042,1,"\u1F62"],[8043,1,"\u1F63"],[8044,1,"\u1F64"],[8045,1,"\u1F65"],[8046,1,"\u1F66"],[8047,1,"\u1F67"],[8048,2],[8049,1,"\u03AC"],[8050,2],[8051,1,"\u03AD"],[8052,2],[8053,1,"\u03AE"],[8054,2],[8055,1,"\u03AF"],[8056,2],[8057,1,"\u03CC"],[8058,2],[8059,1,"\u03CD"],[8060,2],[8061,1,"\u03CE"],[[8062,8063],3],[8064,1,"\u1F00\u03B9"],[8065,1,"\u1F01\u03B9"],[8066,1,"\u1F02\u03B9"],[8067,1,"\u1F03\u03B9"],[8068,1,"\u1F04\u03B9"],[8069,1,"\u1F05\u03B9"],[8070,1,"\u1F06\u03B9"],[8071,1,"\u1F07\u03B9"],[8072,1,"\u1F00\u03B9"],[8073,1,"\u1F01\u03B9"],[8074,1,"\u1F02\u03B9"],[8075,1,"\u1F03\u03B9"],[8076,1,"\u1F04\u03B9"],[8077,1,"\u1F05\u03B9"],[8078,1,"\u1F06\u03B9"],[8079,1,"\u1F07\u03B9"],[8080,1,"\u1F20\u03B9"],[8081,1,"\u1F21\u03B9"],[8082,1,"\u1F22\u03B9"],[8083,1,"\u1F23\u03B9"],[8084,1,"\u1F24\u03B9"],[8085,1,"\u1F25\u03B9"],[8086,1,"\u1F26\u03B9"],[8087,1,"\u1F27\u03B9"],[8088,1,"\u1F20\u03B9"],[8089,1,"\u1F21\u03B9"],[8090,1,"\u1F22\u03B9"],[8091,1,"\u1F23\u03B9"],[8092,1,"\u1F24\u03B9"],[8093,1,"\u1F25\u03B9"],[8094,1,"\u1F26\u03B9"],[8095,1,"\u1F27\u03B9"],[8096,1,"\u1F60\u03B9"],[8097,1,"\u1F61\u03B9"],[8098,1,"\u1F62\u03B9"],[8099,1,"\u1F63\u03B9"],[8100,1,"\u1F64\u03B9"],[8101,1,"\u1F65\u03B9"],[8102,1,"\u1F66\u03B9"],[8103,1,"\u1F67\u03B9"],[8104,1,"\u1F60\u03B9"],[8105,1,"\u1F61\u03B9"],[8106,1,"\u1F62\u03B9"],[8107,1,"\u1F63\u03B9"],[8108,1,"\u1F64\u03B9"],[8109,1,"\u1F65\u03B9"],[8110,1,"\u1F66\u03B9"],[8111,1,"\u1F67\u03B9"],[[8112,8113],2],[8114,1,"\u1F70\u03B9"],[8115,1,"\u03B1\u03B9"],[8116,1,"\u03AC\u03B9"],[8117,3],[8118,2],[8119,1,"\u1FB6\u03B9"],[8120,1,"\u1FB0"],[8121,1,"\u1FB1"],[8122,1,"\u1F70"],[8123,1,"\u03AC"],[8124,1,"\u03B1\u03B9"],[8125,1," \u0313"],[8126,1,"\u03B9"],[8127,1," \u0313"],[8128,1," \u0342"],[8129,1," \u0308\u0342"],[8130,1,"\u1F74\u03B9"],[8131,1,"\u03B7\u03B9"],[8132,1,"\u03AE\u03B9"],[8133,3],[8134,2],[8135,1,"\u1FC6\u03B9"],[8136,1,"\u1F72"],[8137,1,"\u03AD"],[8138,1,"\u1F74"],[8139,1,"\u03AE"],[8140,1,"\u03B7\u03B9"],[8141,1," \u0313\u0300"],[8142,1," \u0313\u0301"],[8143,1," \u0313\u0342"],[[8144,8146],2],[8147,1,"\u0390"],[[8148,8149],3],[[8150,8151],2],[8152,1,"\u1FD0"],[8153,1,"\u1FD1"],[8154,1,"\u1F76"],[8155,1,"\u03AF"],[8156,3],[8157,1," \u0314\u0300"],[8158,1," \u0314\u0301"],[8159,1," \u0314\u0342"],[[8160,8162],2],[8163,1,"\u03B0"],[[8164,8167],2],[8168,1,"\u1FE0"],[8169,1,"\u1FE1"],[8170,1,"\u1F7A"],[8171,1,"\u03CD"],[8172,1,"\u1FE5"],[8173,1," \u0308\u0300"],[8174,1," \u0308\u0301"],[8175,1,"`"],[[8176,8177],3],[8178,1,"\u1F7C\u03B9"],[8179,1,"\u03C9\u03B9"],[8180,1,"\u03CE\u03B9"],[8181,3],[8182,2],[8183,1,"\u1FF6\u03B9"],[8184,1,"\u1F78"],[8185,1,"\u03CC"],[8186,1,"\u1F7C"],[8187,1,"\u03CE"],[8188,1,"\u03C9\u03B9"],[8189,1," \u0301"],[8190,1," \u0314"],[8191,3],[[8192,8202],1," "],[8203,7],[[8204,8205],6,""],[[8206,8207],3],[8208,2],[8209,1,"\u2010"],[[8210,8214],2],[8215,1," \u0333"],[[8216,8227],2],[[8228,8230],3],[8231,2],[[8232,8238],3],[8239,1," "],[[8240,8242],2],[8243,1,"\u2032\u2032"],[8244,1,"\u2032\u2032\u2032"],[8245,2],[8246,1,"\u2035\u2035"],[8247,1,"\u2035\u2035\u2035"],[[8248,8251],2],[8252,1,"!!"],[8253,2],[8254,1," \u0305"],[[8255,8262],2],[8263,1,"??"],[8264,1,"?!"],[8265,1,"!?"],[[8266,8269],2],[[8270,8274],2],[[8275,8276],2],[[8277,8278],2],[8279,1,"\u2032\u2032\u2032\u2032"],[[8280,8286],2],[8287,1," "],[[8288,8291],7],[8292,7],[8293,3],[[8294,8297],3],[[8298,8303],7],[8304,1,"0"],[8305,1,"i"],[[8306,8307],3],[8308,1,"4"],[8309,1,"5"],[8310,1,"6"],[8311,1,"7"],[8312,1,"8"],[8313,1,"9"],[8314,1,"+"],[8315,1,"\u2212"],[8316,1,"="],[8317,1,"("],[8318,1,")"],[8319,1,"n"],[8320,1,"0"],[8321,1,"1"],[8322,1,"2"],[8323,1,"3"],[8324,1,"4"],[8325,1,"5"],[8326,1,"6"],[8327,1,"7"],[8328,1,"8"],[8329,1,"9"],[8330,1,"+"],[8331,1,"\u2212"],[8332,1,"="],[8333,1,"("],[8334,1,")"],[8335,3],[8336,1,"a"],[8337,1,"e"],[8338,1,"o"],[8339,1,"x"],[8340,1,"\u0259"],[8341,1,"h"],[8342,1,"k"],[8343,1,"l"],[8344,1,"m"],[8345,1,"n"],[8346,1,"p"],[8347,1,"s"],[8348,1,"t"],[[8349,8351],3],[[8352,8359],2],[8360,1,"rs"],[[8361,8362],2],[8363,2],[8364,2],[[8365,8367],2],[[8368,8369],2],[[8370,8373],2],[[8374,8376],2],[8377,2],[8378,2],[[8379,8381],2],[8382,2],[8383,2],[8384,2],[[8385,8399],3],[[8400,8417],2],[[8418,8419],2],[[8420,8426],2],[8427,2],[[8428,8431],2],[8432,2],[[8433,8447],3],[8448,1,"a/c"],[8449,1,"a/s"],[8450,1,"c"],[8451,1,"\xB0c"],[8452,2],[8453,1,"c/o"],[8454,1,"c/u"],[8455,1,"\u025B"],[8456,2],[8457,1,"\xB0f"],[8458,1,"g"],[[8459,8462],1,"h"],[8463,1,"\u0127"],[[8464,8465],1,"i"],[[8466,8467],1,"l"],[8468,2],[8469,1,"n"],[8470,1,"no"],[[8471,8472],2],[8473,1,"p"],[8474,1,"q"],[[8475,8477],1,"r"],[[8478,8479],2],[8480,1,"sm"],[8481,1,"tel"],[8482,1,"tm"],[8483,2],[8484,1,"z"],[8485,2],[8486,1,"\u03C9"],[8487,2],[8488,1,"z"],[8489,2],[8490,1,"k"],[8491,1,"\xE5"],[8492,1,"b"],[8493,1,"c"],[8494,2],[[8495,8496],1,"e"],[8497,1,"f"],[8498,1,"\u214E"],[8499,1,"m"],[8500,1,"o"],[8501,1,"\u05D0"],[8502,1,"\u05D1"],[8503,1,"\u05D2"],[8504,1,"\u05D3"],[8505,1,"i"],[8506,2],[8507,1,"fax"],[8508,1,"\u03C0"],[[8509,8510],1,"\u03B3"],[8511,1,"\u03C0"],[8512,1,"\u2211"],[[8513,8516],2],[[8517,8518],1,"d"],[8519,1,"e"],[8520,1,"i"],[8521,1,"j"],[[8522,8523],2],[8524,2],[8525,2],[8526,2],[8527,2],[8528,1,"1\u20447"],[8529,1,"1\u20449"],[8530,1,"1\u204410"],[8531,1,"1\u20443"],[8532,1,"2\u20443"],[8533,1,"1\u20445"],[8534,1,"2\u20445"],[8535,1,"3\u20445"],[8536,1,"4\u20445"],[8537,1,"1\u20446"],[8538,1,"5\u20446"],[8539,1,"1\u20448"],[8540,1,"3\u20448"],[8541,1,"5\u20448"],[8542,1,"7\u20448"],[8543,1,"1\u2044"],[8544,1,"i"],[8545,1,"ii"],[8546,1,"iii"],[8547,1,"iv"],[8548,1,"v"],[8549,1,"vi"],[8550,1,"vii"],[8551,1,"viii"],[8552,1,"ix"],[8553,1,"x"],[8554,1,"xi"],[8555,1,"xii"],[8556,1,"l"],[8557,1,"c"],[8558,1,"d"],[8559,1,"m"],[8560,1,"i"],[8561,1,"ii"],[8562,1,"iii"],[8563,1,"iv"],[8564,1,"v"],[8565,1,"vi"],[8566,1,"vii"],[8567,1,"viii"],[8568,1,"ix"],[8569,1,"x"],[8570,1,"xi"],[8571,1,"xii"],[8572,1,"l"],[8573,1,"c"],[8574,1,"d"],[8575,1,"m"],[[8576,8578],2],[8579,1,"\u2184"],[8580,2],[[8581,8584],2],[8585,1,"0\u20443"],[[8586,8587],2],[[8588,8591],3],[[8592,8682],2],[[8683,8691],2],[[8692,8703],2],[[8704,8747],2],[8748,1,"\u222B\u222B"],[8749,1,"\u222B\u222B\u222B"],[8750,2],[8751,1,"\u222E\u222E"],[8752,1,"\u222E\u222E\u222E"],[[8753,8945],2],[[8946,8959],2],[8960,2],[8961,2],[[8962,9e3],2],[9001,1,"\u3008"],[9002,1,"\u3009"],[[9003,9082],2],[9083,2],[9084,2],[[9085,9114],2],[[9115,9166],2],[[9167,9168],2],[[9169,9179],2],[[9180,9191],2],[9192,2],[[9193,9203],2],[[9204,9210],2],[[9211,9214],2],[9215,2],[[9216,9252],2],[[9253,9254],2],[[9255,9257],2],[[9258,9279],3],[[9280,9290],2],[[9291,9311],3],[9312,1,"1"],[9313,1,"2"],[9314,1,"3"],[9315,1,"4"],[9316,1,"5"],[9317,1,"6"],[9318,1,"7"],[9319,1,"8"],[9320,1,"9"],[9321,1,"10"],[9322,1,"11"],[9323,1,"12"],[9324,1,"13"],[9325,1,"14"],[9326,1,"15"],[9327,1,"16"],[9328,1,"17"],[9329,1,"18"],[9330,1,"19"],[9331,1,"20"],[9332,1,"(1)"],[9333,1,"(2)"],[9334,1,"(3)"],[9335,1,"(4)"],[9336,1,"(5)"],[9337,1,"(6)"],[9338,1,"(7)"],[9339,1,"(8)"],[9340,1,"(9)"],[9341,1,"(10)"],[9342,1,"(11)"],[9343,1,"(12)"],[9344,1,"(13)"],[9345,1,"(14)"],[9346,1,"(15)"],[9347,1,"(16)"],[9348,1,"(17)"],[9349,1,"(18)"],[9350,1,"(19)"],[9351,1,"(20)"],[[9352,9371],3],[9372,1,"(a)"],[9373,1,"(b)"],[9374,1,"(c)"],[9375,1,"(d)"],[9376,1,"(e)"],[9377,1,"(f)"],[9378,1,"(g)"],[9379,1,"(h)"],[9380,1,"(i)"],[9381,1,"(j)"],[9382,1,"(k)"],[9383,1,"(l)"],[9384,1,"(m)"],[9385,1,"(n)"],[9386,1,"(o)"],[9387,1,"(p)"],[9388,1,"(q)"],[9389,1,"(r)"],[9390,1,"(s)"],[9391,1,"(t)"],[9392,1,"(u)"],[9393,1,"(v)"],[9394,1,"(w)"],[9395,1,"(x)"],[9396,1,"(y)"],[9397,1,"(z)"],[9398,1,"a"],[9399,1,"b"],[9400,1,"c"],[9401,1,"d"],[9402,1,"e"],[9403,1,"f"],[9404,1,"g"],[9405,1,"h"],[9406,1,"i"],[9407,1,"j"],[9408,1,"k"],[9409,1,"l"],[9410,1,"m"],[9411,1,"n"],[9412,1,"o"],[9413,1,"p"],[9414,1,"q"],[9415,1,"r"],[9416,1,"s"],[9417,1,"t"],[9418,1,"u"],[9419,1,"v"],[9420,1,"w"],[9421,1,"x"],[9422,1,"y"],[9423,1,"z"],[9424,1,"a"],[9425,1,"b"],[9426,1,"c"],[9427,1,"d"],[9428,1,"e"],[9429,1,"f"],[9430,1,"g"],[9431,1,"h"],[9432,1,"i"],[9433,1,"j"],[9434,1,"k"],[9435,1,"l"],[9436,1,"m"],[9437,1,"n"],[9438,1,"o"],[9439,1,"p"],[9440,1,"q"],[9441,1,"r"],[9442,1,"s"],[9443,1,"t"],[9444,1,"u"],[9445,1,"v"],[9446,1,"w"],[9447,1,"x"],[9448,1,"y"],[9449,1,"z"],[9450,1,"0"],[[9451,9470],2],[9471,2],[[9472,9621],2],[[9622,9631],2],[[9632,9711],2],[[9712,9719],2],[[9720,9727],2],[[9728,9747],2],[[9748,9749],2],[[9750,9751],2],[9752,2],[9753,2],[[9754,9839],2],[[9840,9841],2],[[9842,9853],2],[[9854,9855],2],[[9856,9865],2],[[9866,9873],2],[[9874,9884],2],[9885,2],[[9886,9887],2],[[9888,9889],2],[[9890,9905],2],[9906,2],[[9907,9916],2],[[9917,9919],2],[[9920,9923],2],[[9924,9933],2],[9934,2],[[9935,9953],2],[9954,2],[9955,2],[[9956,9959],2],[[9960,9983],2],[9984,2],[[9985,9988],2],[9989,2],[[9990,9993],2],[[9994,9995],2],[[9996,10023],2],[10024,2],[[10025,10059],2],[10060,2],[10061,2],[10062,2],[[10063,10066],2],[[10067,10069],2],[10070,2],[10071,2],[[10072,10078],2],[[10079,10080],2],[[10081,10087],2],[[10088,10101],2],[[10102,10132],2],[[10133,10135],2],[[10136,10159],2],[10160,2],[[10161,10174],2],[10175,2],[[10176,10182],2],[[10183,10186],2],[10187,2],[10188,2],[10189,2],[[10190,10191],2],[[10192,10219],2],[[10220,10223],2],[[10224,10239],2],[[10240,10495],2],[[10496,10763],2],[10764,1,"\u222B\u222B\u222B\u222B"],[[10765,10867],2],[10868,1,"::="],[10869,1,"=="],[10870,1,"==="],[[10871,10971],2],[10972,1,"\u2ADD\u0338"],[[10973,11007],2],[[11008,11021],2],[[11022,11027],2],[[11028,11034],2],[[11035,11039],2],[[11040,11043],2],[[11044,11084],2],[[11085,11087],2],[[11088,11092],2],[[11093,11097],2],[[11098,11123],2],[[11124,11125],3],[[11126,11157],2],[11158,3],[11159,2],[[11160,11193],2],[[11194,11196],2],[[11197,11208],2],[11209,2],[[11210,11217],2],[11218,2],[[11219,11243],2],[[11244,11247],2],[[11248,11262],2],[11263,2],[11264,1,"\u2C30"],[11265,1,"\u2C31"],[11266,1,"\u2C32"],[11267,1,"\u2C33"],[11268,1,"\u2C34"],[11269,1,"\u2C35"],[11270,1,"\u2C36"],[11271,1,"\u2C37"],[11272,1,"\u2C38"],[11273,1,"\u2C39"],[11274,1,"\u2C3A"],[11275,1,"\u2C3B"],[11276,1,"\u2C3C"],[11277,1,"\u2C3D"],[11278,1,"\u2C3E"],[11279,1,"\u2C3F"],[11280,1,"\u2C40"],[11281,1,"\u2C41"],[11282,1,"\u2C42"],[11283,1,"\u2C43"],[11284,1,"\u2C44"],[11285,1,"\u2C45"],[11286,1,"\u2C46"],[11287,1,"\u2C47"],[11288,1,"\u2C48"],[11289,1,"\u2C49"],[11290,1,"\u2C4A"],[11291,1,"\u2C4B"],[11292,1,"\u2C4C"],[11293,1,"\u2C4D"],[11294,1,"\u2C4E"],[11295,1,"\u2C4F"],[11296,1,"\u2C50"],[11297,1,"\u2C51"],[11298,1,"\u2C52"],[11299,1,"\u2C53"],[11300,1,"\u2C54"],[11301,1,"\u2C55"],[11302,1,"\u2C56"],[11303,1,"\u2C57"],[11304,1,"\u2C58"],[11305,1,"\u2C59"],[11306,1,"\u2C5A"],[11307,1,"\u2C5B"],[11308,1,"\u2C5C"],[11309,1,"\u2C5D"],[11310,1,"\u2C5E"],[11311,1,"\u2C5F"],[[11312,11358],2],[11359,2],[11360,1,"\u2C61"],[11361,2],[11362,1,"\u026B"],[11363,1,"\u1D7D"],[11364,1,"\u027D"],[[11365,11366],2],[11367,1,"\u2C68"],[11368,2],[11369,1,"\u2C6A"],[11370,2],[11371,1,"\u2C6C"],[11372,2],[11373,1,"\u0251"],[11374,1,"\u0271"],[11375,1,"\u0250"],[11376,1,"\u0252"],[11377,2],[11378,1,"\u2C73"],[11379,2],[11380,2],[11381,1,"\u2C76"],[[11382,11383],2],[[11384,11387],2],[11388,1,"j"],[11389,1,"v"],[11390,1,"\u023F"],[11391,1,"\u0240"],[11392,1,"\u2C81"],[11393,2],[11394,1,"\u2C83"],[11395,2],[11396,1,"\u2C85"],[11397,2],[11398,1,"\u2C87"],[11399,2],[11400,1,"\u2C89"],[11401,2],[11402,1,"\u2C8B"],[11403,2],[11404,1,"\u2C8D"],[11405,2],[11406,1,"\u2C8F"],[11407,2],[11408,1,"\u2C91"],[11409,2],[11410,1,"\u2C93"],[11411,2],[11412,1,"\u2C95"],[11413,2],[11414,1,"\u2C97"],[11415,2],[11416,1,"\u2C99"],[11417,2],[11418,1,"\u2C9B"],[11419,2],[11420,1,"\u2C9D"],[11421,2],[11422,1,"\u2C9F"],[11423,2],[11424,1,"\u2CA1"],[11425,2],[11426,1,"\u2CA3"],[11427,2],[11428,1,"\u2CA5"],[11429,2],[11430,1,"\u2CA7"],[11431,2],[11432,1,"\u2CA9"],[11433,2],[11434,1,"\u2CAB"],[11435,2],[11436,1,"\u2CAD"],[11437,2],[11438,1,"\u2CAF"],[11439,2],[11440,1,"\u2CB1"],[11441,2],[11442,1,"\u2CB3"],[11443,2],[11444,1,"\u2CB5"],[11445,2],[11446,1,"\u2CB7"],[11447,2],[11448,1,"\u2CB9"],[11449,2],[11450,1,"\u2CBB"],[11451,2],[11452,1,"\u2CBD"],[11453,2],[11454,1,"\u2CBF"],[11455,2],[11456,1,"\u2CC1"],[11457,2],[11458,1,"\u2CC3"],[11459,2],[11460,1,"\u2CC5"],[11461,2],[11462,1,"\u2CC7"],[11463,2],[11464,1,"\u2CC9"],[11465,2],[11466,1,"\u2CCB"],[11467,2],[11468,1,"\u2CCD"],[11469,2],[11470,1,"\u2CCF"],[11471,2],[11472,1,"\u2CD1"],[11473,2],[11474,1,"\u2CD3"],[11475,2],[11476,1,"\u2CD5"],[11477,2],[11478,1,"\u2CD7"],[11479,2],[11480,1,"\u2CD9"],[11481,2],[11482,1,"\u2CDB"],[11483,2],[11484,1,"\u2CDD"],[11485,2],[11486,1,"\u2CDF"],[11487,2],[11488,1,"\u2CE1"],[11489,2],[11490,1,"\u2CE3"],[[11491,11492],2],[[11493,11498],2],[11499,1,"\u2CEC"],[11500,2],[11501,1,"\u2CEE"],[[11502,11505],2],[11506,1,"\u2CF3"],[11507,2],[[11508,11512],3],[[11513,11519],2],[[11520,11557],2],[11558,3],[11559,2],[[11560,11564],3],[11565,2],[[11566,11567],3],[[11568,11621],2],[[11622,11623],2],[[11624,11630],3],[11631,1,"\u2D61"],[11632,2],[[11633,11646],3],[11647,2],[[11648,11670],2],[[11671,11679],3],[[11680,11686],2],[11687,3],[[11688,11694],2],[11695,3],[[11696,11702],2],[11703,3],[[11704,11710],2],[11711,3],[[11712,11718],2],[11719,3],[[11720,11726],2],[11727,3],[[11728,11734],2],[11735,3],[[11736,11742],2],[11743,3],[[11744,11775],2],[[11776,11799],2],[[11800,11803],2],[[11804,11805],2],[[11806,11822],2],[11823,2],[11824,2],[11825,2],[[11826,11835],2],[[11836,11842],2],[[11843,11844],2],[[11845,11849],2],[[11850,11854],2],[11855,2],[[11856,11858],2],[[11859,11869],2],[[11870,11903],3],[[11904,11929],2],[11930,3],[[11931,11934],2],[11935,1,"\u6BCD"],[[11936,12018],2],[12019,1,"\u9F9F"],[[12020,12031],3],[12032,1,"\u4E00"],[12033,1,"\u4E28"],[12034,1,"\u4E36"],[12035,1,"\u4E3F"],[12036,1,"\u4E59"],[12037,1,"\u4E85"],[12038,1,"\u4E8C"],[12039,1,"\u4EA0"],[12040,1,"\u4EBA"],[12041,1,"\u513F"],[12042,1,"\u5165"],[12043,1,"\u516B"],[12044,1,"\u5182"],[12045,1,"\u5196"],[12046,1,"\u51AB"],[12047,1,"\u51E0"],[12048,1,"\u51F5"],[12049,1,"\u5200"],[12050,1,"\u529B"],[12051,1,"\u52F9"],[12052,1,"\u5315"],[12053,1,"\u531A"],[12054,1,"\u5338"],[12055,1,"\u5341"],[12056,1,"\u535C"],[12057,1,"\u5369"],[12058,1,"\u5382"],[12059,1,"\u53B6"],[12060,1,"\u53C8"],[12061,1,"\u53E3"],[12062,1,"\u56D7"],[12063,1,"\u571F"],[12064,1,"\u58EB"],[12065,1,"\u5902"],[12066,1,"\u590A"],[12067,1,"\u5915"],[12068,1,"\u5927"],[12069,1,"\u5973"],[12070,1,"\u5B50"],[12071,1,"\u5B80"],[12072,1,"\u5BF8"],[12073,1,"\u5C0F"],[12074,1,"\u5C22"],[12075,1,"\u5C38"],[12076,1,"\u5C6E"],[12077,1,"\u5C71"],[12078,1,"\u5DDB"],[12079,1,"\u5DE5"],[12080,1,"\u5DF1"],[12081,1,"\u5DFE"],[12082,1,"\u5E72"],[12083,1,"\u5E7A"],[12084,1,"\u5E7F"],[12085,1,"\u5EF4"],[12086,1,"\u5EFE"],[12087,1,"\u5F0B"],[12088,1,"\u5F13"],[12089,1,"\u5F50"],[12090,1,"\u5F61"],[12091,1,"\u5F73"],[12092,1,"\u5FC3"],[12093,1,"\u6208"],[12094,1,"\u6236"],[12095,1,"\u624B"],[12096,1,"\u652F"],[12097,1,"\u6534"],[12098,1,"\u6587"],[12099,1,"\u6597"],[12100,1,"\u65A4"],[12101,1,"\u65B9"],[12102,1,"\u65E0"],[12103,1,"\u65E5"],[12104,1,"\u66F0"],[12105,1,"\u6708"],[12106,1,"\u6728"],[12107,1,"\u6B20"],[12108,1,"\u6B62"],[12109,1,"\u6B79"],[12110,1,"\u6BB3"],[12111,1,"\u6BCB"],[12112,1,"\u6BD4"],[12113,1,"\u6BDB"],[12114,1,"\u6C0F"],[12115,1,"\u6C14"],[12116,1,"\u6C34"],[12117,1,"\u706B"],[12118,1,"\u722A"],[12119,1,"\u7236"],[12120,1,"\u723B"],[12121,1,"\u723F"],[12122,1,"\u7247"],[12123,1,"\u7259"],[12124,1,"\u725B"],[12125,1,"\u72AC"],[12126,1,"\u7384"],[12127,1,"\u7389"],[12128,1,"\u74DC"],[12129,1,"\u74E6"],[12130,1,"\u7518"],[12131,1,"\u751F"],[12132,1,"\u7528"],[12133,1,"\u7530"],[12134,1,"\u758B"],[12135,1,"\u7592"],[12136,1,"\u7676"],[12137,1,"\u767D"],[12138,1,"\u76AE"],[12139,1,"\u76BF"],[12140,1,"\u76EE"],[12141,1,"\u77DB"],[12142,1,"\u77E2"],[12143,1,"\u77F3"],[12144,1,"\u793A"],[12145,1,"\u79B8"],[12146,1,"\u79BE"],[12147,1,"\u7A74"],[12148,1,"\u7ACB"],[12149,1,"\u7AF9"],[12150,1,"\u7C73"],[12151,1,"\u7CF8"],[12152,1,"\u7F36"],[12153,1,"\u7F51"],[12154,1,"\u7F8A"],[12155,1,"\u7FBD"],[12156,1,"\u8001"],[12157,1,"\u800C"],[12158,1,"\u8012"],[12159,1,"\u8033"],[12160,1,"\u807F"],[12161,1,"\u8089"],[12162,1,"\u81E3"],[12163,1,"\u81EA"],[12164,1,"\u81F3"],[12165,1,"\u81FC"],[12166,1,"\u820C"],[12167,1,"\u821B"],[12168,1,"\u821F"],[12169,1,"\u826E"],[12170,1,"\u8272"],[12171,1,"\u8278"],[12172,1,"\u864D"],[12173,1,"\u866B"],[12174,1,"\u8840"],[12175,1,"\u884C"],[12176,1,"\u8863"],[12177,1,"\u897E"],[12178,1,"\u898B"],[12179,1,"\u89D2"],[12180,1,"\u8A00"],[12181,1,"\u8C37"],[12182,1,"\u8C46"],[12183,1,"\u8C55"],[12184,1,"\u8C78"],[12185,1,"\u8C9D"],[12186,1,"\u8D64"],[12187,1,"\u8D70"],[12188,1,"\u8DB3"],[12189,1,"\u8EAB"],[12190,1,"\u8ECA"],[12191,1,"\u8F9B"],[12192,1,"\u8FB0"],[12193,1,"\u8FB5"],[12194,1,"\u9091"],[12195,1,"\u9149"],[12196,1,"\u91C6"],[12197,1,"\u91CC"],[12198,1,"\u91D1"],[12199,1,"\u9577"],[12200,1,"\u9580"],[12201,1,"\u961C"],[12202,1,"\u96B6"],[12203,1,"\u96B9"],[12204,1,"\u96E8"],[12205,1,"\u9751"],[12206,1,"\u975E"],[12207,1,"\u9762"],[12208,1,"\u9769"],[12209,1,"\u97CB"],[12210,1,"\u97ED"],[12211,1,"\u97F3"],[12212,1,"\u9801"],[12213,1,"\u98A8"],[12214,1,"\u98DB"],[12215,1,"\u98DF"],[12216,1,"\u9996"],[12217,1,"\u9999"],[12218,1,"\u99AC"],[12219,1,"\u9AA8"],[12220,1,"\u9AD8"],[12221,1,"\u9ADF"],[12222,1,"\u9B25"],[12223,1,"\u9B2F"],[12224,1,"\u9B32"],[12225,1,"\u9B3C"],[12226,1,"\u9B5A"],[12227,1,"\u9CE5"],[12228,1,"\u9E75"],[12229,1,"\u9E7F"],[12230,1,"\u9EA5"],[12231,1,"\u9EBB"],[12232,1,"\u9EC3"],[12233,1,"\u9ECD"],[12234,1,"\u9ED1"],[12235,1,"\u9EF9"],[12236,1,"\u9EFD"],[12237,1,"\u9F0E"],[12238,1,"\u9F13"],[12239,1,"\u9F20"],[12240,1,"\u9F3B"],[12241,1,"\u9F4A"],[12242,1,"\u9F52"],[12243,1,"\u9F8D"],[12244,1,"\u9F9C"],[12245,1,"\u9FA0"],[[12246,12271],3],[[12272,12283],3],[[12284,12287],3],[12288,1," "],[12289,2],[12290,1,"."],[[12291,12292],2],[[12293,12295],2],[[12296,12329],2],[[12330,12333],2],[[12334,12341],2],[12342,1,"\u3012"],[12343,2],[12344,1,"\u5341"],[12345,1,"\u5344"],[12346,1,"\u5345"],[12347,2],[12348,2],[12349,2],[12350,2],[12351,2],[12352,3],[[12353,12436],2],[[12437,12438],2],[[12439,12440],3],[[12441,12442],2],[12443,1," \u3099"],[12444,1," \u309A"],[[12445,12446],2],[12447,1,"\u3088\u308A"],[12448,2],[[12449,12542],2],[12543,1,"\u30B3\u30C8"],[[12544,12548],3],[[12549,12588],2],[12589,2],[12590,2],[12591,2],[12592,3],[12593,1,"\u1100"],[12594,1,"\u1101"],[12595,1,"\u11AA"],[12596,1,"\u1102"],[12597,1,"\u11AC"],[12598,1,"\u11AD"],[12599,1,"\u1103"],[12600,1,"\u1104"],[12601,1,"\u1105"],[12602,1,"\u11B0"],[12603,1,"\u11B1"],[12604,1,"\u11B2"],[12605,1,"\u11B3"],[12606,1,"\u11B4"],[12607,1,"\u11B5"],[12608,1,"\u111A"],[12609,1,"\u1106"],[12610,1,"\u1107"],[12611,1,"\u1108"],[12612,1,"\u1121"],[12613,1,"\u1109"],[12614,1,"\u110A"],[12615,1,"\u110B"],[12616,1,"\u110C"],[12617,1,"\u110D"],[12618,1,"\u110E"],[12619,1,"\u110F"],[12620,1,"\u1110"],[12621,1,"\u1111"],[12622,1,"\u1112"],[12623,1,"\u1161"],[12624,1,"\u1162"],[12625,1,"\u1163"],[12626,1,"\u1164"],[12627,1,"\u1165"],[12628,1,"\u1166"],[12629,1,"\u1167"],[12630,1,"\u1168"],[12631,1,"\u1169"],[12632,1,"\u116A"],[12633,1,"\u116B"],[12634,1,"\u116C"],[12635,1,"\u116D"],[12636,1,"\u116E"],[12637,1,"\u116F"],[12638,1,"\u1170"],[12639,1,"\u1171"],[12640,1,"\u1172"],[12641,1,"\u1173"],[12642,1,"\u1174"],[12643,1,"\u1175"],[12644,7],[12645,1,"\u1114"],[12646,1,"\u1115"],[12647,1,"\u11C7"],[12648,1,"\u11C8"],[12649,1,"\u11CC"],[12650,1,"\u11CE"],[12651,1,"\u11D3"],[12652,1,"\u11D7"],[12653,1,"\u11D9"],[12654,1,"\u111C"],[12655,1,"\u11DD"],[12656,1,"\u11DF"],[12657,1,"\u111D"],[12658,1,"\u111E"],[12659,1,"\u1120"],[12660,1,"\u1122"],[12661,1,"\u1123"],[12662,1,"\u1127"],[12663,1,"\u1129"],[12664,1,"\u112B"],[12665,1,"\u112C"],[12666,1,"\u112D"],[12667,1,"\u112E"],[12668,1,"\u112F"],[12669,1,"\u1132"],[12670,1,"\u1136"],[12671,1,"\u1140"],[12672,1,"\u1147"],[12673,1,"\u114C"],[12674,1,"\u11F1"],[12675,1,"\u11F2"],[12676,1,"\u1157"],[12677,1,"\u1158"],[12678,1,"\u1159"],[12679,1,"\u1184"],[12680,1,"\u1185"],[12681,1,"\u1188"],[12682,1,"\u1191"],[12683,1,"\u1192"],[12684,1,"\u1194"],[12685,1,"\u119E"],[12686,1,"\u11A1"],[12687,3],[[12688,12689],2],[12690,1,"\u4E00"],[12691,1,"\u4E8C"],[12692,1,"\u4E09"],[12693,1,"\u56DB"],[12694,1,"\u4E0A"],[12695,1,"\u4E2D"],[12696,1,"\u4E0B"],[12697,1,"\u7532"],[12698,1,"\u4E59"],[12699,1,"\u4E19"],[12700,1,"\u4E01"],[12701,1,"\u5929"],[12702,1,"\u5730"],[12703,1,"\u4EBA"],[[12704,12727],2],[[12728,12730],2],[[12731,12735],2],[[12736,12751],2],[[12752,12771],2],[[12772,12773],2],[[12774,12782],3],[12783,3],[[12784,12799],2],[12800,1,"(\u1100)"],[12801,1,"(\u1102)"],[12802,1,"(\u1103)"],[12803,1,"(\u1105)"],[12804,1,"(\u1106)"],[12805,1,"(\u1107)"],[12806,1,"(\u1109)"],[12807,1,"(\u110B)"],[12808,1,"(\u110C)"],[12809,1,"(\u110E)"],[12810,1,"(\u110F)"],[12811,1,"(\u1110)"],[12812,1,"(\u1111)"],[12813,1,"(\u1112)"],[12814,1,"(\uAC00)"],[12815,1,"(\uB098)"],[12816,1,"(\uB2E4)"],[12817,1,"(\uB77C)"],[12818,1,"(\uB9C8)"],[12819,1,"(\uBC14)"],[12820,1,"(\uC0AC)"],[12821,1,"(\uC544)"],[12822,1,"(\uC790)"],[12823,1,"(\uCC28)"],[12824,1,"(\uCE74)"],[12825,1,"(\uD0C0)"],[12826,1,"(\uD30C)"],[12827,1,"(\uD558)"],[12828,1,"(\uC8FC)"],[12829,1,"(\uC624\uC804)"],[12830,1,"(\uC624\uD6C4)"],[12831,3],[12832,1,"(\u4E00)"],[12833,1,"(\u4E8C)"],[12834,1,"(\u4E09)"],[12835,1,"(\u56DB)"],[12836,1,"(\u4E94)"],[12837,1,"(\u516D)"],[12838,1,"(\u4E03)"],[12839,1,"(\u516B)"],[12840,1,"(\u4E5D)"],[12841,1,"(\u5341)"],[12842,1,"(\u6708)"],[12843,1,"(\u706B)"],[12844,1,"(\u6C34)"],[12845,1,"(\u6728)"],[12846,1,"(\u91D1)"],[12847,1,"(\u571F)"],[12848,1,"(\u65E5)"],[12849,1,"(\u682A)"],[12850,1,"(\u6709)"],[12851,1,"(\u793E)"],[12852,1,"(\u540D)"],[12853,1,"(\u7279)"],[12854,1,"(\u8CA1)"],[12855,1,"(\u795D)"],[12856,1,"(\u52B4)"],[12857,1,"(\u4EE3)"],[12858,1,"(\u547C)"],[12859,1,"(\u5B66)"],[12860,1,"(\u76E3)"],[12861,1,"(\u4F01)"],[12862,1,"(\u8CC7)"],[12863,1,"(\u5354)"],[12864,1,"(\u796D)"],[12865,1,"(\u4F11)"],[12866,1,"(\u81EA)"],[12867,1,"(\u81F3)"],[12868,1,"\u554F"],[12869,1,"\u5E7C"],[12870,1,"\u6587"],[12871,1,"\u7B8F"],[[12872,12879],2],[12880,1,"pte"],[12881,1,"21"],[12882,1,"22"],[12883,1,"23"],[12884,1,"24"],[12885,1,"25"],[12886,1,"26"],[12887,1,"27"],[12888,1,"28"],[12889,1,"29"],[12890,1,"30"],[12891,1,"31"],[12892,1,"32"],[12893,1,"33"],[12894,1,"34"],[12895,1,"35"],[12896,1,"\u1100"],[12897,1,"\u1102"],[12898,1,"\u1103"],[12899,1,"\u1105"],[12900,1,"\u1106"],[12901,1,"\u1107"],[12902,1,"\u1109"],[12903,1,"\u110B"],[12904,1,"\u110C"],[12905,1,"\u110E"],[12906,1,"\u110F"],[12907,1,"\u1110"],[12908,1,"\u1111"],[12909,1,"\u1112"],[12910,1,"\uAC00"],[12911,1,"\uB098"],[12912,1,"\uB2E4"],[12913,1,"\uB77C"],[12914,1,"\uB9C8"],[12915,1,"\uBC14"],[12916,1,"\uC0AC"],[12917,1,"\uC544"],[12918,1,"\uC790"],[12919,1,"\uCC28"],[12920,1,"\uCE74"],[12921,1,"\uD0C0"],[12922,1,"\uD30C"],[12923,1,"\uD558"],[12924,1,"\uCC38\uACE0"],[12925,1,"\uC8FC\uC758"],[12926,1,"\uC6B0"],[12927,2],[12928,1,"\u4E00"],[12929,1,"\u4E8C"],[12930,1,"\u4E09"],[12931,1,"\u56DB"],[12932,1,"\u4E94"],[12933,1,"\u516D"],[12934,1,"\u4E03"],[12935,1,"\u516B"],[12936,1,"\u4E5D"],[12937,1,"\u5341"],[12938,1,"\u6708"],[12939,1,"\u706B"],[12940,1,"\u6C34"],[12941,1,"\u6728"],[12942,1,"\u91D1"],[12943,1,"\u571F"],[12944,1,"\u65E5"],[12945,1,"\u682A"],[12946,1,"\u6709"],[12947,1,"\u793E"],[12948,1,"\u540D"],[12949,1,"\u7279"],[12950,1,"\u8CA1"],[12951,1,"\u795D"],[12952,1,"\u52B4"],[12953,1,"\u79D8"],[12954,1,"\u7537"],[12955,1,"\u5973"],[12956,1,"\u9069"],[12957,1,"\u512A"],[12958,1,"\u5370"],[12959,1,"\u6CE8"],[12960,1,"\u9805"],[12961,1,"\u4F11"],[12962,1,"\u5199"],[12963,1,"\u6B63"],[12964,1,"\u4E0A"],[12965,1,"\u4E2D"],[12966,1,"\u4E0B"],[12967,1,"\u5DE6"],[12968,1,"\u53F3"],[12969,1,"\u533B"],[12970,1,"\u5B97"],[12971,1,"\u5B66"],[12972,1,"\u76E3"],[12973,1,"\u4F01"],[12974,1,"\u8CC7"],[12975,1,"\u5354"],[12976,1,"\u591C"],[12977,1,"36"],[12978,1,"37"],[12979,1,"38"],[12980,1,"39"],[12981,1,"40"],[12982,1,"41"],[12983,1,"42"],[12984,1,"43"],[12985,1,"44"],[12986,1,"45"],[12987,1,"46"],[12988,1,"47"],[12989,1,"48"],[12990,1,"49"],[12991,1,"50"],[12992,1,"1\u6708"],[12993,1,"2\u6708"],[12994,1,"3\u6708"],[12995,1,"4\u6708"],[12996,1,"5\u6708"],[12997,1,"6\u6708"],[12998,1,"7\u6708"],[12999,1,"8\u6708"],[13e3,1,"9\u6708"],[13001,1,"10\u6708"],[13002,1,"11\u6708"],[13003,1,"12\u6708"],[13004,1,"hg"],[13005,1,"erg"],[13006,1,"ev"],[13007,1,"ltd"],[13008,1,"\u30A2"],[13009,1,"\u30A4"],[13010,1,"\u30A6"],[13011,1,"\u30A8"],[13012,1,"\u30AA"],[13013,1,"\u30AB"],[13014,1,"\u30AD"],[13015,1,"\u30AF"],[13016,1,"\u30B1"],[13017,1,"\u30B3"],[13018,1,"\u30B5"],[13019,1,"\u30B7"],[13020,1,"\u30B9"],[13021,1,"\u30BB"],[13022,1,"\u30BD"],[13023,1,"\u30BF"],[13024,1,"\u30C1"],[13025,1,"\u30C4"],[13026,1,"\u30C6"],[13027,1,"\u30C8"],[13028,1,"\u30CA"],[13029,1,"\u30CB"],[13030,1,"\u30CC"],[13031,1,"\u30CD"],[13032,1,"\u30CE"],[13033,1,"\u30CF"],[13034,1,"\u30D2"],[13035,1,"\u30D5"],[13036,1,"\u30D8"],[13037,1,"\u30DB"],[13038,1,"\u30DE"],[13039,1,"\u30DF"],[13040,1,"\u30E0"],[13041,1,"\u30E1"],[13042,1,"\u30E2"],[13043,1,"\u30E4"],[13044,1,"\u30E6"],[13045,1,"\u30E8"],[13046,1,"\u30E9"],[13047,1,"\u30EA"],[13048,1,"\u30EB"],[13049,1,"\u30EC"],[13050,1,"\u30ED"],[13051,1,"\u30EF"],[13052,1,"\u30F0"],[13053,1,"\u30F1"],[13054,1,"\u30F2"],[13055,1,"\u4EE4\u548C"],[13056,1,"\u30A2\u30D1\u30FC\u30C8"],[13057,1,"\u30A2\u30EB\u30D5\u30A1"],[13058,1,"\u30A2\u30F3\u30DA\u30A2"],[13059,1,"\u30A2\u30FC\u30EB"],[13060,1,"\u30A4\u30CB\u30F3\u30B0"],[13061,1,"\u30A4\u30F3\u30C1"],[13062,1,"\u30A6\u30A9\u30F3"],[13063,1,"\u30A8\u30B9\u30AF\u30FC\u30C9"],[13064,1,"\u30A8\u30FC\u30AB\u30FC"],[13065,1,"\u30AA\u30F3\u30B9"],[13066,1,"\u30AA\u30FC\u30E0"],[13067,1,"\u30AB\u30A4\u30EA"],[13068,1,"\u30AB\u30E9\u30C3\u30C8"],[13069,1,"\u30AB\u30ED\u30EA\u30FC"],[13070,1,"\u30AC\u30ED\u30F3"],[13071,1,"\u30AC\u30F3\u30DE"],[13072,1,"\u30AE\u30AC"],[13073,1,"\u30AE\u30CB\u30FC"],[13074,1,"\u30AD\u30E5\u30EA\u30FC"],[13075,1,"\u30AE\u30EB\u30C0\u30FC"],[13076,1,"\u30AD\u30ED"],[13077,1,"\u30AD\u30ED\u30B0\u30E9\u30E0"],[13078,1,"\u30AD\u30ED\u30E1\u30FC\u30C8\u30EB"],[13079,1,"\u30AD\u30ED\u30EF\u30C3\u30C8"],[13080,1,"\u30B0\u30E9\u30E0"],[13081,1,"\u30B0\u30E9\u30E0\u30C8\u30F3"],[13082,1,"\u30AF\u30EB\u30BC\u30A4\u30ED"],[13083,1,"\u30AF\u30ED\u30FC\u30CD"],[13084,1,"\u30B1\u30FC\u30B9"],[13085,1,"\u30B3\u30EB\u30CA"],[13086,1,"\u30B3\u30FC\u30DD"],[13087,1,"\u30B5\u30A4\u30AF\u30EB"],[13088,1,"\u30B5\u30F3\u30C1\u30FC\u30E0"],[13089,1,"\u30B7\u30EA\u30F3\u30B0"],[13090,1,"\u30BB\u30F3\u30C1"],[13091,1,"\u30BB\u30F3\u30C8"],[13092,1,"\u30C0\u30FC\u30B9"],[13093,1,"\u30C7\u30B7"],[13094,1,"\u30C9\u30EB"],[13095,1,"\u30C8\u30F3"],[13096,1,"\u30CA\u30CE"],[13097,1,"\u30CE\u30C3\u30C8"],[13098,1,"\u30CF\u30A4\u30C4"],[13099,1,"\u30D1\u30FC\u30BB\u30F3\u30C8"],[13100,1,"\u30D1\u30FC\u30C4"],[13101,1,"\u30D0\u30FC\u30EC\u30EB"],[13102,1,"\u30D4\u30A2\u30B9\u30C8\u30EB"],[13103,1,"\u30D4\u30AF\u30EB"],[13104,1,"\u30D4\u30B3"],[13105,1,"\u30D3\u30EB"],[13106,1,"\u30D5\u30A1\u30E9\u30C3\u30C9"],[13107,1,"\u30D5\u30A3\u30FC\u30C8"],[13108,1,"\u30D6\u30C3\u30B7\u30A7\u30EB"],[13109,1,"\u30D5\u30E9\u30F3"],[13110,1,"\u30D8\u30AF\u30BF\u30FC\u30EB"],[13111,1,"\u30DA\u30BD"],[13112,1,"\u30DA\u30CB\u30D2"],[13113,1,"\u30D8\u30EB\u30C4"],[13114,1,"\u30DA\u30F3\u30B9"],[13115,1,"\u30DA\u30FC\u30B8"],[13116,1,"\u30D9\u30FC\u30BF"],[13117,1,"\u30DD\u30A4\u30F3\u30C8"],[13118,1,"\u30DC\u30EB\u30C8"],[13119,1,"\u30DB\u30F3"],[13120,1,"\u30DD\u30F3\u30C9"],[13121,1,"\u30DB\u30FC\u30EB"],[13122,1,"\u30DB\u30FC\u30F3"],[13123,1,"\u30DE\u30A4\u30AF\u30ED"],[13124,1,"\u30DE\u30A4\u30EB"],[13125,1,"\u30DE\u30C3\u30CF"],[13126,1,"\u30DE\u30EB\u30AF"],[13127,1,"\u30DE\u30F3\u30B7\u30E7\u30F3"],[13128,1,"\u30DF\u30AF\u30ED\u30F3"],[13129,1,"\u30DF\u30EA"],[13130,1,"\u30DF\u30EA\u30D0\u30FC\u30EB"],[13131,1,"\u30E1\u30AC"],[13132,1,"\u30E1\u30AC\u30C8\u30F3"],[13133,1,"\u30E1\u30FC\u30C8\u30EB"],[13134,1,"\u30E4\u30FC\u30C9"],[13135,1,"\u30E4\u30FC\u30EB"],[13136,1,"\u30E6\u30A2\u30F3"],[13137,1,"\u30EA\u30C3\u30C8\u30EB"],[13138,1,"\u30EA\u30E9"],[13139,1,"\u30EB\u30D4\u30FC"],[13140,1,"\u30EB\u30FC\u30D6\u30EB"],[13141,1,"\u30EC\u30E0"],[13142,1,"\u30EC\u30F3\u30C8\u30B2\u30F3"],[13143,1,"\u30EF\u30C3\u30C8"],[13144,1,"0\u70B9"],[13145,1,"1\u70B9"],[13146,1,"2\u70B9"],[13147,1,"3\u70B9"],[13148,1,"4\u70B9"],[13149,1,"5\u70B9"],[13150,1,"6\u70B9"],[13151,1,"7\u70B9"],[13152,1,"8\u70B9"],[13153,1,"9\u70B9"],[13154,1,"10\u70B9"],[13155,1,"11\u70B9"],[13156,1,"12\u70B9"],[13157,1,"13\u70B9"],[13158,1,"14\u70B9"],[13159,1,"15\u70B9"],[13160,1,"16\u70B9"],[13161,1,"17\u70B9"],[13162,1,"18\u70B9"],[13163,1,"19\u70B9"],[13164,1,"20\u70B9"],[13165,1,"21\u70B9"],[13166,1,"22\u70B9"],[13167,1,"23\u70B9"],[13168,1,"24\u70B9"],[13169,1,"hpa"],[13170,1,"da"],[13171,1,"au"],[13172,1,"bar"],[13173,1,"ov"],[13174,1,"pc"],[13175,1,"dm"],[13176,1,"dm2"],[13177,1,"dm3"],[13178,1,"iu"],[13179,1,"\u5E73\u6210"],[13180,1,"\u662D\u548C"],[13181,1,"\u5927\u6B63"],[13182,1,"\u660E\u6CBB"],[13183,1,"\u682A\u5F0F\u4F1A\u793E"],[13184,1,"pa"],[13185,1,"na"],[13186,1,"\u03BCa"],[13187,1,"ma"],[13188,1,"ka"],[13189,1,"kb"],[13190,1,"mb"],[13191,1,"gb"],[13192,1,"cal"],[13193,1,"kcal"],[13194,1,"pf"],[13195,1,"nf"],[13196,1,"\u03BCf"],[13197,1,"\u03BCg"],[13198,1,"mg"],[13199,1,"kg"],[13200,1,"hz"],[13201,1,"khz"],[13202,1,"mhz"],[13203,1,"ghz"],[13204,1,"thz"],[13205,1,"\u03BCl"],[13206,1,"ml"],[13207,1,"dl"],[13208,1,"kl"],[13209,1,"fm"],[13210,1,"nm"],[13211,1,"\u03BCm"],[13212,1,"mm"],[13213,1,"cm"],[13214,1,"km"],[13215,1,"mm2"],[13216,1,"cm2"],[13217,1,"m2"],[13218,1,"km2"],[13219,1,"mm3"],[13220,1,"cm3"],[13221,1,"m3"],[13222,1,"km3"],[13223,1,"m\u2215s"],[13224,1,"m\u2215s2"],[13225,1,"pa"],[13226,1,"kpa"],[13227,1,"mpa"],[13228,1,"gpa"],[13229,1,"rad"],[13230,1,"rad\u2215s"],[13231,1,"rad\u2215s2"],[13232,1,"ps"],[13233,1,"ns"],[13234,1,"\u03BCs"],[13235,1,"ms"],[13236,1,"pv"],[13237,1,"nv"],[13238,1,"\u03BCv"],[13239,1,"mv"],[13240,1,"kv"],[13241,1,"mv"],[13242,1,"pw"],[13243,1,"nw"],[13244,1,"\u03BCw"],[13245,1,"mw"],[13246,1,"kw"],[13247,1,"mw"],[13248,1,"k\u03C9"],[13249,1,"m\u03C9"],[13250,3],[13251,1,"bq"],[13252,1,"cc"],[13253,1,"cd"],[13254,1,"c\u2215kg"],[13255,3],[13256,1,"db"],[13257,1,"gy"],[13258,1,"ha"],[13259,1,"hp"],[13260,1,"in"],[13261,1,"kk"],[13262,1,"km"],[13263,1,"kt"],[13264,1,"lm"],[13265,1,"ln"],[13266,1,"log"],[13267,1,"lx"],[13268,1,"mb"],[13269,1,"mil"],[13270,1,"mol"],[13271,1,"ph"],[13272,3],[13273,1,"ppm"],[13274,1,"pr"],[13275,1,"sr"],[13276,1,"sv"],[13277,1,"wb"],[13278,1,"v\u2215m"],[13279,1,"a\u2215m"],[13280,1,"1\u65E5"],[13281,1,"2\u65E5"],[13282,1,"3\u65E5"],[13283,1,"4\u65E5"],[13284,1,"5\u65E5"],[13285,1,"6\u65E5"],[13286,1,"7\u65E5"],[13287,1,"8\u65E5"],[13288,1,"9\u65E5"],[13289,1,"10\u65E5"],[13290,1,"11\u65E5"],[13291,1,"12\u65E5"],[13292,1,"13\u65E5"],[13293,1,"14\u65E5"],[13294,1,"15\u65E5"],[13295,1,"16\u65E5"],[13296,1,"17\u65E5"],[13297,1,"18\u65E5"],[13298,1,"19\u65E5"],[13299,1,"20\u65E5"],[13300,1,"21\u65E5"],[13301,1,"22\u65E5"],[13302,1,"23\u65E5"],[13303,1,"24\u65E5"],[13304,1,"25\u65E5"],[13305,1,"26\u65E5"],[13306,1,"27\u65E5"],[13307,1,"28\u65E5"],[13308,1,"29\u65E5"],[13309,1,"30\u65E5"],[13310,1,"31\u65E5"],[13311,1,"gal"],[[13312,19893],2],[[19894,19903],2],[[19904,19967],2],[[19968,40869],2],[[40870,40891],2],[[40892,40899],2],[[40900,40907],2],[40908,2],[[40909,40917],2],[[40918,40938],2],[[40939,40943],2],[[40944,40956],2],[[40957,40959],2],[[40960,42124],2],[[42125,42127],3],[[42128,42145],2],[[42146,42147],2],[[42148,42163],2],[42164,2],[[42165,42176],2],[42177,2],[[42178,42180],2],[42181,2],[42182,2],[[42183,42191],3],[[42192,42237],2],[[42238,42239],2],[[42240,42508],2],[[42509,42511],2],[[42512,42539],2],[[42540,42559],3],[42560,1,"\uA641"],[42561,2],[42562,1,"\uA643"],[42563,2],[42564,1,"\uA645"],[42565,2],[42566,1,"\uA647"],[42567,2],[42568,1,"\uA649"],[42569,2],[42570,1,"\uA64B"],[42571,2],[42572,1,"\uA64D"],[42573,2],[42574,1,"\uA64F"],[42575,2],[42576,1,"\uA651"],[42577,2],[42578,1,"\uA653"],[42579,2],[42580,1,"\uA655"],[42581,2],[42582,1,"\uA657"],[42583,2],[42584,1,"\uA659"],[42585,2],[42586,1,"\uA65B"],[42587,2],[42588,1,"\uA65D"],[42589,2],[42590,1,"\uA65F"],[42591,2],[42592,1,"\uA661"],[42593,2],[42594,1,"\uA663"],[42595,2],[42596,1,"\uA665"],[42597,2],[42598,1,"\uA667"],[42599,2],[42600,1,"\uA669"],[42601,2],[42602,1,"\uA66B"],[42603,2],[42604,1,"\uA66D"],[[42605,42607],2],[[42608,42611],2],[[42612,42619],2],[[42620,42621],2],[42622,2],[42623,2],[42624,1,"\uA681"],[42625,2],[42626,1,"\uA683"],[42627,2],[42628,1,"\uA685"],[42629,2],[42630,1,"\uA687"],[42631,2],[42632,1,"\uA689"],[42633,2],[42634,1,"\uA68B"],[42635,2],[42636,1,"\uA68D"],[42637,2],[42638,1,"\uA68F"],[42639,2],[42640,1,"\uA691"],[42641,2],[42642,1,"\uA693"],[42643,2],[42644,1,"\uA695"],[42645,2],[42646,1,"\uA697"],[42647,2],[42648,1,"\uA699"],[42649,2],[42650,1,"\uA69B"],[42651,2],[42652,1,"\u044A"],[42653,1,"\u044C"],[42654,2],[42655,2],[[42656,42725],2],[[42726,42735],2],[[42736,42737],2],[[42738,42743],2],[[42744,42751],3],[[42752,42774],2],[[42775,42778],2],[[42779,42783],2],[[42784,42785],2],[42786,1,"\uA723"],[42787,2],[42788,1,"\uA725"],[42789,2],[42790,1,"\uA727"],[42791,2],[42792,1,"\uA729"],[42793,2],[42794,1,"\uA72B"],[42795,2],[42796,1,"\uA72D"],[42797,2],[42798,1,"\uA72F"],[[42799,42801],2],[42802,1,"\uA733"],[42803,2],[42804,1,"\uA735"],[42805,2],[42806,1,"\uA737"],[42807,2],[42808,1,"\uA739"],[42809,2],[42810,1,"\uA73B"],[42811,2],[42812,1,"\uA73D"],[42813,2],[42814,1,"\uA73F"],[42815,2],[42816,1,"\uA741"],[42817,2],[42818,1,"\uA743"],[42819,2],[42820,1,"\uA745"],[42821,2],[42822,1,"\uA747"],[42823,2],[42824,1,"\uA749"],[42825,2],[42826,1,"\uA74B"],[42827,2],[42828,1,"\uA74D"],[42829,2],[42830,1,"\uA74F"],[42831,2],[42832,1,"\uA751"],[42833,2],[42834,1,"\uA753"],[42835,2],[42836,1,"\uA755"],[42837,2],[42838,1,"\uA757"],[42839,2],[42840,1,"\uA759"],[42841,2],[42842,1,"\uA75B"],[42843,2],[42844,1,"\uA75D"],[42845,2],[42846,1,"\uA75F"],[42847,2],[42848,1,"\uA761"],[42849,2],[42850,1,"\uA763"],[42851,2],[42852,1,"\uA765"],[42853,2],[42854,1,"\uA767"],[42855,2],[42856,1,"\uA769"],[42857,2],[42858,1,"\uA76B"],[42859,2],[42860,1,"\uA76D"],[42861,2],[42862,1,"\uA76F"],[42863,2],[42864,1,"\uA76F"],[[42865,42872],2],[42873,1,"\uA77A"],[42874,2],[42875,1,"\uA77C"],[42876,2],[42877,1,"\u1D79"],[42878,1,"\uA77F"],[42879,2],[42880,1,"\uA781"],[42881,2],[42882,1,"\uA783"],[42883,2],[42884,1,"\uA785"],[42885,2],[42886,1,"\uA787"],[[42887,42888],2],[[42889,42890],2],[42891,1,"\uA78C"],[42892,2],[42893,1,"\u0265"],[42894,2],[42895,2],[42896,1,"\uA791"],[42897,2],[42898,1,"\uA793"],[42899,2],[[42900,42901],2],[42902,1,"\uA797"],[42903,2],[42904,1,"\uA799"],[42905,2],[42906,1,"\uA79B"],[42907,2],[42908,1,"\uA79D"],[42909,2],[42910,1,"\uA79F"],[42911,2],[42912,1,"\uA7A1"],[42913,2],[42914,1,"\uA7A3"],[42915,2],[42916,1,"\uA7A5"],[42917,2],[42918,1,"\uA7A7"],[42919,2],[42920,1,"\uA7A9"],[42921,2],[42922,1,"\u0266"],[42923,1,"\u025C"],[42924,1,"\u0261"],[42925,1,"\u026C"],[42926,1,"\u026A"],[42927,2],[42928,1,"\u029E"],[42929,1,"\u0287"],[42930,1,"\u029D"],[42931,1,"\uAB53"],[42932,1,"\uA7B5"],[42933,2],[42934,1,"\uA7B7"],[42935,2],[42936,1,"\uA7B9"],[42937,2],[42938,1,"\uA7BB"],[42939,2],[42940,1,"\uA7BD"],[42941,2],[42942,1,"\uA7BF"],[42943,2],[42944,1,"\uA7C1"],[42945,2],[42946,1,"\uA7C3"],[42947,2],[42948,1,"\uA794"],[42949,1,"\u0282"],[42950,1,"\u1D8E"],[42951,1,"\uA7C8"],[42952,2],[42953,1,"\uA7CA"],[42954,2],[42955,1,"\u0264"],[42956,1,"\uA7CD"],[42957,2],[[42958,42959],3],[42960,1,"\uA7D1"],[42961,2],[42962,3],[42963,2],[42964,3],[42965,2],[42966,1,"\uA7D7"],[42967,2],[42968,1,"\uA7D9"],[42969,2],[42970,1,"\uA7DB"],[42971,2],[42972,1,"\u019B"],[[42973,42993],3],[42994,1,"c"],[42995,1,"f"],[42996,1,"q"],[42997,1,"\uA7F6"],[42998,2],[42999,2],[43e3,1,"\u0127"],[43001,1,"\u0153"],[43002,2],[[43003,43007],2],[[43008,43047],2],[[43048,43051],2],[43052,2],[[43053,43055],3],[[43056,43065],2],[[43066,43071],3],[[43072,43123],2],[[43124,43127],2],[[43128,43135],3],[[43136,43204],2],[43205,2],[[43206,43213],3],[[43214,43215],2],[[43216,43225],2],[[43226,43231],3],[[43232,43255],2],[[43256,43258],2],[43259,2],[43260,2],[43261,2],[[43262,43263],2],[[43264,43309],2],[[43310,43311],2],[[43312,43347],2],[[43348,43358],3],[43359,2],[[43360,43388],2],[[43389,43391],3],[[43392,43456],2],[[43457,43469],2],[43470,3],[[43471,43481],2],[[43482,43485],3],[[43486,43487],2],[[43488,43518],2],[43519,3],[[43520,43574],2],[[43575,43583],3],[[43584,43597],2],[[43598,43599],3],[[43600,43609],2],[[43610,43611],3],[[43612,43615],2],[[43616,43638],2],[[43639,43641],2],[[43642,43643],2],[[43644,43647],2],[[43648,43714],2],[[43715,43738],3],[[43739,43741],2],[[43742,43743],2],[[43744,43759],2],[[43760,43761],2],[[43762,43766],2],[[43767,43776],3],[[43777,43782],2],[[43783,43784],3],[[43785,43790],2],[[43791,43792],3],[[43793,43798],2],[[43799,43807],3],[[43808,43814],2],[43815,3],[[43816,43822],2],[43823,3],[[43824,43866],2],[43867,2],[43868,1,"\uA727"],[43869,1,"\uAB37"],[43870,1,"\u026B"],[43871,1,"\uAB52"],[[43872,43875],2],[[43876,43877],2],[[43878,43879],2],[43880,2],[43881,1,"\u028D"],[[43882,43883],2],[[43884,43887],3],[43888,1,"\u13A0"],[43889,1,"\u13A1"],[43890,1,"\u13A2"],[43891,1,"\u13A3"],[43892,1,"\u13A4"],[43893,1,"\u13A5"],[43894,1,"\u13A6"],[43895,1,"\u13A7"],[43896,1,"\u13A8"],[43897,1,"\u13A9"],[43898,1,"\u13AA"],[43899,1,"\u13AB"],[43900,1,"\u13AC"],[43901,1,"\u13AD"],[43902,1,"\u13AE"],[43903,1,"\u13AF"],[43904,1,"\u13B0"],[43905,1,"\u13B1"],[43906,1,"\u13B2"],[43907,1,"\u13B3"],[43908,1,"\u13B4"],[43909,1,"\u13B5"],[43910,1,"\u13B6"],[43911,1,"\u13B7"],[43912,1,"\u13B8"],[43913,1,"\u13B9"],[43914,1,"\u13BA"],[43915,1,"\u13BB"],[43916,1,"\u13BC"],[43917,1,"\u13BD"],[43918,1,"\u13BE"],[43919,1,"\u13BF"],[43920,1,"\u13C0"],[43921,1,"\u13C1"],[43922,1,"\u13C2"],[43923,1,"\u13C3"],[43924,1,"\u13C4"],[43925,1,"\u13C5"],[43926,1,"\u13C6"],[43927,1,"\u13C7"],[43928,1,"\u13C8"],[43929,1,"\u13C9"],[43930,1,"\u13CA"],[43931,1,"\u13CB"],[43932,1,"\u13CC"],[43933,1,"\u13CD"],[43934,1,"\u13CE"],[43935,1,"\u13CF"],[43936,1,"\u13D0"],[43937,1,"\u13D1"],[43938,1,"\u13D2"],[43939,1,"\u13D3"],[43940,1,"\u13D4"],[43941,1,"\u13D5"],[43942,1,"\u13D6"],[43943,1,"\u13D7"],[43944,1,"\u13D8"],[43945,1,"\u13D9"],[43946,1,"\u13DA"],[43947,1,"\u13DB"],[43948,1,"\u13DC"],[43949,1,"\u13DD"],[43950,1,"\u13DE"],[43951,1,"\u13DF"],[43952,1,"\u13E0"],[43953,1,"\u13E1"],[43954,1,"\u13E2"],[43955,1,"\u13E3"],[43956,1,"\u13E4"],[43957,1,"\u13E5"],[43958,1,"\u13E6"],[43959,1,"\u13E7"],[43960,1,"\u13E8"],[43961,1,"\u13E9"],[43962,1,"\u13EA"],[43963,1,"\u13EB"],[43964,1,"\u13EC"],[43965,1,"\u13ED"],[43966,1,"\u13EE"],[43967,1,"\u13EF"],[[43968,44010],2],[44011,2],[[44012,44013],2],[[44014,44015],3],[[44016,44025],2],[[44026,44031],3],[[44032,55203],2],[[55204,55215],3],[[55216,55238],2],[[55239,55242],3],[[55243,55291],2],[[55292,55295],3],[[55296,57343],3],[[57344,63743],3],[63744,1,"\u8C48"],[63745,1,"\u66F4"],[63746,1,"\u8ECA"],[63747,1,"\u8CC8"],[63748,1,"\u6ED1"],[63749,1,"\u4E32"],[63750,1,"\u53E5"],[[63751,63752],1,"\u9F9C"],[63753,1,"\u5951"],[63754,1,"\u91D1"],[63755,1,"\u5587"],[63756,1,"\u5948"],[63757,1,"\u61F6"],[63758,1,"\u7669"],[63759,1,"\u7F85"],[63760,1,"\u863F"],[63761,1,"\u87BA"],[63762,1,"\u88F8"],[63763,1,"\u908F"],[63764,1,"\u6A02"],[63765,1,"\u6D1B"],[63766,1,"\u70D9"],[63767,1,"\u73DE"],[63768,1,"\u843D"],[63769,1,"\u916A"],[63770,1,"\u99F1"],[63771,1,"\u4E82"],[63772,1,"\u5375"],[63773,1,"\u6B04"],[63774,1,"\u721B"],[63775,1,"\u862D"],[63776,1,"\u9E1E"],[63777,1,"\u5D50"],[63778,1,"\u6FEB"],[63779,1,"\u85CD"],[63780,1,"\u8964"],[63781,1,"\u62C9"],[63782,1,"\u81D8"],[63783,1,"\u881F"],[63784,1,"\u5ECA"],[63785,1,"\u6717"],[63786,1,"\u6D6A"],[63787,1,"\u72FC"],[63788,1,"\u90CE"],[63789,1,"\u4F86"],[63790,1,"\u51B7"],[63791,1,"\u52DE"],[63792,1,"\u64C4"],[63793,1,"\u6AD3"],[63794,1,"\u7210"],[63795,1,"\u76E7"],[63796,1,"\u8001"],[63797,1,"\u8606"],[63798,1,"\u865C"],[63799,1,"\u8DEF"],[63800,1,"\u9732"],[63801,1,"\u9B6F"],[63802,1,"\u9DFA"],[63803,1,"\u788C"],[63804,1,"\u797F"],[63805,1,"\u7DA0"],[63806,1,"\u83C9"],[63807,1,"\u9304"],[63808,1,"\u9E7F"],[63809,1,"\u8AD6"],[63810,1,"\u58DF"],[63811,1,"\u5F04"],[63812,1,"\u7C60"],[63813,1,"\u807E"],[63814,1,"\u7262"],[63815,1,"\u78CA"],[63816,1,"\u8CC2"],[63817,1,"\u96F7"],[63818,1,"\u58D8"],[63819,1,"\u5C62"],[63820,1,"\u6A13"],[63821,1,"\u6DDA"],[63822,1,"\u6F0F"],[63823,1,"\u7D2F"],[63824,1,"\u7E37"],[63825,1,"\u964B"],[63826,1,"\u52D2"],[63827,1,"\u808B"],[63828,1,"\u51DC"],[63829,1,"\u51CC"],[63830,1,"\u7A1C"],[63831,1,"\u7DBE"],[63832,1,"\u83F1"],[63833,1,"\u9675"],[63834,1,"\u8B80"],[63835,1,"\u62CF"],[63836,1,"\u6A02"],[63837,1,"\u8AFE"],[63838,1,"\u4E39"],[63839,1,"\u5BE7"],[63840,1,"\u6012"],[63841,1,"\u7387"],[63842,1,"\u7570"],[63843,1,"\u5317"],[63844,1,"\u78FB"],[63845,1,"\u4FBF"],[63846,1,"\u5FA9"],[63847,1,"\u4E0D"],[63848,1,"\u6CCC"],[63849,1,"\u6578"],[63850,1,"\u7D22"],[63851,1,"\u53C3"],[63852,1,"\u585E"],[63853,1,"\u7701"],[63854,1,"\u8449"],[63855,1,"\u8AAA"],[63856,1,"\u6BBA"],[63857,1,"\u8FB0"],[63858,1,"\u6C88"],[63859,1,"\u62FE"],[63860,1,"\u82E5"],[63861,1,"\u63A0"],[63862,1,"\u7565"],[63863,1,"\u4EAE"],[63864,1,"\u5169"],[63865,1,"\u51C9"],[63866,1,"\u6881"],[63867,1,"\u7CE7"],[63868,1,"\u826F"],[63869,1,"\u8AD2"],[63870,1,"\u91CF"],[63871,1,"\u52F5"],[63872,1,"\u5442"],[63873,1,"\u5973"],[63874,1,"\u5EEC"],[63875,1,"\u65C5"],[63876,1,"\u6FFE"],[63877,1,"\u792A"],[63878,1,"\u95AD"],[63879,1,"\u9A6A"],[63880,1,"\u9E97"],[63881,1,"\u9ECE"],[63882,1,"\u529B"],[63883,1,"\u66C6"],[63884,1,"\u6B77"],[63885,1,"\u8F62"],[63886,1,"\u5E74"],[63887,1,"\u6190"],[63888,1,"\u6200"],[63889,1,"\u649A"],[63890,1,"\u6F23"],[63891,1,"\u7149"],[63892,1,"\u7489"],[63893,1,"\u79CA"],[63894,1,"\u7DF4"],[63895,1,"\u806F"],[63896,1,"\u8F26"],[63897,1,"\u84EE"],[63898,1,"\u9023"],[63899,1,"\u934A"],[63900,1,"\u5217"],[63901,1,"\u52A3"],[63902,1,"\u54BD"],[63903,1,"\u70C8"],[63904,1,"\u88C2"],[63905,1,"\u8AAA"],[63906,1,"\u5EC9"],[63907,1,"\u5FF5"],[63908,1,"\u637B"],[63909,1,"\u6BAE"],[63910,1,"\u7C3E"],[63911,1,"\u7375"],[63912,1,"\u4EE4"],[63913,1,"\u56F9"],[63914,1,"\u5BE7"],[63915,1,"\u5DBA"],[63916,1,"\u601C"],[63917,1,"\u73B2"],[63918,1,"\u7469"],[63919,1,"\u7F9A"],[63920,1,"\u8046"],[63921,1,"\u9234"],[63922,1,"\u96F6"],[63923,1,"\u9748"],[63924,1,"\u9818"],[63925,1,"\u4F8B"],[63926,1,"\u79AE"],[63927,1,"\u91B4"],[63928,1,"\u96B8"],[63929,1,"\u60E1"],[63930,1,"\u4E86"],[63931,1,"\u50DA"],[63932,1,"\u5BEE"],[63933,1,"\u5C3F"],[63934,1,"\u6599"],[63935,1,"\u6A02"],[63936,1,"\u71CE"],[63937,1,"\u7642"],[63938,1,"\u84FC"],[63939,1,"\u907C"],[63940,1,"\u9F8D"],[63941,1,"\u6688"],[63942,1,"\u962E"],[63943,1,"\u5289"],[63944,1,"\u677B"],[63945,1,"\u67F3"],[63946,1,"\u6D41"],[63947,1,"\u6E9C"],[63948,1,"\u7409"],[63949,1,"\u7559"],[63950,1,"\u786B"],[63951,1,"\u7D10"],[63952,1,"\u985E"],[63953,1,"\u516D"],[63954,1,"\u622E"],[63955,1,"\u9678"],[63956,1,"\u502B"],[63957,1,"\u5D19"],[63958,1,"\u6DEA"],[63959,1,"\u8F2A"],[63960,1,"\u5F8B"],[63961,1,"\u6144"],[63962,1,"\u6817"],[63963,1,"\u7387"],[63964,1,"\u9686"],[63965,1,"\u5229"],[63966,1,"\u540F"],[63967,1,"\u5C65"],[63968,1,"\u6613"],[63969,1,"\u674E"],[63970,1,"\u68A8"],[63971,1,"\u6CE5"],[63972,1,"\u7406"],[63973,1,"\u75E2"],[63974,1,"\u7F79"],[63975,1,"\u88CF"],[63976,1,"\u88E1"],[63977,1,"\u91CC"],[63978,1,"\u96E2"],[63979,1,"\u533F"],[63980,1,"\u6EBA"],[63981,1,"\u541D"],[63982,1,"\u71D0"],[63983,1,"\u7498"],[63984,1,"\u85FA"],[63985,1,"\u96A3"],[63986,1,"\u9C57"],[63987,1,"\u9E9F"],[63988,1,"\u6797"],[63989,1,"\u6DCB"],[63990,1,"\u81E8"],[63991,1,"\u7ACB"],[63992,1,"\u7B20"],[63993,1,"\u7C92"],[63994,1,"\u72C0"],[63995,1,"\u7099"],[63996,1,"\u8B58"],[63997,1,"\u4EC0"],[63998,1,"\u8336"],[63999,1,"\u523A"],[64e3,1,"\u5207"],[64001,1,"\u5EA6"],[64002,1,"\u62D3"],[64003,1,"\u7CD6"],[64004,1,"\u5B85"],[64005,1,"\u6D1E"],[64006,1,"\u66B4"],[64007,1,"\u8F3B"],[64008,1,"\u884C"],[64009,1,"\u964D"],[64010,1,"\u898B"],[64011,1,"\u5ED3"],[64012,1,"\u5140"],[64013,1,"\u55C0"],[[64014,64015],2],[64016,1,"\u585A"],[64017,2],[64018,1,"\u6674"],[[64019,64020],2],[64021,1,"\u51DE"],[64022,1,"\u732A"],[64023,1,"\u76CA"],[64024,1,"\u793C"],[64025,1,"\u795E"],[64026,1,"\u7965"],[64027,1,"\u798F"],[64028,1,"\u9756"],[64029,1,"\u7CBE"],[64030,1,"\u7FBD"],[64031,2],[64032,1,"\u8612"],[64033,2],[64034,1,"\u8AF8"],[[64035,64036],2],[64037,1,"\u9038"],[64038,1,"\u90FD"],[[64039,64041],2],[64042,1,"\u98EF"],[64043,1,"\u98FC"],[64044,1,"\u9928"],[64045,1,"\u9DB4"],[64046,1,"\u90DE"],[64047,1,"\u96B7"],[64048,1,"\u4FAE"],[64049,1,"\u50E7"],[64050,1,"\u514D"],[64051,1,"\u52C9"],[64052,1,"\u52E4"],[64053,1,"\u5351"],[64054,1,"\u559D"],[64055,1,"\u5606"],[64056,1,"\u5668"],[64057,1,"\u5840"],[64058,1,"\u58A8"],[64059,1,"\u5C64"],[64060,1,"\u5C6E"],[64061,1,"\u6094"],[64062,1,"\u6168"],[64063,1,"\u618E"],[64064,1,"\u61F2"],[64065,1,"\u654F"],[64066,1,"\u65E2"],[64067,1,"\u6691"],[64068,1,"\u6885"],[64069,1,"\u6D77"],[64070,1,"\u6E1A"],[64071,1,"\u6F22"],[64072,1,"\u716E"],[64073,1,"\u722B"],[64074,1,"\u7422"],[64075,1,"\u7891"],[64076,1,"\u793E"],[64077,1,"\u7949"],[64078,1,"\u7948"],[64079,1,"\u7950"],[64080,1,"\u7956"],[64081,1,"\u795D"],[64082,1,"\u798D"],[64083,1,"\u798E"],[64084,1,"\u7A40"],[64085,1,"\u7A81"],[64086,1,"\u7BC0"],[64087,1,"\u7DF4"],[64088,1,"\u7E09"],[64089,1,"\u7E41"],[64090,1,"\u7F72"],[64091,1,"\u8005"],[64092,1,"\u81ED"],[[64093,64094],1,"\u8279"],[64095,1,"\u8457"],[64096,1,"\u8910"],[64097,1,"\u8996"],[64098,1,"\u8B01"],[64099,1,"\u8B39"],[64100,1,"\u8CD3"],[64101,1,"\u8D08"],[64102,1,"\u8FB6"],[64103,1,"\u9038"],[64104,1,"\u96E3"],[64105,1,"\u97FF"],[64106,1,"\u983B"],[64107,1,"\u6075"],[64108,1,"\u{242EE}"],[64109,1,"\u8218"],[[64110,64111],3],[64112,1,"\u4E26"],[64113,1,"\u51B5"],[64114,1,"\u5168"],[64115,1,"\u4F80"],[64116,1,"\u5145"],[64117,1,"\u5180"],[64118,1,"\u52C7"],[64119,1,"\u52FA"],[64120,1,"\u559D"],[64121,1,"\u5555"],[64122,1,"\u5599"],[64123,1,"\u55E2"],[64124,1,"\u585A"],[64125,1,"\u58B3"],[64126,1,"\u5944"],[64127,1,"\u5954"],[64128,1,"\u5A62"],[64129,1,"\u5B28"],[64130,1,"\u5ED2"],[64131,1,"\u5ED9"],[64132,1,"\u5F69"],[64133,1,"\u5FAD"],[64134,1,"\u60D8"],[64135,1,"\u614E"],[64136,1,"\u6108"],[64137,1,"\u618E"],[64138,1,"\u6160"],[64139,1,"\u61F2"],[64140,1,"\u6234"],[64141,1,"\u63C4"],[64142,1,"\u641C"],[64143,1,"\u6452"],[64144,1,"\u6556"],[64145,1,"\u6674"],[64146,1,"\u6717"],[64147,1,"\u671B"],[64148,1,"\u6756"],[64149,1,"\u6B79"],[64150,1,"\u6BBA"],[64151,1,"\u6D41"],[64152,1,"\u6EDB"],[64153,1,"\u6ECB"],[64154,1,"\u6F22"],[64155,1,"\u701E"],[64156,1,"\u716E"],[64157,1,"\u77A7"],[64158,1,"\u7235"],[64159,1,"\u72AF"],[64160,1,"\u732A"],[64161,1,"\u7471"],[64162,1,"\u7506"],[64163,1,"\u753B"],[64164,1,"\u761D"],[64165,1,"\u761F"],[64166,1,"\u76CA"],[64167,1,"\u76DB"],[64168,1,"\u76F4"],[64169,1,"\u774A"],[64170,1,"\u7740"],[64171,1,"\u78CC"],[64172,1,"\u7AB1"],[64173,1,"\u7BC0"],[64174,1,"\u7C7B"],[64175,1,"\u7D5B"],[64176,1,"\u7DF4"],[64177,1,"\u7F3E"],[64178,1,"\u8005"],[64179,1,"\u8352"],[64180,1,"\u83EF"],[64181,1,"\u8779"],[64182,1,"\u8941"],[64183,1,"\u8986"],[64184,1,"\u8996"],[64185,1,"\u8ABF"],[64186,1,"\u8AF8"],[64187,1,"\u8ACB"],[64188,1,"\u8B01"],[64189,1,"\u8AFE"],[64190,1,"\u8AED"],[64191,1,"\u8B39"],[64192,1,"\u8B8A"],[64193,1,"\u8D08"],[64194,1,"\u8F38"],[64195,1,"\u9072"],[64196,1,"\u9199"],[64197,1,"\u9276"],[64198,1,"\u967C"],[64199,1,"\u96E3"],[64200,1,"\u9756"],[64201,1,"\u97DB"],[64202,1,"\u97FF"],[64203,1,"\u980B"],[64204,1,"\u983B"],[64205,1,"\u9B12"],[64206,1,"\u9F9C"],[64207,1,"\u{2284A}"],[64208,1,"\u{22844}"],[64209,1,"\u{233D5}"],[64210,1,"\u3B9D"],[64211,1,"\u4018"],[64212,1,"\u4039"],[64213,1,"\u{25249}"],[64214,1,"\u{25CD0}"],[64215,1,"\u{27ED3}"],[64216,1,"\u9F43"],[64217,1,"\u9F8E"],[[64218,64255],3],[64256,1,"ff"],[64257,1,"fi"],[64258,1,"fl"],[64259,1,"ffi"],[64260,1,"ffl"],[[64261,64262],1,"st"],[[64263,64274],3],[64275,1,"\u0574\u0576"],[64276,1,"\u0574\u0565"],[64277,1,"\u0574\u056B"],[64278,1,"\u057E\u0576"],[64279,1,"\u0574\u056D"],[[64280,64284],3],[64285,1,"\u05D9\u05B4"],[64286,2],[64287,1,"\u05F2\u05B7"],[64288,1,"\u05E2"],[64289,1,"\u05D0"],[64290,1,"\u05D3"],[64291,1,"\u05D4"],[64292,1,"\u05DB"],[64293,1,"\u05DC"],[64294,1,"\u05DD"],[64295,1,"\u05E8"],[64296,1,"\u05EA"],[64297,1,"+"],[64298,1,"\u05E9\u05C1"],[64299,1,"\u05E9\u05C2"],[64300,1,"\u05E9\u05BC\u05C1"],[64301,1,"\u05E9\u05BC\u05C2"],[64302,1,"\u05D0\u05B7"],[64303,1,"\u05D0\u05B8"],[64304,1,"\u05D0\u05BC"],[64305,1,"\u05D1\u05BC"],[64306,1,"\u05D2\u05BC"],[64307,1,"\u05D3\u05BC"],[64308,1,"\u05D4\u05BC"],[64309,1,"\u05D5\u05BC"],[64310,1,"\u05D6\u05BC"],[64311,3],[64312,1,"\u05D8\u05BC"],[64313,1,"\u05D9\u05BC"],[64314,1,"\u05DA\u05BC"],[64315,1,"\u05DB\u05BC"],[64316,1,"\u05DC\u05BC"],[64317,3],[64318,1,"\u05DE\u05BC"],[64319,3],[64320,1,"\u05E0\u05BC"],[64321,1,"\u05E1\u05BC"],[64322,3],[64323,1,"\u05E3\u05BC"],[64324,1,"\u05E4\u05BC"],[64325,3],[64326,1,"\u05E6\u05BC"],[64327,1,"\u05E7\u05BC"],[64328,1,"\u05E8\u05BC"],[64329,1,"\u05E9\u05BC"],[64330,1,"\u05EA\u05BC"],[64331,1,"\u05D5\u05B9"],[64332,1,"\u05D1\u05BF"],[64333,1,"\u05DB\u05BF"],[64334,1,"\u05E4\u05BF"],[64335,1,"\u05D0\u05DC"],[[64336,64337],1,"\u0671"],[[64338,64341],1,"\u067B"],[[64342,64345],1,"\u067E"],[[64346,64349],1,"\u0680"],[[64350,64353],1,"\u067A"],[[64354,64357],1,"\u067F"],[[64358,64361],1,"\u0679"],[[64362,64365],1,"\u06A4"],[[64366,64369],1,"\u06A6"],[[64370,64373],1,"\u0684"],[[64374,64377],1,"\u0683"],[[64378,64381],1,"\u0686"],[[64382,64385],1,"\u0687"],[[64386,64387],1,"\u068D"],[[64388,64389],1,"\u068C"],[[64390,64391],1,"\u068E"],[[64392,64393],1,"\u0688"],[[64394,64395],1,"\u0698"],[[64396,64397],1,"\u0691"],[[64398,64401],1,"\u06A9"],[[64402,64405],1,"\u06AF"],[[64406,64409],1,"\u06B3"],[[64410,64413],1,"\u06B1"],[[64414,64415],1,"\u06BA"],[[64416,64419],1,"\u06BB"],[[64420,64421],1,"\u06C0"],[[64422,64425],1,"\u06C1"],[[64426,64429],1,"\u06BE"],[[64430,64431],1,"\u06D2"],[[64432,64433],1,"\u06D3"],[[64434,64449],2],[64450,2],[[64451,64466],3],[[64467,64470],1,"\u06AD"],[[64471,64472],1,"\u06C7"],[[64473,64474],1,"\u06C6"],[[64475,64476],1,"\u06C8"],[64477,1,"\u06C7\u0674"],[[64478,64479],1,"\u06CB"],[[64480,64481],1,"\u06C5"],[[64482,64483],1,"\u06C9"],[[64484,64487],1,"\u06D0"],[[64488,64489],1,"\u0649"],[[64490,64491],1,"\u0626\u0627"],[[64492,64493],1,"\u0626\u06D5"],[[64494,64495],1,"\u0626\u0648"],[[64496,64497],1,"\u0626\u06C7"],[[64498,64499],1,"\u0626\u06C6"],[[64500,64501],1,"\u0626\u06C8"],[[64502,64504],1,"\u0626\u06D0"],[[64505,64507],1,"\u0626\u0649"],[[64508,64511],1,"\u06CC"],[64512,1,"\u0626\u062C"],[64513,1,"\u0626\u062D"],[64514,1,"\u0626\u0645"],[64515,1,"\u0626\u0649"],[64516,1,"\u0626\u064A"],[64517,1,"\u0628\u062C"],[64518,1,"\u0628\u062D"],[64519,1,"\u0628\u062E"],[64520,1,"\u0628\u0645"],[64521,1,"\u0628\u0649"],[64522,1,"\u0628\u064A"],[64523,1,"\u062A\u062C"],[64524,1,"\u062A\u062D"],[64525,1,"\u062A\u062E"],[64526,1,"\u062A\u0645"],[64527,1,"\u062A\u0649"],[64528,1,"\u062A\u064A"],[64529,1,"\u062B\u062C"],[64530,1,"\u062B\u0645"],[64531,1,"\u062B\u0649"],[64532,1,"\u062B\u064A"],[64533,1,"\u062C\u062D"],[64534,1,"\u062C\u0645"],[64535,1,"\u062D\u062C"],[64536,1,"\u062D\u0645"],[64537,1,"\u062E\u062C"],[64538,1,"\u062E\u062D"],[64539,1,"\u062E\u0645"],[64540,1,"\u0633\u062C"],[64541,1,"\u0633\u062D"],[64542,1,"\u0633\u062E"],[64543,1,"\u0633\u0645"],[64544,1,"\u0635\u062D"],[64545,1,"\u0635\u0645"],[64546,1,"\u0636\u062C"],[64547,1,"\u0636\u062D"],[64548,1,"\u0636\u062E"],[64549,1,"\u0636\u0645"],[64550,1,"\u0637\u062D"],[64551,1,"\u0637\u0645"],[64552,1,"\u0638\u0645"],[64553,1,"\u0639\u062C"],[64554,1,"\u0639\u0645"],[64555,1,"\u063A\u062C"],[64556,1,"\u063A\u0645"],[64557,1,"\u0641\u062C"],[64558,1,"\u0641\u062D"],[64559,1,"\u0641\u062E"],[64560,1,"\u0641\u0645"],[64561,1,"\u0641\u0649"],[64562,1,"\u0641\u064A"],[64563,1,"\u0642\u062D"],[64564,1,"\u0642\u0645"],[64565,1,"\u0642\u0649"],[64566,1,"\u0642\u064A"],[64567,1,"\u0643\u0627"],[64568,1,"\u0643\u062C"],[64569,1,"\u0643\u062D"],[64570,1,"\u0643\u062E"],[64571,1,"\u0643\u0644"],[64572,1,"\u0643\u0645"],[64573,1,"\u0643\u0649"],[64574,1,"\u0643\u064A"],[64575,1,"\u0644\u062C"],[64576,1,"\u0644\u062D"],[64577,1,"\u0644\u062E"],[64578,1,"\u0644\u0645"],[64579,1,"\u0644\u0649"],[64580,1,"\u0644\u064A"],[64581,1,"\u0645\u062C"],[64582,1,"\u0645\u062D"],[64583,1,"\u0645\u062E"],[64584,1,"\u0645\u0645"],[64585,1,"\u0645\u0649"],[64586,1,"\u0645\u064A"],[64587,1,"\u0646\u062C"],[64588,1,"\u0646\u062D"],[64589,1,"\u0646\u062E"],[64590,1,"\u0646\u0645"],[64591,1,"\u0646\u0649"],[64592,1,"\u0646\u064A"],[64593,1,"\u0647\u062C"],[64594,1,"\u0647\u0645"],[64595,1,"\u0647\u0649"],[64596,1,"\u0647\u064A"],[64597,1,"\u064A\u062C"],[64598,1,"\u064A\u062D"],[64599,1,"\u064A\u062E"],[64600,1,"\u064A\u0645"],[64601,1,"\u064A\u0649"],[64602,1,"\u064A\u064A"],[64603,1,"\u0630\u0670"],[64604,1,"\u0631\u0670"],[64605,1,"\u0649\u0670"],[64606,1," \u064C\u0651"],[64607,1," \u064D\u0651"],[64608,1," \u064E\u0651"],[64609,1," \u064F\u0651"],[64610,1," \u0650\u0651"],[64611,1," \u0651\u0670"],[64612,1,"\u0626\u0631"],[64613,1,"\u0626\u0632"],[64614,1,"\u0626\u0645"],[64615,1,"\u0626\u0646"],[64616,1,"\u0626\u0649"],[64617,1,"\u0626\u064A"],[64618,1,"\u0628\u0631"],[64619,1,"\u0628\u0632"],[64620,1,"\u0628\u0645"],[64621,1,"\u0628\u0646"],[64622,1,"\u0628\u0649"],[64623,1,"\u0628\u064A"],[64624,1,"\u062A\u0631"],[64625,1,"\u062A\u0632"],[64626,1,"\u062A\u0645"],[64627,1,"\u062A\u0646"],[64628,1,"\u062A\u0649"],[64629,1,"\u062A\u064A"],[64630,1,"\u062B\u0631"],[64631,1,"\u062B\u0632"],[64632,1,"\u062B\u0645"],[64633,1,"\u062B\u0646"],[64634,1,"\u062B\u0649"],[64635,1,"\u062B\u064A"],[64636,1,"\u0641\u0649"],[64637,1,"\u0641\u064A"],[64638,1,"\u0642\u0649"],[64639,1,"\u0642\u064A"],[64640,1,"\u0643\u0627"],[64641,1,"\u0643\u0644"],[64642,1,"\u0643\u0645"],[64643,1,"\u0643\u0649"],[64644,1,"\u0643\u064A"],[64645,1,"\u0644\u0645"],[64646,1,"\u0644\u0649"],[64647,1,"\u0644\u064A"],[64648,1,"\u0645\u0627"],[64649,1,"\u0645\u0645"],[64650,1,"\u0646\u0631"],[64651,1,"\u0646\u0632"],[64652,1,"\u0646\u0645"],[64653,1,"\u0646\u0646"],[64654,1,"\u0646\u0649"],[64655,1,"\u0646\u064A"],[64656,1,"\u0649\u0670"],[64657,1,"\u064A\u0631"],[64658,1,"\u064A\u0632"],[64659,1,"\u064A\u0645"],[64660,1,"\u064A\u0646"],[64661,1,"\u064A\u0649"],[64662,1,"\u064A\u064A"],[64663,1,"\u0626\u062C"],[64664,1,"\u0626\u062D"],[64665,1,"\u0626\u062E"],[64666,1,"\u0626\u0645"],[64667,1,"\u0626\u0647"],[64668,1,"\u0628\u062C"],[64669,1,"\u0628\u062D"],[64670,1,"\u0628\u062E"],[64671,1,"\u0628\u0645"],[64672,1,"\u0628\u0647"],[64673,1,"\u062A\u062C"],[64674,1,"\u062A\u062D"],[64675,1,"\u062A\u062E"],[64676,1,"\u062A\u0645"],[64677,1,"\u062A\u0647"],[64678,1,"\u062B\u0645"],[64679,1,"\u062C\u062D"],[64680,1,"\u062C\u0645"],[64681,1,"\u062D\u062C"],[64682,1,"\u062D\u0645"],[64683,1,"\u062E\u062C"],[64684,1,"\u062E\u0645"],[64685,1,"\u0633\u062C"],[64686,1,"\u0633\u062D"],[64687,1,"\u0633\u062E"],[64688,1,"\u0633\u0645"],[64689,1,"\u0635\u062D"],[64690,1,"\u0635\u062E"],[64691,1,"\u0635\u0645"],[64692,1,"\u0636\u062C"],[64693,1,"\u0636\u062D"],[64694,1,"\u0636\u062E"],[64695,1,"\u0636\u0645"],[64696,1,"\u0637\u062D"],[64697,1,"\u0638\u0645"],[64698,1,"\u0639\u062C"],[64699,1,"\u0639\u0645"],[64700,1,"\u063A\u062C"],[64701,1,"\u063A\u0645"],[64702,1,"\u0641\u062C"],[64703,1,"\u0641\u062D"],[64704,1,"\u0641\u062E"],[64705,1,"\u0641\u0645"],[64706,1,"\u0642\u062D"],[64707,1,"\u0642\u0645"],[64708,1,"\u0643\u062C"],[64709,1,"\u0643\u062D"],[64710,1,"\u0643\u062E"],[64711,1,"\u0643\u0644"],[64712,1,"\u0643\u0645"],[64713,1,"\u0644\u062C"],[64714,1,"\u0644\u062D"],[64715,1,"\u0644\u062E"],[64716,1,"\u0644\u0645"],[64717,1,"\u0644\u0647"],[64718,1,"\u0645\u062C"],[64719,1,"\u0645\u062D"],[64720,1,"\u0645\u062E"],[64721,1,"\u0645\u0645"],[64722,1,"\u0646\u062C"],[64723,1,"\u0646\u062D"],[64724,1,"\u0646\u062E"],[64725,1,"\u0646\u0645"],[64726,1,"\u0646\u0647"],[64727,1,"\u0647\u062C"],[64728,1,"\u0647\u0645"],[64729,1,"\u0647\u0670"],[64730,1,"\u064A\u062C"],[64731,1,"\u064A\u062D"],[64732,1,"\u064A\u062E"],[64733,1,"\u064A\u0645"],[64734,1,"\u064A\u0647"],[64735,1,"\u0626\u0645"],[64736,1,"\u0626\u0647"],[64737,1,"\u0628\u0645"],[64738,1,"\u0628\u0647"],[64739,1,"\u062A\u0645"],[64740,1,"\u062A\u0647"],[64741,1,"\u062B\u0645"],[64742,1,"\u062B\u0647"],[64743,1,"\u0633\u0645"],[64744,1,"\u0633\u0647"],[64745,1,"\u0634\u0645"],[64746,1,"\u0634\u0647"],[64747,1,"\u0643\u0644"],[64748,1,"\u0643\u0645"],[64749,1,"\u0644\u0645"],[64750,1,"\u0646\u0645"],[64751,1,"\u0646\u0647"],[64752,1,"\u064A\u0645"],[64753,1,"\u064A\u0647"],[64754,1,"\u0640\u064E\u0651"],[64755,1,"\u0640\u064F\u0651"],[64756,1,"\u0640\u0650\u0651"],[64757,1,"\u0637\u0649"],[64758,1,"\u0637\u064A"],[64759,1,"\u0639\u0649"],[64760,1,"\u0639\u064A"],[64761,1,"\u063A\u0649"],[64762,1,"\u063A\u064A"],[64763,1,"\u0633\u0649"],[64764,1,"\u0633\u064A"],[64765,1,"\u0634\u0649"],[64766,1,"\u0634\u064A"],[64767,1,"\u062D\u0649"],[64768,1,"\u062D\u064A"],[64769,1,"\u062C\u0649"],[64770,1,"\u062C\u064A"],[64771,1,"\u062E\u0649"],[64772,1,"\u062E\u064A"],[64773,1,"\u0635\u0649"],[64774,1,"\u0635\u064A"],[64775,1,"\u0636\u0649"],[64776,1,"\u0636\u064A"],[64777,1,"\u0634\u062C"],[64778,1,"\u0634\u062D"],[64779,1,"\u0634\u062E"],[64780,1,"\u0634\u0645"],[64781,1,"\u0634\u0631"],[64782,1,"\u0633\u0631"],[64783,1,"\u0635\u0631"],[64784,1,"\u0636\u0631"],[64785,1,"\u0637\u0649"],[64786,1,"\u0637\u064A"],[64787,1,"\u0639\u0649"],[64788,1,"\u0639\u064A"],[64789,1,"\u063A\u0649"],[64790,1,"\u063A\u064A"],[64791,1,"\u0633\u0649"],[64792,1,"\u0633\u064A"],[64793,1,"\u0634\u0649"],[64794,1,"\u0634\u064A"],[64795,1,"\u062D\u0649"],[64796,1,"\u062D\u064A"],[64797,1,"\u062C\u0649"],[64798,1,"\u062C\u064A"],[64799,1,"\u062E\u0649"],[64800,1,"\u062E\u064A"],[64801,1,"\u0635\u0649"],[64802,1,"\u0635\u064A"],[64803,1,"\u0636\u0649"],[64804,1,"\u0636\u064A"],[64805,1,"\u0634\u062C"],[64806,1,"\u0634\u062D"],[64807,1,"\u0634\u062E"],[64808,1,"\u0634\u0645"],[64809,1,"\u0634\u0631"],[64810,1,"\u0633\u0631"],[64811,1,"\u0635\u0631"],[64812,1,"\u0636\u0631"],[64813,1,"\u0634\u062C"],[64814,1,"\u0634\u062D"],[64815,1,"\u0634\u062E"],[64816,1,"\u0634\u0645"],[64817,1,"\u0633\u0647"],[64818,1,"\u0634\u0647"],[64819,1,"\u0637\u0645"],[64820,1,"\u0633\u062C"],[64821,1,"\u0633\u062D"],[64822,1,"\u0633\u062E"],[64823,1,"\u0634\u062C"],[64824,1,"\u0634\u062D"],[64825,1,"\u0634\u062E"],[64826,1,"\u0637\u0645"],[64827,1,"\u0638\u0645"],[[64828,64829],1,"\u0627\u064B"],[[64830,64831],2],[[64832,64847],2],[64848,1,"\u062A\u062C\u0645"],[[64849,64850],1,"\u062A\u062D\u062C"],[64851,1,"\u062A\u062D\u0645"],[64852,1,"\u062A\u062E\u0645"],[64853,1,"\u062A\u0645\u062C"],[64854,1,"\u062A\u0645\u062D"],[64855,1,"\u062A\u0645\u062E"],[[64856,64857],1,"\u062C\u0645\u062D"],[64858,1,"\u062D\u0645\u064A"],[64859,1,"\u062D\u0645\u0649"],[64860,1,"\u0633\u062D\u062C"],[64861,1,"\u0633\u062C\u062D"],[64862,1,"\u0633\u062C\u0649"],[[64863,64864],1,"\u0633\u0645\u062D"],[64865,1,"\u0633\u0645\u062C"],[[64866,64867],1,"\u0633\u0645\u0645"],[[64868,64869],1,"\u0635\u062D\u062D"],[64870,1,"\u0635\u0645\u0645"],[[64871,64872],1,"\u0634\u062D\u0645"],[64873,1,"\u0634\u062C\u064A"],[[64874,64875],1,"\u0634\u0645\u062E"],[[64876,64877],1,"\u0634\u0645\u0645"],[64878,1,"\u0636\u062D\u0649"],[[64879,64880],1,"\u0636\u062E\u0645"],[[64881,64882],1,"\u0637\u0645\u062D"],[64883,1,"\u0637\u0645\u0645"],[64884,1,"\u0637\u0645\u064A"],[64885,1,"\u0639\u062C\u0645"],[[64886,64887],1,"\u0639\u0645\u0645"],[64888,1,"\u0639\u0645\u0649"],[64889,1,"\u063A\u0645\u0645"],[64890,1,"\u063A\u0645\u064A"],[64891,1,"\u063A\u0645\u0649"],[[64892,64893],1,"\u0641\u062E\u0645"],[64894,1,"\u0642\u0645\u062D"],[64895,1,"\u0642\u0645\u0645"],[64896,1,"\u0644\u062D\u0645"],[64897,1,"\u0644\u062D\u064A"],[64898,1,"\u0644\u062D\u0649"],[[64899,64900],1,"\u0644\u062C\u062C"],[[64901,64902],1,"\u0644\u062E\u0645"],[[64903,64904],1,"\u0644\u0645\u062D"],[64905,1,"\u0645\u062D\u062C"],[64906,1,"\u0645\u062D\u0645"],[64907,1,"\u0645\u062D\u064A"],[64908,1,"\u0645\u062C\u062D"],[64909,1,"\u0645\u062C\u0645"],[64910,1,"\u0645\u062E\u062C"],[64911,1,"\u0645\u062E\u0645"],[[64912,64913],3],[64914,1,"\u0645\u062C\u062E"],[64915,1,"\u0647\u0645\u062C"],[64916,1,"\u0647\u0645\u0645"],[64917,1,"\u0646\u062D\u0645"],[64918,1,"\u0646\u062D\u0649"],[[64919,64920],1,"\u0646\u062C\u0645"],[64921,1,"\u0646\u062C\u0649"],[64922,1,"\u0646\u0645\u064A"],[64923,1,"\u0646\u0645\u0649"],[[64924,64925],1,"\u064A\u0645\u0645"],[64926,1,"\u0628\u062E\u064A"],[64927,1,"\u062A\u062C\u064A"],[64928,1,"\u062A\u062C\u0649"],[64929,1,"\u062A\u062E\u064A"],[64930,1,"\u062A\u062E\u0649"],[64931,1,"\u062A\u0645\u064A"],[64932,1,"\u062A\u0645\u0649"],[64933,1,"\u062C\u0645\u064A"],[64934,1,"\u062C\u062D\u0649"],[64935,1,"\u062C\u0645\u0649"],[64936,1,"\u0633\u062E\u0649"],[64937,1,"\u0635\u062D\u064A"],[64938,1,"\u0634\u062D\u064A"],[64939,1,"\u0636\u062D\u064A"],[64940,1,"\u0644\u062C\u064A"],[64941,1,"\u0644\u0645\u064A"],[64942,1,"\u064A\u062D\u064A"],[64943,1,"\u064A\u062C\u064A"],[64944,1,"\u064A\u0645\u064A"],[64945,1,"\u0645\u0645\u064A"],[64946,1,"\u0642\u0645\u064A"],[64947,1,"\u0646\u062D\u064A"],[64948,1,"\u0642\u0645\u062D"],[64949,1,"\u0644\u062D\u0645"],[64950,1,"\u0639\u0645\u064A"],[64951,1,"\u0643\u0645\u064A"],[64952,1,"\u0646\u062C\u062D"],[64953,1,"\u0645\u062E\u064A"],[64954,1,"\u0644\u062C\u0645"],[64955,1,"\u0643\u0645\u0645"],[64956,1,"\u0644\u062C\u0645"],[64957,1,"\u0646\u062C\u062D"],[64958,1,"\u062C\u062D\u064A"],[64959,1,"\u062D\u062C\u064A"],[64960,1,"\u0645\u062C\u064A"],[64961,1,"\u0641\u0645\u064A"],[64962,1,"\u0628\u062D\u064A"],[64963,1,"\u0643\u0645\u0645"],[64964,1,"\u0639\u062C\u0645"],[64965,1,"\u0635\u0645\u0645"],[64966,1,"\u0633\u062E\u064A"],[64967,1,"\u0646\u062C\u064A"],[[64968,64974],3],[64975,2],[[64976,65007],3],[65008,1,"\u0635\u0644\u06D2"],[65009,1,"\u0642\u0644\u06D2"],[65010,1,"\u0627\u0644\u0644\u0647"],[65011,1,"\u0627\u0643\u0628\u0631"],[65012,1,"\u0645\u062D\u0645\u062F"],[65013,1,"\u0635\u0644\u0639\u0645"],[65014,1,"\u0631\u0633\u0648\u0644"],[65015,1,"\u0639\u0644\u064A\u0647"],[65016,1,"\u0648\u0633\u0644\u0645"],[65017,1,"\u0635\u0644\u0649"],[65018,1,"\u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u064A\u0647 \u0648\u0633\u0644\u0645"],[65019,1,"\u062C\u0644 \u062C\u0644\u0627\u0644\u0647"],[65020,1,"\u0631\u06CC\u0627\u0644"],[65021,2],[[65022,65023],2],[[65024,65039],7],[65040,1,","],[65041,1,"\u3001"],[65042,3],[65043,1,":"],[65044,1,";"],[65045,1,"!"],[65046,1,"?"],[65047,1,"\u3016"],[65048,1,"\u3017"],[65049,3],[[65050,65055],3],[[65056,65059],2],[[65060,65062],2],[[65063,65069],2],[[65070,65071],2],[65072,3],[65073,1,"\u2014"],[65074,1,"\u2013"],[[65075,65076],1,"_"],[65077,1,"("],[65078,1,")"],[65079,1,"{"],[65080,1,"}"],[65081,1,"\u3014"],[65082,1,"\u3015"],[65083,1,"\u3010"],[65084,1,"\u3011"],[65085,1,"\u300A"],[65086,1,"\u300B"],[65087,1,"\u3008"],[65088,1,"\u3009"],[65089,1,"\u300C"],[65090,1,"\u300D"],[65091,1,"\u300E"],[65092,1,"\u300F"],[[65093,65094],2],[65095,1,"["],[65096,1,"]"],[[65097,65100],1," \u0305"],[[65101,65103],1,"_"],[65104,1,","],[65105,1,"\u3001"],[65106,3],[65107,3],[65108,1,";"],[65109,1,":"],[65110,1,"?"],[65111,1,"!"],[65112,1,"\u2014"],[65113,1,"("],[65114,1,")"],[65115,1,"{"],[65116,1,"}"],[65117,1,"\u3014"],[65118,1,"\u3015"],[65119,1,"#"],[65120,1,"&"],[65121,1,"*"],[65122,1,"+"],[65123,1,"-"],[65124,1,"<"],[65125,1,">"],[65126,1,"="],[65127,3],[65128,1,"\\"],[65129,1,"$"],[65130,1,"%"],[65131,1,"@"],[[65132,65135],3],[65136,1," \u064B"],[65137,1,"\u0640\u064B"],[65138,1," \u064C"],[65139,2],[65140,1," \u064D"],[65141,3],[65142,1," \u064E"],[65143,1,"\u0640\u064E"],[65144,1," \u064F"],[65145,1,"\u0640\u064F"],[65146,1," \u0650"],[65147,1,"\u0640\u0650"],[65148,1," \u0651"],[65149,1,"\u0640\u0651"],[65150,1," \u0652"],[65151,1,"\u0640\u0652"],[65152,1,"\u0621"],[[65153,65154],1,"\u0622"],[[65155,65156],1,"\u0623"],[[65157,65158],1,"\u0624"],[[65159,65160],1,"\u0625"],[[65161,65164],1,"\u0626"],[[65165,65166],1,"\u0627"],[[65167,65170],1,"\u0628"],[[65171,65172],1,"\u0629"],[[65173,65176],1,"\u062A"],[[65177,65180],1,"\u062B"],[[65181,65184],1,"\u062C"],[[65185,65188],1,"\u062D"],[[65189,65192],1,"\u062E"],[[65193,65194],1,"\u062F"],[[65195,65196],1,"\u0630"],[[65197,65198],1,"\u0631"],[[65199,65200],1,"\u0632"],[[65201,65204],1,"\u0633"],[[65205,65208],1,"\u0634"],[[65209,65212],1,"\u0635"],[[65213,65216],1,"\u0636"],[[65217,65220],1,"\u0637"],[[65221,65224],1,"\u0638"],[[65225,65228],1,"\u0639"],[[65229,65232],1,"\u063A"],[[65233,65236],1,"\u0641"],[[65237,65240],1,"\u0642"],[[65241,65244],1,"\u0643"],[[65245,65248],1,"\u0644"],[[65249,65252],1,"\u0645"],[[65253,65256],1,"\u0646"],[[65257,65260],1,"\u0647"],[[65261,65262],1,"\u0648"],[[65263,65264],1,"\u0649"],[[65265,65268],1,"\u064A"],[[65269,65270],1,"\u0644\u0622"],[[65271,65272],1,"\u0644\u0623"],[[65273,65274],1,"\u0644\u0625"],[[65275,65276],1,"\u0644\u0627"],[[65277,65278],3],[65279,7],[65280,3],[65281,1,"!"],[65282,1,'"'],[65283,1,"#"],[65284,1,"$"],[65285,1,"%"],[65286,1,"&"],[65287,1,"'"],[65288,1,"("],[65289,1,")"],[65290,1,"*"],[65291,1,"+"],[65292,1,","],[65293,1,"-"],[65294,1,"."],[65295,1,"/"],[65296,1,"0"],[65297,1,"1"],[65298,1,"2"],[65299,1,"3"],[65300,1,"4"],[65301,1,"5"],[65302,1,"6"],[65303,1,"7"],[65304,1,"8"],[65305,1,"9"],[65306,1,":"],[65307,1,";"],[65308,1,"<"],[65309,1,"="],[65310,1,">"],[65311,1,"?"],[65312,1,"@"],[65313,1,"a"],[65314,1,"b"],[65315,1,"c"],[65316,1,"d"],[65317,1,"e"],[65318,1,"f"],[65319,1,"g"],[65320,1,"h"],[65321,1,"i"],[65322,1,"j"],[65323,1,"k"],[65324,1,"l"],[65325,1,"m"],[65326,1,"n"],[65327,1,"o"],[65328,1,"p"],[65329,1,"q"],[65330,1,"r"],[65331,1,"s"],[65332,1,"t"],[65333,1,"u"],[65334,1,"v"],[65335,1,"w"],[65336,1,"x"],[65337,1,"y"],[65338,1,"z"],[65339,1,"["],[65340,1,"\\"],[65341,1,"]"],[65342,1,"^"],[65343,1,"_"],[65344,1,"`"],[65345,1,"a"],[65346,1,"b"],[65347,1,"c"],[65348,1,"d"],[65349,1,"e"],[65350,1,"f"],[65351,1,"g"],[65352,1,"h"],[65353,1,"i"],[65354,1,"j"],[65355,1,"k"],[65356,1,"l"],[65357,1,"m"],[65358,1,"n"],[65359,1,"o"],[65360,1,"p"],[65361,1,"q"],[65362,1,"r"],[65363,1,"s"],[65364,1,"t"],[65365,1,"u"],[65366,1,"v"],[65367,1,"w"],[65368,1,"x"],[65369,1,"y"],[65370,1,"z"],[65371,1,"{"],[65372,1,"|"],[65373,1,"}"],[65374,1,"~"],[65375,1,"\u2985"],[65376,1,"\u2986"],[65377,1,"."],[65378,1,"\u300C"],[65379,1,"\u300D"],[65380,1,"\u3001"],[65381,1,"\u30FB"],[65382,1,"\u30F2"],[65383,1,"\u30A1"],[65384,1,"\u30A3"],[65385,1,"\u30A5"],[65386,1,"\u30A7"],[65387,1,"\u30A9"],[65388,1,"\u30E3"],[65389,1,"\u30E5"],[65390,1,"\u30E7"],[65391,1,"\u30C3"],[65392,1,"\u30FC"],[65393,1,"\u30A2"],[65394,1,"\u30A4"],[65395,1,"\u30A6"],[65396,1,"\u30A8"],[65397,1,"\u30AA"],[65398,1,"\u30AB"],[65399,1,"\u30AD"],[65400,1,"\u30AF"],[65401,1,"\u30B1"],[65402,1,"\u30B3"],[65403,1,"\u30B5"],[65404,1,"\u30B7"],[65405,1,"\u30B9"],[65406,1,"\u30BB"],[65407,1,"\u30BD"],[65408,1,"\u30BF"],[65409,1,"\u30C1"],[65410,1,"\u30C4"],[65411,1,"\u30C6"],[65412,1,"\u30C8"],[65413,1,"\u30CA"],[65414,1,"\u30CB"],[65415,1,"\u30CC"],[65416,1,"\u30CD"],[65417,1,"\u30CE"],[65418,1,"\u30CF"],[65419,1,"\u30D2"],[65420,1,"\u30D5"],[65421,1,"\u30D8"],[65422,1,"\u30DB"],[65423,1,"\u30DE"],[65424,1,"\u30DF"],[65425,1,"\u30E0"],[65426,1,"\u30E1"],[65427,1,"\u30E2"],[65428,1,"\u30E4"],[65429,1,"\u30E6"],[65430,1,"\u30E8"],[65431,1,"\u30E9"],[65432,1,"\u30EA"],[65433,1,"\u30EB"],[65434,1,"\u30EC"],[65435,1,"\u30ED"],[65436,1,"\u30EF"],[65437,1,"\u30F3"],[65438,1,"\u3099"],[65439,1,"\u309A"],[65440,7],[65441,1,"\u1100"],[65442,1,"\u1101"],[65443,1,"\u11AA"],[65444,1,"\u1102"],[65445,1,"\u11AC"],[65446,1,"\u11AD"],[65447,1,"\u1103"],[65448,1,"\u1104"],[65449,1,"\u1105"],[65450,1,"\u11B0"],[65451,1,"\u11B1"],[65452,1,"\u11B2"],[65453,1,"\u11B3"],[65454,1,"\u11B4"],[65455,1,"\u11B5"],[65456,1,"\u111A"],[65457,1,"\u1106"],[65458,1,"\u1107"],[65459,1,"\u1108"],[65460,1,"\u1121"],[65461,1,"\u1109"],[65462,1,"\u110A"],[65463,1,"\u110B"],[65464,1,"\u110C"],[65465,1,"\u110D"],[65466,1,"\u110E"],[65467,1,"\u110F"],[65468,1,"\u1110"],[65469,1,"\u1111"],[65470,1,"\u1112"],[[65471,65473],3],[65474,1,"\u1161"],[65475,1,"\u1162"],[65476,1,"\u1163"],[65477,1,"\u1164"],[65478,1,"\u1165"],[65479,1,"\u1166"],[[65480,65481],3],[65482,1,"\u1167"],[65483,1,"\u1168"],[65484,1,"\u1169"],[65485,1,"\u116A"],[65486,1,"\u116B"],[65487,1,"\u116C"],[[65488,65489],3],[65490,1,"\u116D"],[65491,1,"\u116E"],[65492,1,"\u116F"],[65493,1,"\u1170"],[65494,1,"\u1171"],[65495,1,"\u1172"],[[65496,65497],3],[65498,1,"\u1173"],[65499,1,"\u1174"],[65500,1,"\u1175"],[[65501,65503],3],[65504,1,"\xA2"],[65505,1,"\xA3"],[65506,1,"\xAC"],[65507,1," \u0304"],[65508,1,"\xA6"],[65509,1,"\xA5"],[65510,1,"\u20A9"],[65511,3],[65512,1,"\u2502"],[65513,1,"\u2190"],[65514,1,"\u2191"],[65515,1,"\u2192"],[65516,1,"\u2193"],[65517,1,"\u25A0"],[65518,1,"\u25CB"],[[65519,65528],3],[[65529,65531],3],[65532,3],[65533,3],[[65534,65535],3],[[65536,65547],2],[65548,3],[[65549,65574],2],[65575,3],[[65576,65594],2],[65595,3],[[65596,65597],2],[65598,3],[[65599,65613],2],[[65614,65615],3],[[65616,65629],2],[[65630,65663],3],[[65664,65786],2],[[65787,65791],3],[[65792,65794],2],[[65795,65798],3],[[65799,65843],2],[[65844,65846],3],[[65847,65855],2],[[65856,65930],2],[[65931,65932],2],[[65933,65934],2],[65935,3],[[65936,65947],2],[65948,2],[[65949,65951],3],[65952,2],[[65953,65999],3],[[66e3,66044],2],[66045,2],[[66046,66175],3],[[66176,66204],2],[[66205,66207],3],[[66208,66256],2],[[66257,66271],3],[66272,2],[[66273,66299],2],[[66300,66303],3],[[66304,66334],2],[66335,2],[[66336,66339],2],[[66340,66348],3],[[66349,66351],2],[[66352,66368],2],[66369,2],[[66370,66377],2],[66378,2],[[66379,66383],3],[[66384,66426],2],[[66427,66431],3],[[66432,66461],2],[66462,3],[66463,2],[[66464,66499],2],[[66500,66503],3],[[66504,66511],2],[[66512,66517],2],[[66518,66559],3],[66560,1,"\u{10428}"],[66561,1,"\u{10429}"],[66562,1,"\u{1042A}"],[66563,1,"\u{1042B}"],[66564,1,"\u{1042C}"],[66565,1,"\u{1042D}"],[66566,1,"\u{1042E}"],[66567,1,"\u{1042F}"],[66568,1,"\u{10430}"],[66569,1,"\u{10431}"],[66570,1,"\u{10432}"],[66571,1,"\u{10433}"],[66572,1,"\u{10434}"],[66573,1,"\u{10435}"],[66574,1,"\u{10436}"],[66575,1,"\u{10437}"],[66576,1,"\u{10438}"],[66577,1,"\u{10439}"],[66578,1,"\u{1043A}"],[66579,1,"\u{1043B}"],[66580,1,"\u{1043C}"],[66581,1,"\u{1043D}"],[66582,1,"\u{1043E}"],[66583,1,"\u{1043F}"],[66584,1,"\u{10440}"],[66585,1,"\u{10441}"],[66586,1,"\u{10442}"],[66587,1,"\u{10443}"],[66588,1,"\u{10444}"],[66589,1,"\u{10445}"],[66590,1,"\u{10446}"],[66591,1,"\u{10447}"],[66592,1,"\u{10448}"],[66593,1,"\u{10449}"],[66594,1,"\u{1044A}"],[66595,1,"\u{1044B}"],[66596,1,"\u{1044C}"],[66597,1,"\u{1044D}"],[66598,1,"\u{1044E}"],[66599,1,"\u{1044F}"],[[66600,66637],2],[[66638,66717],2],[[66718,66719],3],[[66720,66729],2],[[66730,66735],3],[66736,1,"\u{104D8}"],[66737,1,"\u{104D9}"],[66738,1,"\u{104DA}"],[66739,1,"\u{104DB}"],[66740,1,"\u{104DC}"],[66741,1,"\u{104DD}"],[66742,1,"\u{104DE}"],[66743,1,"\u{104DF}"],[66744,1,"\u{104E0}"],[66745,1,"\u{104E1}"],[66746,1,"\u{104E2}"],[66747,1,"\u{104E3}"],[66748,1,"\u{104E4}"],[66749,1,"\u{104E5}"],[66750,1,"\u{104E6}"],[66751,1,"\u{104E7}"],[66752,1,"\u{104E8}"],[66753,1,"\u{104E9}"],[66754,1,"\u{104EA}"],[66755,1,"\u{104EB}"],[66756,1,"\u{104EC}"],[66757,1,"\u{104ED}"],[66758,1,"\u{104EE}"],[66759,1,"\u{104EF}"],[66760,1,"\u{104F0}"],[66761,1,"\u{104F1}"],[66762,1,"\u{104F2}"],[66763,1,"\u{104F3}"],[66764,1,"\u{104F4}"],[66765,1,"\u{104F5}"],[66766,1,"\u{104F6}"],[66767,1,"\u{104F7}"],[66768,1,"\u{104F8}"],[66769,1,"\u{104F9}"],[66770,1,"\u{104FA}"],[66771,1,"\u{104FB}"],[[66772,66775],3],[[66776,66811],2],[[66812,66815],3],[[66816,66855],2],[[66856,66863],3],[[66864,66915],2],[[66916,66926],3],[66927,2],[66928,1,"\u{10597}"],[66929,1,"\u{10598}"],[66930,1,"\u{10599}"],[66931,1,"\u{1059A}"],[66932,1,"\u{1059B}"],[66933,1,"\u{1059C}"],[66934,1,"\u{1059D}"],[66935,1,"\u{1059E}"],[66936,1,"\u{1059F}"],[66937,1,"\u{105A0}"],[66938,1,"\u{105A1}"],[66939,3],[66940,1,"\u{105A3}"],[66941,1,"\u{105A4}"],[66942,1,"\u{105A5}"],[66943,1,"\u{105A6}"],[66944,1,"\u{105A7}"],[66945,1,"\u{105A8}"],[66946,1,"\u{105A9}"],[66947,1,"\u{105AA}"],[66948,1,"\u{105AB}"],[66949,1,"\u{105AC}"],[66950,1,"\u{105AD}"],[66951,1,"\u{105AE}"],[66952,1,"\u{105AF}"],[66953,1,"\u{105B0}"],[66954,1,"\u{105B1}"],[66955,3],[66956,1,"\u{105B3}"],[66957,1,"\u{105B4}"],[66958,1,"\u{105B5}"],[66959,1,"\u{105B6}"],[66960,1,"\u{105B7}"],[66961,1,"\u{105B8}"],[66962,1,"\u{105B9}"],[66963,3],[66964,1,"\u{105BB}"],[66965,1,"\u{105BC}"],[66966,3],[[66967,66977],2],[66978,3],[[66979,66993],2],[66994,3],[[66995,67001],2],[67002,3],[[67003,67004],2],[[67005,67007],3],[[67008,67059],2],[[67060,67071],3],[[67072,67382],2],[[67383,67391],3],[[67392,67413],2],[[67414,67423],3],[[67424,67431],2],[[67432,67455],3],[67456,2],[67457,1,"\u02D0"],[67458,1,"\u02D1"],[67459,1,"\xE6"],[67460,1,"\u0299"],[67461,1,"\u0253"],[67462,3],[67463,1,"\u02A3"],[67464,1,"\uAB66"],[67465,1,"\u02A5"],[67466,1,"\u02A4"],[67467,1,"\u0256"],[67468,1,"\u0257"],[67469,1,"\u1D91"],[67470,1,"\u0258"],[67471,1,"\u025E"],[67472,1,"\u02A9"],[67473,1,"\u0264"],[67474,1,"\u0262"],[67475,1,"\u0260"],[67476,1,"\u029B"],[67477,1,"\u0127"],[67478,1,"\u029C"],[67479,1,"\u0267"],[67480,1,"\u0284"],[67481,1,"\u02AA"],[67482,1,"\u02AB"],[67483,1,"\u026C"],[67484,1,"\u{1DF04}"],[67485,1,"\uA78E"],[67486,1,"\u026E"],[67487,1,"\u{1DF05}"],[67488,1,"\u028E"],[67489,1,"\u{1DF06}"],[67490,1,"\xF8"],[67491,1,"\u0276"],[67492,1,"\u0277"],[67493,1,"q"],[67494,1,"\u027A"],[67495,1,"\u{1DF08}"],[67496,1,"\u027D"],[67497,1,"\u027E"],[67498,1,"\u0280"],[67499,1,"\u02A8"],[67500,1,"\u02A6"],[67501,1,"\uAB67"],[67502,1,"\u02A7"],[67503,1,"\u0288"],[67504,1,"\u2C71"],[67505,3],[67506,1,"\u028F"],[67507,1,"\u02A1"],[67508,1,"\u02A2"],[67509,1,"\u0298"],[67510,1,"\u01C0"],[67511,1,"\u01C1"],[67512,1,"\u01C2"],[67513,1,"\u{1DF0A}"],[67514,1,"\u{1DF1E}"],[[67515,67583],3],[[67584,67589],2],[[67590,67591],3],[67592,2],[67593,3],[[67594,67637],2],[67638,3],[[67639,67640],2],[[67641,67643],3],[67644,2],[[67645,67646],3],[67647,2],[[67648,67669],2],[67670,3],[[67671,67679],2],[[67680,67702],2],[[67703,67711],2],[[67712,67742],2],[[67743,67750],3],[[67751,67759],2],[[67760,67807],3],[[67808,67826],2],[67827,3],[[67828,67829],2],[[67830,67834],3],[[67835,67839],2],[[67840,67861],2],[[67862,67865],2],[[67866,67867],2],[[67868,67870],3],[67871,2],[[67872,67897],2],[[67898,67902],3],[67903,2],[[67904,67967],3],[[67968,68023],2],[[68024,68027],3],[[68028,68029],2],[[68030,68031],2],[[68032,68047],2],[[68048,68049],3],[[68050,68095],2],[[68096,68099],2],[68100,3],[[68101,68102],2],[[68103,68107],3],[[68108,68115],2],[68116,3],[[68117,68119],2],[68120,3],[[68121,68147],2],[[68148,68149],2],[[68150,68151],3],[[68152,68154],2],[[68155,68158],3],[68159,2],[[68160,68167],2],[68168,2],[[68169,68175],3],[[68176,68184],2],[[68185,68191],3],[[68192,68220],2],[[68221,68223],2],[[68224,68252],2],[[68253,68255],2],[[68256,68287],3],[[68288,68295],2],[68296,2],[[68297,68326],2],[[68327,68330],3],[[68331,68342],2],[[68343,68351],3],[[68352,68405],2],[[68406,68408],3],[[68409,68415],2],[[68416,68437],2],[[68438,68439],3],[[68440,68447],2],[[68448,68466],2],[[68467,68471],3],[[68472,68479],2],[[68480,68497],2],[[68498,68504],3],[[68505,68508],2],[[68509,68520],3],[[68521,68527],2],[[68528,68607],3],[[68608,68680],2],[[68681,68735],3],[68736,1,"\u{10CC0}"],[68737,1,"\u{10CC1}"],[68738,1,"\u{10CC2}"],[68739,1,"\u{10CC3}"],[68740,1,"\u{10CC4}"],[68741,1,"\u{10CC5}"],[68742,1,"\u{10CC6}"],[68743,1,"\u{10CC7}"],[68744,1,"\u{10CC8}"],[68745,1,"\u{10CC9}"],[68746,1,"\u{10CCA}"],[68747,1,"\u{10CCB}"],[68748,1,"\u{10CCC}"],[68749,1,"\u{10CCD}"],[68750,1,"\u{10CCE}"],[68751,1,"\u{10CCF}"],[68752,1,"\u{10CD0}"],[68753,1,"\u{10CD1}"],[68754,1,"\u{10CD2}"],[68755,1,"\u{10CD3}"],[68756,1,"\u{10CD4}"],[68757,1,"\u{10CD5}"],[68758,1,"\u{10CD6}"],[68759,1,"\u{10CD7}"],[68760,1,"\u{10CD8}"],[68761,1,"\u{10CD9}"],[68762,1,"\u{10CDA}"],[68763,1,"\u{10CDB}"],[68764,1,"\u{10CDC}"],[68765,1,"\u{10CDD}"],[68766,1,"\u{10CDE}"],[68767,1,"\u{10CDF}"],[68768,1,"\u{10CE0}"],[68769,1,"\u{10CE1}"],[68770,1,"\u{10CE2}"],[68771,1,"\u{10CE3}"],[68772,1,"\u{10CE4}"],[68773,1,"\u{10CE5}"],[68774,1,"\u{10CE6}"],[68775,1,"\u{10CE7}"],[68776,1,"\u{10CE8}"],[68777,1,"\u{10CE9}"],[68778,1,"\u{10CEA}"],[68779,1,"\u{10CEB}"],[68780,1,"\u{10CEC}"],[68781,1,"\u{10CED}"],[68782,1,"\u{10CEE}"],[68783,1,"\u{10CEF}"],[68784,1,"\u{10CF0}"],[68785,1,"\u{10CF1}"],[68786,1,"\u{10CF2}"],[[68787,68799],3],[[68800,68850],2],[[68851,68857],3],[[68858,68863],2],[[68864,68903],2],[[68904,68911],3],[[68912,68921],2],[[68922,68927],3],[[68928,68943],2],[68944,1,"\u{10D70}"],[68945,1,"\u{10D71}"],[68946,1,"\u{10D72}"],[68947,1,"\u{10D73}"],[68948,1,"\u{10D74}"],[68949,1,"\u{10D75}"],[68950,1,"\u{10D76}"],[68951,1,"\u{10D77}"],[68952,1,"\u{10D78}"],[68953,1,"\u{10D79}"],[68954,1,"\u{10D7A}"],[68955,1,"\u{10D7B}"],[68956,1,"\u{10D7C}"],[68957,1,"\u{10D7D}"],[68958,1,"\u{10D7E}"],[68959,1,"\u{10D7F}"],[68960,1,"\u{10D80}"],[68961,1,"\u{10D81}"],[68962,1,"\u{10D82}"],[68963,1,"\u{10D83}"],[68964,1,"\u{10D84}"],[68965,1,"\u{10D85}"],[[68966,68968],3],[[68969,68973],2],[68974,2],[[68975,68997],2],[[68998,69005],3],[[69006,69007],2],[[69008,69215],3],[[69216,69246],2],[69247,3],[[69248,69289],2],[69290,3],[[69291,69292],2],[69293,2],[[69294,69295],3],[[69296,69297],2],[[69298,69313],3],[[69314,69316],2],[[69317,69371],3],[69372,2],[[69373,69375],2],[[69376,69404],2],[[69405,69414],2],[69415,2],[[69416,69423],3],[[69424,69456],2],[[69457,69465],2],[[69466,69487],3],[[69488,69509],2],[[69510,69513],2],[[69514,69551],3],[[69552,69572],2],[[69573,69579],2],[[69580,69599],3],[[69600,69622],2],[[69623,69631],3],[[69632,69702],2],[[69703,69709],2],[[69710,69713],3],[[69714,69733],2],[[69734,69743],2],[[69744,69749],2],[[69750,69758],3],[69759,2],[[69760,69818],2],[[69819,69820],2],[69821,3],[[69822,69825],2],[69826,2],[[69827,69836],3],[69837,3],[[69838,69839],3],[[69840,69864],2],[[69865,69871],3],[[69872,69881],2],[[69882,69887],3],[[69888,69940],2],[69941,3],[[69942,69951],2],[[69952,69955],2],[[69956,69958],2],[69959,2],[[69960,69967],3],[[69968,70003],2],[[70004,70005],2],[70006,2],[[70007,70015],3],[[70016,70084],2],[[70085,70088],2],[[70089,70092],2],[70093,2],[[70094,70095],2],[[70096,70105],2],[70106,2],[70107,2],[70108,2],[[70109,70111],2],[70112,3],[[70113,70132],2],[[70133,70143],3],[[70144,70161],2],[70162,3],[[70163,70199],2],[[70200,70205],2],[70206,2],[[70207,70209],2],[[70210,70271],3],[[70272,70278],2],[70279,3],[70280,2],[70281,3],[[70282,70285],2],[70286,3],[[70287,70301],2],[70302,3],[[70303,70312],2],[70313,2],[[70314,70319],3],[[70320,70378],2],[[70379,70383],3],[[70384,70393],2],[[70394,70399],3],[70400,2],[[70401,70403],2],[70404,3],[[70405,70412],2],[[70413,70414],3],[[70415,70416],2],[[70417,70418],3],[[70419,70440],2],[70441,3],[[70442,70448],2],[70449,3],[[70450,70451],2],[70452,3],[[70453,70457],2],[70458,3],[70459,2],[[70460,70468],2],[[70469,70470],3],[[70471,70472],2],[[70473,70474],3],[[70475,70477],2],[[70478,70479],3],[70480,2],[[70481,70486],3],[70487,2],[[70488,70492],3],[[70493,70499],2],[[70500,70501],3],[[70502,70508],2],[[70509,70511],3],[[70512,70516],2],[[70517,70527],3],[[70528,70537],2],[70538,3],[70539,2],[[70540,70541],3],[70542,2],[70543,3],[[70544,70581],2],[70582,3],[[70583,70592],2],[70593,3],[70594,2],[[70595,70596],3],[70597,2],[70598,3],[[70599,70602],2],[70603,3],[[70604,70611],2],[[70612,70613],2],[70614,3],[[70615,70616],2],[[70617,70624],3],[[70625,70626],2],[[70627,70655],3],[[70656,70730],2],[[70731,70735],2],[[70736,70745],2],[70746,2],[70747,2],[70748,3],[70749,2],[70750,2],[70751,2],[[70752,70753],2],[[70754,70783],3],[[70784,70853],2],[70854,2],[70855,2],[[70856,70863],3],[[70864,70873],2],[[70874,71039],3],[[71040,71093],2],[[71094,71095],3],[[71096,71104],2],[[71105,71113],2],[[71114,71127],2],[[71128,71133],2],[[71134,71167],3],[[71168,71232],2],[[71233,71235],2],[71236,2],[[71237,71247],3],[[71248,71257],2],[[71258,71263],3],[[71264,71276],2],[[71277,71295],3],[[71296,71351],2],[71352,2],[71353,2],[[71354,71359],3],[[71360,71369],2],[[71370,71375],3],[[71376,71395],2],[[71396,71423],3],[[71424,71449],2],[71450,2],[[71451,71452],3],[[71453,71467],2],[[71468,71471],3],[[71472,71481],2],[[71482,71487],2],[[71488,71494],2],[[71495,71679],3],[[71680,71738],2],[71739,2],[[71740,71839],3],[71840,1,"\u{118C0}"],[71841,1,"\u{118C1}"],[71842,1,"\u{118C2}"],[71843,1,"\u{118C3}"],[71844,1,"\u{118C4}"],[71845,1,"\u{118C5}"],[71846,1,"\u{118C6}"],[71847,1,"\u{118C7}"],[71848,1,"\u{118C8}"],[71849,1,"\u{118C9}"],[71850,1,"\u{118CA}"],[71851,1,"\u{118CB}"],[71852,1,"\u{118CC}"],[71853,1,"\u{118CD}"],[71854,1,"\u{118CE}"],[71855,1,"\u{118CF}"],[71856,1,"\u{118D0}"],[71857,1,"\u{118D1}"],[71858,1,"\u{118D2}"],[71859,1,"\u{118D3}"],[71860,1,"\u{118D4}"],[71861,1,"\u{118D5}"],[71862,1,"\u{118D6}"],[71863,1,"\u{118D7}"],[71864,1,"\u{118D8}"],[71865,1,"\u{118D9}"],[71866,1,"\u{118DA}"],[71867,1,"\u{118DB}"],[71868,1,"\u{118DC}"],[71869,1,"\u{118DD}"],[71870,1,"\u{118DE}"],[71871,1,"\u{118DF}"],[[71872,71913],2],[[71914,71922],2],[[71923,71934],3],[71935,2],[[71936,71942],2],[[71943,71944],3],[71945,2],[[71946,71947],3],[[71948,71955],2],[71956,3],[[71957,71958],2],[71959,3],[[71960,71989],2],[71990,3],[[71991,71992],2],[[71993,71994],3],[[71995,72003],2],[[72004,72006],2],[[72007,72015],3],[[72016,72025],2],[[72026,72095],3],[[72096,72103],2],[[72104,72105],3],[[72106,72151],2],[[72152,72153],3],[[72154,72161],2],[72162,2],[[72163,72164],2],[[72165,72191],3],[[72192,72254],2],[[72255,72262],2],[72263,2],[[72264,72271],3],[[72272,72323],2],[[72324,72325],2],[[72326,72345],2],[[72346,72348],2],[72349,2],[[72350,72354],2],[[72355,72367],3],[[72368,72383],2],[[72384,72440],2],[[72441,72447],3],[[72448,72457],2],[[72458,72639],3],[[72640,72672],2],[72673,2],[[72674,72687],3],[[72688,72697],2],[[72698,72703],3],[[72704,72712],2],[72713,3],[[72714,72758],2],[72759,3],[[72760,72768],2],[[72769,72773],2],[[72774,72783],3],[[72784,72793],2],[[72794,72812],2],[[72813,72815],3],[[72816,72817],2],[[72818,72847],2],[[72848,72849],3],[[72850,72871],2],[72872,3],[[72873,72886],2],[[72887,72959],3],[[72960,72966],2],[72967,3],[[72968,72969],2],[72970,3],[[72971,73014],2],[[73015,73017],3],[73018,2],[73019,3],[[73020,73021],2],[73022,3],[[73023,73031],2],[[73032,73039],3],[[73040,73049],2],[[73050,73055],3],[[73056,73061],2],[73062,3],[[73063,73064],2],[73065,3],[[73066,73102],2],[73103,3],[[73104,73105],2],[73106,3],[[73107,73112],2],[[73113,73119],3],[[73120,73129],2],[[73130,73439],3],[[73440,73462],2],[[73463,73464],2],[[73465,73471],3],[[73472,73488],2],[73489,3],[[73490,73530],2],[[73531,73533],3],[[73534,73538],2],[[73539,73551],2],[[73552,73561],2],[73562,2],[[73563,73647],3],[73648,2],[[73649,73663],3],[[73664,73713],2],[[73714,73726],3],[73727,2],[[73728,74606],2],[[74607,74648],2],[74649,2],[[74650,74751],3],[[74752,74850],2],[[74851,74862],2],[74863,3],[[74864,74867],2],[74868,2],[[74869,74879],3],[[74880,75075],2],[[75076,77711],3],[[77712,77808],2],[[77809,77810],2],[[77811,77823],3],[[77824,78894],2],[78895,2],[[78896,78904],3],[[78905,78911],3],[[78912,78933],2],[[78934,78943],3],[[78944,82938],2],[[82939,82943],3],[[82944,83526],2],[[83527,90367],3],[[90368,90425],2],[[90426,92159],3],[[92160,92728],2],[[92729,92735],3],[[92736,92766],2],[92767,3],[[92768,92777],2],[[92778,92781],3],[[92782,92783],2],[[92784,92862],2],[92863,3],[[92864,92873],2],[[92874,92879],3],[[92880,92909],2],[[92910,92911],3],[[92912,92916],2],[92917,2],[[92918,92927],3],[[92928,92982],2],[[92983,92991],2],[[92992,92995],2],[[92996,92997],2],[[92998,93007],3],[[93008,93017],2],[93018,3],[[93019,93025],2],[93026,3],[[93027,93047],2],[[93048,93052],3],[[93053,93071],2],[[93072,93503],3],[[93504,93548],2],[[93549,93551],2],[[93552,93561],2],[[93562,93759],3],[93760,1,"\u{16E60}"],[93761,1,"\u{16E61}"],[93762,1,"\u{16E62}"],[93763,1,"\u{16E63}"],[93764,1,"\u{16E64}"],[93765,1,"\u{16E65}"],[93766,1,"\u{16E66}"],[93767,1,"\u{16E67}"],[93768,1,"\u{16E68}"],[93769,1,"\u{16E69}"],[93770,1,"\u{16E6A}"],[93771,1,"\u{16E6B}"],[93772,1,"\u{16E6C}"],[93773,1,"\u{16E6D}"],[93774,1,"\u{16E6E}"],[93775,1,"\u{16E6F}"],[93776,1,"\u{16E70}"],[93777,1,"\u{16E71}"],[93778,1,"\u{16E72}"],[93779,1,"\u{16E73}"],[93780,1,"\u{16E74}"],[93781,1,"\u{16E75}"],[93782,1,"\u{16E76}"],[93783,1,"\u{16E77}"],[93784,1,"\u{16E78}"],[93785,1,"\u{16E79}"],[93786,1,"\u{16E7A}"],[93787,1,"\u{16E7B}"],[93788,1,"\u{16E7C}"],[93789,1,"\u{16E7D}"],[93790,1,"\u{16E7E}"],[93791,1,"\u{16E7F}"],[[93792,93823],2],[[93824,93850],2],[[93851,93951],3],[[93952,94020],2],[[94021,94026],2],[[94027,94030],3],[94031,2],[[94032,94078],2],[[94079,94087],2],[[94088,94094],3],[[94095,94111],2],[[94112,94175],3],[94176,2],[94177,2],[94178,2],[94179,2],[94180,2],[[94181,94191],3],[[94192,94193],2],[[94194,94207],3],[[94208,100332],2],[[100333,100337],2],[[100338,100343],2],[[100344,100351],3],[[100352,101106],2],[[101107,101589],2],[[101590,101630],3],[101631,2],[[101632,101640],2],[[101641,110575],3],[[110576,110579],2],[110580,3],[[110581,110587],2],[110588,3],[[110589,110590],2],[110591,3],[[110592,110593],2],[[110594,110878],2],[[110879,110882],2],[[110883,110897],3],[110898,2],[[110899,110927],3],[[110928,110930],2],[[110931,110932],3],[110933,2],[[110934,110947],3],[[110948,110951],2],[[110952,110959],3],[[110960,111355],2],[[111356,113663],3],[[113664,113770],2],[[113771,113775],3],[[113776,113788],2],[[113789,113791],3],[[113792,113800],2],[[113801,113807],3],[[113808,113817],2],[[113818,113819],3],[113820,2],[[113821,113822],2],[113823,2],[[113824,113827],7],[[113828,117759],3],[[117760,117973],2],[117974,1,"a"],[117975,1,"b"],[117976,1,"c"],[117977,1,"d"],[117978,1,"e"],[117979,1,"f"],[117980,1,"g"],[117981,1,"h"],[117982,1,"i"],[117983,1,"j"],[117984,1,"k"],[117985,1,"l"],[117986,1,"m"],[117987,1,"n"],[117988,1,"o"],[117989,1,"p"],[117990,1,"q"],[117991,1,"r"],[117992,1,"s"],[117993,1,"t"],[117994,1,"u"],[117995,1,"v"],[117996,1,"w"],[117997,1,"x"],[117998,1,"y"],[117999,1,"z"],[118e3,1,"0"],[118001,1,"1"],[118002,1,"2"],[118003,1,"3"],[118004,1,"4"],[118005,1,"5"],[118006,1,"6"],[118007,1,"7"],[118008,1,"8"],[118009,1,"9"],[[118010,118015],3],[[118016,118451],2],[[118452,118527],3],[[118528,118573],2],[[118574,118575],3],[[118576,118598],2],[[118599,118607],3],[[118608,118723],2],[[118724,118783],3],[[118784,119029],2],[[119030,119039],3],[[119040,119078],2],[[119079,119080],3],[119081,2],[[119082,119133],2],[119134,1,"\u{1D157}\u{1D165}"],[119135,1,"\u{1D158}\u{1D165}"],[119136,1,"\u{1D158}\u{1D165}\u{1D16E}"],[119137,1,"\u{1D158}\u{1D165}\u{1D16F}"],[119138,1,"\u{1D158}\u{1D165}\u{1D170}"],[119139,1,"\u{1D158}\u{1D165}\u{1D171}"],[119140,1,"\u{1D158}\u{1D165}\u{1D172}"],[[119141,119154],2],[[119155,119162],7],[[119163,119226],2],[119227,1,"\u{1D1B9}\u{1D165}"],[119228,1,"\u{1D1BA}\u{1D165}"],[119229,1,"\u{1D1B9}\u{1D165}\u{1D16E}"],[119230,1,"\u{1D1BA}\u{1D165}\u{1D16E}"],[119231,1,"\u{1D1B9}\u{1D165}\u{1D16F}"],[119232,1,"\u{1D1BA}\u{1D165}\u{1D16F}"],[[119233,119261],2],[[119262,119272],2],[[119273,119274],2],[[119275,119295],3],[[119296,119365],2],[[119366,119487],3],[[119488,119507],2],[[119508,119519],3],[[119520,119539],2],[[119540,119551],3],[[119552,119638],2],[[119639,119647],3],[[119648,119665],2],[[119666,119672],2],[[119673,119807],3],[119808,1,"a"],[119809,1,"b"],[119810,1,"c"],[119811,1,"d"],[119812,1,"e"],[119813,1,"f"],[119814,1,"g"],[119815,1,"h"],[119816,1,"i"],[119817,1,"j"],[119818,1,"k"],[119819,1,"l"],[119820,1,"m"],[119821,1,"n"],[119822,1,"o"],[119823,1,"p"],[119824,1,"q"],[119825,1,"r"],[119826,1,"s"],[119827,1,"t"],[119828,1,"u"],[119829,1,"v"],[119830,1,"w"],[119831,1,"x"],[119832,1,"y"],[119833,1,"z"],[119834,1,"a"],[119835,1,"b"],[119836,1,"c"],[119837,1,"d"],[119838,1,"e"],[119839,1,"f"],[119840,1,"g"],[119841,1,"h"],[119842,1,"i"],[119843,1,"j"],[119844,1,"k"],[119845,1,"l"],[119846,1,"m"],[119847,1,"n"],[119848,1,"o"],[119849,1,"p"],[119850,1,"q"],[119851,1,"r"],[119852,1,"s"],[119853,1,"t"],[119854,1,"u"],[119855,1,"v"],[119856,1,"w"],[119857,1,"x"],[119858,1,"y"],[119859,1,"z"],[119860,1,"a"],[119861,1,"b"],[119862,1,"c"],[119863,1,"d"],[119864,1,"e"],[119865,1,"f"],[119866,1,"g"],[119867,1,"h"],[119868,1,"i"],[119869,1,"j"],[119870,1,"k"],[119871,1,"l"],[119872,1,"m"],[119873,1,"n"],[119874,1,"o"],[119875,1,"p"],[119876,1,"q"],[119877,1,"r"],[119878,1,"s"],[119879,1,"t"],[119880,1,"u"],[119881,1,"v"],[119882,1,"w"],[119883,1,"x"],[119884,1,"y"],[119885,1,"z"],[119886,1,"a"],[119887,1,"b"],[119888,1,"c"],[119889,1,"d"],[119890,1,"e"],[119891,1,"f"],[119892,1,"g"],[119893,3],[119894,1,"i"],[119895,1,"j"],[119896,1,"k"],[119897,1,"l"],[119898,1,"m"],[119899,1,"n"],[119900,1,"o"],[119901,1,"p"],[119902,1,"q"],[119903,1,"r"],[119904,1,"s"],[119905,1,"t"],[119906,1,"u"],[119907,1,"v"],[119908,1,"w"],[119909,1,"x"],[119910,1,"y"],[119911,1,"z"],[119912,1,"a"],[119913,1,"b"],[119914,1,"c"],[119915,1,"d"],[119916,1,"e"],[119917,1,"f"],[119918,1,"g"],[119919,1,"h"],[119920,1,"i"],[119921,1,"j"],[119922,1,"k"],[119923,1,"l"],[119924,1,"m"],[119925,1,"n"],[119926,1,"o"],[119927,1,"p"],[119928,1,"q"],[119929,1,"r"],[119930,1,"s"],[119931,1,"t"],[119932,1,"u"],[119933,1,"v"],[119934,1,"w"],[119935,1,"x"],[119936,1,"y"],[119937,1,"z"],[119938,1,"a"],[119939,1,"b"],[119940,1,"c"],[119941,1,"d"],[119942,1,"e"],[119943,1,"f"],[119944,1,"g"],[119945,1,"h"],[119946,1,"i"],[119947,1,"j"],[119948,1,"k"],[119949,1,"l"],[119950,1,"m"],[119951,1,"n"],[119952,1,"o"],[119953,1,"p"],[119954,1,"q"],[119955,1,"r"],[119956,1,"s"],[119957,1,"t"],[119958,1,"u"],[119959,1,"v"],[119960,1,"w"],[119961,1,"x"],[119962,1,"y"],[119963,1,"z"],[119964,1,"a"],[119965,3],[119966,1,"c"],[119967,1,"d"],[[119968,119969],3],[119970,1,"g"],[[119971,119972],3],[119973,1,"j"],[119974,1,"k"],[[119975,119976],3],[119977,1,"n"],[119978,1,"o"],[119979,1,"p"],[119980,1,"q"],[119981,3],[119982,1,"s"],[119983,1,"t"],[119984,1,"u"],[119985,1,"v"],[119986,1,"w"],[119987,1,"x"],[119988,1,"y"],[119989,1,"z"],[119990,1,"a"],[119991,1,"b"],[119992,1,"c"],[119993,1,"d"],[119994,3],[119995,1,"f"],[119996,3],[119997,1,"h"],[119998,1,"i"],[119999,1,"j"],[12e4,1,"k"],[120001,1,"l"],[120002,1,"m"],[120003,1,"n"],[120004,3],[120005,1,"p"],[120006,1,"q"],[120007,1,"r"],[120008,1,"s"],[120009,1,"t"],[120010,1,"u"],[120011,1,"v"],[120012,1,"w"],[120013,1,"x"],[120014,1,"y"],[120015,1,"z"],[120016,1,"a"],[120017,1,"b"],[120018,1,"c"],[120019,1,"d"],[120020,1,"e"],[120021,1,"f"],[120022,1,"g"],[120023,1,"h"],[120024,1,"i"],[120025,1,"j"],[120026,1,"k"],[120027,1,"l"],[120028,1,"m"],[120029,1,"n"],[120030,1,"o"],[120031,1,"p"],[120032,1,"q"],[120033,1,"r"],[120034,1,"s"],[120035,1,"t"],[120036,1,"u"],[120037,1,"v"],[120038,1,"w"],[120039,1,"x"],[120040,1,"y"],[120041,1,"z"],[120042,1,"a"],[120043,1,"b"],[120044,1,"c"],[120045,1,"d"],[120046,1,"e"],[120047,1,"f"],[120048,1,"g"],[120049,1,"h"],[120050,1,"i"],[120051,1,"j"],[120052,1,"k"],[120053,1,"l"],[120054,1,"m"],[120055,1,"n"],[120056,1,"o"],[120057,1,"p"],[120058,1,"q"],[120059,1,"r"],[120060,1,"s"],[120061,1,"t"],[120062,1,"u"],[120063,1,"v"],[120064,1,"w"],[120065,1,"x"],[120066,1,"y"],[120067,1,"z"],[120068,1,"a"],[120069,1,"b"],[120070,3],[120071,1,"d"],[120072,1,"e"],[120073,1,"f"],[120074,1,"g"],[[120075,120076],3],[120077,1,"j"],[120078,1,"k"],[120079,1,"l"],[120080,1,"m"],[120081,1,"n"],[120082,1,"o"],[120083,1,"p"],[120084,1,"q"],[120085,3],[120086,1,"s"],[120087,1,"t"],[120088,1,"u"],[120089,1,"v"],[120090,1,"w"],[120091,1,"x"],[120092,1,"y"],[120093,3],[120094,1,"a"],[120095,1,"b"],[120096,1,"c"],[120097,1,"d"],[120098,1,"e"],[120099,1,"f"],[120100,1,"g"],[120101,1,"h"],[120102,1,"i"],[120103,1,"j"],[120104,1,"k"],[120105,1,"l"],[120106,1,"m"],[120107,1,"n"],[120108,1,"o"],[120109,1,"p"],[120110,1,"q"],[120111,1,"r"],[120112,1,"s"],[120113,1,"t"],[120114,1,"u"],[120115,1,"v"],[120116,1,"w"],[120117,1,"x"],[120118,1,"y"],[120119,1,"z"],[120120,1,"a"],[120121,1,"b"],[120122,3],[120123,1,"d"],[120124,1,"e"],[120125,1,"f"],[120126,1,"g"],[120127,3],[120128,1,"i"],[120129,1,"j"],[120130,1,"k"],[120131,1,"l"],[120132,1,"m"],[120133,3],[120134,1,"o"],[[120135,120137],3],[120138,1,"s"],[120139,1,"t"],[120140,1,"u"],[120141,1,"v"],[120142,1,"w"],[120143,1,"x"],[120144,1,"y"],[120145,3],[120146,1,"a"],[120147,1,"b"],[120148,1,"c"],[120149,1,"d"],[120150,1,"e"],[120151,1,"f"],[120152,1,"g"],[120153,1,"h"],[120154,1,"i"],[120155,1,"j"],[120156,1,"k"],[120157,1,"l"],[120158,1,"m"],[120159,1,"n"],[120160,1,"o"],[120161,1,"p"],[120162,1,"q"],[120163,1,"r"],[120164,1,"s"],[120165,1,"t"],[120166,1,"u"],[120167,1,"v"],[120168,1,"w"],[120169,1,"x"],[120170,1,"y"],[120171,1,"z"],[120172,1,"a"],[120173,1,"b"],[120174,1,"c"],[120175,1,"d"],[120176,1,"e"],[120177,1,"f"],[120178,1,"g"],[120179,1,"h"],[120180,1,"i"],[120181,1,"j"],[120182,1,"k"],[120183,1,"l"],[120184,1,"m"],[120185,1,"n"],[120186,1,"o"],[120187,1,"p"],[120188,1,"q"],[120189,1,"r"],[120190,1,"s"],[120191,1,"t"],[120192,1,"u"],[120193,1,"v"],[120194,1,"w"],[120195,1,"x"],[120196,1,"y"],[120197,1,"z"],[120198,1,"a"],[120199,1,"b"],[120200,1,"c"],[120201,1,"d"],[120202,1,"e"],[120203,1,"f"],[120204,1,"g"],[120205,1,"h"],[120206,1,"i"],[120207,1,"j"],[120208,1,"k"],[120209,1,"l"],[120210,1,"m"],[120211,1,"n"],[120212,1,"o"],[120213,1,"p"],[120214,1,"q"],[120215,1,"r"],[120216,1,"s"],[120217,1,"t"],[120218,1,"u"],[120219,1,"v"],[120220,1,"w"],[120221,1,"x"],[120222,1,"y"],[120223,1,"z"],[120224,1,"a"],[120225,1,"b"],[120226,1,"c"],[120227,1,"d"],[120228,1,"e"],[120229,1,"f"],[120230,1,"g"],[120231,1,"h"],[120232,1,"i"],[120233,1,"j"],[120234,1,"k"],[120235,1,"l"],[120236,1,"m"],[120237,1,"n"],[120238,1,"o"],[120239,1,"p"],[120240,1,"q"],[120241,1,"r"],[120242,1,"s"],[120243,1,"t"],[120244,1,"u"],[120245,1,"v"],[120246,1,"w"],[120247,1,"x"],[120248,1,"y"],[120249,1,"z"],[120250,1,"a"],[120251,1,"b"],[120252,1,"c"],[120253,1,"d"],[120254,1,"e"],[120255,1,"f"],[120256,1,"g"],[120257,1,"h"],[120258,1,"i"],[120259,1,"j"],[120260,1,"k"],[120261,1,"l"],[120262,1,"m"],[120263,1,"n"],[120264,1,"o"],[120265,1,"p"],[120266,1,"q"],[120267,1,"r"],[120268,1,"s"],[120269,1,"t"],[120270,1,"u"],[120271,1,"v"],[120272,1,"w"],[120273,1,"x"],[120274,1,"y"],[120275,1,"z"],[120276,1,"a"],[120277,1,"b"],[120278,1,"c"],[120279,1,"d"],[120280,1,"e"],[120281,1,"f"],[120282,1,"g"],[120283,1,"h"],[120284,1,"i"],[120285,1,"j"],[120286,1,"k"],[120287,1,"l"],[120288,1,"m"],[120289,1,"n"],[120290,1,"o"],[120291,1,"p"],[120292,1,"q"],[120293,1,"r"],[120294,1,"s"],[120295,1,"t"],[120296,1,"u"],[120297,1,"v"],[120298,1,"w"],[120299,1,"x"],[120300,1,"y"],[120301,1,"z"],[120302,1,"a"],[120303,1,"b"],[120304,1,"c"],[120305,1,"d"],[120306,1,"e"],[120307,1,"f"],[120308,1,"g"],[120309,1,"h"],[120310,1,"i"],[120311,1,"j"],[120312,1,"k"],[120313,1,"l"],[120314,1,"m"],[120315,1,"n"],[120316,1,"o"],[120317,1,"p"],[120318,1,"q"],[120319,1,"r"],[120320,1,"s"],[120321,1,"t"],[120322,1,"u"],[120323,1,"v"],[120324,1,"w"],[120325,1,"x"],[120326,1,"y"],[120327,1,"z"],[120328,1,"a"],[120329,1,"b"],[120330,1,"c"],[120331,1,"d"],[120332,1,"e"],[120333,1,"f"],[120334,1,"g"],[120335,1,"h"],[120336,1,"i"],[120337,1,"j"],[120338,1,"k"],[120339,1,"l"],[120340,1,"m"],[120341,1,"n"],[120342,1,"o"],[120343,1,"p"],[120344,1,"q"],[120345,1,"r"],[120346,1,"s"],[120347,1,"t"],[120348,1,"u"],[120349,1,"v"],[120350,1,"w"],[120351,1,"x"],[120352,1,"y"],[120353,1,"z"],[120354,1,"a"],[120355,1,"b"],[120356,1,"c"],[120357,1,"d"],[120358,1,"e"],[120359,1,"f"],[120360,1,"g"],[120361,1,"h"],[120362,1,"i"],[120363,1,"j"],[120364,1,"k"],[120365,1,"l"],[120366,1,"m"],[120367,1,"n"],[120368,1,"o"],[120369,1,"p"],[120370,1,"q"],[120371,1,"r"],[120372,1,"s"],[120373,1,"t"],[120374,1,"u"],[120375,1,"v"],[120376,1,"w"],[120377,1,"x"],[120378,1,"y"],[120379,1,"z"],[120380,1,"a"],[120381,1,"b"],[120382,1,"c"],[120383,1,"d"],[120384,1,"e"],[120385,1,"f"],[120386,1,"g"],[120387,1,"h"],[120388,1,"i"],[120389,1,"j"],[120390,1,"k"],[120391,1,"l"],[120392,1,"m"],[120393,1,"n"],[120394,1,"o"],[120395,1,"p"],[120396,1,"q"],[120397,1,"r"],[120398,1,"s"],[120399,1,"t"],[120400,1,"u"],[120401,1,"v"],[120402,1,"w"],[120403,1,"x"],[120404,1,"y"],[120405,1,"z"],[120406,1,"a"],[120407,1,"b"],[120408,1,"c"],[120409,1,"d"],[120410,1,"e"],[120411,1,"f"],[120412,1,"g"],[120413,1,"h"],[120414,1,"i"],[120415,1,"j"],[120416,1,"k"],[120417,1,"l"],[120418,1,"m"],[120419,1,"n"],[120420,1,"o"],[120421,1,"p"],[120422,1,"q"],[120423,1,"r"],[120424,1,"s"],[120425,1,"t"],[120426,1,"u"],[120427,1,"v"],[120428,1,"w"],[120429,1,"x"],[120430,1,"y"],[120431,1,"z"],[120432,1,"a"],[120433,1,"b"],[120434,1,"c"],[120435,1,"d"],[120436,1,"e"],[120437,1,"f"],[120438,1,"g"],[120439,1,"h"],[120440,1,"i"],[120441,1,"j"],[120442,1,"k"],[120443,1,"l"],[120444,1,"m"],[120445,1,"n"],[120446,1,"o"],[120447,1,"p"],[120448,1,"q"],[120449,1,"r"],[120450,1,"s"],[120451,1,"t"],[120452,1,"u"],[120453,1,"v"],[120454,1,"w"],[120455,1,"x"],[120456,1,"y"],[120457,1,"z"],[120458,1,"a"],[120459,1,"b"],[120460,1,"c"],[120461,1,"d"],[120462,1,"e"],[120463,1,"f"],[120464,1,"g"],[120465,1,"h"],[120466,1,"i"],[120467,1,"j"],[120468,1,"k"],[120469,1,"l"],[120470,1,"m"],[120471,1,"n"],[120472,1,"o"],[120473,1,"p"],[120474,1,"q"],[120475,1,"r"],[120476,1,"s"],[120477,1,"t"],[120478,1,"u"],[120479,1,"v"],[120480,1,"w"],[120481,1,"x"],[120482,1,"y"],[120483,1,"z"],[120484,1,"\u0131"],[120485,1,"\u0237"],[[120486,120487],3],[120488,1,"\u03B1"],[120489,1,"\u03B2"],[120490,1,"\u03B3"],[120491,1,"\u03B4"],[120492,1,"\u03B5"],[120493,1,"\u03B6"],[120494,1,"\u03B7"],[120495,1,"\u03B8"],[120496,1,"\u03B9"],[120497,1,"\u03BA"],[120498,1,"\u03BB"],[120499,1,"\u03BC"],[120500,1,"\u03BD"],[120501,1,"\u03BE"],[120502,1,"\u03BF"],[120503,1,"\u03C0"],[120504,1,"\u03C1"],[120505,1,"\u03B8"],[120506,1,"\u03C3"],[120507,1,"\u03C4"],[120508,1,"\u03C5"],[120509,1,"\u03C6"],[120510,1,"\u03C7"],[120511,1,"\u03C8"],[120512,1,"\u03C9"],[120513,1,"\u2207"],[120514,1,"\u03B1"],[120515,1,"\u03B2"],[120516,1,"\u03B3"],[120517,1,"\u03B4"],[120518,1,"\u03B5"],[120519,1,"\u03B6"],[120520,1,"\u03B7"],[120521,1,"\u03B8"],[120522,1,"\u03B9"],[120523,1,"\u03BA"],[120524,1,"\u03BB"],[120525,1,"\u03BC"],[120526,1,"\u03BD"],[120527,1,"\u03BE"],[120528,1,"\u03BF"],[120529,1,"\u03C0"],[120530,1,"\u03C1"],[[120531,120532],1,"\u03C3"],[120533,1,"\u03C4"],[120534,1,"\u03C5"],[120535,1,"\u03C6"],[120536,1,"\u03C7"],[120537,1,"\u03C8"],[120538,1,"\u03C9"],[120539,1,"\u2202"],[120540,1,"\u03B5"],[120541,1,"\u03B8"],[120542,1,"\u03BA"],[120543,1,"\u03C6"],[120544,1,"\u03C1"],[120545,1,"\u03C0"],[120546,1,"\u03B1"],[120547,1,"\u03B2"],[120548,1,"\u03B3"],[120549,1,"\u03B4"],[120550,1,"\u03B5"],[120551,1,"\u03B6"],[120552,1,"\u03B7"],[120553,1,"\u03B8"],[120554,1,"\u03B9"],[120555,1,"\u03BA"],[120556,1,"\u03BB"],[120557,1,"\u03BC"],[120558,1,"\u03BD"],[120559,1,"\u03BE"],[120560,1,"\u03BF"],[120561,1,"\u03C0"],[120562,1,"\u03C1"],[120563,1,"\u03B8"],[120564,1,"\u03C3"],[120565,1,"\u03C4"],[120566,1,"\u03C5"],[120567,1,"\u03C6"],[120568,1,"\u03C7"],[120569,1,"\u03C8"],[120570,1,"\u03C9"],[120571,1,"\u2207"],[120572,1,"\u03B1"],[120573,1,"\u03B2"],[120574,1,"\u03B3"],[120575,1,"\u03B4"],[120576,1,"\u03B5"],[120577,1,"\u03B6"],[120578,1,"\u03B7"],[120579,1,"\u03B8"],[120580,1,"\u03B9"],[120581,1,"\u03BA"],[120582,1,"\u03BB"],[120583,1,"\u03BC"],[120584,1,"\u03BD"],[120585,1,"\u03BE"],[120586,1,"\u03BF"],[120587,1,"\u03C0"],[120588,1,"\u03C1"],[[120589,120590],1,"\u03C3"],[120591,1,"\u03C4"],[120592,1,"\u03C5"],[120593,1,"\u03C6"],[120594,1,"\u03C7"],[120595,1,"\u03C8"],[120596,1,"\u03C9"],[120597,1,"\u2202"],[120598,1,"\u03B5"],[120599,1,"\u03B8"],[120600,1,"\u03BA"],[120601,1,"\u03C6"],[120602,1,"\u03C1"],[120603,1,"\u03C0"],[120604,1,"\u03B1"],[120605,1,"\u03B2"],[120606,1,"\u03B3"],[120607,1,"\u03B4"],[120608,1,"\u03B5"],[120609,1,"\u03B6"],[120610,1,"\u03B7"],[120611,1,"\u03B8"],[120612,1,"\u03B9"],[120613,1,"\u03BA"],[120614,1,"\u03BB"],[120615,1,"\u03BC"],[120616,1,"\u03BD"],[120617,1,"\u03BE"],[120618,1,"\u03BF"],[120619,1,"\u03C0"],[120620,1,"\u03C1"],[120621,1,"\u03B8"],[120622,1,"\u03C3"],[120623,1,"\u03C4"],[120624,1,"\u03C5"],[120625,1,"\u03C6"],[120626,1,"\u03C7"],[120627,1,"\u03C8"],[120628,1,"\u03C9"],[120629,1,"\u2207"],[120630,1,"\u03B1"],[120631,1,"\u03B2"],[120632,1,"\u03B3"],[120633,1,"\u03B4"],[120634,1,"\u03B5"],[120635,1,"\u03B6"],[120636,1,"\u03B7"],[120637,1,"\u03B8"],[120638,1,"\u03B9"],[120639,1,"\u03BA"],[120640,1,"\u03BB"],[120641,1,"\u03BC"],[120642,1,"\u03BD"],[120643,1,"\u03BE"],[120644,1,"\u03BF"],[120645,1,"\u03C0"],[120646,1,"\u03C1"],[[120647,120648],1,"\u03C3"],[120649,1,"\u03C4"],[120650,1,"\u03C5"],[120651,1,"\u03C6"],[120652,1,"\u03C7"],[120653,1,"\u03C8"],[120654,1,"\u03C9"],[120655,1,"\u2202"],[120656,1,"\u03B5"],[120657,1,"\u03B8"],[120658,1,"\u03BA"],[120659,1,"\u03C6"],[120660,1,"\u03C1"],[120661,1,"\u03C0"],[120662,1,"\u03B1"],[120663,1,"\u03B2"],[120664,1,"\u03B3"],[120665,1,"\u03B4"],[120666,1,"\u03B5"],[120667,1,"\u03B6"],[120668,1,"\u03B7"],[120669,1,"\u03B8"],[120670,1,"\u03B9"],[120671,1,"\u03BA"],[120672,1,"\u03BB"],[120673,1,"\u03BC"],[120674,1,"\u03BD"],[120675,1,"\u03BE"],[120676,1,"\u03BF"],[120677,1,"\u03C0"],[120678,1,"\u03C1"],[120679,1,"\u03B8"],[120680,1,"\u03C3"],[120681,1,"\u03C4"],[120682,1,"\u03C5"],[120683,1,"\u03C6"],[120684,1,"\u03C7"],[120685,1,"\u03C8"],[120686,1,"\u03C9"],[120687,1,"\u2207"],[120688,1,"\u03B1"],[120689,1,"\u03B2"],[120690,1,"\u03B3"],[120691,1,"\u03B4"],[120692,1,"\u03B5"],[120693,1,"\u03B6"],[120694,1,"\u03B7"],[120695,1,"\u03B8"],[120696,1,"\u03B9"],[120697,1,"\u03BA"],[120698,1,"\u03BB"],[120699,1,"\u03BC"],[120700,1,"\u03BD"],[120701,1,"\u03BE"],[120702,1,"\u03BF"],[120703,1,"\u03C0"],[120704,1,"\u03C1"],[[120705,120706],1,"\u03C3"],[120707,1,"\u03C4"],[120708,1,"\u03C5"],[120709,1,"\u03C6"],[120710,1,"\u03C7"],[120711,1,"\u03C8"],[120712,1,"\u03C9"],[120713,1,"\u2202"],[120714,1,"\u03B5"],[120715,1,"\u03B8"],[120716,1,"\u03BA"],[120717,1,"\u03C6"],[120718,1,"\u03C1"],[120719,1,"\u03C0"],[120720,1,"\u03B1"],[120721,1,"\u03B2"],[120722,1,"\u03B3"],[120723,1,"\u03B4"],[120724,1,"\u03B5"],[120725,1,"\u03B6"],[120726,1,"\u03B7"],[120727,1,"\u03B8"],[120728,1,"\u03B9"],[120729,1,"\u03BA"],[120730,1,"\u03BB"],[120731,1,"\u03BC"],[120732,1,"\u03BD"],[120733,1,"\u03BE"],[120734,1,"\u03BF"],[120735,1,"\u03C0"],[120736,1,"\u03C1"],[120737,1,"\u03B8"],[120738,1,"\u03C3"],[120739,1,"\u03C4"],[120740,1,"\u03C5"],[120741,1,"\u03C6"],[120742,1,"\u03C7"],[120743,1,"\u03C8"],[120744,1,"\u03C9"],[120745,1,"\u2207"],[120746,1,"\u03B1"],[120747,1,"\u03B2"],[120748,1,"\u03B3"],[120749,1,"\u03B4"],[120750,1,"\u03B5"],[120751,1,"\u03B6"],[120752,1,"\u03B7"],[120753,1,"\u03B8"],[120754,1,"\u03B9"],[120755,1,"\u03BA"],[120756,1,"\u03BB"],[120757,1,"\u03BC"],[120758,1,"\u03BD"],[120759,1,"\u03BE"],[120760,1,"\u03BF"],[120761,1,"\u03C0"],[120762,1,"\u03C1"],[[120763,120764],1,"\u03C3"],[120765,1,"\u03C4"],[120766,1,"\u03C5"],[120767,1,"\u03C6"],[120768,1,"\u03C7"],[120769,1,"\u03C8"],[120770,1,"\u03C9"],[120771,1,"\u2202"],[120772,1,"\u03B5"],[120773,1,"\u03B8"],[120774,1,"\u03BA"],[120775,1,"\u03C6"],[120776,1,"\u03C1"],[120777,1,"\u03C0"],[[120778,120779],1,"\u03DD"],[[120780,120781],3],[120782,1,"0"],[120783,1,"1"],[120784,1,"2"],[120785,1,"3"],[120786,1,"4"],[120787,1,"5"],[120788,1,"6"],[120789,1,"7"],[120790,1,"8"],[120791,1,"9"],[120792,1,"0"],[120793,1,"1"],[120794,1,"2"],[120795,1,"3"],[120796,1,"4"],[120797,1,"5"],[120798,1,"6"],[120799,1,"7"],[120800,1,"8"],[120801,1,"9"],[120802,1,"0"],[120803,1,"1"],[120804,1,"2"],[120805,1,"3"],[120806,1,"4"],[120807,1,"5"],[120808,1,"6"],[120809,1,"7"],[120810,1,"8"],[120811,1,"9"],[120812,1,"0"],[120813,1,"1"],[120814,1,"2"],[120815,1,"3"],[120816,1,"4"],[120817,1,"5"],[120818,1,"6"],[120819,1,"7"],[120820,1,"8"],[120821,1,"9"],[120822,1,"0"],[120823,1,"1"],[120824,1,"2"],[120825,1,"3"],[120826,1,"4"],[120827,1,"5"],[120828,1,"6"],[120829,1,"7"],[120830,1,"8"],[120831,1,"9"],[[120832,121343],2],[[121344,121398],2],[[121399,121402],2],[[121403,121452],2],[[121453,121460],2],[121461,2],[[121462,121475],2],[121476,2],[[121477,121483],2],[[121484,121498],3],[[121499,121503],2],[121504,3],[[121505,121519],2],[[121520,122623],3],[[122624,122654],2],[[122655,122660],3],[[122661,122666],2],[[122667,122879],3],[[122880,122886],2],[122887,3],[[122888,122904],2],[[122905,122906],3],[[122907,122913],2],[122914,3],[[122915,122916],2],[122917,3],[[122918,122922],2],[[122923,122927],3],[122928,1,"\u0430"],[122929,1,"\u0431"],[122930,1,"\u0432"],[122931,1,"\u0433"],[122932,1,"\u0434"],[122933,1,"\u0435"],[122934,1,"\u0436"],[122935,1,"\u0437"],[122936,1,"\u0438"],[122937,1,"\u043A"],[122938,1,"\u043B"],[122939,1,"\u043C"],[122940,1,"\u043E"],[122941,1,"\u043F"],[122942,1,"\u0440"],[122943,1,"\u0441"],[122944,1,"\u0442"],[122945,1,"\u0443"],[122946,1,"\u0444"],[122947,1,"\u0445"],[122948,1,"\u0446"],[122949,1,"\u0447"],[122950,1,"\u0448"],[122951,1,"\u044B"],[122952,1,"\u044D"],[122953,1,"\u044E"],[122954,1,"\uA689"],[122955,1,"\u04D9"],[122956,1,"\u0456"],[122957,1,"\u0458"],[122958,1,"\u04E9"],[122959,1,"\u04AF"],[122960,1,"\u04CF"],[122961,1,"\u0430"],[122962,1,"\u0431"],[122963,1,"\u0432"],[122964,1,"\u0433"],[122965,1,"\u0434"],[122966,1,"\u0435"],[122967,1,"\u0436"],[122968,1,"\u0437"],[122969,1,"\u0438"],[122970,1,"\u043A"],[122971,1,"\u043B"],[122972,1,"\u043E"],[122973,1,"\u043F"],[122974,1,"\u0441"],[122975,1,"\u0443"],[122976,1,"\u0444"],[122977,1,"\u0445"],[122978,1,"\u0446"],[122979,1,"\u0447"],[122980,1,"\u0448"],[122981,1,"\u044A"],[122982,1,"\u044B"],[122983,1,"\u0491"],[122984,1,"\u0456"],[122985,1,"\u0455"],[122986,1,"\u045F"],[122987,1,"\u04AB"],[122988,1,"\uA651"],[122989,1,"\u04B1"],[[122990,123022],3],[123023,2],[[123024,123135],3],[[123136,123180],2],[[123181,123183],3],[[123184,123197],2],[[123198,123199],3],[[123200,123209],2],[[123210,123213],3],[123214,2],[123215,2],[[123216,123535],3],[[123536,123566],2],[[123567,123583],3],[[123584,123641],2],[[123642,123646],3],[123647,2],[[123648,124111],3],[[124112,124153],2],[[124154,124367],3],[[124368,124410],2],[[124411,124414],3],[124415,2],[[124416,124895],3],[[124896,124902],2],[124903,3],[[124904,124907],2],[124908,3],[[124909,124910],2],[124911,3],[[124912,124926],2],[124927,3],[[124928,125124],2],[[125125,125126],3],[[125127,125135],2],[[125136,125142],2],[[125143,125183],3],[125184,1,"\u{1E922}"],[125185,1,"\u{1E923}"],[125186,1,"\u{1E924}"],[125187,1,"\u{1E925}"],[125188,1,"\u{1E926}"],[125189,1,"\u{1E927}"],[125190,1,"\u{1E928}"],[125191,1,"\u{1E929}"],[125192,1,"\u{1E92A}"],[125193,1,"\u{1E92B}"],[125194,1,"\u{1E92C}"],[125195,1,"\u{1E92D}"],[125196,1,"\u{1E92E}"],[125197,1,"\u{1E92F}"],[125198,1,"\u{1E930}"],[125199,1,"\u{1E931}"],[125200,1,"\u{1E932}"],[125201,1,"\u{1E933}"],[125202,1,"\u{1E934}"],[125203,1,"\u{1E935}"],[125204,1,"\u{1E936}"],[125205,1,"\u{1E937}"],[125206,1,"\u{1E938}"],[125207,1,"\u{1E939}"],[125208,1,"\u{1E93A}"],[125209,1,"\u{1E93B}"],[125210,1,"\u{1E93C}"],[125211,1,"\u{1E93D}"],[125212,1,"\u{1E93E}"],[125213,1,"\u{1E93F}"],[125214,1,"\u{1E940}"],[125215,1,"\u{1E941}"],[125216,1,"\u{1E942}"],[125217,1,"\u{1E943}"],[[125218,125258],2],[125259,2],[[125260,125263],3],[[125264,125273],2],[[125274,125277],3],[[125278,125279],2],[[125280,126064],3],[[126065,126132],2],[[126133,126208],3],[[126209,126269],2],[[126270,126463],3],[126464,1,"\u0627"],[126465,1,"\u0628"],[126466,1,"\u062C"],[126467,1,"\u062F"],[126468,3],[126469,1,"\u0648"],[126470,1,"\u0632"],[126471,1,"\u062D"],[126472,1,"\u0637"],[126473,1,"\u064A"],[126474,1,"\u0643"],[126475,1,"\u0644"],[126476,1,"\u0645"],[126477,1,"\u0646"],[126478,1,"\u0633"],[126479,1,"\u0639"],[126480,1,"\u0641"],[126481,1,"\u0635"],[126482,1,"\u0642"],[126483,1,"\u0631"],[126484,1,"\u0634"],[126485,1,"\u062A"],[126486,1,"\u062B"],[126487,1,"\u062E"],[126488,1,"\u0630"],[126489,1,"\u0636"],[126490,1,"\u0638"],[126491,1,"\u063A"],[126492,1,"\u066E"],[126493,1,"\u06BA"],[126494,1,"\u06A1"],[126495,1,"\u066F"],[126496,3],[126497,1,"\u0628"],[126498,1,"\u062C"],[126499,3],[126500,1,"\u0647"],[[126501,126502],3],[126503,1,"\u062D"],[126504,3],[126505,1,"\u064A"],[126506,1,"\u0643"],[126507,1,"\u0644"],[126508,1,"\u0645"],[126509,1,"\u0646"],[126510,1,"\u0633"],[126511,1,"\u0639"],[126512,1,"\u0641"],[126513,1,"\u0635"],[126514,1,"\u0642"],[126515,3],[126516,1,"\u0634"],[126517,1,"\u062A"],[126518,1,"\u062B"],[126519,1,"\u062E"],[126520,3],[126521,1,"\u0636"],[126522,3],[126523,1,"\u063A"],[[126524,126529],3],[126530,1,"\u062C"],[[126531,126534],3],[126535,1,"\u062D"],[126536,3],[126537,1,"\u064A"],[126538,3],[126539,1,"\u0644"],[126540,3],[126541,1,"\u0646"],[126542,1,"\u0633"],[126543,1,"\u0639"],[126544,3],[126545,1,"\u0635"],[126546,1,"\u0642"],[126547,3],[126548,1,"\u0634"],[[126549,126550],3],[126551,1,"\u062E"],[126552,3],[126553,1,"\u0636"],[126554,3],[126555,1,"\u063A"],[126556,3],[126557,1,"\u06BA"],[126558,3],[126559,1,"\u066F"],[126560,3],[126561,1,"\u0628"],[126562,1,"\u062C"],[126563,3],[126564,1,"\u0647"],[[126565,126566],3],[126567,1,"\u062D"],[126568,1,"\u0637"],[126569,1,"\u064A"],[126570,1,"\u0643"],[126571,3],[126572,1,"\u0645"],[126573,1,"\u0646"],[126574,1,"\u0633"],[126575,1,"\u0639"],[126576,1,"\u0641"],[126577,1,"\u0635"],[126578,1,"\u0642"],[126579,3],[126580,1,"\u0634"],[126581,1,"\u062A"],[126582,1,"\u062B"],[126583,1,"\u062E"],[126584,3],[126585,1,"\u0636"],[126586,1,"\u0638"],[126587,1,"\u063A"],[126588,1,"\u066E"],[126589,3],[126590,1,"\u06A1"],[126591,3],[126592,1,"\u0627"],[126593,1,"\u0628"],[126594,1,"\u062C"],[126595,1,"\u062F"],[126596,1,"\u0647"],[126597,1,"\u0648"],[126598,1,"\u0632"],[126599,1,"\u062D"],[126600,1,"\u0637"],[126601,1,"\u064A"],[126602,3],[126603,1,"\u0644"],[126604,1,"\u0645"],[126605,1,"\u0646"],[126606,1,"\u0633"],[126607,1,"\u0639"],[126608,1,"\u0641"],[126609,1,"\u0635"],[126610,1,"\u0642"],[126611,1,"\u0631"],[126612,1,"\u0634"],[126613,1,"\u062A"],[126614,1,"\u062B"],[126615,1,"\u062E"],[126616,1,"\u0630"],[126617,1,"\u0636"],[126618,1,"\u0638"],[126619,1,"\u063A"],[[126620,126624],3],[126625,1,"\u0628"],[126626,1,"\u062C"],[126627,1,"\u062F"],[126628,3],[126629,1,"\u0648"],[126630,1,"\u0632"],[126631,1,"\u062D"],[126632,1,"\u0637"],[126633,1,"\u064A"],[126634,3],[126635,1,"\u0644"],[126636,1,"\u0645"],[126637,1,"\u0646"],[126638,1,"\u0633"],[126639,1,"\u0639"],[126640,1,"\u0641"],[126641,1,"\u0635"],[126642,1,"\u0642"],[126643,1,"\u0631"],[126644,1,"\u0634"],[126645,1,"\u062A"],[126646,1,"\u062B"],[126647,1,"\u062E"],[126648,1,"\u0630"],[126649,1,"\u0636"],[126650,1,"\u0638"],[126651,1,"\u063A"],[[126652,126703],3],[[126704,126705],2],[[126706,126975],3],[[126976,127019],2],[[127020,127023],3],[[127024,127123],2],[[127124,127135],3],[[127136,127150],2],[[127151,127152],3],[[127153,127166],2],[127167,2],[127168,3],[[127169,127183],2],[127184,3],[[127185,127199],2],[[127200,127221],2],[[127222,127231],3],[127232,3],[127233,1,"0,"],[127234,1,"1,"],[127235,1,"2,"],[127236,1,"3,"],[127237,1,"4,"],[127238,1,"5,"],[127239,1,"6,"],[127240,1,"7,"],[127241,1,"8,"],[127242,1,"9,"],[[127243,127244],2],[[127245,127247],2],[127248,1,"(a)"],[127249,1,"(b)"],[127250,1,"(c)"],[127251,1,"(d)"],[127252,1,"(e)"],[127253,1,"(f)"],[127254,1,"(g)"],[127255,1,"(h)"],[127256,1,"(i)"],[127257,1,"(j)"],[127258,1,"(k)"],[127259,1,"(l)"],[127260,1,"(m)"],[127261,1,"(n)"],[127262,1,"(o)"],[127263,1,"(p)"],[127264,1,"(q)"],[127265,1,"(r)"],[127266,1,"(s)"],[127267,1,"(t)"],[127268,1,"(u)"],[127269,1,"(v)"],[127270,1,"(w)"],[127271,1,"(x)"],[127272,1,"(y)"],[127273,1,"(z)"],[127274,1,"\u3014s\u3015"],[127275,1,"c"],[127276,1,"r"],[127277,1,"cd"],[127278,1,"wz"],[127279,2],[127280,1,"a"],[127281,1,"b"],[127282,1,"c"],[127283,1,"d"],[127284,1,"e"],[127285,1,"f"],[127286,1,"g"],[127287,1,"h"],[127288,1,"i"],[127289,1,"j"],[127290,1,"k"],[127291,1,"l"],[127292,1,"m"],[127293,1,"n"],[127294,1,"o"],[127295,1,"p"],[127296,1,"q"],[127297,1,"r"],[127298,1,"s"],[127299,1,"t"],[127300,1,"u"],[127301,1,"v"],[127302,1,"w"],[127303,1,"x"],[127304,1,"y"],[127305,1,"z"],[127306,1,"hv"],[127307,1,"mv"],[127308,1,"sd"],[127309,1,"ss"],[127310,1,"ppv"],[127311,1,"wc"],[[127312,127318],2],[127319,2],[[127320,127326],2],[127327,2],[[127328,127337],2],[127338,1,"mc"],[127339,1,"md"],[127340,1,"mr"],[[127341,127343],2],[[127344,127352],2],[127353,2],[127354,2],[[127355,127356],2],[[127357,127358],2],[127359,2],[[127360,127369],2],[[127370,127373],2],[[127374,127375],2],[127376,1,"dj"],[[127377,127386],2],[[127387,127404],2],[127405,2],[[127406,127461],3],[[127462,127487],2],[127488,1,"\u307B\u304B"],[127489,1,"\u30B3\u30B3"],[127490,1,"\u30B5"],[[127491,127503],3],[127504,1,"\u624B"],[127505,1,"\u5B57"],[127506,1,"\u53CC"],[127507,1,"\u30C7"],[127508,1,"\u4E8C"],[127509,1,"\u591A"],[127510,1,"\u89E3"],[127511,1,"\u5929"],[127512,1,"\u4EA4"],[127513,1,"\u6620"],[127514,1,"\u7121"],[127515,1,"\u6599"],[127516,1,"\u524D"],[127517,1,"\u5F8C"],[127518,1,"\u518D"],[127519,1,"\u65B0"],[127520,1,"\u521D"],[127521,1,"\u7D42"],[127522,1,"\u751F"],[127523,1,"\u8CA9"],[127524,1,"\u58F0"],[127525,1,"\u5439"],[127526,1,"\u6F14"],[127527,1,"\u6295"],[127528,1,"\u6355"],[127529,1,"\u4E00"],[127530,1,"\u4E09"],[127531,1,"\u904A"],[127532,1,"\u5DE6"],[127533,1,"\u4E2D"],[127534,1,"\u53F3"],[127535,1,"\u6307"],[127536,1,"\u8D70"],[127537,1,"\u6253"],[127538,1,"\u7981"],[127539,1,"\u7A7A"],[127540,1,"\u5408"],[127541,1,"\u6E80"],[127542,1,"\u6709"],[127543,1,"\u6708"],[127544,1,"\u7533"],[127545,1,"\u5272"],[127546,1,"\u55B6"],[127547,1,"\u914D"],[[127548,127551],3],[127552,1,"\u3014\u672C\u3015"],[127553,1,"\u3014\u4E09\u3015"],[127554,1,"\u3014\u4E8C\u3015"],[127555,1,"\u3014\u5B89\u3015"],[127556,1,"\u3014\u70B9\u3015"],[127557,1,"\u3014\u6253\u3015"],[127558,1,"\u3014\u76D7\u3015"],[127559,1,"\u3014\u52DD\u3015"],[127560,1,"\u3014\u6557\u3015"],[[127561,127567],3],[127568,1,"\u5F97"],[127569,1,"\u53EF"],[[127570,127583],3],[[127584,127589],2],[[127590,127743],3],[[127744,127776],2],[[127777,127788],2],[[127789,127791],2],[[127792,127797],2],[127798,2],[[127799,127868],2],[127869,2],[[127870,127871],2],[[127872,127891],2],[[127892,127903],2],[[127904,127940],2],[127941,2],[[127942,127946],2],[[127947,127950],2],[[127951,127955],2],[[127956,127967],2],[[127968,127984],2],[[127985,127991],2],[[127992,127999],2],[[128e3,128062],2],[128063,2],[128064,2],[128065,2],[[128066,128247],2],[128248,2],[[128249,128252],2],[[128253,128254],2],[128255,2],[[128256,128317],2],[[128318,128319],2],[[128320,128323],2],[[128324,128330],2],[[128331,128335],2],[[128336,128359],2],[[128360,128377],2],[128378,2],[[128379,128419],2],[128420,2],[[128421,128506],2],[[128507,128511],2],[128512,2],[[128513,128528],2],[128529,2],[[128530,128532],2],[128533,2],[128534,2],[128535,2],[128536,2],[128537,2],[128538,2],[128539,2],[[128540,128542],2],[128543,2],[[128544,128549],2],[[128550,128551],2],[[128552,128555],2],[128556,2],[128557,2],[[128558,128559],2],[[128560,128563],2],[128564,2],[[128565,128576],2],[[128577,128578],2],[[128579,128580],2],[[128581,128591],2],[[128592,128639],2],[[128640,128709],2],[[128710,128719],2],[128720,2],[[128721,128722],2],[[128723,128724],2],[128725,2],[[128726,128727],2],[[128728,128731],3],[128732,2],[[128733,128735],2],[[128736,128748],2],[[128749,128751],3],[[128752,128755],2],[[128756,128758],2],[[128759,128760],2],[128761,2],[128762,2],[[128763,128764],2],[[128765,128767],3],[[128768,128883],2],[[128884,128886],2],[[128887,128890],3],[[128891,128895],2],[[128896,128980],2],[[128981,128984],2],[128985,2],[[128986,128991],3],[[128992,129003],2],[[129004,129007],3],[129008,2],[[129009,129023],3],[[129024,129035],2],[[129036,129039],3],[[129040,129095],2],[[129096,129103],3],[[129104,129113],2],[[129114,129119],3],[[129120,129159],2],[[129160,129167],3],[[129168,129197],2],[[129198,129199],3],[[129200,129201],2],[[129202,129211],2],[[129212,129215],3],[[129216,129217],2],[[129218,129279],3],[[129280,129291],2],[129292,2],[[129293,129295],2],[[129296,129304],2],[[129305,129310],2],[129311,2],[[129312,129319],2],[[129320,129327],2],[129328,2],[[129329,129330],2],[[129331,129342],2],[129343,2],[[129344,129355],2],[129356,2],[[129357,129359],2],[[129360,129374],2],[[129375,129387],2],[[129388,129392],2],[129393,2],[129394,2],[[129395,129398],2],[[129399,129400],2],[129401,2],[129402,2],[129403,2],[[129404,129407],2],[[129408,129412],2],[[129413,129425],2],[[129426,129431],2],[[129432,129442],2],[[129443,129444],2],[[129445,129450],2],[[129451,129453],2],[[129454,129455],2],[[129456,129465],2],[[129466,129471],2],[129472,2],[[129473,129474],2],[[129475,129482],2],[129483,2],[129484,2],[[129485,129487],2],[[129488,129510],2],[[129511,129535],2],[[129536,129619],2],[[129620,129631],3],[[129632,129645],2],[[129646,129647],3],[[129648,129651],2],[129652,2],[[129653,129655],2],[[129656,129658],2],[[129659,129660],2],[[129661,129663],3],[[129664,129666],2],[[129667,129670],2],[[129671,129672],2],[129673,2],[[129674,129678],3],[129679,2],[[129680,129685],2],[[129686,129704],2],[[129705,129708],2],[[129709,129711],2],[[129712,129718],2],[[129719,129722],2],[[129723,129725],2],[129726,2],[129727,2],[[129728,129730],2],[[129731,129733],2],[129734,2],[[129735,129741],3],[[129742,129743],2],[[129744,129750],2],[[129751,129753],2],[[129754,129755],2],[129756,2],[[129757,129758],3],[129759,2],[[129760,129767],2],[129768,2],[129769,2],[[129770,129775],3],[[129776,129782],2],[[129783,129784],2],[[129785,129791],3],[[129792,129938],2],[129939,3],[[129940,129994],2],[[129995,130031],2],[130032,1,"0"],[130033,1,"1"],[130034,1,"2"],[130035,1,"3"],[130036,1,"4"],[130037,1,"5"],[130038,1,"6"],[130039,1,"7"],[130040,1,"8"],[130041,1,"9"],[[130042,131069],3],[[131070,131071],3],[[131072,173782],2],[[173783,173789],2],[[173790,173791],2],[[173792,173823],3],[[173824,177972],2],[[177973,177976],2],[177977,2],[[177978,177983],3],[[177984,178205],2],[[178206,178207],3],[[178208,183969],2],[[183970,183983],3],[[183984,191456],2],[[191457,191471],3],[[191472,192093],2],[[192094,194559],3],[194560,1,"\u4E3D"],[194561,1,"\u4E38"],[194562,1,"\u4E41"],[194563,1,"\u{20122}"],[194564,1,"\u4F60"],[194565,1,"\u4FAE"],[194566,1,"\u4FBB"],[194567,1,"\u5002"],[194568,1,"\u507A"],[194569,1,"\u5099"],[194570,1,"\u50E7"],[194571,1,"\u50CF"],[194572,1,"\u349E"],[194573,1,"\u{2063A}"],[194574,1,"\u514D"],[194575,1,"\u5154"],[194576,1,"\u5164"],[194577,1,"\u5177"],[194578,1,"\u{2051C}"],[194579,1,"\u34B9"],[194580,1,"\u5167"],[194581,1,"\u518D"],[194582,1,"\u{2054B}"],[194583,1,"\u5197"],[194584,1,"\u51A4"],[194585,1,"\u4ECC"],[194586,1,"\u51AC"],[194587,1,"\u51B5"],[194588,1,"\u{291DF}"],[194589,1,"\u51F5"],[194590,1,"\u5203"],[194591,1,"\u34DF"],[194592,1,"\u523B"],[194593,1,"\u5246"],[194594,1,"\u5272"],[194595,1,"\u5277"],[194596,1,"\u3515"],[194597,1,"\u52C7"],[194598,1,"\u52C9"],[194599,1,"\u52E4"],[194600,1,"\u52FA"],[194601,1,"\u5305"],[194602,1,"\u5306"],[194603,1,"\u5317"],[194604,1,"\u5349"],[194605,1,"\u5351"],[194606,1,"\u535A"],[194607,1,"\u5373"],[194608,1,"\u537D"],[[194609,194611],1,"\u537F"],[194612,1,"\u{20A2C}"],[194613,1,"\u7070"],[194614,1,"\u53CA"],[194615,1,"\u53DF"],[194616,1,"\u{20B63}"],[194617,1,"\u53EB"],[194618,1,"\u53F1"],[194619,1,"\u5406"],[194620,1,"\u549E"],[194621,1,"\u5438"],[194622,1,"\u5448"],[194623,1,"\u5468"],[194624,1,"\u54A2"],[194625,1,"\u54F6"],[194626,1,"\u5510"],[194627,1,"\u5553"],[194628,1,"\u5563"],[[194629,194630],1,"\u5584"],[194631,1,"\u5599"],[194632,1,"\u55AB"],[194633,1,"\u55B3"],[194634,1,"\u55C2"],[194635,1,"\u5716"],[194636,1,"\u5606"],[194637,1,"\u5717"],[194638,1,"\u5651"],[194639,1,"\u5674"],[194640,1,"\u5207"],[194641,1,"\u58EE"],[194642,1,"\u57CE"],[194643,1,"\u57F4"],[194644,1,"\u580D"],[194645,1,"\u578B"],[194646,1,"\u5832"],[194647,1,"\u5831"],[194648,1,"\u58AC"],[194649,1,"\u{214E4}"],[194650,1,"\u58F2"],[194651,1,"\u58F7"],[194652,1,"\u5906"],[194653,1,"\u591A"],[194654,1,"\u5922"],[194655,1,"\u5962"],[194656,1,"\u{216A8}"],[194657,1,"\u{216EA}"],[194658,1,"\u59EC"],[194659,1,"\u5A1B"],[194660,1,"\u5A27"],[194661,1,"\u59D8"],[194662,1,"\u5A66"],[194663,1,"\u36EE"],[194664,1,"\u36FC"],[194665,1,"\u5B08"],[[194666,194667],1,"\u5B3E"],[194668,1,"\u{219C8}"],[194669,1,"\u5BC3"],[194670,1,"\u5BD8"],[194671,1,"\u5BE7"],[194672,1,"\u5BF3"],[194673,1,"\u{21B18}"],[194674,1,"\u5BFF"],[194675,1,"\u5C06"],[194676,1,"\u5F53"],[194677,1,"\u5C22"],[194678,1,"\u3781"],[194679,1,"\u5C60"],[194680,1,"\u5C6E"],[194681,1,"\u5CC0"],[194682,1,"\u5C8D"],[194683,1,"\u{21DE4}"],[194684,1,"\u5D43"],[194685,1,"\u{21DE6}"],[194686,1,"\u5D6E"],[194687,1,"\u5D6B"],[194688,1,"\u5D7C"],[194689,1,"\u5DE1"],[194690,1,"\u5DE2"],[194691,1,"\u382F"],[194692,1,"\u5DFD"],[194693,1,"\u5E28"],[194694,1,"\u5E3D"],[194695,1,"\u5E69"],[194696,1,"\u3862"],[194697,1,"\u{22183}"],[194698,1,"\u387C"],[194699,1,"\u5EB0"],[194700,1,"\u5EB3"],[194701,1,"\u5EB6"],[194702,1,"\u5ECA"],[194703,1,"\u{2A392}"],[194704,1,"\u5EFE"],[[194705,194706],1,"\u{22331}"],[194707,1,"\u8201"],[[194708,194709],1,"\u5F22"],[194710,1,"\u38C7"],[194711,1,"\u{232B8}"],[194712,1,"\u{261DA}"],[194713,1,"\u5F62"],[194714,1,"\u5F6B"],[194715,1,"\u38E3"],[194716,1,"\u5F9A"],[194717,1,"\u5FCD"],[194718,1,"\u5FD7"],[194719,1,"\u5FF9"],[194720,1,"\u6081"],[194721,1,"\u393A"],[194722,1,"\u391C"],[194723,1,"\u6094"],[194724,1,"\u{226D4}"],[194725,1,"\u60C7"],[194726,1,"\u6148"],[194727,1,"\u614C"],[194728,1,"\u614E"],[194729,1,"\u614C"],[194730,1,"\u617A"],[194731,1,"\u618E"],[194732,1,"\u61B2"],[194733,1,"\u61A4"],[194734,1,"\u61AF"],[194735,1,"\u61DE"],[194736,1,"\u61F2"],[194737,1,"\u61F6"],[194738,1,"\u6210"],[194739,1,"\u621B"],[194740,1,"\u625D"],[194741,1,"\u62B1"],[194742,1,"\u62D4"],[194743,1,"\u6350"],[194744,1,"\u{22B0C}"],[194745,1,"\u633D"],[194746,1,"\u62FC"],[194747,1,"\u6368"],[194748,1,"\u6383"],[194749,1,"\u63E4"],[194750,1,"\u{22BF1}"],[194751,1,"\u6422"],[194752,1,"\u63C5"],[194753,1,"\u63A9"],[194754,1,"\u3A2E"],[194755,1,"\u6469"],[194756,1,"\u647E"],[194757,1,"\u649D"],[194758,1,"\u6477"],[194759,1,"\u3A6C"],[194760,1,"\u654F"],[194761,1,"\u656C"],[194762,1,"\u{2300A}"],[194763,1,"\u65E3"],[194764,1,"\u66F8"],[194765,1,"\u6649"],[194766,1,"\u3B19"],[194767,1,"\u6691"],[194768,1,"\u3B08"],[194769,1,"\u3AE4"],[194770,1,"\u5192"],[194771,1,"\u5195"],[194772,1,"\u6700"],[194773,1,"\u669C"],[194774,1,"\u80AD"],[194775,1,"\u43D9"],[194776,1,"\u6717"],[194777,1,"\u671B"],[194778,1,"\u6721"],[194779,1,"\u675E"],[194780,1,"\u6753"],[194781,1,"\u{233C3}"],[194782,1,"\u3B49"],[194783,1,"\u67FA"],[194784,1,"\u6785"],[194785,1,"\u6852"],[194786,1,"\u6885"],[194787,1,"\u{2346D}"],[194788,1,"\u688E"],[194789,1,"\u681F"],[194790,1,"\u6914"],[194791,1,"\u3B9D"],[194792,1,"\u6942"],[194793,1,"\u69A3"],[194794,1,"\u69EA"],[194795,1,"\u6AA8"],[194796,1,"\u{236A3}"],[194797,1,"\u6ADB"],[194798,1,"\u3C18"],[194799,1,"\u6B21"],[194800,1,"\u{238A7}"],[194801,1,"\u6B54"],[194802,1,"\u3C4E"],[194803,1,"\u6B72"],[194804,1,"\u6B9F"],[194805,1,"\u6BBA"],[194806,1,"\u6BBB"],[194807,1,"\u{23A8D}"],[194808,1,"\u{21D0B}"],[194809,1,"\u{23AFA}"],[194810,1,"\u6C4E"],[194811,1,"\u{23CBC}"],[194812,1,"\u6CBF"],[194813,1,"\u6CCD"],[194814,1,"\u6C67"],[194815,1,"\u6D16"],[194816,1,"\u6D3E"],[194817,1,"\u6D77"],[194818,1,"\u6D41"],[194819,1,"\u6D69"],[194820,1,"\u6D78"],[194821,1,"\u6D85"],[194822,1,"\u{23D1E}"],[194823,1,"\u6D34"],[194824,1,"\u6E2F"],[194825,1,"\u6E6E"],[194826,1,"\u3D33"],[194827,1,"\u6ECB"],[194828,1,"\u6EC7"],[194829,1,"\u{23ED1}"],[194830,1,"\u6DF9"],[194831,1,"\u6F6E"],[194832,1,"\u{23F5E}"],[194833,1,"\u{23F8E}"],[194834,1,"\u6FC6"],[194835,1,"\u7039"],[194836,1,"\u701E"],[194837,1,"\u701B"],[194838,1,"\u3D96"],[194839,1,"\u704A"],[194840,1,"\u707D"],[194841,1,"\u7077"],[194842,1,"\u70AD"],[194843,1,"\u{20525}"],[194844,1,"\u7145"],[194845,1,"\u{24263}"],[194846,1,"\u719C"],[194847,1,"\u{243AB}"],[194848,1,"\u7228"],[194849,1,"\u7235"],[194850,1,"\u7250"],[194851,1,"\u{24608}"],[194852,1,"\u7280"],[194853,1,"\u7295"],[194854,1,"\u{24735}"],[194855,1,"\u{24814}"],[194856,1,"\u737A"],[194857,1,"\u738B"],[194858,1,"\u3EAC"],[194859,1,"\u73A5"],[[194860,194861],1,"\u3EB8"],[194862,1,"\u7447"],[194863,1,"\u745C"],[194864,1,"\u7471"],[194865,1,"\u7485"],[194866,1,"\u74CA"],[194867,1,"\u3F1B"],[194868,1,"\u7524"],[194869,1,"\u{24C36}"],[194870,1,"\u753E"],[194871,1,"\u{24C92}"],[194872,1,"\u7570"],[194873,1,"\u{2219F}"],[194874,1,"\u7610"],[194875,1,"\u{24FA1}"],[194876,1,"\u{24FB8}"],[194877,1,"\u{25044}"],[194878,1,"\u3FFC"],[194879,1,"\u4008"],[194880,1,"\u76F4"],[194881,1,"\u{250F3}"],[194882,1,"\u{250F2}"],[194883,1,"\u{25119}"],[194884,1,"\u{25133}"],[194885,1,"\u771E"],[[194886,194887],1,"\u771F"],[194888,1,"\u774A"],[194889,1,"\u4039"],[194890,1,"\u778B"],[194891,1,"\u4046"],[194892,1,"\u4096"],[194893,1,"\u{2541D}"],[194894,1,"\u784E"],[194895,1,"\u788C"],[194896,1,"\u78CC"],[194897,1,"\u40E3"],[194898,1,"\u{25626}"],[194899,1,"\u7956"],[194900,1,"\u{2569A}"],[194901,1,"\u{256C5}"],[194902,1,"\u798F"],[194903,1,"\u79EB"],[194904,1,"\u412F"],[194905,1,"\u7A40"],[194906,1,"\u7A4A"],[194907,1,"\u7A4F"],[194908,1,"\u{2597C}"],[[194909,194910],1,"\u{25AA7}"],[194911,1,"\u7AEE"],[194912,1,"\u4202"],[194913,1,"\u{25BAB}"],[194914,1,"\u7BC6"],[194915,1,"\u7BC9"],[194916,1,"\u4227"],[194917,1,"\u{25C80}"],[194918,1,"\u7CD2"],[194919,1,"\u42A0"],[194920,1,"\u7CE8"],[194921,1,"\u7CE3"],[194922,1,"\u7D00"],[194923,1,"\u{25F86}"],[194924,1,"\u7D63"],[194925,1,"\u4301"],[194926,1,"\u7DC7"],[194927,1,"\u7E02"],[194928,1,"\u7E45"],[194929,1,"\u4334"],[194930,1,"\u{26228}"],[194931,1,"\u{26247}"],[194932,1,"\u4359"],[194933,1,"\u{262D9}"],[194934,1,"\u7F7A"],[194935,1,"\u{2633E}"],[194936,1,"\u7F95"],[194937,1,"\u7FFA"],[194938,1,"\u8005"],[194939,1,"\u{264DA}"],[194940,1,"\u{26523}"],[194941,1,"\u8060"],[194942,1,"\u{265A8}"],[194943,1,"\u8070"],[194944,1,"\u{2335F}"],[194945,1,"\u43D5"],[194946,1,"\u80B2"],[194947,1,"\u8103"],[194948,1,"\u440B"],[194949,1,"\u813E"],[194950,1,"\u5AB5"],[194951,1,"\u{267A7}"],[194952,1,"\u{267B5}"],[194953,1,"\u{23393}"],[194954,1,"\u{2339C}"],[194955,1,"\u8201"],[194956,1,"\u8204"],[194957,1,"\u8F9E"],[194958,1,"\u446B"],[194959,1,"\u8291"],[194960,1,"\u828B"],[194961,1,"\u829D"],[194962,1,"\u52B3"],[194963,1,"\u82B1"],[194964,1,"\u82B3"],[194965,1,"\u82BD"],[194966,1,"\u82E6"],[194967,1,"\u{26B3C}"],[194968,1,"\u82E5"],[194969,1,"\u831D"],[194970,1,"\u8363"],[194971,1,"\u83AD"],[194972,1,"\u8323"],[194973,1,"\u83BD"],[194974,1,"\u83E7"],[194975,1,"\u8457"],[194976,1,"\u8353"],[194977,1,"\u83CA"],[194978,1,"\u83CC"],[194979,1,"\u83DC"],[194980,1,"\u{26C36}"],[194981,1,"\u{26D6B}"],[194982,1,"\u{26CD5}"],[194983,1,"\u452B"],[194984,1,"\u84F1"],[194985,1,"\u84F3"],[194986,1,"\u8516"],[194987,1,"\u{273CA}"],[194988,1,"\u8564"],[194989,1,"\u{26F2C}"],[194990,1,"\u455D"],[194991,1,"\u4561"],[194992,1,"\u{26FB1}"],[194993,1,"\u{270D2}"],[194994,1,"\u456B"],[194995,1,"\u8650"],[194996,1,"\u865C"],[194997,1,"\u8667"],[194998,1,"\u8669"],[194999,1,"\u86A9"],[195e3,1,"\u8688"],[195001,1,"\u870E"],[195002,1,"\u86E2"],[195003,1,"\u8779"],[195004,1,"\u8728"],[195005,1,"\u876B"],[195006,1,"\u8786"],[195007,1,"\u45D7"],[195008,1,"\u87E1"],[195009,1,"\u8801"],[195010,1,"\u45F9"],[195011,1,"\u8860"],[195012,1,"\u8863"],[195013,1,"\u{27667}"],[195014,1,"\u88D7"],[195015,1,"\u88DE"],[195016,1,"\u4635"],[195017,1,"\u88FA"],[195018,1,"\u34BB"],[195019,1,"\u{278AE}"],[195020,1,"\u{27966}"],[195021,1,"\u46BE"],[195022,1,"\u46C7"],[195023,1,"\u8AA0"],[195024,1,"\u8AED"],[195025,1,"\u8B8A"],[195026,1,"\u8C55"],[195027,1,"\u{27CA8}"],[195028,1,"\u8CAB"],[195029,1,"\u8CC1"],[195030,1,"\u8D1B"],[195031,1,"\u8D77"],[195032,1,"\u{27F2F}"],[195033,1,"\u{20804}"],[195034,1,"\u8DCB"],[195035,1,"\u8DBC"],[195036,1,"\u8DF0"],[195037,1,"\u{208DE}"],[195038,1,"\u8ED4"],[195039,1,"\u8F38"],[195040,1,"\u{285D2}"],[195041,1,"\u{285ED}"],[195042,1,"\u9094"],[195043,1,"\u90F1"],[195044,1,"\u9111"],[195045,1,"\u{2872E}"],[195046,1,"\u911B"],[195047,1,"\u9238"],[195048,1,"\u92D7"],[195049,1,"\u92D8"],[195050,1,"\u927C"],[195051,1,"\u93F9"],[195052,1,"\u9415"],[195053,1,"\u{28BFA}"],[195054,1,"\u958B"],[195055,1,"\u4995"],[195056,1,"\u95B7"],[195057,1,"\u{28D77}"],[195058,1,"\u49E6"],[195059,1,"\u96C3"],[195060,1,"\u5DB2"],[195061,1,"\u9723"],[195062,1,"\u{29145}"],[195063,1,"\u{2921A}"],[195064,1,"\u4A6E"],[195065,1,"\u4A76"],[195066,1,"\u97E0"],[195067,1,"\u{2940A}"],[195068,1,"\u4AB2"],[195069,1,"\u{29496}"],[[195070,195071],1,"\u980B"],[195072,1,"\u9829"],[195073,1,"\u{295B6}"],[195074,1,"\u98E2"],[195075,1,"\u4B33"],[195076,1,"\u9929"],[195077,1,"\u99A7"],[195078,1,"\u99C2"],[195079,1,"\u99FE"],[195080,1,"\u4BCE"],[195081,1,"\u{29B30}"],[195082,1,"\u9B12"],[195083,1,"\u9C40"],[195084,1,"\u9CFD"],[195085,1,"\u4CCE"],[195086,1,"\u4CED"],[195087,1,"\u9D67"],[195088,1,"\u{2A0CE}"],[195089,1,"\u4CF8"],[195090,1,"\u{2A105}"],[195091,1,"\u{2A20E}"],[195092,1,"\u{2A291}"],[195093,1,"\u9EBB"],[195094,1,"\u4D56"],[195095,1,"\u9EF9"],[195096,1,"\u9EFE"],[195097,1,"\u9F05"],[195098,1,"\u9F0F"],[195099,1,"\u9F16"],[195100,1,"\u9F3B"],[195101,1,"\u{2A600}"],[[195102,196605],3],[[196606,196607],3],[[196608,201546],2],[[201547,201551],3],[[201552,205743],2],[[205744,262141],3],[[262142,262143],3],[[262144,327677],3],[[327678,327679],3],[[327680,393213],3],[[393214,393215],3],[[393216,458749],3],[[458750,458751],3],[[458752,524285],3],[[524286,524287],3],[[524288,589821],3],[[589822,589823],3],[[589824,655357],3],[[655358,655359],3],[[655360,720893],3],[[720894,720895],3],[[720896,786429],3],[[786430,786431],3],[[786432,851965],3],[[851966,851967],3],[[851968,917501],3],[[917502,917503],3],[917504,3],[917505,3],[[917506,917535],3],[[917536,917631],3],[[917632,917759],3],[[917760,917999],7],[[918e3,983037],3],[[983038,983039],3],[[983040,1048573],3],[[1048574,1048575],3],[[1048576,1114109],3],[[1114110,1114111],3]]});var x$=m((QNe,v$)=>{"use strict";v$.exports.STATUS_MAPPING={mapped:1,valid:2,disallowed:3,deviation:6,ignored:7}});var B$=m((XNe,P$)=>{"use strict";var fC=w$(),Ns=O$(),T$=C$(),{STATUS_MAPPING:ja}=x$();function hC(t){return/[^\x00-\x7F]/u.test(t)}function D$(t){let e=0,r=T$.length-1;for(;e<=r;){let n=Math.floor((e+r)/2),s=T$[n],i=Array.isArray(s[0])?s[0][0]:s[0],o=Array.isArray(s[0])?s[0][1]:s[0];if(i<=t&&o>=t)return s.slice(1);i>t?r=n-1:e=n+1}return null}function y2e(t,{transitionalProcessing:e}){let r="";for(let n of t){let[s,i]=D$(n.codePointAt(0));switch(s){case ja.disallowed:r+=n;break;case ja.ignored:break;case ja.mapped:e&&n==="\u1E9E"?r+="ss":r+=i;break;case ja.deviation:e?r+=i:r+=n;break;case ja.valid:r+=n;break}}return r}function g2e(t,{checkHyphens:e,checkBidi:r,checkJoiners:n,transitionalProcessing:s,useSTD3ASCIIRules:i,isBidi:o}){if(t.length===0)return!0;if(t.normalize("NFC")!==t)return!1;let a=Array.from(t);if(e&&(a[2]==="-"&&a[3]==="-"||t.startsWith("-")||t.endsWith("-"))||!e&&t.startsWith("xn--")||t.includes(".")||Ns.combiningMarks.test(a[0]))return!1;for(let u of a){let c=u.codePointAt(0),[l]=D$(c);if(s){if(l!==ja.valid)return!1}else if(l!==ja.valid&&l!==ja.deviation)return!1;if(i&&c<=127&&!/^(?:[a-z]|[0-9]|-)$/u.test(u))return!1}if(n){let u=0;for(let[c,l]of a.entries())if(l==="\u200C"||l==="\u200D"){if(c>0){if(Ns.combiningClassVirama.test(a[c-1]))continue;if(l==="\u200C"){let p=a.indexOf("\u200C",c+1),d=p<0?a.slice(u):a.slice(u,p);if(Ns.validZWNJ.test(d.join(""))){u=c+1;continue}}}return!1}}if(r&&o){let u;if(Ns.bidiS1LTR.test(a[0]))u=!1;else if(Ns.bidiS1RTL.test(a[0]))u=!0;else return!1;if(u){if(!Ns.bidiS2.test(t)||!Ns.bidiS3.test(t)||Ns.bidiS4EN.test(t)&&Ns.bidiS4AN.test(t))return!1}else if(!Ns.bidiS5.test(t)||!Ns.bidiS6.test(t))return!1}return!0}function _2e(t){let e=t.map(r=>{if(r.startsWith("xn--"))try{return fC.decode(r.substring(4))}catch{return""}return r}).join(".");return Ns.bidiDomain.test(e)}function M$(t,e){let r=y2e(t,e);r=r.normalize("NFC");let n=r.split("."),s=_2e(n),i=!1;for(let[o,a]of n.entries()){let u=a,c=e.transitionalProcessing;if(u.startsWith("xn--")){if(hC(u)){i=!0;continue}try{u=fC.decode(u.substring(4))}catch{if(!e.ignoreInvalidPunycode){i=!0;continue}}n[o]=u,(u===""||!hC(u))&&(i=!0),c=!1}if(i)continue;g2e(u,{...e,transitionalProcessing:c,isBidi:s})||(i=!0)}return{string:n.join("."),error:i}}function E2e(t,{checkHyphens:e=!1,checkBidi:r=!1,checkJoiners:n=!1,useSTD3ASCIIRules:s=!1,verifyDNSLength:i=!1,transitionalProcessing:o=!1,ignoreInvalidPunycode:a=!1}={}){let u=M$(t,{checkHyphens:e,checkBidi:r,checkJoiners:n,useSTD3ASCIIRules:s,transitionalProcessing:o,ignoreInvalidPunycode:a}),c=u.string.split(".");if(c=c.map(l=>{if(hC(l))try{return`xn--${fC.encode(l)}`}catch{u.error=!0}return l}),i){let l=c.join(".").length;(l>253||l===0)&&(u.error=!0);for(let p=0;p<c.length;++p)if(c[p].length>63||c[p].length===0){u.error=!0;break}}return u.error?null:c.join(".")}function b2e(t,{checkHyphens:e=!1,checkBidi:r=!1,checkJoiners:n=!1,useSTD3ASCIIRules:s=!1,transitionalProcessing:i=!1,ignoreInvalidPunycode:o=!1}={}){let a=M$(t,{checkHyphens:e,checkBidi:r,checkJoiners:n,useSTD3ASCIIRules:s,transitionalProcessing:i,ignoreInvalidPunycode:o});return{domain:a.string,error:a.error}}P$.exports={toASCII:E2e,toUnicode:b2e}});var yC=m((ZNe,N$)=>{"use strict";function mC(t){return t>=48&&t<=57}function I$(t){return t>=65&&t<=90||t>=97&&t<=122}function S2e(t){return I$(t)||mC(t)}function w2e(t){return mC(t)||t>=65&&t<=70||t>=97&&t<=102}N$.exports={isASCIIDigit:mC,isASCIIAlpha:I$,isASCIIAlphanumeric:S2e,isASCIIHex:w2e}});var Ug=m((eke,k$)=>{"use strict";var A2e=new TextEncoder,O2e=new TextDecoder("utf-8",{ignoreBOM:!0});function C2e(t){return A2e.encode(t)}function v2e(t){return O2e.decode(t)}k$.exports={utf8Encode:C2e,utf8DecodeWithoutBOM:v2e}});var Vg=m((tke,U$)=>{"use strict";var{isASCIIHex:R$}=yC(),{utf8Encode:F$}=Ug();function Ie(t){return t.codePointAt(0)}function x2e(t){let e=t.toString(16).toUpperCase();return e.length===1&&(e=`0${e}`),`%${e}`}function $$(t){let e=new Uint8Array(t.byteLength),r=0;for(let n=0;n<t.byteLength;++n){let s=t[n];if(s!==37)e[r++]=s;else if(s===37&&(!R$(t[n+1])||!R$(t[n+2])))e[r++]=s;else{let i=parseInt(String.fromCodePoint(t[n+1],t[n+2]),16);e[r++]=i,n+=2}}return e.slice(0,r)}function T2e(t){let e=F$(t);return $$(e)}function gC(t){return t<=31||t>126}var D2e=new Set([Ie(" "),Ie('"'),Ie("<"),Ie(">"),Ie("`")]);function M2e(t){return gC(t)||D2e.has(t)}var P2e=new Set([Ie(" "),Ie('"'),Ie("#"),Ie("<"),Ie(">")]);function _C(t){return gC(t)||P2e.has(t)}function B2e(t){return _C(t)||t===Ie("'")}var I2e=new Set([Ie("?"),Ie("`"),Ie("{"),Ie("}"),Ie("^")]);function q$(t){return _C(t)||I2e.has(t)}var N2e=new Set([Ie("/"),Ie(":"),Ie(";"),Ie("="),Ie("@"),Ie("["),Ie("\\"),Ie("]"),Ie("|")]);function j$(t){return q$(t)||N2e.has(t)}var k2e=new Set([Ie("$"),Ie("%"),Ie("&"),Ie("+"),Ie(",")]);function R2e(t){return j$(t)||k2e.has(t)}var F2e=new Set([Ie("!"),Ie("'"),Ie("("),Ie(")"),Ie("~")]);function $2e(t){return R2e(t)||F2e.has(t)}function L$(t,e){let r=F$(t),n="";for(let s of r)e(s)?n+=x2e(s):n+=String.fromCharCode(s);return n}function q2e(t,e){return L$(String.fromCodePoint(t),e)}function j2e(t,e,r=!1){let n="";for(let s of t)r&&s===" "?n+="+":n+=L$(s,e);return n}U$.exports={isC0ControlPercentEncode:gC,isFragmentPercentEncode:M2e,isQueryPercentEncode:_C,isSpecialQueryPercentEncode:B2e,isPathPercentEncode:q$,isUserinfoPercentEncode:j$,isURLEncodedPercentEncode:$2e,percentDecodeString:T2e,percentDecodeBytes:$$,utf8PercentEncodeString:j2e,utf8PercentEncodeCodePoint:q2e}});var OC=m((rke,gn)=>{"use strict";var L2e=B$(),Br=yC(),{utf8DecodeWithoutBOM:U2e}=Ug(),{percentDecodeString:V2e,utf8PercentEncodeCodePoint:zg,utf8PercentEncodeString:Kg,isC0ControlPercentEncode:K$,isFragmentPercentEncode:W2e,isQueryPercentEncode:z2e,isSpecialQueryPercentEncode:K2e,isPathPercentEncode:H2e,isUserinfoPercentEncode:SC}=Vg();function V(t){return t.codePointAt(0)}var H$={ftp:21,file:null,http:80,https:443,ws:80,wss:443},_e=Symbol("failure");function V$(t){return[...t].length}function W$(t,e){let r=t[e];return isNaN(r)?void 0:String.fromCodePoint(r)}function z$(t){return t==="."||t.toLowerCase()==="%2e"}function G2e(t){return t=t.toLowerCase(),t===".."||t==="%2e."||t===".%2e"||t==="%2e%2e"}function J2e(t,e){return Br.isASCIIAlpha(t)&&(e===V(":")||e===V("|"))}function G$(t){return t.length===2&&Br.isASCIIAlpha(t.codePointAt(0))&&(t[1]===":"||t[1]==="|")}function Y2e(t){return t.length===2&&Br.isASCIIAlpha(t.codePointAt(0))&&t[1]===":"}function J$(t){return t.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|<|>|\?|@|\[|\\|\]|\^|\|/u)!==-1}function Q2e(t){return J$(t)||t.search(/[\u0000-\u001F]|%|\u007F/u)!==-1}function Wg(t){return H$[t]!==void 0}function Pr(t){return Wg(t.scheme)}function EC(t){return!Wg(t.scheme)}function Y$(t){return H$[t]}function Q$(t){if(t==="")return _e;let e=10;if(t.length>=2&&t.charAt(0)==="0"&&t.charAt(1).toLowerCase()==="x"?(t=t.substring(2),e=16):t.length>=2&&t.charAt(0)==="0"&&(t=t.substring(1),e=8),t==="")return 0;let r=/[^0-7]/u;return e===10&&(r=/[^0-9]/u),e===16&&(r=/[^0-9A-Fa-f]/u),r.test(t)?_e:parseInt(t,e)}function X2e(t){let e=t.split(".");if(e[e.length-1]===""&&e.length>1&&e.pop(),e.length>4)return _e;let r=[];for(let i of e){let o=Q$(i);if(o===_e)return _e;r.push(o)}for(let i=0;i<r.length-1;++i)if(r[i]>255)return _e;if(r[r.length-1]>=256**(5-r.length))return _e;let n=r.pop(),s=0;for(let i of r)n+=i*256**(3-s),++s;return n}function Z2e(t){let e="",r=t;for(let n=1;n<=4;++n)e=String(r%256)+e,n!==4&&(e=`.${e}`),r=Math.floor(r/256);return e}function e_e(t){let e=[0,0,0,0,0,0,0,0],r=0,n=null,s=0;if(t=Array.from(t,i=>i.codePointAt(0)),t[s]===V(":")){if(t[s+1]!==V(":"))return _e;s+=2,++r,n=r}for(;s<t.length;){if(r===8)return _e;if(t[s]===V(":")){if(n!==null)return _e;++s,++r,n=r;continue}let i=0,o=0;for(;o<4&&Br.isASCIIHex(t[s]);)i=i*16+parseInt(W$(t,s),16),++s,++o;if(t[s]===V(".")){if(o===0||(s-=o,r>6))return _e;let a=0;for(;t[s]!==void 0;){let u=null;if(a>0)if(t[s]===V(".")&&a<4)++s;else return _e;if(!Br.isASCIIDigit(t[s]))return _e;for(;Br.isASCIIDigit(t[s]);){let c=parseInt(W$(t,s));if(u===null)u=c;else{if(u===0)return _e;u=u*10+c}if(u>255)return _e;++s}e[r]=e[r]*256+u,++a,(a===2||a===4)&&++r}if(a!==4)return _e;break}else if(t[s]===V(":")){if(++s,t[s]===void 0)return _e}else if(t[s]!==void 0)return _e;e[r]=i,++r}if(n!==null){let i=r-n;for(r=7;r!==0&&i>0;){let o=e[n+i-1];e[n+i-1]=e[r],e[r]=o,--r,--i}}else if(n===null&&r!==8)return _e;return e}function t_e(t){let e="",r=s_e(t),n=!1;for(let s=0;s<=7;++s)if(!(n&&t[s]===0)){if(n&&(n=!1),r===s){e+=s===0?"::":":",n=!0;continue}e+=t[s].toString(16),s!==7&&(e+=":")}return e}function bC(t,e=!1){if(t[0]==="[")return t[t.length-1]!=="]"?_e:e_e(t.substring(1,t.length-1));if(e)return n_e(t);let r=U2e(V2e(t)),n=i_e(r);return n===_e?_e:r_e(n)?X2e(n):n}function r_e(t){let e=t.split(".");if(e[e.length-1]===""){if(e.length===1)return!1;e.pop()}let r=e[e.length-1];return!!(Q$(r)!==_e||/^[0-9]+$/u.test(r))}function n_e(t){return J$(t)?_e:Kg(t,K$)}function s_e(t){let e=null,r=1,n=null,s=0;for(let i=0;i<t.length;++i)t[i]!==0?(s>r&&(e=n,r=s),n=null,s=0):(n===null&&(n=i),++s);return s>r?n:e}function wC(t){return typeof t=="number"?Z2e(t):t instanceof Array?`[${t_e(t)}]`:t}function i_e(t,e=!1){let r=L2e.toASCII(t,{checkHyphens:e,checkBidi:!0,checkJoiners:!0,useSTD3ASCIIRules:e,transitionalProcessing:!1,verifyDNSLength:e,ignoreInvalidPunycode:!1});return r===null||!e&&(r===""||Q2e(r))?_e:r}function o_e(t){let e=0,r=t.length;for(;e<r&&!(t.charCodeAt(e)>32);++e);for(;r>e&&!(t.charCodeAt(r-1)>32);--r);return t.substring(e,r)}function a_e(t){return t.replace(/\u0009|\u000A|\u000D/ug,"")}function X$(t){let{path:e}=t;e.length!==0&&(t.scheme==="file"&&e.length===1&&c_e(e[0])||e.pop())}function Z$(t){return t.username!==""||t.password!==""}function u_e(t){return t.host===null||t.host===""||t.scheme==="file"}function eh(t){return typeof t.path=="string"}function c_e(t){return/^[A-Za-z]:$/u.test(t)}function It(t,e,r,n,s){if(this.pointer=0,this.input=t,this.base=e||null,this.encodingOverride=r||"utf-8",this.stateOverride=s,this.url=n,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null};let o=o_e(this.input);o!==this.input&&(this.parseError=!0),this.input=o}let i=a_e(this.input);for(i!==this.input&&(this.parseError=!0),this.input=i,this.state=s||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=Array.from(this.input,o=>o.codePointAt(0));this.pointer<=this.input.length;++this.pointer){let o=this.input[this.pointer],a=isNaN(o)?void 0:String.fromCodePoint(o),u=this[`parse ${this.state}`](o,a);if(u){if(u===_e){this.failure=!0;break}}else break}}It.prototype["parse scheme start"]=function(e,r){if(Br.isASCIIAlpha(e))this.buffer+=r.toLowerCase(),this.state="scheme";else if(!this.stateOverride)this.state="no scheme",--this.pointer;else return this.parseError=!0,_e;return!0};It.prototype["parse scheme"]=function(e,r){if(Br.isASCIIAlphanumeric(e)||e===V("+")||e===V("-")||e===V("."))this.buffer+=r.toLowerCase();else if(e===V(":")){if(this.stateOverride&&(Pr(this.url)&&!Wg(this.buffer)||!Pr(this.url)&&Wg(this.buffer)||(Z$(this.url)||this.url.port!==null)&&this.buffer==="file"||this.url.scheme==="file"&&this.url.host===""))return!1;if(this.url.scheme=this.buffer,this.stateOverride)return this.url.port===Y$(this.url.scheme)&&(this.url.port=null),!1;this.buffer="",this.url.scheme==="file"?((this.input[this.pointer+1]!==V("/")||this.input[this.pointer+2]!==V("/"))&&(this.parseError=!0),this.state="file"):Pr(this.url)&&this.base!==null&&this.base.scheme===this.url.scheme?this.state="special relative or authority":Pr(this.url)?this.state="special authority slashes":this.input[this.pointer+1]===V("/")?(this.state="path or authority",++this.pointer):(this.url.path="",this.state="opaque path")}else if(!this.stateOverride)this.buffer="",this.state="no scheme",this.pointer=-1;else return this.parseError=!0,_e;return!0};It.prototype["parse no scheme"]=function(e){return this.base===null||eh(this.base)&&e!==V("#")?_e:(eh(this.base)&&e===V("#")?(this.url.scheme=this.base.scheme,this.url.path=this.base.path,this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):this.base.scheme==="file"?(this.state="file",--this.pointer):(this.state="relative",--this.pointer),!0)};It.prototype["parse special relative or authority"]=function(e){return e===V("/")&&this.input[this.pointer+1]===V("/")?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="relative",--this.pointer),!0};It.prototype["parse path or authority"]=function(e){return e===V("/")?this.state="authority":(this.state="path",--this.pointer),!0};It.prototype["parse relative"]=function(e){return this.url.scheme=this.base.scheme,e===V("/")?this.state="relative slash":Pr(this.url)&&e===V("\\")?(this.parseError=!0,this.state="relative slash"):(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,e===V("?")?(this.url.query="",this.state="query"):e===V("#")?(this.url.fragment="",this.state="fragment"):isNaN(e)||(this.url.query=null,this.url.path.pop(),this.state="path",--this.pointer)),!0};It.prototype["parse relative slash"]=function(e){return Pr(this.url)&&(e===V("/")||e===V("\\"))?(e===V("\\")&&(this.parseError=!0),this.state="special authority ignore slashes"):e===V("/")?this.state="authority":(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer),!0};It.prototype["parse special authority slashes"]=function(e){return e===V("/")&&this.input[this.pointer+1]===V("/")?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="special authority ignore slashes",--this.pointer),!0};It.prototype["parse special authority ignore slashes"]=function(e){return e!==V("/")&&e!==V("\\")?(this.state="authority",--this.pointer):this.parseError=!0,!0};It.prototype["parse authority"]=function(e,r){if(e===V("@")){this.parseError=!0,this.atFlag&&(this.buffer=`%40${this.buffer}`),this.atFlag=!0;let n=V$(this.buffer);for(let s=0;s<n;++s){let i=this.buffer.codePointAt(s);if(i===V(":")&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}let o=zg(i,SC);this.passwordTokenSeenFlag?this.url.password+=o:this.url.username+=o}this.buffer=""}else if(isNaN(e)||e===V("/")||e===V("?")||e===V("#")||Pr(this.url)&&e===V("\\")){if(this.atFlag&&this.buffer==="")return this.parseError=!0,_e;this.pointer-=V$(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=r;return!0};It.prototype["parse hostname"]=It.prototype["parse host"]=function(e,r){if(this.stateOverride&&this.url.scheme==="file")--this.pointer,this.state="file host";else if(e===V(":")&&!this.arrFlag){if(this.buffer==="")return this.parseError=!0,_e;if(this.stateOverride==="hostname")return!1;let n=bC(this.buffer,EC(this.url));if(n===_e)return _e;this.url.host=n,this.buffer="",this.state="port"}else if(isNaN(e)||e===V("/")||e===V("?")||e===V("#")||Pr(this.url)&&e===V("\\")){if(--this.pointer,Pr(this.url)&&this.buffer==="")return this.parseError=!0,_e;if(this.stateOverride&&this.buffer===""&&(Z$(this.url)||this.url.port!==null))return this.parseError=!0,!1;let n=bC(this.buffer,EC(this.url));if(n===_e)return _e;if(this.url.host=n,this.buffer="",this.state="path start",this.stateOverride)return!1}else e===V("[")?this.arrFlag=!0:e===V("]")&&(this.arrFlag=!1),this.buffer+=r;return!0};It.prototype["parse port"]=function(e,r){if(Br.isASCIIDigit(e))this.buffer+=r;else if(isNaN(e)||e===V("/")||e===V("?")||e===V("#")||Pr(this.url)&&e===V("\\")||this.stateOverride){if(this.buffer!==""){let n=parseInt(this.buffer);if(n>2**16-1)return this.parseError=!0,_e;this.url.port=n===Y$(this.url.scheme)?null:n,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}else return this.parseError=!0,_e;return!0};var l_e=new Set([V("/"),V("\\"),V("?"),V("#")]);function eq(t,e){let r=t.length-e;return r>=2&&J2e(t[e],t[e+1])&&(r===2||l_e.has(t[e+2]))}It.prototype["parse file"]=function(e){return this.url.scheme="file",this.url.host="",e===V("/")||e===V("\\")?(e===V("\\")&&(this.parseError=!0),this.state="file slash"):this.base!==null&&this.base.scheme==="file"?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,e===V("?")?(this.url.query="",this.state="query"):e===V("#")?(this.url.fragment="",this.state="fragment"):isNaN(e)||(this.url.query=null,eq(this.input,this.pointer)?(this.parseError=!0,this.url.path=[]):X$(this.url),this.state="path",--this.pointer)):(this.state="path",--this.pointer),!0};It.prototype["parse file slash"]=function(e){return e===V("/")||e===V("\\")?(e===V("\\")&&(this.parseError=!0),this.state="file host"):(this.base!==null&&this.base.scheme==="file"&&(!eq(this.input,this.pointer)&&Y2e(this.base.path[0])&&this.url.path.push(this.base.path[0]),this.url.host=this.base.host),this.state="path",--this.pointer),!0};It.prototype["parse file host"]=function(e,r){if(isNaN(e)||e===V("/")||e===V("\\")||e===V("?")||e===V("#"))if(--this.pointer,!this.stateOverride&&G$(this.buffer))this.parseError=!0,this.state="path";else if(this.buffer===""){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let n=bC(this.buffer,EC(this.url));if(n===_e)return _e;if(n==="localhost"&&(n=""),this.url.host=n,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=r;return!0};It.prototype["parse path start"]=function(e){return Pr(this.url)?(e===V("\\")&&(this.parseError=!0),this.state="path",e!==V("/")&&e!==V("\\")&&--this.pointer):!this.stateOverride&&e===V("?")?(this.url.query="",this.state="query"):!this.stateOverride&&e===V("#")?(this.url.fragment="",this.state="fragment"):e!==void 0?(this.state="path",e!==V("/")&&--this.pointer):this.stateOverride&&this.url.host===null&&this.url.path.push(""),!0};It.prototype["parse path"]=function(e){return isNaN(e)||e===V("/")||Pr(this.url)&&e===V("\\")||!this.stateOverride&&(e===V("?")||e===V("#"))?(Pr(this.url)&&e===V("\\")&&(this.parseError=!0),G2e(this.buffer)?(X$(this.url),e!==V("/")&&!(Pr(this.url)&&e===V("\\"))&&this.url.path.push("")):z$(this.buffer)&&e!==V("/")&&!(Pr(this.url)&&e===V("\\"))?this.url.path.push(""):z$(this.buffer)||(this.url.scheme==="file"&&this.url.path.length===0&&G$(this.buffer)&&(this.buffer=`${this.buffer[0]}:`),this.url.path.push(this.buffer)),this.buffer="",e===V("?")&&(this.url.query="",this.state="query"),e===V("#")&&(this.url.fragment="",this.state="fragment")):(e===V("%")&&(!Br.isASCIIHex(this.input[this.pointer+1])||!Br.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=zg(e,H2e)),!0};It.prototype["parse opaque path"]=function(e){if(e===V("?"))this.url.query="",this.state="query";else if(e===V("#"))this.url.fragment="",this.state="fragment";else if(e===V(" ")){let r=this.input[this.pointer+1];r===V("?")||r===V("#")?this.url.path+="%20":this.url.path+=" "}else!isNaN(e)&&e!==V("%")&&(this.parseError=!0),e===V("%")&&(!Br.isASCIIHex(this.input[this.pointer+1])||!Br.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),isNaN(e)||(this.url.path+=zg(e,K$));return!0};It.prototype["parse query"]=function(e,r){if((!Pr(this.url)||this.url.scheme==="ws"||this.url.scheme==="wss")&&(this.encodingOverride="utf-8"),!this.stateOverride&&e===V("#")||isNaN(e)){let n=Pr(this.url)?K2e:z2e;this.url.query+=Kg(this.buffer,n),this.buffer="",e===V("#")&&(this.url.fragment="",this.state="fragment")}else isNaN(e)||(e===V("%")&&(!Br.isASCIIHex(this.input[this.pointer+1])||!Br.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=r);return!0};It.prototype["parse fragment"]=function(e){return isNaN(e)||(e===V("%")&&(!Br.isASCIIHex(this.input[this.pointer+1])||!Br.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.url.fragment+=zg(e,W2e)),!0};function p_e(t,e){let r=`${t.scheme}:`;return t.host!==null&&(r+="//",(t.username!==""||t.password!=="")&&(r+=t.username,t.password!==""&&(r+=`:${t.password}`),r+="@"),r+=wC(t.host),t.port!==null&&(r+=`:${t.port}`)),t.host===null&&!eh(t)&&t.path.length>1&&t.path[0]===""&&(r+="/."),r+=AC(t),t.query!==null&&(r+=`?${t.query}`),!e&&t.fragment!==null&&(r+=`#${t.fragment}`),r}function d_e(t){let e=`${t.scheme}://`;return e+=wC(t.host),t.port!==null&&(e+=`:${t.port}`),e}function AC(t){if(eh(t))return t.path;let e="";for(let r of t.path)e+=`/${r}`;return e}gn.exports.serializeURL=p_e;gn.exports.serializePath=AC;gn.exports.serializeURLOrigin=function(t){switch(t.scheme){case"blob":{let e=gn.exports.parseURL(AC(t));return e===null||e.scheme!=="http"&&e.scheme!=="https"?"null":gn.exports.serializeURLOrigin(e)}case"ftp":case"http":case"https":case"ws":case"wss":return d_e({scheme:t.scheme,host:t.host,port:t.port});case"file":return"null";default:return"null"}};gn.exports.basicURLParse=function(t,e){e===void 0&&(e={});let r=new It(t,e.baseURL,e.encodingOverride,e.url,e.stateOverride);return r.failure?null:r.url};gn.exports.setTheUsername=function(t,e){t.username=Kg(e,SC)};gn.exports.setThePassword=function(t,e){t.password=Kg(e,SC)};gn.exports.serializeHost=wC;gn.exports.cannotHaveAUsernamePasswordPort=u_e;gn.exports.hasAnOpaquePath=eh;gn.exports.serializeInteger=function(t){return String(t)};gn.exports.parseURL=function(t,e){return e===void 0&&(e={}),gn.exports.basicURLParse(t,{baseURL:e.baseURL,encodingOverride:e.encodingOverride})}});var CC=m((nke,aq)=>{"use strict";var{utf8Encode:h_e,utf8DecodeWithoutBOM:tq}=Ug(),{percentDecodeBytes:rq,utf8PercentEncodeString:nq,isURLEncodedPercentEncode:sq}=Vg();function iq(t){return t.codePointAt(0)}function f_e(t){let e=g_e(t,iq("&")),r=[];for(let n of e){if(n.length===0)continue;let s,i,o=n.indexOf(iq("="));o>=0?(s=n.slice(0,o),i=n.slice(o+1)):(s=n,i=new Uint8Array(0)),s=oq(s,43,32),i=oq(i,43,32);let a=tq(rq(s)),u=tq(rq(i));r.push([a,u])}return r}function m_e(t){return f_e(h_e(t))}function y_e(t){let e="";for(let[r,n]of t.entries()){let s=nq(n[0],sq,!0),i=nq(n[1],sq,!0);r!==0&&(e+="&"),e+=`${s}=${i}`}return e}function g_e(t,e){let r=[],n=0,s=t.indexOf(e);for(;s>=0;)r.push(t.slice(n,s)),n=s+1,s=t.indexOf(e,n);return n!==t.length&&r.push(t.slice(n)),r}function oq(t,e,r){let n=t.indexOf(e);for(;n>=0;)t[n]=r,n=t.indexOf(e,n+1);return t}aq.exports={parseUrlencodedString:m_e,serializeUrlencoded:y_e}});var lq=m(cq=>{"use strict";var uq=qg(),Hg=Lg();cq.convert=(t,e,{context:r="The provided value"}={})=>{if(typeof e!="function")throw new t.TypeError(r+" is not a function");function n(...s){let i=Hg.tryWrapperForImpl(this),o;for(let a=0;a<s.length;a++)s[a]=Hg.tryWrapperForImpl(s[a]);return o=Reflect.apply(e,i,s),o=uq.any(o,{context:r,globals:t}),o}return n.construct=(...s)=>{for(let o=0;o<s.length;o++)s[o]=Hg.tryWrapperForImpl(s[o]);let i=Reflect.construct(e,s);return i=uq.any(i,{context:r,globals:t}),i},n[Hg.wrapperSymbol]=e,n.objectReference=e,n}});var dq=m(pq=>{"use strict";var vC=CC();pq.implementation=class{constructor(e,r,{doNotStripQMark:n=!1}){let s=r[0];if(this._list=[],this._url=null,!n&&typeof s=="string"&&s[0]==="?"&&(s=s.slice(1)),Array.isArray(s))for(let i of s){if(i.length!==2)throw new TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element does not contain exactly two elements.");this._list.push([i[0],i[1]])}else if(typeof s=="object"&&Object.getPrototypeOf(s)===null)for(let i of Object.keys(s)){let o=s[i];this._list.push([i,o])}else this._list=vC.parseUrlencodedString(s)}_updateSteps(){if(this._url!==null){let e=vC.serializeUrlencoded(this._list);e===""&&(e=null),this._url._url.query=e}}get size(){return this._list.length}append(e,r){this._list.push([e,r]),this._updateSteps()}delete(e,r){let n=0;for(;n<this._list.length;)this._list[n][0]===e&&(r===void 0||this._list[n][1]===r)?this._list.splice(n,1):n++;this._updateSteps()}get(e){for(let r of this._list)if(r[0]===e)return r[1];return null}getAll(e){let r=[];for(let n of this._list)n[0]===e&&r.push(n[1]);return r}has(e,r){for(let n of this._list)if(n[0]===e&&(r===void 0||n[1]===r))return!0;return!1}set(e,r){let n=!1,s=0;for(;s<this._list.length;)this._list[s][0]===e?n?this._list.splice(s,1):(n=!0,this._list[s][1]=r,s++):s++;n||this._list.push([e,r]),this._updateSteps()}sort(){this._list.sort((e,r)=>e[0]<r[0]?-1:e[0]>r[0]?1:0),this._updateSteps()}[Symbol.iterator](){return this._list[Symbol.iterator]()}toString(){return vC.serializeUrlencoded(this._list)}}});var xC=m(Ue=>{"use strict";var Dn=qg(),st=Lg(),__e=lq(),hq=st.newObjectInRealm,Wt=st.implSymbol,mq=st.ctorRegistrySymbol,fq="URLSearchParams";Ue.is=t=>st.isObject(t)&&st.hasOwn(t,Wt)&&t[Wt]instanceof La.implementation;Ue.isImpl=t=>st.isObject(t)&&t instanceof La.implementation;Ue.convert=(t,e,{context:r="The provided value"}={})=>{if(Ue.is(e))return st.implForWrapper(e);throw new t.TypeError(`${r} is not of type 'URLSearchParams'.`)};Ue.createDefaultIterator=(t,e,r)=>{let s=t[mq]["URLSearchParams Iterator"],i=Object.create(s);return Object.defineProperty(i,st.iterInternalSymbol,{value:{target:e,kind:r,index:0},configurable:!0}),i};function yq(t,e){let r;return e!==void 0&&(r=e.prototype),st.isObject(r)||(r=t[mq].URLSearchParams.prototype),Object.create(r)}Ue.create=(t,e,r)=>{let n=yq(t);return Ue.setup(n,t,e,r)};Ue.createImpl=(t,e,r)=>{let n=Ue.create(t,e,r);return st.implForWrapper(n)};Ue._internalSetup=(t,e)=>{};Ue.setup=(t,e,r=[],n={})=>(n.wrapper=t,Ue._internalSetup(t,e),Object.defineProperty(t,Wt,{value:new La.implementation(e,r,n),configurable:!0}),t[Wt][st.wrapperSymbol]=t,La.init&&La.init(t[Wt]),t);Ue.new=(t,e)=>{let r=yq(t,e);return Ue._internalSetup(r,t),Object.defineProperty(r,Wt,{value:Object.create(La.implementation.prototype),configurable:!0}),r[Wt][st.wrapperSymbol]=r,La.init&&La.init(r[Wt]),r[Wt]};var E_e=new Set(["Window","Worker"]);Ue.install=(t,e)=>{if(!e.some(s=>E_e.has(s)))return;let r=st.initCtorRegistry(t);class n{constructor(){let i=[];{let o=arguments[0];if(o!==void 0)if(st.isObject(o))if(o[Symbol.iterator]!==void 0)if(st.isObject(o)){let a=[],u=o;for(let c of u){if(st.isObject(c)){let l=[],p=c;for(let d of p)d=Dn.USVString(d,{context:"Failed to construct 'URLSearchParams': parameter 1 sequence's element's element",globals:t}),l.push(d);c=l}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element is not an iterable object.");a.push(c)}o=a}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence is not an iterable object.");else if(st.isObject(o)){let a=Object.create(null);for(let u of Reflect.ownKeys(o)){let c=Object.getOwnPropertyDescriptor(o,u);if(c&&c.enumerable){let l=u;l=Dn.USVString(l,{context:"Failed to construct 'URLSearchParams': parameter 1 record's key",globals:t});let p=o[u];p=Dn.USVString(p,{context:"Failed to construct 'URLSearchParams': parameter 1 record's value",globals:t}),a[l]=p}}o=a}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 record is not an object.");else o=Dn.USVString(o,{context:"Failed to construct 'URLSearchParams': parameter 1",globals:t});else o="";i.push(o)}return Ue.setup(Object.create(new.target.prototype),t,i)}append(i,o){let a=this!==null&&this!==void 0?this:t;if(!Ue.is(a))throw new t.TypeError("'append' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new t.TypeError(`Failed to execute 'append' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let u=[];{let c=arguments[0];c=Dn.USVString(c,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 1",globals:t}),u.push(c)}{let c=arguments[1];c=Dn.USVString(c,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 2",globals:t}),u.push(c)}return st.tryWrapperForImpl(a[Wt].append(...u))}delete(i){let o=this!==null&&this!==void 0?this:t;if(!Ue.is(o))throw new t.TypeError("'delete' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'delete' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let a=[];{let u=arguments[0];u=Dn.USVString(u,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 1",globals:t}),a.push(u)}{let u=arguments[1];u!==void 0&&(u=Dn.USVString(u,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 2",globals:t})),a.push(u)}return st.tryWrapperForImpl(o[Wt].delete(...a))}get(i){let o=this!==null&&this!==void 0?this:t;if(!Ue.is(o))throw new t.TypeError("'get' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'get' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let a=[];{let u=arguments[0];u=Dn.USVString(u,{context:"Failed to execute 'get' on 'URLSearchParams': parameter 1",globals:t}),a.push(u)}return o[Wt].get(...a)}getAll(i){let o=this!==null&&this!==void 0?this:t;if(!Ue.is(o))throw new t.TypeError("'getAll' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'getAll' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let a=[];{let u=arguments[0];u=Dn.USVString(u,{context:"Failed to execute 'getAll' on 'URLSearchParams': parameter 1",globals:t}),a.push(u)}return st.tryWrapperForImpl(o[Wt].getAll(...a))}has(i){let o=this!==null&&this!==void 0?this:t;if(!Ue.is(o))throw new t.TypeError("'has' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'has' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let a=[];{let u=arguments[0];u=Dn.USVString(u,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 1",globals:t}),a.push(u)}{let u=arguments[1];u!==void 0&&(u=Dn.USVString(u,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 2",globals:t})),a.push(u)}return o[Wt].has(...a)}set(i,o){let a=this!==null&&this!==void 0?this:t;if(!Ue.is(a))throw new t.TypeError("'set' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new t.TypeError(`Failed to execute 'set' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let u=[];{let c=arguments[0];c=Dn.USVString(c,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 1",globals:t}),u.push(c)}{let c=arguments[1];c=Dn.USVString(c,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 2",globals:t}),u.push(c)}return st.tryWrapperForImpl(a[Wt].set(...u))}sort(){let i=this!==null&&this!==void 0?this:t;if(!Ue.is(i))throw new t.TypeError("'sort' called on an object that is not a valid instance of URLSearchParams.");return st.tryWrapperForImpl(i[Wt].sort())}toString(){let i=this!==null&&this!==void 0?this:t;if(!Ue.is(i))throw new t.TypeError("'toString' called on an object that is not a valid instance of URLSearchParams.");return i[Wt].toString()}keys(){if(!Ue.is(this))throw new t.TypeError("'keys' called on an object that is not a valid instance of URLSearchParams.");return Ue.createDefaultIterator(t,this,"key")}values(){if(!Ue.is(this))throw new t.TypeError("'values' called on an object that is not a valid instance of URLSearchParams.");return Ue.createDefaultIterator(t,this,"value")}entries(){if(!Ue.is(this))throw new t.TypeError("'entries' called on an object that is not a valid instance of URLSearchParams.");return Ue.createDefaultIterator(t,this,"key+value")}forEach(i){if(!Ue.is(this))throw new t.TypeError("'forEach' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError("Failed to execute 'forEach' on 'iterable': 1 argument required, but only 0 present.");i=__e.convert(t,i,{context:"Failed to execute 'forEach' on 'iterable': The callback provided as parameter 1"});let o=arguments[1],a=Array.from(this[Wt]),u=0;for(;u<a.length;){let[c,l]=a[u].map(st.tryWrapperForImpl);i.call(o,l,c,this),a=Array.from(this[Wt]),u++}}get size(){let i=this!==null&&this!==void 0?this:t;if(!Ue.is(i))throw new t.TypeError("'get size' called on an object that is not a valid instance of URLSearchParams.");return i[Wt].size}}Object.defineProperties(n.prototype,{append:{enumerable:!0},delete:{enumerable:!0},get:{enumerable:!0},getAll:{enumerable:!0},has:{enumerable:!0},set:{enumerable:!0},sort:{enumerable:!0},toString:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0},forEach:{enumerable:!0},size:{enumerable:!0},[Symbol.toStringTag]:{value:"URLSearchParams",configurable:!0},[Symbol.iterator]:{value:n.prototype.entries,configurable:!0,writable:!0}}),r[fq]=n,r["URLSearchParams Iterator"]=Object.create(r["%IteratorPrototype%"],{[Symbol.toStringTag]:{configurable:!0,value:"URLSearchParams Iterator"}}),st.define(r["URLSearchParams Iterator"],{next(){let s=this&&this[st.iterInternalSymbol];if(!s)throw new t.TypeError("next() called on a value that is not a URLSearchParams iterator object");let{target:i,kind:o,index:a}=s,u=Array.from(i[Wt]),c=u.length;if(a>=c)return hq(t,{value:void 0,done:!0});let l=u[a];return s.index=a+1,hq(t,st.iteratorResult(l.map(st.tryWrapperForImpl),o))}}),Object.defineProperty(t,fq,{configurable:!0,writable:!0,value:n})};var La=dq()});var bq=m(Eq=>{"use strict";var tt=OC(),gq=CC(),b_e=xC();Eq.implementation=class _q{constructor(e,[r,n]){let s=null;if(n!==void 0&&(s=tt.basicURLParse(n),s===null))throw new TypeError(`Invalid base URL: ${n}`);let i=tt.basicURLParse(r,{baseURL:s});if(i===null)throw new TypeError(`Invalid URL: ${r}`);let o=i.query!==null?i.query:"";this._url=i,this._query=b_e.createImpl(e,[o],{doNotStripQMark:!0}),this._query._url=this}static parse(e,r,n){try{return new _q(e,[r,n])}catch{return null}}static canParse(e,r){let n=null;return!(r!==void 0&&(n=tt.basicURLParse(r),n===null)||tt.basicURLParse(e,{baseURL:n})===null)}get href(){return tt.serializeURL(this._url)}set href(e){let r=tt.basicURLParse(e);if(r===null)throw new TypeError(`Invalid URL: ${e}`);this._url=r,this._query._list.splice(0);let{query:n}=r;n!==null&&(this._query._list=gq.parseUrlencodedString(n))}get origin(){return tt.serializeURLOrigin(this._url)}get protocol(){return`${this._url.scheme}:`}set protocol(e){tt.basicURLParse(`${e}:`,{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(e){tt.cannotHaveAUsernamePasswordPort(this._url)||tt.setTheUsername(this._url,e)}get password(){return this._url.password}set password(e){tt.cannotHaveAUsernamePasswordPort(this._url)||tt.setThePassword(this._url,e)}get host(){let e=this._url;return e.host===null?"":e.port===null?tt.serializeHost(e.host):`${tt.serializeHost(e.host)}:${tt.serializeInteger(e.port)}`}set host(e){tt.hasAnOpaquePath(this._url)||tt.basicURLParse(e,{url:this._url,stateOverride:"host"})}get hostname(){return this._url.host===null?"":tt.serializeHost(this._url.host)}set hostname(e){tt.hasAnOpaquePath(this._url)||tt.basicURLParse(e,{url:this._url,stateOverride:"hostname"})}get port(){return this._url.port===null?"":tt.serializeInteger(this._url.port)}set port(e){tt.cannotHaveAUsernamePasswordPort(this._url)||(e===""?this._url.port=null:tt.basicURLParse(e,{url:this._url,stateOverride:"port"}))}get pathname(){return tt.serializePath(this._url)}set pathname(e){tt.hasAnOpaquePath(this._url)||(this._url.path=[],tt.basicURLParse(e,{url:this._url,stateOverride:"path start"}))}get search(){return this._url.query===null||this._url.query===""?"":`?${this._url.query}`}set search(e){let r=this._url;if(e===""){r.query=null,this._query._list=[];return}let n=e[0]==="?"?e.substring(1):e;r.query="",tt.basicURLParse(n,{url:r,stateOverride:"query"}),this._query._list=gq.parseUrlencodedString(n)}get searchParams(){return this._query}get hash(){return this._url.fragment===null||this._url.fragment===""?"":`#${this._url.fragment}`}set hash(e){if(e===""){this._url.fragment=null;return}let r=e[0]==="#"?e.substring(1):e;this._url.fragment="",tt.basicURLParse(r,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}}});var Aq=m(Ae=>{"use strict";var Zr=qg(),Mn=Lg(),Ve=Mn.implSymbol,S_e=Mn.ctorRegistrySymbol,Sq="URL";Ae.is=t=>Mn.isObject(t)&&Mn.hasOwn(t,Ve)&&t[Ve]instanceof Hi.implementation;Ae.isImpl=t=>Mn.isObject(t)&&t instanceof Hi.implementation;Ae.convert=(t,e,{context:r="The provided value"}={})=>{if(Ae.is(e))return Mn.implForWrapper(e);throw new t.TypeError(`${r} is not of type 'URL'.`)};function wq(t,e){let r;return e!==void 0&&(r=e.prototype),Mn.isObject(r)||(r=t[S_e].URL.prototype),Object.create(r)}Ae.create=(t,e,r)=>{let n=wq(t);return Ae.setup(n,t,e,r)};Ae.createImpl=(t,e,r)=>{let n=Ae.create(t,e,r);return Mn.implForWrapper(n)};Ae._internalSetup=(t,e)=>{};Ae.setup=(t,e,r=[],n={})=>(n.wrapper=t,Ae._internalSetup(t,e),Object.defineProperty(t,Ve,{value:new Hi.implementation(e,r,n),configurable:!0}),t[Ve][Mn.wrapperSymbol]=t,Hi.init&&Hi.init(t[Ve]),t);Ae.new=(t,e)=>{let r=wq(t,e);return Ae._internalSetup(r,t),Object.defineProperty(r,Ve,{value:Object.create(Hi.implementation.prototype),configurable:!0}),r[Ve][Mn.wrapperSymbol]=r,Hi.init&&Hi.init(r[Ve]),r[Ve]};var w_e=new Set(["Window","Worker"]);Ae.install=(t,e)=>{if(!e.some(s=>w_e.has(s)))return;let r=Mn.initCtorRegistry(t);class n{constructor(i){if(arguments.length<1)throw new t.TypeError(`Failed to construct 'URL': 1 argument required, but only ${arguments.length} present.`);let o=[];{let a=arguments[0];a=Zr.USVString(a,{context:"Failed to construct 'URL': parameter 1",globals:t}),o.push(a)}{let a=arguments[1];a!==void 0&&(a=Zr.USVString(a,{context:"Failed to construct 'URL': parameter 2",globals:t})),o.push(a)}return Ae.setup(Object.create(new.target.prototype),t,o)}toJSON(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'toJSON' called on an object that is not a valid instance of URL.");return i[Ve].toJSON()}get href(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get href' called on an object that is not a valid instance of URL.");return i[Ve].href}set href(i){let o=this!==null&&this!==void 0?this:t;if(!Ae.is(o))throw new t.TypeError("'set href' called on an object that is not a valid instance of URL.");i=Zr.USVString(i,{context:"Failed to set the 'href' property on 'URL': The provided value",globals:t}),o[Ve].href=i}toString(){let i=this;if(!Ae.is(i))throw new t.TypeError("'toString' called on an object that is not a valid instance of URL.");return i[Ve].href}get origin(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get origin' called on an object that is not a valid instance of URL.");return i[Ve].origin}get protocol(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get protocol' called on an object that is not a valid instance of URL.");return i[Ve].protocol}set protocol(i){let o=this!==null&&this!==void 0?this:t;if(!Ae.is(o))throw new t.TypeError("'set protocol' called on an object that is not a valid instance of URL.");i=Zr.USVString(i,{context:"Failed to set the 'protocol' property on 'URL': The provided value",globals:t}),o[Ve].protocol=i}get username(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get username' called on an object that is not a valid instance of URL.");return i[Ve].username}set username(i){let o=this!==null&&this!==void 0?this:t;if(!Ae.is(o))throw new t.TypeError("'set username' called on an object that is not a valid instance of URL.");i=Zr.USVString(i,{context:"Failed to set the 'username' property on 'URL': The provided value",globals:t}),o[Ve].username=i}get password(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get password' called on an object that is not a valid instance of URL.");return i[Ve].password}set password(i){let o=this!==null&&this!==void 0?this:t;if(!Ae.is(o))throw new t.TypeError("'set password' called on an object that is not a valid instance of URL.");i=Zr.USVString(i,{context:"Failed to set the 'password' property on 'URL': The provided value",globals:t}),o[Ve].password=i}get host(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get host' called on an object that is not a valid instance of URL.");return i[Ve].host}set host(i){let o=this!==null&&this!==void 0?this:t;if(!Ae.is(o))throw new t.TypeError("'set host' called on an object that is not a valid instance of URL.");i=Zr.USVString(i,{context:"Failed to set the 'host' property on 'URL': The provided value",globals:t}),o[Ve].host=i}get hostname(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get hostname' called on an object that is not a valid instance of URL.");return i[Ve].hostname}set hostname(i){let o=this!==null&&this!==void 0?this:t;if(!Ae.is(o))throw new t.TypeError("'set hostname' called on an object that is not a valid instance of URL.");i=Zr.USVString(i,{context:"Failed to set the 'hostname' property on 'URL': The provided value",globals:t}),o[Ve].hostname=i}get port(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get port' called on an object that is not a valid instance of URL.");return i[Ve].port}set port(i){let o=this!==null&&this!==void 0?this:t;if(!Ae.is(o))throw new t.TypeError("'set port' called on an object that is not a valid instance of URL.");i=Zr.USVString(i,{context:"Failed to set the 'port' property on 'URL': The provided value",globals:t}),o[Ve].port=i}get pathname(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get pathname' called on an object that is not a valid instance of URL.");return i[Ve].pathname}set pathname(i){let o=this!==null&&this!==void 0?this:t;if(!Ae.is(o))throw new t.TypeError("'set pathname' called on an object that is not a valid instance of URL.");i=Zr.USVString(i,{context:"Failed to set the 'pathname' property on 'URL': The provided value",globals:t}),o[Ve].pathname=i}get search(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get search' called on an object that is not a valid instance of URL.");return i[Ve].search}set search(i){let o=this!==null&&this!==void 0?this:t;if(!Ae.is(o))throw new t.TypeError("'set search' called on an object that is not a valid instance of URL.");i=Zr.USVString(i,{context:"Failed to set the 'search' property on 'URL': The provided value",globals:t}),o[Ve].search=i}get searchParams(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get searchParams' called on an object that is not a valid instance of URL.");return Mn.getSameObject(this,"searchParams",()=>Mn.tryWrapperForImpl(i[Ve].searchParams))}get hash(){let i=this!==null&&this!==void 0?this:t;if(!Ae.is(i))throw new t.TypeError("'get hash' called on an object that is not a valid instance of URL.");return i[Ve].hash}set hash(i){let o=this!==null&&this!==void 0?this:t;if(!Ae.is(o))throw new t.TypeError("'set hash' called on an object that is not a valid instance of URL.");i=Zr.USVString(i,{context:"Failed to set the 'hash' property on 'URL': The provided value",globals:t}),o[Ve].hash=i}static parse(i){if(arguments.length<1)throw new t.TypeError(`Failed to execute 'parse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let o=[];{let a=arguments[0];a=Zr.USVString(a,{context:"Failed to execute 'parse' on 'URL': parameter 1",globals:t}),o.push(a)}{let a=arguments[1];a!==void 0&&(a=Zr.USVString(a,{context:"Failed to execute 'parse' on 'URL': parameter 2",globals:t})),o.push(a)}return Mn.tryWrapperForImpl(Hi.implementation.parse(t,...o))}static canParse(i){if(arguments.length<1)throw new t.TypeError(`Failed to execute 'canParse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let o=[];{let a=arguments[0];a=Zr.USVString(a,{context:"Failed to execute 'canParse' on 'URL': parameter 1",globals:t}),o.push(a)}{let a=arguments[1];a!==void 0&&(a=Zr.USVString(a,{context:"Failed to execute 'canParse' on 'URL': parameter 2",globals:t})),o.push(a)}return Hi.implementation.canParse(...o)}}Object.defineProperties(n.prototype,{toJSON:{enumerable:!0},href:{enumerable:!0},toString:{enumerable:!0},origin:{enumerable:!0},protocol:{enumerable:!0},username:{enumerable:!0},password:{enumerable:!0},host:{enumerable:!0},hostname:{enumerable:!0},port:{enumerable:!0},pathname:{enumerable:!0},search:{enumerable:!0},searchParams:{enumerable:!0},hash:{enumerable:!0},[Symbol.toStringTag]:{value:"URL",configurable:!0}}),Object.defineProperties(n,{parse:{enumerable:!0},canParse:{enumerable:!0}}),r[Sq]=n,Object.defineProperty(t,Sq,{configurable:!0,writable:!0,value:n}),e.includes("Window")&&Object.defineProperty(t,"webkitURL",{configurable:!0,writable:!0,value:n})};var Hi=bq()});var Oq=m(TC=>{"use strict";var A_e=Aq(),O_e=xC();TC.URL=A_e;TC.URLSearchParams=O_e});var vq=m(en=>{"use strict";var{URL:C_e,URLSearchParams:v_e}=Oq(),hi=OC(),Cq=Vg(),Gg={Array,Object,Promise,String,TypeError};C_e.install(Gg,["Window"]);v_e.install(Gg,["Window"]);en.URL=Gg.URL;en.URLSearchParams=Gg.URLSearchParams;en.parseURL=hi.parseURL;en.basicURLParse=hi.basicURLParse;en.serializeURL=hi.serializeURL;en.serializePath=hi.serializePath;en.serializeHost=hi.serializeHost;en.serializeInteger=hi.serializeInteger;en.serializeURLOrigin=hi.serializeURLOrigin;en.setTheUsername=hi.setTheUsername;en.setThePassword=hi.setThePassword;en.cannotHaveAUsernamePasswordPort=hi.cannotHaveAUsernamePasswordPort;en.hasAnOpaquePath=hi.hasAnOpaquePath;en.percentDecodeString=Cq.percentDecodeString;en.percentDecodeBytes=Cq.percentDecodeBytes});var Tq=m(Gi=>{"use strict";var x_e=Gi&&Gi.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),T_e=Gi&&Gi.__setModuleDefault||(Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e}),D_e=Gi&&Gi.__importStar||(function(){var t=function(e){return t=Object.getOwnPropertyNames||function(r){var n=[];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[n.length]=s);return n},t(e)};return function(e){if(e&&e.__esModule)return e;var r={};if(e!=null)for(var n=t(e),s=0;s<n.length;s++)n[s]!=="default"&&x_e(r,e,n[s]);return T_e(r,e),r}})();Object.defineProperty(Gi,"__esModule",{value:!0});Gi.redactValidConnectionString=M_e;Gi.redactConnectionString=P_e;var xq=D_e(DC());function M_e(t,e){let r=t.clone(),n=e?.replacementString??"_credentials_",s=e?.redactUsernames??!0;if((r.username||r.password)&&s?(r.username=n,r.password=""):r.password&&(r.password=n),r.searchParams.has("authMechanismProperties")){let i=new xq.CommaAndColonSeparatedRecord(r.searchParams.get("authMechanismProperties"));i.get("AWS_SESSION_TOKEN")&&(i.set("AWS_SESSION_TOKEN",n),r.searchParams.set("authMechanismProperties",i.toString()))}return r.searchParams.has("tlsCertificateKeyFilePassword")&&r.searchParams.set("tlsCertificateKeyFilePassword",n),r.searchParams.has("proxyUsername")&&s&&r.searchParams.set("proxyUsername",n),r.searchParams.has("proxyPassword")&&r.searchParams.set("proxyPassword",n),r}function P_e(t,e){let r=e?.replacementString??"<credentials>",n=e?.redactUsernames??!0,s;try{s=new xq.default(t)}catch{}if(s)return e={...e,replacementString:"___credentials___"},s.redact(e).toString().replace(/___credentials___/g,r);let i=r,o=[a=>a.replace(n?/(\/\/)(.*)(@)/g:/(\/\/[^@]*:)(.*)(@)/g,`$1${i}$3`),a=>a.replace(/(AWS_SESSION_TOKEN(:|%3A))([^,&]+)/gi,`$1${i}`),a=>a.replace(/(tlsCertificateKeyFilePassword=)([^&]+)/gi,`$1${i}`),a=>n?a.replace(/(proxyUsername=)([^&]+)/gi,`$1${i}`):a,a=>a.replace(/(proxyPassword=)([^&]+)/gi,`$1${i}`)];for(let a of o)t=a(t);return t}});var DC=m(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.CommaAndColonSeparatedRecord=Oo.ConnectionString=Oo.redactConnectionString=void 0;var B_e=vq(),Dq=Tq();Object.defineProperty(Oo,"redactConnectionString",{enumerable:!0,get:function(){return Dq.redactConnectionString}});var th="__this_is_a_placeholder__";function I_e(t){return t.startsWith("mongodb://")||t.startsWith("mongodb+srv://")}var N_e=/^(?<protocol>[^/]+):\/\/(?:(?<username>[^:@]*)(?::(?<password>[^@]*))?@)?(?<hosts>(?!:)[^/?@]*)(?<rest>.*)/,Jg=class extends Map{delete(e){return super.delete(this._normalizeKey(e))}get(e){return super.get(this._normalizeKey(e))}has(e){return super.has(this._normalizeKey(e))}set(e,r){return super.set(this._normalizeKey(e),r)}_normalizeKey(e){e=`${e}`;for(let r of this.keys())if(r.toLowerCase()===e.toLowerCase()){e=r;break}return e}};function k_e(t){return class extends t{append(r,n){return super.append(this._normalizeKey(r),n)}delete(r){return super.delete(this._normalizeKey(r))}get(r){return super.get(this._normalizeKey(r))}getAll(r){return super.getAll(this._normalizeKey(r))}has(r){return super.has(this._normalizeKey(r))}set(r,n){return super.set(this._normalizeKey(r),n)}keys(){return super.keys()}values(){return super.values()}entries(){return super.entries()}[Symbol.iterator](){return super[Symbol.iterator]()}_normalizeKey(r){return Jg.prototype._normalizeKey.call(this,r)}}}var MC=class extends B_e.URL{},fi=class extends Error{get name(){return"MongoParseError"}},Yg=class t extends MC{_hosts;constructor(e,r={}){let{looseValidation:n}=r;if(!n&&!I_e(e))throw new fi('Invalid scheme, expected connection string to start with "mongodb://" or "mongodb+srv://"');let s=e.match(N_e);if(!s)throw new fi(`Invalid connection string "${e}"`);let{protocol:i,username:o,password:a,hosts:u,rest:c}=s.groups??{};if(!n){if(!i||!u)throw new fi(`Protocol and host list are required in "${e}"`);try{decodeURIComponent(o??""),decodeURIComponent(a??"")}catch(d){throw new fi(d.message)}let p=/[:/?#[\]@]/gi;if(o?.match(p))throw new fi(`Username contains unescaped characters ${o}`);if(!o||!a){let d=e.replace(`${i}://`,"");if(d.startsWith("@")||d.startsWith(":"))throw new fi("URI contained empty userinfo section")}if(a?.match(p))throw new fi("Password contains unescaped characters")}let l="";typeof o=="string"&&(l+=o),typeof a=="string"&&(l+=`:${a}`),l&&(l+="@");try{super(`${i.toLowerCase()}://${l}${th}${c}`)}catch(p){throw n&&new t(e,{...r,looseValidation:!1}),typeof p.message=="string"&&(p.message=p.message.replace(th,u)),p}if(this._hosts=u.split(","),!n){if(this.isSRV&&this.hosts.length!==1)throw new fi("mongodb+srv URI cannot have multiple service names");if(this.isSRV&&this.hosts.some(p=>p.includes(":")))throw new fi("mongodb+srv URI cannot have port number")}this.pathname||(this.pathname="/"),Object.setPrototypeOf(this.searchParams,k_e(this.searchParams.constructor).prototype)}get host(){return th}set host(e){throw new Error("No single host for connection string")}get hostname(){return th}set hostname(e){throw new Error("No single host for connection string")}get port(){return""}set port(e){throw new Error("No single host for connection string")}get href(){return this.toString()}set href(e){throw new Error("Cannot set href for connection strings")}get isSRV(){return this.protocol.includes("srv")}get hosts(){return this._hosts}set hosts(e){this._hosts=e}toString(){return super.toString().replace(th,this.hosts.join(","))}clone(){return new t(this.toString(),{looseValidation:!0})}redact(e){return(0,Dq.redactValidConnectionString)(this,e)}typedSearchParams(){return this.searchParams}[Symbol.for("nodejs.util.inspect.custom")](){let{href:e,origin:r,protocol:n,username:s,password:i,hosts:o,pathname:a,search:u,searchParams:c,hash:l}=this;return{href:e,origin:r,protocol:n,username:s,password:i,hosts:o,pathname:a,search:u,searchParams:c,hash:l}}};Oo.ConnectionString=Yg;var PC=class extends Jg{constructor(e){super();for(let r of(e??"").split(",")){if(!r)continue;let n=r.indexOf(":");n===-1?this.set(r,""):this.set(r.slice(0,n),r.slice(n+1))}}toString(){return[...this].map(e=>e.join(":")).join(",")}};Oo.CommaAndColonSeparatedRecord=PC;Oo.default=Yg});var nh=m(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.OpCompressedRequest=Pn.OpMsgResponse=Pn.OpMsgRequest=Pn.DocumentSequence=Pn.OpReply=Pn.OpQueryRequest=void 0;var gp=pe(),rh=z(),BC=ih(),mp=Eo(),yp=0,R_e=2,F_e=4,$_e=8,q_e=16,j_e=32,L_e=64,U_e=128,V_e=1,W_e=2,z_e=4,K_e=8,H_e=gp.BSON.onDemand.ByteUtils.encodeUTF8Into,NC=class t{constructor(e,r,n){this.moreToCome=!1;let s=`${e}.$cmd`;if(typeof e!="string")throw new rh.MongoRuntimeError("Database name must be a string for a query");if(r==null)throw new rh.MongoRuntimeError("A query document must be specified for query");if(s.indexOf("\0")!==-1)throw new rh.MongoRuntimeError("Namespace cannot contain a null character");this.databaseName=e,this.query=r,this.ns=s,this.numberToSkip=n.numberToSkip||0,this.numberToReturn=n.numberToReturn||0,this.returnFieldSelector=n.returnFieldSelector||void 0,this.requestId=n.requestId??t.getRequestId(),this.pre32Limit=n.pre32Limit,this.serializeFunctions=typeof n.serializeFunctions=="boolean"?n.serializeFunctions:!1,this.ignoreUndefined=typeof n.ignoreUndefined=="boolean"?n.ignoreUndefined:!1,this.maxBsonSize=n.maxBsonSize||1024*1024*16,this.checkKeys=typeof n.checkKeys=="boolean"?n.checkKeys:!1,this.batchSize=this.numberToReturn,this.tailable=!1,this.secondaryOk=typeof n.secondaryOk=="boolean"?n.secondaryOk:!1,this.oplogReplay=!1,this.noCursorTimeout=!1,this.awaitData=!1,this.exhaust=!1,this.partial=!1}incRequestId(){this.requestId=yp++}nextRequestId(){return yp+1}static getRequestId(){return++yp}toBin(){let e=[],r=null,n=0;this.tailable&&(n|=R_e),this.secondaryOk&&(n|=F_e),this.oplogReplay&&(n|=$_e),this.noCursorTimeout&&(n|=q_e),this.awaitData&&(n|=j_e),this.exhaust&&(n|=L_e),this.partial&&(n|=U_e),this.batchSize!==this.numberToReturn&&(this.numberToReturn=this.batchSize);let s=Buffer.alloc(20+Buffer.byteLength(this.ns)+1+4+4);e.push(s);let i=gp.serialize(this.query,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});e.push(i),this.returnFieldSelector&&Object.keys(this.returnFieldSelector).length>0&&(r=gp.serialize(this.returnFieldSelector,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined}),e.push(r));let o=s.length+i.length+(r?r.length:0),a=4;return s[3]=o>>24&255,s[2]=o>>16&255,s[1]=o>>8&255,s[0]=o&255,s[a+3]=this.requestId>>24&255,s[a+2]=this.requestId>>16&255,s[a+1]=this.requestId>>8&255,s[a]=this.requestId&255,a=a+4,s[a+3]=0,s[a+2]=0,s[a+1]=0,s[a]=0,a=a+4,s[a+3]=mp.OP_QUERY>>24&255,s[a+2]=mp.OP_QUERY>>16&255,s[a+1]=mp.OP_QUERY>>8&255,s[a]=mp.OP_QUERY&255,a=a+4,s[a+3]=n>>24&255,s[a+2]=n>>16&255,s[a+1]=n>>8&255,s[a]=n&255,a=a+4,a=a+s.write(this.ns,a,"utf8")+1,s[a-1]=0,s[a+3]=this.numberToSkip>>24&255,s[a+2]=this.numberToSkip>>16&255,s[a+1]=this.numberToSkip>>8&255,s[a]=this.numberToSkip&255,a=a+4,s[a+3]=this.numberToReturn>>24&255,s[a+2]=this.numberToReturn>>16&255,s[a+1]=this.numberToReturn>>8&255,s[a]=this.numberToReturn&255,a=a+4,e}};Pn.OpQueryRequest=NC;var kC=class{constructor(e,r,n,s){this.index=0,this.sections=[],this.moreToCome=!1,this.parsed=!1,this.raw=e,this.data=n,this.opts=s??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=r.length,this.requestId=r.requestId,this.responseTo=r.responseTo,this.opCode=r.opCode,this.fromCompressed=r.fromCompressed,this.useBigInt64=typeof this.opts.useBigInt64=="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs=="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues=="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers=="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp=="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];if(this.index=20,this.responseFlags=this.data.readInt32LE(0),this.cursorId=new gp.Long(this.data.readInt32LE(4),this.data.readInt32LE(8)),this.startingFrom=this.data.readInt32LE(12),this.numberReturned=this.data.readInt32LE(16),this.numberReturned<0||this.numberReturned>2**32-1)throw new RangeError(`OP_REPLY numberReturned is an invalid array length ${this.numberReturned}`);this.cursorNotFound=(this.responseFlags&V_e)!==0,this.queryFailure=(this.responseFlags&W_e)!==0,this.shardConfigStale=(this.responseFlags&z_e)!==0,this.awaitCapable=(this.responseFlags&K_e)!==0;for(let e=0;e<this.numberReturned;e++){let r=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24,n=this.data.subarray(this.index,this.index+r);this.sections.push(n),this.index=this.index+r}return this.parsed=!0,this.sections[0]}};Pn.OpReply=kC;var Pq=1,Bq=2,Iq=65536,Qg=class{constructor(e,r){this.field=e,this.documents=[],this.chunks=[],this.serializedDocumentsLength=0;let n=Buffer.allocUnsafe(5+this.field.length+1);if(n[0]=1,H_e(n,`${this.field}\0`,5),this.chunks.push(n),this.header=n,r)for(let s of r)this.push(s,gp.serialize(s))}push(e,r){return this.serializedDocumentsLength+=r.length,this.documents.push(e),this.chunks.push(r),this.header?.writeInt32LE(4+this.field.length+1+this.serializedDocumentsLength,1),this.serializedDocumentsLength+this.header.length}toBin(){return Buffer.concat(this.chunks)}};Pn.DocumentSequence=Qg;var Xg=class t{constructor(e,r,n){if(r==null)throw new rh.MongoInvalidArgumentError("Query document must be specified for query");this.databaseName=e,this.command=r,this.command.$db=e,this.options=n??{},this.requestId=n.requestId?n.requestId:t.getRequestId(),this.serializeFunctions=typeof n.serializeFunctions=="boolean"?n.serializeFunctions:!1,this.ignoreUndefined=typeof n.ignoreUndefined=="boolean"?n.ignoreUndefined:!1,this.checkKeys=typeof n.checkKeys=="boolean"?n.checkKeys:!1,this.maxBsonSize=n.maxBsonSize||1024*1024*16,this.checksumPresent=!1,this.moreToCome=n.moreToCome??r.writeConcern?.w===0,this.exhaustAllowed=typeof n.exhaustAllowed=="boolean"?n.exhaustAllowed:!1}toBin(){let e=[],r=0;this.checksumPresent&&(r|=Pq),this.moreToCome&&(r|=Bq),this.exhaustAllowed&&(r|=Iq);let n=Buffer.alloc(20);e.push(n);let s=n.length,i=this.command;return s+=this.makeSections(e,i),n.writeInt32LE(s,0),n.writeInt32LE(this.requestId,4),n.writeInt32LE(0,8),n.writeInt32LE(mp.OP_MSG,12),n.writeUInt32LE(r,16),e}makeSections(e,r){let n=this.extractDocumentSequences(r),s=Buffer.allocUnsafe(1);s[0]=0;let i=this.serializeBson(r);return e.push(s),e.push(i),e.push(n),s.length+i.length+n.length}extractDocumentSequences(e){let r=[];for(let[n,s]of Object.entries(e))s instanceof Qg&&(r.push(s.toBin()),delete e[n]);return r.length>0?Buffer.concat(r):Buffer.alloc(0)}serializeBson(e){return gp.serialize(e,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined})}static getRequestId(){return yp=yp+1&2147483647,yp}};Pn.OpMsgRequest=Xg;var RC=class{constructor(e,r,n,s){this.index=0,this.sections=[],this.parsed=!1,this.raw=e,this.data=n,this.opts=s??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=r.length,this.requestId=r.requestId,this.responseTo=r.responseTo,this.opCode=r.opCode,this.fromCompressed=r.fromCompressed,this.responseFlags=n.readInt32LE(0),this.checksumPresent=(this.responseFlags&Pq)!==0,this.moreToCome=(this.responseFlags&Bq)!==0,this.exhaustAllowed=(this.responseFlags&Iq)!==0,this.useBigInt64=typeof this.opts.useBigInt64=="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs=="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues=="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers=="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp=="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];for(this.index=4;this.index<this.data.length;){let e=this.data.readUInt8(this.index++);if(e===0){let r=this.data.readUInt32LE(this.index),n=this.data.subarray(this.index,this.index+r);this.sections.push(n),this.index+=r}else if(e===1)throw new rh.MongoRuntimeError("OP_MSG Payload Type 1 detected unsupported protocol")}return this.parsed=!0,this.sections[0]}};Pn.OpMsgResponse=RC;var IC=16,Mq=9,FC=class{constructor(e,r){this.command=e,this.options={zlibCompressionLevel:r.zlibCompressionLevel,agreedCompressor:r.agreedCompressor}}static canCompress(e){let r=e instanceof Xg?e.command:e.query,n=Object.keys(r)[0];return!BC.uncompressibleCommands.has(n)}async toBin(){let e=Buffer.concat(this.command.toBin()),r=e.slice(IC),n=e.readInt32LE(12),s=await(0,BC.compress)(this.options,r),i=Buffer.alloc(IC);i.writeInt32LE(IC+Mq+s.length,0),i.writeInt32LE(this.command.requestId,4),i.writeInt32LE(0,8),i.writeInt32LE(mp.OP_COMPRESSED,12);let o=Buffer.alloc(Mq);return o.writeInt32LE(n,0),o.writeInt32LE(r.length,4),o.writeUInt8(BC.Compressor[this.options.agreedCompressor],8),[i,o,s]}};Pn.OpCompressedRequest=FC});var ih=m(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.uncompressibleCommands=Ir.Compressor=void 0;Ir.compress=X_e;Ir.decompress=Fq;Ir.compressCommand=Z_e;Ir.decompressResponse=eEe;var Nq=require("util"),Zg=require("zlib"),G_e=Lt(),kq=pi(),qC=z(),_p=nh(),$C=Eo();Ir.Compressor=Object.freeze({none:0,snappy:1,zlib:2,zstd:3});Ir.uncompressibleCommands=new Set([G_e.LEGACY_HELLO_COMMAND,"saslStart","saslContinue","getnonce","authenticate","createUser","updateUser","copydbSaslStart","copydbgetnonce","copydb"]);var J_e=3,Y_e=(0,Nq.promisify)(Zg.inflate.bind(Zg)),Q_e=(0,Nq.promisify)(Zg.deflate.bind(Zg)),Ua,Zu=null;function Rq(){if(Zu==null){let t=(0,kq.getSnappy)();if("kModuleError"in t)throw t.kModuleError;Zu=t}return Zu}async function X_e(t,e){let r={};switch(t.agreedCompressor){case"snappy":return Zu??=Rq(),await Zu.compress(e);case"zstd":{if($q(),"kModuleError"in Ua)throw Ua.kModuleError;return await Ua.compress(e,J_e)}case"zlib":return t.zlibCompressionLevel&&(r.level=t.zlibCompressionLevel),await Q_e(e,r);default:throw new qC.MongoInvalidArgumentError(`Unknown compressor ${t.agreedCompressor} failed to compress`)}}async function Fq(t,e){if(t!==Ir.Compressor.snappy&&t!==Ir.Compressor.zstd&&t!==Ir.Compressor.zlib&&t!==Ir.Compressor.none)throw new qC.MongoDecompressionError(`Server sent message compressed using an unsupported compressor. (Received compressor ID ${t})`);switch(t){case Ir.Compressor.snappy:return Zu??=Rq(),await Zu.uncompress(e,{asBuffer:!0});case Ir.Compressor.zstd:{if($q(),"kModuleError"in Ua)throw Ua.kModuleError;return await Ua.decompress(e)}case Ir.Compressor.zlib:return await Y_e(e);default:return e}}function $q(){Ua||(Ua=(0,kq.getZstdLibrary)())}var oh=16;async function Z_e(t,e){let n=await(e.agreedCompressor==="none"||!_p.OpCompressedRequest.canCompress(t)?t:new _p.OpCompressedRequest(t,{agreedCompressor:e.agreedCompressor??"none",zlibCompressionLevel:e.zlibCompressionLevel??0})).toBin();return Buffer.concat(n)}async function eEe(t){let e={length:t.readInt32LE(0),requestId:t.readInt32LE(4),responseTo:t.readInt32LE(8),opCode:t.readInt32LE(12)};if(e.opCode!==$C.OP_COMPRESSED){let a=e.opCode===$C.OP_MSG?_p.OpMsgResponse:_p.OpReply,u=t.subarray(oh);return new a(t,e,u)}let r={...e,fromCompressed:!0,opCode:t.readInt32LE(oh),length:t.readInt32LE(oh+4)},n=t[oh+8],s=t.slice(oh+9),i=r.opCode===$C.OP_MSG?_p.OpMsgResponse:_p.OpReply,o=await Fq(n,s);if(o.length!==r.length)throw new qC.MongoDecompressionError("Message body and message header must be the same length");return new i(t,r,o)}});var Ep=m(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.MongoCryptKMSRequestNetworkTimeoutError=tn.MongoCryptAzureKMSRequestError=tn.MongoCryptCreateEncryptedCollectionError=tn.MongoCryptCreateDataKeyError=tn.MongoCryptInvalidArgumentError=tn.defaultErrorWrapper=tn.MongoCryptError=void 0;var tEe=z(),Co=class extends tEe.MongoError{constructor(e,r={}){super(e,r)}get name(){return"MongoCryptError"}};tn.MongoCryptError=Co;var rEe=t=>new Co(t.message,{cause:t});tn.defaultErrorWrapper=rEe;var jC=class extends Co{constructor(e){super(e)}get name(){return"MongoCryptInvalidArgumentError"}};tn.MongoCryptInvalidArgumentError=jC;var LC=class extends Co{constructor(e,{cause:r}){super(`Unable to complete creating data keys: ${r.message}`,{cause:r}),this.encryptedFields=e}get name(){return"MongoCryptCreateDataKeyError"}};tn.MongoCryptCreateDataKeyError=LC;var UC=class extends Co{constructor(e,{cause:r}){super(`Unable to create collection: ${r.message}`,{cause:r}),this.encryptedFields=e}get name(){return"MongoCryptCreateEncryptedCollectionError"}};tn.MongoCryptCreateEncryptedCollectionError=UC;var VC=class extends Co{constructor(e,r){super(e),this.body=r}get name(){return"MongoCryptAzureKMSRequestError"}};tn.MongoCryptAzureKMSRequestError=VC;var WC=class extends Co{get name(){return"MongoCryptKMSRequestNetworkTimeoutError"}};tn.MongoCryptKMSRequestNetworkTimeoutError=WC});var KC=m(e2=>{"use strict";Object.defineProperty(e2,"__esModule",{value:!0});e2.AWSSDKCredentialProvider=void 0;var nEe=pi(),sEe=z(),zC=class t{constructor(e){e&&(this._provider=e)}static get awsSDK(){return t._awsSDK??=(0,nEe.getAwsCredentialProvider)(),t._awsSDK}get provider(){if("kModuleError"in t.awsSDK)throw t.awsSDK.kModuleError;if(this._provider)return this._provider;let{AWS_STS_REGIONAL_ENDPOINTS:e="",AWS_REGION:r=""}=process.env;e=e.toLowerCase(),r=r.toLowerCase();let n=r.length!==0&&e.length!==0,i=e==="regional"||e==="legacy"&&!new Set(["ap-northeast-1","ap-south-1","ap-southeast-1","ap-southeast-2","aws-global","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]).has(r);return this._provider=n&&i?t.awsSDK.fromNodeProviderChain({clientConfig:{region:r}}):t.awsSDK.fromNodeProviderChain(),this._provider}async getCredentials(){try{let e=await this.provider();return{AccessKeyId:e.accessKeyId,SecretAccessKey:e.secretAccessKey,Token:e.sessionToken,Expiration:e.expiration}}catch(e){throw new sEe.MongoAWSError(e.message,{cause:e})}}};e2.AWSSDKCredentialProvider=zC});var qq=m(HC=>{"use strict";Object.defineProperty(HC,"__esModule",{value:!0});HC.loadAWSCredentials=oEe;var iEe=KC();async function oEe(t,e){let r=new iEe.AWSSDKCredentialProvider(e),{SecretAccessKey:n="",AccessKeyId:s="",Token:i}=await r.getCredentials(),o={secretAccessKey:n,accessKeyId:s};return i!=null&&(o.sessionToken=i),{...t,aws:o}}});var GC=m(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.tokenCache=Bn.AzureCredentialCache=Bn.AZURE_BASE_URL=void 0;Bn.addAzureParams=jq;Bn.prepareRequest=Lq;Bn.fetchAzureKMSToken=Uq;Bn.loadAzureCredentials=pEe;var aEe=z(),uEe=X(),bp=Ep(),cEe=6e3;Bn.AZURE_BASE_URL="http://169.254.169.254/metadata/identity/oauth2/token?";var t2=class{constructor(){this.cachedToken=null}async getToken(){return(this.cachedToken==null||this.needsRefresh(this.cachedToken))&&(this.cachedToken=await this._getToken()),{accessToken:this.cachedToken.accessToken}}needsRefresh(e){return e.expiresOnTimestamp-Date.now()<=cEe}resetCache(){this.cachedToken=null}_getToken(){return Uq()}};Bn.AzureCredentialCache=t2;Bn.tokenCache=new t2;async function lEe(t){let{status:e,body:r}=t,n=(()=>{try{return JSON.parse(r)}catch{throw new bp.MongoCryptAzureKMSRequestError("Malformed JSON body in GET request.")}})();if(e!==200)throw new bp.MongoCryptAzureKMSRequestError("Unable to complete request.",n);if(!n.access_token)throw new bp.MongoCryptAzureKMSRequestError("Malformed response body - missing field `access_token`.");if(!n.expires_in)throw new bp.MongoCryptAzureKMSRequestError("Malformed response body - missing field `expires_in`.");let s=Number(n.expires_in)*1e3;if(Number.isNaN(s))throw new bp.MongoCryptAzureKMSRequestError("Malformed response body - unable to parse int from `expires_in` field.");return{accessToken:n.access_token,expiresOnTimestamp:Date.now()+s}}function jq(t,e,r){return t.searchParams.append("api-version","2018-02-01"),t.searchParams.append("resource",e),r&&t.searchParams.append("client_id",r),t}function Lq(t){let e=new URL(t.url?.toString()??Bn.AZURE_BASE_URL);return jq(e,"https://vault.azure.net"),{headers:{...t.headers,"Content-Type":"application/json",Metadata:!0},url:e}}async function Uq(t={}){let{headers:e,url:r}=Lq(t);try{let n=await(0,uEe.get)(r,{headers:e});return await lEe(n)}catch(n){throw n instanceof aEe.MongoNetworkTimeoutError?new bp.MongoCryptAzureKMSRequestError(`[Azure KMS] ${n.message}`):n}}async function pEe(t){let e=await Bn.tokenCache.getToken();return{...t,azure:e}}});var Vq=m(JC=>{"use strict";Object.defineProperty(JC,"__esModule",{value:!0});JC.loadGCPCredentials=hEe;var dEe=pi();async function hEe(t){let e=(0,dEe.getGcpMetadata)();if("kModuleError"in e)return t;let{access_token:r}=await e.instance({property:"service-accounts/default/token"});return{...t,gcp:{accessToken:r}}}});var YC=m(n2=>{"use strict";Object.defineProperty(n2,"__esModule",{value:!0});n2.isEmptyCredentials=r2;n2.refreshKMSCredentials=gEe;var fEe=qq(),mEe=GC(),yEe=Vq();function r2(t,e){let r=e[t];return r==null?!1:typeof r=="object"&&Object.keys(r).length===0}async function gEe(t,e){let r=t;return r2("aws",t)&&(r=await(0,fEe.loadAWSCredentials)(r,e?.aws)),r2("gcp",t)&&(r=await(0,yEe.loadGCPCredentials)(r)),r2("azure",t)&&(r=await(0,mEe.loadAzureCredentials)(r)),r}});var XC=m(s2=>{"use strict";Object.defineProperty(s2,"__esModule",{value:!0});s2.StateMachine=void 0;var Wq=require("fs/promises"),_Ee=require("net"),EEe=require("tls"),vo=pe(),zq=Xr(),bEe=pi(),SEe=z(),Kq=ir(),Va=X(),wEe=i2(),Wa=Ep(),ah=null;function AEe(){if(ah==null){let t=(0,bEe.getSocks)();if("kModuleError"in t)throw t.kModuleError;ah=t}return ah}var ec=0,Gq=1,Jq=2,Yq=3,Qq=7,Xq=4,Zq=5,ej=6,OEe=443,CEe=new Map([[ec,"MONGOCRYPT_CTX_ERROR"],[Gq,"MONGOCRYPT_CTX_NEED_MONGO_COLLINFO"],[Jq,"MONGOCRYPT_CTX_NEED_MONGO_MARKINGS"],[Yq,"MONGOCRYPT_CTX_NEED_MONGO_KEYS"],[Qq,"MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS"],[Xq,"MONGOCRYPT_CTX_NEED_KMS"],[Zq,"MONGOCRYPT_CTX_READY"],[ej,"MONGOCRYPT_CTX_DONE"]]),vEe=["tlsInsecure","tlsAllowInvalidCertificates","tlsAllowInvalidHostnames"];function Hq(t){process.env.MONGODB_CRYPT_DEBUG&&console.error(t)}var xEe,QC=class{constructor(e,r=(0,vo.pluckBSONSerializeOptions)(e)){this.options=e,this.bsonOptions=r}async execute(e,r,n){let s=e._keyVaultNamespace,i=e._keyVaultClient,o=e._metaDataClient,a=e._mongocryptdClient,u=e._mongocryptdManager,c=null,l=()=>r.status,p=()=>r.state;for(;p()!==ej&&p()!==ec;)switch(n.signal?.throwIfAborted(),Hq(`[context#${r.id}] ${CEe.get(p())||p()}`),p()){case Gq:{let d=(0,vo.deserialize)(r.nextMongoOperation());if(!o)throw new Wa.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_COLLINFO but metadata client is undefined");let h=this.fetchCollectionInfo(o,r.ns,d,n);for await(let f of h)if(r.addMongoOperationResponse((0,vo.serialize)(f)),p()===ec)break;if(p()===ec)break;r.finishMongoOperation();break}case Jq:{let d=r.nextMongoOperation();if(p()===ec)break;if(!a)throw new Wa.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_MARKINGS but mongocryptdClient is undefined");let h=u?await u.withRespawn(this.markCommand.bind(this,a,r.ns,d,n)):await this.markCommand(a,r.ns,d,n);r.addMongoOperationResponse(h),r.finishMongoOperation();break}case Yq:{let d=r.nextMongoOperation(),h=await this.fetchKeys(i,s,d,n);h.length===0&&(c=xEe??=(0,vo.serialize)({v:[]}));for(let f of h)r.addMongoOperationResponse((0,vo.serialize)(f));r.finishMongoOperation();break}case Qq:{let d=await e.askForKMSCredentials();r.provideKMSProviders((0,vo.serialize)(d));break}case Xq:{await Promise.all(this.requests(r,n)),r.finishKMSRequests();break}case Zq:{let d=r.finalize();if(p()===ec){let h=l().message||"Finalization error";throw new Wa.MongoCryptError(h)}c=d;break}default:throw new Wa.MongoCryptError(`Unknown state: ${p()}`)}if(p()===ec||c==null){let d=l().message;throw d||Hq("unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message."),new Wa.MongoCryptError(d??"unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.")}return c}async kmsRequest(e,r){let n=e.endpoint.split(":"),s=n[1]!=null?Number.parseInt(n[1],10):OEe,i={host:n[0],servername:n[0],port:s,...(0,wEe.autoSelectSocketOptions)(this.options.socketOptions||{})},o=e.message,a=new Va.BufferPool,u,c;function l(){for(let y of[c,u])y&&y.destroy()}function p(y){return new Wa.MongoCryptError("KMS request failed",{cause:y})}function d(){return new Wa.MongoCryptError("KMS request closed")}let h=this.options.tlsOptions;if(h){let y=e.kmsProvider,g=h[y];if(g){let _=this.validateTlsOptions(y,g);if(_)throw _;try{await this.setTlsOptions(g,i)}catch(S){throw p(S)}}}let f;try{if(this.options.proxyOptions&&this.options.proxyOptions.proxyHost){u=new _Ee.Socket;let{promise:S,reject:O,resolve:E}=(0,Va.promiseWithResolvers)();u.once("error",x=>O(p(x))).once("close",()=>O(d())).once("connect",()=>E());let A={...i,host:this.options.proxyOptions.proxyHost,port:this.options.proxyOptions.proxyPort||1080};u.connect(A),await S;try{ah??=AEe(),i.socket=(await ah.SocksClient.createConnection({existing_socket:u,command:"connect",destination:{host:i.host,port:i.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:this.options.proxyOptions.proxyUsername,password:this.options.proxyOptions.proxyPassword}})).socket}catch(x){throw p(x)}}c=EEe.connect(i,()=>{c.write(o)});let{promise:y,reject:g,resolve:_}=(0,Va.promiseWithResolvers)();f=(0,Va.addAbortListener)(r?.signal,function(){l(),g(this.reason)}),c.once("error",S=>g(p(S))).once("close",()=>g(d())).on("data",S=>{for(a.append(S);e.bytesNeeded>0&&a.length;){let O=Math.min(e.bytesNeeded,a.length);e.addResponse(a.read(O))}e.bytesNeeded<=0&&_()}),await(r?.timeoutContext?.csotEnabled()?Promise.all([y,Kq.Timeout.expires(r.timeoutContext?.remainingTimeMS)]):y)}catch(y){throw y instanceof Kq.TimeoutError?new SEe.MongoOperationTimeoutError("KMS request timed out"):y}finally{l(),f?.[Va.kDispose]()}}*requests(e,r){for(let n=e.nextKMSRequest();n!=null;n=e.nextKMSRequest())yield this.kmsRequest(n,r)}validateTlsOptions(e,r){let n=Object.keys(r);for(let s of vEe)if(n.includes(s))return new Wa.MongoCryptError(`Insecure TLS options prohibited for ${e}: ${s}`)}async setTlsOptions(e,r){if(e.secureContext&&(r.secureContext=e.secureContext),e.tlsCertificateKeyFile){let n=await Wq.readFile(e.tlsCertificateKeyFile);r.cert=r.key=n}e.tlsCAFile&&(r.ca=await Wq.readFile(e.tlsCAFile)),e.tlsCertificateKeyFilePassword&&(r.passphrase=e.tlsCertificateKeyFilePassword)}fetchCollectionInfo(e,r,n,s){let{db:i}=Va.MongoDBCollectionNamespace.fromString(r);return e.db(i).listCollections(n,{promoteLongs:!1,promoteValues:!1,timeoutContext:s?.timeoutContext&&new zq.CursorTimeoutContext(s?.timeoutContext,Symbol()),signal:s?.signal,nameOnly:!1})}async markCommand(e,r,n,s){let{db:i}=Va.MongoDBCollectionNamespace.fromString(r),o={promoteLongs:!1,promoteValues:!1},a=(0,vo.deserialize)(n,o),u={timeoutMS:void 0,signal:void 0};s?.timeoutContext?.csotEnabled()&&(u.timeoutMS=s.timeoutContext.remainingTimeMS),s?.signal&&(u.signal=s.signal);let c=await e.db(i).command(a,{...o,...u});return(0,vo.serialize)(c,this.bsonOptions)}fetchKeys(e,r,n,s){let{db:i,collection:o}=Va.MongoDBCollectionNamespace.fromString(r),a={timeoutContext:void 0,signal:void 0};return s?.timeoutContext!=null&&(a.timeoutContext=new zq.CursorTimeoutContext(s.timeoutContext,Symbol())),s?.signal!=null&&(a.signal=s.signal),e.db(i).collection(o,{readConcern:{level:"majority"}}).find((0,vo.deserialize)(n),a).toArray()}};s2.StateMachine=QC});var i2=m(lh=>{"use strict";Object.defineProperty(lh,"__esModule",{value:!0});lh.ClientEncryption=void 0;lh.autoSelectSocketOptions=ch;var _n=pe(),TEe=pi(),uh=ir(),In=X(),xo=Ep(),tj=YC(),o2=XC(),ZC=class t{static getMongoCrypt(){let e=(0,TEe.getMongoDBClientEncryption)();if("kModuleError"in e)throw e.kModuleError;return e.MongoCrypt}constructor(e,r){this._client=e,this._proxyOptions=r.proxyOptions??{},this._tlsOptions=r.tlsOptions??{},this._kmsProviders=r.kmsProviders||{};let{timeoutMS:n}=(0,In.resolveTimeoutOptions)(e,r);if(this._timeoutMS=n,this._credentialProviders=r.credentialProviders,r.credentialProviders?.aws&&!(0,tj.isEmptyCredentials)("aws",this._kmsProviders))throw new xo.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");if(r.keyVaultNamespace==null)throw new xo.MongoCryptInvalidArgumentError("Missing required option `keyVaultNamespace`");let s={...r,kmsProviders:Buffer.isBuffer(this._kmsProviders)?this._kmsProviders:(0,_n.serialize)(this._kmsProviders),errorWrapper:xo.defaultErrorWrapper};this._keyVaultNamespace=r.keyVaultNamespace,this._keyVaultClient=r.keyVaultClient||e;let i=t.getMongoCrypt();this._mongoCrypt=new i(s)}async createDataKey(e,r={}){if(r.keyAltNames&&!Array.isArray(r.keyAltNames))throw new xo.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but was of type ${typeof r.keyAltNames}.`);let n;r.keyAltNames&&r.keyAltNames.length>0&&(n=r.keyAltNames.map((h,f)=>{if(typeof h!="string")throw new xo.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but item at index ${f} was of type ${typeof h}`);return(0,_n.serialize)({keyAltName:h})}));let s;r.keyMaterial&&(s=(0,_n.serialize)({keyMaterial:r.keyMaterial}));let i=(0,_n.serialize)({provider:e,...r.masterKey}),o=this._mongoCrypt.makeDataKeyContext(i,{keyAltNames:n,keyMaterial:s}),a=new o2.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:ch(this._client.s.options)}),u=r?.timeoutContext??uh.TimeoutContext.create((0,In.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})),c=(0,_n.deserialize)(await a.execute(this,o,{timeoutContext:u})),{db:l,collection:p}=In.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),{insertedId:d}=await this._keyVaultClient.db(l).collection(p).insertOne(c,{writeConcern:{w:"majority"},timeoutMS:u?.csotEnabled()?u?.getRemainingTimeMSOrThrow():void 0});return d}async rewrapManyDataKey(e,r){let n;if(r){let h=Object.assign({provider:r.provider},r.masterKey);n=(0,_n.serialize)(h)}let s=(0,_n.serialize)(e),i=this._mongoCrypt.makeRewrapManyDataKeyContext(s,n),o=new o2.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:ch(this._client.s.options)}),a=uh.TimeoutContext.create((0,In.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})),{v:u}=(0,_n.deserialize)(await o.execute(this,i,{timeoutContext:a}));if(u.length===0)return{};let{db:c,collection:l}=In.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),p=u.map(h=>({updateOne:{filter:{_id:h._id},update:{$set:{masterKey:h.masterKey,keyMaterial:h.keyMaterial},$currentDate:{updateDate:!0}}}}));return{bulkWriteResult:await this._keyVaultClient.db(c).collection(l).bulkWrite(p,{writeConcern:{w:"majority"},timeoutMS:a.csotEnabled()?a?.remainingTimeMS:void 0})}}async deleteKey(e){let{db:r,collection:n}=In.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).deleteOne({_id:e},{writeConcern:{w:"majority"},timeoutMS:this._timeoutMS})}getKeys(){let{db:e,collection:r}=In.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return this._keyVaultClient.db(e).collection(r).find({},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKey(e){let{db:r,collection:n}=In.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).findOne({_id:e},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKeyByAltName(e){let{db:r,collection:n}=In.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).findOne({keyAltNames:e},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async addKeyAltName(e,r){let{db:n,collection:s}=In.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(n).collection(s).findOneAndUpdate({_id:e},{$addToSet:{keyAltNames:r}},{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async removeKeyAltName(e,r){let{db:n,collection:s}=In.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),i=[{$set:{keyAltNames:{$cond:[{$eq:["$keyAltNames",[r]]},"$$REMOVE",{$filter:{input:"$keyAltNames",cond:{$ne:["$$this",r]}}}]}}}];return await this._keyVaultClient.db(n).collection(s).findOneAndUpdate({_id:e},i,{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async createEncryptedCollection(e,r,n){let{provider:s,masterKey:i,createCollectionOptions:{encryptedFields:{...o},...a}}=n,u=this._timeoutMS!=null?uh.TimeoutContext.create((0,In.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0;if(Array.isArray(o.fields)){let c=o.fields.map(async d=>d==null||typeof d!="object"||d.keyId!=null?d:{...d,keyId:await this.createDataKey(s,{masterKey:i,timeoutContext:u?.csotEnabled()?u?.clone():void 0})}),l=await Promise.allSettled(c);o.fields=l.map((d,h)=>d.status==="fulfilled"?d.value:o.fields[h]);let p=l.find(d=>d.status==="rejected");if(p!=null)throw new xo.MongoCryptCreateDataKeyError(o,{cause:p.reason})}try{return{collection:await e.createCollection(r,{...a,encryptedFields:o,timeoutMS:u?.csotEnabled()?u?.getRemainingTimeMSOrThrow():void 0}),encryptedFields:o}}catch(c){throw new xo.MongoCryptCreateEncryptedCollectionError(o,{cause:c})}}async encrypt(e,r){return await this._encrypt(e,!1,r)}async encryptExpression(e,r){return await this._encrypt(e,!0,r)}async decrypt(e){let r=(0,_n.serialize)({v:e}),n=this._mongoCrypt.makeExplicitDecryptionContext(r),s=new o2.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:ch(this._client.s.options)}),i=this._timeoutMS!=null?uh.TimeoutContext.create((0,In.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:o}=(0,_n.deserialize)(await s.execute(this,n,{timeoutContext:i}));return o}async askForKMSCredentials(){return await(0,tj.refreshKMSCredentials)(this._kmsProviders,this._credentialProviders)}static get libmongocryptVersion(){return t.getMongoCrypt().libmongocryptVersion}async _encrypt(e,r,n){let{algorithm:s,keyId:i,keyAltName:o,contentionFactor:a,queryType:u,rangeOptions:c,textOptions:l}=n,p={expressionMode:r,algorithm:s};if(i&&(p.keyId=i.buffer),o){if(i)throw new xo.MongoCryptInvalidArgumentError('"options" cannot contain both "keyId" and "keyAltName"');if(typeof o!="string")throw new xo.MongoCryptInvalidArgumentError(`"options.keyAltName" must be of type string, but was of type ${typeof o}`);p.keyAltName=(0,_n.serialize)({keyAltName:o})}(typeof a=="number"||typeof a=="bigint")&&(p.contentionFactor=a),typeof u=="string"&&(p.queryType=u),typeof c=="object"&&(p.rangeOptions=(0,_n.serialize)(c)),typeof l=="object"&&(p.textOptions=(0,_n.serialize)(l));let d=(0,_n.serialize)({v:e}),h=new o2.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:ch(this._client.s.options)}),f=this._mongoCrypt.makeExplicitEncryptionContext(d,p),y=this._timeoutMS!=null?uh.TimeoutContext.create((0,In.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:g}=(0,_n.deserialize)(await h.execute(this,f,{timeoutContext:y}));return g}};lh.ClientEncryption=ZC;function ch(t){let e={autoSelectFamily:!0};return"autoSelectFamily"in t&&(e.autoSelectFamily=t.autoSelectFamily),"autoSelectFamilyAttemptTimeout"in t&&(e.autoSelectFamilyAttemptTimeout=t.autoSelectFamilyAttemptTimeout),e}});var rj=m(a2=>{"use strict";Object.defineProperty(a2,"__esModule",{value:!0});a2.MongocryptdManager=void 0;var DEe=z(),ev=class t{static{this.DEFAULT_MONGOCRYPTD_URI="mongodb://localhost:27020"}constructor(e={}){this.spawnPath="",this.spawnArgs=[],this.uri=typeof e.mongocryptdURI=="string"&&e.mongocryptdURI.length>0?e.mongocryptdURI:t.DEFAULT_MONGOCRYPTD_URI,this.bypassSpawn=!!e.mongocryptdBypassSpawn,Object.hasOwn(e,"mongocryptdSpawnPath")&&e.mongocryptdSpawnPath&&(this.spawnPath=e.mongocryptdSpawnPath),Object.hasOwn(e,"mongocryptdSpawnArgs")&&Array.isArray(e.mongocryptdSpawnArgs)&&(this.spawnArgs=this.spawnArgs.concat(e.mongocryptdSpawnArgs)),this.spawnArgs.filter(r=>typeof r=="string").every(r=>r.indexOf("--idleShutdownTimeoutSecs")<0)&&this.spawnArgs.push("--idleShutdownTimeoutSecs","60")}async spawn(){let e=this.spawnPath||"mongocryptd",{spawn:r}=require("child_process");this._child=r(e,this.spawnArgs,{stdio:"ignore",detached:!0}),this._child.on("error",()=>{}),this._child.unref()}async withRespawn(e){try{return await e()}catch(n){if(!(n instanceof DEe.MongoNetworkTimeoutError&&!this.bypassSpawn))throw n}return await this.spawn(),await e()}};a2.MongocryptdManager=ev});var iv=m(Sp=>{"use strict";var nj;Object.defineProperty(Sp,"__esModule",{value:!0});Sp.AutoEncrypter=Sp.AutoEncryptionLoggerLevel=void 0;var sj=require("net"),ph=pe(),MEe=Lt(),PEe=pi(),tv=z(),BEe=tc(),IEe=X(),rv=i2(),nv=Ep(),NEe=rj(),ij=YC(),oj=XC();Sp.AutoEncryptionLoggerLevel=Object.freeze({FatalError:0,Error:1,Warning:2,Info:3,Trace:4});var sv=class t{static{nj=MEe.kDecorateResult}static getMongoCrypt(){let e=(0,PEe.getMongoDBClientEncryption)();if("kModuleError"in e)throw e.kModuleError;return e.MongoCrypt}constructor(e,r){if(this[nj]=!1,this._client=e,this._bypassEncryption=r.bypassAutoEncryption===!0,this._keyVaultNamespace=r.keyVaultNamespace||"admin.datakeys",this._keyVaultClient=r.keyVaultClient||e,this._metaDataClient=r.metadataClient||e,this._proxyOptions=r.proxyOptions||{},this._tlsOptions=r.tlsOptions||{},this._kmsProviders=r.kmsProviders||{},this._credentialProviders=r.credentialProviders,r.credentialProviders?.aws&&!(0,ij.isEmptyCredentials)("aws",this._kmsProviders))throw new nv.MongoCryptInvalidArgumentError("Can only provide a custom AWS credential provider when the state machine is configured for automatic AWS credential fetching");let n={errorWrapper:nv.defaultErrorWrapper};r.schemaMap&&(n.schemaMap=Buffer.isBuffer(r.schemaMap)?r.schemaMap:(0,ph.serialize)(r.schemaMap)),r.encryptedFieldsMap&&(n.encryptedFieldsMap=Buffer.isBuffer(r.encryptedFieldsMap)?r.encryptedFieldsMap:(0,ph.serialize)(r.encryptedFieldsMap)),n.kmsProviders=Buffer.isBuffer(this._kmsProviders)?this._kmsProviders:(0,ph.serialize)(this._kmsProviders),r.options?.logger&&(n.logger=r.options.logger),r.extraOptions&&r.extraOptions.cryptSharedLibPath&&(n.cryptSharedLibPath=r.extraOptions.cryptSharedLibPath),r.bypassQueryAnalysis&&(n.bypassQueryAnalysis=r.bypassQueryAnalysis),r.keyExpirationMS!=null&&(n.keyExpirationMS=r.keyExpirationMS),this._bypassMongocryptdAndCryptShared=this._bypassEncryption||!!r.bypassQueryAnalysis,r.extraOptions&&r.extraOptions.cryptSharedLibSearchPaths?n.cryptSharedLibSearchPaths=r.extraOptions.cryptSharedLibSearchPaths:this._bypassMongocryptdAndCryptShared||(n.cryptSharedLibSearchPaths=["$SYSTEM"]);let s=t.getMongoCrypt();if(this._mongocrypt=new s(n),this._contextCounter=0,r.extraOptions&&r.extraOptions.cryptSharedLibRequired&&!this.cryptSharedLibVersionInfo)throw new nv.MongoCryptInvalidArgumentError("`cryptSharedLibRequired` set but no crypt_shared library loaded");if(!this._bypassMongocryptdAndCryptShared&&!this.cryptSharedLibVersionInfo){this._mongocryptdManager=new NEe.MongocryptdManager(r.extraOptions);let i={serverSelectionTimeoutMS:1e4};(r.extraOptions==null||typeof r.extraOptions.mongocryptdURI!="string")&&!sj.getDefaultAutoSelectFamily&&(i.family=4),sj.getDefaultAutoSelectFamily&&Object.assign(i,(0,rv.autoSelectSocketOptions)(this._client.s?.options??{})),this._mongocryptdClient=new BEe.MongoClient(this._mongocryptdManager.uri,i)}}async init(){if(!(this._bypassMongocryptdAndCryptShared||this.cryptSharedLibVersionInfo)){if(!this._mongocryptdManager)throw new tv.MongoRuntimeError("Reached impossible state: mongocryptdManager is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdClient)throw new tv.MongoRuntimeError("Reached impossible state: mongocryptdClient is undefined when neither bypassSpawn nor the shared lib are specified.");this._mongocryptdManager.bypassSpawn||await this._mongocryptdManager.spawn();try{return await this._mongocryptdClient.connect()}catch(e){throw new tv.MongoRuntimeError("Unable to connect to `mongocryptd`, please make sure it is running or in your PATH for auto-spawn",{cause:e})}}}async close(){await this._mongocryptdClient?.close()}async encrypt(e,r,n={}){if(n.signal?.throwIfAborted(),this._bypassEncryption)return r;let s=Buffer.isBuffer(r)?r:(0,ph.serialize)(r,n),i=this._mongocrypt.makeEncryptionContext(IEe.MongoDBCollectionNamespace.fromString(e).db,s);i.id=this._contextCounter++,i.ns=e,i.document=r;let o=new oj.StateMachine({promoteValues:!1,promoteLongs:!1,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:(0,rv.autoSelectSocketOptions)(this._client.s.options)});return(0,ph.deserialize)(await o.execute(this,i,n),{promoteValues:!1,promoteLongs:!1})}async decrypt(e,r={}){r.signal?.throwIfAborted();let n=this._mongocrypt.makeDecryptionContext(e);return n.id=this._contextCounter++,await new oj.StateMachine({...r,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:(0,rv.autoSelectSocketOptions)(this._client.s.options)}).execute(this,n,r)}async askForKMSCredentials(){return await(0,ij.refreshKMSCredentials)(this._kmsProviders,this._credentialProviders)}get cryptSharedLibVersionInfo(){return this._mongocrypt.cryptSharedLibVersionInfo}static get libmongocryptVersion(){return t.getMongoCrypt().libmongocryptVersion}};Sp.AutoEncrypter=sv});var uj=m(u2=>{"use strict";Object.defineProperty(u2,"__esModule",{value:!0});u2.Encrypter=void 0;var kEe=iv(),REe=Lt(),FEe=pi(),aj=z(),$Ee=tc(),ov=class{constructor(e,r,n){if(typeof n.autoEncryption!="object")throw new aj.MongoInvalidArgumentError('Option "autoEncryption" must be specified');this.internalClient=null,this.bypassAutoEncryption=!!n.autoEncryption.bypassAutoEncryption,this.needsConnecting=!1,n.maxPoolSize===0&&n.autoEncryption.keyVaultClient==null?n.autoEncryption.keyVaultClient=e:n.autoEncryption.keyVaultClient==null&&(n.autoEncryption.keyVaultClient=this.getInternalClient(e,r,n)),this.bypassAutoEncryption?n.autoEncryption.metadataClient=void 0:n.maxPoolSize===0?n.autoEncryption.metadataClient=e:n.autoEncryption.metadataClient=this.getInternalClient(e,r,n),n.proxyHost&&(n.autoEncryption.proxyOptions={proxyHost:n.proxyHost,proxyPort:n.proxyPort,proxyUsername:n.proxyUsername,proxyPassword:n.proxyPassword}),this.autoEncrypter=new kEe.AutoEncrypter(e,n.autoEncryption)}getInternalClient(e,r,n){let s=this.internalClient;if(s==null){let i={};for(let o of[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)])["autoEncryption","minPoolSize","servers","caseTranslate","dbName"].includes(o)||Reflect.set(i,o,Reflect.get(n,o));i.minPoolSize=0,s=new $Ee.MongoClient(r,i),this.internalClient=s;for(let o of REe.MONGO_CLIENT_EVENTS)for(let a of e.listeners(o))s.on(o,a);e.on("newListener",(o,a)=>{s?.on(o,a)}),this.needsConnecting=!0}return s}async connectInternalClient(){let e=this.internalClient;this.needsConnecting&&e!=null&&(this.needsConnecting=!1,await e.connect())}async close(e){let r;try{await this.autoEncrypter.close()}catch(s){r=s}let n=this.internalClient;if(n!=null&&e!==n)return await n.close();if(r!=null)throw r}static checkForMongoCrypt(){let e=(0,FEe.getMongoDBClientEncryption)();if("kModuleError"in e)throw new aj.MongoMissingDependencyError("Auto-encryption requested, but the module is not installed. Please add `mongodb-client-encryption` as a dependency of your project",{cause:e.kModuleError,dependencyName:"mongodb-client-encryption"})}};u2.Encrypter=ov});var mv=m(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.SENSITIVE_COMMANDS=ks.CommandFailedEvent=ks.CommandSucceededEvent=ks.CommandStartedEvent=void 0;var dh=Lt(),pj=X(),av=nh(),uv=class{constructor(e,r,n){this.name=dh.COMMAND_STARTED;let s=hv(r),i=pv(s),{address:o,connectionId:a,serviceId:u}=fv(e);ks.SENSITIVE_COMMANDS.has(i)&&(this.commandObj={},this.commandObj[i]=!0),this.address=o,this.connectionId=a,this.serviceId=u,this.requestId=r.requestId,this.databaseName=r.databaseName,this.commandName=i,this.command=dv(i,s,s),this.serverConnectionId=n}get hasServiceId(){return!!this.serviceId}};ks.CommandStartedEvent=uv;var cv=class{constructor(e,r,n,s,i){this.name=dh.COMMAND_SUCCEEDED;let o=hv(r),a=pv(o),{address:u,connectionId:c,serviceId:l}=fv(e);this.address=u,this.connectionId=c,this.serviceId=l,this.requestId=r.requestId,this.commandName=a,this.duration=(0,pj.calculateDurationInMs)(s),this.reply=dv(a,o,LEe(n)),this.serverConnectionId=i,this.databaseName=r.databaseName}get hasServiceId(){return!!this.serviceId}};ks.CommandSucceededEvent=cv;var lv=class{constructor(e,r,n,s,i){this.name=dh.COMMAND_FAILED;let o=hv(r),a=pv(o),{address:u,connectionId:c,serviceId:l}=fv(e);this.address=u,this.connectionId=c,this.serviceId=l,this.requestId=r.requestId,this.commandName=a,this.duration=(0,pj.calculateDurationInMs)(s),this.failure=dv(a,o,n),this.serverConnectionId=i,this.databaseName=r.databaseName}get hasServiceId(){return!!this.serviceId}};ks.CommandFailedEvent=lv;ks.SENSITIVE_COMMANDS=new Set(["authenticate","saslStart","saslContinue","getnonce","createUser","updateUser","copydbgetnonce","copydbsaslstart","copydb"]);var qEe=new Set(["hello",dh.LEGACY_HELLO_COMMAND,dh.LEGACY_HELLO_COMMAND_CAMEL_CASE]),pv=t=>Object.keys(t)[0],jEe=t=>t.ns.split(".")[1],dv=(t,e,r)=>ks.SENSITIVE_COMMANDS.has(t)||qEe.has(t)&&e.speculativeAuthenticate?{}:r,cj={$query:"filter",$orderby:"sort",$hint:"hint",$comment:"comment",$maxScan:"maxScan",$max:"max",$min:"min",$returnKey:"returnKey",$showDiskLoc:"showRecordId",$maxTimeMS:"maxTimeMS",$snapshot:"snapshot"},lj={numberToSkip:"skip",numberToReturn:"batchSize",returnFieldSelector:"projection"};function hv(t){if(t instanceof av.OpMsgRequest){let n={...t.command};return n.ops instanceof av.DocumentSequence&&(n.ops=n.ops.documents),n.nsInfo instanceof av.DocumentSequence&&(n.nsInfo=n.nsInfo.documents),n}if(t.query?.$query){let n;return t.ns==="admin.$cmd"?n=Object.assign({},t.query.$query):(n={find:jEe(t)},Object.keys(cj).forEach(s=>{t.query[s]!=null&&(n[cj[s]]={...t.query[s]})})),Object.keys(lj).forEach(s=>{let i=s;t[i]!=null&&(n[lj[i]]=t[i])}),n}let e={},r={...t};return t.query&&(e={...t.query},r.query=e),t.query?e:r}function LEe(t){return t&&(t.result?t.result:t)}function fv(t){let e;return"id"in t&&(e=t.id),{address:t.address,serviceId:t.serviceId,connectionId:e}}});var hh=m(Op=>{"use strict";Object.defineProperty(Op,"__esModule",{value:!0});Op.ServerDescription=void 0;Op.parseServerType=dj;Op.compareTopologyVersion=hj;var wp=pe(),UEe=z(),Ap=X(),Qt=ts(),VEe=new Set([Qt.ServerType.RSPrimary,Qt.ServerType.Standalone,Qt.ServerType.Mongos,Qt.ServerType.LoadBalancer]),WEe=new Set([Qt.ServerType.RSPrimary,Qt.ServerType.RSSecondary,Qt.ServerType.Mongos,Qt.ServerType.Standalone,Qt.ServerType.LoadBalancer]),yv=class{constructor(e,r,n={}){if(e==null||e==="")throw new UEe.MongoRuntimeError("ServerDescription must be provided with a non-empty address");this.address=typeof e=="string"?Ap.HostAddress.fromString(e).toString():e.toString(),this.type=dj(r,n),this.hosts=r?.hosts?.map(s=>s.toLowerCase())??[],this.passives=r?.passives?.map(s=>s.toLowerCase())??[],this.arbiters=r?.arbiters?.map(s=>s.toLowerCase())??[],this.tags=r?.tags??{},this.minWireVersion=r?.minWireVersion??0,this.maxWireVersion=r?.maxWireVersion??0,this.roundTripTime=n?.roundTripTime??-1,this.minRoundTripTime=n?.minRoundTripTime??0,this.lastUpdateTime=(0,Ap.now)(),this.lastWriteDate=r?.lastWrite?.lastWriteDate??0,this.error=n.error??null,this.error?.stack,this.topologyVersion=this.error?.topologyVersion??r?.topologyVersion??null,this.setName=r?.setName??null,this.setVersion=r?.setVersion??null,this.electionId=r?.electionId??null,this.logicalSessionTimeoutMinutes=r?.logicalSessionTimeoutMinutes??null,this.maxMessageSizeBytes=r?.maxMessageSizeBytes??null,this.maxWriteBatchSize=r?.maxWriteBatchSize??null,this.maxBsonObjectSize=r?.maxBsonObjectSize??null,this.primary=r?.primary??null,this.me=r?.me?.toLowerCase()??null,this.$clusterTime=r?.$clusterTime??null,this.iscryptd=!!r?.iscryptd}get hostAddress(){return Ap.HostAddress.fromString(this.address)}get allHosts(){return this.hosts.concat(this.arbiters).concat(this.passives)}get isReadable(){return this.type===Qt.ServerType.RSSecondary||this.isWritable}get isDataBearing(){return WEe.has(this.type)}get isWritable(){return VEe.has(this.type)}get host(){let e=`:${this.port}`.length;return this.address.slice(0,-e)}get port(){let e=this.address.split(":").pop();return e?Number.parseInt(e,10):27017}equals(e){let r=this.topologyVersion===e?.topologyVersion||hj(this.topologyVersion,e?.topologyVersion)===0,n=this.electionId!=null&&e?.electionId!=null?(0,Ap.compareObjectId)(this.electionId,e.electionId)===0:this.electionId===e?.electionId;return e!=null&&e.iscryptd===this.iscryptd&&(0,Ap.errorStrictEqual)(this.error,e.error)&&this.type===e.type&&this.minWireVersion===e.minWireVersion&&(0,Ap.arrayStrictEqual)(this.hosts,e.hosts)&&zEe(this.tags,e.tags)&&this.setName===e.setName&&this.setVersion===e.setVersion&&n&&this.primary===e.primary&&this.logicalSessionTimeoutMinutes===e.logicalSessionTimeoutMinutes&&r}};Op.ServerDescription=yv;function dj(t,e){return e?.loadBalanced?Qt.ServerType.LoadBalancer:!t||!t.ok?Qt.ServerType.Unknown:t.isreplicaset?Qt.ServerType.RSGhost:t.msg&&t.msg==="isdbgrid"?Qt.ServerType.Mongos:t.setName?t.hidden?Qt.ServerType.RSOther:t.isWritablePrimary?Qt.ServerType.RSPrimary:t.secondary?Qt.ServerType.RSSecondary:t.arbiterOnly?Qt.ServerType.RSArbiter:Qt.ServerType.RSOther:Qt.ServerType.Standalone}function zEe(t,e){let r=Object.keys(t),n=Object.keys(e);return r.length===n.length&&r.every(s=>e[s]===t[s])}function hj(t,e){if(t==null||e==null||!t.processId.equals(e.processId))return-1;let r=typeof t.counter=="bigint"?wp.Long.fromBigInt(t.counter):wp.Long.isLong(t.counter)?t.counter:wp.Long.fromNumber(t.counter),n=typeof e.counter=="bigint"?wp.Long.fromBigInt(e.counter):wp.Long.isLong(e.counter)?e.counter:wp.Long.fromNumber(e.counter);return r.compare(n)}});var fj=m(c2=>{"use strict";Object.defineProperty(c2,"__esModule",{value:!0});c2.StreamDescription=void 0;var KEe=pe(),HEe=ts(),GEe=hh(),JEe=["minWireVersion","maxWireVersion","maxBsonObjectSize","maxMessageSizeBytes","maxWriteBatchSize","logicalSessionTimeoutMinutes"],gv=class{constructor(e,r){this.hello=null,this.address=e,this.type=HEe.ServerType.Unknown,this.minWireVersion=void 0,this.maxWireVersion=void 0,this.maxBsonObjectSize=16777216,this.maxMessageSizeBytes=48e6,this.maxWriteBatchSize=1e5,this.logicalSessionTimeoutMinutes=r?.logicalSessionTimeoutMinutes,this.loadBalanced=!!r?.loadBalanced,this.compressors=r&&r.compressors&&Array.isArray(r.compressors)?r.compressors:[],this.serverConnectionId=null}receiveResponse(e){if(e!=null){this.hello=e,this.type=(0,GEe.parseServerType)(e),"connectionId"in e?this.serverConnectionId=this.parseServerConnectionID(e.connectionId):this.serverConnectionId=null;for(let r of JEe)e[r]!=null&&(this[r]=e[r]),"__nodejs_mock_server__"in e&&(this.__nodejs_mock_server__=e.__nodejs_mock_server__);e.compression&&(this.compressor=this.compressors.filter(r=>e.compression?.includes(r))[0])}}parseServerConnectionID(e){return KEe.Long.isLong(e)?e.toBigInt():BigInt(e)}};c2.StreamDescription=gv});var mj=m(_v=>{"use strict";Object.defineProperty(_v,"__esModule",{value:!0});_v.onData=YEe;var fh=X();function YEe(t,{timeoutContext:e,signal:r}){r?.throwIfAborted();let n=new fh.List,s=new fh.List,i=null,o=!1,a={next(){let h=n.shift();if(h!=null)return Promise.resolve({value:h,done:!1});if(i!=null){let _=Promise.reject(i);return i=null,_}if(o)return d();let{promise:f,resolve:y,reject:g}=(0,fh.promiseWithResolvers)();return s.push({resolve:y,reject:g}),f},return(){return d()},throw(h){return p(h),Promise.resolve({value:void 0,done:!0})},[Symbol.asyncIterator](){return this},async[Symbol.asyncDispose](){await d()}};t.on("data",l),t.on("error",p);let u=(0,fh.addAbortListener)(r,function(){p(this.reason)}),c=e?.timeoutForSocketRead;return c?.throwIfExpired(),c?.then(void 0,p),a;function l(h){let f=s.shift();f!=null?f.resolve({value:h,done:!1}):n.push(h)}function p(h){let f=s.shift();f!=null?f.reject(h):i=h,d()}function d(){t.off("data",l),t.off("error",p),u?.[fh.kDispose](),o=!0,c?.clear();let h={value:void 0,done:o};for(let f of s)f.resolve(h);return Promise.resolve(h)}}});var Sv=m(d2=>{"use strict";Object.defineProperty(d2,"__esModule",{value:!0});d2.TopologyDescription=void 0;var QEe=pe(),p2=Eo(),l2=z(),Ev=X(),Be=ts(),za=hh(),XEe=p2.MIN_SUPPORTED_SERVER_VERSION,ZEe=p2.MAX_SUPPORTED_SERVER_VERSION,yj=p2.MIN_SUPPORTED_WIRE_VERSION,gj=p2.MAX_SUPPORTED_WIRE_VERSION,ebe=new Set([Be.ServerType.Mongos,Be.ServerType.Unknown]),_j=new Set([Be.ServerType.Mongos,Be.ServerType.Standalone]),Ej=new Set([Be.ServerType.RSSecondary,Be.ServerType.RSArbiter,Be.ServerType.RSOther]),bv=class t{constructor(e,r=null,n=null,s=null,i=null,o=null,a=null){a=a??{},this.type=e??Be.TopologyType.Unknown,this.servers=r??new Map,this.stale=!1,this.compatible=!0,this.heartbeatFrequencyMS=a.heartbeatFrequencyMS??0,this.localThresholdMS=a.localThresholdMS??15,this.setName=n??null,this.maxElectionId=i??null,this.maxSetVersion=s??null,this.commonWireVersion=o??0;for(let u of this.servers.values())if(!(u.type===Be.ServerType.Unknown||u.type===Be.ServerType.LoadBalancer)&&(u.minWireVersion>gj&&(this.compatible=!1,this.compatibilityError=`Server at ${u.address} requires wire version ${u.minWireVersion}, but this version of the driver only supports up to ${gj} (MongoDB ${ZEe})`),u.maxWireVersion<yj)){this.compatible=!1,this.compatibilityError=`Server at ${u.address} reports wire version ${u.maxWireVersion}, but this version of the driver requires at least ${yj} (MongoDB ${XEe}).`;break}this.logicalSessionTimeoutMinutes=null;for(let[,u]of this.servers)if(u.isReadable){if(u.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=null;break}if(this.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=u.logicalSessionTimeoutMinutes;continue}this.logicalSessionTimeoutMinutes=Math.min(this.logicalSessionTimeoutMinutes,u.logicalSessionTimeoutMinutes)}}updateFromSrvPollingEvent(e,r=0){let n=e.hostnames(),s=new Set(this.servers.keys()),i=new Set(n),o=new Set;for(let u of s)i.delete(u),n.has(u)||o.add(u);if(i.size===0&&o.size===0)return this;let a=new Map(this.servers);for(let u of o)a.delete(u);if(i.size>0){if(r===0)for(let u of i)a.set(u,new za.ServerDescription(u));else if(a.size<r){let u=(0,Ev.shuffle)(i,r-a.size);for(let c of u)a.set(c,new za.ServerDescription(c))}}return new t(this.type,a,this.setName,this.maxSetVersion,this.maxElectionId,this.commonWireVersion,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}update(e){let r=e.address,{type:n,setName:s,maxSetVersion:i,maxElectionId:o,commonWireVersion:a}=this,u=e.type,c=new Map(this.servers);if(e.maxWireVersion!==0&&(a==null?a=e.maxWireVersion:a=Math.min(a,e.maxWireVersion)),typeof e.setName=="string"&&typeof s=="string"&&e.setName!==s&&(n===Be.TopologyType.Single?e=new za.ServerDescription(r):c.delete(r)),c.set(r,e),n===Be.TopologyType.Single)return new t(Be.TopologyType.Single,c,s,i,o,a,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS});if(n===Be.TopologyType.Unknown&&(u===Be.ServerType.Standalone&&this.servers.size!==1?c.delete(r):n=tbe(u)),n===Be.TopologyType.Sharded&&(ebe.has(u)||c.delete(r)),n===Be.TopologyType.ReplicaSetNoPrimary){if(_j.has(u)&&c.delete(r),u===Be.ServerType.RSPrimary){let l=bj(c,e,s,i,o);n=l[0],s=l[1],i=l[2],o=l[3]}else if(Ej.has(u)){let l=nbe(c,e,s);n=l[0],s=l[1]}}if(n===Be.TopologyType.ReplicaSetWithPrimary)if(_j.has(u))c.delete(r),n=rc(c);else if(u===Be.ServerType.RSPrimary){let l=bj(c,e,s,i,o);n=l[0],s=l[1],i=l[2],o=l[3]}else Ej.has(u)?n=rbe(c,e,s):n=rc(c);return new t(n,c,s,i,o,a,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}get error(){let e=Array.from(this.servers.values()).filter(r=>r.error);return e.length>0?e[0].error:null}get hasKnownServers(){return Array.from(this.servers.values()).some(e=>e.type!==Be.ServerType.Unknown)}get hasDataBearingServers(){return Array.from(this.servers.values()).some(e=>e.isDataBearing)}hasServer(e){return this.servers.has(e)}toJSON(){return QEe.EJSON.serialize(this)}};d2.TopologyDescription=bv;function tbe(t){switch(t){case Be.ServerType.Standalone:return Be.TopologyType.Single;case Be.ServerType.Mongos:return Be.TopologyType.Sharded;case Be.ServerType.RSPrimary:return Be.TopologyType.ReplicaSetWithPrimary;case Be.ServerType.RSOther:case Be.ServerType.RSSecondary:return Be.TopologyType.ReplicaSetNoPrimary;default:return Be.TopologyType.Unknown}}function bj(t,e,r=null,n=null,s=null){let i=(u,c,l)=>`primary marked stale due to electionId/setVersion mismatch: server setVersion: ${u.setVersion}, server electionId: ${u.electionId}, topology setVersion: ${c}, topology electionId: ${l}`;if(r=r||e.setName,r!==e.setName)return t.delete(e.address),[rc(t),r,n,s];if(e.maxWireVersion>=17){let u=(0,Ev.compareObjectId)(s,e.electionId),c=u===0,l=u===-1,p=(n??-1)<=(e.setVersion??-1);if(l||c&&p)s=e.electionId,n=e.setVersion;else return t.set(e.address,new za.ServerDescription(e.address,void 0,{error:new l2.MongoStalePrimaryError(i(e,n,s))})),[rc(t),r,n,s]}else{let u=e.electionId?e.electionId:null;if(e.setVersion&&u){if(n&&s&&(n>e.setVersion||(0,Ev.compareObjectId)(s,u)>0))return t.set(e.address,new za.ServerDescription(e.address,void 0,{error:new l2.MongoStalePrimaryError(i(e,n,s))})),[rc(t),r,n,s];s=e.electionId}e.setVersion!=null&&(n==null||e.setVersion>n)&&(n=e.setVersion)}for(let[u,c]of t)if(c.type===Be.ServerType.RSPrimary&&c.address!==e.address){t.set(u,new za.ServerDescription(c.address,void 0,{error:new l2.MongoStalePrimaryError("primary marked stale due to discovery of newer primary")}));break}e.allHosts.forEach(u=>{t.has(u)||t.set(u,new za.ServerDescription(u))});let o=Array.from(t.keys()),a=e.allHosts;return o.filter(u=>a.indexOf(u)===-1).forEach(u=>{t.delete(u)}),[rc(t),r,n,s]}function rbe(t,e,r=null){if(r==null)throw new l2.MongoRuntimeError('Argument "setName" is required if connected to a replica set');return(r!==e.setName||e.me&&e.address!==e.me)&&t.delete(e.address),rc(t)}function nbe(t,e,r=null){let n=Be.TopologyType.ReplicaSetNoPrimary;return r=r??e.setName,r!==e.setName?(t.delete(e.address),[n,r]):(e.allHosts.forEach(s=>{t.has(s)||t.set(s,new za.ServerDescription(s))}),e.me&&e.address!==e.me&&t.delete(e.address),[n,r])}function rc(t){for(let e of t.values())if(e.type===Be.ServerType.RSPrimary)return Be.TopologyType.ReplicaSetWithPrimary;return Be.TopologyType.ReplicaSetNoPrimary}});var wj=m(h2=>{"use strict";Object.defineProperty(h2,"__esModule",{value:!0});h2.getReadPreference=obe;h2.isSharded=abe;var sbe=z(),wv=sr(),Sj=ts(),ibe=Sv();function obe(t){let e=t?.readPreference??wv.ReadPreference.primary;if(typeof e=="string"&&(e=wv.ReadPreference.fromString(e)),!(e instanceof wv.ReadPreference))throw new sbe.MongoInvalidArgumentError('Option "readPreference" must be a ReadPreference instance');return e}function abe(t){return t==null?!1:t.description&&t.description.type===Sj.ServerType.Mongos?!0:t.description&&t.description instanceof ibe.TopologyDescription?Array.from(t.description.servers.values()).some(r=>r.type===Sj.ServerType.Mongos):!1}});var g2=m(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});To.CryptoConnection=To.SizedMessageTransform=To.Connection=void 0;To.hasSessionSupport=ybe;var ube=require("stream"),vj=require("timers"),cbe=pe(),Ka=Lt(),gt=z(),Aj=Ba(),lbe=is(),pbe=sr(),dbe=ts(),Oj=qd(),Cj=ir(),us=X(),Av=mv(),f2=nh(),hbe=fj(),fbe=ih(),mbe=mj(),mh=ze(),Ov=wj();function ybe(t){return t.description.logicalSessionTimeoutMinutes!=null}function gbe(t,e){if(e.proxyHost)return e.hostAddress.toString();let{remoteAddress:r,remotePort:n}=t;return typeof r=="string"&&typeof n=="number"?us.HostAddress.fromHostPort(r,n).toString():(0,us.uuidV4)().toString("hex")}var m2=class t extends lbe.TypedEventEmitter{static{this.COMMAND_STARTED=Ka.COMMAND_STARTED}static{this.COMMAND_SUCCEEDED=Ka.COMMAND_SUCCEEDED}static{this.COMMAND_FAILED=Ka.COMMAND_FAILED}static{this.CLUSTER_TIME_RECEIVED=Ka.CLUSTER_TIME_RECEIVED}static{this.CLOSE=Ka.CLOSE}static{this.PINNED=Ka.PINNED}static{this.UNPINNED=Ka.UNPINNED}constructor(e,r){super(),this.lastHelloMS=-1,this.helloOk=!1,this.delayedTimeoutId=null,this.closed=!1,this.clusterTime=null,this.error=null,this.dataEvents=null,this.on("error",us.noop),this.socket=e,this.id=r.id,this.address=gbe(e,r),this.socketTimeoutMS=r.socketTimeoutMS??0,this.monitorCommands=r.monitorCommands,this.serverApi=r.serverApi,this.mongoLogger=r.mongoLogger,this.established=!1,this.description=new hbe.StreamDescription(this.address,r),this.generation=r.generation,this.lastUseTime=(0,us.now)(),this.messageStream=this.socket.on("error",this.onSocketError.bind(this)).pipe(new y2({connection:this})).on("error",this.onTransformError.bind(this)),this.socket.on("close",this.onClose.bind(this)),this.socket.on("timeout",this.onTimeout.bind(this)),this.messageStream.pause()}get hello(){return this.description.hello}set hello(e){this.description.receiveResponse(e),Object.freeze(this.description)}get serviceId(){return this.hello?.serviceId}get loadBalanced(){return this.description.loadBalanced}get idleTime(){return(0,us.calculateDurationInMs)(this.lastUseTime)}get hasSessionSupport(){return this.description.logicalSessionTimeoutMinutes!=null}get supportsOpMsg(){return this.description!=null&&(0,us.maxWireVersion)(this)>=6&&!this.description.__nodejs_mock_server__}get shouldEmitAndLogCommand(){return(this.monitorCommands||this.established&&!this.authContext?.reauthenticating&&this.mongoLogger?.willLog(Aj.MongoLoggableComponent.COMMAND,Aj.SeverityLevel.DEBUG))??!1}markAvailable(){this.lastUseTime=(0,us.now)()}onSocketError(e){this.onError(new gt.MongoNetworkError(e.message,{cause:e}))}onTransformError(e){this.onError(e)}onError(e){this.cleanup(e)}onClose(){let e=`connection ${this.id} to ${this.address} closed`;this.cleanup(new gt.MongoNetworkError(e))}onTimeout(){this.delayedTimeoutId=(0,vj.setTimeout)(()=>{let e=`connection ${this.id} to ${this.address} timed out`,r=this.hello==null;this.cleanup(new gt.MongoNetworkTimeoutError(e,{beforeHandshake:r}))},1).unref()}destroy(){if(this.closed)return;this.removeAllListeners(t.PINNED),this.removeAllListeners(t.UNPINNED);let e=`connection ${this.id} to ${this.address} closed`;this.cleanup(new gt.MongoNetworkError(e))}cleanup(e){this.closed||(this.socket.destroy(),this.error=e,this.dataEvents?.throw(e).then(void 0,us.squashError),this.closed=!0,this.emit(t.CLOSE))}prepareCommand(e,r,n){let s={...r},i=(0,Ov.getReadPreference)(n),o=n?.session,a=this.clusterTime;if(this.serverApi){let{version:l,strict:p,deprecationErrors:d}=this.serverApi;s.apiVersion=l,p!=null&&(s.apiStrict=p),d!=null&&(s.apiDeprecationErrors=d)}if(this.hasSessionSupport&&o){o.clusterTime&&a&&o.clusterTime.clusterTime.greaterThan(a.clusterTime)&&(a=o.clusterTime);let l=(0,Oj.applySession)(o,s,n);if(l)throw l}else if(o?.explicit)throw new gt.MongoCompatibilityError("Current topology does not support sessions");a&&(s.$clusterTime=a),this.description.type!==dbe.ServerType.Standalone&&(!(0,Ov.isSharded)(this)&&!this.description.loadBalanced&&this.supportsOpMsg&&n.directConnection===!0&&i?.mode==="primary"?s.$readPreference=pbe.ReadPreference.primaryPreferred.toJSON():(0,Ov.isSharded)(this)&&!this.supportsOpMsg&&i?.mode!=="primary"?s={$query:s,$readPreference:i.toJSON()}:i?.mode!=="primary"&&(s.$readPreference=i.toJSON()));let u={numberToSkip:0,numberToReturn:-1,checkKeys:!1,secondaryOk:i.secondaryOk(),...n};return n.timeoutContext?.addMaxTimeMSToCommand(s,n),this.supportsOpMsg?new f2.OpMsgRequest(e,s,u):new f2.OpQueryRequest(e,s,u)}async*sendWire(e,r,n){this.throwIfAborted();let s=r.socketTimeoutMS??r?.timeoutContext?.getSocketTimeoutMS()??this.socketTimeoutMS;this.socket.setTimeout(s);try{if(await this.writeCommand(e,{agreedCompressor:this.description.compressor??"none",zlibCompressionLevel:this.description.zlibCompressionLevel,timeoutContext:r.timeoutContext,signal:r.signal}),e.moreToCome){yield mh.MongoDBResponse.empty;return}if(this.throwIfAborted(),r.timeoutContext?.csotEnabled()&&r.timeoutContext.minRoundTripTime!=null&&r.timeoutContext.remainingTimeMS<r.timeoutContext.minRoundTripTime)throw new gt.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining");for await(let i of this.readMany(r)){this.socket.setTimeout(0);let o=i.parse();yield(n??mh.MongoDBResponse).make(o),this.throwIfAborted(),this.socket.setTimeout(s)}}finally{this.socket.setTimeout(0)}}async*sendCommand(e,r,n,s){n?.signal?.throwIfAborted();let i=this.prepareCommand(e.db,r,n),o=0;this.shouldEmitAndLogCommand&&(o=(0,us.now)(),this.emitAndLogCommand(this.monitorCommands,t.COMMAND_STARTED,i.databaseName,this.established,new Av.CommandStartedEvent(this,i,this.description.serverConnectionId)));let a=n.documentsReturnedIn==null||!n.raw?n:{...n,raw:!1,fieldsAsRaw:{[n.documentsReturnedIn]:!0}},u,c;try{this.throwIfAborted();for await(u of this.sendWire(i,n,s)){if(c=void 0,n.session!=null&&(0,Oj.updateSessionFromResponse)(n.session,u),u.$clusterTime&&(this.clusterTime=u.$clusterTime,this.emit(t.CLUSTER_TIME_RECEIVED,u.$clusterTime)),u.ok===0)throw n.timeoutContext?.csotEnabled()&&u.isMaxTimeExpiredError?new gt.MongoOperationTimeoutError("Server reported a timeout error",{cause:new gt.MongoServerError(c??=u.toObject(a))}):new gt.MongoServerError(c??=u.toObject(a));this.shouldEmitAndLogCommand&&this.emitAndLogCommand(this.monitorCommands,t.COMMAND_SUCCEEDED,i.databaseName,this.established,new Av.CommandSucceededEvent(this,i,i.moreToCome?{ok:1}:c??=u.toObject(a),o,this.description.serverConnectionId)),s==null?yield c??=u.toObject(a):yield u,this.throwIfAborted()}}catch(l){throw this.shouldEmitAndLogCommand&&this.emitAndLogCommand(this.monitorCommands,t.COMMAND_FAILED,i.databaseName,this.established,new Av.CommandFailedEvent(this,i,l,o,this.description.serverConnectionId)),l}}async command(e,r,n={},s){this.throwIfAborted(),n.signal?.throwIfAborted();for await(let i of this.sendCommand(e,r,n,s)){if(n.timeoutContext?.csotEnabled()){if(mh.MongoDBResponse.is(i)){if(i.isMaxTimeExpiredError)throw new gt.MongoOperationTimeoutError("Server reported a timeout error",{cause:new gt.MongoServerError(i.toObject())})}else if(Array.isArray(i?.writeErrors)&&i.writeErrors.some(o=>o?.code===gt.MONGODB_ERROR_CODES.MaxTimeMSExpired)||i?.writeConcernError?.code===gt.MONGODB_ERROR_CODES.MaxTimeMSExpired)throw new gt.MongoOperationTimeoutError("Server reported a timeout error",{cause:new gt.MongoServerError(i)})}return i}throw new gt.MongoUnexpectedServerResponseError("Unable to get response from server")}exhaustCommand(e,r,n,s){(async()=>{this.throwIfAborted();for await(let o of this.sendCommand(e,r,n))s(void 0,o),this.throwIfAborted();throw new gt.MongoUnexpectedServerResponseError("Server ended moreToCome unexpectedly")})().then(void 0,s)}throwIfAborted(){if(this.error)throw this.error}async writeCommand(e,r){let n=r.agreedCompressor==="none"||!f2.OpCompressedRequest.canCompress(e)?e:new f2.OpCompressedRequest(e,{agreedCompressor:r.agreedCompressor??"none",zlibCompressionLevel:r.zlibCompressionLevel??0}),s=Buffer.concat(await n.toBin());if(r.timeoutContext?.csotEnabled()&&r.timeoutContext.minRoundTripTime!=null&&r.timeoutContext.remainingTimeMS<r.timeoutContext.minRoundTripTime)throw new gt.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining");try{if(this.socket.write(s))return}catch(u){let c=new gt.MongoNetworkError("unexpected error writing to socket",{cause:u});throw this.onError(c),c}let i=(0,us.once)(this.socket,"drain",r),o=r?.timeoutContext?.timeoutForSocketWrite,a=o?Promise.race([i,o]):i;try{return await a}catch(u){if(Cj.TimeoutError.is(u)){let c=new gt.MongoOperationTimeoutError("Timed out at socket write");throw this.onError(c),c}else u===r.signal?.reason&&this.onError(u);throw u}finally{o?.clear()}}async*readMany(e){try{this.dataEvents=(0,mbe.onData)(this.messageStream,e),this.messageStream.resume();for await(let r of this.dataEvents){let n=await(0,fbe.decompressResponse)(r);if(yield n,!n.moreToCome)return}}catch(r){if(Cj.TimeoutError.is(r)){let n=new gt.MongoOperationTimeoutError(`Timed out during socket read (${r.duration}ms)`);throw this.dataEvents=null,this.onError(n),n}else r===e.signal?.reason&&this.onError(r);throw r}finally{this.dataEvents=null,this.messageStream.pause()}}};To.Connection=m2;var y2=class extends ube.Transform{constructor({connection:e}){super({writableObjectMode:!1,readableObjectMode:!0}),this.bufferPool=new us.BufferPool,this.connection=e}_transform(e,r,n){for(this.connection.delayedTimeoutId!=null&&((0,vj.clearTimeout)(this.connection.delayedTimeoutId),this.connection.delayedTimeoutId=null),this.bufferPool.append(e);this.bufferPool.length;){let s=this.bufferPool.getInt32();if(s==null)break;if(s<0)return n(new gt.MongoParseError(`Message size cannot be negative: ${s}`));if(s>this.bufferPool.length)break;let i=this.bufferPool.read(s);if(!this.push(i))return n(new gt.MongoRuntimeError("SizedMessageTransform does not support backpressure"))}n()}};To.SizedMessageTransform=y2;var Cv=class extends m2{constructor(e,r){super(e,r),this.autoEncrypter=r.autoEncrypter}async command(e,r,n,s){let{autoEncrypter:i}=this;if(!i)throw new gt.MongoRuntimeError("No AutoEncrypter available for encryption");if((0,us.maxWireVersion)(this)===0)return await super.command(e,r,n,s);let a=r.find||r.findAndModify?r.sort:null,u=r.createIndexes?r.indexes.map(h=>h.key):null,c=await i.encrypt(e.toString(),r,n);if(a!=null&&(r.find||r.findAndModify)&&(c.sort=a),u!=null&&r.createIndexes)for(let[h,f]of u.entries())c.indexes[h].key=f;let l=await super.command(e,c,n,s??mh.MongoDBResponse),p=await i.decrypt(l.toBytes(),n),d=s?.make(p)??(0,cbe.deserialize)(p,n);return i[Ka.kDecorateResult]&&(s==null?(0,us.decorateDecryptionResult)(d,l.toObject(),!0):d instanceof mh.CursorResponse&&(d.encryptedResponse=l)),d}};To.CryptoConnection=Cv});var Tv=m(cs=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});cs.LEGAL_TCP_SOCKET_OPTIONS=cs.LEGAL_TLS_SOCKET_OPTIONS=void 0;cs.connect=Sbe;cs.makeConnection=Mj;cs.performInitialHandshake=Pj;cs.prepareHandshakeDocument=Bj;cs.makeSocket=E2;var Tj=require("net"),_be=require("tls"),Dj=Lt(),Ebe=pi(),Ot=z(),vv=X(),bbe=$a(),_2=zi(),xj=g2(),Cp=Eo();async function Sbe(t){let e=null;try{let r=await E2(t);return e=Mj(t,r),await Pj(e,t),e}catch(r){throw e?.destroy(),r}}function Mj(t,e){let r=t.connectionType??xj.Connection;return t.autoEncrypter&&(r=xj.CryptoConnection),new r(e,t)}function wbe(t,e){let r=Number(t.maxWireVersion),n=Number(t.minWireVersion),s=!Number.isNaN(r)&&r>=Cp.MIN_SUPPORTED_WIRE_VERSION,i=!Number.isNaN(n)&&n<=Cp.MAX_SUPPORTED_WIRE_VERSION;if(s){if(i)return null;let a=`Server at ${e.hostAddress} reports minimum wire version ${JSON.stringify(t.minWireVersion)}, but this version of the Node.js Driver requires at most ${Cp.MAX_SUPPORTED_WIRE_VERSION} (MongoDB ${Cp.MAX_SUPPORTED_SERVER_VERSION})`;return new Ot.MongoCompatibilityError(a)}let o=`Server at ${e.hostAddress} reports maximum wire version ${JSON.stringify(t.maxWireVersion)??0}, but this version of the Node.js Driver requires at least ${Cp.MIN_SUPPORTED_WIRE_VERSION} (MongoDB ${Cp.MIN_SUPPORTED_SERVER_VERSION})`;return new Ot.MongoCompatibilityError(o)}async function Pj(t,e){let r=e.credentials;if(r&&r.mechanism!==_2.AuthMechanism.MONGODB_DEFAULT&&!e.authProviders.getOrCreateProvider(r.mechanism,r.mechanismProperties))throw new Ot.MongoInvalidArgumentError(`AuthMechanism '${r.mechanism}' not supported`);let n=new bbe.AuthContext(t,r,e);t.authContext=n;let s=await Bj(n),i={...e,raw:!1};typeof e.connectTimeoutMS=="number"&&(i.socketTimeoutMS=e.connectTimeoutMS);let o=new Date().getTime(),a=await c(s,i);"isWritablePrimary"in a||(a.isWritablePrimary=a[Dj.LEGACY_HELLO_COMMAND]),a.helloOk&&(t.helloOk=!0);let u=wbe(a,e);if(u)throw u;if(e.loadBalanced&&!a.serviceId)throw new Ot.MongoCompatibilityError("Driver attempted to initialize in load balancing mode, but the server does not support this mode.");if(t.hello=a,t.lastHelloMS=new Date().getTime()-o,!a.arbiterOnly&&r){n.response=a;let l=r.resolveAuthMechanism(a),p=e.authProviders.getOrCreateProvider(l.mechanism,l.mechanismProperties);if(!p)throw new Ot.MongoInvalidArgumentError(`No AuthProvider for ${l.mechanism} defined.`);try{await p.auth(n)}catch(d){throw d instanceof Ot.MongoError&&(d.addErrorLabel(Ot.MongoErrorLabel.HandshakeError),(0,Ot.needsRetryableWriteLabel)(d,a.maxWireVersion,t.description.type)&&d.addErrorLabel(Ot.MongoErrorLabel.RetryableWriteError)),d}}t.established=!0;async function c(l,p){try{return await t.command((0,vv.ns)("admin.$cmd"),l,p)}catch(d){throw d instanceof Ot.MongoError&&d.addErrorLabel(Ot.MongoErrorLabel.HandshakeError),d}}}async function Bj(t){let e=t.options,r=e.compressors?e.compressors:[],{serverApi:n}=t.connection,s=await e.metadata,i={[n?.version||e.loadBalanced===!0?"hello":Dj.LEGACY_HELLO_COMMAND]:1,helloOk:!0,client:s,compression:r};e.loadBalanced===!0&&(i.loadBalanced=!0);let o=t.credentials;if(o){if(o.mechanism===_2.AuthMechanism.MONGODB_DEFAULT&&o.username){i.saslSupportedMechs=`${o.source}.${o.username}`;let u=t.options.authProviders.getOrCreateProvider(_2.AuthMechanism.MONGODB_SCRAM_SHA256,o.mechanismProperties);if(!u)throw new Ot.MongoInvalidArgumentError(`No AuthProvider for ${_2.AuthMechanism.MONGODB_SCRAM_SHA256} defined.`);return await u.prepare(i,t)}let a=t.options.authProviders.getOrCreateProvider(o.mechanism,o.mechanismProperties);if(!a)throw new Ot.MongoInvalidArgumentError(`No AuthProvider for ${o.mechanism} defined.`);return await a.prepare(i,t)}return i}cs.LEGAL_TLS_SOCKET_OPTIONS=["allowPartialTrustChain","ALPNProtocols","ca","cert","checkServerIdentity","ciphers","crl","ecdhCurve","key","minDHSize","passphrase","pfx","rejectUnauthorized","secureContext","secureProtocol","servername","session"];cs.LEGAL_TCP_SOCKET_OPTIONS=["autoSelectFamily","autoSelectFamilyAttemptTimeout","keepAliveInitialDelay","family","hints","localAddress","localPort","lookup"];function xv(t){let e=t.hostAddress;if(!e)throw new Ot.MongoInvalidArgumentError('Option "hostAddress" is required');let r={};for(let n of cs.LEGAL_TCP_SOCKET_OPTIONS)t[n]!=null&&(r[n]=t[n]);if(r.keepAliveInitialDelay??=12e4,r.keepAlive=!0,r.noDelay=t.noDelay??!0,typeof e.socketPath=="string")return r.path=e.socketPath,r;if(typeof e.host=="string")return r.host=e.host,r.port=e.port,r;throw new Ot.MongoRuntimeError(`Unexpected HostAddress ${JSON.stringify(e)}`)}function Abe(t){let e=xv(t);for(let r of cs.LEGAL_TLS_SOCKET_OPTIONS)t[r]!=null&&(e[r]=t[r]);return t.existingSocket&&(e.socket=t.existingSocket),e.servername==null&&e.host&&!Tj.isIP(e.host)&&(e.servername=e.host),e}async function E2(t){let e=t.tls??!1,r=t.connectTimeoutMS??3e4,n=t.existingSocket,s;if(t.proxyHost!=null)return await Cbe({...t,connectTimeoutMS:r});if(e){let c=_be.connect(Abe(t));typeof c.disableRenegotiation=="function"&&c.disableRenegotiation(),s=c}else n?s=n:s=Tj.createConnection(xv(t));s.setTimeout(r);let i=null,{promise:o,resolve:a,reject:u}=(0,vv.promiseWithResolvers)();if(n)a(s);else{let c=performance.now(),l=e?"secureConnect":"connect";s.once(l,()=>a(s)).once("error",p=>u(new Ot.MongoNetworkError(Ot.MongoError.buildErrorMessage(p),{cause:p}))).once("timeout",()=>{u(new Ot.MongoNetworkTimeoutError(`Socket '${l}' timed out after ${performance.now()-c|0}ms (connectTimeoutMS: ${r})`))}).once("close",()=>u(new Ot.MongoNetworkError(`Socket closed after ${performance.now()-c|0} during connection establishment`))),t.cancellationToken!=null&&(i=()=>u(new Ot.MongoNetworkError(`Socket connection establishment was cancelled after ${performance.now()-c|0}`)),t.cancellationToken.once("cancel",i))}try{return s=await o,s}catch(c){throw s.destroy(),c}finally{s.setTimeout(0),i!=null&&t.cancellationToken?.removeListener("cancel",i)}}var yh=null;function Obe(){if(yh==null){let t=(0,Ebe.getSocks)();if("kModuleError"in t)throw t.kModuleError;yh=t}return yh}async function Cbe(t){let e=vv.HostAddress.fromHostPort(t.proxyHost??"",t.proxyPort??1080),r=await E2({...t,hostAddress:e,tls:!1,proxyHost:void 0}),n=xv(t);if(typeof n.host!="string"||typeof n.port!="number")throw new Ot.MongoInvalidArgumentError("Can only make Socks5 connections to TCP hosts");yh??=Obe();let s;try{s=(await yh.SocksClient.createConnection({existing_socket:r,timeout:t.connectTimeoutMS,command:"connect",destination:{host:n.host,port:n.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:t.proxyUsername||void 0,password:t.proxyPassword||void 0}})).socket}catch(i){throw new Ot.MongoNetworkError(Ot.MongoError.buildErrorMessage(i),{cause:i})}return await E2({...t,existingSocket:s,proxyHost:void 0})}});var b2=m(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.ServerHeartbeatFailedEvent=Xt.ServerHeartbeatSucceededEvent=Xt.ServerHeartbeatStartedEvent=Xt.TopologyClosedEvent=Xt.TopologyOpeningEvent=Xt.TopologyDescriptionChangedEvent=Xt.ServerClosedEvent=Xt.ServerOpeningEvent=Xt.ServerDescriptionChangedEvent=void 0;var Do=Lt(),Dv=class{constructor(e,r,n,s){this.name=Do.SERVER_DESCRIPTION_CHANGED,this.topologyId=e,this.address=r,this.previousDescription=n,this.newDescription=s}};Xt.ServerDescriptionChangedEvent=Dv;var Mv=class{constructor(e,r){this.name=Do.SERVER_OPENING,this.topologyId=e,this.address=r}};Xt.ServerOpeningEvent=Mv;var Pv=class{constructor(e,r){this.name=Do.SERVER_CLOSED,this.topologyId=e,this.address=r}};Xt.ServerClosedEvent=Pv;var Bv=class{constructor(e,r,n){this.name=Do.TOPOLOGY_DESCRIPTION_CHANGED,this.topologyId=e,this.previousDescription=r,this.newDescription=n}};Xt.TopologyDescriptionChangedEvent=Bv;var Iv=class{constructor(e){this.name=Do.TOPOLOGY_OPENING,this.topologyId=e}};Xt.TopologyOpeningEvent=Iv;var Nv=class{constructor(e){this.name=Do.TOPOLOGY_CLOSED,this.topologyId=e}};Xt.TopologyClosedEvent=Nv;var kv=class{constructor(e,r){this.name=Do.SERVER_HEARTBEAT_STARTED,this.connectionId=e,this.awaited=r}};Xt.ServerHeartbeatStartedEvent=kv;var Rv=class{constructor(e,r,n,s){this.name=Do.SERVER_HEARTBEAT_SUCCEEDED,this.connectionId=e,this.duration=r,this.reply=n??{},this.awaited=s}};Xt.ServerHeartbeatSucceededEvent=Rv;var Fv=class{constructor(e,r,n,s){this.name=Do.SERVER_HEARTBEAT_FAILED,this.connectionId=e,this.duration=r,this.failure=n,this.awaited=s}};Xt.ServerHeartbeatFailedEvent=Fv});var Yv=m(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.ConnectionPoolClearedEvent=ut.ConnectionCheckedInEvent=ut.ConnectionCheckedOutEvent=ut.ConnectionCheckOutFailedEvent=ut.ConnectionCheckOutStartedEvent=ut.ConnectionClosedEvent=ut.ConnectionReadyEvent=ut.ConnectionCreatedEvent=ut.ConnectionPoolClosedEvent=ut.ConnectionPoolReadyEvent=ut.ConnectionPoolCreatedEvent=ut.ConnectionPoolMonitoringEvent=void 0;var mi=Lt(),Jv=X(),Nn=class{constructor(e){this.time=new Date,this.address=e.address}};ut.ConnectionPoolMonitoringEvent=Nn;var $v=class extends Nn{constructor(e){super(e),this.name=mi.CONNECTION_POOL_CREATED;let{maxConnecting:r,maxPoolSize:n,minPoolSize:s,maxIdleTimeMS:i,waitQueueTimeoutMS:o}=e.options;this.options={maxConnecting:r,maxPoolSize:n,minPoolSize:s,maxIdleTimeMS:i,waitQueueTimeoutMS:o}}};ut.ConnectionPoolCreatedEvent=$v;var qv=class extends Nn{constructor(e){super(e),this.name=mi.CONNECTION_POOL_READY}};ut.ConnectionPoolReadyEvent=qv;var jv=class extends Nn{constructor(e){super(e),this.name=mi.CONNECTION_POOL_CLOSED}};ut.ConnectionPoolClosedEvent=jv;var Lv=class extends Nn{constructor(e,r){super(e),this.name=mi.CONNECTION_CREATED,this.connectionId=r.id}};ut.ConnectionCreatedEvent=Lv;var Uv=class extends Nn{constructor(e,r,n){super(e),this.name=mi.CONNECTION_READY,this.durationMS=(0,Jv.now)()-n,this.connectionId=r.id}};ut.ConnectionReadyEvent=Uv;var Vv=class extends Nn{constructor(e,r,n,s){super(e),this.name=mi.CONNECTION_CLOSED,this.connectionId=r.id,this.reason=n,this.serviceId=r.serviceId,this.error=s??null}};ut.ConnectionClosedEvent=Vv;var Wv=class extends Nn{constructor(e){super(e),this.name=mi.CONNECTION_CHECK_OUT_STARTED}};ut.ConnectionCheckOutStartedEvent=Wv;var zv=class extends Nn{constructor(e,r,n,s){super(e),this.name=mi.CONNECTION_CHECK_OUT_FAILED,this.durationMS=(0,Jv.now)()-n,this.reason=r,this.error=s}};ut.ConnectionCheckOutFailedEvent=zv;var Kv=class extends Nn{constructor(e,r,n){super(e),this.name=mi.CONNECTION_CHECKED_OUT,this.durationMS=(0,Jv.now)()-n,this.connectionId=r.id}};ut.ConnectionCheckedOutEvent=Kv;var Hv=class extends Nn{constructor(e,r){super(e),this.name=mi.CONNECTION_CHECKED_IN,this.connectionId=r.id}};ut.ConnectionCheckedInEvent=Hv;var Gv=class extends Nn{constructor(e,r={}){super(e),this.name=mi.CONNECTION_POOL_CLEARED,this.serviceId=r.serviceId,this.interruptInUseConnections=r.interruptInUseConnections}};ut.ConnectionPoolClearedEvent=Gv});var e9=m(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.WaitQueueTimeoutError=Ji.PoolClearedOnNetworkError=Ji.PoolClearedError=Ji.PoolClosedError=void 0;var S2=z(),Qv=class extends S2.MongoDriverError{constructor(e){super("Attempted to check out a connection from closed connection pool"),this.address=e.address}get name(){return"MongoPoolClosedError"}};Ji.PoolClosedError=Qv;var w2=class extends S2.MongoNetworkError{constructor(e,r){let n=r||`Connection pool for ${e.address} was cleared because another operation failed with: "${e.serverError?.message}"`;super(n,e.serverError?{cause:e.serverError}:void 0),this.address=e.address,this.addErrorLabel(S2.MongoErrorLabel.PoolRequestedRetry)}get name(){return"MongoPoolClearedError"}};Ji.PoolClearedError=w2;var Xv=class extends w2{constructor(e){super(e,`Connection to ${e.address} interrupted due to server monitor timeout`)}get name(){return"PoolClearedOnNetworkError"}};Ji.PoolClearedOnNetworkError=Xv;var Zv=class extends S2.MongoDriverError{constructor(e,r){super(e),this.address=r}get name(){return"MongoWaitQueueTimeoutError"}};Ji.WaitQueueTimeoutError=Zv});var Nj=m(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.ConnectionPool=kr.PoolState=void 0;var vp=require("timers"),Rs=Lt(),yi=z(),Ij=is(),vbe=ir(),Mo=X(),xbe=Tv(),A2=g2(),Nr=Yv(),xp=e9(),Tbe=i4();kr.PoolState=Object.freeze({paused:"paused",ready:"ready",closed:"closed"});var t9=class t extends Ij.TypedEventEmitter{static{this.CONNECTION_POOL_CREATED=Rs.CONNECTION_POOL_CREATED}static{this.CONNECTION_POOL_CLOSED=Rs.CONNECTION_POOL_CLOSED}static{this.CONNECTION_POOL_CLEARED=Rs.CONNECTION_POOL_CLEARED}static{this.CONNECTION_POOL_READY=Rs.CONNECTION_POOL_READY}static{this.CONNECTION_CREATED=Rs.CONNECTION_CREATED}static{this.CONNECTION_READY=Rs.CONNECTION_READY}static{this.CONNECTION_CLOSED=Rs.CONNECTION_CLOSED}static{this.CONNECTION_CHECK_OUT_STARTED=Rs.CONNECTION_CHECK_OUT_STARTED}static{this.CONNECTION_CHECK_OUT_FAILED=Rs.CONNECTION_CHECK_OUT_FAILED}static{this.CONNECTION_CHECKED_OUT=Rs.CONNECTION_CHECKED_OUT}static{this.CONNECTION_CHECKED_IN=Rs.CONNECTION_CHECKED_IN}constructor(e,r){if(super(),this.on("error",Mo.noop),this.options=Object.freeze({connectionType:A2.Connection,...r,maxPoolSize:r.maxPoolSize??100,minPoolSize:r.minPoolSize??0,maxConnecting:r.maxConnecting??2,maxIdleTimeMS:r.maxIdleTimeMS??0,waitQueueTimeoutMS:r.waitQueueTimeoutMS??0,minPoolSizeCheckFrequencyMS:r.minPoolSizeCheckFrequencyMS??100,autoEncrypter:r.autoEncrypter}),this.options.minPoolSize>this.options.maxPoolSize)throw new yi.MongoInvalidArgumentError("Connection pool minimum size must not be greater than maximum pool size");this.poolState=kr.PoolState.paused,this.server=e,this.connections=new Mo.List,this.pending=0,this.checkedOut=new Set,this.minPoolSizeTimer=void 0,this.generation=0,this.serviceGenerations=new Map,this.connectionCounter=(0,Mo.makeCounter)(1),this.cancellationToken=new Ij.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.waitQueue=new Mo.List,this.metrics=new Tbe.ConnectionPoolMetrics,this.processingWaitQueue=!1,this.mongoLogger=this.server.topology.client?.mongoLogger,this.component="connection",process.nextTick(()=>{this.emitAndLog(t.CONNECTION_POOL_CREATED,new Nr.ConnectionPoolCreatedEvent(this))})}get address(){return this.options.hostAddress.toString()}get closed(){return this.poolState===kr.PoolState.closed}get totalConnectionCount(){return this.availableConnectionCount+this.pendingConnectionCount+this.currentCheckedOutCount}get availableConnectionCount(){return this.connections.length}get pendingConnectionCount(){return this.pending}get currentCheckedOutCount(){return this.checkedOut.size}get waitQueueSize(){return this.waitQueue.length}get loadBalanced(){return this.options.loadBalanced}get serverError(){return this.server.description.error}get checkedOutConnections(){return this.checkedOut}waitQueueErrorMetrics(){return this.metrics.info(this.options.maxPoolSize)}ready(){this.poolState===kr.PoolState.paused&&(this.poolState=kr.PoolState.ready,this.emitAndLog(t.CONNECTION_POOL_READY,new Nr.ConnectionPoolReadyEvent(this)),(0,vp.clearTimeout)(this.minPoolSizeTimer),this.ensureMinPoolSize())}async checkOut(e){let r=(0,Mo.now)();this.emitAndLog(t.CONNECTION_CHECK_OUT_STARTED,new Nr.ConnectionCheckOutStartedEvent(this));let{promise:n,resolve:s,reject:i}=(0,Mo.promiseWithResolvers)(),o=e.timeoutContext.connectionCheckoutTimeout,a={resolve:s,reject:i,cancelled:!1,checkoutTime:r},u=(0,Mo.addAbortListener)(e.signal,function(){a.cancelled=!0,i(this.reason)});this.waitQueue.push(a),process.nextTick(()=>this.processWaitQueue());try{return o?.throwIfExpired(),await(o?Promise.race([n,o]):n)}catch(c){if(vbe.TimeoutError.is(c)){o?.clear(),a.cancelled=!0,this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new Nr.ConnectionCheckOutFailedEvent(this,"timeout",a.checkoutTime));let l=new xp.WaitQueueTimeoutError(this.loadBalanced?this.waitQueueErrorMetrics():"Timed out while checking out a connection from connection pool",this.address);throw e.timeoutContext.csotEnabled()?new yi.MongoOperationTimeoutError("Timed out during connection checkout",{cause:l}):l}throw c}finally{u?.[Mo.kDispose](),o?.clear()}}checkIn(e){if(!this.checkedOut.has(e))return;let r=this.closed,n=this.connectionIsStale(e),s=!!(r||n||e.closed);if(s||(e.markAvailable(),this.connections.unshift(e)),this.checkedOut.delete(e),this.emitAndLog(t.CONNECTION_CHECKED_IN,new Nr.ConnectionCheckedInEvent(this,e)),s){let i=e.closed?"error":r?"poolClosed":"stale";this.destroyConnection(e,i)}process.nextTick(()=>this.processWaitQueue())}clear(e={}){if(this.closed)return;if(this.loadBalanced){let{serviceId:i}=e;if(!i)throw new yi.MongoRuntimeError("ConnectionPool.clear() called in load balanced mode with no serviceId.");let o=i.toHexString(),a=this.serviceGenerations.get(o);if(a==null)throw new yi.MongoRuntimeError("Service generations are required in load balancer mode.");this.serviceGenerations.set(o,a+1),this.emitAndLog(t.CONNECTION_POOL_CLEARED,new Nr.ConnectionPoolClearedEvent(this,{serviceId:i}));return}let r=e.interruptInUseConnections??!1,n=this.generation;this.generation+=1;let s=this.poolState===kr.PoolState.paused;this.poolState=kr.PoolState.paused,this.clearMinPoolSizeTimer(),s||this.emitAndLog(t.CONNECTION_POOL_CLEARED,new Nr.ConnectionPoolClearedEvent(this,{interruptInUseConnections:r})),r&&process.nextTick(()=>this.interruptInUseConnections(n)),this.processWaitQueue()}interruptInUseConnections(e){for(let r of this.checkedOut)r.generation<=e&&r.onError(new xp.PoolClearedOnNetworkError(this))}closeCheckedOutConnections(){for(let e of this.checkedOut)e.onError(new yi.MongoClientClosedError)}close(){if(!this.closed){this.cancellationToken.emit("cancel"),typeof this.connectionCounter.return=="function"&&this.connectionCounter.return(void 0),this.poolState=kr.PoolState.closed,this.clearMinPoolSizeTimer(),this.processWaitQueue();for(let e of this.connections)this.emitAndLog(t.CONNECTION_CLOSED,new Nr.ConnectionClosedEvent(this,e,"poolClosed")),e.destroy();this.connections.clear(),this.emitAndLog(t.CONNECTION_POOL_CLOSED,new Nr.ConnectionPoolClosedEvent(this))}}async reauthenticate(e){let r=e.authContext;if(!r)throw new yi.MongoRuntimeError("No auth context found on connection.");let n=r.credentials;if(!n)throw new yi.MongoMissingCredentialsError("Connection is missing credentials when asked to reauthenticate");let s=n.resolveAuthMechanism(e.hello),i=this.server.topology.client.s.authProviders.getOrCreateProvider(s.mechanism,s.mechanismProperties);if(!i)throw new yi.MongoMissingCredentialsError(`Reauthenticate failed due to no auth provider for ${n.mechanism}`);await i.reauth(r)}clearMinPoolSizeTimer(){let e=this.minPoolSizeTimer;e&&(0,vp.clearTimeout)(e)}destroyConnection(e,r){this.emitAndLog(t.CONNECTION_CLOSED,new Nr.ConnectionClosedEvent(this,e,r)),e.destroy()}connectionIsStale(e){let r=e.serviceId;if(this.loadBalanced&&r){let n=r.toHexString(),s=this.serviceGenerations.get(n);return e.generation!==s}return e.generation!==this.generation}connectionIsIdle(e){return!!(this.options.maxIdleTimeMS&&e.idleTime>this.options.maxIdleTimeMS)}destroyConnectionIfPerished(e){let r=this.connectionIsStale(e),n=this.connectionIsIdle(e);if(!r&&!n&&!e.closed)return!1;let s=e.closed?"error":r?"stale":"idle";return this.destroyConnection(e,s),!0}createConnection(e){let r={...this.options,id:this.connectionCounter.next().value,generation:this.generation,cancellationToken:this.cancellationToken,mongoLogger:this.mongoLogger,authProviders:this.server.topology.client.s.authProviders,metadata:this.server.topology.client.options.metadata};this.pending++;let n=(0,Mo.now)();this.emitAndLog(t.CONNECTION_CREATED,new Nr.ConnectionCreatedEvent(this,{id:r.id})),(0,xbe.connect)(r).then(s=>{if(this.poolState!==kr.PoolState.ready){this.pending--,s.destroy(),e(this.closed?new xp.PoolClosedError(this):new xp.PoolClearedError(this));return}for(let i of[...Rs.APM_EVENTS,A2.Connection.CLUSTER_TIME_RECEIVED])s.on(i,o=>this.emit(i,o));if(this.loadBalanced){s.on(A2.Connection.PINNED,o=>this.metrics.markPinned(o)),s.on(A2.Connection.UNPINNED,o=>this.metrics.markUnpinned(o));let i=s.serviceId;if(i){let o,a=i.toHexString();(o=this.serviceGenerations.get(a))?s.generation=o:(this.serviceGenerations.set(a,0),s.generation=0)}}s.markAvailable(),this.emitAndLog(t.CONNECTION_READY,new Nr.ConnectionReadyEvent(this,s,n)),this.pending--,e(void 0,s)},s=>{this.pending--,this.server.handleError(s),this.emitAndLog(t.CONNECTION_CLOSED,new Nr.ConnectionClosedEvent(this,{id:r.id,serviceId:void 0},"error",s)),(s instanceof yi.MongoNetworkError||s instanceof yi.MongoServerError)&&(s.connectionGeneration=r.generation),e(s??new yi.MongoRuntimeError("Connection creation failed without error"))})}ensureMinPoolSize(){let e=this.options.minPoolSize;this.poolState===kr.PoolState.ready&&(this.connections.prune(r=>this.destroyConnectionIfPerished(r)),this.totalConnectionCount<e&&this.pendingConnectionCount<this.options.maxConnecting?this.createConnection((r,n)=>{!r&&n&&(this.connections.push(n),process.nextTick(()=>this.processWaitQueue())),this.poolState===kr.PoolState.ready&&((0,vp.clearTimeout)(this.minPoolSizeTimer),this.minPoolSizeTimer=(0,vp.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS))}):((0,vp.clearTimeout)(this.minPoolSizeTimer),this.minPoolSizeTimer=(0,vp.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)))}processWaitQueue(){if(this.processingWaitQueue)return;for(this.processingWaitQueue=!0;this.waitQueueSize;){let n=this.waitQueue.first();if(!n){this.waitQueue.shift();continue}if(n.cancelled){this.waitQueue.shift();continue}if(this.poolState!==kr.PoolState.ready){let i=this.closed?"poolClosed":"connectionError",o=this.closed?new xp.PoolClosedError(this):new xp.PoolClearedError(this);this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new Nr.ConnectionCheckOutFailedEvent(this,i,n.checkoutTime,o)),this.waitQueue.shift(),n.reject(o);continue}if(!this.availableConnectionCount)break;let s=this.connections.shift();if(!s)break;this.destroyConnectionIfPerished(s)||(this.checkedOut.add(s),this.emitAndLog(t.CONNECTION_CHECKED_OUT,new Nr.ConnectionCheckedOutEvent(this,s,n.checkoutTime)),this.waitQueue.shift(),n.resolve(s))}let{maxPoolSize:e,maxConnecting:r}=this.options;for(;this.waitQueueSize>0&&this.pendingConnectionCount<r&&(e===0||this.totalConnectionCount<e);){let n=this.waitQueue.shift();!n||n.cancelled||this.createConnection((s,i)=>{n.cancelled?!s&&i&&this.connections.push(i):s?(this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new Nr.ConnectionCheckOutFailedEvent(this,"connectionError",n.checkoutTime,s)),n.reject(s)):i&&(this.checkedOut.add(i),this.emitAndLog(t.CONNECTION_CHECKED_OUT,new Nr.ConnectionCheckedOutEvent(this,i,n.checkoutTime)),n.resolve(i)),process.nextTick(()=>this.processWaitQueue())})}this.processingWaitQueue=!1}};kr.ConnectionPool=t9});var o9=m(C2=>{"use strict";Object.defineProperty(C2,"__esModule",{value:!0});C2.Server=void 0;var Dbe=g2(),Mbe=Nj(),Pbe=e9(),Yi=Lt(),_t=z(),Bbe=is(),Ibe=Pd(),s9=a4(),nc=X(),kj=hn(),it=ts(),Nbe=a9(),i9=hh(),kbe=Td(),gh=(0,nc.makeStateMachine)({[it.STATE_CLOSED]:[it.STATE_CLOSED,it.STATE_CONNECTING],[it.STATE_CONNECTING]:[it.STATE_CONNECTING,it.STATE_CLOSING,it.STATE_CONNECTED,it.STATE_CLOSED],[it.STATE_CONNECTED]:[it.STATE_CONNECTED,it.STATE_CLOSING,it.STATE_CLOSED],[it.STATE_CLOSING]:[it.STATE_CLOSING,it.STATE_CLOSED]}),O2=class t extends Bbe.TypedEventEmitter{static{this.SERVER_HEARTBEAT_STARTED=Yi.SERVER_HEARTBEAT_STARTED}static{this.SERVER_HEARTBEAT_SUCCEEDED=Yi.SERVER_HEARTBEAT_SUCCEEDED}static{this.SERVER_HEARTBEAT_FAILED=Yi.SERVER_HEARTBEAT_FAILED}static{this.CONNECT=Yi.CONNECT}static{this.DESCRIPTION_RECEIVED=Yi.DESCRIPTION_RECEIVED}static{this.CLOSED=Yi.CLOSED}static{this.ENDED=Yi.ENDED}constructor(e,r,n){super(),this.on("error",nc.noop),this.serverApi=n.serverApi;let s={hostAddress:r.hostAddress,...n};this.topology=e,this.pool=new Mbe.ConnectionPool(this,s),this.s={description:r,options:n,state:it.STATE_CLOSED,operationCount:0};for(let i of[...Yi.CMAP_EVENTS,...Yi.APM_EVENTS])this.pool.on(i,o=>this.emit(i,o));if(this.pool.on(Dbe.Connection.CLUSTER_TIME_RECEIVED,i=>{this.clusterTime=i}),this.loadBalanced){this.monitor=null;return}this.monitor=new Nbe.Monitor(this,this.s.options);for(let i of Yi.HEARTBEAT_EVENTS)this.monitor.on(i,o=>this.emit(i,o));this.monitor.on("resetServer",i=>r9(this,i)),this.monitor.on(t.SERVER_HEARTBEAT_SUCCEEDED,i=>{this.emit(t.DESCRIPTION_RECEIVED,new i9.ServerDescription(this.description.hostAddress,i.reply,{roundTripTime:this.monitor?.roundTripTime,minRoundTripTime:this.monitor?.minRoundTripTime})),this.s.state===it.STATE_CONNECTING&&(gh(this,it.STATE_CONNECTED),this.emit(t.CONNECT,this))})}get clusterTime(){return this.topology.clusterTime}set clusterTime(e){this.topology.clusterTime=e}get description(){return this.s.description}get name(){return this.s.description.address}get autoEncrypter(){if(this.s.options&&this.s.options.autoEncrypter)return this.s.options.autoEncrypter}get loadBalanced(){return this.topology.description.type===it.TopologyType.LoadBalanced}connect(){this.s.state===it.STATE_CLOSED&&(gh(this,it.STATE_CONNECTING),this.loadBalanced?(gh(this,it.STATE_CONNECTED),this.emit(t.CONNECT,this)):this.monitor?.connect())}closeCheckedOutConnections(){return this.pool.closeCheckedOutConnections()}close(){this.s.state!==it.STATE_CLOSED&&(gh(this,it.STATE_CLOSING),this.loadBalanced||this.monitor?.close(),this.pool.close(),gh(this,it.STATE_CLOSED),this.emit("closed"))}requestCheck(){this.loadBalanced||this.monitor?.requestCheck()}async command(e,r){if(this.s.state===it.STATE_CLOSING||this.s.state===it.STATE_CLOSED)throw new _t.MongoServerClosedError;let n=e.session,s=n?.pinnedConnection;if(this.incrementOperationCount(),s==null)try{s=await this.pool.checkOut({timeoutContext:r,signal:e.options.signal})}catch(p){throw this.decrementOperationCount(),p instanceof Pbe.PoolClearedError||this.handleError(p),p}let i=null,o=()=>{if(this.decrementOperationCount(),n?.pinnedConnection!==s)if(i!=null){let p=()=>{this.pool.checkIn(s)};i.then(p,p)}else this.pool.checkIn(s)},a;try{a=e.buildCommand(s,n)}catch(p){throw o(),p}let u=e.buildOptions(r),c=e.ns;this.loadBalanced&&Rbe(a,n)&&!n?.pinnedConnection&&n?.pin(s),u.directConnection=this.topology.s.options.directConnection,e instanceof Ibe.AggregateOperation&&e.hasWriteStage&&(0,nc.maxWireVersion)(s)<kbe.MIN_SECONDARY_WRITE_WIRE_VERSION&&delete u.readPreference,this.description.iscryptd&&(u.omitMaxTimeMS=!0);try{try{let p=await s.command(c,a,u,e.SERVER_COMMAND_RESPONSE_TYPE);return(0,kj.throwIfWriteConcernError)(p),p}catch(p){throw this.decorateCommandError(s,a,u,p)}}catch(p){if(p instanceof _t.MongoError&&p.code===_t.MONGODB_ERROR_CODES.Reauthenticate){i=this.pool.reauthenticate(s),i.then(void 0,d=>{i=null,(0,nc.squashError)(d)}),await(0,nc.abortable)(i,u),i=null;try{let d=await s.command(c,a,u,e.SERVER_COMMAND_RESPONSE_TYPE);return(0,kj.throwIfWriteConcernError)(d),d}catch(d){throw this.decorateCommandError(s,a,u,d)}}else throw p}finally{o()}}handleError(e,r){if(!(e instanceof _t.MongoError)||e.connectionGeneration&&e.connectionGeneration<this.pool.generation)return;let s=e instanceof _t.MongoNetworkError&&!(e instanceof _t.MongoNetworkTimeoutError),i=e instanceof _t.MongoNetworkError&&e.beforeHandshake,o=e.hasErrorLabel(_t.MongoErrorLabel.HandshakeError);if(s||i||o)this.loadBalanced?r&&this.pool.clear({serviceId:r.serviceId}):(e.addErrorLabel(_t.MongoErrorLabel.ResetPool),r9(this,e));else if((0,_t.isSDAMUnrecoverableError)(e)&&$be(this,e)){let a=(0,_t.isNodeShuttingDownError)(e);this.loadBalanced&&r&&a&&this.pool.clear({serviceId:r.serviceId}),this.loadBalanced||(a&&e.addErrorLabel(_t.MongoErrorLabel.ResetPool),r9(this,e),process.nextTick(()=>this.requestCheck()))}}decorateCommandError(e,r,n,s){if(typeof s!="object"||s==null||!("name"in s))throw new _t.MongoRuntimeError("An unexpected error type: "+typeof s);if(s.name==="AbortError"&&"cause"in s&&s.cause instanceof _t.MongoError&&(s=s.cause),!(s instanceof _t.MongoError)||Fbe(this.pool,e))return s;let i=n?.session;return s instanceof _t.MongoNetworkError?(i&&!i.hasEnded&&i.serverSession&&(i.serverSession.isDirty=!0),n9(i,r)&&!s.hasErrorLabel(_t.MongoErrorLabel.TransientTransactionError)&&s.addErrorLabel(_t.MongoErrorLabel.TransientTransactionError),(Rj(this.topology)||(0,s9.isTransactionCommand)(r))&&(0,nc.supportsRetryableWrites)(this)&&!n9(i,r)&&s.addErrorLabel(_t.MongoErrorLabel.RetryableWriteError)):(Rj(this.topology)||(0,s9.isTransactionCommand)(r))&&(0,_t.needsRetryableWriteLabel)(s,(0,nc.maxWireVersion)(this),this.description.type)&&!n9(i,r)&&s.addErrorLabel(_t.MongoErrorLabel.RetryableWriteError),i&&i.isPinned&&s.hasErrorLabel(_t.MongoErrorLabel.TransientTransactionError)&&i.unpin({force:!0}),this.handleError(s,e),s}decrementOperationCount(){return this.s.operationCount-=1}incrementOperationCount(){return this.s.operationCount+=1}};C2.Server=O2;function r9(t,e){t.loadBalanced||(e instanceof _t.MongoNetworkError&&!(e instanceof _t.MongoNetworkTimeoutError)&&t.monitor?.reset(),t.emit(O2.DESCRIPTION_RECEIVED,new i9.ServerDescription(t.description.hostAddress,void 0,{error:e})))}function Rbe(t,e){return e?e.inTransaction()||e.transaction.isCommitted&&"commitTransaction"in t||"aggregate"in t||"find"in t||"getMore"in t||"listCollections"in t||"listIndexes"in t||"bulkWrite"in t:!1}function Fbe(t,e){return e.serviceId?e.generation!==t.serviceGenerations.get(e.serviceId.toHexString()):e.generation!==t.generation}function $be(t,e){let r=e.topologyVersion,n=t.description.topologyVersion;return(0,i9.compareTopologyVersion)(n,r)<0}function n9(t,e){return t&&t.inTransaction()&&!(0,s9.isTransactionCommand)(e)}function Rj(t){return t.s.options.retryWrites!==!1}});var a9=m(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.RTTSampler=kn.MonitorInterval=kn.RTTPinger=kn.Monitor=kn.ServerMonitoringMode=void 0;var Ha=require("timers"),Fj=pe(),v2=Tv(),qbe=cC(),u9=Lt(),Tp=z(),jbe=Ba(),$j=is(),Rr=X(),Fr=ts(),_h=b2(),Eh=o9(),Dp="idle",sc="monitoring",Mp=(0,Rr.makeStateMachine)({[Fr.STATE_CLOSING]:[Fr.STATE_CLOSING,Dp,Fr.STATE_CLOSED],[Fr.STATE_CLOSED]:[Fr.STATE_CLOSED,sc],[Dp]:[Dp,sc,Fr.STATE_CLOSING],[sc]:[sc,Dp,Fr.STATE_CLOSING]}),Lbe=new Set([Fr.STATE_CLOSING,Fr.STATE_CLOSED,sc]);function bh(t){return t.s.state===Fr.STATE_CLOSED||t.s.state===Fr.STATE_CLOSING}kn.ServerMonitoringMode=Object.freeze({auto:"auto",poll:"poll",stream:"stream"});var c9=class extends $j.TypedEventEmitter{constructor(e,r){super(),this.component=jbe.MongoLoggableComponent.TOPOLOGY,this.on("error",Rr.noop),this.server=e,this.connection=null,this.cancellationToken=new $j.CancellationToken,this.cancellationToken.setMaxListeners(1/0),this.monitorId=void 0,this.s={state:Fr.STATE_CLOSED},this.address=e.description.address,this.options=Object.freeze({connectTimeoutMS:r.connectTimeoutMS??1e4,heartbeatFrequencyMS:r.heartbeatFrequencyMS??1e4,minHeartbeatFrequencyMS:r.minHeartbeatFrequencyMS??500,serverMonitoringMode:r.serverMonitoringMode}),this.isRunningInFaasEnv=(0,qbe.getFAASEnv)()!=null,this.mongoLogger=this.server.topology.client?.mongoLogger,this.rttSampler=new T2(10);let n=this.cancellationToken,s={id:"<monitor>",generation:e.pool.generation,cancellationToken:n,hostAddress:e.description.hostAddress,...r,raw:!1,useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!0};delete s.credentials,s.autoEncrypter&&delete s.autoEncrypter,this.connectOptions=Object.freeze(s)}connect(){if(this.s.state!==Fr.STATE_CLOSED)return;let e=this.options.heartbeatFrequencyMS,r=this.options.minHeartbeatFrequencyMS;this.monitorId=new Sh(jj(this),{heartbeatFrequencyMS:e,minHeartbeatFrequencyMS:r,immediate:!0})}requestCheck(){Lbe.has(this.s.state)||this.monitorId?.wake()}reset(){let e=this.server.description.topologyVersion;if(bh(this)||e==null)return;Mp(this,Fr.STATE_CLOSING),qj(this),Mp(this,Dp);let r=this.options.heartbeatFrequencyMS,n=this.options.minHeartbeatFrequencyMS;this.monitorId=new Sh(jj(this),{heartbeatFrequencyMS:r,minHeartbeatFrequencyMS:n})}close(){bh(this)||(Mp(this,Fr.STATE_CLOSING),qj(this),this.emit("close"),Mp(this,Fr.STATE_CLOSED))}get roundTripTime(){return this.rttSampler.average()}get minRoundTripTime(){return this.rttSampler.min()}get latestRtt(){return this.rttSampler.last}addRttSample(e){this.rttSampler.addSample(e)}clearRttSamples(){this.rttSampler.clear()}};kn.Monitor=c9;function qj(t){t.monitorId?.stop(),t.monitorId=void 0,t.rttPinger?.close(),t.rttPinger=void 0,t.cancellationToken.emit("cancel"),t.connection?.destroy(),t.connection=null,t.clearRttSamples()}function l9(t,e){if(e==null)return!1;let r=t.options.serverMonitoringMode;return r===kn.ServerMonitoringMode.poll?!1:r===kn.ServerMonitoringMode.stream?!0:!t.isRunningInFaasEnv}function Ube(t,e){let r,n,s=t.server.description.topologyVersion,i=l9(t,s);t.emitAndLogHeartbeat(Eh.Server.SERVER_HEARTBEAT_STARTED,t.server.topology.s.id,void 0,new _h.ServerHeartbeatStartedEvent(t.address,i));function o(c){t.connection?.destroy(),t.connection=null,t.emitAndLogHeartbeat(Eh.Server.SERVER_HEARTBEAT_FAILED,t.server.topology.s.id,void 0,new _h.ServerHeartbeatFailedEvent(t.address,(0,Rr.calculateDurationInMs)(r),c,n));let l=c instanceof Tp.MongoError?c:new Tp.MongoError(Tp.MongoError.buildErrorMessage(c),{cause:c});l.addErrorLabel(Tp.MongoErrorLabel.ResetPool),l instanceof Tp.MongoNetworkTimeoutError&&l.addErrorLabel(Tp.MongoErrorLabel.InterruptInUseConnections),t.emit("resetServer",l),e(c)}function a(c){"isWritablePrimary"in c||(c.isWritablePrimary=c[u9.LEGACY_HELLO_COMMAND]);let l=i&&t.rttPinger?t.rttPinger.latestRtt??(0,Rr.calculateDurationInMs)(r):(0,Rr.calculateDurationInMs)(r);t.addRttSample(l),t.emitAndLogHeartbeat(Eh.Server.SERVER_HEARTBEAT_SUCCEEDED,t.server.topology.s.id,c.connectionId,new _h.ServerHeartbeatSucceededEvent(t.address,l,c,i)),i?(t.emitAndLogHeartbeat(Eh.Server.SERVER_HEARTBEAT_STARTED,t.server.topology.s.id,void 0,new _h.ServerHeartbeatStartedEvent(t.address,!0)),r=(0,Rr.now)()):(t.rttPinger?.close(),t.rttPinger=void 0,e(void 0,c))}let{connection:u}=t;if(u&&!u.closed){let{serverApi:c,helloOk:l}=u,p=t.options.connectTimeoutMS,d=t.options.heartbeatFrequencyMS,h={[c?.version||l?"hello":u9.LEGACY_HELLO_COMMAND]:1,...i&&s?{maxAwaitTimeMS:d,topologyVersion:Vbe(s)}:{}},f=i?{socketTimeoutMS:p?p+d:0,exhaustAllowed:!0}:{socketTimeoutMS:p};if(i&&t.rttPinger==null&&(t.rttPinger=new x2(t)),r=(0,Rr.now)(),i)return n=!0,u.exhaustCommand((0,Rr.ns)("admin.$cmd"),h,f,(y,g)=>y?o(y):a(g));n=!1,u.command((0,Rr.ns)("admin.$cmd"),h,f).then(a,o);return}(async()=>{let c=await(0,v2.makeSocket)(t.connectOptions),l=(0,v2.makeConnection)(t.connectOptions,c);r=(0,Rr.now)();try{return await(0,v2.performInitialHandshake)(l,t.connectOptions),l}catch(p){throw l.destroy(),p}})().then(c=>{if(bh(t)){c.destroy();return}let l=(0,Rr.calculateDurationInMs)(r);t.addRttSample(l),t.connection=c,t.emitAndLogHeartbeat(Eh.Server.SERVER_HEARTBEAT_SUCCEEDED,t.server.topology.s.id,c.hello?.connectionId,new _h.ServerHeartbeatSucceededEvent(t.address,l,c.hello,l9(t,c.hello?.topologyVersion))),e(void 0,c.hello)},c=>{t.connection=null,n=!1,o(c)})}function jj(t){return e=>{if(t.s.state===sc){process.nextTick(e);return}Mp(t,sc);function r(){bh(t)||Mp(t,Dp),e()}Ube(t,(n,s)=>{if(n&&t.server.description.type===Fr.ServerType.Unknown)return r();l9(t,s?.topologyVersion)&&(0,Ha.setTimeout)(()=>{bh(t)||t.monitorId?.wake()},0),r()})}}function Vbe(t){return{processId:t.processId,counter:Fj.Long.isLong(t.counter)?t.counter:Fj.Long.fromNumber(t.counter)}}var x2=class{constructor(e){this.connection=void 0,this.cancellationToken=e.cancellationToken,this.closed=!1,this.monitor=e,this.latestRtt=e.latestRtt??void 0;let r=e.options.heartbeatFrequencyMS;this.monitorId=(0,Ha.setTimeout)(()=>this.measureRoundTripTime(),r)}get roundTripTime(){return this.monitor.roundTripTime}get minRoundTripTime(){return this.monitor.minRoundTripTime}close(){this.closed=!0,(0,Ha.clearTimeout)(this.monitorId),this.connection?.destroy(),this.connection=void 0}measureAndReschedule(e,r){if(this.closed){r?.destroy();return}this.connection==null&&(this.connection=r),this.latestRtt=(0,Rr.calculateDurationInMs)(e),this.monitorId=(0,Ha.setTimeout)(()=>this.measureRoundTripTime(),this.monitor.options.heartbeatFrequencyMS)}measureRoundTripTime(){let e=(0,Rr.now)();if(this.closed)return;let r=this.connection;if(r==null){(0,v2.connect)(this.monitor.connectOptions).then(s=>{this.measureAndReschedule(e,s)},()=>{this.connection=void 0});return}let n=r.serverApi?.version||r.helloOk?"hello":u9.LEGACY_HELLO_COMMAND;r.command((0,Rr.ns)("admin.$cmd"),{[n]:1},void 0).then(()=>this.measureAndReschedule(e),()=>{this.connection?.destroy(),this.connection=void 0})}};kn.RTTPinger=x2;var Sh=class{constructor(e,r={}){this.isExpeditedCallToFnScheduled=!1,this.stopped=!1,this.isExecutionInProgress=!1,this.hasExecutedOnce=!1,this._executeAndReschedule=()=>{this.stopped||(this.timerId&&(0,Ha.clearTimeout)(this.timerId),this.isExpeditedCallToFnScheduled=!1,this.isExecutionInProgress=!0,this.fn(()=>{this.lastExecutionEnded=(0,Rr.now)(),this.isExecutionInProgress=!1,this._reschedule(this.heartbeatFrequencyMS)}))},this.fn=e,this.lastExecutionEnded=-1/0,this.heartbeatFrequencyMS=r.heartbeatFrequencyMS??1e3,this.minHeartbeatFrequencyMS=r.minHeartbeatFrequencyMS??500,r.immediate?this._executeAndReschedule():this._reschedule(void 0)}wake(){let r=(0,Rr.now)()-this.lastExecutionEnded;if(r<0)return this._executeAndReschedule();if(!this.isExecutionInProgress&&!this.isExpeditedCallToFnScheduled){if(r<this.minHeartbeatFrequencyMS){this.isExpeditedCallToFnScheduled=!0,this._reschedule(this.minHeartbeatFrequencyMS-r);return}this._executeAndReschedule()}}stop(){this.stopped=!0,this.timerId&&((0,Ha.clearTimeout)(this.timerId),this.timerId=void 0),this.lastExecutionEnded=-1/0,this.isExpeditedCallToFnScheduled=!1}toString(){return JSON.stringify(this)}toJSON(){let e=(0,Rr.now)(),r=e-this.lastExecutionEnded;return{timerId:this.timerId!=null?"set":"cleared",lastCallTime:this.lastExecutionEnded,isExpeditedCheckScheduled:this.isExpeditedCallToFnScheduled,stopped:this.stopped,heartbeatFrequencyMS:this.heartbeatFrequencyMS,minHeartbeatFrequencyMS:this.minHeartbeatFrequencyMS,currentTime:e,timeSinceLastCall:r}}_reschedule(e){this.stopped||(this.timerId&&(0,Ha.clearTimeout)(this.timerId),this.timerId=(0,Ha.setTimeout)(this._executeAndReschedule,e||this.heartbeatFrequencyMS))}};kn.MonitorInterval=Sh;var T2=class{constructor(e=10){this.rttSamples=new Float64Array(e),this.length=0,this.writeIndex=0}addSample(e){this.rttSamples[this.writeIndex++]=e,this.length<this.rttSamples.length&&this.length++,this.writeIndex%=this.rttSamples.length}min(){if(this.length<2)return 0;let e=this.rttSamples[0];for(let r=1;r<this.length;r++)this.rttSamples[r]<e&&(e=this.rttSamples[r]);return e}average(){if(this.length===0)return 0;let e=0;for(let r=0;r<this.length;r++)e+=this.rttSamples[r];return e/this.length}get last(){return this.length===0?null:this.rttSamples[this.writeIndex===0?this.length-1:this.writeIndex-1]}clear(){this.length=0,this.writeIndex=0}};kn.RTTSampler=T2});var g9=m(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});ls.DEFAULT_OPTIONS=ls.OPTIONS=void 0;ls.resolveSRVRecord=Xbe;ls.parseOptions=eSe;var p9=require("dns"),Wbe=DC(),zbe=require("url"),Pp=Fg(),Qi=zi(),Lj=ih(),Uj=uj(),ee=z(),D2=tc(),f9=Ba(),d9=si(),Ga=sr(),Kbe=a9(),rn=X(),Po=hn(),h9=["authSource","replicaSet","loadBalanced"],Hbe="loadBalanced option only supported with a single host in the URI",Gbe="loadBalanced option not supported with a replicaSet option",Jbe="loadBalanced option not supported when directConnection is provided";function zj(t){return async function(r){try{return await p9.promises[t](r)}catch(n){if(n.code===p9.TIMEOUT)return await p9.promises[t](r);throw n}}}var Ybe=zj("resolveSrv"),Qbe=zj("resolveTxt");async function Xbe(t){if(typeof t.srvHost!="string")throw new ee.MongoAPIError('Option "srvHost" must not be empty');let e=t.srvHost,r=Qbe(e);r.then(void 0,rn.squashError);let n=`_${t.srvServiceName}._tcp.${e}`,s=await Ybe(n);if(s.length===0)throw new ee.MongoAPIError("No addresses found at host");for(let{name:d}of s)(0,rn.checkParentDomainMatch)(d,e);let i=s.map(d=>rn.HostAddress.fromString(`${d.name}:${d.port??27017}`));m9(i,t,!0);let o;try{o=await r}catch(d){if(d.code!=="ENODATA"&&d.code!=="ENOTFOUND")throw d;return i}if(o.length>1)throw new ee.MongoParseError("Multiple text records not allowed");let a=new zbe.URLSearchParams(o[0].join(""));if([...a.keys()].some(d=>!h9.includes(d)))throw new ee.MongoParseError(`Text record may only set any of: ${h9.join(", ")}`);if(h9.some(d=>a.get(d)===""))throw new ee.MongoParseError("Cannot have empty URI params in DNS TXT Record");let c=a.get("authSource")??void 0,l=a.get("replicaSet")??void 0,p=a.get("loadBalanced")??void 0;if(!t.userSpecifiedAuthSource&&c&&t.credentials&&!Qi.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(t.credentials.mechanism)&&(t.credentials=Pp.MongoCredentials.merge(t.credentials,{source:c})),!t.userSpecifiedReplicaSet&&l&&(t.replicaSet=l),p==="true"&&(t.loadBalanced=!0),t.replicaSet&&t.srvMaxHosts>0)throw new ee.MongoParseError("Cannot combine replicaSet option with srvMaxHosts");return m9(i,t,!0),i}function Zbe(t){if(!t)return;let e=(r,n)=>{if(t.has(r)&&t.has(n))throw new ee.MongoAPIError(`The '${r}' option cannot be used with the '${n}' option`)};e("tlsInsecure","tlsAllowInvalidCertificates"),e("tlsInsecure","tlsAllowInvalidHostnames")}function Bo(t,e){if(typeof e=="boolean")return e;switch(e){case"true":return!0;case"false":return!1;default:throw new ee.MongoParseError(`${t} must be either "true" or "false"`)}}function y9(t,e){let r=(0,rn.parseInteger)(e);if(r!=null)return r;throw new ee.MongoParseError(`Expected ${t} to be stringified int value, got: ${e}`)}function wh(t,e){let r=y9(t,e);if(r<0)throw new ee.MongoParseError(`${t} can only be a positive int value, got: ${e}`);return r}function*Vj(t){if(t==="")return;let e=t.split(",");for(let r of e){let[n,s]=r.split(/:(.*)/);if(s==null)throw new ee.MongoParseError("Cannot have undefined values in key value pairs");yield[n,s]}}var Bp=class extends Map{constructor(e=[]){super(e.map(([r,n])=>[r.toLowerCase(),n]))}has(e){return super.has(e.toLowerCase())}get(e){return super.get(e.toLowerCase())}set(e,r){return super.set(e.toLowerCase(),r)}delete(e){return super.delete(e.toLowerCase())}};function eSe(t,e=void 0,r={}){if(e!=null&&!(e instanceof D2.MongoClient)&&(r=e,e=void 0),r.useBigInt64&&typeof r.promoteLongs=="boolean"&&!r.promoteLongs)throw new ee.MongoAPIError("Must request either bigint or Long for int64 deserialization");if(r.useBigInt64&&typeof r.promoteValues=="boolean"&&!r.promoteValues)throw new ee.MongoAPIError("Must request either bigint or Long for int64 deserialization");let n=new Wbe.default(t),{hosts:s,isSRV:i}=n,o=Object.create(null);o.hosts=i?[]:s.map(rn.HostAddress.fromString);let a=new Bp;if(n.pathname!=="/"&&n.pathname!==""){let f=decodeURIComponent(n.pathname[0]==="/"?n.pathname.slice(1):n.pathname);f&&a.set("dbName",[f])}if(n.username!==""){let f={username:decodeURIComponent(n.username)};typeof n.password=="string"&&(f.password=decodeURIComponent(n.password)),a.set("auth",[f])}for(let f of n.searchParams.keys()){let y=n.searchParams.getAll(f),g=/readPreferenceTags/i.test(f);if(!g&&y.length>1)throw new ee.MongoInvalidArgumentError(`URI option "${f}" cannot appear more than once in the connection string`);if(!g&&y.includes(""))throw new ee.MongoAPIError(`URI option "${f}" cannot be specified with no value`);a.has(f)||a.set(f,y)}let u=new Bp(Object.entries(r).filter(([,f])=>f!=null));if(a.has("serverApi"))throw new ee.MongoParseError("URI cannot contain `serverApi`, it can only be passed to the client");let c=a.get("authMechanismProperties");if(c){for(let f of c)if(/(^|,)ALLOWED_HOSTS:/.test(f))throw new ee.MongoParseError("Auth mechanism property ALLOWED_HOSTS is not allowed in the connection string.")}if(u.has("loadBalanced"))throw new ee.MongoParseError("loadBalanced is only a valid option in the URI");let l=new Bp,p=new Set([...a.keys(),...u.keys()]);for(let f of p){let y=[],g=u.get(f);g!=null&&y.push(g);let _=a.get(f)??[];y.push(..._),l.set(f,y)}if(l.has("tls")||l.has("ssl")){let f=(l.get("tls")||[]).concat(l.get("ssl")||[]).map(Bo.bind(null,"tls/ssl"));if(new Set(f).size!==1)throw new ee.MongoParseError("All values of tls/ssl must be the same.")}Zbe(l);let d=(0,rn.setDifference)(p,Array.from(Object.keys(ls.OPTIONS)).map(f=>f.toLowerCase()));if(d.size!==0){let f=d.size>1?"options":"option",y=d.size>1?"are":"is";throw new ee.MongoParseError(`${f} ${Array.from(d).join(", ")} ${y} not supported`)}for(let[f,y]of Object.entries(ls.OPTIONS)){let g=l.get(f);if(!g||g.length===0)ls.DEFAULT_OPTIONS.has(f)&&Wj(o,f,y,[ls.DEFAULT_OPTIONS.get(f)]);else{let{deprecated:_}=y;if(_){let S=typeof _=="string"?`: ${_}`:"";(0,rn.emitWarning)(`${f} is a deprecated option${S}`)}Wj(o,f,y,g)}}if(o.credentials){let f=o.credentials.mechanism===Qi.AuthMechanism.MONGODB_GSSAPI,y=o.credentials.mechanism===Qi.AuthMechanism.MONGODB_X509,g=o.credentials.mechanism===Qi.AuthMechanism.MONGODB_AWS,_=o.credentials.mechanism===Qi.AuthMechanism.MONGODB_OIDC;if((f||y)&&l.has("authSource")&&o.credentials.source!=="$external")throw new ee.MongoParseError(`authMechanism ${o.credentials.mechanism} requires an authSource of '$external'`);if(!(f||y||g||_)&&o.dbName&&!l.has("authSource")&&(o.credentials=Pp.MongoCredentials.merge(o.credentials,{source:o.dbName})),g){let{username:S,password:O}=o.credentials;if(S||O)throw new ee.MongoAPIError("username and password cannot be provided when using MONGODB-AWS. Credentials must be provided in a manner that can be read by the AWS SDK.");if(o.credentials.mechanismProperties.AWS_SESSION_TOKEN)throw new ee.MongoAPIError("AWS_SESSION_TOKEN cannot be provided when using MONGODB-AWS. Credentials must be provided in a manner that can be read by the AWS SDK.")}o.credentials.validate(),o.credentials.password===""&&o.credentials.username===""&&o.credentials.mechanism===Qi.AuthMechanism.MONGODB_DEFAULT&&Object.keys(o.credentials.mechanismProperties).length===0&&delete o.credentials}if(o.dbName||(o.dbName="test"),m9(s,o,i),e&&o.autoEncryption&&(Uj.Encrypter.checkForMongoCrypt(),o.encrypter=new Uj.Encrypter(e,t,r),o.autoEncrypter=o.encrypter.autoEncrypter),o.userSpecifiedAuthSource=u.has("authSource")||a.has("authSource"),o.userSpecifiedReplicaSet=u.has("replicaSet")||a.has("replicaSet"),i){if(o.srvHost=s[0],o.directConnection)throw new ee.MongoAPIError("SRV URI does not support directConnection");if(o.srvMaxHosts>0&&typeof o.replicaSet=="string")throw new ee.MongoParseError("Cannot use srvMaxHosts option with replicaSet");let f=!u.has("tls")&&!a.has("tls"),y=!u.has("ssl")&&!a.has("ssl");f&&y&&(o.tls=!0)}else if(a.has("srvMaxHosts")||u.has("srvMaxHosts")||a.has("srvServiceName")||u.has("srvServiceName"))throw new ee.MongoParseError("Cannot use srvMaxHosts or srvServiceName with a non-srv connection string");if(o.directConnection&&o.hosts.length!==1)throw new ee.MongoParseError("directConnection option requires exactly one host");if(!o.proxyHost&&(o.proxyPort||o.proxyUsername||o.proxyPassword))throw new ee.MongoParseError("Must specify proxyHost if other proxy options are passed");if(o.proxyUsername&&!o.proxyPassword||!o.proxyUsername&&o.proxyPassword)throw new ee.MongoParseError("Can only specify both of proxy username/password or neither");if(["proxyHost","proxyPort","proxyUsername","proxyPassword"].map(f=>a.get(f)??[]).some(f=>f.length>1))throw new ee.MongoParseError("Proxy options cannot be specified multiple times in the connection string");return o.mongoLoggerOptions=f9.MongoLogger.resolveOptions({MONGODB_LOG_COMMAND:process.env.MONGODB_LOG_COMMAND,MONGODB_LOG_TOPOLOGY:process.env.MONGODB_LOG_TOPOLOGY,MONGODB_LOG_SERVER_SELECTION:process.env.MONGODB_LOG_SERVER_SELECTION,MONGODB_LOG_CONNECTION:process.env.MONGODB_LOG_CONNECTION,MONGODB_LOG_CLIENT:process.env.MONGODB_LOG_CLIENT,MONGODB_LOG_ALL:process.env.MONGODB_LOG_ALL,MONGODB_LOG_MAX_DOCUMENT_LENGTH:process.env.MONGODB_LOG_MAX_DOCUMENT_LENGTH,MONGODB_LOG_PATH:process.env.MONGODB_LOG_PATH},{mongodbLogPath:o.mongodbLogPath,mongodbLogComponentSeverities:o.mongodbLogComponentSeverities,mongodbLogMaxDocumentLength:o.mongodbLogMaxDocumentLength}),o}function m9(t,e,r){if(e.loadBalanced){if(t.length>1)throw new ee.MongoParseError(Hbe);if(e.replicaSet)throw new ee.MongoParseError(Gbe);if(e.directConnection)throw new ee.MongoParseError(Jbe);if(r&&e.srvMaxHosts>0)throw new ee.MongoParseError("Cannot limit srv hosts with loadBalanced enabled")}}function Wj(t,e,r,n){let{target:s,type:i,transform:o}=r,a=s??e;switch(i){case"boolean":t[a]=Bo(a,n[0]);break;case"int":t[a]=y9(a,n[0]);break;case"uint":t[a]=wh(a,n[0]);break;case"string":if(n[0]==null)break;t[a]=String(n[0]);break;case"record":if(!(0,rn.isRecord)(n[0]))throw new ee.MongoParseError(`${a} must be an object`);t[a]=n[0];break;case"any":t[a]=n[0];break;default:{if(!o)throw new ee.MongoParseError("Descriptors missing a type must define a transform");let u=o({name:a,options:t,values:n});t[a]=u;break}}}ls.OPTIONS={appName:{type:"string"},auth:{target:"credentials",transform({name:t,options:e,values:[r]}){if(!(0,rn.isRecord)(r,["username","password"]))throw new ee.MongoParseError(`${t} must be an object with 'username' and 'password' properties`);return Pp.MongoCredentials.merge(e.credentials,{username:r.username,password:r.password})}},authMechanism:{target:"credentials",transform({options:t,values:[e]}){let r=Object.values(Qi.AuthMechanism),[n]=r.filter(o=>o.match(RegExp(String.raw`\b${e}\b`,"i")));if(!n)throw new ee.MongoParseError(`authMechanism one of ${r}, got ${e}`);let s=t.credentials?.source;(n===Qi.AuthMechanism.MONGODB_PLAIN||Qi.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(n))&&(s="$external");let i=t.credentials?.password;return n===Qi.AuthMechanism.MONGODB_X509&&i===""&&(i=void 0),Pp.MongoCredentials.merge(t.credentials,{mechanism:n,source:s,password:i})}},authMechanismProperties:{target:"credentials",transform({options:t,values:e}){let r=Object.create(null);for(let n of e)if(typeof n=="string")for(let[s,i]of Vj(n))try{r[s]=Bo(s,i)}catch{r[s]=i}else{if(!(0,rn.isRecord)(n))throw new ee.MongoParseError("AuthMechanismProperties must be an object");r={...n}}return Pp.MongoCredentials.merge(t.credentials,{mechanismProperties:r})}},authSource:{target:"credentials",transform({options:t,values:[e]}){let r=String(e);return Pp.MongoCredentials.merge(t.credentials,{source:r})}},autoEncryption:{type:"record"},autoSelectFamily:{type:"boolean",default:!0},autoSelectFamilyAttemptTimeout:{type:"uint"},bsonRegExp:{type:"boolean"},serverApi:{target:"serverApi",transform({values:[t]}){let e=typeof t=="string"?{version:t}:t,r=e&&e.version;if(!r)throw new ee.MongoParseError(`Invalid \`serverApi\` property; must specify a version from the following enum: ["${Object.values(D2.ServerApiVersion).join('", "')}"]`);if(!Object.values(D2.ServerApiVersion).some(n=>n===r))throw new ee.MongoParseError(`Invalid server API version=${r}; must be in the following enum: ["${Object.values(D2.ServerApiVersion).join('", "')}"]`);return e}},checkKeys:{type:"boolean"},compressors:{default:"none",target:"compressors",transform({values:t}){let e=new Set;for(let r of t){let n=typeof r=="string"?r.split(","):r;if(!Array.isArray(n))throw new ee.MongoInvalidArgumentError("compressors must be an array or a comma-delimited list of strings");for(let s of n)if(Object.keys(Lj.Compressor).includes(String(s)))e.add(String(s));else throw new ee.MongoInvalidArgumentError(`${s} is not a valid compression mechanism. Must be one of: ${Object.keys(Lj.Compressor)}.`)}return[...e]}},connectTimeoutMS:{default:3e4,type:"uint"},dbName:{type:"string"},directConnection:{default:!1,type:"boolean"},driverInfo:{default:{},type:"record"},enableUtf8Validation:{type:"boolean",default:!0},family:{transform({name:t,values:[e]}){let r=y9(t,e);if(r===4||r===6)return r;throw new ee.MongoParseError(`Option 'family' must be 4 or 6 got ${r}.`)}},fieldsAsRaw:{type:"record"},forceServerObjectId:{default:!1,type:"boolean"},fsync:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=Po.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,fsync:Bo(t,r)}});if(!n)throw new ee.MongoParseError(`Unable to make a writeConcern from fsync=${r}`);return n}},heartbeatFrequencyMS:{default:1e4,type:"uint"},ignoreUndefined:{type:"boolean"},j:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=Po.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,journal:Bo(t,r)}});if(!n)throw new ee.MongoParseError(`Unable to make a writeConcern from journal=${r}`);return n}},journal:{target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=Po.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,journal:Bo(t,r)}});if(!n)throw new ee.MongoParseError(`Unable to make a writeConcern from journal=${r}`);return n}},loadBalanced:{default:!1,type:"boolean"},localThresholdMS:{default:15,type:"uint"},maxConnecting:{default:2,transform({name:t,values:[e]}){let r=wh(t,e);if(r===0)throw new ee.MongoInvalidArgumentError("maxConnecting must be > 0 if specified");return r}},maxIdleTimeMS:{default:0,type:"uint"},maxPoolSize:{default:100,type:"uint"},maxStalenessSeconds:{target:"readPreference",transform({name:t,options:e,values:[r]}){let n=wh(t,r);return e.readPreference?Ga.ReadPreference.fromOptions({readPreference:{...e.readPreference,maxStalenessSeconds:n}}):new Ga.ReadPreference("secondary",void 0,{maxStalenessSeconds:n})}},minInternalBufferSize:{type:"uint"},minPoolSize:{default:0,type:"uint"},minHeartbeatFrequencyMS:{default:500,type:"uint"},monitorCommands:{default:!1,type:"boolean"},name:{target:"driverInfo",transform({values:[t],options:e}){return{...e.driverInfo,name:String(t)}}},noDelay:{default:!0,type:"boolean"},pkFactory:{default:rn.DEFAULT_PK_FACTORY,transform({values:[t]}){if((0,rn.isRecord)(t,["createPk"])&&typeof t.createPk=="function")return t;throw new ee.MongoParseError(`Option pkFactory must be an object with a createPk function, got ${t}`)}},promoteBuffers:{type:"boolean"},promoteLongs:{type:"boolean"},promoteValues:{type:"boolean"},useBigInt64:{type:"boolean"},proxyHost:{type:"string"},proxyPassword:{type:"string"},proxyPort:{type:"uint"},proxyUsername:{type:"string"},raw:{default:!1,type:"boolean"},readConcern:{transform({values:[t],options:e}){if(t instanceof d9.ReadConcern||(0,rn.isRecord)(t,["level"]))return d9.ReadConcern.fromOptions({...e.readConcern,...t});throw new ee.MongoParseError(`ReadConcern must be an object, got ${JSON.stringify(t)}`)}},readConcernLevel:{target:"readConcern",transform({values:[t],options:e}){return d9.ReadConcern.fromOptions({...e.readConcern,level:t})}},readPreference:{default:Ga.ReadPreference.primary,transform({values:[t],options:e}){if(t instanceof Ga.ReadPreference)return Ga.ReadPreference.fromOptions({readPreference:{...e.readPreference,...t},...t});if((0,rn.isRecord)(t,["mode"])){let r=Ga.ReadPreference.fromOptions({readPreference:{...e.readPreference,...t},...t});if(r)return r;throw new ee.MongoParseError(`Cannot make read preference from ${JSON.stringify(t)}`)}if(typeof t=="string"){let r={hedge:e.readPreference?.hedge,maxStalenessSeconds:e.readPreference?.maxStalenessSeconds};return new Ga.ReadPreference(t,e.readPreference?.tags,r)}throw new ee.MongoParseError(`Unknown ReadPreference value: ${t}`)}},readPreferenceTags:{target:"readPreference",transform({values:t,options:e}){let r=Array.isArray(t[0])?t[0]:t,n=[];for(let s of r){let i=Object.create(null);if(typeof s=="string")for(let[o,a]of Vj(s))i[o]=a;if((0,rn.isRecord)(s))for(let[o,a]of Object.entries(s))i[o]=a;n.push(i)}return Ga.ReadPreference.fromOptions({readPreference:e.readPreference,readPreferenceTags:n})}},replicaSet:{type:"string"},retryReads:{default:!0,type:"boolean"},retryWrites:{default:!0,type:"boolean"},serializeFunctions:{type:"boolean"},serverMonitoringMode:{default:"auto",transform({values:[t]}){if(!Object.values(Kbe.ServerMonitoringMode).includes(t))throw new ee.MongoParseError("serverMonitoringMode must be one of `auto`, `poll`, or `stream`");return t}},serverSelectionTimeoutMS:{default:3e4,type:"uint"},servername:{type:"string"},socketTimeoutMS:{default:0,type:"uint"},srvMaxHosts:{type:"uint",default:0},srvServiceName:{type:"string",default:"mongodb"},ssl:{target:"tls",type:"boolean"},timeoutMS:{type:"uint"},tls:{type:"boolean"},tlsAllowInvalidCertificates:{target:"rejectUnauthorized",transform({name:t,values:[e]}){return!Bo(t,e)}},tlsAllowInvalidHostnames:{target:"checkServerIdentity",transform({name:t,values:[e]}){return Bo(t,e)?()=>{}:void 0}},tlsCAFile:{type:"string"},tlsCRLFile:{type:"string"},tlsCertificateKeyFile:{type:"string"},tlsCertificateKeyFilePassword:{target:"passphrase",type:"any"},tlsInsecure:{transform({name:t,options:e,values:[r]}){let n=Bo(t,r);return n?(e.checkServerIdentity=()=>{},e.rejectUnauthorized=!1):(e.checkServerIdentity=e.tlsAllowInvalidHostnames?()=>{}:void 0,e.rejectUnauthorized=!e.tlsAllowInvalidCertificates),n}},w:{target:"writeConcern",transform({values:[t],options:e}){return Po.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,w:t}})}},waitQueueTimeoutMS:{default:0,type:"uint"},writeConcern:{target:"writeConcern",transform({values:[t],options:e}){if((0,rn.isRecord)(t)||t instanceof Po.WriteConcern)return Po.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,...t}});if(t==="majority"||typeof t=="number")return Po.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,w:t}});throw new ee.MongoParseError(`Invalid WriteConcern cannot parse: ${JSON.stringify(t)}`)}},wtimeout:{deprecated:"Please use wtimeoutMS instead",target:"writeConcern",transform({values:[t],options:e}){let r=Po.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,wtimeout:wh("wtimeout",t)}});if(r)return r;throw new ee.MongoParseError("Cannot make WriteConcern from wtimeout")}},wtimeoutMS:{target:"writeConcern",transform({values:[t],options:e}){let r=Po.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,wtimeoutMS:wh("wtimeoutMS",t)}});if(r)return r;throw new ee.MongoParseError("Cannot make WriteConcern from wtimeout")}},zlibCompressionLevel:{default:0,type:"int"},mongodbLogPath:{transform({values:[t]}){if(!(typeof t=="string"&&["stderr","stdout"].includes(t)||t&&typeof t=="object"&&"write"in t&&typeof t.write=="function"))throw new ee.MongoAPIError("Option 'mongodbLogPath' must be of type 'stderr' | 'stdout' | MongoDBLogWritable");return t}},mongodbLogComponentSeverities:{transform({values:[t]}){if(typeof t!="object"||!t)throw new ee.MongoAPIError("Option 'mongodbLogComponentSeverities' must be a non-null object");for(let[e,r]of Object.entries(t)){if(typeof r!="string"||typeof e!="string")throw new ee.MongoAPIError("User input for option 'mongodbLogComponentSeverities' object cannot include a non-string key or value");if(!Object.values(f9.MongoLoggableComponent).some(n=>n===e)&&e!=="default")throw new ee.MongoAPIError(`User input for option 'mongodbLogComponentSeverities' contains invalid key: ${e}`);if(!Object.values(f9.SeverityLevel).some(n=>n===r))throw new ee.MongoAPIError(`Option 'mongodbLogComponentSeverities' does not support ${r} as a value for ${e}`)}return t}},mongodbLogMaxDocumentLength:{type:"uint"},connectionType:{type:"any"},srvPoller:{type:"any"},allowPartialTrustChain:{type:"any"},minDHSize:{type:"any"},pskCallback:{type:"any"},secureContext:{type:"any"},enableTrace:{type:"any"},requestCert:{type:"any"},rejectUnauthorized:{type:"any"},checkServerIdentity:{type:"any"},keepAliveInitialDelay:{type:"any"},ALPNProtocols:{type:"any"},SNICallback:{type:"any"},session:{type:"any"},requestOCSP:{type:"any"},localAddress:{type:"any"},localPort:{type:"any"},hints:{type:"any"},lookup:{type:"any"},ca:{type:"any"},cert:{type:"any"},ciphers:{type:"any"},crl:{type:"any"},ecdhCurve:{type:"any"},key:{type:"any"},passphrase:{type:"any"},pfx:{type:"any"},secureProtocol:{type:"any"},index:{type:"any"},__skipPingOnConnect:{type:"boolean"}};ls.DEFAULT_OPTIONS=new Bp(Object.entries(ls.OPTIONS).filter(([,t])=>t.default!=null).map(([t,e])=>[t,e.default]))});var Kj=m(M2=>{"use strict";Object.defineProperty(M2,"__esModule",{value:!0});M2.MongoDBAWS=void 0;var _9=pe(),E9=pi(),Np=z(),Ip=X(),tSe=$a(),rSe=KC(),nSe=Fg(),sSe=zi(),iSe=110,b9={useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},S9=class extends tSe.AuthProvider{constructor(e){super(),this.credentialFetcher=new rSe.AWSSDKCredentialProvider(e)}async auth(e){let{connection:r}=e;if(!e.credentials)throw new Np.MongoMissingCredentialsError("AuthContext must provide credentials.");if("kModuleError"in E9.aws4)throw E9.aws4.kModuleError;let{sign:n}=E9.aws4;if((0,Ip.maxWireVersion)(r)<9)throw new Np.MongoCompatibilityError("MONGODB-AWS authentication requires MongoDB version 4.4 or later");e.credentials=await oSe(e.credentials,this.credentialFetcher);let{credentials:s}=e,i=s.username,o=s.password,a=s.mechanismProperties.AWS_SESSION_TOKEN,u=i&&o&&a?{accessKeyId:i,secretAccessKey:o,sessionToken:a}:i&&o?{accessKeyId:i,secretAccessKey:o}:void 0,c=s.source,l=await(0,Ip.randomBytes)(32),p={saslStart:1,mechanism:"MONGODB-AWS",payload:_9.serialize({r:l,p:iSe},b9)},d=await r.command((0,Ip.ns)(`${c}.$cmd`),p,void 0),h=_9.deserialize(d.payload.buffer,b9),f=h.h,y=h.s.buffer;if(y.length!==64)throw new Np.MongoRuntimeError(`Invalid server nonce length ${y.length}, expected 64`);if(!Ip.ByteUtils.equals(y.subarray(0,l.byteLength),l))throw new Np.MongoRuntimeError("Server nonce does not begin with client nonce");if(f.length<1||f.length>255||f.indexOf("..")!==-1)throw new Np.MongoRuntimeError(`Server returned an invalid host: "${f}"`);let g="Action=GetCallerIdentity&Version=2011-06-15",_=n({method:"POST",host:f,region:aSe(h.h),service:"sts",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":g.length,"X-MongoDB-Server-Nonce":Ip.ByteUtils.toBase64(y),"X-MongoDB-GS2-CB-Flag":"n"},path:"/",body:g},u),S={a:_.headers.Authorization,d:_.headers["X-Amz-Date"]};a&&(S.t=a);let O={saslContinue:1,conversationId:d.conversationId,payload:_9.serialize(S,b9)};await r.command((0,Ip.ns)(`${c}.$cmd`),O,void 0)}};M2.MongoDBAWS=S9;async function oSe(t,e){function r(s){if(!s.AccessKeyId||!s.SecretAccessKey)throw new Np.MongoMissingCredentialsError("Could not obtain temporary MONGODB-AWS credentials");return new nSe.MongoCredentials({username:s.AccessKeyId,password:s.SecretAccessKey,source:t.source,mechanism:sSe.AuthMechanism.MONGODB_AWS,mechanismProperties:{AWS_SESSION_TOKEN:s.Token}})}let n=await e.getCredentials();return r(n)}function aSe(t){let e=t.split(".");return e.length===1||e[1]==="amazonaws"?"us-east-1":e[1]}});var Gj=m(P2=>{"use strict";Object.defineProperty(P2,"__esModule",{value:!0});P2.finishCommandDocument=uSe;P2.startCommandDocument=cSe;var kp=pe(),Hj=zi();function uSe(t,e){return e!=null?{saslContinue:1,conversationId:e,payload:new kp.Binary(kp.BSON.serialize({jwt:t}))}:{saslStart:1,mechanism:Hj.AuthMechanism.MONGODB_OIDC,payload:new kp.Binary(kp.BSON.serialize({jwt:t}))}}function cSe(t){let e={};return t.username&&(e.n=t.username),{saslStart:1,autoAuthorize:1,mechanism:Hj.AuthMechanism.MONGODB_OIDC,payload:new kp.Binary(kp.BSON.serialize(e))}}});var C9=m(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});Ja.CallbackWorkflow=Ja.AUTOMATED_TIMEOUT_MS=Ja.HUMAN_TIMEOUT_MS=void 0;var lSe=require("timers/promises"),pSe=z(),Jj=X(),w9=Gj();Ja.HUMAN_TIMEOUT_MS=3e5;Ja.AUTOMATED_TIMEOUT_MS=6e4;var dSe=["accessToken","expiresInSeconds","refreshToken"],hSe="User provided OIDC callbacks must return a valid object with an accessToken.",A9=100,O9=class{constructor(e,r){this.cache=e,this.callback=this.withLock(r),this.lastExecutionTime=Date.now()-A9}async speculativeAuth(e,r){if(this.cache.hasAccessToken){let n=this.cache.getAccessToken();e.accessToken=n;let s=(0,w9.finishCommandDocument)(n);return s.db=r.source,{speculativeAuthenticate:s}}return{}}async reauthenticate(e,r){this.cache.hasAccessToken&&(e.accessToken===this.cache.getAccessToken()?(this.cache.removeAccessToken(),delete e.accessToken):e.accessToken=this.cache.getAccessToken()),await this.execute(e,r)}async startAuthentication(e,r,n){let s;return n?.speculativeAuthenticate?s=n.speculativeAuthenticate:s=await e.command((0,Jj.ns)(r.source),(0,w9.startCommandDocument)(r),void 0),s}async finishAuthentication(e,r,n,s){await e.command((0,Jj.ns)(r.source),(0,w9.finishCommandDocument)(n,s),void 0)}async executeAndValidateCallback(e){let r=await this.callback(e);if(fSe(r))throw new pSe.MongoMissingCredentialsError(hSe);return r}withLock(e){let r=Promise.resolve();return async n=>(await r,r=r.catch(()=>null).then(async()=>{let s=Date.now()-this.lastExecutionTime;return s<=A9&&await(0,lSe.setTimeout)(A9-s,{signal:n.timeoutContext}),this.lastExecutionTime=Date.now(),await e(n)}),await r)}};Ja.CallbackWorkflow=O9;function fSe(t){return t==null||typeof t!="object"||!("accessToken"in t)?!0:!Object.getOwnPropertyNames(t).every(e=>dSe.includes(e))}});var D9=m(B2=>{"use strict";Object.defineProperty(B2,"__esModule",{value:!0});B2.AutomatedCallbackWorkflow=void 0;var v9=z(),Yj=ir(),mSe=I2(),x9=C9(),T9=class extends x9.CallbackWorkflow{constructor(e,r){super(e,r)}async execute(e,r){if(this.cache.hasAccessToken){let s=this.cache.getAccessToken();e.accessToken||(e.accessToken=s);try{return await this.finishAuthentication(e,r,s)}catch(i){if(i instanceof v9.MongoError&&i.code===v9.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),await this.execute(e,r);throw i}}let n=await this.fetchAccessToken(r);this.cache.put(n),e.accessToken=n.accessToken,await this.finishAuthentication(e,r,n.accessToken)}async fetchAccessToken(e){let r=new AbortController,n={timeoutContext:r.signal,version:mSe.OIDC_VERSION};e.username&&(n.username=e.username),e.mechanismProperties.TOKEN_RESOURCE&&(n.tokenAudience=e.mechanismProperties.TOKEN_RESOURCE);let s=Yj.Timeout.expires(x9.AUTOMATED_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(n),s])}catch(i){throw Yj.TimeoutError.is(i)?(r.abort(),new v9.MongoOIDCError(`OIDC callback timed out after ${x9.AUTOMATED_TIMEOUT_MS}ms.`)):i}finally{s.clear()}}};B2.AutomatedCallbackWorkflow=T9});var Xj=m(N2=>{"use strict";Object.defineProperty(N2,"__esModule",{value:!0});N2.callback=void 0;var Qj=GC(),M9=z(),ySe=X(),gSe=Object.freeze({Metadata:"true",Accept:"application/json"}),_Se="Azure endpoint did not return a value with only access_token and expires_in properties",ESe="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure.",bSe=async t=>{let e=t.tokenAudience,r=t.username;if(!e)throw new M9.MongoAzureError(ESe);let n=await SSe(e,r);if(!wSe(n))throw new M9.MongoAzureError(_Se);return n};N2.callback=bSe;async function SSe(t,e){let r=new URL(Qj.AZURE_BASE_URL);(0,Qj.addAzureParams)(r,t,e);let n=await(0,ySe.get)(r,{headers:gSe});if(n.status!==200)throw new M9.MongoAzureError(`Status code ${n.status} returned from the Azure endpoint. Response body: ${n.body}`);let s=JSON.parse(n.body);return{accessToken:s.access_token,expiresInSeconds:Number(s.expires_in)}}function wSe(t){return t==null||typeof t!="object"?!1:"accessToken"in t&&typeof t.accessToken=="string"&&"expiresInSeconds"in t&&typeof t.expiresInSeconds=="number"}});var eL=m(k2=>{"use strict";Object.defineProperty(k2,"__esModule",{value:!0});k2.callback=void 0;var Zj=z(),ASe=X(),OSe="http://metadata/computeMetadata/v1/instance/service-accounts/default/identity",CSe=Object.freeze({"Metadata-Flavor":"Google"}),vSe="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is gcp.",xSe=async t=>{let e=t.tokenAudience;if(!e)throw new Zj.MongoGCPError(vSe);return await TSe(e)};k2.callback=xSe;async function TSe(t){let e=new URL(OSe);e.searchParams.append("audience",t);let r=await(0,ASe.get)(e,{headers:CSe});if(r.status!==200)throw new Zj.MongoGCPError(`Status code ${r.status} returned from the GCP endpoint. Response body: ${r.body}`);return{accessToken:r.body}}});var nL=m(R2=>{"use strict";Object.defineProperty(R2,"__esModule",{value:!0});R2.callback=void 0;var DSe=require("fs/promises"),MSe="/var/run/secrets/kubernetes.io/serviceaccount/token",tL="AZURE_FEDERATED_TOKEN_FILE",rL="AWS_WEB_IDENTITY_TOKEN_FILE",PSe=async()=>{let t;return process.env[tL]?t=process.env[tL]:process.env[rL]?t=process.env[rL]:t=MSe,{accessToken:await(0,DSe.readFile)(t,"utf8")}};R2.callback=PSe});var B9=m(F2=>{"use strict";Object.defineProperty(F2,"__esModule",{value:!0});F2.TokenCache=void 0;var BSe=z(),Ah=class extends BSe.MongoDriverError{},P9=class{get hasAccessToken(){return!!this.accessToken}get hasRefreshToken(){return!!this.refreshToken}get hasIdpInfo(){return!!this.idpInfo}getAccessToken(){if(!this.accessToken)throw new Ah("Attempted to get an access token when none exists.");return this.accessToken}getRefreshToken(){if(!this.refreshToken)throw new Ah("Attempted to get a refresh token when none exists.");return this.refreshToken}getIdpInfo(){if(!this.idpInfo)throw new Ah("Attempted to get IDP information when none exists.");return this.idpInfo}put(e,r){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expiresInSeconds=e.expiresInSeconds,r&&(this.idpInfo=r)}removeAccessToken(){this.accessToken=void 0}removeRefreshToken(){this.refreshToken=void 0}};F2.TokenCache=P9});var sL=m($2=>{"use strict";Object.defineProperty($2,"__esModule",{value:!0});$2.callback=void 0;var ISe=require("fs"),NSe=z(),kSe="OIDC_TOKEN_FILE must be set in the environment.",RSe=async()=>{let t=process.env.OIDC_TOKEN_FILE;if(!t)throw new NSe.MongoAWSError(kSe);return{accessToken:await ISe.promises.readFile(t,"utf8")}};$2.callback=RSe});var I2=m(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.MongoDBOIDC=Fs.OIDC_WORKFLOWS=Fs.OIDC_VERSION=void 0;var oL=z(),FSe=$a(),q2=D9(),$Se=Xj(),qSe=eL(),jSe=nL(),j2=B9(),LSe=sL(),USe="AuthContext must provide credentials.";Fs.OIDC_VERSION=1;Fs.OIDC_WORKFLOWS=new Map;Fs.OIDC_WORKFLOWS.set("test",()=>new q2.AutomatedCallbackWorkflow(new j2.TokenCache,LSe.callback));Fs.OIDC_WORKFLOWS.set("azure",()=>new q2.AutomatedCallbackWorkflow(new j2.TokenCache,$Se.callback));Fs.OIDC_WORKFLOWS.set("gcp",()=>new q2.AutomatedCallbackWorkflow(new j2.TokenCache,qSe.callback));Fs.OIDC_WORKFLOWS.set("k8s",()=>new q2.AutomatedCallbackWorkflow(new j2.TokenCache,jSe.callback));var I9=class extends FSe.AuthProvider{constructor(e){if(super(),!e)throw new oL.MongoInvalidArgumentError("No workflow provided to the OIDC auth provider.");this.workflow=e}async auth(e){let{connection:r,reauthenticating:n,response:s}=e;if(s?.speculativeAuthenticate?.done&&!n)return;let i=iL(e);n?await this.workflow.reauthenticate(r,i):await this.workflow.execute(r,i,s)}async prepare(e,r){let{connection:n}=r,s=iL(r),i=await this.workflow.speculativeAuth(n,s);return{...e,...i}}};Fs.MongoDBOIDC=I9;function iL(t){let{credentials:e}=t;if(!e)throw new oL.MongoMissingCredentialsError(USe);return e}});var uL=m(L2=>{"use strict";Object.defineProperty(L2,"__esModule",{value:!0});L2.HumanCallbackWorkflow=void 0;var VSe=pe(),Oh=z(),aL=ir(),WSe=I2(),N9=C9(),k9=class extends N9.CallbackWorkflow{constructor(e,r){super(e,r)}async execute(e,r){if(this.cache.hasAccessToken){let a=this.cache.getAccessToken();e.accessToken=a;try{return await this.finishAuthentication(e,r,a)}catch(u){if(u instanceof Oh.MongoError&&u.code===Oh.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),delete e.accessToken,await this.execute(e,r);throw u}}if(this.cache.hasRefreshToken){let a=this.cache.getRefreshToken(),u=await this.fetchAccessToken(this.cache.getIdpInfo(),r,a);this.cache.put(u),e.accessToken=u.accessToken;try{return await this.finishAuthentication(e,r,u.accessToken)}catch(c){if(c instanceof Oh.MongoError&&c.code===Oh.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeRefreshToken(),delete e.accessToken,await this.execute(e,r);throw c}}let n=await this.startAuthentication(e,r),s=n.conversationId,i=VSe.BSON.deserialize(n.payload.buffer),o=await this.fetchAccessToken(i,r);return this.cache.put(o,i),e.accessToken=o.accessToken,await this.finishAuthentication(e,r,o.accessToken,s)}async fetchAccessToken(e,r,n){let s=new AbortController,i={timeoutContext:s.signal,version:WSe.OIDC_VERSION,idpInfo:e};r.username&&(i.username=r.username),n&&(i.refreshToken=n);let o=aL.Timeout.expires(N9.HUMAN_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(i),o])}catch(a){throw aL.TimeoutError.is(a)?(s.abort(),new Oh.MongoOIDCError(`OIDC callback timed out after ${N9.HUMAN_TIMEOUT_MS}ms.`)):a}finally{o.clear()}}};L2.HumanCallbackWorkflow=k9});var cL=m(U2=>{"use strict";Object.defineProperty(U2,"__esModule",{value:!0});U2.Plain=void 0;var zSe=pe(),KSe=z(),HSe=X(),GSe=$a(),R9=class extends GSe.AuthProvider{async auth(e){let{connection:r,credentials:n}=e;if(!n)throw new KSe.MongoMissingCredentialsError("AuthContext must provide credentials.");let{username:s,password:i}=n,a={saslStart:1,mechanism:"PLAIN",payload:new zSe.Binary(Buffer.from(`\0${s}\0${i}`)),autoAuthorize:1};await r.command((0,HSe.ns)("$external.$cmd"),a,void 0)}};U2.Plain=R9});var hL=m((tRe,dL)=>{"use strict";var lL=t=>t.codePointAt(0),JSe=t=>t[0],YSe=t=>t[t.length-1];function pL(t){let e=[],r=t.length;for(let n=0;n<r;n+=1){let s=t.charCodeAt(n);if(s>=55296&&s<=56319&&r>n+1){let i=t.charCodeAt(n+1);if(i>=56320&&i<=57343){e.push((s-55296)*1024+i-56320+65536),n+=1;continue}}e.push(s)}return e}function Ch({unassigned_code_points:t,commonly_mapped_to_nothing:e,non_ASCII_space_characters:r,prohibited_characters:n,bidirectional_r_al:s,bidirectional_l:i},o,a={}){let u=r,c=e;if(typeof o!="string")throw new TypeError("Expected string.");if(o.length===0)return"";let l=pL(o).map(S=>u.get(S)?32:S).filter(S=>!c.get(S)),p=String.fromCodePoint.apply(null,l).normalize("NFKC"),d=pL(p);if(d.some(S=>n.get(S)))throw new Error("Prohibited character, see https://tools.ietf.org/html/rfc4013#section-2.3");if(a.allowUnassigned!==!0&&d.some(O=>t.get(O)))throw new Error("Unassigned code point, see https://tools.ietf.org/html/rfc4013#section-2.5");let f=d.some(S=>s.get(S)),y=d.some(S=>i.get(S));if(f&&y)throw new Error("String must not contain RandALCat and LCat at the same time, see https://tools.ietf.org/html/rfc3454#section-6");let g=s.get(lL(JSe(p))),_=s.get(lL(YSe(p)));if(f&&!(g&&_))throw new Error("Bidirectional RandALCat character must be the first and the last character of the string, see https://tools.ietf.org/html/rfc3454#section-6");return p}Ch.saslprep=Ch;Ch.default=Ch;dL.exports=Ch});var yL=m((rRe,mL)=>{mL.exports=Io;function Io(t,e){if(!(this instanceof Io))return new Io(t,e);this.length=0,this.updates=[],this.path=new Uint16Array(4),this.pages=new Array(32768),this.maxPages=this.pages.length,this.level=0,this.pageSize=t||1024,this.deduplicate=e?e.deduplicate:null,this.zeros=this.deduplicate?V2(this.deduplicate.length):null}Io.prototype.updated=function(t){for(;this.deduplicate&&t.buffer[t.deduplicate]===this.deduplicate[t.deduplicate];)if(t.deduplicate++,t.deduplicate===this.deduplicate.length){t.deduplicate=0,t.buffer.equals&&t.buffer.equals(this.deduplicate)&&(t.buffer=this.deduplicate);break}t.updated||!this.updates||(t.updated=!0,this.updates.push(t))};Io.prototype.lastUpdate=function(){if(!this.updates||!this.updates.length)return null;var t=this.updates.pop();return t.updated=!1,t};Io.prototype._array=function(t,e){if(t>=this.maxPages){if(e)return;QSe(this,t)}ewe(t,this.path);for(var r=this.pages,n=this.level;n>0;n--){var s=this.path[n],i=r[s];if(!i){if(e)return;i=r[s]=new Array(32768)}r=i}return r};Io.prototype.get=function(t,e){var r=this._array(t,e),n=this.path[0],s=r&&r[n];return!s&&!e&&(s=r[n]=new fL(t,V2(this.pageSize)),t>=this.length&&(this.length=t+1)),s&&s.buffer===this.deduplicate&&this.deduplicate&&!e&&(s.buffer=ZSe(s.buffer),s.deduplicate=0),s};Io.prototype.set=function(t,e){var r=this._array(t,!1),n=this.path[0];if(t>=this.length&&(this.length=t+1),!e||this.zeros&&e.equals&&e.equals(this.zeros)){r[n]=void 0;return}this.deduplicate&&e.equals&&e.equals(this.deduplicate)&&(e=this.deduplicate);var s=r[n],i=XSe(e,this.pageSize);s?s.buffer=i:r[n]=new fL(t,i)};Io.prototype.toBuffer=function(){for(var t=new Array(this.length),e=V2(this.pageSize),r=0;r<t.length;)for(var n=this._array(r,!0),s=0;s<32768&&r<t.length;s++)t[r++]=n&&n[s]?n[s].buffer:e;return Buffer.concat(t)};function QSe(t,e){for(;t.maxPages<e;){var r=t.pages;t.pages=new Array(32768),t.pages[0]=r,t.level++,t.maxPages*=32768}}function XSe(t,e){if(t.length===e)return t;if(t.length>e)return t.slice(0,e);var r=V2(e);return t.copy(r),r}function V2(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e}function ZSe(t){var e=Buffer.allocUnsafe?Buffer.allocUnsafe(t.length):new Buffer(t.length);return t.copy(e),e}function fL(t,e){this.offset=t*e.length,this.buffer=e,this.updated=!1,this.deduplicate=0}function ewe(t,e){t=(t-(e[0]=t&32767))/32768,t=(t-(e[1]=t&32767))/32768,e[3]=(t-(e[2]=t&32767))/32768&32767}});var _L=m((nRe,gL)=>{var twe=yL();gL.exports=Ya;function Ya(t){if(!(this instanceof Ya))return new Ya(t);if(t||(t={}),Buffer.isBuffer(t)&&(t={buffer:t}),this.pageOffset=t.pageOffset||0,this.pageSize=t.pageSize||1024,this.pages=t.pages||twe(this.pageSize),this.byteLength=this.pages.length*this.pageSize,this.length=8*this.byteLength,!nwe(this.pageSize))throw new Error("The page size should be a power of two");if(this._trackUpdates=!!t.trackUpdates,this._pageMask=this.pageSize-1,t.buffer){for(var e=0;e<t.buffer.length;e+=this.pageSize)this.pages.set(e/this.pageSize,t.buffer.slice(e,e+this.pageSize));this.byteLength=t.buffer.length,this.length=8*this.byteLength}}Ya.prototype.get=function(t){var e=t&7,r=(t-e)/8;return!!(this.getByte(r)&128>>e)};Ya.prototype.getByte=function(t){var e=t&this._pageMask,r=(t-e)/this.pageSize,n=this.pages.get(r,!0);return n?n.buffer[e+this.pageOffset]:0};Ya.prototype.set=function(t,e){var r=t&7,n=(t-r)/8,s=this.getByte(n);return this.setByte(n,e?s|128>>r:s&(255^128>>r))};Ya.prototype.toBuffer=function(){for(var t=rwe(this.pages.length*this.pageSize),e=0;e<this.pages.length;e++){var r=this.pages.get(e,!0),n=e*this.pageSize;r&&r.buffer.copy(t,n,this.pageOffset,this.pageOffset+this.pageSize)}return t};Ya.prototype.setByte=function(t,e){var r=t&this._pageMask,n=(t-r)/this.pageSize,s=this.pages.get(n,!1);return r+=this.pageOffset,s.buffer[r]===e?!1:(s.buffer[r]=e,t>=this.byteLength&&(this.byteLength=t+1,this.length=this.byteLength*8),this._trackUpdates&&this.pages.updated(s),!0)};function rwe(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e}function nwe(t){return!(t&t-1)}});var EL=m(vh=>{"use strict";var swe=vh&&vh.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vh,"__esModule",{value:!0});vh.createMemoryCodePoints=owe;var iwe=swe(_L());function owe(t){let e=0;function r(){let c=t.readUInt32BE(e);e+=4;let l=t.slice(e,e+c);return e+=c,(0,iwe.default)({buffer:l})}let n=r(),s=r(),i=r(),o=r(),a=r(),u=r();return{unassigned_code_points:n,commonly_mapped_to_nothing:s,non_ASCII_space_characters:i,prohibited_characters:o,bidirectional_r_al:a,bidirectional_l:u}}});var bL=m(F9=>{"use strict";Object.defineProperty(F9,"__esModule",{value:!0});var awe=require("zlib");F9.default=(0,awe.gunzipSync)(Buffer.from("H4sIAAAAAAACA+3dTYgcaRkA4LemO9Mhxm0FITnE9Cwr4jHgwgZ22B6YywqCJ0HQg5CL4sGTuOjCtGSF4CkHEW856MlTQHD3EJnWkU0Owh5VxE3LHlYQdNxd2U6mU59UV/d09fw4M2EySSXPAzNdP1/9fX/99bzVNZEN4jisRDulVFnQmLxm1aXF9Id/2/xMxNJ4XZlg576yuYlGt9gupV6xoFf8jhu9YvulVrFlp5XSx+lfvYhORGPXvqIRWSxERKtIm8bKFd10WNfKDS5Fo9jJWrq2+M2IlW+8uHgl/+BsROfPF4v5L7148Ur68Sha6dqZpYiVVy8tvLCWXo80Sf/lS89dGX2wHGvpzoXVn75/YWH5wmqe8uika82ViJXTy83Ve2k5Urozm38wm4/ls6t5uT6yfsTSJ7J3T0VKt8c5ExEXI8aFkH729c3eT+7EC6ca8cVULZUiYacX0R5PNWNxlh9L1y90q5kyzrpyy+9WcvOV6URntqw7La9sNVstXyczWVaWYbaaTYqzOHpr7pyiNT3/YzKuT63Z/FqKZlFTiuXtFM2vVOtIq7jiyKJbWZaOWD0euz0yoV2Z7kY0xq2x0YhfzVpmM5px9nTEH7JZ0ot5u39p0ma75Z472/s/H+2yr2inYyuq7fMvJivH2rM72N/Z3lyL31F2b1ya1P0zn816k2KP6JU9UzseucdQH5YqVeH/lFajSN2udg+TLJ9rksNxlvV2lki19rXKI43TPLejFu4ov7k3nMbhyhfY3Xb37f8BAGCf0eMTOH5szf154KmnNgKcnLb+Fzi2AfXktbN7fJelwTAiO/W5uQ2KINXRYu+znqo/WTAdLadURHmy3qciazd3bra4T3w16/f7t7Ms9U5gfJu10955sx1r3vmhBAAAAAAAgId20J1iZbDowNvIjuH427Gr5l/eiC+8OplZON8sVjx/qr9y+Pj+YRItT+NqAM+kkZs3AAAAAID6yfx1FwCAI97/dCh1/ub6SA0AAAAAAAAAgNoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hutp5SiQpYAAAAAAAAAQO2MIpZiT804flnAE2fhwjOeAZXr76kOAAAAAAAA8FjNf4N/l0NE3U/vuVQskLpSd4/Yh2xu9xTu0tFeeNYsLI2f/VMdNxTzj6Je9E/+6pp6Nn3awW3A54goe4Bss6v+PGsjQGMAAAAAAOBp5XEgwH6e7J7rwEQHRb/XvAMAAAAAAAA8yzoDeQDwVGjIAgAAAAAAAACoPfF/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqL/GSkSkClkCAAAAAAAAALXTSAAAAAAAAABA3Y1kAQAAAAAAAADUX8RSXZ9dsHC9+M8Fg2Ex/em1lAZpEBGttcrVjZqLEa+k0XpKw9mG4zWx4ukPUMhkAQAAAAAAABzBqbSe3//rXOS9HxGdo4TqR2XkutCdBu+LaPZw/lBbO7cbHnh2C7N7AIo4evEznllqLqWUp/LnYOtpM2bnOH66wI1+9GO4sOuISwv/TOlumu56FDv3NZhc4mR9v7zYIrafr40j/Cccvj9Xns3t3mu99E7qxUv3bqS0/ouNH/08++RGemfQ+nsx/5uNXsQPGulynPvv3ZTW37zd+1ovrqaYpP/122X6Xpx779Z3zr/3YOPKW1lkaRDf31pPaf3j/msRsVGkL+d/f+/m4sJsPm1cfSsr16e8m9Ldj/KsnyIuR3nXw83Is3EhxLd/2V773ks3m/cj/THKUummdP9qKhIOImuOU0Xjwb3y+oqt735rpTetVbF9n8R4x9crRfO77TKqVOZpDclv5bfK18lMnk+q0K18UpxF/RrGXE0Zxtqx3tWSj+vxbL4XaasfKb0dRbtLW73JsfPGg177H+OmGKlfvS1msllt7JEJm9XOJqXR+Fkfo1H66uy5H1v3Xx5+uJmGLw9jro2u7Loj4PnuR6+f+e3d261+eazNhzrL7X83MohoHpS4PddV8ki1it61//pw1g7z6p1U/26Nm2llST57B5rUvuG0XqSU/rPd7jYrqWcbd+beJQ77BgPMDwn37/8BAGCf0eMTOH4cPlufv9VGgJOzqf8Fjm1APXkd7B7f5dF57GPMaWy/MTvjvNvtXj6h8W2+GXvnzXaseeeHEgAAAAAAAB7aQXeKlcGiadBoEOeLb2dtpGOL2MyOtf391a3P/zD96c3JzIP3t4oV797vrh8+vn+YRL5bBuj/AQAAAABqJvfHXQAAHkX82zfXAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACeAgkAAAAAAAAAqLuRLAAAAAAAAACA2hv9D1iu/VAYaAYA","base64"))});var AL=m(($9,wL)=>{"use strict";var SL=$9&&$9.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},uwe=SL(hL()),cwe=EL(),lwe=SL(bL()),pwe=(0,cwe.createMemoryCodePoints)(lwe.default);function xh(t,e){return(0,uwe.default)(pwe,t,e)}xh.saslprep=xh;xh.default=xh;wL.exports=xh});var ML=m(Rp=>{"use strict";Object.defineProperty(Rp,"__esModule",{value:!0});Rp.ScramSHA256=Rp.ScramSHA1=void 0;var dwe=AL(),ic=require("crypto"),q9=pe(),gi=z(),K2=X(),hwe=$a(),OL=zi(),H2=class extends hwe.AuthProvider{constructor(e){super(),this.cryptoMethod=e||"sha1"}async prepare(e,r){let n=this.cryptoMethod,s=r.credentials;if(!s)throw new gi.MongoMissingCredentialsError("AuthContext must provide credentials.");let i=await(0,K2.randomBytes)(24);return r.nonce=i,{...e,speculativeAuthenticate:{...TL(n,s,i),db:s.source}}}async auth(e){let{reauthenticating:r,response:n}=e;return n?.speculativeAuthenticate&&!r?await DL(this.cryptoMethod,n.speculativeAuthenticate,e):await fwe(this.cryptoMethod,e)}};function vL(t){return t.replace("=","=3D").replace(",","=2C")}function xL(t,e){return Buffer.concat([Buffer.from("n=","utf8"),Buffer.from(t,"utf8"),Buffer.from(",r=","utf8"),Buffer.from(e.toString("base64"),"utf8")])}function TL(t,e,r){let n=vL(e.username);return{saslStart:1,mechanism:t==="sha1"?OL.AuthMechanism.MONGODB_SCRAM_SHA1:OL.AuthMechanism.MONGODB_SCRAM_SHA256,payload:new q9.Binary(Buffer.concat([Buffer.from("n,,","utf8"),xL(n,r)])),autoAuthorize:1,options:{skipEmptyExchange:!0}}}async function fwe(t,e){let{connection:r,credentials:n}=e;if(!n)throw new gi.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!e.nonce)throw new gi.MongoInvalidArgumentError("AuthContext must contain a valid nonce property");let s=e.nonce,i=n.source,o=TL(t,n,s),a=await r.command((0,K2.ns)(`${i}.$cmd`),o,void 0);await DL(t,a,e)}async function DL(t,e,r){let n=r.connection,s=r.credentials;if(!s)throw new gi.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!r.nonce)throw new gi.MongoInvalidArgumentError("Unable to continue SCRAM without valid nonce");let i=r.nonce,o=s.source,a=vL(s.username),u=s.password,c=t==="sha256"?(0,dwe.saslprep)(u):mwe(a,u),l=Buffer.isBuffer(e.payload)?new q9.Binary(e.payload):e.payload,p=CL(l),d=parseInt(p.i,10);if(d&&d<4096)throw new gi.MongoRuntimeError(`Server returned an invalid iteration count ${d}`);let h=p.s,f=p.r;if(f.startsWith("nonce"))throw new gi.MongoRuntimeError(`Server returned an invalid nonce: ${f}`);let y=`c=biws,r=${f}`,g=bwe(c,Buffer.from(h,"base64"),d,t),_=W2(t,g,"Client Key"),S=W2(t,g,"Server Key"),O=gwe(t,_),E=[xL(a,i),l.toString("utf8"),y].join(","),A=W2(t,O,E),x=`p=${ywe(_,A)}`,v=[y,x].join(","),R=W2(t,S,E),M={saslContinue:1,conversationId:e.conversationId,payload:new q9.Binary(Buffer.from(v))},I=await n.command((0,K2.ns)(`${o}.$cmd`),M,void 0),j=CL(I.payload);if(!Swe(Buffer.from(j.v,"base64"),R))throw new gi.MongoRuntimeError("Server returned an invalid signature");if(I.done!==!1)return;let U={saslContinue:1,conversationId:I.conversationId,payload:Buffer.alloc(0)};await n.command((0,K2.ns)(`${o}.$cmd`),U,void 0)}function CL(t){let e=t.toString("utf8"),r={},n=e.split(",");for(let s=0;s<n.length;s++){let i=(n[s].match(/^([^=]*)=(.*)$/)??[]).slice(1);r[i[0]]=i[1]}return r}function mwe(t,e){if(typeof t!="string")throw new gi.MongoInvalidArgumentError("Username must be a string");if(typeof e!="string")throw new gi.MongoInvalidArgumentError("Password must be a string");if(e.length===0)throw new gi.MongoInvalidArgumentError("Password cannot be empty");let r;try{r=ic.createHash("md5")}catch(n){throw ic.getFips()?new Error("Auth mechanism SCRAM-SHA-1 is not supported in FIPS mode"):n}return r.update(`${t}:mongo:${e}`,"utf8"),r.digest("hex")}function ywe(t,e){Buffer.isBuffer(t)||(t=Buffer.from(t)),Buffer.isBuffer(e)||(e=Buffer.from(e));let r=Math.max(t.length,e.length),n=[];for(let s=0;s<r;s+=1)n.push(t[s]^e[s]);return Buffer.from(n).toString("base64")}function gwe(t,e){return ic.createHash(t).update(e).digest()}function W2(t,e,r){return ic.createHmac(t,e).update(r).digest()}var z2={},j9=0;function _we(){z2={},j9=0}var Ewe={sha256:32,sha1:20};function bwe(t,e,r,n){let s=[t,e.toString("base64"),r].join("_");if(z2[s]!=null)return z2[s];let i=ic.pbkdf2Sync(t,e,r,Ewe[n],n);return j9>=200&&_we(),z2[s]=i,j9+=1,i}function Swe(t,e){if(t.length!==e.length)return!1;if(typeof ic.timingSafeEqual=="function")return ic.timingSafeEqual(t,e);let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}var L9=class extends H2{constructor(){super("sha1")}};Rp.ScramSHA1=L9;var U9=class extends H2{constructor(){super("sha256")}};Rp.ScramSHA256=U9});var IL=m(G2=>{"use strict";Object.defineProperty(G2,"__esModule",{value:!0});G2.X509=void 0;var PL=z(),wwe=X(),Awe=$a(),V9=class extends Awe.AuthProvider{async prepare(e,r){let{credentials:n}=r;if(!n)throw new PL.MongoMissingCredentialsError("AuthContext must provide credentials.");return{...e,speculativeAuthenticate:BL(n)}}async auth(e){let r=e.connection,n=e.credentials;if(!n)throw new PL.MongoMissingCredentialsError("AuthContext must provide credentials.");e.response?.speculativeAuthenticate||await r.command((0,wwe.ns)("$external.$cmd"),BL(n),void 0)}};G2.X509=V9;function BL(t){let e={authenticate:1,mechanism:"MONGODB-X509"};return t.username&&(e.user=t.username),e}});var z9=m(J2=>{"use strict";Object.defineProperty(J2,"__esModule",{value:!0});J2.MongoClientAuthProviders=void 0;var Owe=Rg(),Cwe=Kj(),RL=I2(),vwe=D9(),xwe=uL(),NL=B9(),Twe=cL(),oc=zi(),kL=ML(),Dwe=IL(),FL=z(),Mwe=new Map([[oc.AuthMechanism.MONGODB_AWS,({AWS_CREDENTIAL_PROVIDER:t})=>new Cwe.MongoDBAWS(t)],[oc.AuthMechanism.MONGODB_GSSAPI,()=>new Owe.GSSAPI],[oc.AuthMechanism.MONGODB_OIDC,t=>new RL.MongoDBOIDC(Pwe(t))],[oc.AuthMechanism.MONGODB_PLAIN,()=>new Twe.Plain],[oc.AuthMechanism.MONGODB_SCRAM_SHA1,()=>new kL.ScramSHA1],[oc.AuthMechanism.MONGODB_SCRAM_SHA256,()=>new kL.ScramSHA256],[oc.AuthMechanism.MONGODB_X509,()=>new Dwe.X509]]),W9=class{constructor(){this.existingProviders=new Map}getOrCreateProvider(e,r){let n=this.existingProviders.get(e);if(n)return n;let s=Mwe.get(e);if(!s)throw new FL.MongoInvalidArgumentError(`authMechanism ${e} not supported`);let i=s(r);return this.existingProviders.set(e,i),i}};J2.MongoClientAuthProviders=W9;function Pwe(t){if(t.OIDC_HUMAN_CALLBACK)return new xwe.HumanCallbackWorkflow(new NL.TokenCache,t.OIDC_HUMAN_CALLBACK);if(t.OIDC_CALLBACK)return new vwe.AutomatedCallbackWorkflow(new NL.TokenCache,t.OIDC_CALLBACK);{let e=t.ENVIRONMENT,r=RL.OIDC_WORKFLOWS.get(e)?.();if(!r)throw new FL.MongoInvalidArgumentError(`Could not load workflow for environment ${t.ENVIRONMENT}`);return r}}});var K9=m(Q2=>{"use strict";Object.defineProperty(Q2,"__esModule",{value:!0});Q2.ClientBulkWriteOperation=void 0;var Bwe=ze(),Iwe=X(),Nwe=At(),ac=Xe(),Y2=class extends Nwe.CommandOperation{get commandName(){return"bulkWrite"}constructor(e,r){super(void 0,r),this.SERVER_COMMAND_RESPONSE_TYPE=Bwe.ClientBulkWriteCursorResponse,this.commandBuilder=e,this.options=r,this.ns=new Iwe.MongoDBNamespace("admin","$cmd")}resetBatch(){return this.commandBuilder.resetBatch()}get canRetryWrite(){return this.commandBuilder.isBatchRetryable}handleOk(e){return e}buildCommandDocument(e,r){let n=this.commandBuilder.buildBatch(e.description.maxMessageSizeBytes,e.description.maxWriteBatchSize,e.description.maxBsonObjectSize);return this.canRetryWrite||(this.options.willRetryWrite=!1),n}};Q2.ClientBulkWriteOperation=Y2;(0,ac.defineAspects)(Y2,[ac.Aspect.WRITE_OPERATION,ac.Aspect.SKIP_COLLATION,ac.Aspect.CURSOR_CREATING,ac.Aspect.RETRYABLE,ac.Aspect.COMMAND_BATCHING,ac.Aspect.SUPPORTS_RAW_DATA])});var qL=m(X2=>{"use strict";Object.defineProperty(X2,"__esModule",{value:!0});X2.ClientBulkWriteCursor=void 0;var kwe=K9(),Rwe=Er(),$L=X(),Fwe=Xr(),H9=class t extends Fwe.AbstractCursor{constructor(e,r,n={}){super(e,new $L.MongoDBNamespace("admin","$cmd"),n),this.commandBuilder=r,this.clientBulkWriteOptions=n}get response(){return this.cursorResponse?this.cursorResponse:null}get operations(){return this.commandBuilder.lastOperations}clone(){let e=(0,$L.mergeOptions)({},this.clientBulkWriteOptions);return delete e.session,new t(this.client,this.commandBuilder,{...e})}async _initialize(e){let r=new kwe.ClientBulkWriteOperation(this.commandBuilder,{...this.clientBulkWriteOptions,...this.cursorOptions,session:e}),n=await(0,Rwe.executeOperation)(this.client,r,this.timeoutContext);return this.cursorResponse=n,{server:r.server,session:e,response:n}}};X2.ClientBulkWriteCursor=H9});var zL=m(Ct=>{"use strict";Object.defineProperty(Ct,"__esModule",{value:!0});Ct.buildReplaceOneOperation=Ct.buildUpdateManyOperation=Ct.buildUpdateOneOperation=Ct.buildDeleteManyOperation=Ct.buildDeleteOneOperation=Ct.buildInsertOneOperation=Ct.ClientBulkWriteCommandBuilder=void 0;Ct.buildOperation=Q9;var G9=pe(),jL=nh(),Th=z(),UL=zl(),X9=X(),LL=1e3,Y9=class{constructor(e,r,n){this.models=e,this.options=r,this.pkFactory=n??X9.DEFAULT_PK_FACTORY,this.currentModelIndex=0,this.previousModelIndex=0,this.lastOperations=[],this.isBatchRetryable=!0}get errorsOnly(){return"verboseResults"in this.options?!this.options.verboseResults:!0}hasNextBatch(){return this.currentModelIndex<this.models.length}resetBatch(){return this.currentModelIndex=this.previousModelIndex,!0}buildBatch(e,r,n){this.isBatchRetryable=!0;let s=0,i=0,o=this.baseCommand(),a=new Map;for(this.previousModelIndex=this.currentModelIndex;this.currentModelIndex<this.models.length;){let u=this.models[this.currentModelIndex],c=u.namespace,l=a.get(c);if((u.name==="deleteMany"||u.name==="updateMany")&&(this.isBatchRetryable=!1),l!=null){let p=Q9(u,l,this.pkFactory,this.options),d;try{d=G9.BSON.serialize(p)}catch(h){throw new Th.MongoInvalidArgumentError("Could not serialize operation to BSON",{cause:h})}if(J9("ops",d,n),s+d.length<e&&o.ops.documents.length<r)s=LL+o.ops.push(p,d),this.currentModelIndex++;else break}else{a.set(c,i);let p={ns:c},d=Q9(u,i,this.pkFactory,this.options),h,f;try{h=G9.BSON.serialize(p),f=G9.BSON.serialize(d)}catch(y){throw new Th.MongoInvalidArgumentError("Could not serialize ns info to BSON",{cause:y})}if(J9("nsInfo",h,n),J9("ops",f,n),s+h.length+f.length<e&&o.ops.documents.length<r)s=LL+o.nsInfo.push(p,h)+o.ops.push(d,f),i++,this.currentModelIndex++;else break}}return this.lastOperations=o.ops.documents,o}baseCommand(){let e={bulkWrite:1,errorsOnly:this.errorsOnly,ordered:this.options.ordered??!0,ops:new jL.DocumentSequence("ops"),nsInfo:new jL.DocumentSequence("nsInfo")};return this.options.bypassDocumentValidation!=null&&(e.bypassDocumentValidation=this.options.bypassDocumentValidation),this.options.let&&(e.let=this.options.let),this.options.comment!==void 0&&(e.comment=this.options.comment),e}};Ct.ClientBulkWriteCommandBuilder=Y9;function J9(t,e,r){if(e.length>r)throw new Th.MongoInvalidArgumentError(`Client bulk write operation ${t} of length ${e.length} exceeds the max bson object size of ${r}`)}var $we=(t,e,r)=>{let n={insert:e,document:t.document};return n.document._id=t.document._id??r.createPk(),n};Ct.buildInsertOneOperation=$we;var qwe=(t,e)=>VL(t,e,!1);Ct.buildDeleteOneOperation=qwe;var jwe=(t,e)=>VL(t,e,!0);Ct.buildDeleteManyOperation=jwe;function VL(t,e,r){let n={delete:e,multi:r,filter:t.filter};return t.hint&&(n.hint=t.hint),t.collation&&(n.collation=t.collation),n}var Lwe=(t,e,r)=>WL(t,e,!1,r);Ct.buildUpdateOneOperation=Lwe;var Uwe=(t,e,r)=>WL(t,e,!0,r);Ct.buildUpdateManyOperation=Uwe;function Vwe(t,e){if(!(0,X9.hasAtomicOperators)(t,e))throw new Th.MongoAPIError("Client bulk write update models must only contain atomic modifiers (start with $) and must not be empty.")}function WL(t,e,r,n){Vwe(t.update,n);let s={update:e,multi:r,filter:t.filter,updateMods:t.update};return t.hint&&(s.hint=t.hint),t.upsert&&(s.upsert=t.upsert),t.arrayFilters&&(s.arrayFilters=t.arrayFilters),t.collation&&(s.collation=t.collation),!r&&"sort"in t&&t.sort!=null&&(s.sort=(0,UL.formatSort)(t.sort)),s}var Wwe=(t,e)=>{if((0,X9.hasAtomicOperators)(t.replacement))throw new Th.MongoAPIError("Client bulk write replace models must not contain atomic modifiers (start with $) and must not be empty.");let r={update:e,multi:!1,filter:t.filter,updateMods:t.replacement};return t.hint&&(r.hint=t.hint),t.upsert&&(r.upsert=t.upsert),t.collation&&(r.collation=t.collation),t.sort!=null&&(r.sort=(0,UL.formatSort)(t.sort)),r};Ct.buildReplaceOneOperation=Wwe;function Q9(t,e,r,n){switch(t.name){case"insertOne":return(0,Ct.buildInsertOneOperation)(t,e,r);case"deleteOne":return(0,Ct.buildDeleteOneOperation)(t,e);case"deleteMany":return(0,Ct.buildDeleteManyOperation)(t,e);case"updateOne":return(0,Ct.buildUpdateOneOperation)(t,e,n);case"updateMany":return(0,Ct.buildUpdateManyOperation)(t,e,n);case"replaceOne":return(0,Ct.buildReplaceOneOperation)(t,e)}}});var KL=m(Z2=>{"use strict";Object.defineProperty(Z2,"__esModule",{value:!0});Z2.ClientBulkWriteResultsMerger=void 0;var zwe=ka(),Kwe=z(),Hwe={acknowledged:!1,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0},Z9=class{static unacknowledged(){return Hwe}constructor(e){this.options=e,this.currentBatchOffset=0,this.writeConcernErrors=[],this.writeErrors=new Map,this.result={acknowledged:!0,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0},e.verboseResults&&(this.result.insertResults=new Map,this.result.updateResults=new Map,this.result.deleteResults=new Map)}get bulkWriteResult(){return{acknowledged:this.result.acknowledged,insertedCount:this.result.insertedCount,upsertedCount:this.result.upsertedCount,matchedCount:this.result.matchedCount,modifiedCount:this.result.modifiedCount,deletedCount:this.result.deletedCount,insertResults:this.result.insertResults,updateResults:this.result.updateResults,deleteResults:this.result.deleteResults}}async merge(e){let r;try{for await(let n of e)if(n.ok===1)this.options.verboseResults&&this.processDocument(e,n);else if(this.options.ordered){let s=new Kwe.MongoClientBulkWriteError({message:"Mongo client ordered bulk write encountered a write error."});throw s.writeErrors.set(n.idx+this.currentBatchOffset,{code:n.code,message:n.errmsg}),s.partialResult=this.result,s}else this.writeErrors.set(n.idx+this.currentBatchOffset,{code:n.code,message:n.errmsg})}catch(n){if(n instanceof zwe.MongoWriteConcernError){let s=n.result;if(r={insertedCount:s.nInserted,upsertedCount:s.nUpserted,matchedCount:s.nMatched,modifiedCount:s.nModified,deletedCount:s.nDeleted,writeConcernError:s.writeConcernError},this.options.verboseResults&&s.cursor.firstBatch)for(let i of s.cursor.firstBatch)i.ok===1&&this.processDocument(e,i)}else throw n}finally{if(e.response){let n=e.response;this.incrementCounts(n)}this.currentBatchOffset+=e.operations.length}if(r){let n=r.writeConcernError;this.incrementCounts(r),this.writeConcernErrors.push({code:n.code,message:n.errmsg})}return this.result}processDocument(e,r){let n=e.operations[r.idx];if("insert"in n&&this.result.insertResults?.set(r.idx+this.currentBatchOffset,{insertedId:n.document._id}),"update"in n){let s={matchedCount:r.n,modifiedCount:r.nModified??0,didUpsert:r.upserted!=null};r.upserted&&(s.upsertedId=r.upserted._id),this.result.updateResults?.set(r.idx+this.currentBatchOffset,s)}"delete"in n&&this.result.deleteResults?.set(r.idx+this.currentBatchOffset,{deletedCount:r.n})}incrementCounts(e){this.result.insertedCount+=e.insertedCount,this.result.upsertedCount+=e.upsertedCount,this.result.matchedCount+=e.matchedCount,this.result.modifiedCount+=e.modifiedCount,this.result.deletedCount+=e.deletedCount}};Z2.ClientBulkWriteResultsMerger=Z9});var JL=m(e_=>{"use strict";Object.defineProperty(e_,"__esModule",{value:!0});e_.ClientBulkWriteExecutor=void 0;var HL=Xr(),Gwe=qL(),uc=z(),Jwe=ir(),Ywe=X(),Qwe=hn(),Xwe=Er(),Zwe=K9(),e3e=zL(),GL=KL(),e8=class{constructor(e,r,n){if(r.length===0)throw new uc.MongoClientBulkWriteExecutionError("No client bulk write models were provided.");if(this.client=e,this.operations=r,this.options={ordered:!0,bypassDocumentValidation:!1,verboseResults:!1,...n},this.options.writeConcern||(this.options.writeConcern=Qwe.WriteConcern.fromOptions(this.client.s.options)),this.options.writeConcern?.w===0){if(this.options.verboseResults)throw new uc.MongoInvalidArgumentError("Cannot request unacknowledged write concern and verbose results");if(this.options.ordered)throw new uc.MongoInvalidArgumentError("Cannot request unacknowledged write concern and ordered writes")}}async execute(){let e=this.client.s.options.pkFactory,r=new e3e.ClientBulkWriteCommandBuilder(this.operations,this.options,e),n=(0,Ywe.resolveTimeoutOptions)(this.client,this.options),s=Jwe.TimeoutContext.create(n);if(this.options.writeConcern?.w===0){for(;r.hasNextBatch();){let i=new Zwe.ClientBulkWriteOperation(r,this.options);await(0,Xwe.executeOperation)(this.client,i,s)}return GL.ClientBulkWriteResultsMerger.unacknowledged()}else{let i=new GL.ClientBulkWriteResultsMerger(this.options);for(;r.hasNextBatch();){let o=new HL.CursorTimeoutContext(s,Symbol()),a={...this.options,timeoutContext:o,...n.timeoutMS!=null&&{timeoutMode:HL.CursorTimeoutMode.LIFETIME}},u=new Gwe.ClientBulkWriteCursor(this.client,r,a);try{await i.merge(u)}catch(c){if(c instanceof uc.MongoServerError&&!(c instanceof uc.MongoClientBulkWriteError)){let l=new uc.MongoClientBulkWriteError({message:"Mongo client bulk write encountered an error during execution"});throw l.cause=c,l.partialResult=i.bulkWriteResult,l}else throw c}}if(i.writeConcernErrors.length>0||i.writeErrors.size>0){let o=new uc.MongoClientBulkWriteError({message:"Mongo client bulk write encountered errors during execution."});throw o.writeConcernErrors=i.writeConcernErrors,o.writeErrors=i.writeErrors,o.partialResult=i.bulkWriteResult,o}return i.bulkWriteResult}}};e_.ClientBulkWriteExecutor=e8});var QL=m(r_=>{"use strict";Object.defineProperty(r_,"__esModule",{value:!0});r_.EndSessionsOperation=void 0;var t3e=ze(),r3e=At(),n3e=sr(),s3e=X(),YL=Xe(),t_=class extends r3e.CommandOperation{constructor(e){super(),this.writeConcern={w:0},this.ns=s3e.MongoDBNamespace.fromString("admin.$cmd"),this.SERVER_COMMAND_RESPONSE_TYPE=t3e.MongoDBResponse,this.sessions=e}buildCommandDocument(e,r){return{endSessions:this.sessions}}buildOptions(e){return{timeoutContext:e,readPreference:n3e.ReadPreference.primaryPreferred}}get commandName(){return"endSessions"}};r_.EndSessionsOperation=t_;(0,YL.defineAspects)(t_,YL.Aspect.WRITE_OPERATION)});var i8=m($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.WaitingForSuitableServerEvent=$s.ServerSelectionSucceededEvent=$s.ServerSelectionFailedEvent=$s.ServerSelectionStartedEvent=$s.ServerSelectionEvent=void 0;var i3e=X(),n_=Lt(),cc=class{constructor(e,r,n){this.selector=e,this.operation=n,this.topologyDescription=r}};$s.ServerSelectionEvent=cc;var t8=class extends cc{constructor(e,r,n){super(e,r,n),this.name=n_.SERVER_SELECTION_STARTED,this.message="Server selection started"}};$s.ServerSelectionStartedEvent=t8;var r8=class extends cc{constructor(e,r,n,s){super(e,r,s),this.name=n_.SERVER_SELECTION_FAILED,this.message="Server selection failed",this.failure=n}};$s.ServerSelectionFailedEvent=r8;var n8=class extends cc{constructor(e,r,n,s){super(e,r,s),this.name=n_.SERVER_SELECTION_SUCCEEDED,this.message="Server selection succeeded";let{host:i,port:o}=i3e.HostAddress.fromString(n).toHostPort();this.serverHost=i,this.serverPort=o}};$s.ServerSelectionSucceededEvent=n8;var s8=class extends cc{constructor(e,r,n,s){super(e,r,s),this.name=n_.WAITING_FOR_SUITABLE_SERVER,this.message="Waiting for suitable server to become available",this.remainingTimeMS=n}};$s.WaitingForSuitableServerEvent=s8});var u8=m(Fp=>{"use strict";Object.defineProperty(Fp,"__esModule",{value:!0});Fp.SrvPoller=Fp.SrvPollingEvent=void 0;var o3e=require("dns"),o8=require("timers"),a3e=z(),u3e=is(),Dh=X(),s_=class{constructor(e){this.srvRecords=e}hostnames(){return new Set(this.srvRecords.map(e=>Dh.HostAddress.fromSrvRecord(e).toString()))}};Fp.SrvPollingEvent=s_;var a8=class t extends u3e.TypedEventEmitter{static{this.SRV_RECORD_DISCOVERY="srvRecordDiscovery"}constructor(e){if(super(),this.on("error",Dh.noop),!e||!e.srvHost)throw new a3e.MongoRuntimeError("Options for SrvPoller must exist and include srvHost");this.srvHost=e.srvHost,this.srvMaxHosts=e.srvMaxHosts??0,this.srvServiceName=e.srvServiceName??"mongodb",this.rescanSrvIntervalMS=6e4,this.heartbeatFrequencyMS=e.heartbeatFrequencyMS??1e4,this.haMode=!1,this.generation=0,this._timeout=void 0}get srvAddress(){return`_${this.srvServiceName}._tcp.${this.srvHost}`}get intervalMS(){return this.haMode?this.heartbeatFrequencyMS:this.rescanSrvIntervalMS}start(){this._timeout||this.schedule()}stop(){this._timeout&&((0,o8.clearTimeout)(this._timeout),this.generation+=1,this._timeout=void 0)}schedule(){this._timeout&&(0,o8.clearTimeout)(this._timeout),this._timeout=(0,o8.setTimeout)(()=>{this._poll().then(void 0,Dh.squashError)},this.intervalMS)}success(e){this.haMode=!1,this.schedule(),this.emit(t.SRV_RECORD_DISCOVERY,new s_(e))}failure(){this.haMode=!0,this.schedule()}async _poll(){let e=this.generation,r;try{r=await o3e.promises.resolveSrv(this.srvAddress)}catch{this.failure();return}if(e!==this.generation)return;let n=[];for(let s of r)try{(0,Dh.checkParentDomainMatch)(s.name,this.srvHost),n.push(s)}catch(i){(0,Dh.squashError)(i)}if(!n.length){this.failure();return}this.success(n)}};Fp.SrvPoller=a8});var iU=m(o_=>{"use strict";Object.defineProperty(o_,"__esModule",{value:!0});o_.Topology=void 0;var c3e=g9(),Rn=Lt(),Xi=z(),Et=Ba(),l3e=is(),Mh=sr(),c8=ir(),Fn=X(),Oe=ts(),Qa=b2(),XL=o9(),p8=hh(),l8=Td(),Xa=i8(),i_=u8(),ZL=Sv(),p3e=0,Ph=(0,Fn.makeStateMachine)({[Oe.STATE_CLOSED]:[Oe.STATE_CLOSED,Oe.STATE_CONNECTING],[Oe.STATE_CONNECTING]:[Oe.STATE_CONNECTING,Oe.STATE_CLOSING,Oe.STATE_CONNECTED,Oe.STATE_CLOSED],[Oe.STATE_CONNECTED]:[Oe.STATE_CONNECTED,Oe.STATE_CLOSING,Oe.STATE_CLOSED],[Oe.STATE_CLOSING]:[Oe.STATE_CLOSING,Oe.STATE_CLOSED]}),Bh=class t extends l3e.TypedEventEmitter{static{this.SERVER_OPENING=Rn.SERVER_OPENING}static{this.SERVER_CLOSED=Rn.SERVER_CLOSED}static{this.SERVER_DESCRIPTION_CHANGED=Rn.SERVER_DESCRIPTION_CHANGED}static{this.TOPOLOGY_OPENING=Rn.TOPOLOGY_OPENING}static{this.TOPOLOGY_CLOSED=Rn.TOPOLOGY_CLOSED}static{this.TOPOLOGY_DESCRIPTION_CHANGED=Rn.TOPOLOGY_DESCRIPTION_CHANGED}static{this.ERROR=Rn.ERROR}static{this.OPEN=Rn.OPEN}static{this.CONNECT=Rn.CONNECT}static{this.CLOSE=Rn.CLOSE}static{this.TIMEOUT=Rn.TIMEOUT}constructor(e,r,n){super(),this.on("error",Fn.noop),this.client=e,n=n??{hosts:[Fn.HostAddress.fromString("localhost:27017")],...Object.fromEntries(c3e.DEFAULT_OPTIONS.entries())},typeof r=="string"?r=[Fn.HostAddress.fromString(r)]:Array.isArray(r)||(r=[r]);let s=[];for(let c of r)if(typeof c=="string")s.push(Fn.HostAddress.fromString(c));else if(c instanceof Fn.HostAddress)s.push(c);else throw new Xi.MongoRuntimeError(`Topology cannot be constructed from ${JSON.stringify(c)}`);let i=d3e(n),o=p3e++,a=n.srvMaxHosts==null||n.srvMaxHosts===0||n.srvMaxHosts>=s.length?s:(0,Fn.shuffle)(s,n.srvMaxHosts),u=new Map;for(let c of a)u.set(c.toString(),new p8.ServerDescription(c));this.waitQueue=new Fn.List,this.s={id:o,options:n,seedlist:s,state:Oe.STATE_CLOSED,description:new ZL.TopologyDescription(i,u,n.replicaSet,void 0,void 0,void 0,n),serverSelectionTimeoutMS:n.serverSelectionTimeoutMS,heartbeatFrequencyMS:n.heartbeatFrequencyMS,minHeartbeatFrequencyMS:n.minHeartbeatFrequencyMS,servers:new Map,credentials:n?.credentials,clusterTime:void 0,detectShardedTopology:c=>this.detectShardedTopology(c),detectSrvRecords:c=>this.detectSrvRecords(c)},this.mongoLogger=e.mongoLogger,this.component="topology",n.srvHost&&!n.loadBalanced&&(this.s.srvPoller=n.srvPoller??new i_.SrvPoller({heartbeatFrequencyMS:this.s.heartbeatFrequencyMS,srvHost:n.srvHost,srvMaxHosts:n.srvMaxHosts,srvServiceName:n.srvServiceName}),this.on(t.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology)),this.connectionLock=void 0}detectShardedTopology(e){let r=e.previousDescription.type,n=e.newDescription.type,s=r!==Oe.TopologyType.Sharded&&n===Oe.TopologyType.Sharded,o=!!this.s.srvPoller?.listeners(i_.SrvPoller.SRV_RECORD_DISCOVERY)?.includes(this.s.detectSrvRecords);s&&!o&&(this.s.srvPoller?.on(i_.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords),this.s.srvPoller?.start())}detectSrvRecords(e){let r=this.s.description;this.s.description=this.s.description.updateFromSrvPollingEvent(e,this.s.options.srvMaxHosts),this.s.description!==r&&(eU(this),this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new Qa.TopologyDescriptionChangedEvent(this.s.id,r,this.s.description)))}get description(){return this.s.description}get loadBalanced(){return this.s.options.loadBalanced}get serverApi(){return this.s.options.serverApi}async connect(e){this.connectionLock??=this._connect(e);try{return await this.connectionLock,this}finally{this.connectionLock=void 0}}async _connect(e){if(e=e??{},this.s.state===Oe.STATE_CONNECTED)return this;Ph(this,Oe.STATE_CONNECTING),this.emitAndLog(t.TOPOLOGY_OPENING,new Qa.TopologyOpeningEvent(this.s.id)),this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new Qa.TopologyDescriptionChangedEvent(this.s.id,new ZL.TopologyDescription(Oe.TopologyType.Unknown),this.s.description));let r=Array.from(this.s.description.servers.values());if(this.s.servers=new Map(r.map(a=>[a.address,nU(this,a)])),this.s.options.loadBalanced)for(let a of r){let u=new p8.ServerDescription(a.hostAddress,void 0,{loadBalanced:this.s.options.loadBalanced});this.serverUpdateHandler(u)}let n=this.client.s.options.serverSelectionTimeoutMS,s=e.readPreference??Mh.ReadPreference.primary,i=c8.TimeoutContext.create({timeoutMS:void 0,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:this.client.s.options.waitQueueTimeoutMS}),o={operationName:"handshake",...e,timeoutContext:i};try{let a=await this.selectServer((0,l8.readPreferenceServerSelector)(s),o);if(!(this.s.options.__skipPingOnConnect===!0)){let c=await a.pool.checkOut({timeoutContext:i});return a.pool.checkIn(c),Ph(this,Oe.STATE_CONNECTED),this.emit(t.OPEN,this),this.emit(t.CONNECT,this),this}return Ph(this,Oe.STATE_CONNECTED),this.emit(t.OPEN,this),this.emit(t.CONNECT,this),this}catch(a){throw this.close(),a}}closeCheckedOutConnections(){for(let e of this.s.servers.values())return e.closeCheckedOutConnections()}close(){if(!(this.s.state===Oe.STATE_CLOSED||this.s.state===Oe.STATE_CLOSING)){for(let e of this.s.servers.values())rU(e,this);this.s.servers.clear(),Ph(this,Oe.STATE_CLOSING),sU(this.waitQueue,new Xi.MongoTopologyClosedError),this.s.srvPoller&&(this.s.srvPoller.stop(),this.s.srvPoller.removeListener(i_.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords)),this.removeListener(t.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology),Ph(this,Oe.STATE_CLOSED),this.emitAndLog(t.TOPOLOGY_CLOSED,new Qa.TopologyClosedEvent(this.s.id))}}async selectServer(e,r){let n;if(typeof e!="function")if(typeof e=="string")n=(0,l8.readPreferenceServerSelector)(Mh.ReadPreference.fromString(e));else{let h;e instanceof Mh.ReadPreference?h=e:(Mh.ReadPreference.translate(r),h=r.readPreference||Mh.ReadPreference.primary),n=(0,l8.readPreferenceServerSelector)(h)}else n=e;r={serverSelectionTimeoutMS:this.s.serverSelectionTimeoutMS,...r},this.client.mongoLogger?.willLog(Et.MongoLoggableComponent.SERVER_SELECTION,Et.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(Et.MongoLoggableComponent.SERVER_SELECTION,new Xa.ServerSelectionStartedEvent(e,this.description,r.operationName));let s;r.timeoutContext?s=r.timeoutContext.serverSelectionTimeout:s=c8.Timeout.expires(r.serverSelectionTimeoutMS??0);let i=this.description.type===Oe.TopologyType.Sharded,o=r.session,a=o&&o.transaction;if(i&&a&&a.server)return this.client.mongoLogger?.willLog(Et.MongoLoggableComponent.SERVER_SELECTION,Et.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(Et.MongoLoggableComponent.SERVER_SELECTION,new Xa.ServerSelectionSucceededEvent(e,this.description,a.server.pool.address,r.operationName)),r.timeoutContext?.clearServerSelectionTimeout&&s?.clear(),a.server;let{promise:u,resolve:c,reject:l}=(0,Fn.promiseWithResolvers)(),p={serverSelector:n,topologyDescription:this.description,mongoLogger:this.client.mongoLogger,transaction:a,resolve:c,reject:l,cancelled:!1,startTime:(0,Fn.now)(),operationName:r.operationName,waitingLogged:!1,previousServer:r.previousServer},d=(0,Fn.addAbortListener)(r.signal,function(){p.cancelled=!0,l(this.reason)});this.waitQueue.push(p),tU(this);try{s?.throwIfExpired();let h=await(s?Promise.race([u,s]):u);return r.timeoutContext?.csotEnabled()&&h.description.minRoundTripTime!==0&&(r.timeoutContext.minRoundTripTime=h.description.minRoundTripTime),h}catch(h){if(c8.TimeoutError.is(h)){p.cancelled=!0;let f=new Xi.MongoServerSelectionError(`Server selection timed out after ${s?.duration} ms`,this.description);throw this.client.mongoLogger?.willLog(Et.MongoLoggableComponent.SERVER_SELECTION,Et.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(Et.MongoLoggableComponent.SERVER_SELECTION,new Xa.ServerSelectionFailedEvent(e,this.description,f,r.operationName)),r.timeoutContext?.csotEnabled()?new Xi.MongoOperationTimeoutError("Timed out during server selection",{cause:f}):f}throw h}finally{d?.[Fn.kDispose](),r.timeoutContext?.clearServerSelectionTimeout&&s?.clear()}}serverUpdateHandler(e){if(!this.s.description.hasServer(e.address)||h3e(this.s.description,e))return;let r=this.s.description,n=this.s.description.servers.get(e.address);if(!n)return;let s=e.$clusterTime;s&&(0,Oe._advanceClusterTime)(this,s);let i=n&&n.equals(e);if(this.s.description=this.s.description.update(e),this.s.description.compatibilityError){this.emit(t.ERROR,new Xi.MongoCompatibilityError(this.s.description.compatibilityError));return}if(!i){let o=this.s.description.servers.get(e.address);o&&this.emit(t.SERVER_DESCRIPTION_CHANGED,new Qa.ServerDescriptionChangedEvent(this.s.id,e.address,n,o))}eU(this,e),this.waitQueue.length>0&&tU(this),i||this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new Qa.TopologyDescriptionChangedEvent(this.s.id,r,this.s.description))}auth(e,r){typeof e=="function"&&(r=e,e=void 0),typeof r=="function"&&r(void 0,!0)}isConnected(){return this.s.state===Oe.STATE_CONNECTED}isDestroyed(){return this.s.state===Oe.STATE_CLOSED}lastHello(){let e=Array.from(this.description.servers.values());return e.length===0?{}:e.filter(s=>s.type!==Oe.ServerType.Unknown)[0]||{maxWireVersion:this.description.commonWireVersion}}get commonWireVersion(){return this.description.commonWireVersion}get logicalSessionTimeoutMinutes(){return this.description.logicalSessionTimeoutMinutes}get clusterTime(){return this.s.clusterTime}set clusterTime(e){this.s.clusterTime=e}};o_.Topology=Bh;function rU(t,e){for(let r of Rn.LOCAL_SERVER_EVENTS)t.removeAllListeners(r);t.close(),e.emitAndLog(Bh.SERVER_CLOSED,new Qa.ServerClosedEvent(e.s.id,t.description.address));for(let r of Rn.SERVER_RELAY_EVENTS)t.removeAllListeners(r)}function d3e(t){return t?.directConnection?Oe.TopologyType.Single:t?.replicaSet?Oe.TopologyType.ReplicaSetNoPrimary:t?.loadBalanced?Oe.TopologyType.LoadBalanced:Oe.TopologyType.Unknown}function nU(t,e){t.emitAndLog(Bh.SERVER_OPENING,new Qa.ServerOpeningEvent(t.s.id,e.address));let r=new XL.Server(t,e,t.s.options);for(let n of Rn.SERVER_RELAY_EVENTS)r.on(n,s=>t.emit(n,s));return r.on(XL.Server.DESCRIPTION_RECEIVED,n=>t.serverUpdateHandler(n)),r.connect(),r}function eU(t,e){if(e&&t.s.servers.has(e.address)){let r=t.s.servers.get(e.address);if(r){if(r.s.description=e,e.error instanceof Xi.MongoError&&e.error.hasErrorLabel(Xi.MongoErrorLabel.ResetPool)){let n=e.error.hasErrorLabel(Xi.MongoErrorLabel.InterruptInUseConnections);r.pool.clear({interruptInUseConnections:n})}else if(e.error==null){let n=t.s.description.type;(e.isDataBearing||e.type!==Oe.ServerType.Unknown&&n===Oe.TopologyType.Single)&&r.pool.ready()}}}for(let r of t.description.servers.values())if(!t.s.servers.has(r.address)){let n=nU(t,r);t.s.servers.set(r.address,n)}for(let r of t.s.servers){let n=r[0];if(t.description.hasServer(n)||!t.s.servers.has(n))continue;let s=t.s.servers.get(n);t.s.servers.delete(n),s&&rU(s,t)}}function sU(t,e){for(;t.length;){let r=t.shift();r&&(r.cancelled||(r.mongoLogger?.willLog(Et.MongoLoggableComponent.SERVER_SELECTION,Et.SeverityLevel.DEBUG)&&r.mongoLogger?.debug(Et.MongoLoggableComponent.SERVER_SELECTION,new Xa.ServerSelectionFailedEvent(r.serverSelector,r.topologyDescription,e,r.operationName)),r.reject(e)))}}function tU(t){if(t.s.state===Oe.STATE_CLOSED){sU(t.waitQueue,new Xi.MongoTopologyClosedError);return}let e=t.description.type===Oe.TopologyType.Sharded,r=Array.from(t.description.servers.values()),n=t.waitQueue.length;for(let s=0;s<n;++s){let i=t.waitQueue.shift();if(!i||i.cancelled)continue;let o;try{let c=i.serverSelector,l=i.previousServer;o=c?c(t.description,r,l?[l]:[]):r}catch(c){t.client.mongoLogger?.willLog(Et.MongoLoggableComponent.SERVER_SELECTION,Et.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(Et.MongoLoggableComponent.SERVER_SELECTION,new Xa.ServerSelectionFailedEvent(i.serverSelector,t.description,c,i.operationName)),i.reject(c);continue}let a;if(o.length===0){i.waitingLogged||(t.client.mongoLogger?.willLog(Et.MongoLoggableComponent.SERVER_SELECTION,Et.SeverityLevel.INFORMATIONAL)&&t.client.mongoLogger?.info(Et.MongoLoggableComponent.SERVER_SELECTION,new Xa.WaitingForSuitableServerEvent(i.serverSelector,t.description,t.s.serverSelectionTimeoutMS!==0?t.s.serverSelectionTimeoutMS-((0,Fn.now)()-i.startTime):-1,i.operationName)),i.waitingLogged=!0),t.waitQueue.push(i);continue}else if(o.length===1)a=t.s.servers.get(o[0].address);else{let c=(0,Fn.shuffle)(o,2),l=t.s.servers.get(c[0].address),p=t.s.servers.get(c[1].address);a=l&&p&&l.s.operationCount<p.s.operationCount?l:p}if(!a){let c=new Xi.MongoServerSelectionError("server selection returned a server description but the server was not found in the topology",t.description);t.client.mongoLogger?.willLog(Et.MongoLoggableComponent.SERVER_SELECTION,Et.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(Et.MongoLoggableComponent.SERVER_SELECTION,new Xa.ServerSelectionFailedEvent(i.serverSelector,t.description,c,i.operationName)),i.reject(c);return}let u=i.transaction;e&&u&&u.isActive&&a&&u.pinServer(a),t.client.mongoLogger?.willLog(Et.MongoLoggableComponent.SERVER_SELECTION,Et.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(Et.MongoLoggableComponent.SERVER_SELECTION,new Xa.ServerSelectionSucceededEvent(i.serverSelector,i.topologyDescription,a.pool.address,i.operationName)),i.resolve(a)}if(t.waitQueue.length>0)for(let[,s]of t.s.servers)process.nextTick(function(){return s.requestCheck()})}function h3e(t,e){let n=t.servers.get(e.address)?.topologyVersion;return(0,p8.compareTopologyVersion)(n,e.topologyVersion)>0}});var tc=m($p=>{"use strict";Object.defineProperty($p,"__esModule",{value:!0});$p.MongoClient=$p.ServerApiVersion=void 0;var d8=require("fs"),f3e=ka(),m3e=pe(),y3e=np(),g3e=Fg(),_3e=zi(),oU=cC(),aU=g9(),E3e=Lt(),b3e=kg(),h8=z(),S3e=z9(),uU=Ba(),w3e=is(),A3e=JL(),O3e=QL(),C3e=Er(),v3e=sr(),x3e=Td(),cU=iU(),lU=qd(),Sr=X();$p.ServerApiVersion=Object.freeze({v1:"1"});var f8=class extends w3e.TypedEventEmitter{constructor(e,r){super(),this.driverInfoList=[],this.on("error",Sr.noop),this.options=(0,aU.parseOptions)(e,this,r),this.appendMetadata(this.options.driverInfo);let n=Object.values(this.options.mongoLoggerOptions.componentSeverities).some(i=>i!==uU.SeverityLevel.OFF);this.mongoLogger=n?new uU.MongoLogger(this.options.mongoLoggerOptions):void 0;let s=this;this.s={url:e,bsonOptions:(0,m3e.resolveBSONOptions)(this.options),namespace:(0,Sr.ns)("admin"),hasBeenClosed:!1,sessionPool:new lU.ServerSessionPool(this),activeSessions:new Set,activeCursors:new Set,authProviders:new S3e.MongoClientAuthProviders,get options(){return s.options},get readConcern(){return s.options.readConcern},get writeConcern(){return s.options.writeConcern},get readPreference(){return s.options.readPreference},get isMongoClient(){return!0}},this.checkForNonGenuineHosts()}async[Symbol.asyncDispose](){await this.close()}appendMetadata(e){this.driverInfoList.some(n=>(0,oU.isDriverInfoEqual)(n,e))||(this.driverInfoList.push(e),this.options.metadata=(0,oU.makeClientMetadata)(this.driverInfoList,this.options).then(void 0,Sr.squashError).then(n=>n??{}))}checkForNonGenuineHosts(){let e=this.options.hosts.filter(i=>(0,Sr.isHostMatch)(Sr.DOCUMENT_DB_CHECK,i.host)),r=(0,Sr.isHostMatch)(Sr.DOCUMENT_DB_CHECK,this.options.srvHost),n=this.options.hosts.filter(i=>(0,Sr.isHostMatch)(Sr.COSMOS_DB_CHECK,i.host)),s=(0,Sr.isHostMatch)(Sr.COSMOS_DB_CHECK,this.options.srvHost);e.length!==0||r?this.mongoLogger?.info("client",Sr.DOCUMENT_DB_MSG):(n.length!==0||s)&&this.mongoLogger?.info("client",Sr.COSMOS_DB_MSG)}get serverApi(){return this.options.serverApi&&Object.freeze({...this.options.serverApi})}get monitorCommands(){return this.options.monitorCommands}set monitorCommands(e){this.options.monitorCommands=e}get autoEncrypter(){return this.options.autoEncrypter}get readConcern(){return this.s.readConcern}get writeConcern(){return this.s.writeConcern}get readPreference(){return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get timeoutMS(){return this.s.options.timeoutMS}async bulkWrite(e,r){if(this.autoEncrypter)throw new h8.MongoInvalidArgumentError("MongoClient bulkWrite does not currently support automatic encryption.");return await new A3e.ClientBulkWriteExecutor(this,e,(0,Sr.resolveOptions)(this,r)).execute()}async connect(){if(this.connectionLock)return await this.connectionLock;try{this.connectionLock=this._connect(),await this.connectionLock}finally{this.connectionLock=void 0}return this}async _connect(){if(this.topology&&this.topology.isConnected())return this;let e=this.options;if(e.tls&&(typeof e.tlsCAFile=="string"&&(e.ca??=await d8.promises.readFile(e.tlsCAFile)),typeof e.tlsCRLFile=="string"&&(e.crl??=await d8.promises.readFile(e.tlsCRLFile)),typeof e.tlsCertificateKeyFile=="string"&&(!e.key||!e.cert))){let n=await d8.promises.readFile(e.tlsCertificateKeyFile);e.key??=n,e.cert??=n}if(typeof e.srvHost=="string"){let n=await(0,aU.resolveSRVRecord)(e);for(let[s,i]of n.entries())e.hosts[s]=i}if(e.credentials?.mechanism===_3e.AuthMechanism.MONGODB_OIDC){let n=e.credentials?.mechanismProperties?.ALLOWED_HOSTS||g3e.DEFAULT_ALLOWED_HOSTS;if(!!!e.credentials?.mechanismProperties?.ENVIRONMENT){for(let i of e.hosts)if(!(0,Sr.hostMatchesWildcards)(i.toHostPort().host,n))throw new h8.MongoInvalidArgumentError(`Host '${i}' is not valid for OIDC authentication with ALLOWED_HOSTS of '${n.join(",")}'`)}}this.topology=new cU.Topology(this,e.hosts,e),this.topology.once(cU.Topology.OPEN,()=>this.emit("open",this));for(let n of E3e.MONGO_CLIENT_EVENTS)this.topology.on(n,(...s)=>this.emit(n,...s));let r=async()=>{try{await this.topology?.connect(e)}catch(n){throw this.topology?.close(),n}};return this.autoEncrypter?(await this.autoEncrypter?.init(),await r(),await e.encrypter.connectInternalClient()):await r(),this}async close(e=!1){if(this.closeLock)return await this.closeLock;try{this.closeLock=this._close(),await this.closeLock}finally{this.closeLock=void 0}}async _close(){Object.defineProperty(this.s,"hasBeenClosed",{value:!0,enumerable:!0,configurable:!1,writable:!1}),this.topology?.closeCheckedOutConnections();let e=Array.from(this.s.activeCursors,a=>a.close());this.s.activeCursors.clear(),await Promise.all(e);let r=Array.from(this.s.activeSessions,a=>a.endSession());if(this.s.activeSessions.clear(),await Promise.all(r),this.topology==null)return;(this.topology.description.type===f3e.TopologyType.LoadBalanced||this.topology.description.logicalSessionTimeoutMinutes!=null)&&await o(this,this.topology);let s=this.topology;this.topology=void 0,s.close();let{encrypter:i}=this.options;i&&await i.close(this);async function o(a,{description:u}){let c=(0,x3e.readPreferenceServerSelector)(v3e.ReadPreference.primaryPreferred),l=Array.from(u.servers.values());if(c(u,l).length!==0){let d=Array.from(a.s.sessionPool.sessions,({id:h})=>h);if(d.length!==0)try{await(0,C3e.executeOperation)(a,new O3e.EndSessionsOperation(d))}catch(h){(0,Sr.squashError)(h)}}}}db(e,r){r=r??{},e||(e=this.s.options.dbName);let n=Object.assign({},this.options,r);return new b3e.Db(this,e,n)}static async connect(e,r){return await new this(e,r).connect()}startSession(e){let r=new lU.ClientSession(this,this.s.sessionPool,{explicit:!0,...e},this.options);return this.s.activeSessions.add(r),r.once("ended",()=>{this.s.activeSessions.delete(r)}),r}async withSession(e,r){let n={owner:Symbol(),...typeof e=="object"?e:{}},s=typeof e=="function"?e:r;if(s==null)throw new h8.MongoInvalidArgumentError("Missing required callback parameter");let i=this.startSession(n);try{return await s(i)}finally{try{await i.endSession()}catch(o){(0,Sr.squashError)(o)}}}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new y3e.ChangeStream(this,e,(0,Sr.resolveOptions)(this,r))}};$p.MongoClient=f8});var np=m(Ih=>{"use strict";Object.defineProperty(Ih,"__esModule",{value:!0});Ih.ChangeStream=void 0;Ih.filterOutOptions=pU;var T3e=tp(),_i=Lt(),D3e=Xr(),M3e=z4(),P3e=kg(),wr=z(),B3e=tc(),I3e=is(),N3e=ir(),No=X(),lc={COLLECTION:Symbol("Collection"),DATABASE:Symbol("Database"),CLUSTER:Symbol("Cluster")},k3e=[_i.RESUME_TOKEN_CHANGED,_i.END,_i.CLOSE],R3e="A change stream document has been received that lacks a resume token (_id).",a_="ChangeStream is closed",F3e=$3e();function pU(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>!F3e.has(e)))}var m8=class t extends I3e.TypedEventEmitter{async[Symbol.asyncDispose](){await this.close()}static{this.RESPONSE=_i.RESPONSE}static{this.MORE=_i.MORE}static{this.INIT=_i.INIT}static{this.CLOSE=_i.CLOSE}static{this.CHANGE=_i.CHANGE}static{this.END=_i.END}static{this.ERROR=_i.ERROR}static{this.RESUME_TOKEN_CHANGED=_i.RESUME_TOKEN_CHANGED}constructor(e,r=[],n={}){super(),this.pipeline=r,this.options={...n};let s;if(delete this.options.writeConcern,e instanceof T3e.Collection)this.type=lc.COLLECTION,s=e.s.db.client.options.serverSelectionTimeoutMS;else if(e instanceof P3e.Db)this.type=lc.DATABASE,s=e.client.options.serverSelectionTimeoutMS;else if(e instanceof B3e.MongoClient)this.type=lc.CLUSTER,s=e.options.serverSelectionTimeoutMS;else throw new wr.MongoChangeStreamError("Parent provided to ChangeStream constructor must be an instance of Collection, Db, or MongoClient");this.contextOwner=Symbol(),this.parent=e,this.namespace=e.s.namespace,!this.options.readPreference&&e.readPreference&&(this.options.readPreference=e.readPreference),this.cursor=this._createChangeStreamCursor(n),this.isClosed=!1,this.mode=!1,this.on("newListener",i=>{i==="change"&&this.cursor&&this.listenerCount("change")===0&&this._streamEvents(this.cursor)}),this.on("removeListener",i=>{i==="change"&&this.listenerCount("change")===0&&this.cursor&&this.cursorStream?.removeAllListeners("data")}),this.options.timeoutMS!=null&&(this.timeoutContext=new N3e.CSOTTimeoutContext({timeoutMS:this.options.timeoutMS,serverSelectionTimeoutMS:s}))}get resumeToken(){return this.cursor?.resumeToken}async hasNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{return await this.cursor.hasNext()}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof wr.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,No.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async next(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{let e=await this.cursor.next();return this._processChange(e??null)}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof wr.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,No.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async tryNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{let e=await this.cursor.tryNext();return e?this._processChange(e):null}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof wr.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,No.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async*[Symbol.asyncIterator](){if(!this.closed)try{for(;;)yield await this.next()}finally{try{await this.close()}catch(e){(0,No.squashError)(e)}}}get closed(){return this.isClosed||this.cursor.closed}async close(){this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!0;let e=this.cursor;try{await e.close()}finally{this._endStream()}}stream(){if(this.closed)throw new wr.MongoChangeStreamError(a_);return this.cursor.stream()}_setIsEmitter(){if(this.mode==="iterator")throw new wr.MongoAPIError("ChangeStream cannot be used as an EventEmitter after being used as an iterator");this.mode="emitter"}_setIsIterator(){if(this.mode==="emitter")throw new wr.MongoAPIError("ChangeStream cannot be used as an iterator after being used as an EventEmitter");this.mode="iterator"}_createChangeStreamCursor(e){let r=pU(e);this.type===lc.CLUSTER&&(r.allChangesForCluster=!0);let n=[{$changeStream:r},...this.pipeline],s=this.type===lc.CLUSTER?this.parent:this.type===lc.DATABASE?this.parent.client:this.type===lc.COLLECTION?this.parent.client:null;if(s==null)throw new wr.MongoRuntimeError(`Changestream type should only be one of cluster, database, collection. Found ${this.type.toString()}`);let i=new M3e.ChangeStreamCursor(s,this.namespace,n,{...e,timeoutContext:this.timeoutContext?new D3e.CursorTimeoutContext(this.timeoutContext,this.contextOwner):void 0});for(let o of k3e)i.on(o,a=>this.emit(o,a));return this.listenerCount(t.CHANGE)>0&&this._streamEvents(i),i}_closeEmitterModeWithError(e){this.emit(t.ERROR,e),this.close().then(void 0,No.squashError)}_streamEvents(e){this._setIsEmitter();let r=this.cursorStream??e.stream();this.cursorStream=r,r.on("data",n=>{try{let s=this._processChange(n);this.emit(t.CHANGE,s)}catch(s){this.emit(t.ERROR,s)}this.timeoutContext?.refresh()}),r.on("error",n=>this._processErrorStreamMode(n,this.cursor.id!=null))}_endStream(){this.cursorStream?.removeAllListeners("data"),this.cursorStream?.removeAllListeners("close"),this.cursorStream?.removeAllListeners("end"),this.cursorStream?.destroy(),this.cursorStream=void 0}_processChange(e){if(this.isClosed)throw new wr.MongoAPIError(a_);if(e==null)throw new wr.MongoRuntimeError(a_);if(e&&!e._id)throw new wr.MongoChangeStreamError(R3e);return this.cursor.cacheResumeToken(e._id),this.options.startAtOperationTime=void 0,e}_processErrorStreamMode(e,r){this.isClosed||(r&&((0,wr.isResumableError)(e,this.cursor.maxWireVersion)||e instanceof wr.MongoOperationTimeoutError)?(this._endStream(),this.cursor.close().then(()=>this._resume(e),n=>((0,No.squashError)(n),this._resume(e))).then(()=>{e instanceof wr.MongoOperationTimeoutError&&this.emit(t.ERROR,e)},()=>this._closeEmitterModeWithError(e))):this._closeEmitterModeWithError(e))}async _processErrorIteratorMode(e,r){if(this.isClosed)throw new wr.MongoAPIError(a_);if(r&&((0,wr.isResumableError)(e,this.cursor.maxWireVersion)||e instanceof wr.MongoOperationTimeoutError)){try{await this.cursor.close()}catch(n){(0,No.squashError)(n)}if(await this._resume(e),e instanceof wr.MongoOperationTimeoutError)throw e}else{try{await this.close()}catch(n){(0,No.squashError)(n)}throw e}}async _resume(e){this.timeoutContext?.refresh();let r=(0,No.getTopology)(this.parent);try{await r.selectServer(this.cursor.readPreference,{operationName:"reconnect topology in change stream",timeoutContext:this.timeoutContext}),this.cursor=this._createChangeStreamCursor(this.cursor.resumeOptions)}catch{throw await this.close(),e}}};Ih.ChangeStream=m8;function $3e(){let t={allowDiskUse:"",authdb:"",batchSize:"",bsonRegExp:"",bypassDocumentValidation:"",bypassPinningCheck:"",checkKeys:"",collation:"",comment:"",cursor:"",dbName:"",enableUtf8Validation:"",explain:"",fieldsAsRaw:"",hint:"",ignoreUndefined:"",let:"",maxAwaitTimeMS:"",maxTimeMS:"",omitMaxTimeMS:"",out:"",promoteBuffers:"",promoteLongs:"",promoteValues:"",raw:"",rawData:"",readConcern:"",readPreference:"",serializeFunctions:"",session:"",timeoutContext:"",timeoutMS:"",timeoutMode:"",useBigInt64:"",willRetryWrite:"",writeConcern:""};return new Set(Object.keys(t))}});var y8=m(c_=>{"use strict";Object.defineProperty(c_,"__esModule",{value:!0});c_.GridFSBucketReadStream=void 0;var q3e=require("stream"),j3e=Xr(),ps=z(),L3e=ir(),u_=class extends q3e.Readable{static{this.FILE="file"}constructor(e,r,n,s,i){super({emitClose:!0}),this.s={bytesToTrim:0,bytesToSkip:0,bytesRead:0,chunks:e,expected:0,files:r,filter:s,init:!1,expectedEnd:0,options:{start:0,end:0,...i},readPreference:n,timeoutContext:i?.timeoutMS!=null?new L3e.CSOTTimeoutContext({timeoutMS:i.timeoutMS,serverSelectionTimeoutMS:0}):void 0}}_read(){this.destroyed||W3e(this,()=>U3e(this))}start(e=0){return dU(this),this.s.options.start=e,this}end(e=0){return dU(this),this.s.options.end=e,this}async abort(){this.push(null),this.destroy();let e=this.s.timeoutContext?.getRemainingTimeMSOrThrow();await this.s.cursor?.close({timeoutMS:e})}};c_.GridFSBucketReadStream=u_;function dU(t){if(t.s.init)throw new ps.MongoGridFSStreamError("Options cannot be changed after the stream is initialized")}function U3e(t){if(t.destroyed||!t.s.cursor||!t.s.file)return;let e=r=>{if(t.destroyed)return;if(!r){t.push(null),t.s.cursor?.close().then(void 0,p=>t.destroy(p));return}if(!t.s.file)return;let n=t.s.file.length-t.s.bytesRead,s=t.s.expected++,i=Math.min(t.s.file.chunkSize,n);if(r.n>s)return t.destroy(new ps.MongoGridFSChunkError(`ChunkIsMissing: Got unexpected n: ${r.n}, expected: ${s}`));if(r.n<s)return t.destroy(new ps.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${r.n}, expected: ${s}`));let o=Buffer.isBuffer(r.data)?r.data:r.data.buffer;if(o.byteLength!==i)return n<=0?t.destroy(new ps.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${r.n}, expected file length ${t.s.file.length} bytes but already read ${t.s.bytesRead} bytes`)):t.destroy(new ps.MongoGridFSChunkError(`ChunkIsWrongSize: Got unexpected length: ${o.byteLength}, expected: ${i}`));if(t.s.bytesRead+=o.byteLength,o.byteLength===0)return t.push(null);let a=null,u=null;t.s.bytesToSkip!=null&&(a=t.s.bytesToSkip,t.s.bytesToSkip=0);let c=s===t.s.expectedEnd-1,l=t.s.options.end-t.s.bytesToSkip;c&&t.s.bytesToTrim!=null?u=t.s.file.chunkSize-t.s.bytesToTrim:t.s.options.end&&l<r.data.byteLength&&(u=l),(a!=null||u!=null)&&(o=o.slice(a||0,u||o.byteLength)),t.push(o)};t.s.cursor.next().then(e,r=>{t.destroyed||t.destroy(r)})}function V3e(t){let e={};t.s.readPreference&&(e.readPreference=t.s.readPreference),t.s.options&&t.s.options.sort&&(e.sort=t.s.options.sort),t.s.options&&t.s.options.skip&&(e.skip=t.s.options.skip);let r=s=>{if(t.destroyed)return;if(!s){let u=`FileNotFound: file ${t.s.filter._id?t.s.filter._id.toString():t.s.filter.filename} was not found`,c=new ps.MongoRuntimeError(u);return c.code="ENOENT",t.destroy(c)}if(s.length<=0){t.push(null);return}if(t.destroyed){t.destroy();return}try{t.s.bytesToSkip=z3e(t,s,t.s.options)}catch(a){return t.destroy(a)}let i={files_id:s._id};if(t.s.options&&t.s.options.start!=null){let a=Math.floor(t.s.options.start/s.chunkSize);a>0&&(i.n={$gte:a})}let o;try{o=t.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${t.s.timeoutContext?.timeoutMS}ms`)}catch(a){return t.destroy(a)}t.s.cursor=t.s.chunks.find(i,{timeoutMode:t.s.options.timeoutMS!=null?j3e.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:o}).sort({n:1}),t.s.readPreference&&t.s.cursor.withReadPreference(t.s.readPreference),t.s.expectedEnd=Math.ceil(s.length/s.chunkSize),t.s.file=s;try{t.s.bytesToTrim=K3e(t,s,t.s.cursor,t.s.options)}catch(a){return t.destroy(a)}t.emit(u_.FILE,s)},n;try{n=t.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${t.s.timeoutContext?.timeoutMS}ms`)}catch(s){t.destroyed||t.destroy(s);return}e.timeoutMS=n,t.s.files.findOne(t.s.filter,e).then(r,s=>{t.destroyed||t.destroy(s)})}function W3e(t,e){if(t.s.file)return e();t.s.init||(V3e(t),t.s.init=!0),t.once("file",()=>{e()})}function z3e(t,e,r){if(r&&r.start!=null){if(r.start>e.length)throw new ps.MongoInvalidArgumentError(`Stream start (${r.start}) must not be more than the length of the file (${e.length})`);if(r.start<0)throw new ps.MongoInvalidArgumentError(`Stream start (${r.start}) must not be negative`);if(r.end!=null&&r.end<r.start)throw new ps.MongoInvalidArgumentError(`Stream start (${r.start}) must not be greater than stream end (${r.end})`);return t.s.bytesRead=Math.floor(r.start/e.chunkSize)*e.chunkSize,t.s.expected=Math.floor(r.start/e.chunkSize),r.start-t.s.bytesRead}throw new ps.MongoInvalidArgumentError("Start option must be defined")}function K3e(t,e,r,n){if(n&&n.end!=null){if(n.end>e.length)throw new ps.MongoInvalidArgumentError(`Stream end (${n.end}) must not be more than the length of the file (${e.length})`);if(n.start==null||n.start<0)throw new ps.MongoInvalidArgumentError(`Stream end (${n.end}) must not be negative`);let s=n.start!=null?Math.floor(n.start/e.chunkSize):0;return r.limit(Math.ceil(n.end/e.chunkSize)-s),t.s.expectedEnd=Math.ceil(n.end/e.chunkSize),Math.ceil(n.end/e.chunkSize)*e.chunkSize-n.end}throw new ps.MongoInvalidArgumentError("End option must be defined")}});var E8=m(p_=>{"use strict";Object.defineProperty(p_,"__esModule",{value:!0});p_.GridFSBucketWriteStream=void 0;var H3e=require("stream"),fU=pe(),mU=Xr(),Ei=z(),G3e=ir(),hU=X(),J3e=hn(),g8=class extends H3e.Writable{constructor(e,r,n){super(),this.gridFSFile=null,n=n??{},this.bucket=e,this.chunks=e.s._chunksCollection,this.filename=r,this.files=e.s._filesCollection,this.options=n,this.writeConcern=J3e.WriteConcern.fromOptions(n)||e.s.options.writeConcern,this.done=!1,this.id=n.id?n.id:new fU.ObjectId,this.chunkSizeBytes=n.chunkSizeBytes||this.bucket.s.options.chunkSizeBytes,this.bufToStore=Buffer.alloc(this.chunkSizeBytes),this.length=0,this.n=0,this.pos=0,this.state={streamEnd:!1,outstandingRequests:0,errored:!1,aborted:!1},n.timeoutMS!=null&&(this.timeoutContext=new G3e.CSOTTimeoutContext({timeoutMS:n.timeoutMS,serverSelectionTimeoutMS:(0,hU.resolveTimeoutOptions)(this.bucket.s.db.client,{}).serverSelectionTimeoutMS}))}_construct(e){if(!this.bucket.s.calledOpenUploadStream)this.bucket.s.calledOpenUploadStream=!0,Q3e(this).then(()=>{this.bucket.s.checkedIndexes=!0,this.bucket.emit("index"),e()},r=>{if(r instanceof Ei.MongoOperationTimeoutError)return pc(this,r,e);(0,hU.squashError)(r),e()});else return process.nextTick(e)}_write(e,r,n){Z3e(this,e,r,n)}_final(e){if(this.state.streamEnd)return process.nextTick(e);this.state.streamEnd=!0,eAe(this,e)}async abort(){if(this.state.streamEnd)throw new Ei.MongoAPIError("Cannot abort a stream that has already completed");if(this.state.aborted)throw new Ei.MongoAPIError("Cannot call abort() on a stream twice");this.state.aborted=!0;let e=this.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${this.timeoutContext?.timeoutMS}ms`);await this.chunks.deleteMany({files_id:this.id},{timeoutMS:e})}};p_.GridFSBucketWriteStream=g8;function pc(t,e,r){if(t.state.errored){process.nextTick(r);return}t.state.errored=!0,process.nextTick(r,e)}function yU(t,e,r){return{_id:new fU.ObjectId,files_id:t,n:e,data:r}}async function Y3e(t){let e={files_id:1,n:1},r;r=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);let n;try{n=await t.chunks.listIndexes({timeoutMode:r!=null?mU.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:r}).toArray()}catch(i){if(i instanceof Ei.MongoError&&i.code===Ei.MONGODB_ERROR_CODES.NamespaceNotFound)n=[];else throw i}n.find(i=>Object.keys(i.key).length===2&&i.key.files_id===1&&i.key.n===1)||(r=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),await t.chunks.createIndex(e,{...t.writeConcern,background:!0,unique:!0,timeoutMS:r}))}function _8(t,e){if(t.done)return process.nextTick(e);if(t.state.streamEnd&&t.state.outstandingRequests===0&&!t.state.errored){t.done=!0;let r=X3e(t.id,t.length,t.chunkSizeBytes,t.filename,t.options.metadata);if(l_(t,e))return;let n=t.timeoutContext?.remainingTimeMS;if(n!=null&&n<=0)return pc(t,new Ei.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),e);t.files.insertOne(r,{writeConcern:t.writeConcern,timeoutMS:n}).then(()=>{t.gridFSFile=r,e()},s=>pc(t,s,e));return}process.nextTick(e)}async function Q3e(t){let e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);if(await t.files.findOne({},{projection:{_id:1},timeoutMS:e})!=null)return;let n={filename:1,uploadDate:1},s;e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);let i={timeoutMode:e!=null?mU.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:e};try{s=await t.files.listIndexes(i).toArray()}catch(a){if(a instanceof Ei.MongoError&&a.code===Ei.MONGODB_ERROR_CODES.NamespaceNotFound)s=[];else throw a}s.find(a=>Object.keys(a.key).length===2&&a.key.filename===1&&a.key.uploadDate===1)||(e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),await t.files.createIndex(n,{background:!1,timeoutMS:e})),await Y3e(t)}function X3e(t,e,r,n,s){let i={_id:t,length:e,chunkSize:r,uploadDate:new Date,filename:n};return s&&(i.metadata=s),i}function Z3e(t,e,r,n){if(l_(t,n))return;let s=Buffer.isBuffer(e)?e:Buffer.from(e,r);if(t.length+=s.length,t.pos+s.length<t.chunkSizeBytes){s.copy(t.bufToStore,t.pos),t.pos+=s.length,process.nextTick(n);return}let i=s.length,o=t.chunkSizeBytes-t.pos,a=Math.min(o,s.length),u=0;for(;i>0;){let c=s.length-i;s.copy(t.bufToStore,t.pos,c,c+a),t.pos+=a,o-=a;let l;if(o===0){l=yU(t.id,t.n,Buffer.from(t.bufToStore));let p=t.timeoutContext?.remainingTimeMS;if(p!=null&&p<=0)return pc(t,new Ei.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),n);if(++t.state.outstandingRequests,++u,l_(t,n))return;t.chunks.insertOne(l,{writeConcern:t.writeConcern,timeoutMS:p}).then(()=>{--t.state.outstandingRequests,--u,u||_8(t,n)},d=>pc(t,d,n)),o=t.chunkSizeBytes,t.pos=0,++t.n}i-=a,a=Math.min(o,i)}}function eAe(t,e){if(t.pos===0)return _8(t,e);let r=Buffer.alloc(t.pos);t.bufToStore.copy(r,0,0,t.pos);let n=yU(t.id,t.n,r);if(l_(t,e))return;let s=t.timeoutContext?.remainingTimeMS;if(s!=null&&s<=0)return pc(t,new Ei.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),e);++t.state.outstandingRequests,t.chunks.insertOne(n,{writeConcern:t.writeConcern,timeoutMS:s}).then(()=>{--t.state.outstandingRequests,_8(t,e)},i=>pc(t,i,e))}function l_(t,e){return t.state.aborted?(process.nextTick(e,new Ei.MongoAPIError("Stream has been aborted")),!0):!1}});var bU=m(h_=>{"use strict";Object.defineProperty(h_,"__esModule",{value:!0});h_.GridFSBucket=void 0;var b8=z(),tAe=is(),gU=ir(),d_=X(),rAe=hn(),_U=y8(),EU=E8(),nAe={bucketName:"fs",chunkSizeBytes:255*1024},S8=class extends tAe.TypedEventEmitter{static{this.INDEX="index"}constructor(e,r){super(),this.on("error",d_.noop),this.setMaxListeners(0);let n=(0,d_.resolveOptions)(e,{...nAe,...r,writeConcern:rAe.WriteConcern.fromOptions(r)});this.s={db:e,options:n,_chunksCollection:e.collection(n.bucketName+".chunks"),_filesCollection:e.collection(n.bucketName+".files"),checkedIndexes:!1,calledOpenUploadStream:!1}}openUploadStream(e,r){return new EU.GridFSBucketWriteStream(this,e,{timeoutMS:this.s.options.timeoutMS,...r})}openUploadStreamWithId(e,r,n){return new EU.GridFSBucketWriteStream(this,r,{timeoutMS:this.s.options.timeoutMS,...n,id:e})}openDownloadStream(e,r){return new _U.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{_id:e},{timeoutMS:this.s.options.timeoutMS,...r})}async delete(e,r){let{timeoutMS:n}=(0,d_.resolveOptions)(this.s.db,r),s;n&&(s=new gU.CSOTTimeoutContext({timeoutMS:n,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS}));let{deletedCount:i}=await this.s._filesCollection.deleteOne({_id:e},{timeoutMS:s?.remainingTimeMS}),o=s?.remainingTimeMS;if(o!=null&&o<=0)throw new b8.MongoOperationTimeoutError(`Timed out after ${n}ms`);if(await this.s._chunksCollection.deleteMany({files_id:e},{timeoutMS:o}),i===0)throw new b8.MongoRuntimeError(`File not found for id ${e}`)}find(e={},r={}){return this.s._filesCollection.find(e,r)}openDownloadStreamByName(e,r){let n={uploadDate:-1},s;return r&&r.revision!=null&&(r.revision>=0?(n={uploadDate:1},s=r.revision):s=-r.revision-1),new _U.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{filename:e},{timeoutMS:this.s.options.timeoutMS,...r,sort:n,skip:s})}async rename(e,r,n){let s={_id:e},i={$set:{filename:r}},{matchedCount:o}=await this.s._filesCollection.updateOne(s,i,n);if(o===0)throw new b8.MongoRuntimeError(`File with id ${e} not found`)}async drop(e){let{timeoutMS:r}=(0,d_.resolveOptions)(this.s.db,e),n;if(r&&(n=new gU.CSOTTimeoutContext({timeoutMS:r,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS})),n){await this.s._filesCollection.drop({timeoutMS:n.remainingTimeMS});let s=n.getRemainingTimeMSOrThrow(`Timed out after ${r}ms`);await this.s._chunksCollection.drop({timeoutMS:s})}else await this.s._filesCollection.drop(),await this.s._chunksCollection.drop()}};h_.GridFSBucket=S8});var ka=m(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.MongoRuntimeError=b.MongoParseError=b.MongoOperationTimeoutError=b.MongoOIDCError=b.MongoNotConnectedError=b.MongoNetworkTimeoutError=b.MongoNetworkError=b.MongoMissingDependencyError=b.MongoMissingCredentialsError=b.MongoKerberosError=b.MongoInvalidArgumentError=b.MongoGridFSStreamError=b.MongoGridFSChunkError=b.MongoGCPError=b.MongoExpiredSessionError=b.MongoError=b.MongoDriverError=b.MongoDecompressionError=b.MongoCursorInUseError=b.MongoCursorExhaustedError=b.MongoCompatibilityError=b.MongoClientClosedError=b.MongoClientBulkWriteExecutionError=b.MongoClientBulkWriteError=b.MongoClientBulkWriteCursorError=b.MongoChangeStreamError=b.MongoBatchReExecutionError=b.MongoAzureError=b.MongoAWSError=b.MongoAPIError=b.ExplainableCursor=b.ChangeStreamCursor=b.ClientEncryption=b.MongoBulkWriteError=b.UUID=b.Timestamp=b.ObjectId=b.MinKey=b.MaxKey=b.Long=b.Int32=b.Double=b.Decimal128=b.DBRef=b.Code=b.BSONType=b.BSONSymbol=b.BSONRegExp=b.Binary=b.BSON=void 0;b.CommandStartedEvent=b.CommandFailedEvent=b.WriteConcern=b.ReadPreference=b.ReadConcern=b.TopologyType=b.ServerType=b.ReadPreferenceMode=b.ReadConcernLevel=b.ProfilingLevel=b.ReturnDocument=b.SeverityLevel=b.MongoLoggableComponent=b.ServerApiVersion=b.ExplainVerbosity=b.MongoErrorLabel=b.CursorTimeoutMode=b.CURSOR_FLAGS=b.Compressor=b.AuthMechanism=b.GSSAPICanonicalizationValue=b.AutoEncryptionLoggerLevel=b.BatchType=b.UnorderedBulkOperation=b.OrderedBulkOperation=b.MongoClient=b.ListIndexesCursor=b.ListCollectionsCursor=b.GridFSBucketWriteStream=b.GridFSBucketReadStream=b.GridFSBucket=b.FindCursor=b.Db=b.Collection=b.ClientSession=b.ChangeStream=b.CancellationToken=b.AggregationCursor=b.Admin=b.AbstractCursor=b.MongoWriteConcernError=b.MongoUnexpectedServerResponseError=b.MongoTransactionError=b.MongoTopologyClosedError=b.MongoTailableCursorError=b.MongoSystemError=b.MongoStalePrimaryError=b.MongoServerSelectionError=b.MongoServerError=b.MongoServerClosedError=void 0;b.MongoClientAuthProviders=b.MongoCryptKMSRequestNetworkTimeoutError=b.MongoCryptInvalidArgumentError=b.MongoCryptError=b.MongoCryptCreateEncryptedCollectionError=b.MongoCryptCreateDataKeyError=b.MongoCryptAzureKMSRequestError=b.SrvPollingEvent=b.WaitingForSuitableServerEvent=b.ServerSelectionSucceededEvent=b.ServerSelectionStartedEvent=b.ServerSelectionFailedEvent=b.ServerSelectionEvent=b.TopologyOpeningEvent=b.TopologyDescriptionChangedEvent=b.TopologyClosedEvent=b.ServerOpeningEvent=b.ServerHeartbeatSucceededEvent=b.ServerHeartbeatStartedEvent=b.ServerHeartbeatFailedEvent=b.ServerDescriptionChangedEvent=b.ServerClosedEvent=b.ConnectionReadyEvent=b.ConnectionPoolReadyEvent=b.ConnectionPoolMonitoringEvent=b.ConnectionPoolCreatedEvent=b.ConnectionPoolClosedEvent=b.ConnectionPoolClearedEvent=b.ConnectionCreatedEvent=b.ConnectionClosedEvent=b.ConnectionCheckOutStartedEvent=b.ConnectionCheckOutFailedEvent=b.ConnectionCheckedOutEvent=b.ConnectionCheckedInEvent=b.CommandSucceededEvent=void 0;var sAe=zO();Object.defineProperty(b,"Admin",{enumerable:!0,get:function(){return sAe.Admin}});var iAe=HO();Object.defineProperty(b,"OrderedBulkOperation",{enumerable:!0,get:function(){return iAe.OrderedBulkOperation}});var oAe=JO();Object.defineProperty(b,"UnorderedBulkOperation",{enumerable:!0,get:function(){return oAe.UnorderedBulkOperation}});var aAe=np();Object.defineProperty(b,"ChangeStream",{enumerable:!0,get:function(){return aAe.ChangeStream}});var uAe=tp();Object.defineProperty(b,"Collection",{enumerable:!0,get:function(){return uAe.Collection}});var cAe=Xr();Object.defineProperty(b,"AbstractCursor",{enumerable:!0,get:function(){return cAe.AbstractCursor}});var lAe=Ld();Object.defineProperty(b,"AggregationCursor",{enumerable:!0,get:function(){return lAe.AggregationCursor}});var pAe=O4();Object.defineProperty(b,"FindCursor",{enumerable:!0,get:function(){return pAe.FindCursor}});var dAe=G4();Object.defineProperty(b,"ListCollectionsCursor",{enumerable:!0,get:function(){return dAe.ListCollectionsCursor}});var hAe=D4();Object.defineProperty(b,"ListIndexesCursor",{enumerable:!0,get:function(){return hAe.ListIndexesCursor}});var fAe=kg();Object.defineProperty(b,"Db",{enumerable:!0,get:function(){return fAe.Db}});var mAe=bU();Object.defineProperty(b,"GridFSBucket",{enumerable:!0,get:function(){return mAe.GridFSBucket}});var yAe=y8();Object.defineProperty(b,"GridFSBucketReadStream",{enumerable:!0,get:function(){return yAe.GridFSBucketReadStream}});var gAe=E8();Object.defineProperty(b,"GridFSBucketWriteStream",{enumerable:!0,get:function(){return gAe.GridFSBucketWriteStream}});var _Ae=tc();Object.defineProperty(b,"MongoClient",{enumerable:!0,get:function(){return _Ae.MongoClient}});var EAe=is();Object.defineProperty(b,"CancellationToken",{enumerable:!0,get:function(){return EAe.CancellationToken}});var bAe=qd();Object.defineProperty(b,"ClientSession",{enumerable:!0,get:function(){return bAe.ClientSession}});var SAe=pe();Object.defineProperty(b,"BSON",{enumerable:!0,get:function(){return SAe.BSON}});var En=pe();Object.defineProperty(b,"Binary",{enumerable:!0,get:function(){return En.Binary}});Object.defineProperty(b,"BSONRegExp",{enumerable:!0,get:function(){return En.BSONRegExp}});Object.defineProperty(b,"BSONSymbol",{enumerable:!0,get:function(){return En.BSONSymbol}});Object.defineProperty(b,"BSONType",{enumerable:!0,get:function(){return En.BSONType}});Object.defineProperty(b,"Code",{enumerable:!0,get:function(){return En.Code}});Object.defineProperty(b,"DBRef",{enumerable:!0,get:function(){return En.DBRef}});Object.defineProperty(b,"Decimal128",{enumerable:!0,get:function(){return En.Decimal128}});Object.defineProperty(b,"Double",{enumerable:!0,get:function(){return En.Double}});Object.defineProperty(b,"Int32",{enumerable:!0,get:function(){return En.Int32}});Object.defineProperty(b,"Long",{enumerable:!0,get:function(){return En.Long}});Object.defineProperty(b,"MaxKey",{enumerable:!0,get:function(){return En.MaxKey}});Object.defineProperty(b,"MinKey",{enumerable:!0,get:function(){return En.MinKey}});Object.defineProperty(b,"ObjectId",{enumerable:!0,get:function(){return En.ObjectId}});Object.defineProperty(b,"Timestamp",{enumerable:!0,get:function(){return En.Timestamp}});Object.defineProperty(b,"UUID",{enumerable:!0,get:function(){return En.UUID}});var wAe=Hl();Object.defineProperty(b,"MongoBulkWriteError",{enumerable:!0,get:function(){return wAe.MongoBulkWriteError}});var AAe=i2();Object.defineProperty(b,"ClientEncryption",{enumerable:!0,get:function(){return AAe.ClientEncryption}});var OAe=z4();Object.defineProperty(b,"ChangeStreamCursor",{enumerable:!0,get:function(){return OAe.ChangeStreamCursor}});var CAe=Zy();Object.defineProperty(b,"ExplainableCursor",{enumerable:!0,get:function(){return CAe.ExplainableCursor}});var Ce=z();Object.defineProperty(b,"MongoAPIError",{enumerable:!0,get:function(){return Ce.MongoAPIError}});Object.defineProperty(b,"MongoAWSError",{enumerable:!0,get:function(){return Ce.MongoAWSError}});Object.defineProperty(b,"MongoAzureError",{enumerable:!0,get:function(){return Ce.MongoAzureError}});Object.defineProperty(b,"MongoBatchReExecutionError",{enumerable:!0,get:function(){return Ce.MongoBatchReExecutionError}});Object.defineProperty(b,"MongoChangeStreamError",{enumerable:!0,get:function(){return Ce.MongoChangeStreamError}});Object.defineProperty(b,"MongoClientBulkWriteCursorError",{enumerable:!0,get:function(){return Ce.MongoClientBulkWriteCursorError}});Object.defineProperty(b,"MongoClientBulkWriteError",{enumerable:!0,get:function(){return Ce.MongoClientBulkWriteError}});Object.defineProperty(b,"MongoClientBulkWriteExecutionError",{enumerable:!0,get:function(){return Ce.MongoClientBulkWriteExecutionError}});Object.defineProperty(b,"MongoClientClosedError",{enumerable:!0,get:function(){return Ce.MongoClientClosedError}});Object.defineProperty(b,"MongoCompatibilityError",{enumerable:!0,get:function(){return Ce.MongoCompatibilityError}});Object.defineProperty(b,"MongoCursorExhaustedError",{enumerable:!0,get:function(){return Ce.MongoCursorExhaustedError}});Object.defineProperty(b,"MongoCursorInUseError",{enumerable:!0,get:function(){return Ce.MongoCursorInUseError}});Object.defineProperty(b,"MongoDecompressionError",{enumerable:!0,get:function(){return Ce.MongoDecompressionError}});Object.defineProperty(b,"MongoDriverError",{enumerable:!0,get:function(){return Ce.MongoDriverError}});Object.defineProperty(b,"MongoError",{enumerable:!0,get:function(){return Ce.MongoError}});Object.defineProperty(b,"MongoExpiredSessionError",{enumerable:!0,get:function(){return Ce.MongoExpiredSessionError}});Object.defineProperty(b,"MongoGCPError",{enumerable:!0,get:function(){return Ce.MongoGCPError}});Object.defineProperty(b,"MongoGridFSChunkError",{enumerable:!0,get:function(){return Ce.MongoGridFSChunkError}});Object.defineProperty(b,"MongoGridFSStreamError",{enumerable:!0,get:function(){return Ce.MongoGridFSStreamError}});Object.defineProperty(b,"MongoInvalidArgumentError",{enumerable:!0,get:function(){return Ce.MongoInvalidArgumentError}});Object.defineProperty(b,"MongoKerberosError",{enumerable:!0,get:function(){return Ce.MongoKerberosError}});Object.defineProperty(b,"MongoMissingCredentialsError",{enumerable:!0,get:function(){return Ce.MongoMissingCredentialsError}});Object.defineProperty(b,"MongoMissingDependencyError",{enumerable:!0,get:function(){return Ce.MongoMissingDependencyError}});Object.defineProperty(b,"MongoNetworkError",{enumerable:!0,get:function(){return Ce.MongoNetworkError}});Object.defineProperty(b,"MongoNetworkTimeoutError",{enumerable:!0,get:function(){return Ce.MongoNetworkTimeoutError}});Object.defineProperty(b,"MongoNotConnectedError",{enumerable:!0,get:function(){return Ce.MongoNotConnectedError}});Object.defineProperty(b,"MongoOIDCError",{enumerable:!0,get:function(){return Ce.MongoOIDCError}});Object.defineProperty(b,"MongoOperationTimeoutError",{enumerable:!0,get:function(){return Ce.MongoOperationTimeoutError}});Object.defineProperty(b,"MongoParseError",{enumerable:!0,get:function(){return Ce.MongoParseError}});Object.defineProperty(b,"MongoRuntimeError",{enumerable:!0,get:function(){return Ce.MongoRuntimeError}});Object.defineProperty(b,"MongoServerClosedError",{enumerable:!0,get:function(){return Ce.MongoServerClosedError}});Object.defineProperty(b,"MongoServerError",{enumerable:!0,get:function(){return Ce.MongoServerError}});Object.defineProperty(b,"MongoServerSelectionError",{enumerable:!0,get:function(){return Ce.MongoServerSelectionError}});Object.defineProperty(b,"MongoStalePrimaryError",{enumerable:!0,get:function(){return Ce.MongoStalePrimaryError}});Object.defineProperty(b,"MongoSystemError",{enumerable:!0,get:function(){return Ce.MongoSystemError}});Object.defineProperty(b,"MongoTailableCursorError",{enumerable:!0,get:function(){return Ce.MongoTailableCursorError}});Object.defineProperty(b,"MongoTopologyClosedError",{enumerable:!0,get:function(){return Ce.MongoTopologyClosedError}});Object.defineProperty(b,"MongoTransactionError",{enumerable:!0,get:function(){return Ce.MongoTransactionError}});Object.defineProperty(b,"MongoUnexpectedServerResponseError",{enumerable:!0,get:function(){return Ce.MongoUnexpectedServerResponseError}});Object.defineProperty(b,"MongoWriteConcernError",{enumerable:!0,get:function(){return Ce.MongoWriteConcernError}});var vAe=Hl();Object.defineProperty(b,"BatchType",{enumerable:!0,get:function(){return vAe.BatchType}});var xAe=iv();Object.defineProperty(b,"AutoEncryptionLoggerLevel",{enumerable:!0,get:function(){return xAe.AutoEncryptionLoggerLevel}});var TAe=Rg();Object.defineProperty(b,"GSSAPICanonicalizationValue",{enumerable:!0,get:function(){return TAe.GSSAPICanonicalizationValue}});var DAe=zi();Object.defineProperty(b,"AuthMechanism",{enumerable:!0,get:function(){return DAe.AuthMechanism}});var MAe=ih();Object.defineProperty(b,"Compressor",{enumerable:!0,get:function(){return MAe.Compressor}});var SU=Xr();Object.defineProperty(b,"CURSOR_FLAGS",{enumerable:!0,get:function(){return SU.CURSOR_FLAGS}});Object.defineProperty(b,"CursorTimeoutMode",{enumerable:!0,get:function(){return SU.CursorTimeoutMode}});var PAe=z();Object.defineProperty(b,"MongoErrorLabel",{enumerable:!0,get:function(){return PAe.MongoErrorLabel}});var BAe=Cd();Object.defineProperty(b,"ExplainVerbosity",{enumerable:!0,get:function(){return BAe.ExplainVerbosity}});var IAe=tc();Object.defineProperty(b,"ServerApiVersion",{enumerable:!0,get:function(){return IAe.ServerApiVersion}});var wU=Ba();Object.defineProperty(b,"MongoLoggableComponent",{enumerable:!0,get:function(){return wU.MongoLoggableComponent}});Object.defineProperty(b,"SeverityLevel",{enumerable:!0,get:function(){return wU.SeverityLevel}});var NAe=N4();Object.defineProperty(b,"ReturnDocument",{enumerable:!0,get:function(){return NAe.ReturnDocument}});var kAe=eC();Object.defineProperty(b,"ProfilingLevel",{enumerable:!0,get:function(){return kAe.ProfilingLevel}});var RAe=si();Object.defineProperty(b,"ReadConcernLevel",{enumerable:!0,get:function(){return RAe.ReadConcernLevel}});var FAe=sr();Object.defineProperty(b,"ReadPreferenceMode",{enumerable:!0,get:function(){return FAe.ReadPreferenceMode}});var AU=ts();Object.defineProperty(b,"ServerType",{enumerable:!0,get:function(){return AU.ServerType}});Object.defineProperty(b,"TopologyType",{enumerable:!0,get:function(){return AU.TopologyType}});var $Ae=si();Object.defineProperty(b,"ReadConcern",{enumerable:!0,get:function(){return $Ae.ReadConcern}});var qAe=sr();Object.defineProperty(b,"ReadPreference",{enumerable:!0,get:function(){return qAe.ReadPreference}});var jAe=hn();Object.defineProperty(b,"WriteConcern",{enumerable:!0,get:function(){return jAe.WriteConcern}});var w8=mv();Object.defineProperty(b,"CommandFailedEvent",{enumerable:!0,get:function(){return w8.CommandFailedEvent}});Object.defineProperty(b,"CommandStartedEvent",{enumerable:!0,get:function(){return w8.CommandStartedEvent}});Object.defineProperty(b,"CommandSucceededEvent",{enumerable:!0,get:function(){return w8.CommandSucceededEvent}});var qs=Yv();Object.defineProperty(b,"ConnectionCheckedInEvent",{enumerable:!0,get:function(){return qs.ConnectionCheckedInEvent}});Object.defineProperty(b,"ConnectionCheckedOutEvent",{enumerable:!0,get:function(){return qs.ConnectionCheckedOutEvent}});Object.defineProperty(b,"ConnectionCheckOutFailedEvent",{enumerable:!0,get:function(){return qs.ConnectionCheckOutFailedEvent}});Object.defineProperty(b,"ConnectionCheckOutStartedEvent",{enumerable:!0,get:function(){return qs.ConnectionCheckOutStartedEvent}});Object.defineProperty(b,"ConnectionClosedEvent",{enumerable:!0,get:function(){return qs.ConnectionClosedEvent}});Object.defineProperty(b,"ConnectionCreatedEvent",{enumerable:!0,get:function(){return qs.ConnectionCreatedEvent}});Object.defineProperty(b,"ConnectionPoolClearedEvent",{enumerable:!0,get:function(){return qs.ConnectionPoolClearedEvent}});Object.defineProperty(b,"ConnectionPoolClosedEvent",{enumerable:!0,get:function(){return qs.ConnectionPoolClosedEvent}});Object.defineProperty(b,"ConnectionPoolCreatedEvent",{enumerable:!0,get:function(){return qs.ConnectionPoolCreatedEvent}});Object.defineProperty(b,"ConnectionPoolMonitoringEvent",{enumerable:!0,get:function(){return qs.ConnectionPoolMonitoringEvent}});Object.defineProperty(b,"ConnectionPoolReadyEvent",{enumerable:!0,get:function(){return qs.ConnectionPoolReadyEvent}});Object.defineProperty(b,"ConnectionReadyEvent",{enumerable:!0,get:function(){return qs.ConnectionReadyEvent}});var ko=b2();Object.defineProperty(b,"ServerClosedEvent",{enumerable:!0,get:function(){return ko.ServerClosedEvent}});Object.defineProperty(b,"ServerDescriptionChangedEvent",{enumerable:!0,get:function(){return ko.ServerDescriptionChangedEvent}});Object.defineProperty(b,"ServerHeartbeatFailedEvent",{enumerable:!0,get:function(){return ko.ServerHeartbeatFailedEvent}});Object.defineProperty(b,"ServerHeartbeatStartedEvent",{enumerable:!0,get:function(){return ko.ServerHeartbeatStartedEvent}});Object.defineProperty(b,"ServerHeartbeatSucceededEvent",{enumerable:!0,get:function(){return ko.ServerHeartbeatSucceededEvent}});Object.defineProperty(b,"ServerOpeningEvent",{enumerable:!0,get:function(){return ko.ServerOpeningEvent}});Object.defineProperty(b,"TopologyClosedEvent",{enumerable:!0,get:function(){return ko.TopologyClosedEvent}});Object.defineProperty(b,"TopologyDescriptionChangedEvent",{enumerable:!0,get:function(){return ko.TopologyDescriptionChangedEvent}});Object.defineProperty(b,"TopologyOpeningEvent",{enumerable:!0,get:function(){return ko.TopologyOpeningEvent}});var Nh=i8();Object.defineProperty(b,"ServerSelectionEvent",{enumerable:!0,get:function(){return Nh.ServerSelectionEvent}});Object.defineProperty(b,"ServerSelectionFailedEvent",{enumerable:!0,get:function(){return Nh.ServerSelectionFailedEvent}});Object.defineProperty(b,"ServerSelectionStartedEvent",{enumerable:!0,get:function(){return Nh.ServerSelectionStartedEvent}});Object.defineProperty(b,"ServerSelectionSucceededEvent",{enumerable:!0,get:function(){return Nh.ServerSelectionSucceededEvent}});Object.defineProperty(b,"WaitingForSuitableServerEvent",{enumerable:!0,get:function(){return Nh.WaitingForSuitableServerEvent}});var LAe=u8();Object.defineProperty(b,"SrvPollingEvent",{enumerable:!0,get:function(){return LAe.SrvPollingEvent}});var qp=Ep();Object.defineProperty(b,"MongoCryptAzureKMSRequestError",{enumerable:!0,get:function(){return qp.MongoCryptAzureKMSRequestError}});Object.defineProperty(b,"MongoCryptCreateDataKeyError",{enumerable:!0,get:function(){return qp.MongoCryptCreateDataKeyError}});Object.defineProperty(b,"MongoCryptCreateEncryptedCollectionError",{enumerable:!0,get:function(){return qp.MongoCryptCreateEncryptedCollectionError}});Object.defineProperty(b,"MongoCryptError",{enumerable:!0,get:function(){return qp.MongoCryptError}});Object.defineProperty(b,"MongoCryptInvalidArgumentError",{enumerable:!0,get:function(){return qp.MongoCryptInvalidArgumentError}});Object.defineProperty(b,"MongoCryptKMSRequestNetworkTimeoutError",{enumerable:!0,get:function(){return qp.MongoCryptKMSRequestNetworkTimeoutError}});var UAe=z9();Object.defineProperty(b,"MongoClientAuthProviders",{enumerable:!0,get:function(){return UAe.MongoClientAuthProviders}})});var te=m(ur=>{"use strict";ur.arrayAtomicsBackupSymbol=Symbol("mongoose#Array#atomicsBackup");ur.arrayAtomicsSymbol=Symbol("mongoose#Array#_atomics");ur.arrayParentSymbol=Symbol("mongoose#Array#_parent");ur.arrayPathSymbol=Symbol("mongoose#Array#_path");ur.arraySchemaSymbol=Symbol("mongoose#Array#_schema");ur.documentArrayParent=Symbol("mongoose#documentArrayParent");ur.documentIsSelected=Symbol("mongoose#Document#isSelected");ur.documentIsModified=Symbol("mongoose#Document#isModified");ur.documentModifiedPaths=Symbol("mongoose#Document#modifiedPaths");ur.documentSchemaSymbol=Symbol("mongoose#Document#schema");ur.getSymbol=Symbol("mongoose#Document#get");ur.modelSymbol=Symbol("mongoose#Model");ur.objectIdSymbol=Symbol("mongoose#ObjectId");ur.populateModelSymbol=Symbol("mongoose#PopulateOptions#Model");ur.schemaTypeSymbol=Symbol("mongoose#schemaType");ur.sessionNewDocuments=Symbol("mongoose#ClientSession#newDocuments");ur.scopeSymbol=Symbol("mongoose#Document#scope");ur.validatorErrorSymbol=Symbol("mongoose#validatorError")});var Za=m((CRe,OU)=>{"use strict";var kh=pe().ObjectId,VAe=te().objectIdSymbol;Object.defineProperty(kh.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}});Object.hasOwn(kh.prototype,"valueOf")||(kh.prototype.valueOf=function(){return this.toString()});kh.prototype[VAe]=!0;OU.exports=kh});var bn=m((vRe,CU)=>{"use strict";CU.exports=function(e){if(e!=null&&typeof e.constructor=="function")return e.constructor.name}});var bi=m(vU=>{"use strict";vU.internalToObjectOptions={transform:!1,virtuals:!1,getters:!1,_skipDepopulateTopLevel:!0,depopulate:!0,flattenDecimals:!1,useProjection:!1,versionKey:!0,flattenObjectIds:!1}});var f_=m((TRe,xU)=>{"use strict";xU.exports=pe().Decimal128});var dc=m((DRe,TU)=>{"use strict";TU.exports=new Set(["__proto__","constructor","prototype"])});var m_=m(DU=>{"use strict";DU.isMongooseArray=function(t){return Array.isArray(t)&&t.isMongooseArray}});var Rh=m((PRe,MU)=>{"use strict";var WAe=m_().isMongooseArray;MU.exports=function(t){return t!=null&&(WAe(t)||t.$__!=null||t.isMongooseBuffer||t.$isMongooseMap)}});var A8=m((BRe,PU)=>{"use strict";var zAe=/^function\s*([^\s(]+)/;PU.exports=function(t){return t.name||(t.toString().trim().match(zAe)||[])[1]}});var $r=m((IRe,BU)=>{"use strict";function KAe(t,e){return t!=null&&t._bsontype===e}BU.exports=KAe});var hc=m((NRe,IU)=>{"use strict";IU.exports=function(t){return Buffer.isBuffer(t)||Object.prototype.toString.call(t)==="[object Object]"}});var jp=m((kRe,NU)=>{"use strict";NU.exports=function(e){if(e==null||typeof e!="object")return!1;let r=Object.getPrototypeOf(e);return!r||r.constructor.name==="Object"}});var Lp=m(O8=>{"use strict";var kU=Symbol("mongoose#trustedSymbol");O8.trustedSymbol=kU;O8.trusted=function(e){return e==null||typeof e!="object"&&typeof e!="function"||(e[kU]=!0),e}});var vt=m((FRe,RU)=>{"use strict";var HAe=f_(),GAe=Za(),JAe=dc(),YAe=Rh(),QAe=A8(),C8=$r(),XAe=m_().isMongooseArray,ZAe=hc(),e6e=jp(),t6e=te(),v8=Lp().trustedSymbol,r6e=pe();function y_(t,e,r){if(t==null)return t;if(C8(t,"Double"))return new r6e.Double(t.value);if(typeof t=="number"||typeof t=="string"||typeof t=="boolean"||typeof t=="bigint")return t;if(Array.isArray(t))return n6e(t,e);if(YAe(t)){if(e){if(e.retainDocuments&&t.$__!=null){let i=t.$clone();return t.__index!=null&&(i.__index=t.__index),t.__parentArray!=null&&(i.__parentArray=e.parentArray??t.__parentArray),i.$__setParent(e.parentDoc??t.$__parent),i}if(e.retainDocuments&&t.$isMongooseMap){let i=e.parentDoc??t.$__parent,o=t.constructor,a=new o({},t.$__path,i,t.$__schemaType);for(let[u,c]of t)a.$__set(u,y_(c,{...e,parentDoc:i}));return a}}if(e6e(t)&&t.$__!=null&&t._doc!=null)return t._doc;let s;return e?.json&&typeof t.toJSON=="function"?s=t.toJSON(e):s=t.toObject(e),s}let n=t.constructor;if(n)switch(QAe(n)){case"Object":return x8(t,e,r);case"Date":return new n(+t);case"RegExp":return s6e(t);default:break}return C8(t,"ObjectId")?e?.flattenObjectIds?t.toJSON():new GAe(t.id):C8(t,"Decimal128")?e?.flattenDecimals?t.toJSON():HAe.fromString(t.toString()):!n&&ZAe(t)?x8(t,e,r):typeof t=="object"&&t[t6e.schemaTypeSymbol]?t.clone():e?.bson&&typeof t.toBSON=="function"?t:typeof t.valueOf=="function"?t.valueOf():x8(t,e,r)}RU.exports=y_;function x8(t,e,r){let n=e?.minimize,s=e?.omitUndefined,i=e?._seen,o={},a;if(i&&i.has(t))return i.get(t);i&&i.set(t,o),v8 in t&&e?.copyTrustedSymbol!==!1&&(o[v8]=t[v8]);let u=Object.keys(t),c=u.length;for(let l=0;l<c;++l){let p=u[l];if(JAe.has(p))continue;let d=y_(t[p],e,!1);(n===!1||s)&&typeof d>"u"?delete o[p]:(n!==!0||typeof d<"u")&&(a||(a=!0),o[p]=d)}return n&&!r?a&&o:o}function n6e(t,e){let r=0,n=t.length,s=null;for(e?.retainDocuments?t.isMongooseDocumentArray?s=new(t.$schemaType()).schema.base.Types.DocumentArray([],t.$path(),t.$parent(),t.$schemaType()):t.isMongooseArray?s=new(t.$parent()).schema.base.Types.Array([],t.$path(),t.$parent(),t.$schemaType()):s=new Array(n):s=new Array(n),t=XAe(t)?t.__array:t,s.isMongooseDocumentArray&&(e={...e,parentArray:s}),r=0;r<n;++r)s[r]=y_(t[r],e,!0);return s}function s6e(t){let e=new RegExp(t.source,t.flags);return e.lastIndex!==t.lastIndex&&(e.lastIndex=t.lastIndex),e}});var qU=m(($Re,$U)=>{"use strict";var g_=$O(),T8=be(),D8=ka().Collection,i6e=Za(),FU=bn(),o6e=bi().internalToObjectOptions,a6e=require("stream"),M8=require("util"),u6e=Object.freeze({...o6e,copyTrustedSymbol:!1});function Si(t,e,r){this.collection=null,this.Promise=r.Promise||Promise,this.modelName=r.modelName,delete r.modelName,this._closed=!1,g_.apply(this,arguments)}Object.setPrototypeOf(Si.prototype,g_.prototype);Si.prototype.onOpen=function(){return this.collection=this.conn.db.collection(this.name),g_.prototype.onOpen.call(this),this.collection};Si.prototype.onClose=function(t){g_.prototype.onClose.call(this,t)};Si.prototype._getCollection=function(){return this.collection?this.collection:this.conn.db!=null?(this.collection=this.conn.db.collection(this.name),this.collection):null};function c6e(t){Si.prototype[t]=function(){let e=this._getCollection(),r=Array.from(arguments),n=this,s=n?.conn?.base?.options?.debug,i=n?.conn?.options?.debug,o=i??s,a=new i6e;if(this.conn.$wasForceClosed){let l=new T8("Connection was force closed");if(r.length>0&&typeof r[r.length-1]=="function"){r[r.length-1](l);return}else throw l}let u=null,c=null;if(this._shouldBufferCommands()&&this.buffer){this.conn.emit("buffer",{_id:a,modelName:n.modelName,collectionName:n.name,method:t,args:r});let l=this._getBufferTimeoutMS();return c=new Promise((p,d)=>{this.addQueue(p),u=setTimeout(()=>{if(this.removeQueue(p)){let f="Operation `"+this.name+"."+t+"()` buffering timed out after "+l+"ms",y=new T8(f);this.conn.emit("buffer-end",{_id:a,modelName:n.modelName,collectionName:n.name,method:t,error:y}),d(y)}},l)}),c.then(()=>(u&&clearTimeout(u),this[t].apply(this,r)))}if(o)if(typeof o=="function"){let l=null;typeof r[r.length-1]=="function"?l=r.slice(0,r.length-1):l=r,o.apply(n,[n.name,t].concat(l))}else if(o instanceof a6e.Writable)this.$printToStream(n.name,t,r,o);else{let l=o.color==null?!0:o.color,p=o.shell==null?!1:o.shell;this.$print(n.name,t,r,l,p)}this.conn.emit("operation-start",{_id:a,modelName:n.modelName,collectionName:this.name,method:t,params:r});try{if(e==null){let p="Cannot call `"+this.name+"."+t+"()` before initial connection is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if you have `bufferCommands = false`.";throw new T8(p)}let l=e[t].apply(e,r);return typeof l?.then=="function"?l.then(p=>(u!=null&&clearTimeout(u),this.conn.emit("operation-end",{_id:a,modelName:n.modelName,collectionName:this.name,method:t,result:p}),p),p=>{throw u!=null&&clearTimeout(u),this.conn.emit("operation-end",{_id:a,modelName:n.modelName,collectionName:this.name,method:t,error:p}),p}):(this.conn.emit("operation-end",{_id:a,modelName:n.modelName,collectionName:this.name,method:t,result:l}),u!=null&&clearTimeout(u),l)}catch(l){throw u!=null&&clearTimeout(u),this.conn.emit("operation-end",{_id:a,modelName:n.modelName,collectionName:this.name,method:t,error:l}),l}}}for(let t of Object.getOwnPropertyNames(D8.prototype))Object.getOwnPropertyDescriptor(D8.prototype,t).get===void 0&&typeof D8.prototype[t]=="function"&&c6e(t);Si.prototype.$print=function(t,e,r,n,s){let i=n?"\x1B[0;36mMongoose:\x1B[0m ":"Mongoose: ",o=[t,e].join("."),a=[];for(let c=r.length-1;c>=0;--c)(this.$format(r[c])||a.length)&&a.unshift(this.$format(r[c],n,s));let u="("+a.join(", ")+")";console.info(i+o+u)};Si.prototype.$printToStream=function(t,e,r,n){let s=[t,e].join("."),i=[];for(let a=r.length-1;a>=0;--a)(this.$format(r[a])||i.length)&&i.unshift(this.$format(r[a]));let o="("+i.join(", ")+")";n.write(s+o,"utf8")};Si.prototype.$format=function(t,e,r){let n=typeof t;return n==="function"||n==="undefined"?"":P8(t,!1,e,r)};function Up(t){let e={inspect:function(){return t}};return M8.inspect.custom&&(e[M8.inspect.custom]=e.inspect),e}function l6e(t){return P8(t,!0)}function p6e(t,e){t[e]=Up('ObjectId("'+t[e].toHexString()+'")')}function d6e(t,e,r){r?t[e]=Up('ISODate("'+t[e].toUTCString()+'")'):t[e]=Up('new Date("'+t[e].toUTCString()+'")')}function P8(t,e,r,n){if(typeof t?.toBSON=="function"&&(t=t.toBSON()),t==null)return t;let s=vt(),i=e?t:s(t,u6e),o=FU(i);if(o==="Binary")i="BinData("+i.sub_type+', "'+i.toString("base64")+'")';else if(o==="ObjectId")i=Up('ObjectId("'+i.toHexString()+'")');else if(o==="Date")i=Up('new Date("'+i.toUTCString()+'")');else if(o==="Object"){let a=Object.keys(i),u=a.length,c;for(let l=0;l<u;++l)if(c=a[l],i[c]){let p;if(typeof i[c].toBSON=="function")try{i[c]=i[c].toBSON()}catch(h){p=h}let d=FU(i[c]);if(d==="Binary")i[c]="BinData("+i[c].sub_type+', "'+i[c].buffer.toString("base64")+'")';else if(d==="Object")i[c]=P8(i[c],!0);else if(d==="ObjectId")p6e(i,c);else if(d==="Date")d6e(i,c,n);else if(d==="ClientSession")i[c]=Up('ClientSession("'+(i[c]?.id?.id?.buffer||"").toString("hex")+'")');else if(Array.isArray(i[c]))i[c]=i[c].map(l6e);else if(p!=null)throw p}}return e?i:M8.inspect(i,!1,10,r).replace(/\n/g,"").replace(/\s{2,}/g," ")}Si.prototype.getIndexes=Si.prototype.indexInformation;$U.exports=Si});var I8=m((qRe,LU)=>{"use strict";var h6e=require("events").EventEmitter,Fh=be();var jU=["close","change","end","error","resumeTokenChanged"];var B8=class extends h6e{constructor(e,r,n){if(super(),this.driverChangeStream=null,this.closed=!1,this.bindedEvents=!1,this.pipeline=r,this.options=n,this.errored=!1,n?.hydrate&&!n.model)throw new Error("Cannot create change stream with `hydrate: true` unless calling `Model.watch()`");let s=null;if(this.$driverChangeStreamPromise=new Promise((i,o)=>{try{e((a,u)=>{if(a!=null)return this.errored=!0,this.emit("error",a),o(a);this.driverChangeStream=u,this.emit("ready"),i()})}catch(a){s=a,this.errored=!0,this.emit("error",a),o(a)}}),s!=null)throw s}_bindEvents(){if(!this.bindedEvents){if(this.bindedEvents=!0,this.driverChangeStream==null){this.$driverChangeStreamPromise.then(()=>{this.driverChangeStream.on("close",()=>{this.closed=!0}),jU.forEach(e=>{this.driverChangeStream.on(e,r=>{r?.fullDocument!=null&&this.options?.hydrate&&(r.fullDocument=this.options.model.hydrate(r.fullDocument)),this.emit(e,r)})})},()=>{});return}this.driverChangeStream.on("close",()=>{this.closed=!0}),jU.forEach(e=>{this.driverChangeStream.on(e,r=>{r?.fullDocument!=null&&this.options?.hydrate&&(r.fullDocument=this.options.model.hydrate(r.fullDocument)),this.emit(e,r)})})}}hasNext(e){if(this.errored)throw new Fh("Cannot call hasNext() on errored ChangeStream");return this.driverChangeStream.hasNext(e)}next(e){if(this.errored)throw new Fh("Cannot call next() on errored ChangeStream");if(this.options?.hydrate){if(e!=null){let n=e;e=(s,i)=>s!=null?n(s):(i.fullDocument!=null&&(i.fullDocument=this.options.model.hydrate(i.fullDocument)),n(null,i))}let r=this.driverChangeStream.next(e);return typeof r?.then=="function"&&(r=r.then(n=>(n.fullDocument!=null&&(n.fullDocument=this.options.model.hydrate(n.fullDocument)),n))),r}return this.driverChangeStream.next(e)}addListener(e,r){if(this.errored)throw new Fh("Cannot call addListener() on errored ChangeStream");return this._bindEvents(),super.addListener(e,r)}on(e,r){if(this.errored)throw new Fh("Cannot call on() on errored ChangeStream");return this._bindEvents(),super.on(e,r)}once(e,r){if(this.errored)throw new Fh("Cannot call once() on errored ChangeStream");return this._bindEvents(),super.once(e,r)}_queue(e){this.once("ready",()=>e())}close(){return this.closed=!0,this.driverChangeStream?this.driverChangeStream.close():this.$driverChangeStreamPromise.then(()=>this.driverChangeStream.close(),()=>{})}};LU.exports=B8});var fc=m((jRe,VU)=>{"use strict";function Ne(){this._pres=new Map,this._posts=new Map}Ne.skipWrappedFunction=function(){if(!(this instanceof Ne.skipWrappedFunction))return new Ne.skipWrappedFunction(...arguments);this.args=[...arguments]};Ne.overwriteResult=function(){if(!(this instanceof Ne.overwriteResult))return new Ne.overwriteResult(...arguments);this.args=[...arguments]};Ne.overwriteArguments=function(){if(!(this instanceof Ne.overwriteArguments))return new Ne.overwriteArguments(...arguments);this.args=[...arguments]};Ne.prototype.execPre=async function(e,r,n){let s=this._pres.get(e)||[],i=s.length,o=n,a=null;if(!i)return o;for(let u of s){let c=[],l=[null].concat(o);for(let p=1;p<l.length;++p)p===l.length-1&&typeof l[p]=="function"||c.push(l[p]);try{let p=u.fn.apply(r,c);if(N8(p)){let d=await p;d instanceof Ne.overwriteArguments&&(o=d.args)}else p instanceof Ne.overwriteArguments&&(o=p.args)}catch(p){if(p instanceof Ne.skipWrappedFunction){a=p;continue}if(p instanceof Ne.overwriteArguments){o=p.args;continue}throw p}}if(a)throw a;return o};Ne.prototype.execPreSync=function(t,e,r){let n=this._pres.get(t)||[],s=n.length,i=r||[];for(let o=0;o<s;++o){let a=n[o].fn.apply(e,i);a instanceof Ne.overwriteArguments&&(i=a.args)}return i};Ne.prototype.execPost=async function(e,r,n,s){let i=this._posts.get(e)||[],o=i.length,a=null;if(s&&s.error&&(a=s.error),!o){if(a!=null)throw a;return n}for(let u of i){let c=u.fn,l=0,p=[],d=n.length;for(let g=0;g<d;++g)(!n[g]||!n[g]._kareemIgnore)&&(l+=1,p.push(n[g]));if(s?.numCallbackParams!=null){l=s.numCallbackParams;for(let g=p.length;g<l;++g)p.push(null)}let h,f,y=new Promise((g,_)=>{h=g,f=_});if(p.push(function(_){_?f(_):h()}),a)if(UU(u,l))try{let g=c.apply(r,[a].concat(p));N8(g)?await g:c.length===l+2&&await y}catch(g){if(g instanceof Ne.overwriteResult){n=g.args;continue}a=g}else continue;else{if(UU(u,l))continue;{let g=null;try{g=c.apply(r,p),N8(g)?g=await g:c.length===l+1&&(g=await y)}catch(_){if(_ instanceof Ne.overwriteResult){n=_.args;continue}a=_;continue}if(g instanceof Ne.overwriteResult){n=g.args;continue}}}}if(a!=null)throw a;return n};Ne.prototype.execPostSync=function(t,e,r){let n=this._posts.get(t)||[],s=n.length;for(let i=0;i<s;++i){let o=n[i].fn.apply(e,r||[]);o instanceof Ne.overwriteResult&&(r=o.args)}return r};Ne.prototype.createWrapperSync=function(t,e){let r=this;return function(){let s=r.execPreSync(t,this,Array.from(arguments)),i=e.apply(this,s);return r.execPostSync(t,this,[i])[0]}};Ne.prototype.wrap=async function(e,r,n,s,i){let o,a=!1,u=s;try{u=await this.execPre(e,n,s)}catch(c){c instanceof Ne.skipWrappedFunction?(o=c.args,a=!0):await this.execPost(e,n,s,{...i,error:c})}return a||(o=await r.apply(n,u)),o=await this.execPost(e,n,[o],i),o[0]};Ne.prototype.filter=function(t){let e=this.clone(),r=Array.from(e._pres.keys());for(let s of r){let i=this._pres.get(s).map(o=>Object.assign({},o,{name:s})).filter(t);if(i.length===0){e._pres.delete(s);continue}e._pres.set(s,i)}let n=Array.from(e._posts.keys());for(let s of n){let i=this._posts.get(s).map(o=>Object.assign({},o,{name:s})).filter(t);if(i.length===0){e._posts.delete(s);continue}e._posts.set(s,i)}return e};Ne.prototype.hasHooks=function(t){return this._pres.has(t)||this._posts.has(t)};Ne.prototype.createWrapper=function(t,e,r,n){let s=this;return this.hasHooks(t)?function(){let o=r||this;return s.wrap(t,e,o,Array.from(arguments),n)}:e};Ne.prototype.pre=function(t,e,r,n,s){typeof e=="function"?(r=e,e={}):e==null&&(e={});let i=this._pres.get(t)||[];if(this._pres.set(t,i),typeof r!="function")throw new Error('pre() requires a function, got "'+typeof r+'"');return s?i.unshift(Object.assign({},e,{fn:r})):i.push(Object.assign({},e,{fn:r})),this};Ne.prototype.post=function(t,e,r,n){let s=this._posts.get(t)||[];if(typeof e=="function"&&(n=!!r,r=e,e={}),typeof r!="function")throw new Error('post() requires a function, got "'+typeof r+'"');return n?s.unshift(Object.assign({},e,{fn:r})):s.push(Object.assign({},e,{fn:r})),this._posts.set(t,s),this};Ne.prototype.postError=function(e,r,n,s){return typeof r=="function"&&(s=!!n,n=r,r={}),this.post(e,{...r,errorHandler:!0},n,s)};Ne.prototype.clone=function(){let t=new Ne;for(let e of this._pres.keys()){let r=this._pres.get(e).slice();t._pres.set(e,r)}for(let e of this._posts.keys())t._posts.set(e,this._posts.get(e).slice());return t};Ne.prototype.merge=function(t,e){e=arguments.length===1?!0:e;let r=e?this.clone():this;for(let n of t._pres.keys()){let s=r._pres.get(n)||[],i=t._pres.get(n).filter(a=>s.map(u=>u.fn).indexOf(a.fn)===-1),o=s.concat(i);r._pres.set(n,o)}for(let n of t._posts.keys()){let s=r._posts.get(n)||[],i=t._posts.get(n).filter(o=>s.indexOf(o)===-1);r._posts.set(n,s.concat(i))}return r};function N8(t){return typeof t=="object"&&t!==null&&typeof t.then=="function"}function UU(t,e){return t.errorHandler?!0:t.fn.length===e+2}VU.exports=Ne});var KU=m((WU,zU)=>{"use strict";var nn=zU.exports=WU={};nn.DocumentNotFoundError=null;nn.general={};nn.general.default="Validator failed for path `{PATH}` with value `{VALUE}`";nn.general.required="Path `{PATH}` is required.";nn.Number={};nn.Number.min="Path `{PATH}` ({VALUE}) is less than minimum allowed value ({MIN}).";nn.Number.max="Path `{PATH}` ({VALUE}) is more than maximum allowed value ({MAX}).";nn.Number.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";nn.Date={};nn.Date.min="Path `{PATH}` ({VALUE}) is before minimum allowed value ({MIN}).";nn.Date.max="Path `{PATH}` ({VALUE}) is after maximum allowed value ({MAX}).";nn.String={};nn.String.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";nn.String.match="Path `{PATH}` is invalid ({VALUE}).";nn.String.minlength="Path `{PATH}` (`{VALUE}`, length {LENGTH}) is shorter than the minimum allowed length ({MINLENGTH}).";nn.String.maxlength="Path `{PATH}` (`{VALUE}`, length {LENGTH}) is longer than the maximum allowed length ({MAXLENGTH})."});var sn=m((LRe,JU)=>{"use strict";var f6e=be(),m6e=require("util"),__=class extends f6e{constructor(e,r,n,s,i){if(arguments.length>0){let o=HU(r),a=GU(i),u=k8(null,e,r,n,a,o,s);super(u),this.init(e,r,n,s,i)}else super(k8())}toJSON(){return{stringValue:this.stringValue,valueType:this.valueType,kind:this.kind,value:this.value,path:this.path,reason:this.reason,name:this.name,message:this.message}}init(e,r,n,s,i){this.stringValue=R8(r),this.messageFormat=GU(i),this.kind=e,this.value=r,this.path=n,this.reason=s,this.valueType=HU(r)}copy(e){this.messageFormat=e.messageFormat,this.stringValue=e.stringValue,this.kind=e.kind,this.value=e.value,this.path=e.path,this.reason=e.reason,this.message=e.message,this.valueType=e.valueType}setModel(e){this.message=k8(e,this.kind,this.value,this.path,this.messageFormat,this.valueType)}};Object.defineProperty(__.prototype,"name",{value:"CastError"});function R8(t){let e=m6e.inspect(t);return e=e.replace(/^'|'$/g,'"'),e.startsWith('"')||(e='"'+e+'"'),e}function HU(t){if(t==null)return""+t;let e=typeof t;return e!=="object"||typeof t.constructor!="function"?e:t.constructor.name}function GU(t){let e=t?._castErrorMessage||null;if(typeof e=="string"||typeof e=="function")return e}function k8(t,e,r,n,s,i,o){if(typeof s=="string"){let a=R8(r),u=s.replace("{KIND}",e).replace("{VALUE}",a).replace("{PATH}",n);return t!=null&&(u=u.replace("{MODEL}",t.modelName)),u}else{if(typeof s=="function")return s(r,n,t,e);{let a=R8(r),u=i?" (type "+i+")":"",c="Cast to "+e+" failed for value "+a+u+' at path "'+n+'"';return t!=null&&(c+=' for model "'+t.modelName+'"'),o!=null&&typeof o.constructor=="function"&&o.constructor.name!=="AssertionError"&&o.constructor.name!=="Error"&&(c+=' because of "'+o.constructor.name+'"'),c}}}JU.exports=__});var b_=m((URe,QU)=>{"use strict";var YU=be(),y6e=require("util"),E_=class extends YU{constructor(e,r,n,s){let i,o=YU.messages;o.DocumentNotFoundError!=null?i=typeof o.DocumentNotFoundError=="function"?o.DocumentNotFoundError(e,r):o.DocumentNotFoundError:i='No document found for query "'+y6e.inspect(e)+'" on model "'+r+'"',super(i),this.result=s,this.numAffected=n,this.filter=e,this.query=e}};Object.defineProperty(E_.prototype,"name",{value:"DocumentNotFoundError"});QU.exports=E_});var F8=m((VRe,XU)=>{"use strict";XU.exports=function(e){let r=Object.keys(e.errors||{}),n=r.length,s=[],i;for(let o=0;o<n;++o)i=r[o],e!==e.errors[i]&&s.push(i+": "+e.errors[i].message);return s.join(", ")}});var yc=m((WRe,tV)=>{"use strict";var g6e=be(),_6e=bn(),ZU=require("util"),eV=F8(),mc=class t extends g6e{constructor(e){let r;_6e(e)==="model"?r=e.constructor.modelName+" validation failed":r="Validation failed",super(r),this.errors={},this._message=r,e&&(e.$errors=this.errors)}toString(){return this.name+": "+eV(this)}addError(e,r){if(r instanceof t){let{errors:n}=r;for(let s of Object.keys(n))this.addError(`${e}.${s}`,n[s]);return}this.errors[e]=r,this.message=this._message+": "+eV(this)}};ZU.inspect.custom&&(mc.prototype[ZU.inspect.custom]=mc.prototype.inspect);Object.defineProperty(mc.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(mc.prototype,"name",{value:"ValidationError"});tV.exports=mc});var $8=m((zRe,sV)=>{"use strict";var rV=be(),Vp=class extends rV{constructor(e,r){let n=e.message;n||(n=rV.messages.general.default);let s=nV(n,e,r);super(s),e=Object.assign({},e,{message:s}),this.properties=e,this.kind=e.type,this.path=e.path,this.value=e.value,this.reason=e.reason}toString(){return this.message}toJSON(){return Object.assign({name:this.name,message:this.message},this)}};Object.defineProperty(Vp.prototype,"name",{value:"ValidatorError"});Object.defineProperty(Vp.prototype,"properties",{enumerable:!1,writable:!0,value:null});Vp.prototype.formatMessage=nV;function nV(t,e,r){if(typeof t=="function")return t(e,r);let n=Object.keys(e);for(let s of n)s!=="message"&&(t=t.replace("{"+s.toUpperCase()+"}",e[s]));return t}sV.exports=Vp});var q8=m((KRe,iV)=>{"use strict";var E6e=be(),S_=class extends E6e{constructor(e,r,n){let s=n.join(", ");super('No matching document found for id "'+e._doc._id+'" version '+r+' modifiedPaths "'+s+'"'),this.version=r,this.modifiedPaths=n}};Object.defineProperty(S_.prototype,"name",{value:"VersionError"});iV.exports=S_});var j8=m((HRe,oV)=>{"use strict";var b6e=be(),w_=class extends b6e{constructor(e){super("Can't save() the same doc multiple times in parallel. Document: "+e._doc._id)}};Object.defineProperty(w_.prototype,"name",{value:"ParallelSaveError"});oV.exports=w_});var L8=m((GRe,aV)=>{"use strict";var S6e=be(),A_=class extends S6e{constructor(e){super("Cannot overwrite `"+e+"` model once compiled.")}};Object.defineProperty(A_.prototype,"name",{value:"OverwriteModelError"});aV.exports=A_});var cV=m((JRe,uV)=>{"use strict";var w6e=be(),O_=class extends w6e{constructor(e){let r=`Schema hasn't been registered for model "`+e+`".
Use mongoose.model(name, schema)`;super(r)}};Object.defineProperty(O_.prototype,"name",{value:"MissingSchemaError"});uV.exports=O_});var U8=m((YRe,lV)=>{"use strict";var A6e=be(),C_=class extends A6e{constructor(e,r,n){let s=n?.matchedCount??0,i=n?.insertedCount??0,o=r.map(u=>u._id).join(", ");o.length>100&&(o=o.slice(0,100)+"...");let a=r.length-s-i;super(`${e}.bulkSave() was not able to update ${a} of the given documents due to incorrect version or optimistic concurrency, document ids: ${o}`),this.modelName=e,this.documents=r,this.bulkWriteResult=n,this.numDocumentsNotUpdated=a}};Object.defineProperty(C_.prototype,"name",{value:"MongooseBulkSaveIncompleteError"});lV.exports=C_});var dV=m((QRe,pV)=>{"use strict";var O6e=bn();pV.exports=function(e){if(O6e(e)!=="TopologyDescription")return!1;let r=Array.from(e.servers.values());return r.length>0&&r.every(n=>n.type==="Unknown")}});var fV=m((XRe,hV)=>{"use strict";var C6e=bn();hV.exports=function(e){if(C6e(e)!=="TopologyDescription"||e.servers.size===0)return!1;for(let r of e.servers.values())if(r.host.endsWith(".mongodb.net")===!1||r.port!==27017)return!1;return!0}});var yV=m((ZRe,mV)=>{"use strict";var v6e=bn(),x6e="Client network socket disconnected before secure TLS connection was established";mV.exports=function(e){if(v6e(e)!=="TopologyDescription")return!1;let r=Array.from(e.servers.values());return r.length>0&&r.every(n=>n.error&&n.error.message.indexOf(x6e)!==-1)}});var V8=m((eFe,gV)=>{"use strict";var T6e=be(),D6e=dV(),M6e=fV(),P6e=yV();var B6e="Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/",I6e="Mongoose is connecting with SSL enabled, but the server is not accepting SSL connections. Please ensure that the MongoDB server you are connecting to is configured to accept SSL connections. Learn more: https://mongoosejs.com/docs/tutorials/ssl.html",v_=class extends T6e{assimilateError(e){let r=e.reason;M6e(r)&&D6e(r)&&e.message.indexOf("bad auth")===-1&&e.message.indexOf("Authentication failed")===-1?this.message=B6e:P6e(r)?this.message=I6e:this.message=e.message;for(let s in e)s!=="name"&&(this[s]=e[s]);return this.cause=r,this}};Object.defineProperty(v_.prototype,"name",{value:"MongooseServerSelectionError"});gV.exports=v_});var W8=m((tFe,_V)=>{"use strict";var N6e=be(),x_=class extends N6e{constructor(e){let r="For your own good, using `document.save()` to update an array which was selected using an $elemMatch projection OR populated using skip, limit, query conditions, or exclusion of the _id field when the operation results in a $pop or $set of the entire array is not supported. The following path(s) would have been modified unsafely:\n  "+e.join(`
  `)+`
Use Model.updateOne() to update these arrays instead. See https://mongoosejs.com/docs/faq.html#divergent-array-error for more information.`;super(r)}};Object.defineProperty(x_.prototype,"name",{value:"DivergentArrayError"});_V.exports=x_});var eu=m((rFe,EV)=>{"use strict";var k6e=be(),T_=class extends k6e{constructor(e,r,n){r=r||"Field `"+e+"` is not in schema and strict mode is set to throw.",super(r),this.isImmutableError=!!n,this.path=e}};Object.defineProperty(T_.prototype,"name",{value:"StrictModeError"});EV.exports=T_});var z8=m((nFe,bV)=>{"use strict";var R6e=be(),D_=class extends R6e{constructor(e,r){r=r||"Cannot populate path `"+e+"` because it is not in your schema. Set the `strictPopulate` option to false to override.",super(r),this.path=e}};Object.defineProperty(D_.prototype,"name",{value:"StrictPopulateError"});bV.exports=D_});var ds=m((SV,wV)=>{"use strict";var qr=be();wV.exports=SV=qr;qr.messages=KU();qr.Messages=qr.messages;qr.CastError=sn();qr.DocumentNotFoundError=b_();qr.ValidationError=yc();qr.ValidatorError=$8();qr.VersionError=q8();qr.ParallelSaveError=j8();qr.OverwriteModelError=L8();qr.MissingSchemaError=cV();qr.MongooseBulkSaveIncompleteError=U8();qr.MongooseServerSelectionError=V8();qr.DivergentArrayError=W8();qr.StrictModeError=eu();qr.StrictPopulateError=z8()});var hs=m((sFe,AV)=>{"use strict";AV.exports=Object.freeze({enumerable:!0,configurable:!0,writable:!0,value:void 0})});var qn=m((iFe,OV)=>{"use strict";var F6e=vt(),jr=class{constructor(e){if(e==null)return this;Object.assign(this,F6e(e))}},$n=hs();Object.defineProperty(jr.prototype,"type",$n);Object.defineProperty(jr.prototype,"validate",$n);Object.defineProperty(jr.prototype,"cast",$n);Object.defineProperty(jr.prototype,"required",$n);Object.defineProperty(jr.prototype,"default",$n);Object.defineProperty(jr.prototype,"ref",$n);Object.defineProperty(jr.prototype,"refPath",$n);Object.defineProperty(jr.prototype,"select",$n);Object.defineProperty(jr.prototype,"index",$n);Object.defineProperty(jr.prototype,"unique",$n);Object.defineProperty(jr.prototype,"immutable",$n);Object.defineProperty(jr.prototype,"sparse",$n);Object.defineProperty(jr.prototype,"text",$n);Object.defineProperty(jr.prototype,"transform",$n);OV.exports=jr});var M_=m((oFe,Wp)=>{"use strict";var $6e=sn();Wp.exports=function(e,r){if(Wp.exports.convertToTrue.has(e))return!0;if(Wp.exports.convertToFalse.has(e))return!1;if(e==null)return e;throw new $6e("boolean",e,r)};Wp.exports.convertToTrue=new Set([!0,"true",1,"1","yes"]);Wp.exports.convertToFalse=new Set([!1,"false",0,"0","no"])});var P_=m((aFe,CV)=>{"use strict";var q6e=M_();CV.exports=function(t){let e=this?.path??null;return q6e(t,e)}});var K8=m((uFe,vV)=>{"use strict";vV.exports=function(t){if(Array.isArray(t)){if(!t.every(e=>typeof e=="number"||typeof e=="string"))throw new Error("$type array values must be strings or numbers");return t}if(typeof t!="number"&&typeof t!="string")throw new Error("$type parameter must be number, string, or array of numbers and strings");return t}});var TV=m((cFe,xV)=>{"use strict";var j6e=eu();xV.exports=function(t){t.$immutable?(t.$immutableSetter=L6e(t.path,t.options.immutable),t.set(t.$immutableSetter)):t.$immutableSetter&&(t.setters=t.setters.filter(e=>e!==t.$immutableSetter),delete t.$immutableSetter)};function L6e(t,e){return function(n,s,i,o){if(this==null||this.$__==null||this.isNew||o?.overwriteImmutable||!(typeof e=="function"?e.call(this,this):e))return n;let u=this.$__.priorDoc!=null?this.$__.priorDoc.$__getValue(t):this.$__getValue(t);if(this.$__.strictMode==="throw"&&n!==u)throw new j6e(t,"Path `"+t+"` is immutable and strict mode is set to throw.",!0);return u}}});var MV=m((lFe,DV)=>{"use strict";DV.exports=function(e){return typeof e=="function"&&e.constructor&&e.constructor.name==="AsyncFunction"}});var BV=m((pFe,PV)=>{"use strict";PV.exports=function(e){let r=Object.keys(e),n=!0;for(let s=0,i=r.length;s<i;++s)if(typeof e[r[s]]=="object"&&e[r[s]]!==null){n=!1;break}return n}});var NV=m((dFe,IV)=>{"use strict";IV.exports=function(e){let r=[],n="",s="DEFAULT";for(let i=0;i<e.length;++i)s==="IN_SQUARE_BRACKETS"&&!/\d/.test(e[i])&&e[i]!=="]"&&(s="DEFAULT",n=r[r.length-1]+"["+n,r.splice(r.length-1,1)),e[i]==="["?(s!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&(r.push(n),n=""),s="IN_SQUARE_BRACKETS"):e[i]==="]"?s==="IN_SQUARE_BRACKETS"?(s="IMMEDIATELY_AFTER_SQUARE_BRACKETS",r.push(n),n=""):(s="DEFAULT",n+=e[i]):e[i]==="."?(s!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&(r.push(n),n=""),s="DEFAULT"):n+=e[i];return s!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&r.push(n),r}});var $V=m(Ro=>{var $h=NV(),kV=["__proto__","constructor","prototype"];Ro.get=function(t,e,r,n){var s;typeof r=="function"&&(r.length<2?(n=r,r=void 0):(s=r,r=void 0)),n||(n=FV);var i=typeof t=="string"?$h(t):t;if(!Array.isArray(i))throw new TypeError("Invalid `path`. Must be either string or array");for(var o=e,a,u=0;u<i.length;++u){if(a=i[u],typeof i[u]!="string"&&typeof i[u]!="number")throw new TypeError("Each segment of path to `get()` must be a string or number, got "+typeof i[u]);if(Array.isArray(o)&&!/^\d+$/.test(a)){var c=i.slice(u);return[].concat(o).map(function(p){return p?Ro.get(c,p,r||s,n):n(void 0)})}if(s)o=s(o,a);else{var l=r&&o[r]?o[r]:o;o=l instanceof Map?l.get(a):l[a]}if(!o)return n(o)}return n(o)};Ro.has=function(t,e){var r=typeof t=="string"?$h(t):t;if(!Array.isArray(r))throw new TypeError("Invalid `path`. Must be either string or array");for(var n=r.length,s=e,i=0;i<n;++i){if(typeof r[i]!="string"&&typeof r[i]!="number")throw new TypeError("Each segment of path to `has()` must be a string or number, got "+typeof r[i]);if(s==null||typeof s!="object"||!(r[i]in s))return!1;s=s[r[i]]}return!0};Ro.unset=function(t,e){var r=typeof t=="string"?$h(t):t;if(!Array.isArray(r))throw new TypeError("Invalid `path`. Must be either string or array");for(var n=r.length,s=e,i=0;i<n;++i){if(s==null||typeof s!="object"||!(r[i]in s))return!1;if(typeof r[i]!="string"&&typeof r[i]!="number")throw new TypeError("Each segment of path to `unset()` must be a string or number, got "+typeof r[i]);if(kV.indexOf(r[i])!==-1)return!1;if(i===n-1)return delete s[r[i]],!0;s=s instanceof Map?s.get(r[i]):s[r[i]]}return!0};Ro.set=function(t,e,r,n,s,i){var o;typeof n=="function"&&(n.length<2?(s=n,n=void 0):(o=n,n=void 0)),s||(s=FV);var a=typeof t=="string"?$h(t):t;if(!Array.isArray(a))throw new TypeError("Invalid `path`. Must be either string or array");if(r!=null){for(var u=0;u<a.length;++u){if(typeof a[u]!="string"&&typeof a[u]!="number")throw new TypeError("Each segment of path to `set()` must be a string or number, got "+typeof a[u]);if(kV.indexOf(a[u])!==-1)return}for(var c=i||/\$/.test(t)&&i!==!1,l=r,p,u=0,d=a.length-1;u<d;++u){if(p=a[u],p=="$"){if(u==d-1)break;continue}if(Array.isArray(l)&&!/^\d+$/.test(p)){var h=a.slice(u);if(!c&&Array.isArray(e))for(var f=0;f<l.length&&f<e.length;++f)Ro.set(h,e[f],l[f],n||o,s,c);else for(var f=0;f<l.length;++f)Ro.set(h,e,l[f],n||o,s,c);return}if(o)l=o(l,p);else{var y=n&&l[n]?l[n]:l;l=y instanceof Map?y.get(p):y[p]}if(!l)return}if(p=a[d],n&&l[n]&&(l=l[n]),Array.isArray(l)&&!/^\d+$/.test(p))if(!c&&Array.isArray(e))RV(l,e,p,o,n,s);else for(var f=0;f<l.length;++f){var g=l[f];g&&(o?o(g,p,s(e)):(g[n]&&(g=g[n]),g[p]=s(e)))}else o?o(l,p,s(e)):l instanceof Map?l.set(p,s(e)):l[p]=s(e)}};Ro.stringToParts=$h;function RV(t,e,r,n,s,i){for(var o,a=0;a<t.length&&a<e.length;++a)o=t[a],Array.isArray(o)&&Array.isArray(e[a])?RV(o,e[a],r,n,s,i):o&&(n?n(o,r,i(e[a])):(o[s]&&(o=o[s]),o[r]=i(e[a])))}function FV(t){return t}});var fs=m((qV,jV)=>{"use strict";jV.exports=qV=$V()});var G8=m((fFe,LV)=>{"use strict";var U6e=vt(),H8=class{constructor(e){if(this._docs={},this._childDocs=[],e!=null&&(e=U6e(e),Object.assign(this,e),typeof e.subPopulate=="object"&&(this.populate=e.subPopulate),e.perDocumentLimit!=null&&e.limit!=null))throw new Error("Can not use `limit` and `perDocumentLimit` at the same time. Path: `"+e.path+"`.")}};LV.exports=H8});var VV=m(UV=>{"use strict";UV.isMongooseDocumentArray=function(t){return Array.isArray(t)&&t.isMongooseDocumentArray}});var B_=m((yFe,WV)=>{"use strict";WV.exports=function(e,r,n){let s=Object.keys(r.tree),i={};for(let o of s)n&&(e.paths[o]||e.nested[o]||e.singleNestedPaths[o])||(i[o]=r.tree[o]);e.options._isMerging=!0,e.add(i,null),delete e.options._isMerging,e.callQueue=e.callQueue.concat(r.callQueue),e.method(r.methods),e.static(r.statics);for(let[o,a]of Object.entries(r._userProvidedOptions))o in e._userProvidedOptions||e.set(o,a);for(let o in r.query)e.query[o]=r.query[o];for(let o in r.virtuals)e.virtuals[o]=r.virtuals[o].clone();e._indexes=e._indexes.concat(r._indexes||[]),e.s.hooks.merge(r.s.hooks,!1)}});var HV=m((zV,KV)=>{"use strict";var gFe=ae(),js=KV.exports=zV=function(){};js.ctor=function(){let t=[...arguments],e=function(){js.apply(this,arguments),this.paths={},this.states={}};return e.prototype=new js,e.prototype.constructor=e,e.prototype.stateNames=t,t.forEach(function(r){e.prototype[r]=function(n){this._changeState(n,r)}}),e};js.prototype._changeState=function(e,r){let n=this.paths[e];if(n===r)return;let s=this.states[n];s&&delete s[e],this.paths[e]=r,this.states[r]=this.states[r]||{},this.states[r][e]=!0};js.prototype.clear=function(e){if(this.states[e]==null)return;let r=Object.keys(this.states[e]),n=r.length,s;for(;n--;)s=r[n],delete this.states[e][s],delete this.paths[s]};js.prototype.clearPath=function(e){let r=this.paths[e];r&&(delete this.paths[e],delete this.states[r][e])};js.prototype.getStatePaths=function(e){return this.states[e]!=null?this.states[e]:{}};js.prototype.some=function(){let e=this,r=arguments.length?arguments:this.stateNames;return Array.prototype.some.call(r,function(n){return e.states[n]==null?!1:Object.keys(e.states[n]).length})};js.prototype._iter=function(e){return function(){let r=[...arguments],n=r.pop();r.length||(r=this.stateNames);let s=this;return r.reduce(function(o,a){return s.states[a]==null?o:o.concat(Object.keys(s.states[a]))},[])[e](function(o,a,u){return n(o,a,u)})}};js.prototype.forEach=function(){return this.forEach=this._iter("forEach"),this.forEach.apply(this,arguments)};js.prototype.map=function(){return this.map=this._iter("map"),this.map.apply(this,arguments)};js.prototype.clone=function(){let e=new this.constructor;e.paths={...this.paths};for(let r of this.stateNames)r in this.states&&(e.states[r]=this.states[r]==null?this.states[r]:{...this.states[r]});return e}});var YV=m((GV,JV)=>{"use strict";var V6e=HV(),W6e=V6e.ctor("require","modify","init","default","ignore");JV.exports=GV=Nt;function Nt(){this.activePaths=new W6e}Nt.prototype.strictMode=!0;Nt.prototype.fullPath=void 0;Nt.prototype.selected=void 0;Nt.prototype.shardval=void 0;Nt.prototype.saveError=void 0;Nt.prototype.validationError=void 0;Nt.prototype.adhocPaths=void 0;Nt.prototype.removing=void 0;Nt.prototype.inserting=void 0;Nt.prototype.saving=void 0;Nt.prototype.version=void 0;Nt.prototype._id=void 0;Nt.prototype.ownerDocument=void 0;Nt.prototype.populate=void 0;Nt.prototype.populated=void 0;Nt.prototype.primitiveAtomics=void 0;Nt.prototype.wasPopulated=!1;Nt.prototype.scope=void 0;Nt.prototype.session=null;Nt.prototype.pathsToScopes=null;Nt.prototype.cachedRequired=null});var I_=m((_Fe,ZV)=>{"use strict";var J8=pe().Binary,z6e=pe().UUID,QV=ae();function Sn(t,e,r){let n=t;t==null&&(n=0);let s,i,o;Array.isArray(e)?(i=e[0],o=e[1]):s=e;let a;return typeof n=="number"||n instanceof Number?a=Buffer.alloc(n):a=Buffer.from(n,s,r),QV.decorate(a,Sn.mixin),a.isMongooseBuffer=!0,a[Sn.pathSymbol]=i,a[XV]=o,a._subtype=0,a}var K6e=Symbol.for("mongoose#Buffer#_path"),XV=Symbol.for("mongoose#Buffer#_parent");Sn.pathSymbol=K6e;Sn.mixin={_subtype:void 0,_markModified:function(){let t=this[XV];return t&&t.markModified(this[Sn.pathSymbol]),this},write:function(){let t=Buffer.prototype.write.apply(this,arguments);return t>0&&this._markModified(),t},copy:function(t){let e=Buffer.prototype.copy.apply(this,arguments);return t?.isMongooseBuffer&&t._markModified(),e}};QV.each(["writeUInt8","writeUInt16","writeUInt32","writeInt8","writeInt16","writeInt32","writeFloat","writeDouble","fill","utf8Write","binaryWrite","asciiWrite","set","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE"],function(t){Buffer.prototype[t]&&(Sn.mixin[t]=function(){let e=Buffer.prototype[t].apply(this,arguments);return this._markModified(),e})});Sn.mixin.toObject=function(t){let e=typeof t=="number"?t:this._subtype||0;return new J8(Buffer.from(this),e)};Sn.mixin.$toObject=Sn.mixin.toObject;Sn.mixin.toBSON=function(){return new J8(this,this._subtype||0)};Sn.mixin.toUUID=function(){if(this._subtype!==4)throw new Error("Cannot convert a Buffer with subtype "+this._subtype+" to a UUID");return new z6e(this)};Sn.mixin.equals=function(t){if(!Buffer.isBuffer(t)||this.length!==t.length)return!1;for(let e=0;e<this.length;++e)if(this[e]!==t[e])return!1;return!0};Sn.mixin.subtype=function(t){if(typeof t!="number")throw new TypeError("Invalid subtype. Expected a number");this._subtype!==t&&this._markModified(),this._subtype=t};Sn.Binary=J8;ZV.exports=Sn});var gc=m(Y8=>{"use strict";Y8.schemaMixedSymbol=Symbol.for("mongoose:schema_mixed");Y8.builtInMiddleware=Symbol.for("mongoose:built-in-middleware")});var _c=m((bFe,tW)=>{"use strict";var N_=kt(),H6e=gc(),G6e=hc(),eW=ae();function Ls(t,e,r,n){if(e?.default){let s=e.default;Array.isArray(s)&&s.length===0?e.default=Array:!e.shared&&G6e(s)&&eW.hasOwnKeys(s)===!1&&(e.default=function(){return{}})}N_.call(this,t,e,"Mixed",n),this[H6e.schemaMixedSymbol]=!0}Ls.schemaName="Mixed";Ls.defaultOptions={};Ls.prototype=Object.create(N_.prototype);Ls.prototype.constructor=Ls;Ls.get=N_.get;Ls.set=N_.set;Ls.setters=[];Ls.prototype.cast=function(t){return t instanceof Error?eW.errorToPOJO(t):t};Ls.prototype.castForQuery=function(t,e){return e};Ls.prototype.toJSONSchema=function(e){return{}};tW.exports=Ls});var nW=m((wFe,rW)=>{"use strict";rW.exports=class{constructor(e,r,n){this.subdocSnapshot=e,this.activePaths=r,this.version=n}}});var R_=m((AFe,sW)=>{"use strict";var J6e=be(),k_=class extends J6e{constructor(e,r){let n=Array.isArray(r)?"array":"primitive value";super("Tried to set nested object field `"+e+`\` to ${n} \``+r+"`"),this.path=e}};Object.defineProperty(k_.prototype,"name",{value:"ObjectExpectedError"});sW.exports=k_});var $_=m((OFe,iW)=>{"use strict";var Y6e=be(),F_=class extends Y6e{constructor(e,r,n){super('Parameter "'+r+'" to '+n+'() must be an object, got "'+(e==null?e:e.toString())+'" (type '+typeof e+")")}};Object.defineProperty(F_.prototype,"name",{value:"ObjectParameterError"});iW.exports=F_});var aW=m((CFe,oW)=>{"use strict";var Q6e=be(),q_=class extends Q6e{constructor(e){super("Can't validate() the same doc multiple times in parallel. Document: "+e._doc._id)}};Object.defineProperty(q_.prototype,"name",{value:"ParallelValidateError"});oW.exports=q_});var Q8=m((vFe,uW)=>{"use strict";uW.exports=function(e){let r={},n=Object.keys(e);for(let s of n){if(s.indexOf(".")===-1){r[s]=1;continue}let i=s.split("."),o=i[0];for(let a=0;a<i.length;++a)r[o]=1,a+1<i.length&&(o=o+"."+i[a+1])}return r}});var lW=m((xFe,cW)=>{"use strict";cW.exports=function(e){return e==null||typeof e!="object"?!1:e.$slice==null&&e.$elemMatch==null&&e.$meta==null&&e.$==null}});var j_=m((TFe,pW)=>{"use strict";var X6e=lW();pW.exports=function(e,r,n,s,i,o,a){let u=Object.keys(e.$__schema.paths),c=u.length,l=a?.skipParentChangeTracking;for(let p=0;p<c;++p){let d,h="",f=u[p];if(f==="_id"&&e.$__.skipId)continue;let y=e.$__schema.paths[f],g=y.splitPath(),_=g.length;if(g[_-1]==="$*")continue;let S=!1,O=e._doc;for(let E=0;E<_&&O!=null;++E){let A=g[E];if(h+=(h.length?".":"")+A,n===!0){if(h in r)break}else if(n===!1&&r&&!S){let x=y.$isSingleNested||y.$isMongooseDocumentArray;if(h in r&&!X6e(r[h])||E===_-1&&x&&s!=null&&s[h])S=!0;else if(s!=null&&!s[h])break}if(E===_-1){if(O[A]!==void 0)break;if(i!=null){if(typeof y.defaultValue=="function"){if(!y.defaultValue.$runBeforeSetters&&i||y.defaultValue.$runBeforeSetters&&!i)break}else if(!i)continue}if(o&&o[h])break;if(r&&n!==null){if(n===!0){if(f in r)continue;try{d=y.getDefault(e,!1)}catch(x){e.invalidate(f,x);break}typeof d<"u"&&(O[A]=d,X8(e,f,l))}else if(S){try{d=y.getDefault(e,!1)}catch(x){e.invalidate(f,x);break}typeof d<"u"&&(O[A]=d,X8(e,f,l))}}else{try{d=y.getDefault(e,!1)}catch(x){e.invalidate(f,x);break}typeof d<"u"&&(O[A]=d,X8(e,f,l))}}else O=O[A]}}};function X8(t,e,r){t.$__.activePaths.default(e),!r&&t.$isSubdocument&&t.$isSingleNested&&t.$parent()!=null&&t.$parent().$__.activePaths.default(t.$__pathRelativeToParent(e))}});var L_=m((DFe,hW)=>{"use strict";hW.exports=function(e,r,n){n=n||{};let s=n.skipDocArrays,i=0;if(!e)return i;for(let o of Object.keys(e.$__.activePaths.getStatePaths("modify")))s&&e.$__schema.path(o)?.$isMongooseDocumentArray||o.startsWith(r+".")&&(e.$__.activePaths.clearPath(o),++i,e.$isSubdocument&&dW(e,o));return i};function dW(t,e,r=new Set){if(r.has(t))throw new Error("Infinite subdocument loop: subdoc with _id "+t._id+" is a parent of itself");let n=t.$parent(),s=t.$__pathRelativeToParent(void 0,!1)+"."+e;n.$__.activePaths.clearPath(s),n.$isSubdocument&&dW(n,s,r)}});var V_=m(Z8=>{"use strict";var Z6e=vt(),eOe=te().documentSchemaSymbol,tOe=bi().internalToObjectOptions,mW=ae(),zp,rOe=te().getSymbol,U_=te().scopeSymbol,fW=mW.isPOJO;Z8.compile=yW;Z8.defineKey=gW;var nOe=Object.freeze({minimize:!0,virtuals:!1,getters:!1,transform:!1}),sOe=Object.freeze({noDottedPath:!0});function yW(t,e,r,n){zp=zp||Zi();let s=n.typeKey;for(let i of Object.keys(t)){let o=t[i],u=fW(o)&&mW.hasOwnKeys(o)&&(!o[s]||s==="type"&&fW(o.type)&&o.type.type)?o:null;gW({prop:i,subprops:u,prototype:e,prefix:r,options:n})}}function gW({prop:t,subprops:e,prototype:r,prefix:n,options:s}){zp=zp||Zi();let i=(n?n+".":"")+t;n=n||"";let o=n?Object.freeze({}):sOe;e?Object.defineProperty(r,t,{enumerable:!0,configurable:!0,get:function(){if(!this.$__)return;let a=this;if(this.$__.getters||(this.$__.getters={}),!this.$__.getters[i]){let u=Object.create(zp.prototype,iOe(this));n||(u.$__[U_]=this),u.$__.nestedPath=i,Object.defineProperty(u,"schema",{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(u,"$__schema",{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(u,eOe,{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(u,"toObject",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Z6e(a.get(i,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null}))}}),Object.defineProperty(u,"$__get",{enumerable:!1,configurable:!0,writable:!1,value:function(){return a.get(i,null,{virtuals:this?.schema?.options?.toObject?.virtuals||null})}}),Object.defineProperty(u,"toJSON",{enumerable:!1,configurable:!0,writable:!1,value:function(){return a.get(i,null,{virtuals:this?.schema?.options?.toJSON?.virtuals||null})}}),Object.defineProperty(u,"$__isNested",{enumerable:!1,configurable:!0,writable:!1,value:!0}),Object.defineProperty(u,"$isEmpty",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Object.keys(this.get(i,null,nOe)||{}).length===0}}),Object.defineProperty(u,"$__parent",{enumerable:!1,configurable:!0,writable:!1,value:this}),yW(e,u,i,s),this.$__.getters[i]=u}return this.$__.getters[i]},set:function(a){a?.$__isNested?a=a.$__get():a instanceof zp&&!a.$__isNested&&(a=a.$toObject(tOe)),(this.$__[U_]||this).$set(i,a)}}):Object.defineProperty(r,t,{enumerable:!0,configurable:!0,get:function(){return this[rOe].call(this.$__[U_]||this,i,null,o)},set:function(a){this.$set.call(this.$__[U_]||this,i,a)}})}function iOe(t){let e={};return Object.getOwnPropertyNames(t).forEach(function(r){["isNew","$__","$errors","errors","_doc","$locals","$op","__parentArray","__index","$isDocumentArrayElement"].indexOf(r)!==-1&&(e[r]=Object.getOwnPropertyDescriptor(t,r),e[r].enumerable=!1)}),e}});var EW=m((PFe,_W)=>{"use strict";_W.exports=function(e){return e==null?null:Object.keys(e)[0]}});var W_=m(ex=>{"use strict";var oOe=pe().Binary,bW=$r(),SW=Rh(),aOe=ds(),uOe=require("util");ex.flatten=wW;ex.modifiedPaths=AW;function wW(t,e,r,n){let s;t&&SW(t)&&!Buffer.isBuffer(t)?s=Object.keys(t.toObject({transform:!1,virtuals:!1})||{}):s=Object.keys(t||{});let i=s.length,o={};e=e?e+".":"";for(let a=0;a<i;++a){let u=s[a],c=t[u];o[e+u]=c;let l=n?.path?.(e+u),p=n?.nested?.[e+u];if(l?.instance!=="Mixed"){if(OW(c)){if(r?.skipArrays&&Array.isArray(c))continue;let d=wW(c,e+u,r,n);for(let h in d)o[h]=d[h];Array.isArray(c)&&(o[e+u]=c)}if(p){let d=Object.keys(n.paths);for(let h of d)h.startsWith(e+u+".")&&!Object.hasOwn(o,h)&&(o[h]=void 0)}}}return o}function AW(t,e,r,n=null){if(t==null||typeof t!="object")return;if(n==null&&(n={raw:{update:t,path:e},trace:new WeakSet}),n.trace.has(t))throw new aOe(`a circular reference in the update value, updateValue:
${uOe.inspect(n.raw.update,{showHidden:!1,depth:1})}
updatePath: '${n.raw.path}'`);n.trace.add(t);let s=Object.keys(t||{}),i=s.length;r=r||{},e=e?e+".":"";for(let o=0;o<i;++o){let a=s[o],u=t[a],c=e+a;r[c]=!0,!Buffer.isBuffer(u)&&SW(u)&&(u=u.toObject({transform:!1,virtuals:!1})),OW(u)&&AW(u,e+a,r,n)}return n.trace.delete(t),r}function OW(t){return t&&typeof t=="object"&&!(t instanceof Date)&&!bW(t,"ObjectId")&&(!Array.isArray(t)||t.length!==0)&&!(t instanceof Buffer)&&!bW(t,"Decimal128")&&!(t instanceof oOe)}});var Rt=m((IFe,CW)=>{"use strict";CW.exports=function(e,r,n){let s,i=!1;if(typeof r=="string"){if(r.indexOf(".")===-1){let u=tx(e,r);return u??n}s=r.split(".")}else if(i=!0,s=r,s.length===1){let u=tx(e,s[0]);return u??n}let o=r,a=e;for(let u of s){if(a==null)return n;if(!i&&a[o]!=null)return a[o];a=tx(a,u),i||(o=o.substr(u.length+1))}return a??n};function tx(t,e){return t==null?t:t instanceof Map?t.get(e):t[e]}});var rx=m((NFe,xW)=>{"use strict";var vW=$r();xW.exports=function(e,r){return typeof e=="string"&&typeof r=="string"||typeof e=="number"&&typeof r=="number"?e===r:vW(e,"ObjectId")&&vW(r,"ObjectId")?e.toString()===r.toString():!1}});var z_=m((kFe,TW)=>{"use strict";var cOe=rx();TW.exports=function(e,r){if(e?.discriminators==null)return null;for(let n of Object.keys(e.discriminators)){let s=e.discriminators[n];if(s.discriminatorMapping!=null&&cOe(s.discriminatorMapping.value,r))return s}return null}});var MW=m((RFe,DW)=>{"use strict";var lOe=Rt(),pOe=z_();DW.exports=function t(e,r,n){n=n||{};let s=n.typeOnly,i=Array.isArray(r)?r:r.indexOf(".")===-1?[r]:r.split("."),o=null,a="adhocOrUndefined",u=pOe(e.schema,e.get(e.schema.options.discriminatorKey))||e.schema;for(let c=0;c<i.length;++c){let l=i.slice(0,c+1).join(".");if(o=u.path(l),o==null){a="adhocOrUndefined";continue}if(o.instance==="Mixed")return s?"real":o;if(a=u.pathType(l),(o.$isSingleNested||o.$isMongooseDocumentArrayElement)&&o.schema.discriminators!=null){let p=o.schema.discriminators,d=e.get(l+"."+lOe(o,"schema.options.discriminatorKey"));if(d==null||p[d]==null)continue;let h=i.slice(c+1).join(".");return t(e.get(l),h,n)}}return s?a:o}});var BW=m((FFe,PW)=>{"use strict";var dOe=Rt();PW.exports=function(e,r,n){let s=n!=null?Object.keys(dOe(e.tree,n,{})):Object.keys(e.tree),i=new Set(Object.keys(r)),o;if(i.size>1){o=new Set;for(let a of s)i.has(a)&&o.add(a);for(let a of i)o.has(a)||o.add(a);o=Array.from(o)}else o=Array.from(i);return o}});var NW=m(($Fe,IW)=>{"use strict";IW.exports=function(e,r){if(r.length===1)return;let n=r[0],s;for(let i=0;i<r.length-1;++i){let o=e.path(n);o?.schema?(s=o.schema.options.strict,e=o.schema,n=o.$isMongooseDocumentArray&&!isNaN(r[i+1])?"":r[i+1]):n+=n.length?"."+r[i+1]:r[i+1]}return s}});var K_=m((qFe,kW)=>{"use strict";var hOe=ae(),fOe=new Set(["__index","__parentArray","_doc"]);kW.exports=function(e,r){if(hOe.isPOJO(e)&&e.$__!=null&&e._doc!=null){if(r){let n={};for(let s of Object.keys(e))typeof s!="symbol"&&s[0]!=="$"&&(fOe.has(s)||(n[s]=e[s]));return{...e._doc,...n}}return e._doc}return e}});var Kp=m((jFe,RW)=>{"use strict";RW.exports=function(e){return e==null?!0:typeof e=="object"?!("$meta"in e)&&!("$slice"in e):!0}});var Hp=m((LFe,FW)=>{"use strict";var mOe=Kp(),yOe=jp();FW.exports=function t(e){if(e==null)return null;let r=Object.keys(e),n=null;if(r.length===1&&r[0]==="_id")n=!e._id;else for(let s=0;s<r.length;++s){let i=r[s];if(i!=="_id"&&mOe(e[i])&&(n=yOe(e[i])?t(e[i])??n:!e[i],n!=null))break}return n}});var nx=m((UFe,$W)=>{"use strict";var gOe=Kp();$W.exports=function(e,r){if(e==null)return!1;if(r==="_id")return e._id===0;let n=Object.keys(e),s=null;for(let i of n)if(gOe(e[i])){s=e[r]===1?"inclusive":"exclusive";break}return s==="inclusive"?e[r]!==1:s==="exclusive"?e[r]===0:!1}});var sx=m((VFe,qW)=>{"use strict";var _Oe=ae();qW.exports=function(e,r){if(e._doc._id==null||r==null||r.length===0)return;let n=String(e._doc._id);for(let s of r){if(s.isVirtual)continue;let o=s.path.split(".");for(let a=0;a<o.length-1;++a){let u=o.slice(0,a+1).join("."),c=o.slice(a+1).join("."),l=e.get(u);if(l!=null&&_Oe.isMongooseDocumentArray(l)){for(let p=0;p<l.length;++p)l[p]&&l[p].populated(c,s._docs[n]==null?void 0:s._docs[n][p],s);break}}}}});var ix=m((WFe,LW)=>{"use strict";var{isPOJO:EOe}=ae();LW.exports=jW;function jW(t){let e=Object.keys(t),r=e.length,n,s,i;for(;r--;){if(s=e[r],i=t[s],EOe(i)&&(t[s]=jW(i)),t[s]===void 0){delete t[s];continue}n=!0}return n?t:void 0}});var ox=m((zFe,UW)=>{"use strict";var bOe=/\./g;UW.exports=function(e){if(e.indexOf(".")===-1)return[e];let r=e.split(bOe),n=r.length,s=new Array(n),i="";for(let o=0;o<n;++o)i+=i.length!==0?"."+r[o]:r[o],s[o]=i;return s}});var WW=m((KFe,VW)=>{"use strict";VW.exports=function(e,r,n,s,i){let o=Object.keys(e).reduce((u,c)=>u||c.startsWith(r+"."),!1),a=r+"."+n.options.discriminatorKey;!o&&i.length===1&&i[0]===a&&s.splice(s.indexOf(a),1)}});var Us=m((HFe,zW)=>{"use strict";var SOe=rx();zW.exports=function(e,r){if(e==null)return null;for(let n of Object.keys(e)){let s=e[n];if(s.schema&&s.schema.discriminatorMapping&&SOe(s.schema.discriminatorMapping.value,r))return s}return null}});var H_=m((GFe,KW)=>{"use strict";KW.exports=function(e,r){let n=r.split("."),s="",i,o,a;for(let u=0;u<n.length;++u)if(s+=s.length?".":""+n[u],e[s]){for(o=Object.keys(e),a=o.length,i=0;i<a;++i)o[u].indexOf(s+".")===0&&o[u].indexOf(r);return!0}return!1}});var qh=m(Ec=>{"use strict";var HW=G8(),wOe=WW(),GW=Rt(),AOe=Us(),OOe=Kp(),COe=vt(),vOe=H_();Ec.preparePopulationOptionsMQ=function(e,r){let n=e._mongooseOptions.populate,s=Object.keys(n).reduce((a,u)=>a.concat([n[u]]),[]);r.lean!=null&&s.filter(a=>a?.options?.lean==null).forEach(xOe(r.lean));let i=e?.options?.session||null;i!=null&&s.forEach(a=>{if(a.options==null){a.options={session:i};return}"session"in a.options||(a.options.session=i)});let o=e._fieldsForExec();for(let a=0;a<s.length;++a)s[a]instanceof HW?s[a]=new HW({...s[a],_queryProjection:o,_localModel:e.model}):(s[a]._queryProjection=o,s[a]._localModel=e.model);return s};Ec.createModel=function(e,r,n,s,i){e.hooks.execPreSync("createModel",r);let o=e.schema?e.schema.discriminatorMapping:null,a=o?.isRoot?o.key:null,u=r[a];if(a&&u&&e.discriminators){let l=e.discriminators[u]||AOe(e.discriminators,u);if(l){let p=COe(s);return Ec.applyPaths(p,l.schema),new l(void 0,p,{skipId:!0})}}let c={skipId:!0,isNew:!1,willInit:!0};return i!=null&&"defaults"in i&&(c.defaults=i.defaults),i!=null&&"strict"in i&&(c.strict=i.strict),new e(void 0,n,c)};Ec.createModelAndInit=function(e,r,n,s,i,o,a){let u=o?{populated:o}:void 0,c=Ec.createModel(e,r,n,s,i);try{c.$init(r,u,a)}catch(l){a(l,c)}};Ec.applyPaths=function(e,r,n){let s,i,o=new Set;if(e){i=Object.keys(e);let d=[];for(let h=0;h<i.length;++h){let f=i[h];i[h][0]==="-"&&(delete e[f],f==="-_id"?e._id=0:d.push(f.slice(1)))}i=Object.keys(e);for(let h=0;h<i.length;++h){if(i[h][0]==="+")continue;let f=e[i[h]];if(OOe(f)&&!(i[h]==="_id"&&i.length>1)&&!(i[h]===r.options.discriminatorKey&&i.length>1&&f!=null&&!f)){s=!f;break}}for(let h of d){let f=r.path(h);!f?.selected||s!==!1?(e[h]=0,s=!0):f?.selected&&s===!1&&o.add(h)}}let a=[],u=[],c=[];switch(l(r),s){case!0:for(let d of u)e[d]=0;break;case!1:r?.paths._id?.options?.select===!1&&(e._id=0);for(let d of a)o.has(d)||vOe(e,d)||(e[d]=e[d]||1);break;case void 0:if(e==null)break;for(let d of Object.keys(e||{}))d.startsWith("+")&&delete e[d];for(let d of u)e[d]==null&&(e[d]=0);break}function l(d,h){if(h||(h=""),c.indexOf(d)!==-1)return[];c.push(d);let f=[];return d.eachPath(function(y,g){if(h&&(y=h+"."+y),g.$isSchemaMap||y.endsWith(".$*")){let S="+"+y,O=e&&S in e;g.options?.select===!1&&!O&&u.push(y);return}let _=p(y,g);if(_==null&&!Array.isArray(g)&&g.$isMongooseArray&&!g.$isMongooseDocumentArray&&(_=p(y,g.embeddedSchemaType)),_!=null&&f.push(_),g.schema){let S=l(g.schema,y);s===!1&&wOe(e,y,g.schema,a,S)}}),c.pop(),f}function p(d,h){if(e==null||typeof h.selected!="boolean")return;if(h.selected===!1&&e[d]){n&&(e[d]=0);return}if(!s&&h.selected&&d===r.options.discriminatorKey&&e[d]!=null&&!e[d]){delete e[d];return}if(s===!1&&h.selected&&e[d]!=null&&!e[d]){delete e[d];return}let f="+"+d;if(e&&f in e){delete e[f],s===!1&&i.length>1&&!~i.indexOf(d)&&!n?e[d]=1:s==null&&n&&h.selected===!1&&(e[d]=0);return}let g=d.split("."),_="";for(let S=0;S<g.length;++S)if(_+=_.length?"."+g[S]:g[S],u.indexOf(_)!==-1)return;if(!s&&h?.options?.$skipDiscriminatorCheck){let S="";for(let O=0;O<g.length;++O){S+=(S.length===0?"":".")+g[O];let E=GW(e,S,!1)||GW(e,S+".$",!1);if(E&&typeof E!="object")return}}return(h.selected?a:u).push(d),d}};function xOe(t){return function(e){e.options||(e.options={}),Array.isArray(t?.virtuals)&&(t=Object.assign({},t),t.virtuals=t.virtuals.filter(r=>typeof r=="string"&&r.startsWith(e.path+".")).map(r=>r.slice(e.path.length+1))),e.options.lean=t}}});var ax=m((YFe,JW)=>{"use strict";function TOe(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}JW.exports=TOe});var QW=m((QFe,YW)=>{"use strict";YW.exports=function(e,r,n){let s=r[0],i=n,o=e;for(let a=0;a<r.length-1;++a){let u=i.path(s);if(u?.schema){let c=o.get(s);if(i=u.schema,s=r[a+1],Array.isArray(c)&&!isNaN(s)&&(c=c[s],s=""),c==null)break;o=c}else s+=s.length?"."+r[a+1]:r[a+1]}return o}});var G_=m((XFe,ez)=>{"use strict";var Fo=Zi(),DOe=bi().internalToObjectOptions,XW=require("util"),ZW=ae();ez.exports=rt;function rt(t,e,r,n){if(r!=null){let s={isNew:r.isNew};"defaults"in r.$__&&(s.defaults=r.$__.defaults),n=Object.assign(s,n)}n?.path!=null&&(this.$basePath=n.path),Fo.call(this,t,e,n),delete this.$__.priorDoc}rt.prototype=Object.create(Fo.prototype);Object.defineProperty(rt.prototype,"$isSubdocument",{configurable:!1,writable:!1,value:!0});Object.defineProperty(rt.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!0});rt.prototype.toBSON=function(){return this.toObject(DOe)};rt.prototype.save=async function(e){return e=e||{},e.suppressWarning||ZW.warn("mongoose: calling `save()` on a subdoc does **not** save the document to MongoDB, it only runs save middleware. Use `subdoc.save({ suppressWarning: true })` to hide this warning if you're sure this behavior is right for your app."),await this.$__save()};rt.prototype.$__fullPath=function(t){return this.$__.fullPath||this.ownerDocument(),t?this.$__.fullPath+"."+t:this.$__.fullPath};rt.prototype.$__pathRelativeToParent=function(t){return t==null?this.$basePath:this.$basePath?[this.$basePath,t].join("."):t};rt.prototype.$__save=async function(){try{await this._execDocumentPreHooks("save")}catch(e){await this._execDocumentPostHooks("save",e);return}await this._execDocumentPostHooks("save")};rt.prototype.$isValid=function(t){let e=this.$parent(),r=this.$__pathRelativeToParent(t);return e!=null&&r!=null?e.$isValid(r):Fo.prototype.$isValid.call(this,t)};rt.prototype.markModified=function(t){Fo.prototype.markModified.call(this,t);let e=this.$parent(),r=this.$__pathRelativeToParent(t);if(e==null||r==null)return;let n=this.$__pathRelativeToParent().replace(/\.$/,"");e.isDirectModified(n)||this.isNew||this.$__parent.markModified(r,this)};rt.prototype.isModified=function(t,e,r){let n=this.$parent();return n!=null?(Array.isArray(t)||typeof t=="string"?(t=Array.isArray(t)?t:t.split(" "),t=t.map(s=>this.$__pathRelativeToParent(s)).filter(s=>s!=null)):t||(t=this.$__pathRelativeToParent()),n.$isModified(t,e,r)):Fo.prototype.isModified.call(this,t,e,r)};rt.prototype.$markValid=function(t){Fo.prototype.$markValid.call(this,t);let e=this.$parent(),r=this.$__pathRelativeToParent(t);e!=null&&r!=null&&e.$markValid(r)};rt.prototype.invalidate=function(t,e,r){Fo.prototype.invalidate.call(this,t,e,r);let n=this.$parent(),s=this.$__pathRelativeToParent(t);if(n!=null&&s!=null)n.invalidate(s,e,r);else if(e.kind==="cast"||e.name==="CastError"||s==null)throw e;return this.ownerDocument().$__.validationError};rt.prototype.$ignore=function(t){Fo.prototype.$ignore.call(this,t);let e=this.$parent(),r=this.$__pathRelativeToParent(t);e!=null&&r!=null&&e.$ignore(r)};rt.prototype.ownerDocument=function(){if(this.$__.ownerDocument)return this.$__.ownerDocument;let t=this,e=[],r=new Set([t]);for(;typeof t.$__pathRelativeToParent=="function";){e.unshift(t.$__pathRelativeToParent(void 0,!0));let n=t.$parent();if(n==null)break;if(t=n,r.has(t))throw new Error("Infinite subdocument loop: subdoc with _id "+t._id+" is a parent of itself");r.add(t)}return this.$__.fullPath=e.join("."),this.$__.ownerDocument=t,this.$__.ownerDocument};rt.prototype.$__fullPathWithIndexes=function(){let t=this,e=[],r=new Set([t]);for(;typeof t.$__pathRelativeToParent=="function";){e.unshift(t.$__pathRelativeToParent(void 0,!1));let n=t.$parent();if(n==null)break;if(t=n,r.has(t))throw new Error("Infinite subdocument loop: subdoc with _id "+t._id+" is a parent of itself");r.add(t)}return e.join(".")};rt.prototype.parent=function(){return this.$__parent};rt.prototype.$parent=rt.prototype.parent;rt.prototype.$__setParent=function(e){this.$__parent=e};rt.prototype.$__removeFromParent=function(){this.$__parent.set(this.$basePath,null)};rt.prototype.deleteOne=function(e){if(MOe(this),!e?.noop){this.$__removeFromParent();let r=this.ownerDocument();r.$__.removedSubdocs=r.$__.removedSubdocs||[],r.$__.removedSubdocs.push(this)}};rt.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.nested.populate("path")`, use `doc.populate("nested.path")`')};rt.prototype.inspect=function(){return this.toObject()};XW.inspect.custom&&(rt.prototype[XW.inspect.custom]=rt.prototype.inspect);rt.prototype.$toObject=function(e,r){let n=Fo.prototype.$toObject.call(this,e,r);if(!(ZW.hasOwnKeys(n)===!1&&e?._calledWithOptions!=null&&(e._calledWithOptions?.minimize??this?.$__schemaTypeOptions?.minimize??e.minimize)&&!this.constructor.$__required))return n};function MOe(t){let e=t.ownerDocument();function r(){e.$removeListener("save",r),e.$removeListener("deleteOne",r),t.emit("deleteOne",t),t.constructor.emit("deleteOne",t)}e.$on("save",r),e.$on("deleteOne",r)}});var Jp=m((ZFe,nz)=>{"use strict";var tz=require("events").EventEmitter,rz=G_(),POe=ae(),Gp=te().documentArrayParent;function wn(t,e,r,n,s){POe.isMongooseDocumentArray(e)?(this.__parentArray=e,this[Gp]=e.$parent()):(this.__parentArray=void 0,this[Gp]=void 0),this.$setIndex(s),this.$__parent=this[Gp];let i;typeof r=="object"&&r!=null?(i={isNew:!0,...r},r=void 0):i={isNew:!0},rz.call(this,t,n,this[Gp],i)}wn.prototype=Object.create(rz.prototype);wn.prototype.constructor=wn;Object.defineProperty(wn.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!1});Object.defineProperty(wn.prototype,"$isDocumentArrayElement",{configurable:!1,writable:!1,value:!0});for(let t in tz.prototype)wn[t]=tz.prototype[t];wn.prototype.$setIndex=function(t){if(this.__index=t,this.$__?.validationError!=null){let e=Object.keys(this.$__.validationError.errors);for(let r of e)this.invalidate(r,this.$__.validationError.errors[r])}};wn.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.arr[0].populate("path")`, use `doc.populate("arr.0.path")`')};wn.prototype.$__removeFromParent=function(){let t=this._doc._id;if(!t)throw new Error("For your own good, Mongoose does not know how to remove an ArraySubdocument that has no _id");this.__parentArray.pull({_id:t})};wn.prototype.$__fullPath=function(t,e){return this.__index==null?null:(this.$__.fullPath||this.ownerDocument(),e?t?this.$__.fullPath+"."+t:this.$__.fullPath:t?this.$__.fullPath+"."+this.__index+"."+t:this.$__.fullPath+"."+this.__index)};wn.prototype.$__pathRelativeToParent=function(t,e){return this.__index==null||!this.__parentArray?.$path?null:e?t==null?this.__parentArray.$path():this.__parentArray.$path()+"."+t:t==null?this.__parentArray.$path()+"."+this.__index:this.__parentArray.$path()+"."+this.__index+"."+t};wn.prototype.$parent=function(){return this[Gp]};wn.prototype.$__setParent=function(e){this[Gp]=e,this.$__parent=e};wn.prototype.parentArray=function(){return this.__parentArray};nz.exports=wn});var Q_=m((e$e,pz)=>{"use strict";var lx=Zi(),ux=Jp(),BOe=be(),sz=L_(),IOe=vt(),iz=bi().internalToObjectOptions,uz=fs(),Ar=ae(),cx=$r(),NOe=te().arrayAtomicsBackupSymbol,wi=te().arrayAtomicsSymbol,tu=te().arrayParentSymbol,ru=te().arrayPathSymbol,$o=te().arraySchemaSymbol,cz=te().populateModelSymbol,kOe=Symbol("mongoose#Array#sliced"),oz=Array.prototype.push;var Y_={$__getAtomics(){let t=[],e=Object.keys(this[wi]||{}),r=e.length,n=Object.assign({},iz,{_isNested:!0});if(r===0)return t[0]=["$set",this.toObject(n)],t;for(;r--;){let s=e[r],i=this[wi][s];Ar.isMongooseObject(i)?i=i.toObject(n):Array.isArray(i)?i=this.toObject.call(i,n):Array.isArray(i?.$each)?i.$each=this.toObject.call(i.$each,n):typeof i?.valueOf=="function"&&(i=i.valueOf()),s==="$addToSet"&&(i={$each:i}),t.push([s,i])}return t},getAtomics(){return this.$__getAtomics()},clearAtomics(){this[NOe]=this[wi],this[wi]={}},$atomics(){return this[wi]},$parent(){return this[tu]},$path(){return this[ru]},$schemaType(){return this[$o]},$shift(){this._registerAtomic("$pop",-1),this._markModified();let t=this.__array;if(!t._shifted)return t._shifted=!0,[].shift.call(t)},$pop(){if(this._registerAtomic("$pop",1),this._markModified(),!this._popped)return this._popped=!0,[].pop.call(this)},$schema(){return this[$o]},_cast(t){let e=!1,r,n=this[tu];if(n&&(e=n.$populated(this[ru],!0)),e&&t!=null){if(r=e.options[cz],r==null)throw new BOe("No populated model found for path `"+this[ru]+"`. This is likely a bug in Mongoose, please report an issue on github.com/Automattic/mongoose.");return(Buffer.isBuffer(t)||cx(t,"ObjectId")||!Ar.isObject(t))&&(t={_id:t}),t.schema?.discriminatorMapping?.key!==void 0||(t=new r(t)),this[$o].embeddedSchemaType.applySetters(t,n,!0)}return this[$o].embeddedSchemaType.applySetters(t,n,!1)},_mapCast(t,e){return this._cast(t,this.length+e)},_markModified(t){let e=this[tu],r;if(e){if(r=this[ru],arguments.length&&(r=r+"."+t),r!=null&&r.endsWith(".$"))return this;e.markModified(r,arguments.length!==0?t:e)}return this},_registerAtomic(t,e){if(this[kOe])return;if(t==="$set")return this[wi]={$set:e},sz(this[tu],this[ru]),this._markModified(),this;let r=this[wi];if(t==="$pop"&&!("$pop"in r)){let s=this;this[tu].once("save",function(){s._popped=s._shifted=null})}if(r.$set||Ar.hasOwnKeys(r)&&!(t in r))return this[wi]={$set:this},this;let n;if(t==="$pullAll"||t==="$addToSet")r[t]||(r[t]=[]),r[t]=r[t].concat(e);else if(t==="$pullDocs"){let s=r.$pull||(r.$pull={});e[0]instanceof ux?(n=s.$or||(s.$or=[]),Array.prototype.push.apply(n,e.map(i=>i.toObject({transform:(o,a)=>(i==null||i.$__==null||Object.keys(i.$__.activePaths.getStatePaths("default")).forEach(u=>{uz.unset(u,a),lz(a,u)}),a),virtuals:!1})))):(n=s._id||(s._id={$in:[]}),n.$in=n.$in.concat(e))}else if(t==="$push")if(r.$push=r.$push||{$each:[]},e!=null&&Ar.hasUserDefinedProperty(e,"$each"))r.$push=e;else if(e.length===1)r.$push.$each.push(e[0]);else if(e.length<1e4)r.$push.$each.push(...e);else for(let s of e)r.$push.$each.push(s);else r[t]=e;return this},addToSet(){J_(this,arguments),az(this,arguments);let t=[].map.call(arguments,this._mapCast,this),e=[],r="";t[0]instanceof ux?r="doc":t[0]instanceof Date?r="date":cx(t[0],"ObjectId")&&(r="ObjectId");let n=Ar.isMongooseArray(t)?t.__array:t,s=Ar.isMongooseArray(this)?this.__array:this;return n.forEach(function(i){let o,a=+i;switch(r){case"doc":o=this.some(function(u){return u.equals(i)});break;case"date":o=this.some(function(u){return+u===a});break;case"ObjectId":o=this.find(u=>u.toString()===i.toString());break;default:o=~this.indexOf(i);break}o||(this._markModified(),s.push(i),this._registerAtomic("$addToSet",i),[].push.call(e,i))},this),e},hasAtomics(){return Ar.isPOJO(this[wi])?Object.keys(this[wi]).length:0},includes(t,e){return this.indexOf(t,e)!==-1},indexOf(t,e){cx(t,"ObjectId")&&(t=t.toString()),e=e??0;let r=this.length;for(let n=e;n<r;++n)if(t==this[n])return n;return-1},inspect(){return JSON.stringify(this)},nonAtomicPush(){let t=[].map.call(arguments,this._mapCast,this);this._markModified();let e=[].push.apply(this,t);return this._registerAtomic("$set",this),e},pop(){this._markModified();let t=[].pop.call(this);return this._registerAtomic("$set",this),t},pull(){let t=[].map.call(arguments,(s,i)=>this._cast(s,i,{defaults:!1}),this),e=this;Ar.isMongooseArray(e)&&(e=e.__array);let r=e.length,n;for(this._markModified();r--;)n=e[r],n instanceof lx?t.some(function(i){return n.equals(i)})&&e.splice(r,1):~this.indexOf.call(t,n)&&e.splice(r,1);return t[0]instanceof ux?this._registerAtomic("$pullDocs",t.map(function(s){let i=s.$__getValue("_id");return i===void 0||s.$isDefault("_id")?s:i})):this._registerAtomic("$pullAll",t),sz(this[tu],this[ru])>0&&this._registerAtomic("$set",this),this},push(){let t=arguments,e=t,r=t[0]!=null&&Ar.hasUserDefinedProperty(t[0],"$each"),n=Ar.isMongooseArray(this)?this.__array:this;if(r&&(e=t[0],t=t[0].$each),this[$o]==null)return oz.apply(this,t);J_(this,t),az(this,t),t=[].map.call(t,this._mapCast,this);let s,i=this[wi];return this._markModified(),r?(e.$each=t,(i.$push&&i.$push.$each&&i.$push.$each.length||0)!==0&&i.$push.$position!=e.$position?(e.$position!=null?([].splice.apply(n,[e.$position,0].concat(t)),s=n.length):s=[].push.apply(n,t),this._registerAtomic("$set",this)):e.$position!=null?([].splice.apply(n,[e.$position,0].concat(t)),s=this.length):s=[].push.apply(n,t)):(e=t,s=oz.apply(n,t)),this._registerAtomic("$push",e),s},remove(){return this.pull.apply(this,arguments)},set(t,e,r){let n=this.__array;if(r)return n[t]=e,this;let s=Y_._cast.call(this,e,t);return Y_._markModified.call(this,t),n[t]=s,this},shift(){let t=Ar.isMongooseArray(this)?this.__array:this;this._markModified();let e=[].shift.call(t);return this._registerAtomic("$set",this),e},sort(){let t=Ar.isMongooseArray(this)?this.__array:this,e=[].sort.apply(t,arguments);return this._registerAtomic("$set",this),e},splice(){let t,e=Ar.isMongooseArray(this)?this.__array:this;if(this._markModified(),J_(this,Array.prototype.slice.call(arguments,2)),arguments.length){let r;if(this[$o]==null)r=arguments;else{r=[];for(let n=0;n<arguments.length;++n)r[n]=n<2?arguments[n]:this._cast(arguments[n],arguments[0]+(n-2))}t=[].splice.apply(e,r),this._registerAtomic("$set",this)}return t},toBSON(){return this.toObject(iz)},toObject(t){let e=Ar.isMongooseArray(this)?this.__array:this;return t?.depopulate?(t=IOe(t),t._isNested=!0,[].concat(e).map(function(r){return r instanceof lx?r.toObject(t):r})):[].concat(e)},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},unshift(){J_(this,arguments);let t;this[$o]==null?t=arguments:t=[].map.call(arguments,this._cast,this);let e=Ar.isMongooseArray(this)?this.__array:this;return this._markModified(),[].unshift.apply(e,t),this._registerAtomic("$set",this),this.length}};function ROe(t,e){if(!e)return!1;for(let r of t){if(r==null)return!1;let n=r.constructor;if(!(r instanceof lx)||n.modelName!==e&&n.baseModelName!==e)return!1}return!0}function lz(t,e,r){if(typeof e=="string"){if(e.indexOf(".")===-1)return;e=uz.stringToParts(e)}r=r||0,!(r>=e.length)&&(t==null||typeof t!="object"||(lz(t[e[0]],e,r+1),t[e[0]]!=null&&typeof t[e[0]]=="object"&&Ar.hasOwnKeys(t[e[0]])===!1&&delete t[e[0]]))}function J_(t,e){let r=t==null?null:t[$o]?.embeddedSchemaType?.options?.ref||null;t.length===0&&e.length!==0&&ROe(e,r)&&t[tu].$populated(t[ru],[],{[cz]:e[0].constructor})}function az(t,e){let r=t==null?null:t[$o]?.embeddedSchemaType?.options?.ref||null,n=t[tu],s=t[ru];if(!(!r||!n.populated(s))){for(let i of e)if(i!=null&&(typeof i!="object"||i instanceof String||i instanceof Number||i instanceof Buffer||Ar.isMongooseType(i))){n.depopulate(s);break}}}var FOe=["filter","flat","flatMap","map","slice"];for(let t of FOe)Array.prototype[t]!=null&&(Y_[t]=function(){let e=Ar.isMongooseArray(this)?this.__array:this,r=[].concat(e);return r[t].apply(r,arguments)});pz.exports=Y_});var dx=m((yz,gz)=>{"use strict";var px=Q_(),X_=te().arrayAtomicsSymbol,$Oe=te().arrayAtomicsBackupSymbol,dz=te().arrayParentSymbol,qOe=te().arrayPathSymbol,hz=te().arraySchemaSymbol,fz=Array.prototype.push,mz=/^\d+$/;function jOe(t,e,r,n){let s;if(Array.isArray(t)){let a=t.length;if(a===0)s=new Array;else if(a===1)s=new Array(1),s[0]=t[0];else if(a<1e4)s=new Array,fz.apply(s,t);else{s=new Array;for(let u=0;u<a;++u)fz.call(s,t[u])}}else s=[];let i={[X_]:{},[$Oe]:void 0,[qOe]:e,[hz]:n,[dz]:void 0,isMongooseArray:!0,isMongooseArrayProxy:!0,__array:s};t&&t[X_]!=null&&(i[X_]=t[X_]),r?.$__&&(i[dz]=r,i[hz]=n||r.schema.path(e));let o=new Proxy(s,{get:function(a,u){return Object.hasOwn(i,u)?i[u]:Object.hasOwn(px,u)?px[u]:n?.virtuals&&Object.hasOwn(n.virtuals,u)?n.virtuals[u].applyGetters(void 0,a):typeof u=="string"&&mz.test(u)&&n?.embeddedSchemaType!=null?n.embeddedSchemaType.applyGetters(s[u],r):s[u]},set:function(a,u,c){return typeof u=="string"&&mz.test(u)?px.set.call(o,u,c,!1):Object.hasOwn(i,u)?i[u]=c:n?.virtuals&&Object.hasOwn(n.virtuals,u)?n.virtuals[u].applySetters(c,a):s[u]=c,!0}});return o}gz.exports=yz=jOe});var Sz=m((t$e,bz)=>{"use strict";var Z_=Q_(),LOe=Zi(),_z=Us(),UOe=bi().internalToObjectOptions,bc=ae(),VOe=$r(),tE=te().arrayParentSymbol,hx=te().arrayPathSymbol,jh=te().arraySchemaSymbol,Ez=te().documentArrayParent,WOe=Array.prototype.toString,fx={toBSON(){return this.toObject(UOe)},toString(){return WOe.call(this.__array.map(t=>t?.$__!=null?t.toString():t))},getArrayParent(){return this[tE]},$schemaType(){return this[jh]},_cast(t,e,r){if(this[jh]==null)return t;let n=this[jh].Constructor;if((n.$isMongooseDocumentArray?bc.isMongooseDocumentArray(t):t instanceof n)||t?.constructor?.baseCasterConstructor===n)return t[Ez]&&t.__parentArray||(t[Ez]=this[tE],t.__parentArray=this),t.$setIndex(e),t;if(t==null)return null;if((Buffer.isBuffer(t)||VOe(t,"ObjectId")||!bc.isObject(t))&&(t={_id:t}),t&&n.discriminators&&n.schema&&n.schema.options&&n.schema.options.discriminatorKey)if(typeof t[n.schema.options.discriminatorKey]=="string"&&n.discriminators[t[n.schema.options.discriminatorKey]])n=n.discriminators[t[n.schema.options.discriminatorKey]];else{let o=_z(n.discriminators,t[n.schema.options.discriminatorKey]);o&&(n=o)}if(n.$isMongooseDocumentArray)return n.cast(t,this,void 0,void 0,e);let i=new n(t,this,r,void 0,e);return i.isNew=!0,i},id(t){if(t==null)return null;let e=this[jh],r=null;e?.schema?r=e.schema.path("_id"):e?.casterConstructor?.schema&&(r=e.casterConstructor.schema.path("_id"));let n=null;if(r)try{n=r.cast(t)}catch{}let s;for(let i of this)if(i&&(s=i.get("_id"),s!=null))if(s instanceof LOe){if(s=s.get("_id"),n!=null&&bc.deepEqual(n,s))return i;if(n==null&&(t==s||bc.deepEqual(t,s)))return i}else{if(n!=null&&bc.deepEqual(n,s))return i;if(n==null&&(s==t||bc.deepEqual(t,s)))return i}return null},toObject(t){return[].concat(this.map(function(e){return e==null?null:typeof e.toObject!="function"?e:e.toObject(t)}))},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},push(){let t=Z_.push.apply(this,arguments);return eE(this),t},pull(){let t=Z_.pull.apply(this,arguments);return eE(this),t},shift(){let t=Z_.shift.apply(this,arguments);return eE(this),t},splice(){let t=Z_.splice.apply(this,arguments);return eE(this),t},inspect(){return this.toObject()},create(t){let e=this[jh].Constructor;if(t&&e.discriminators&&e.schema&&e.schema.options&&e.schema.options.discriminatorKey)if(typeof t[e.schema.options.discriminatorKey]=="string"&&e.discriminators[t[e.schema.options.discriminatorKey]])e=e.discriminators[t[e.schema.options.discriminatorKey]];else{let r=_z(e.discriminators,t[e.schema.options.discriminatorKey]);r&&(e=r)}return new e(t,this)},notify(t){let e=this;return function r(n,s){s=s||e;let i=s.length;for(;i--;)s[i]!=null&&(t==="save"&&(n=e[i]),bc.isMongooseArray(s[i])?r(n,s[i]):s[i]&&s[i].emit(t,n))}},set(t,e,r){let n=this.__array;if(r)return n[t]=e,this;let s=fx._cast.call(this,e,t);return fx._markModified.call(this,t),n[t]=s,this},_markModified(t,e){let r=this[tE],n;if(r){if(n=this[hx],arguments.length)if(e!=null){let s=t.__index;n=n+"."+s+"."+e}else n=n+"."+t;if(n!=null&&n.endsWith(".$"))return this;r.markModified(n,arguments.length!==0?t:r)}return this}};bz.exports=fx;function eE(t){let e=t[tE];if(!e||e.$__.populated==null)return;let r=Object.keys(e.$__.populated).filter(n=>n.startsWith(t[hx]+"."));for(let n of r){let s=n.slice((t[hx]+".").length);Array.isArray(e.$__.populated[n].value)&&(e.$__.populated[n].value=t.map(i=>i.$populated(s)))}}});var wc=m((r$e,Az)=>{"use strict";var wz=Q_(),mx=Sz(),yx=te().arrayAtomicsSymbol,zOe=te().arrayAtomicsBackupSymbol,gx=te().arrayParentSymbol,_x=te().arrayPathSymbol,Sc=te().arraySchemaSymbol,KOe=Array.prototype.push,HOe=/^\d+$/;function GOe(t,e,r,n){let s=[],i={[yx]:{},[zOe]:void 0,[_x]:e,[Sc]:void 0,[gx]:void 0};if(Array.isArray(t)&&(t[_x]===e&&t[gx]===r&&(i[yx]=Object.assign({},t[yx])),t.forEach(a=>{KOe.call(s,a)})),i[_x]=e,i.__array=s,r?.$__)for(i[gx]=r,i[Sc]=r.$__schema.path(e);i[Sc]!=null&&i[Sc].$isMongooseArray&&!i[Sc].$isMongooseDocumentArray;)i[Sc]=i[Sc].embeddedSchemaType;let o=new Proxy(s,{get:function(a,u){return u==="isMongooseArray"||u==="isMongooseArrayProxy"||u==="isMongooseDocumentArray"||u==="isMongooseDocumentArrayProxy"?!0:Object.hasOwn(i,u)?i[u]:Object.hasOwn(mx,u)?mx[u]:n?.virtuals&&Object.hasOwn(n.virtuals,u)?n.virtuals[u].applyGetters(void 0,a):Object.hasOwn(wz,u)?wz[u]:s[u]},set:function(a,u,c){return typeof u=="string"&&HOe.test(u)?mx.set.call(o,u,c,!1):Object.hasOwn(i,u)?i[u]=c:n?.virtuals&&Object.hasOwn(n.virtuals,u)?n.virtuals[u].applySetters(c,a):s[u]=c,!0}});return o}Az.exports=GOe});var Zi=m((Lz,Uz)=>{"use strict";var JOe=W8(),bx=require("events").EventEmitter,YOe=YV(),QOe=I_(),jn=ds(),Oz=_c(),XOe=nW(),Pz=R_(),Ax=$_(),ZOe=aW(),e4e=Oc(),iE=eu(),aE=yc(),Bz=$8(),Iz=Q8(),Sx=j_(),rE=L_(),Ai=vt(),t4e=V_().compile,r4e=V_().defineKey,n4e=EW(),s4e=W_().flatten,Ex=MW(),Cz=BW(),i4e=NW(),o4e=K_(),vz=$r(),Nz=Kp(),a4e=Hp(),xz=nx(),wx=require("util").inspect,kz=bi().internalToObjectOptions,u4e=sx(),c4e=ix(),l4e=fs(),Ox=ox(),p4e=qh(),ue=ae(),d4e=ax(),sE=ue.deepEqual,h4e=ue.isMongooseObject,Uh=te().arrayAtomicsBackupSymbol,Ln=te().arrayAtomicsSymbol,f4e=te().documentArrayParent,m4e=te().documentIsModified,Rz=te().documentModifiedPaths,y4e=te().documentSchemaSymbol,g4e=te().getSymbol,_4e=te().modelSymbol,Tz=te().populateModelSymbol,E4e=te().scopeSymbol,b4e=gc().schemaMixedSymbol,S4e=QW(),nE=te().sessionNewDocuments,oE,Dz,Lh,Fz=ue.specialProperties,Yp=1,Ac=2,eo=Yp|Ac;function F(t,e,r){if(typeof r=="boolean")throw new Error("The skipId parameter has been removed. Use { skipId: true } in the options parameter instead.");r=Object.assign({},r);let n=r.skipId;if(this.$__=new YOe,this.$__schema==null){let c=ue.isObject(e)&&!e.instanceOfSchema?new e4e(e):e;this.$__setSchema(c),e=r,n=r.skipId}if(r.isNew!=null&&r.isNew!==!0&&(this.$isNew=r.isNew),r.priorDoc!=null&&(this.$__.priorDoc=r.priorDoc),n&&(this.$__.skipId=n),t!=null&&typeof t!="object")throw new Ax(t,"obj","Document");let s=!0;r.defaults!==void 0&&(this.$__.defaults=r.defaults,s=r.defaults);let i=this.$__schema;typeof e=="boolean"||e==="throw"?(e!==!0&&(this.$__.strictMode=e),e=void 0):r.strict!==void 0?this.$__.strictMode=r.strict:i.options.strict!==!0&&(this.$__.strictMode=i.options.strict);let o=i.requiredPaths(!0);for(let c of o)this.$__.activePaths.require(c);let a=null;ue.isPOJO(e)&&ue.hasOwnKeys(e)&&(a=a4e(e),this.$__.selected=e,this.$__.exclude=a);let u=a===!1&&e?Iz(e):null;if(this._doc==null&&(this.$__buildDoc(t,e,n,a,u,!1),s&&Sx(this,e,a,u,!0,null,{skipParentChangeTracking:!0})),t&&(this.$__original_set?this.$__original_set(t,void 0,!0,r):this.$set(t,void 0,!0,r),t instanceof F&&(this.$isNew=t.$isNew)),r.willInit&&s?r.skipDefaults&&(this.$__.skipDefaults=r.skipDefaults):s&&Sx(this,e,a,u,!1,r.skipDefaults),!this.$__.strictMode&&t){let c=this;Object.keys(this._doc).forEach(function(p){!(p in i.tree)&&!(p in i.methods)&&!(p in i.virtuals)&&!p.startsWith("$")&&r4e({prop:p,subprops:null,prototype:c})})}M4e(this)}F.prototype.$isMongooseDocumentPrototype=!0;Object.defineProperty(F.prototype,"isNew",{get:function(){return this.$isNew},set:function(t){this.$isNew=t}});Object.defineProperty(F.prototype,"errors",{get:function(){return this.$errors},set:function(t){this.$errors=t}});F.prototype.$isNew=!0;ue.each(["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"],function(t){F.prototype[t]=function(){if(!this.$__.emitter){if(t==="emit")return;this.$__.emitter=new bx,this.$__.emitter.setMaxListeners(0)}return this.$__.emitter[t].apply(this.$__.emitter,arguments)},F.prototype[`$${t}`]=F.prototype[t]});F.prototype.constructor=F;for(let t in bx.prototype)F[t]=bx.prototype[t];F.prototype.$__schema;F.prototype.schema;Object.defineProperty(F.prototype,"$locals",{configurable:!1,enumerable:!1,get:function(){return this.$__.locals==null&&(this.$__.locals={}),this.$__.locals},set:function(t){this.$__.locals=t}});F.prototype.isNew;Object.defineProperty(F.prototype,"$where",{configurable:!1,enumerable:!1,writable:!0});F.prototype.id;F.prototype.$errors;Object.defineProperty(F.prototype,"$op",{get:function(){return this.$__.op||null},set:function(t){this.$__.op=t}});function w4e(t,e,r){if(t==null)return;let n=Object.keys(r.$__schema.paths),s=n.length,i=e.indexOf(".")===-1?[e]:e.split(".");for(let o=0;o<s;++o){let a="",u=n[o];if(!u.startsWith(e+"."))continue;let c=r.$__schema.paths[u],l=c.splitPath().slice(i.length),p=l.length;if(c.defaultValue===void 0)continue;let d=t;for(let h=0;h<p&&d!=null;++h){let f=l[h];if(h===p-1){if(d[f]!==void 0)break;try{let y=c.getDefault(r,!1);y!==void 0&&(d[f]=y)}catch(y){r.invalidate(e+"."+a,y);break}break}a+=(a.length?".":"")+f,d[f]=d[f]||{},d=d[f]}}}F.prototype.$__buildDoc=function(t,e,r,n,s){let i={},o=Object.keys(this.$__schema.paths).filter(c=>!c.includes("$*")),a=o.length,u=0;for(;u<a;++u){let c=o[u];if(c==="_id"&&(r||t&&"_id"in t))continue;let l=this.$__schema.paths[c].splitPath(),p=l.length,d=p-1,h="",f=i,y=!1;for(let g=0;g<p;++g){let _=l[g];if(h.length?h+="."+_:h=_,n===!0){if(h in e)break}else if(n===!1&&e&&!y){if(h in e)y=!0;else if(!s[h])break}g<d&&(f=f[_]||(f[_]={}))}}this._doc=i};F.prototype.toBSON=function(){return this.toObject(kz)};F.prototype.init=function(t,e,r){if(typeof e=="function"&&(r=e,e=null),t==null)throw new Ax(t,"doc","init");return this.$__init(t,e),r&&r(null,this),this};F.prototype.$init=function(){return this.constructor.prototype.init.apply(this,arguments)};F.prototype.$__init=function(t,e){if(t==null)throw new Ax(t,"doc","init");if(this.$isNew=!1,e=e||{},t._id!=null&&e.populated&&e.populated.length){let n=String(t._id);for(let s of e.populated)if(s.isVirtual?this.$populated(s.path,ue.getValue(s.path,t),s):this.$populated(s.path,s._docs[n],s),s._childDocs!=null){for(let i of s._childDocs)i?.$__!=null&&(i.$__.parent=this);s._childDocs=[]}}$z(this,t,this._doc,e),u4e(this,e.populated),this.$emit("init",this),this.constructor.emit("init",this);let r=this.$__.exclude===!1&&this.$__.selected?Iz(this.$__.selected):null;return Sx(this,this.$__.selected,this.$__.exclude,r,!1,this.$__.skipDefaults),this};function $z(t,e,r,n,s){if(s=s||"",typeof e!="object"||Array.isArray(e))throw new Pz(t.$basePath,e);e.$__!=null&&(e=e._doc);let i=Object.keys(e),o=i.length,a,u,c,l=t.$__.strictMode,p=t.$__schema;for(let d=0;d<o;++d){if(c=i[d],Fz.has(c)||(u=s?s+c:c,a=p.path(u),p.$isRootDiscriminator&&!t.$__isSelected(u)))continue;let h=e[c];if(!a&&ue.isPOJO(h))r[c]||(r[c]={},(!l&&!(c in p.tree)&&!(c in p.methods)&&!(c in p.virtuals)||n?.virtuals&&c in p.virtuals)&&(t[c]=r[c])),$z(t,h,r[c],n,u+".");else if(a){if(Object.hasOwn(r,c)&&h!==void 0&&!n.hydratedPopulatedDocs&&delete r[c],h===null)r[c]=a._castNullish(null);else if(h!==void 0){let f=h.$__==null?null:h.$__.wasPopulated;if(a&&!f&&!n.hydratedPopulatedDocs)try{n?.setters?r[c]=a.applySetters(h,t,!1,null,n):r[c]=a.cast(h,t,!0,void 0,n)}catch(y){t.invalidate(y.path,new Bz({path:y.path,message:y.message,type:"cast",value:y.value,reason:y}))}else a&&n.hydratedPopulatedDocs?(r[c]=a.cast(h,t,!0,void 0,{hydratedPopulatedDocs:!0}),r[c]?.$__?.wasPopulated?t.$populated(u,r[c].$__.wasPopulated.value,r[c].$__.wasPopulated.options):Array.isArray(r[c])&&r[c].length&&r[c][0]?.$__?.wasPopulated&&t.$populated(u,r[c].map(y=>y?.$__?.wasPopulated?.value).filter(y=>y!=null),r[c][0].$__.wasPopulated.options)):r[c]=h}t.$isModified(u)||t.$__.activePaths.init(u)}else if(r[c]=h,!l&&!s)t[c]=h;else if(n?.virtuals&&c in p.virtuals)t[c]=h;else if(n?.strict==="throw")throw new iE(c)}}F.prototype.updateOne=function(e,r){let n=this.constructor.updateOne(),s=this;return n.pre(async function(){let o=await s._execDocumentPreHooks("updateOne",s,e,r);if(o[0]!==s||o[1]!==e||o[2]!==r)throw new Error("Document updateOne pre hooks cannot overwrite arguments");return n.updateOne({_id:s._doc._id},e,r),s.$where!=null&&this.where(s.$where),s.$session()!=null&&("session"in n.options||(n.options.session=s.$session())),o}),n.post(function(){return s._execDocumentPostHooks("updateOne")}),n};F.prototype.replaceOne=function(){let e=[...arguments];return e.unshift({_id:this._doc._id}),this.constructor.replaceOne.apply(this.constructor,e)};F.prototype.$session=function(e){if(arguments.length===0)return this.$__.session?.hasEnded?(this.$__.session=null,null):this.$__.session;if(e?.hasEnded)throw new jn("Cannot set a document's session to a session that has ended. Make sure you haven't called `endSession()` on the session you are passing to `$session()`.");if(!(e==null&&this.$__.session==null)){if(this.$__.session=e,!this.$isSubdocument){let r=this.$getAllSubdocs();for(let n of r)n.$session(e)}return e}};F.prototype.$timestamps=function(e){if(arguments.length===0)return this.$__.timestamps!=null?this.$__.timestamps:this.$__schema?this.$__schema.options.timestamps:void 0;let r=this.$timestamps();return e!==r&&(this.$__.timestamps=e),this};F.prototype.overwrite=function(e){let r=new Set(Object.keys(this._doc));for(let s of Object.keys(e))r.add(s);let n=this.$__schema.options;for(let s of r)s!=="_id"&&(n.versionKey&&s===n.versionKey||n.discriminatorKey&&s===n.discriminatorKey||this.$set(s,e[s]));return this};F.prototype.$set=function(e,r,n,s){ue.isPOJO(n)&&(s=n,n=void 0);let i=s?.merge,o=n&&n!==!0,a=n===!0,u,c,l=0,p,d,h,f=s&&"strict"in s,y=f?s.strict:this.$__.strictMode;if(o&&(u=this.$__.adhocPaths||(this.$__.adhocPaths={}),u[e]=this.$__schema.interpretAsType(e,n,this.$__schema.options)),e==null)[e,r]=[r,e];else if(typeof e!="string"){e instanceof F&&(e.$__isNested?e=e.toObject():e=e.$__schema===this.$__schema?Cx(e,{...e._doc}):e._doc),e==null&&([e,r]=[r,e]),h=r?r+".":"",c=Cz(this.$__schema,e);let R=c.length,M=s?._skipMinimizeTopLevel||!1;if(R===0&&M)return delete s._skipMinimizeTopLevel,r&&this.$set(r,{}),this;s=Object.assign({},s,{_skipMinimizeTopLevel:!1});for(let U=0;U<R;++U){d=c[U];let oe=h?h+d:d;p=this.$__schema.pathType(oe);let Q=e[d];if(n===!0&&!h&&Q!=null&&p==="nested"&&this._doc[d]!=null&&delete this._doc[d],ue.isNonBuiltinObject(Q)&&p==="nested"){this.$set(oe,Q,a,s),w4e(this.$get(oe),oe,this);continue}else if(y){if(a&&Q===void 0&&this.$get(oe)!==void 0)continue;if(p==="adhocOrUndefined"&&(p=Ex(this,oe,{typeOnly:!0})),p==="real"||p==="virtual")this.$set(oe,Q,a,s);else if(p==="nested"&&Q instanceof F)this.$set(oe,Q.toObject({transform:!1}),a,s);else{if(y==="throw")throw p==="nested"?new Pz(d,Q):new iE(d);p==="nested"&&Q==null&&this.$set(oe,Q,a,s)}}else this.$set(oe,Q,a,s)}let I={},j=Object.keys(this.$__schema.tree);for(let U=0,oe=j.length;U<oe;++U)(d=j[U])&&Object.hasOwn(this._doc,d)&&(I[d]=void 0);return this._doc=Object.assign(I,this._doc),this}let g=this.$__schema.pathType(e),_=null;if(g==="adhocOrUndefined"&&(_=e.indexOf(".")===-1?[e]:e.split("."),g=Ex(this,_,{typeOnly:!0})),g==="adhocOrUndefined"&&!f){_==null&&(_=e.indexOf(".")===-1?[e]:e.split("."));let R=i4e(this.$__schema,_);R!==void 0&&(y=R)}r=o4e(r,!0);let S=(()=>{if(this.$__.priorDoc!=null)return this.$__.priorDoc.$__getValue(e);if(!a)return this.$__getValue(e)})();if(g==="nested"&&r){if(typeof r=="object"&&r!=null){if(r.$__!=null&&(r=r.toObject(kz)),r==null)return this.invalidate(e,new jn.CastError("Object",r,e)),this;let R=this.$isModified(e),M=this.$__.savedState!=null&&Object.hasOwn(this.$__.savedState,e);if(this.$__.savedState!=null&&!this.$isNew&&!Object.hasOwn(this.$__.savedState,e)){let j=this.$__getValue(e);this.$__.savedState[e]=j;let U=Object.keys(j||{});for(let oe of U)this.$__.savedState[e+"."+oe]=j[oe]}if(!i)this.$__setValue(e,null),rE(this,e);else return this.$set(r,e,a,s);let I=Cz(this.$__schema,r,e);this.$__setValue(e,{});for(let j of I)this.$set(e+"."+j,r[j],a,{...s,_skipMarkModified:!0});return S!=null&&(!R||M)&&ue.deepEqual(M?this.$__.savedState[e]:S,r)?this.unmarkModified(e):this.markModified(e),this}return this.invalidate(e,new jn.CastError("Object",r,e)),this}let O;if(_==null&&(_=e.indexOf(".")===-1?[e]:e.split(".")),typeof this.$__schema.aliases[_[0]]=="string"&&(_[0]=this.$__schema.aliases[_[0]]),g==="adhocOrUndefined"&&y){let R;for(l=0;l<_.length;++l){let M=_.slice(0,l+1).join(".");if(l+1<_.length&&this.$__schema.pathType(M)==="virtual")return l4e.set(e,r,this),this;if(O=this.$__schema.path(M),O!=null){if(O instanceof Oz){R=!0;break}else if(O.$isSchemaMap&&O.$__schemaType instanceof Oz&&l<_.length-1){R=!0,O=O.$__schemaType;break}}}if(O==null&&(O=Ex(this,e)),!R&&!O){if(y==="throw")throw new iE(e);return this}}else{if(g==="virtual")return O=this.$__schema.virtualpath(e),O.applySetters(r,this),this;O=this.$__path(e)}let E=this._doc,A="";for(l=0;l<_.length-1;++l)E=E instanceof Map?E.get(_[l]):E[_[l]],A+=(A.length!==0?".":"")+_[l],E||(this.$set(A,{}),this.$__isSelected(A)||this.unmarkModified(A),E=this.$__getValue(A));let x;if(_.length<=1)x=e;else{let R=_.length;for(l=0;l<R;++l){let M=_.slice(0,l+1).join(".");if(this.$get(M,null,{getters:!1})===null){x=M;break}}x||(x=e)}if(!O)return this.$__set(x,e,s,a,_,O,r,S),g==="nested"&&r==null&&rE(this,e),this;if((O.$isSingleNested||O.$isMongooseArray)&&T4e(this,e),r!=null&&i&&O.$isSingleNested){r instanceof F&&(r=r.toObject({virtuals:!1,transform:!1}));let R=Object.keys(r);for(let M of R)this.$set(e+"."+M,r[M],a,s);return this}let v=!0;try{let R=(()=>{if(O.options==null||!(r instanceof F))return!1;let U=r.constructor,oe=typeof O.options.ref=="function"&&!O.options.ref[_4e]?O.options.ref.call(this,this):O.options.ref,Q=oe?.modelName||oe;if(Q!=null&&(Q===U.modelName||Q===U.baseModelName))return!0;let un=O.options.refPath;if(un==null)return!1;let Vr=r.get(un);return Vr===U.modelName||Vr===U.baseModelName})(),M=!1;if(R&&r instanceof F&&(!r.$__.wasPopulated||ue.deepEqual(r.$__.wasPopulated.value,r._doc._id))){let U=O?.$isSingleNested?O.cast(r,this):r._doc._id;this.$populated(e,U,{[Tz]:r.constructor}),r.$__.wasPopulated={value:U},M=!0}let I,j=this.$__schema.options.typeKey;if(O.options&&Array.isArray(O.options[j])&&O.options[j].length&&O.options[j][0]&&O.options[j][0].ref&&A4e(r,O.options[j][0].ref)){I={[Tz]:r[0].constructor},this.$populated(e,r.map(function(U){return U._doc._id}),I);for(let U of r)U.$__.wasPopulated={value:U._doc._id};M=!0}if(!R||!O.$isSingleNested||!r.$__){let U=this;this.$__schema.singleNestedPaths[e]!=null&&_.length>1&&(U=S4e(this,_,this.schema)),s?.overwriteImmutable?r=O.applySetters(r,U,!1,S,{path:e,overwriteImmutable:!0}):r=O.applySetters(r,U,!1,S,{path:e})}if(Array.isArray(r)&&!Array.isArray(O)&&O.$isMongooseDocumentArray&&r.length!==0&&r[0]?.$__?.populated!=null){let U=Object.keys(r[0].$__.populated);for(let oe of U)this.$populated(e+"."+oe,r.map(Q=>Q.$populated(oe)),r[0].$__.populated[oe].options);M=!0}if(!M&&this.$__.populated){if(Array.isArray(r)&&this.$__.populated[e])for(let U=0;U<r.length;++U)r[U]instanceof F&&r.set(U,r[U]._doc._id,!0);delete this.$__.populated[e]}r!=null&&O.$isSingleNested&&D4e(r,O,S),this.$markValid(e)}catch(R){R instanceof jn.StrictModeError&&R.isImmutableError?this.invalidate(e,R):R instanceof jn.CastError?(this.invalidate(R.path,R),R.$originalErrorPath&&this.invalidate(e,new jn.CastError(O.instance,r,e,R.$originalErrorPath))):this.invalidate(e,new jn.CastError(O.instance,r,e,R)),v=!1}if(v){let R=null,M=null;if(!a){let U=this.$isSubdocument?this.ownerDocument():this;R=U.$__.savedState,M=this.$isSubdocument?this.$__.fullPath+"."+e:e,U.$__saveInitialState(M)}this.$__set(x,e,s,a,_,O,r,S);let I=!!this.$__.session?.transaction,j=this.$__.session&&this.$__.session[nE]&&this.$__.session[nE].has(this)&&this.$__.session[nE].get(this).modifiedPaths&&!this.$__.session[nE].get(this).modifiedPaths.has(M);R!=null&&Object.hasOwn(R,M)&&(!I||j)&&ue.deepEqual(r,R[M])&&this.unmarkModified(e)}return O.$isSingleNested&&(this.isDirectModified(e)||r==null)?rE(this,e):O.$isSchemaMap&&r==null&&rE(this,e),this};function A4e(t,e){if(!Array.isArray(t)||t.length===0)return!1;for(let r of t)if(!(r instanceof F)||r.constructor.modelName==null||r.constructor.modelName!=e&&r.constructor.baseModelName!=e)return!1;return!0}F.prototype.set=F.prototype.$set;F.prototype.$__shouldModify=function(t,e,r,n,s,i,o,a){return r?._skipMarkModified?!1:this.$isNew||e in this.$__.activePaths.getStatePaths("modify")||o===void 0&&!this.$__isSelected(e)?!0:o===void 0&&e in this.$__.activePaths.getStatePaths("default")||this.$populated(e)&&o instanceof F&&sE(o._doc._id,a)?!1:!!(!sE(o,a!==void 0?a:ue.getValue(e,this))||!n&&o!==null&&o!==void 0&&e in this.$__.activePaths.getStatePaths("default")&&sE(o,i.getDefault(this,n)))};F.prototype.$__set=function(t,e,r,n,s,i,o,a){Lh=Lh||Jp();let u=this.$__shouldModify(t,e,r,n,s,i,o,a);u?(this.$__.primitiveAtomics?.[e]&&(delete this.$__.primitiveAtomics[e],ue.hasOwnKeys(this.$__.primitiveAtomics)===!1&&delete this.$__.primitiveAtomics),this.markModified(t),Dz||(Dz=dx()),o&&ue.isMongooseArray(o)&&(o._registerAtomic("$set",o),ue.isMongooseDocumentArray(o)&&o.forEach(function(h){h&&h.__parentArray&&(h.__parentArray=o)}))):Array.isArray(o)&&Array.isArray(a)&&ue.isMongooseArray(o)&&ue.isMongooseArray(a)&&(o[Ln]=a[Ln],o[Uh]=a[Uh],ue.isMongooseDocumentArray(o)&&o.forEach(h=>{h!=null&&(h.$isNew=!1)}));let c=this._doc,l=0,p=s.length,d="";for(;l<p;l++){let f=l+1===p;if(d+=d?"."+s[l]:s[l],!Fz.has(s[l]))if(f)c instanceof Map?c.set(s[l],o):c.$isSingleNested?(s[l]in c||(c[s[l]]=o),c._doc[s[l]]=o,u&&c.markModified(s[l])):c[s[l]]=o;else{let y=c instanceof Map,g=y?c.get(s[l]):c[s[l]];ue.isPOJO(g)||g&&g instanceof Lh||g&&!Array.isArray(g)&&g.$isSingleNested||g&&Array.isArray(g)||g==null&&(g={},y?c.set(s[l],g):c[s[l]]=g),c=g}}};F.prototype.$__getValue=function(t){if(typeof t!="string"&&!Array.isArray(t))throw new TypeError(`Invalid \`path\`. Must be either string or array. Got "${t}" (type ${typeof t})`);return ue.getValue(t,this._doc)};F.prototype.$inc=function(e,r){if(r==null&&(r=1),Array.isArray(e))return e.forEach(u=>this.$inc(u,r)),this;let n=this.$__path(e);if(n==null){if(this.$__.strictMode==="throw")throw new iE(e);if(this.$__.strictMode===!0)return this}else if(n.instance!=="Number")return this.invalidate(e,new jn.CastError(n.instance,r,e)),this;let s=this.$__getValue(e)||0,i=!1,o=null,a=r;try{r=n.cast(r),o=n.applySetters(s+r,this),a=o-s,i=!0}catch(u){this.invalidate(e,new jn.CastError("number",r,e,u))}return i&&(this.$__.primitiveAtomics=this.$__.primitiveAtomics||{},this.$__.primitiveAtomics[e]==null?this.$__.primitiveAtomics[e]={$inc:a}:this.$__.primitiveAtomics[e].$inc+=a,this.markModified(e),this.$__setValue(e,o)),this};F.prototype.$__setValue=function(t,e){return ue.setValue(t,e,this._doc),this};F.prototype.get=function(t,e,r){let n;r==null&&(r={}),e&&(n=this.$__schema.interpretAsType(t,e,this.$__schema.options));let s=r.noDottedPath,i=s?this.$__schema.paths[t]:this.$__path(t);if(i==null&&(i=this.$__schema.virtualpath(t),i!=null))return i.applyGetters(void 0,this);if(s){let c=this._doc[t];return n&&(c=n.cast(c)),i!=null&&r.getters!==!1?i.applyGetters(c,this):c}if(i?.instance==="Mixed"){let c=this.$__schema.virtualpath(t);c!=null&&(i=c)}let o=t.indexOf(".")!==-1,a=this._doc,u=o?t.split("."):[t];typeof this.$__schema.aliases[u[0]]=="string"&&(u[0]=this.$__schema.aliases[u[0]]);for(let c=0,l=u.length;c<l;c++)a?._doc&&(a=a._doc),a==null?a=void 0:a instanceof Map?a=a.get(u[c],{getters:!1}):c===l-1?a=ue.getValue(u[c],a):a=a[u[c]];if(n&&(a=n.cast(a)),i!=null&&r.getters!==!1)a=i.applyGetters(a,this);else if(this.$__schema.nested[t]&&r.virtuals)return Cx(this,Ai(a)||{},{path:t});return a};F.prototype[g4e]=F.prototype.get;F.prototype.$get=F.prototype.get;F.prototype.$__path=function(t){let e=this.$__.adhocPaths,r=e&&Object.hasOwn(e,t)?e[t]:null;return r||this.$__schema.path(t)};F.prototype.markModified=function(t,e){this.$__saveInitialState(t),this.$__.activePaths.modify(t),e!=null&&!this.$isSubdocument&&(this.$__.pathsToScopes=this.$__pathsToScopes||{},this.$__.pathsToScopes[t]=e)};F.prototype.$__saveInitialState=function(e){let r=this.$__.savedState,n=e;if(r!=null){let s=n.indexOf("."),i=s===-1?n:n.slice(0,s);Object.hasOwn(r,i)||(r[i]=Ai(this.$__getValue(i)))}};F.prototype.unmarkModified=function(t){this.$__.activePaths.init(t),this.$__.pathsToScopes!=null&&delete this.$__.pathsToScopes[t]};F.prototype.$ignore=function(t){this.$__.activePaths.ignore(t)};F.prototype.directModifiedPaths=function(){return Object.keys(this.$__.activePaths.getStatePaths("modify"))};F.prototype.$isEmpty=function(t){let e={minimize:!0,virtuals:!1,getters:!1,transform:!1};if(arguments.length!==0){let r=this.$get(t);return r==null?!0:typeof r!="object"?!1:ue.isPOJO(r)?qz(r):Object.keys(r.toObject(e)).length===0}return Object.keys(this.toObject(e)).length===0};function qz(t){if(t==null)return!0;if(typeof t!="object"||Array.isArray(t))return!1;for(let e of Object.keys(t))if(!qz(t[e]))return!1;return!0}F.prototype.modifiedPaths=function(t){t=t||{};let e=Object.keys(this.$__.activePaths.getStatePaths("modify")),r=new Set,n=0,s=0,i=e.length;for(n=0;n<i;++n){let o=e[n],a=Ox(o),u=a.length;for(s=0;s<u;++s)r.add(a[s]);if(!t.includeChildren)continue;let c=0,l=this.$get(o);if(typeof l=="object"&&l!==null){l._doc&&(l=l._doc);let p=l.length;if(Array.isArray(l))for(c=0;c<p;++c){let d=o+"."+c;if(!r.has(d)&&(r.add(d),l[c]!=null&&l[c].$__)){let h=l[c].modifiedPaths(),f=0,y=h.length;for(f=0;f<y;++f)r.add(d+"."+h[f])}}else{let d=Object.keys(l),h=0,f=d.length;for(h=0;h<f;++h)r.add(o+"."+d[h])}}}return Array.from(r)};F.prototype[Rz]=F.prototype.modifiedPaths;F.prototype.isModified=function(t,e,r){if(t){let n=e?.ignoreAtomics,s=this.$__.activePaths.states.modify;if(s==null)return!1;typeof t=="string"&&(t=t.indexOf(" ")===-1?[t]:t.split(" "));for(let u of t)if(s[u]!=null)return!0;let i=r||this[Rz](),o=t.some(function(u){return!!~i.indexOf(u)}),a=Object.keys(s);return n&&(a=a.filter(u=>{let c=this.$__getValue(u);return!(c?.[Ln]!=null&&c[Ln].$set===void 0)})),o||t.some(function(u){return a.some(function(c){return c===u||u.startsWith(c+".")})})}return this.$__.activePaths.some("modify")};F.prototype.$isModified=F.prototype.isModified;F.prototype[m4e]=F.prototype.isModified;F.prototype.$isDefault=function(t){if(t==null)return this.$__.activePaths.some("default");if(typeof t=="string"&&t.indexOf(" ")===-1)return Object.hasOwn(this.$__.activePaths.getStatePaths("default"),t);let e=t;return Array.isArray(e)||(e=e.split(" ")),e.some(r=>Object.hasOwn(this.$__.activePaths.getStatePaths("default"),r))};F.prototype.$isDeleted=function(t){return arguments.length===0?!!this.$__.isDeleted:(this.$__.isDeleted=!!t,this)};F.prototype.isDirectModified=function(t){if(t==null)return this.$__.activePaths.some("modify");if(typeof t=="string"&&t.indexOf(" ")===-1){let r=Object.hasOwn(this.$__.activePaths.getStatePaths("modify"),t);if(r||t.indexOf(".")===-1)return r;let n=t.split(".");for(let s=0;s<n.length-1;++s){let i=n.slice(0,s+1).join("."),o=this.$get(i);if(o?.$__!=null&&o.isDirectModified(n.slice(s+1).join(".")))return!0}return!1}let e=t;return typeof e=="string"&&(e=e.split(" ")),e.some(r=>this.isDirectModified(r))};F.prototype.isInit=function(t){if(t==null)return this.$__.activePaths.some("init");if(typeof t=="string"&&t.indexOf(" ")===-1)return Object.hasOwn(this.$__.activePaths.getStatePaths("init"),t);let e=t;return Array.isArray(e)||(e=e.split(" ")),e.some(r=>Object.hasOwn(this.$__.activePaths.getStatePaths("init"),r))};F.prototype.isSelected=function(e){if(this.$__.selected==null)return!0;if(!e)return!1;if(e==="_id")return this.$__.selected._id!==0;if(e.indexOf(" ")!==-1&&(e=e.split(" ")),Array.isArray(e))return e.some(i=>this.$__isSelected(i));let r=Object.keys(this.$__.selected),n=null;if(r.length===1&&r[0]==="_id")return this.$__.selected._id===0;for(let i of r)if(i!=="_id"&&Nz(this.$__.selected[i])){n=!!this.$__.selected[i];break}if(n===null)return!0;if(e in this.$__.selected)return n;let s=e+".";for(let i of r)if(i!=="_id"){if(i.startsWith(s))return n||i!==s;if(s.startsWith(i+"."))return n}return!n};F.prototype.$__isSelected=F.prototype.isSelected;F.prototype.isDirectSelected=function(e){if(this.$__.selected==null)return!0;if(e==="_id")return this.$__.selected._id!==0;if(e.indexOf(" ")!==-1&&(e=e.split(" ")),Array.isArray(e))return e.some(s=>this.isDirectSelected(s));let r=Object.keys(this.$__.selected),n=null;if(r.length===1&&r[0]==="_id")return this.$__.selected._id===0;for(let s of r)if(s!=="_id"&&Nz(this.$__.selected[s])){n=!!this.$__.selected[s];break}return n===null?!0:Object.hasOwn(this.$__.selected,e)?n:!n};F.prototype.validate=async function(e,r){if(typeof e=="function"||typeof r=="function"||typeof arguments[2]=="function")throw new jn("Document.prototype.validate() no longer accepts a callback");if(this.$op="validate",arguments.length===1&&typeof arguments[0]=="object"&&!Array.isArray(arguments[0])&&(r=arguments[0],e=null),r&&typeof r.pathsToSkip=="string"){let s=r.pathsToSkip.indexOf(" ")===-1;r.pathsToSkip=s?[r.pathsToSkip]:r.pathsToSkip.split(" ")}let n=r?._skipParallelValidateCheck;if(this.$isSubdocument==null){if(this.$__.validating&&!n)throw new ZOe(this);n||(this.$__.validating=!0)}try{await this.$__validate(e,r)}finally{this.$op=null,this.$__.validating=null}};F.prototype.$validate=F.prototype.validate;function O4e(t){let e=Object.keys(t.$__.activePaths.getStatePaths("require")),r=0,n=e.length;for(r=0;r<n;++r){let s=e[r],i=t.$__schema.path(s);if(typeof i?.originalRequiredValue=="function"){t.$__.cachedRequired=t.$__.cachedRequired||{};try{t.$__.cachedRequired[s]=i.originalRequiredValue.call(t,t)}catch(o){t.invalidate(s,o)}}}}function jz(t,e,r,n){let s={};O4e(t);let i=new Set(Object.keys(t.$__.activePaths.getStatePaths("require")).filter(function(u){return!t.$__isSelected(u)&&!t.$isModified(u)||u.endsWith(".$*")?!1:t.$__.cachedRequired!=null&&u in t.$__.cachedRequired?t.$__.cachedRequired[u]:!0}));Object.keys(t.$__.activePaths.getStatePaths("init")).forEach(o),Object.keys(t.$__.activePaths.getStatePaths("modify")).forEach(o),Object.keys(t.$__.activePaths.getStatePaths("default")).forEach(o);function o(u){u.endsWith(".$*")||i.add(u)}if(!n){let u=[];for(let l of Object.keys(t.$__schema.paths)){let p=t.$__schema.path(l);if(p.$isSingleNested){let d=t.$get(l);d&&u.push(d)}else if(p.$isMongooseDocumentArray){let d=t.$get(l);if(d?.length)for(let h of d)h&&u.push(h)}}let c=t.modifiedPaths();for(let l of u)if(l.$basePath){let p=l.$__pathRelativeToParent();for(let h of l.modifiedPaths())i.delete(p+"."+h);let d=l.$parent();if(d==null)throw new Error("Cannot validate subdocument that does not have a parent");t.$isModified(p,null,c)&&!Object.hasOwn(d.$__.activePaths.getStatePaths("modify"),p)&&!d.$isDefault(p)&&(i.add(p),t.$__.pathsToScopes==null&&(t.$__.pathsToScopes={}),t.$__.pathsToScopes[p]=l.$isDocumentArrayElement?l.__parentArray:l.$parent(),s[p]={skipSchemaValidators:!0},l.$isDocumentArrayElement&&l.__index!=null&&(s[p].index=l.__index))}}for(let u of i){let c=t.$__schema.path(u);if(c){if(c.$isMongooseDocumentArray)for(let l of i)(l==null||l.startsWith(c.path+"."))&&i.delete(l);(!c.schema&&!c.embeddedSchemaType&&c.validators.length===0&&!c.$parentSchemaDocArray&&!c.$isSchemaMap||c.$isMongooseArray&&!c.$isMongooseDocumentArray&&!c.embeddedSchemaType.$isMongooseArray&&c.validators.length===0&&c.embeddedSchemaType.validators.length===0)&&i.delete(u)}}Array.isArray(e)?i=v4e(i,e):Array.isArray(r)&&(i=x4e(i,r)),C4e(t,i);let a={skipArrays:!0};for(let u of i)if(t.$__schema.nested[u]){let c=t.$__getValue(u);h4e(c)&&(c=c.toObject({transform:!1}));let l=s4e(c,u,a,t.$__schema),p=t.$__schema.singleNestedPaths;for(let d of Object.keys(l))Object.hasOwn(p,d)||o(d)}for(let u of i){let c=t.$__schema.path(u);if(!c||(c.$parentSchemaDocArray&&typeof c.$parentSchemaDocArray.path=="string"&&i.add(c.$parentSchemaDocArray.path),!c.$isSchemaMap))continue;let l=t.$__getValue(u);if(l!=null)for(let p of l.keys())i.add(u+"."+p)}return i=Array.from(i),[i,s]}function C4e(t,e){for(let r of e){let n=t.$__schema.path(r);if(!n||!n.$isMongooseArray||!Array.isArray(n)&&n.$isMongooseDocumentArray&&!n?.schemaOptions?.required||n.$isMongooseArray&&!n.$isMongooseDocumentArray&&!n.embeddedSchemaType.$isMongooseArray&&n.embeddedSchemaType.validators.length===0)continue;let s=t.$__getValue(r);uE(s,e,r)}}function uE(t,e,r){if(t!=null){let n=t.length;for(let s=0;s<n;++s)Array.isArray(t[s])?uE(t[s],e,r+"."+s):e.add(r+"."+s)}}F.prototype._execDocumentPreHooks=async function(e,...r){return this.$__middleware.execPre(e,this,[...r])};F.prototype._execDocumentPostHooks=async function(e,r){return this.$__middleware.execPost(e,this,[this],{error:r})};F.prototype.$__validate=async function(e,r){try{[r]=await this._execDocumentPreHooks("validate",r)}catch(g){await this._execDocumentPostHooks("validate",g);return}this.$__.saveOptions&&this.$__.saveOptions.pathsToSave&&!e&&(e=[...this.$__.saveOptions.pathsToSave]);let n=r&&typeof r=="object"&&"validateModifiedOnly"in r,s=r?.pathsToSkip||null,i;n?i=!!r.validateModifiedOnly:i=this.$__schema.options.validateModifiedOnly;let o=r?.validateAllPaths;if(o){if(s)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(e)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`");if(n&&i)throw new TypeError("Cannot set both `validateAllPaths` and `validateModifiedOnly`")}let a=this,u=()=>{let g=this.$__.validationError;if(this.$__.validationError=null,this.$__.validating=null,i&&g!=null){let _=Object.keys(g.errors);for(let S of _)this.$isModified(S)||delete g.errors[S];ue.hasOwnKeys(g.errors)===!1&&(g=void 0)}if(this.$__.cachedRequired={},this.$emit("validate",a),this.constructor.emit("validate",a),g){for(let _ in g.errors)!this[f4e]&&g.errors[_]instanceof jn.CastError&&this.invalidate(_,g.errors[_]);return g}},c,l;if(o){c=new Set(Object.keys(this.$__schema.paths));for(let g of c){if(!this.$__schema.path(g)?.$isMongooseArray)continue;let S=this.$__getValue(g);S&&uE(S,c,g)}c=[...c],l={}}else{let g=jz(this,e,s,r?._nestedValidate);c=i?g[0].filter(_=>this.$isModified(_)):g[0],l=g[1]}if(typeof e=="string"&&(e=e.split(" ")),c.length===0){let g=u();await this._execDocumentPostHooks("validate",g);return}let p={},d=this.$__.saveOptions?.pathsToSave,h=[];if(Array.isArray(d)){d=new Set(d);for(let g of c)d.has(g)&&h.push(y(g))}else for(let g of c)h.push(y(g));await Promise.all(h);let f=u();await this._execDocumentPostHooks("validate",f);async function y(g){if(g==null||p[g])return;p[g]=!0;let _=a.$__schema.path(g);if(!_||!a.$isValid(g)||_[b4e]!=null&&g!==_.path)return;let S=a.$__getValue(g),O;(O=a.$populated(g))?S=O:S?.$__?.wasPopulated&&(S=S._doc._id);let E=a.$__.pathsToScopes!=null&&g in a.$__.pathsToScopes?a.$__.pathsToScopes[g]:a,A={...l[g],path:g,validateAllPaths:o,_nestedValidate:!0};try{await _.doValidate(S,E,A)}catch(x){if((_.$isSingleNested||_.$isArraySubdocument||_.$isMongooseDocumentArray)&&x instanceof aE)return;a.invalidate(g,x,void 0,!0)}}};function v4e(t,e){let r=new Set(e),n=new Map([]);for(let i of e){if(i.indexOf(".")===-1)continue;let o=i.split("."),a=o[0];for(let u=1;u<o.length;++u)n.set(a,i),a=a+"."+o[u]}let s=new Set;for(let i of t)r.has(i)?s.add(i):n.has(i)&&s.add(n.get(i));return s}function x4e(t,e){return e=new Set(e),t=Array.from(t).filter(r=>!e.has(r)),new Set(t)}F.prototype.validateSync=function(t,e){let r=this;arguments.length===1&&typeof arguments[0]=="object"&&!Array.isArray(arguments[0])&&(e=arguments[0],t=null);let n=e&&typeof e=="object"&&"validateModifiedOnly"in e,s;n?s=!!e.validateModifiedOnly:s=this.$__schema.options.validateModifiedOnly;let i=e?.pathsToSkip,o=e?.validateAllPaths;if(o){if(i)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(t)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`")}typeof t=="string"?t=t.indexOf(" ")===-1?[t]:t.split(" "):typeof i=="string"&&i.indexOf(" ")!==-1&&(i=i.split(" "));let a,u;if(o){a=new Set(Object.keys(this.$__schema.paths));for(let p of a){if(!this.$__schema.path(p)?.$isMongooseArray)continue;let h=this.$__getValue(p);h&&uE(h,a,p)}a=[...a],u={}}else{let p=jz(this,t,i);a=s?p[0].filter(d=>this.$isModified(d)):p[0],u=p[1]}let c={};for(let p=0,d=a.length;p<d;++p){let h=a[p];if(c[h])continue;c[h]=!0;let f=r.$__schema.path(h);if(!f||!r.$isValid(h))continue;let y=r.$__getValue(h),g=f.doValidateSync(y,r,{skipSchemaValidators:u[h],path:h,validateModifiedOnly:s,validateAllPaths:o});if(g){if((f.$isSingleNested||f.$isArraySubdocument||f.$isMongooseDocumentArray)&&g instanceof aE)continue;r.invalidate(h,g,void 0,!0)}}let l=r.$__.validationError;if(r.$__.validationError=void 0,r.$emit("validate",r),r.constructor.emit("validate",r),l)for(let p in l.errors)l.errors[p]instanceof jn.CastError&&r.invalidate(p,l.errors[p]);return l};F.prototype.invalidate=function(t,e,r,n){if(this.$__.validationError||(this.$__.validationError=new aE(this)),!this.$__.validationError.errors[t])return(!e||typeof e=="string")&&(e=new Bz({path:t,message:e,type:n||"user defined",value:r})),this.$__.validationError===e?this.$__.validationError:(this.$__.validationError.addError(t,e),this.$__.validationError)};F.prototype.$markValid=function(t){this.$__.validationError?.errors[t]&&(delete this.$__.validationError.errors[t],ue.hasOwnKeys(this.$__.validationError.errors)===!1&&(this.$__.validationError=null))};function T4e(t,e){if(!t.$__.validationError)return;let r=Object.keys(t.$__.validationError.errors);for(let n of r)n.startsWith(e+".")&&delete t.$__.validationError.errors[n];ue.hasOwnKeys(t.$__.validationError.errors)===!1&&(t.$__.validationError=null)}function D4e(t,e,r){let n=e.schema;if(n!=null)for(let s of Object.keys(n.paths)){let i=n.paths[s];if(i.$immutableSetter==null)continue;let o=r?.$__getValue(s);i.$immutableSetter.call(t,o)}}F.prototype.$isValid=function(t){return this.$__.validationError==null||ue.hasOwnKeys(this.$__.validationError.errors)===!1?!0:t==null?!1:(t.indexOf(" ")!==-1&&(t=t.split(" ")),Array.isArray(t)?t.some(e=>this.$__.validationError.errors[e]==null):this.$__.validationError.errors[t]==null)};F.prototype.$__reset=function(){let e=this,r=this.$isSubdocument?null:this.$getAllSubdocs({useCache:!0});if(r?.length>0)for(let n of r)n.$__reset();return this.$__dirty().forEach(function(n){let s=n.value;s&&typeof s.clearAtomics=="function"?s.clearAtomics():s&&s[Ln]&&(s[Uh]=s[Ln],s[Ln]={})}),this.$__.backup={},this.$__.backup.activePaths={modify:Object.assign({},this.$__.activePaths.getStatePaths("modify")),default:Object.assign({},this.$__.activePaths.getStatePaths("default"))},this.$__.backup.validationError=this.$__.validationError,this.$__.backup.errors=this.$errors,this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("default"),this.$__.validationError=void 0,this.$errors=void 0,e=this,this.$__schema.requiredPaths().forEach(function(n){e.$__.activePaths.require(n)}),this};F.prototype.$__undoReset=function(){if(this.$__.backup?.activePaths!=null){this.$__.activePaths.states.modify=this.$__.backup.activePaths.modify,this.$__.activePaths.states.default=this.$__.backup.activePaths.default,this.$__.validationError=this.$__.backup.validationError,this.$errors=this.$__.backup.errors;for(let e of this.$__dirty()){let r=e.value;r?.[Ln]&&r[Uh]&&(r[Ln]=r[Uh])}if(!this.$isSubdocument)for(let e of this.$getAllSubdocs())e.$__undoReset()}};F.prototype.$__dirty=function(){let t=this,e=this.$__.activePaths.map("modify",function(s){return{path:s,value:t.$__getValue(s),schema:t.$__path(s)}});e=e.concat(this.$__.activePaths.map("default",function(s){if(!(s==="_id"||t.$__getValue(s)==null))return{path:s,value:t.$__getValue(s),schema:t.$__path(s)}}));let r=new Map(e.filter(s=>s!=null).map(s=>[s.path,s.value])),n=[];return e.forEach(function(s){if(!s)return;let i=null,o=Ox(s.path);for(let a=0;a<o.length-1;a++)if(r.has(o[a])){i=r.get(o[a]);break}i==null?n.push(s):i!=null&&i[Ln]!=null&&i.hasAtomics()&&(i[Ln]={},i[Ln].$set=i)}),n};F.prototype.$__setSchema=function(t){t4e(t.tree,this,void 0,t.options);for(let e of Object.keys(t.virtuals))t.virtuals[e]._applyDefaultGetters();t.path("schema")==null&&(this.schema=t),this.$__schema=t,this.$__middleware=t._getDocumentMiddleware(),this[y4e]=t};F.prototype.$__getArrayPathsToValidate=function(){return oE||(oE=wc()),this.$__.activePaths.map("init","modify",function(t){return this.$__getValue(t)}.bind(this)).filter(function(t){return t&&Array.isArray(t)&&ue.isMongooseDocumentArray(t)&&t.length}).reduce(function(t,e){return t.concat(e)},[]).filter(function(t){return t})};F.prototype.$getAllSubdocs=function(t){if(t?.useCache&&this.$__.saveOptions?.__subdocs)return this.$__.saveOptions.__subdocs;oE||(oE=wc()),Lh=Lh||Jp();let e=[];function r(n){let s=[];for(let{model:i}of n.$__schema.childSchemas){let o=n.$__getValue(i.path);if(o!=null){if(o.$__&&s.push(o),Array.isArray(o))for(let a of o)a?.$__&&s.push(a);if(o instanceof Map)for(let a of o.values())a?.$__&&s.push(a)}}for(let i of s)r(i);e.push(...s)}return r(this),this.$__.saveOptions&&(this.$__.saveOptions.__subdocs=e),e};function M4e(t){let e=t.$__schema&&t.$__schema.callQueue;if(e.length)for(let r of e)r[0]!=="pre"&&r[0]!=="post"&&r[0]!=="on"&&t[r[0]].apply(t,r[1])}F.prototype.$__handleReject=function(e){this.$listeners("error").length?this.$emit("error",e):this.constructor.listeners?.("error").length&&this.constructor.emit("error",e)};F.prototype.$toObject=function(t,e){let r=this.$__schema._defaultToObjectOptions(e),n=this.$__hasOnlyPrimitiveValues();t=ue.isPOJO(t)?{...t}:{},t._calledWithOptions=t._calledWithOptions||{...t};let s;t._calledWithOptions.minimize!=null?s=t.minimize:this.$__schemaTypeOptions?.minimize!=null?s=this.$__schemaTypeOptions.minimize:r?.minimize!=null?s=r.minimize:s=this.$__schema.options.minimize,t.minimize=s,n||(t._seen=t._seen||new Map);let i=t._calledWithOptions.depopulate??r?.depopulate??t.depopulate??!1;if(i&&t._isNested&&this.$__.wasPopulated)return Ai(this.$__.wasPopulated.value||this._doc._id,t);if(i&&(t.depopulate=!0),r!=null)for(let h of Object.keys(r))t[h]==null&&(t[h]=r[h]);t._isNested=!0,t.json=e,t.minimize=s;let o=t._parentOptions;t._parentOptions=this.$isSubdocument?t:null;let a=t._calledWithOptions.schemaFieldsOnly??t.schemaFieldsOnly??r.schemaFieldsOnly??!1,u;if(n&&!t.flattenObjectIds)u=this.$__toObjectShallow(a);else if(a){u={};for(let h of Object.keys(this.$__schema.paths)){let f=this.$__getValue(h);if(f===void 0)continue;let y=h,g=u;if(h.indexOf(".")!==-1){let _=h.split(".");y=_[_.length-1];for(let S=0;S<_.length-1;++S)g[_[S]]=g[_[S]]??{},g=g[_[S]]}if(f===null){g[y]=null;continue}g[y]=Ai(f,t)}}else u=Ai(this._doc,t)||{};let c=t._calledWithOptions.getters??t.getters??r.getters??!1;c&&(P4e(this,u),t.minimize&&(u=c4e(u)||{}));let l=t._calledWithOptions.virtuals??r.virtuals??o?.virtuals??void 0;(l||c&&l!==!1)&&Cx(this,u,t,t),t.versionKey===!1&&this.$__schema.options.versionKey&&delete u[this.$__schema.options.versionKey];let p=t._calledWithOptions.transform??!0,d;if(p===!0?d=r.transform:typeof p=="function"&&(d=p),p&&B4e(this,u),t.useProjection&&I4e(this,u),typeof d=="function"){let h=d(this,u,t);typeof h<"u"&&(u=h)}return u};F.prototype.$__toObjectShallow=function(e){let r={};if(this._doc!=null){let n=Object.keys(e?this.$__schema.paths:this._doc);for(let s of n){let i=this._doc[s];i instanceof Date?r[s]=new Date(i):i!==void 0&&(r[s]=i)}}return r};F.prototype.toObject=function(t){return this.$toObject(t)};function Cx(t,e,r,n){let s=t.$__schema,i=s.virtuals,o=Object.keys(i),a=o.length,u=a,c,l,p=t._doc,d,h=typeof n?.aliases=="boolean"?n.aliases:!0;r=r||{};let f=null;if(Array.isArray(r.virtuals))f=new Set(r.virtuals);else if(r.virtuals?.pathsToSkip){f=new Set(o);for(let y=0;y<r.virtuals.pathsToSkip.length;y++)f.has(r.virtuals.pathsToSkip[y])&&f.delete(r.virtuals.pathsToSkip[y])}if(!p)return e;for(a=0;a<u;++a){if(c=o[a],f!=null&&!f.has(c)||!h&&Object.hasOwn(s.aliases,c))continue;if(l=c,r.path!=null){if(!c.startsWith(r.path+"."))continue;l=c.substring(r.path.length+1)}if(l.indexOf(".")===-1&&l===c){if(d=i[c].applyGetters(void 0,t),d===void 0)continue;d=Ai(d,r),e[l]=d;continue}let y=l.split(".");if(d=Ai(t.get(c),r),d===void 0)continue;let g=y.length;p=e;for(let _=0;_<g-1;++_)p[y[_]]=p[y[_]]||{},p=p[y[_]];p[y[g-1]]=d}return e}function P4e(t,e){let r=t.$__schema,n=Object.keys(r.paths),s=n.length,i,o=t._doc,a;if(!o)return e;for(;s--;){i=n[s];let u=i.split("."),c=u.length,l=c-1,p=e,d;if(o=t._doc,!!t.$__isSelected(i))for(let h=0;h<c&&(d=u[h],a=o[d],!(p!=null&&typeof p!="object"));++h){if(h===l){if(p[d]=r.paths[i].applyGetters(p[d],t),Array.isArray(p[d])&&r.paths[i].embeddedSchemaType)for(let f=0;f<p[d].length;++f)p[d][f]=r.paths[i].embeddedSchemaType.applyGetters(p[d][f],t)}else if(a==null){d in o&&(p[d]=a);break}else p=p[d]||(p[d]={});o=a}}return e}function B4e(t,e){let r=t.$__schema,n=Object.keys(r.paths||{});if(!t._doc)return e;for(let i of n){let o=r.paths[i],a=o.options.transform??o.constructor?.defaultOptions?.transform,u=o.embeddedSchemaType?.options?.transform??o.embeddedSchemaType?.constructor?.defaultOptions?.transform;if(typeof a=="function"){let c=t.$get(i);if(c===void 0)continue;let l=a.call(t,c);Mz(i,l),ue.setValue(i,l,e)}else if(typeof u=="function"){let c=t.$get(i);if(c===void 0)continue;let l=[].concat(c);for(let p=0;p<l.length;++p){let d=u.call(t,l[p]);l[p]=d,Mz(i,d)}e[i]=l}}return e}function Mz(t,e){if(d4e(e))throw new Error("`transform` function must be synchronous, but the transform on path `"+t+"` returned a promise.")}function I4e(t,e){let r=t.$__schema,n=Object.keys(r.paths||{});if(!t._doc)return e;let i=t.$__.selected;if(i===void 0&&(i={},p4e.applyPaths(i,r)),i==null||ue.hasOwnKeys(i)===!1)return e;for(let o of n)i[o]!=null&&!i[o]&&delete e[o];return e}F.prototype.toJSON=function(t){return this.$toObject(t,!0)};F.prototype.ownerDocument=function(){return this};F.prototype.parent=function(){return this.$isSubdocument||this.$__.wasPopulated?this.$__.parent:this};F.prototype.$parent=F.prototype.parent;F.prototype.$__setParent=function(e){this.$__.parent=e,this.$__parent=e};F.prototype.inspect=function(t){let e=ue.isPOJO(t),r;e&&(r=t,r.minimize=!1);let n=arguments.length>0?this.toObject(r):this.toObject();return n??"MongooseDocument { "+n+" }"};wx.custom&&(F.prototype[wx.custom]=F.prototype.inspect);F.prototype.toString=function(){let t=this.inspect();return typeof t=="string"?t:wx(t)};F.prototype.equals=function(t){if(!t)return!1;let e=this.$__getValue("_id"),r=t.$__!=null?t.$__getValue("_id"):t;return!e&&!r?sE(this,t):e&&e.equals?e.equals(r):e===r};F.prototype.populate=async function(){let e={},r=[...arguments];if(typeof r[r.length-1]=="function")throw new jn("Document.prototype.populate() no longer accepts a callback");if(r.length!==0){let i=ue.populate.apply(null,r);for(let o of i)e[o.path]=o}let n=ue.object.vals(e),s=this.constructor;if(this.$__isNested){s=this.$__[E4e].constructor;let i=this.$__.nestedPath;n.forEach(function(o){o.path=i+"."+o.path})}if(this.$session()!=null){let i=this.$session();n.forEach(o=>{if(o.options==null){o.options={session:i};return}"session"in o.options||(o.options.session=i)})}return n.forEach(i=>{i._localModel=s}),s.populate(this,n)};F.prototype.$getPopulatedDocs=function(){let e=[];this.$__.populated!=null&&(e=e.concat(Object.keys(this.$__.populated)));let r=[];for(let n of e){let s=this.$get(n);Array.isArray(s)?r=r.concat(s):s instanceof F&&r.push(s)}return r};F.prototype.populated=function(t,e,r){if(e==null||e===!0){if(!this.$__.populated||typeof t!="string")return;let s=t.endsWith(".$*")?t.replace(/\.\$\*$/,""):t,i=this.$__.populated[s];return i?e===!0?i:i.value:void 0}this.$__.populated||(this.$__.populated={}),this.$__.populated[t]={value:e,options:r};let n=t.split(".");for(let s=0;s<n.length-1;++s){let i=n.slice(0,s+1).join("."),o=this.$get(i);if(o?.$__!=null&&this.$populated(i)){let a=n.slice(s+1).join(".");o.$populated(a,e,r);break}}return e};F.prototype.$populated=F.prototype.populated;F.prototype.$assertPopulated=function(e,r){if(Array.isArray(e))return e.forEach(n=>this.$assertPopulated(n,r)),this;if(arguments.length>1&&this.$set(r),!this.$populated(e))throw new jn(`Expected path "${e}" to be populated`);return this};F.prototype.depopulate=function(t){typeof t=="string"&&(t=t.indexOf(" ")===-1?[t]:t.split(" "));let e,r=this.$$populatedVirtuals?Object.keys(this.$$populatedVirtuals):[],n=this.$__?.populated||{};if(arguments.length===0){for(let i of r)delete this.$$populatedVirtuals[i],delete this._doc[i],delete n[i];let s=Object.keys(n);for(let i of s)if(e=this.$populated(i),!!e)if(delete n[i],Array.isArray(e)){let o=ue.getValue(i,this._doc);if(o.isMongooseArray){let a=o.__array;for(let u=0;u<a.length;++u){let c=a[u];c!=null&&(a[u]=c instanceof F?c._doc._id:c._id)}}else ue.setValue(i,e,this._doc)}else ue.setValue(i,e,this._doc);return this}for(let s of t)if(e=this.$populated(s),delete n[s],r.indexOf(s)!==-1)delete this.$$populatedVirtuals[s],delete this._doc[s];else if(e)if(Array.isArray(e)){let i=ue.getValue(s,this._doc);if(i.isMongooseArray){let o=i.__array;for(let a=0;a<o.length;++a){let u=o[a];u!=null&&(o[a]=u instanceof F?u._doc._id:u._id)}}else ue.setValue(s,e,this._doc)}else ue.setValue(s,e,this._doc);return this};F.prototype.$__fullPath=function(t){return t||""};F.prototype.getChanges=function(){let t=this.$__delta();return t?t[1]:{}};F.prototype.$__delta=function(){let e=this.$__dirty(),r=this.$__schema.options.optimisticConcurrency;if(r)if(Array.isArray(r)){let u=new Set(r);this.modifiedPaths().some(l=>u.has(l))&&(this.$__.version=e.length?eo:Yp)}else if(Array.isArray(r?.exclude)){let u=new Set(r.exclude);this.modifiedPaths().some(l=>!u.has(l))&&(this.$__.version=e.length?eo:Yp)}else this.$__.version=e.length?eo:Yp;if(!e.length&&eo!==this.$__.version)return;let n={},s={},i=e.length,o=[],a=0;for(n._id=this._doc._id,n?._id?.$__!=null&&(n._id=n._id.toObject({transform:!1,depopulate:!0}));a<i;++a){let u=e[a],c=u.value,l=N4e(this,u.path,c);if(l){o.push(l);continue}if(!this.$populated(u.path,!0)&&this.$__.selected){let d=u.path.split("."),h=d[0];if(this.$__.selected[h]&&this.$__.selected[h].$elemMatch)if(d.length>1&&d[1]==0&&typeof n[h]>"u")n[h]=this.$__.selected[h],d[1]="$",u.path=d.join(".");else{o.push(u.path);continue}}if(!(this.$isDefault(u.path)&&this.$__.selected&&(u.path.indexOf(".")===-1&&xz(this.$__.selected,u.path)||Ox(u.path).find(h=>xz(this.$__.isSelected,h))))&&!o.length)if(c===void 0)qo(this,n,s,u,1,"$unset");else if(c===null)qo(this,n,s,u,null);else if(typeof c.getAtomics=="function")k4e(this,n,s,u,c);else if(c[QOe.pathSymbol]&&Buffer.isBuffer(c))c=c.toObject(),qo(this,n,s,u,c);else if(this.$__.primitiveAtomics?.[u.path]!=null){let d=this.$__.primitiveAtomics[u.path],h=n4e(d);qo(this,n,s,u,d[h],h)}else c=Ai(c,{depopulate:!0,transform:!1,virtuals:!1,getters:!1,omitUndefined:!0,_isNested:!0}),qo(this,n,s,u,c)}if(o.length)throw new JOe(o);return this.$__.version&&this.$__version(n,s),ue.hasOwnKeys(s)===!1?[n,null]:[n,s]};function N4e(t,e,r){let n=t.$populated(e,!0);if(!n&&t.$__.selected){let i=e.split(".")[0];if(t.$__.selected[i+".$"])return i}if(!(n&&ue.isMongooseArray(r)))return;if(n.options.match||n.options.options&&Object.hasOwn(n.options.options,"limit")||n.options.options?.skip||n.options.select&&(n.options.select._id===0||/\s?-_id\s?/.test(n.options.select))){let i=r[Ln];if(ue.hasOwnKeys(i)===!1||i.$set||i.$pop)return e}}function qo(t,e,r,n,s,i){if(i||(i="$set"),r[i]||(r[i]={}),r[i][n.path]=s,t.$__schema.options.versionKey!==!1&&!R4e(t,n.path)&&eo!==(eo&t.$__.version)&&!(t.$__schema.options.optimisticConcurrency===!0||Array.isArray(t.$__schema.options.optimisticConcurrency)||Array.isArray(t.$__schema.options.optimisticConcurrency?.exclude))){switch(i){case"$set":case"$unset":case"$pop":case"$pull":case"$pullAll":case"$push":case"$addToSet":case"$inc":break;default:return}i==="$push"||i==="$addToSet"||i==="$pullAll"||i==="$pull"?/\.\d+\.|\.\d+$/.test(n.path)?t.$__.version=eo:t.$__.version|=Ac:/^\$p/.test(i)||Array.isArray(s)?t.$__.version=eo:/\.\d+\.|\.\d+$/.test(n.path)&&(t.$__.version|=Yp)}}function k4e(t,e,r,n,s){if(r.$set?.[n.path])return;if(typeof s.getAtomics=="function"){s.getAtomics().forEach(function(p){let d=p[0],h=p[1];qo(t,e,r,n,h,d)});return}if(typeof s.$__getAtomics=="function"){s.$__getAtomics().forEach(function(p){let d=p[0],h=p[1];qo(t,e,r,n,h,d)});return}let i=s[Ln],o=Object.keys(i),a=o.length,u,c;if(a===0)return ue.isMongooseObject(s)?s=s.toObject({depopulate:1,_isNested:!0}):s.valueOf&&(s=s.valueOf()),qo(t,e,r,n,s);function l(p){return ue.isMongooseObject(p)?p.toObject({depopulate:1,_isNested:!0}):p}for(;a--;)c=o[a],u=i[c],ue.isMongooseObject(u)?u=u.toObject({depopulate:!0,transform:!1,_isNested:!0}):Array.isArray(u)?u=u.map(l):u.valueOf&&(u=u.valueOf()),c==="$addToSet"&&(u={$each:u}),qo(t,e,r,n,u,c)}function R4e(t,e){let r=t.$__schema.options.skipVersioning;return r?(e=e.replace(/\.\d+\./,"."),r[e]):!1}F.prototype.$clone=function(){let t=this.constructor,e=new t;if(e.$isNew=this.$isNew,this._doc&&(e._doc=Ai(this._doc,{retainDocuments:!0,parentDoc:e})),this.$__){let r=this.$__.constructor,n=new r;for(let s of Object.getOwnPropertyNames(this.$__))s!=="activePaths"&&(n[s]=Ai(this.$__[s]));Object.assign(n.activePaths,Ai({...this.$__.activePaths})),e.$__=n}return e};F.prototype.$createModifiedPathsSnapshot=function(){let e=new WeakMap;if(!this.$isSubdocument){let r=this.$getAllSubdocs();for(let n of r)e.set(n,n.$__.activePaths.clone())}return new XOe(e,this.$__.activePaths.clone(),this.$__.version)};F.prototype.$restoreModifiedPathsSnapshot=function(e){if(this.$__.activePaths=e.activePaths.clone(),this.$__.version=e.version,!this.$isSubdocument){let r=this.$getAllSubdocs();for(let n of r)e.subdocSnapshot.has(n)&&(n.$__.activePaths=e.subdocSnapshot.get(n))}return this};F.prototype.$clearModifiedPaths=function(){if(this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("init"),this.$__.version=0,!this.$isSubdocument){let e=this.$getAllSubdocs();for(let r of e)r.$clearModifiedPaths()}return this};F.prototype.$__hasOnlyPrimitiveValues=function(){return!this.$__.populated&&!this.$__.wasPopulated&&(this._doc==null||Object.values(this._doc).every(e=>e==null||typeof e!="object"||ue.isNativeObject(e)&&!Array.isArray(e)||vz(e,"ObjectId")||vz(e,"Decimal128")))};F.prototype._applyVersionIncrement=function(){if(!this.$__.version)return;let e=Ac===(Ac&this.$__.version);if(this.$__.version=void 0,e){let r=this.$__schema.options.versionKey,n=this.$__getValue(r)||0;this.$__setValue(r,n+1)}};F.prototype._applyVersionIncrement=function(){if(!this.$__.version)return;let e=Ac===(Ac&this.$__.version);if(this.$__.version=void 0,e){let r=this.$__schema.options.versionKey,n=this.$__getValue(r)||0;this.$__setValue(r,n+1)}};F.VERSION_WHERE=Yp;F.VERSION_INC=Ac;F.VERSION_ALL=eo;F.ValidationError=aE;Uz.exports=Lz=F});var ae=m(Y=>{"use strict";var F4e=pe().UUID,$4e=rS(),Wz=fs(),q4e=Za(),zz=G8(),xx=vt(),j4e=Da(),L4e=hc(),Kz=m_(),Hz=VV(),nu=$r(),U4e=jp(),V4e=A8(),Vh=Rh(),W4e=B_(),Wh=dc(),{trustedSymbol:Qp}=Lp(),vx;Y.specialProperties=Wh;Y.isMongooseArray=Kz.isMongooseArray;Y.isMongooseDocumentArray=Hz.isMongooseDocumentArray;Y.registerMongooseArray=Kz.registerMongooseArray;Y.registerMongooseDocumentArray=Hz.registerMongooseDocumentArray;var Tx=/\s/,Dx=/\s+/;Y.toCollectionName=function(t,e){if(t==="system.profile"||t==="system.indexes")return t;if(typeof e=="function"){if(typeof t!="string")throw new TypeError("Collection name must be a string");if(t.length===0)throw new TypeError("Collection name cannot be empty");return e(t)}return t};Y.deepEqual=function t(e,r){if(e===r)return!0;if(typeof e!="object"||typeof r!="object")return e===r;if(e instanceof Date&&r instanceof Date)return e.getTime()===r.getTime();if(nu(e,"ObjectId")&&nu(r,"ObjectId")||nu(e,"Decimal128")&&nu(r,"Decimal128"))return e.toString()===r.toString();if(e instanceof RegExp&&r instanceof RegExp)return e.source===r.source&&e.ignoreCase===r.ignoreCase&&e.multiline===r.multiline&&e.global===r.global&&e.dotAll===r.dotAll&&e.unicode===r.unicode&&e.sticky===r.sticky&&e.hasIndices===r.hasIndices;if(e==null||r==null||e.prototype!==r.prototype)return!1;if(e instanceof Map||r instanceof Map)return!(e instanceof Map)||!(r instanceof Map)?!1:t(Array.from(e.keys()),Array.from(r.keys()))&&t(Array.from(e.values()),Array.from(r.values()));if(e instanceof Number&&r instanceof Number)return e.valueOf()===r.valueOf();if(Buffer.isBuffer(e))return Y.buffer.areEqual(e,r);if(Array.isArray(e)||Array.isArray(r)){if(!Array.isArray(e)||!Array.isArray(r))return!1;let o=e.length;if(o!==r.length)return!1;for(let a=0;a<o;++a)if(!t(e[a],r[a]))return!1;return!0}e.$__!=null?e=e._doc:Vh(e)&&(e=e.toObject()),r.$__!=null?r=r._doc:Vh(r)&&(r=r.toObject());let n=Object.keys(e),s=Object.keys(r),i=n.length;if(i!==s.length)return!1;for(let o=i-1;o>=0;o--)if(n[o]!==s[o])return!1;for(let o of n)if(!t(e[o],r[o]))return!1;return!0};Y.last=function(t){if(t!=null&&t.length>0)return t[t.length-1]};Y.cloneArrays=function(e){return Array.isArray(e)?e.map(r=>Y.cloneArrays(r)):e};Y.omit=function(e,r){if(r==null)return Object.assign({},e);Array.isArray(r)||(r=[r]);let n=Object.assign({},e);for(let s of r)delete n[s];return n};Y.clonePOJOsAndArrays=function(e){if(e==null||e.$__!=null)return e;if(U4e(e)){e={...e};for(let r of Object.keys(e))e[r]=Y.clonePOJOsAndArrays(e[r]);return e}if(Array.isArray(e)){e=[...e];for(let r=0;r<e.length;++r)e[r]=Y.clonePOJOsAndArrays(e[r]);return e}return e};Y.merge=function t(e,r,n,s){if(n=n||{},r==null)return e;let i=Object.keys(r),o=0,a=i.length,u;r[Qp]&&(e[Qp]=r[Qp]),s=s||"";let c=n.omitNested||{};for(;o<a;)if(u=i[o++],!(n.omit&&n.omit[u])&&!c[s]&&!Wh.has(u))if(e[u]==null)e[u]=Y.clonePOJOsAndArrays(r[u]);else if(Y.isObject(r[u])){if(Y.isObject(e[u])||(e[u]={}),r[u]!=null){if(n.isDiscriminatorSchemaMerge&&r[u].$isSingleNested&&e[u].$isMongooseDocumentArray||r[u].$isMongooseDocumentArray&&e[u].$isSingleNested)continue;if(r[u].instanceOfSchema){e[u].instanceOfSchema?W4e(e[u],r[u].clone(),n.isDiscriminatorSchemaMerge):e[u]=r[u].clone();continue}else if(nu(r[u],"ObjectId")){e[u]=new q4e(r[u]);continue}}t(e[u],r[u],n,s?s+"."+u:u)}else n.overwrite&&(e[u]=r[u]);return e};Y.toObject=function t(e){vx||(vx=Zi());let r;if(e==null)return e;if(e instanceof vx)return e.toObject();if(Array.isArray(e)){r=[];for(let n of e)r.push(t(n));return r}if(Y.isPOJO(e)){r={},e[Qp]&&(r[Qp]=e[Qp]);for(let n of Object.keys(e))Wh.has(n)||(r[n]=t(e[n]));return r}return e};Y.isObject=L4e;Y.isPOJO=jp();Y.isNonBuiltinObject=function(e){return typeof e=="object"&&!Y.isNativeObject(e)&&!Y.isMongooseType(e)&&!(e instanceof F4e)&&e!=null};Y.isNativeObject=function(t){return Array.isArray(t)||t instanceof Date||t instanceof Boolean||t instanceof Number||t instanceof String};Y.isEmptyObject=function(e){return e==null||typeof e!="object"?!1:Y.hasOwnKeys(e)===!1};Y.hasOwnKeys=function(e){for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r))return!0;return!1};Y.hasKey=function(e,r){let n=Object.keys(e);for(let s of n)if(s===r||Y.isPOJO(e[s])&&Y.hasKey(e[s],r))return!0;return!1};Y.tick=function(e){if(typeof e=="function")return function(){try{e.apply(this,arguments)}catch(r){j4e(function(){throw r})}}};Y.isMongooseType=function(t){return nu(t,"ObjectId")||nu(t,"Decimal128")||t instanceof Buffer};Y.isMongooseObject=Vh;Y.expires=function(e){e&&e.constructor.name==="Object"&&"expires"in e&&(e.expireAfterSeconds=typeof e.expires!="string"?e.expires:Math.round($4e(e.expires)/1e3),delete e.expires)};Y.populate=function(e,r,n,s,i,o,a,u){let c=null;if(arguments.length===1){if(e instanceof zz)return e._docs={},e._childDocs=[],[e];if(Array.isArray(e))return l(e).map(d=>Y.populate(d)[0]);Y.isObject(e)?c=Object.assign({},e):c={path:e}}else typeof n=="object"?c={path:e,select:r,match:n,options:s}:c={path:e,select:r,model:n,match:s,options:i,populate:o,justOne:a,count:u};if(typeof c.path!="string"&&!(Array.isArray(c.path)&&c.path.every(p=>typeof p=="string")))throw new TypeError("utils.populate: invalid path. Expected string or array of strings. Got typeof `"+typeof e+"`");return z4e(c);function l(p){let d=[];return p.forEach(function(h){Tx.test(h.path)?h.path.split(Dx).forEach(function(y){let g=Object.assign({},h);g.path=y,d.push(g)}):d.push(h)}),d}};function z4e(t){if(Array.isArray(t.populate)){let n=[];t.populate.forEach(function(s){if(Tx.test(s.path)){let i=Object.assign({},s);i.path.split(Dx).forEach(function(a){i.path=a,n.push(Y.populate(i)[0])})}else n.push(Y.populate(s)[0])}),t.populate=Y.populate(n)}else t.populate!=null&&typeof t.populate=="object"&&(t.populate=Y.populate(t.populate));let e=[],r=Tx.test(t.path)?t.path.split(Dx):Array.isArray(t.path)?t.path:[t.path];t.options!=null&&(t.options=xx(t.options));for(let n of r)e.push(new zz(Object.assign({},t,{path:n})));return e}Y.getValue=function(t,e,r){return Wz.get(t,e,H4e,r)};var K4e=Object.freeze({getters:!1});function H4e(t,e){if(e==="$*"&&t instanceof Map)return t;let r=t?._doc||t;return r?.isMongooseArrayProxy&&(r=r.__array),r instanceof Map?r.get(e,K4e):r[e]}Y.setValue=function(t,e,r,n,s){Wz.set(t,e,r,"_doc",n,s)};Y.object={};Y.object.vals=function(e){if(e==null)return[];let r=Object.keys(e),n=r.length,s=[];for(;n--;)s.push(e[r[n]]);return s};Y.isNullOrUndefined=function(t){return t==null};Y.array={};Y.array.flatten=function t(e,r,n){return n||(n=[]),e.forEach(function(s){Array.isArray(s)?t(s,r,n):(!r||r(s))&&n.push(s)}),n};Y.hasUserDefinedProperty=function(t,e){if(t==null)return!1;if(Array.isArray(e)){for(let r of e)if(Y.hasUserDefinedProperty(t,r))return!0;return!1}if(Object.hasOwn(t,e))return!0;if(typeof t=="object"&&e in t){let r=t[e];return r!==Object.prototype[e]&&r!==Array.prototype[e]}return!1};var Vz=Math.pow(2,32)-1;Y.isArrayIndex=function(t){return typeof t=="number"?t>=0&&t<=Vz:typeof t=="string"&&/^\d+$/.test(t)?(t=+t,t>=0&&t<=Vz):!1};Y.array.unique=function(t){let e=new Set,r=new Set,n=[];for(let s of t)if(typeof s=="number"||typeof s=="string"||s==null){if(e.has(s))continue;n.push(s),e.add(s)}else if(nu(s,"ObjectId")){if(r.has(s.toString()))continue;n.push(s),r.add(s.toString())}else n.push(s);return n};Y.buffer={};Y.buffer.areEqual=function(t,e){return!Buffer.isBuffer(t)||!Buffer.isBuffer(e)?!1:t.equals(e)};Y.getFunctionName=V4e;Y.decorate=function(t,e){for(let r in e)Wh.has(r)||(t[r]=e[r])};Y.mergeClone=function(t,e){Vh(e)&&(e=e.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1}));let r=Object.keys(e),n=r.length,s=0,i;for(;s<n;)if(i=r[s++],!Wh.has(i))if(typeof t[i]>"u")t[i]=xx(e[i],{transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});else{let o=e[i];if(o?.valueOf&&!(o instanceof Date)&&(o=o.valueOf()),Y.isObject(o)){let a=o;Vh(o)&&!o.isMongooseBuffer&&(a=a.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1})),o.isMongooseBuffer&&(a=Buffer.from(a)),Y.mergeClone(t[i],a)}else t[i]=xx(o,{flattenDecimals:!1})}};Y.each=function(t,e){for(let r of t)e(r)};Y.renameObjKey=function(t,e,r){return Object.keys(t).reduce((s,i)=>(i===e?s[r]=t[e]:s[i]=t[i],s),{})};Y.getOption=function(t){let e=Array.prototype.slice.call(arguments,1);for(let r of e)if(r!=null&&r[t]!=null)return r[t];return null};Y.noop=function(){};Y.errorToPOJO=function(e){if(!(e instanceof Error))throw new Error("`error` must be `instanceof Error`.");let n={};for(let s of Object.getOwnPropertyNames(e))n[s]=e[s];return n};Y.warn=function(e){return process.emitWarning(e,{code:"MONGOOSE"})};Y.injectTimestampsOption=function(e,r){r!=null&&(e.timestamps=r)}});var kt=m((lE,Zz)=>{"use strict";var Kh=ds(),Xz=qn(),G4e=P_(),J4e=K8(),cE=vt(),Mx=TV(),Y4e=MV(),Px=BV(),Q4e=te().schemaTypeSymbol,Cc=ae(),zh=te().validatorErrorSymbol,X4e=te().documentIsModified,Gz=te().populateModelSymbol,Bx=Kh.CastError,Xp=Kh.ValidatorError,Z4e={_skipMarkModified:!0};function ye(t,e,r,n){this[Q4e]=!0,this.path=t,this.instance=r,this.schemaName=this.constructor.schemaName,this.validators=[],this.getters=Object.hasOwn(this.constructor,"getters")?this.constructor.getters.slice():[],this.setters=Object.hasOwn(this.constructor,"setters")?this.constructor.setters.slice():[],this.splitPath(),e=e||{};let s=this.constructor.defaultOptions||{},i=Object.keys(s);for(let u of i)u==="validate"?this.validate(s.validate):Object.hasOwn(s,u)&&!Object.hasOwn(e,u)&&(e[u]=s[u]);e.select==null&&delete e.select;let o=this.OptionsConstructor||Xz;this.options=new o(e),this.parentSchema=n,this._index=null,Cc.hasUserDefinedProperty(this.options,"immutable")&&(this.$immutable=this.options.immutable,Mx(this));let a=Object.keys(this.options);for(let u of a){if(u==="cast"){Array.isArray(this.options[u])?this.castFunction.apply(this,this.options[u]):this.castFunction(this.options[u]);continue}if(Cc.hasUserDefinedProperty(this.options,u)&&typeof this[u]=="function"){if(u==="index"&&this._index){if(e.index===!1){let p=this._index;if(typeof p=="object"&&p!=null){if(p.unique)throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true');if(p.sparse)throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}this._index=!1}continue}let c=e[u];if(u==="default"){this.default(c);continue}let l=Array.isArray(c)?c:[c];this[u].apply(this,l)}}Object.defineProperty(this,"$$context",{enumerable:!1,configurable:!1,writable:!0,value:null})}ye.prototype.OptionsConstructor=Xz;ye.prototype.path;ye.prototype.toJSON=function(){let e={...this};return delete e.parentSchema,e};ye.prototype.validators;ye.prototype.isRequired;ye.prototype.splitPath=function(){if(this._presplitPath!=null)return this._presplitPath;if(this.path!=null)return this._presplitPath=this.path.indexOf(".")===-1?[this.path]:this.path.split("."),this._presplitPath};ye.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=r=>r),this._cast=e,this._cast)};ye.prototype.castFunction=function(e,r){return arguments.length===0?this._castFunction:(e===!1&&(e=this.constructor._defaultCaster||(n=>n)),typeof e=="string"?(this._castErrorMessage=e,this._castFunction):(e!=null&&(this._castFunction=e),r!=null&&(this._castErrorMessage=r),this._castFunction))};ye.prototype.cast=function(){throw new Error("Base SchemaType class does not implement a `cast()` function")};ye.set=function(e,r){Object.hasOwn(this,"defaultOptions")||(this.defaultOptions=Object.assign({},this.defaultOptions)),this.defaultOptions[e]=r};ye.get=function(t){this.getters=Object.hasOwn(this,"getters")?this.getters:[],this.getters.push(t)};ye.prototype.default=function(t){if(arguments.length===1){if(t===void 0){this.defaultValue=void 0;return}if(t?.instanceOfSchema)throw new Kh("Cannot set default value of path `"+this.path+"` to a mongoose Schema instance.");return this.defaultValue=t,this.defaultValue}else arguments.length>1&&(this.defaultValue=[...arguments]);return this.defaultValue};ye.prototype.index=function(t){return this._index=t,Cc.expires(this._index),this};ye.prototype.unique=function(e,r){if(this._index===!1){if(!e)return;throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true')}return!Object.hasOwn(this.options,"index")&&e===!1?this:(this._index==null||this._index===!0?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.unique=!!e,typeof r=="string"&&(this._duplicateKeyErrorMessage=r),this)};ye.prototype.text=function(t){if(this._index===!1){if(!t)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `text` set to true')}return!Object.hasOwn(this.options,"index")&&t===!1?this:(this._index===null||this._index===void 0||typeof this._index=="boolean"?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.text=t,this)};ye.prototype.sparse=function(t){if(this._index===!1){if(!t)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}return!Object.hasOwn(this.options,"index")&&t===!1?this:(this._index==null||typeof this._index=="boolean"?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.sparse=t,this)};ye.prototype.immutable=function(t){return this.$immutable=t,Mx(this),this};ye.prototype.transform=function(t){return this.options.transform=t,this};ye.prototype.set=function(t){if(typeof t!="function")throw new TypeError("A setter must be a function.");return this.setters.push(t),this};ye.prototype.get=function(t){if(typeof t!="function")throw new TypeError("A getter must be a function.");return this.getters.push(t),this};ye.prototype.validateAll=function(t){for(let e=0;e<t.length;e++)this.validate(t[e]);return this};ye.prototype.validate=function(t,e,r){if(typeof t=="function"||t&&Cc.getFunctionName(t.constructor)==="RegExp"){let o;return typeof e=="function"?(o={validator:t,message:e},o.type=r||"user defined"):e instanceof Object&&!r?(o=Px(e)?Object.assign({},e):cE(e),o.message||(o.message=o.msg),o.validator=t,o.type=o.type||"user defined"):(e==null&&(e=Kh.messages.general.default),r||(r="user defined"),o={message:e,type:r,validator:t}),this.validators.push(o),this}let n,s,i;for(n=0,s=arguments.length;n<s;n++){if(i=arguments[n],!Cc.isPOJO(i)){let o="Invalid validator. Received ("+typeof i+") "+i+". See https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.validate()";throw new Error(o)}this.validate(i.validator,i)}return this};ye.prototype.required=function(t,e){let r={};if(arguments.length>0&&t==null)return this.validators=this.validators.filter(function(i){return i.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;if(typeof t=="object"&&(r=t,e=r.message||e,t=t.isRequired),t===!1)return this.validators=this.validators.filter(function(i){return i.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;let n=this;this.isRequired=!0,this.requiredValidator=function(i){let o=this?.$__?.cachedRequired;if(o!=null&&!this.$__isSelected(n.path)&&!this[X4e](n.path))return!0;if(o!=null&&n.path in o){let a=o[n.path]?n.checkRequired(i,this):!0;return delete o[n.path],a}else if(typeof t=="function")return t.apply(this)?n.checkRequired(i,this):!0;return n.checkRequired(i,this)},this.originalRequiredValue=t,typeof t=="string"&&(e=t,t=void 0);let s=e||Kh.messages.general.required;return this.validators.unshift(Object.assign({},r,{validator:this.requiredValidator,message:s,type:"required"})),this};ye.prototype.ref=function(t){return this.options.ref=t,this};ye.prototype.getDefault=function(t,e,r){let n;if(this.defaultValue==null)return this.defaultValue;if(typeof this.defaultValue=="function"?this.defaultValue===Date.now||this.defaultValue===Array||this.defaultValue.name.toLowerCase()==="objectid"?n=this.defaultValue.call(t):n=this.defaultValue.call(t,t):n=this.defaultValue,n!=null){if(typeof n=="object"&&!this.options?.shared&&(n=cE(n)),r?.skipCast)return this._applySetters(n,t);let s=this.applySetters(n,t,e,void 0,Z4e);return s&&!Array.isArray(s)&&s.$isSingleNested&&(s.$__parent=t),s}return n};ye.prototype._applySetters=function(t,e,r,n,s){let i=t;if(r)return i;let o=this.setters;for(let a=o.length-1;a>=0;a--)i=o[a].call(e,i,n,this,s);return i};ye.prototype._castNullish=function(e){return e};ye.prototype.applySetters=function(t,e,r,n,s){let i=this._applySetters(t,e,r,n,s);return i==null?this._castNullish(i):(i=this.cast(i,e,r,n,s),i)};ye.prototype.applyGetters=function(t,e){let r=t,n=this.getters,s=n.length;if(s===0)return r;for(let i=0;i<s;++i)r=n[i].call(e,r,this);return r};ye.prototype.select=function(e){return this.selected=!!e,this};ye.prototype.doValidate=async function(e,r,n){let s=!1,i=this.path,o=this.validators.filter(u=>typeof u=="object"&&u!==null);if(!o.length)return;let a=[];for(let u=0,c=o.length;u<c;++u){let l=o[u],p=l.validator,d,h=Px(l)?Object.assign({},l):cE(l);if(h.path=n?.path||i,h.fullPath=this.$fullPath,h.value=e,typeof e=="string"&&(h.length=e.length,h.value.length>30&&(h.value=h.value.slice(0,30)+"...")),!(e===void 0&&p!==this.requiredValidator)){if(p instanceof RegExp){if(d=p.test(e),d===!1){let f=h.ErrorConstructor||Xp;throw s=new f(h,r),s[zh]=!0,s}continue}else if(typeof p!="function")continue;try{h.propsParameter?d=p.call(r,e,h):d=p.call(r,e)}catch(f){d=!1,h.reason=f,f.message&&(h.message=f.message)}if(typeof d?.then=="function")a.push(d.then(function(f){if(f===!1){let y=h.ErrorConstructor||Xp;throw s=new y(h,r),s[zh]=!0,s}},function(f){h.reason=f,h.message=f.message,d=!1;let y=h.ErrorConstructor||Xp;throw s=new y(h,r),s[zh]=!0,s}));else if(d!==void 0&&!d){let f=h.ErrorConstructor||Xp;throw s=new f(h,r),s[zh]=!0,s}}}await Promise.all(a)};function Jz(t,e){if(t!==void 0&&!t){let r=e.ErrorConstructor||Xp,n=new r(e);return n[zh]=!0,n}}ye.prototype.doValidateSync=function(t,e,r){let n=this.path;if(!this.validators.length)return null;let i=this.validators;if(t===void 0)if(this.validators.length!==0&&this.validators[0].type==="required")i=[this.validators[0]];else return null;let o=null,a=0,u=i.length;for(a=0;a<u;++a){let c=i[a];if(c===null||typeof c!="object")continue;let l=c.validator,p=Px(c)?Object.assign({},c):cE(c);p.path=r?.path||n,p.fullPath=this.$fullPath,p.value=t,typeof t=="string"&&(p.length=t.length,p.value.length>30&&(p.value=p.value.slice(0,30)+"..."));let d=!1;if(!Y4e(l)){if(l instanceof RegExp){o=Jz(l.test(t),p);continue}if(typeof l=="function"){try{p.propsParameter?d=l.call(e,t,p):d=l.call(e,t)}catch(h){d=!1,p.reason=h}if(typeof d?.then!="function"&&(o=Jz(d,p),o))break}}}return o};ye._isRef=function(t,e,r,n){let s=n&&(t.options?.ref||t.options?.refPath);if(!s&&r?.$__!=null){let i=r.$__fullPath(t.path,!0),o=r.ownerDocument();s=i!=null&&o.$populated(i)||r.$populated(t.path)}return s?e==null||!Buffer.isBuffer(e)&&e._bsontype!=="Binary"&&Cc.isObject(e)?!0:n:!1};ye.prototype._castRef=function(e,r,n,s){if(e==null)return e;if(e.$__!=null)return e.$__.wasPopulated=e.$__.wasPopulated||{value:e._doc._id},e;if(Buffer.isBuffer(e)||!Cc.isObject(e)){if(n)return e;throw new Bx(this.instance,e,this.path,null,this)}let i=r.$__fullPath(this.path,!0),a=r.ownerDocument().$populated(i,!0),u=e;if(!r.$__.populated||!r.$__.populated[i]||!r.$__.populated[i].options||!r.$__.populated[i].options.options||!r.$__.populated[i].options.options.lean){let c=a?a.options[Gz]:r.constructor.db.model(this.options.ref);u=c.hydrate(e,null,s),u.$__.wasPopulated={value:u._doc._id,options:{[Gz]:c}}}return u};function Yz(t,e){return this.castForQuery(null,t,e)}function eCe(t,e){let r=this;return Array.isArray(t)?t.map(function(n){return r.castForQuery(null,n,e)}):[this.castForQuery(null,t,e)]}function Qz(t,e){let r=this;return Array.isArray(t)?t.map(function(n){return Array.isArray(n)&&n.length===0?n:r.castForQuery(null,n,e)}):[this.castForQuery(null,t,e)]}ye.prototype.$conditionalHandlers={$all:eCe,$eq:Yz,$in:Qz,$ne:Yz,$nin:Qz,$exists:G4e,$type:J4e};ye.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t);return n.call(this,e,r)}try{return this.applySetters(e,r)}catch(s){throw s instanceof Bx&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}};ye.checkRequired=function(t){return arguments.length!==0&&(this._checkRequired=t),this._checkRequired};ye.prototype.checkRequired=function(t){return t!=null};ye.prototype.clone=function(){let t=Object.assign({},this.options),e=new this.constructor(this.path,t,this.instance,this.parentSchema);return e.validators=this.validators.slice(),this.requiredValidator!==void 0&&(e.requiredValidator=this.requiredValidator),this.defaultValue!==void 0&&(e.defaultValue=this.defaultValue),this.$immutable!==void 0&&this.options.immutable===void 0&&(e.$immutable=this.$immutable,Mx(e)),this._index!==void 0&&(e._index=this._index),this.selected!==void 0&&(e.selected=this.selected),this.isRequired!==void 0&&(e.isRequired=this.isRequired),this.originalRequiredValue!==void 0&&(e.originalRequiredValue=this.originalRequiredValue),e.getters=this.getters.slice(),e.setters=this.setters.slice(),e};ye.prototype.getEmbeddedSchemaType=function(){return this.embeddedSchemaType};ye.prototype._duplicateKeyErrorMessage=null;ye.prototype.toJSONSchema=function(e){throw new Error(`Converting unsupported SchemaType to JSON Schema: ${this.instance} at path "${this.path}"`)};ye.prototype.autoEncryptionType=function(){return null};Zz.exports=lE=ye;lE.CastError=Bx;lE.ValidatorError=Xp});var Ix=m((s$e,eK)=>{"use strict";var Oi=hs(),Un=class{constructor(e){Object.assign(this,e),e?.options!=null&&(this.options=Object.assign({},e.options))}};Object.defineProperty(Un.prototype,"ref",Oi);Object.defineProperty(Un.prototype,"refPath",Oi);Object.defineProperty(Un.prototype,"localField",Oi);Object.defineProperty(Un.prototype,"foreignField",Oi);Object.defineProperty(Un.prototype,"justOne",Oi);Object.defineProperty(Un.prototype,"count",Oi);Object.defineProperty(Un.prototype,"match",Oi);Object.defineProperty(Un.prototype,"options",Oi);Object.defineProperty(Un.prototype,"skip",Oi);Object.defineProperty(Un.prototype,"limit",Oi);Object.defineProperty(Un.prototype,"perDocumentLimit",Oi);eK.exports=Un});var pE=m((i$e,tK)=>{"use strict";tK.exports=function(e,r,n){return e==null?e:(e._doc!=null&&(e=e._doc),arguments.length>=3?typeof e!="object"||n===void 0?void 0:(e instanceof Map?e.set(r,n):e[r]=n,n):r==="$*"?e instanceof Map?Array.from(e.values()):Object.keys(e).map(s=>e[s]):e instanceof Map?e.get(r):e[r])}});var Nx=m((o$e,iK)=>{"use strict";var tCe=be(),rCe=nx(),rK=pE(),nK=fs(),nCe=require("util"),sCe=ae(),sK=/(\.\d+$|\.\d+\.)/g;iK.exports=function(e,r,n,s,i){if(e==null)return[];if(typeof e=="string"&&i!=null&&rCe(i,e))throw new tCe("refPath `"+e+"` must not be excluded in projection, got "+nCe.inspect(i));if(sK.test(n)){let u=n.split(sK);if(u[u.length-1]==="")throw new Error("Can't populate individual element in an array");let c="",l=e;for(let h=0;h<u.length;h+=2){let f=u[h];if(l.startsWith(f+"."))c+=l.substring(0,f.length)+u[h+1],l=l.substring(f.length+1);else if(h===u.length-1){c+=l,l="";break}else throw new Error("Could not normalize ref path, chunk "+f+" not in populated path")}let p=nK.get(c,r,rK),d=Array.isArray(p)?p:[p];return d=sCe.array.flatten(d),d}let o=nK.get(e,r,rK),a;return s!=null&&Object.hasOwn(s.virtuals,e)?a=[s.virtuals[e].applyGetters(void 0,r)]:a=Array.isArray(o)?o:[o],a}});var dE=m((a$e,oK)=>{"use strict";var iCe=Nx(),oCe=ae(),aCe=te().modelSymbol;function jo(t,e){this.path=e,this.getters=[],this.setters=[],this.options=Object.assign({},t)}jo.prototype._applyDefaultGetters=function(){if(this.getters.length>0||this.setters.length>0)return;let e="$"+this.path;this.getters.push(function(){return this.$locals[e]}),this.setters.push(function(r){this.$locals[e]=r})};jo.prototype.clone=function(){let t=new jo(this.options,this.path);return t.getters=[].concat(this.getters),t.setters=[].concat(this.setters),t};jo.prototype.get=function(t){return this.getters.push(t),this};jo.prototype.set=function(t){return this.setters.push(t),this};jo.prototype.applyGetters=function(t,e){oCe.hasUserDefinedProperty(this.options,["ref","refPath"])&&e.$$populatedVirtuals&&Object.hasOwn(e.$$populatedVirtuals,this.path)&&(t=e.$$populatedVirtuals[this.path]);let r=t;for(let n of this.getters)r=n.call(e,r,this,e);return r};jo.prototype.applySetters=function(t,e){let r=t;for(let n of this.setters)r=n.call(e,r,this,e);return r};jo.prototype._getModelNamesForPopulate=function(e){if(this.options.refPath)return iCe(this.options.refPath,e,this.path);let r=null;return typeof this.options.ref=="function"&&!this.options.ref[aCe]?r=this.options.ref.call(e,e):r=this.options.ref,r!=null&&!Array.isArray(r)?[r]:r};oK.exports=jo});var kx=m((u$e,aK)=>{"use strict";aK.exports=function(e){let r={_id:{auto:!0}};r._id[e.options.typeKey]="ObjectId",e.add(r)}});var Rx=m((c$e,uK)=>{"use strict";uK.exports=function(e,r){let n=e.discriminatorMapping?.value;if(n&&!("sparse"in r)){let s=e.options.discriminatorKey;r.partialFilterExpression=r.partialFilterExpression||{},r.partialFilterExpression[s]=n}return r}});var lK=m((l$e,cK)=>{"use strict";var Fx=Rt(),uCe=hc(),cCe=Rx();cK.exports=function(e){let r=[],n=new WeakMap,s=e.constructor.indexTypes,i=new Map;return o(e),r;function o(u,c,l){if(n.has(u))return;n.set(u,!0),c=c||"";let p=Object.keys(u.paths);for(let d of p){let h=u.paths[d];if(l!=null&&l.paths[d])continue;if(h._duplicateKeyErrorMessage!=null&&(u._duplicateKeyErrorMessagesByPath=u._duplicateKeyErrorMessagesByPath||{},u._duplicateKeyErrorMessagesByPath[d]=h._duplicateKeyErrorMessage),h.$isMongooseDocumentArray||h.$isSingleNested){if(Fx(h,"options.excludeIndexes")!==!0&&Fx(h,"schemaOptions.excludeIndexes")!==!0&&Fx(h,"schema.options.excludeIndexes")!==!0&&o(h.schema,c+d+"."),h.schema.discriminators!=null){let y=h.schema.discriminators,g=Object.keys(y);for(let _ of g)o(y[_],c+d+".",h.schema)}if(h.$isMongooseDocumentArray)continue}let f=h._index||h.embeddedSchemaType&&h.embeddedSchemaType._index;if(f!==!1&&f!=null){let y={},g=uCe(f),_=g?{...f}:{},S=typeof f=="string"?f:g?f.type:!1;if(S&&s.indexOf(S)!==-1)y[c+d]=S;else if(_.text)y[c+d]="text",delete _.text;else{let E=!1;f==="descending"||f==="desc"?E=!0:f==="ascending"||f==="asc"?E=!1:E=Number(f)===-1,y[c+d]=E?-1:1}delete _.type,u.options.autoIndex!=null&&(_._autoIndex=u.options.autoIndex);let O=_?.name;typeof O=="string"?i.has(O)?Object.assign(i.get(O),y):(r.push([y,_]),i.set(O,y)):(r.push([y,_]),i.set(O,y))}}n.delete(u),c?a(u,c):(u._indexes.forEach(function(d){let h=d[1];cCe(u,h)}),r=r.concat(u._indexes))}function a(u,c){let l=u._indexes,p=l.length;for(let d=0;d<p;++d){let h=l[d][0],f=l[d][1],y=Object.keys(h),g=y.length,_={};for(let O=0;O<g;++O){let E=y[O];_[c+E]=h[E]}let S=Object.assign({},f);if(f?.partialFilterExpression!=null){S.partialFilterExpression={};let O=f.partialFilterExpression;for(let E of Object.keys(O))S.partialFilterExpression[c+E]=O[E]}r.push([_,S])}}}});var $x=m((p$e,pK)=>{"use strict";pK.exports=function(e){switch(e){case"p":e="primary";break;case"pp":e="primaryPreferred";break;case"s":e="secondary";break;case"sp":e="secondaryPreferred";break;case"n":e="nearest";break}return e}});var hK=m((d$e,dK)=>{"use strict";dK.exports=function(e){return!(!e.paths.id&&e.paths._id&&e.options.id)||e.aliases?.id||e.virtual("id").get(lCe),e};function lCe(){return this._id!=null?this._id.toString():null}});var mK=m((h$e,fK)=>{"use strict";fK.exports=function(e,r){let n=Object.keys(e),s=Object.keys(r);if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++){let o=n[i];if(o!==s[i]||e[o]!==r[o])return!1}return!0}});var gK=m((f$e,yK)=>{"use strict";yK.exports=function(e,r,n,s){return s.justOne||s.count?(e[r]=Array.isArray(n)?n[0]:n,typeof e[r]!="object"&&(e[r]=s.count?n:null)):(e[r]=Array.isArray(n)?n:n==null?[]:[n],e[r]=e[r].filter(function(i){return i&&typeof i=="object"})),e[r]}});var Hh=m((m$e,_K)=>{"use strict";_K.exports=function(e){return e.replace(/\.\$(\[[^\]]*\])?(?=\.)/g,".0").replace(/\.\$(\[[^\]]*\])?$/g,".0")}});var hE=m((y$e,EK)=>{"use strict";EK.exports=pCe;function pCe(t,e){return t==null?null:typeof t=="boolean"?e:typeof t[e]=="boolean"?t[e]?e:null:e in t?t[e]:e}});var jx=m((g$e,bK)=>{"use strict";var dCe=Hh(),Lo=hE();bK.exports=vc;function vc(t,e,r){if(e==null)return;if(Object.keys(e).some(a=>a[0]==="$")){if(e.$push&&o(e.$push),e.$addToSet&&o(e.$addToSet),e.$set!=null){let a=Object.keys(e.$set);for(let u of a)qx(r,u,e.$set,t)}if(e.$setOnInsert!=null){let a=Object.keys(e.$setOnInsert);for(let u of a)qx(r,u,e.$setOnInsert,t)}}let i=Object.keys(e).filter(a=>a[0]!=="$");for(let a of i)qx(r,a,e,t);function o(a){for(let u of Object.keys(a)){let c=r.path(u.replace(/\.\$\./i,".").replace(/.\$$/,""));if(a[u]&&c&&c.$isMongooseDocumentArray&&c.schema.options.timestamps){let l=c.schema.options.timestamps,p=Lo(l,"createdAt"),d=Lo(l,"updatedAt");a[u].$each?a[u].$each.forEach(function(h){d!=null&&(h[d]=t),p!=null&&(h[p]=t),vc(t,h,c.schema)}):(d!=null&&(a[u][d]=t),p!=null&&(a[u][p]=t),vc(t,a[u],c.schema))}}}}function hCe(t,e,r){let n=e.schema.options.timestamps,s=t.length;if(!n){for(let a=0;a<s;++a)vc(r,t[a],e.schema);return}let i=Lo(n,"createdAt"),o=Lo(n,"updatedAt");for(let a=0;a<s;++a)o!=null&&(t[a][o]=r),i!=null&&(t[a][i]=r),vc(r,t[a],e.schema)}function fCe(t,e,r){let n=e.schema.options.timestamps;if(!n){vc(r,t,e.schema);return}let s=Lo(n,"createdAt"),i=Lo(n,"updatedAt");i!=null&&(t[i]=r),s!=null&&(t[s]=r),vc(r,t,e.schema)}function qx(t,e,r,n){let s=dCe(e),i=t.path(s);if(!i)return;let o=[],a=s.split(".");for(let u=a.length-1;u>0;--u){let c=t.path(a.slice(0,u).join("."));c!=null&&(c.$isMongooseDocumentArray||c.$isSingleNested)&&o.push({parentPath:e.split(".").slice(0,u).join("."),parentSchemaType:c})}if(Array.isArray(r[e])&&i.$isMongooseDocumentArray)hCe(r[e],i,n);else if(r[e]&&i.$isSingleNested)fCe(r[e],i,n);else if(o.length>0)for(let u of o){let c=u.parentPath,l=u.parentSchemaType,p=l.schema.options.timestamps,d=Lo(p,"updatedAt");if(!(!p||d==null)){if(l.$isSingleNested)r[c+"."+d]=n;else if(l.$isMongooseDocumentArray){let h=e.substring(c.length+1);if(/^\d+$/.test(h)){r[c+"."+h][d]=n;continue}let f=h.indexOf(".");h=f!==-1?h.substring(0,f):h,r[c+"."+h+"."+d]=n}}}else if(i.schema!=null&&i.schema!=t&&r[e]){let u=i.schema.options.timestamps,c=Lo(u,"createdAt"),l=Lo(u,"updatedAt");if(!u)return;l!=null&&(r[e][l]=n),c!=null&&(r[e][c]=n)}}});var Lx=m((_$e,wK)=>{"use strict";var SK=Rt(),mCe=ae();wK.exports=yCe;function yCe(t,e,r,n,s,i){let o=n,a=o,u=SK(s,"timestamps",!0);if(!u||o==null)return n;let c=u?.createdAt===!1,l=u?.updatedAt===!1;if(i)return n?.$set&&(n=n.$set,o.$set={},a=o.$set),!l&&r&&!n[r]&&(a[r]=t),!c&&e&&!n[e]&&(a[e]=t),o;if(n=n||{},Array.isArray(o))return r==null||o.push({$set:{[r]:t}}),o;if(o.$set=o.$set||{},!l&&r&&!n.$currentDate?.[r]){let p=!1;if(r.indexOf(".")!==-1){let d=r.split(".");for(let h=1;h<d.length;++h){let f=d.slice(-h).join("."),y=d.slice(0,-h).join(".");if(n[y]!=null){n[y][f]=t,p=!0;break}else if(n.$set?.[y]){n.$set[y][f]=t,p=!0;break}}}p||(o.$set[r]=t),Object.hasOwn(o,r)&&delete o[r]}if(!c&&e){let p=SK(s,"overwriteImmutable",!1),d=n[e]!=null||n.$set?.[e]!=null;if(p&&d)n[e]!=null&&(o.$set[e]=n[e],delete n[e]);else{n[e]&&delete n[e],n.$set?.[e]&&delete n.$set[e];let h=!1;if(e.indexOf(".")!==-1){let f=e.split(".");for(let y=1;y<f.length;++y){let g=f.slice(-y).join("."),_=f.slice(0,-y).join(".");if(n[_]!=null){n[_][g]=t,h=!0;break}else if(n.$set?.[_]){n.$set[_][g]=t,h=!0;break}}}h||(o.$setOnInsert=o.$setOnInsert||{},o.$setOnInsert[e]=t)}}return mCe.hasOwnKeys(o.$set)===!1&&delete o.$set,o}});var OK=m((E$e,AK)=>{"use strict";AK.exports=function(e,r,n,s,i){let o=r?.updatedAt===!1,a=r?.createdAt===!1,u=n!=null?n():e.ownerDocument().constructor.base.now();if(!a&&(e.isNew||e.$isSubdocument)&&s&&!e.$__getValue(s)&&e.$__isSelected(s)&&e.$set(s,u,void 0,{overwriteImmutable:!0}),!o&&i&&(e.isNew||e.$isModified())){let c=u;e.isNew&&s!=null&&(c=e.$__getValue(s)),e.$set(i,c)}}});var xK=m((b$e,vK)=>{"use strict";var gCe=jx(),_Ce=Lx(),ECe=Rt(),fE=hE(),bCe=OK(),SCe=gc(),CK=new Set(["replaceOne","findOneAndReplace"]);vK.exports=function(e,r){let n=e.childSchemas.find(s);function s(p){return!!p.schema.options.timestamps}if(!r&&!n)return;let i=fE(r,"createdAt"),o=fE(r,"updatedAt"),a=r!=null&&Object.hasOwn(r,"currentTime")?r.currentTime:null,u={};if(e.$timestamps={createdAt:i,updatedAt:o},i&&!e.paths[i]){let d=e.base?.get("timestamps.createdAt.immutable")??null??!0;u[i]={[e.options.typeKey||"type"]:Date,immutable:d}}o&&!e.paths[o]&&(u[o]=Date),e.add(u),e.pre("save",function(){let d=ECe(this,"$__.saveOptions.timestamps");d!==!1&&bCe(this,d,a,i,o)}),e.methods.initializeTimestamps=function(p){if(p===!1)return this;let d=a!=null?a():this.constructor.base.now(),h=p!=null?fE(p,"createdAt"):i,f=p!=null?fE(p,"updatedAt"):o;if(h&&!this.get(h)&&this.$set(i,d),f&&!this.get(f)&&this.$set(o,d),this.$isSubdocument)return this;let y=this.$getAllSubdocs();for(let g of y)g.initializeTimestamps&&g.initializeTimestamps(p);return this},l[SCe.builtInMiddleware]=!0;let c={query:!0,model:!1};e.pre("findOneAndReplace",c,l),e.pre("findOneAndUpdate",c,l),e.pre("replaceOne",c,l),e.pre("update",c,l),e.pre("updateOne",c,l),e.pre("updateMany",c,l);function l(){let p=a!=null?a():this.model.base.now();CK.has(this.op)&&this.getUpdate()==null&&this.setUpdate({}),_Ce(p,i,o,this.getUpdate(),this._mongooseOptions,CK.has(this.op)),gCe(p,this.getUpdate(),this.model.schema)}}});var DK=m((S$e,TK)=>{"use strict";var wCe=be(),ACe=require("util");TK.exports=OCe;function OCe(t,e){if(typeof t!="string"&&typeof t!="function")throw new wCe('Invalid ref at path "'+e+'". Got '+ACe.inspect(t,{depth:0}))}});var Gh=m(Zp=>{"use strict";var MK=Object.freeze(["countDocuments","distinct","estimatedDocumentCount","find","findOne","findOneAndReplace","findOneAndUpdate","replaceOne","updateMany","updateOne","deleteMany","deleteOne","findOneAndDelete"]);Zp.queryOperations=MK;var CCe=MK.concat(["validate"]);Zp.queryMiddlewareFunctions=CCe;var vCe=["aggregate"];Zp.aggregateMiddlewareFunctions=vCe;var xCe=["bulkWrite","createCollection","insertMany"];Zp.modelMiddlewareFunctions=xCe;var TCe=["validate","save","remove","updateOne","deleteOne","init"];Zp.documentMiddlewareFunctions=TCe});var BK=m((A$e,PK)=>{"use strict";PK.exports=pe().Double});var mE=m((O$e,FK)=>{"use strict";var DCe=_c(),MCe=be(),IK=vt(),PCe=ae().deepEqual,BCe=bn(),ICe=K_(),NK=require("util"),NCe=dc(),Ux=$r(),kCe=L_(),kK=te().populateModelSymbol;var Ci=class extends Map{constructor(e,r,n,s){BCe(e)==="Object"&&(e=Object.keys(e).reduce((i,o)=>i.concat([[o,e[o]]]),[])),super(e),this.$__parent=n?.$__!=null?n:null,this.$__path=r,this.$__schemaType=s??new DCe(r),this.$__runDeferred()}$init(e,r){RK(e),super.set(e,r),r?.$isSingleNested&&(r.$basePath=this.$__path+"."+e)}$__set(e,r){super.set(e,r)}get(e,r){return Ux(e,"ObjectId")&&(e=e.toString()),r=r||{},r.getters===!1?super.get(e):this.$__schemaType.applyGetters(super.get(e),this.$__parent)}set(e,r){if(Ux(e,"ObjectId")&&(e=e.toString()),RK(e),r=ICe(r),this.$__schemaType==null){this.$__deferred=this.$__deferred||[],this.$__deferred.push({key:e,value:r});return}let n,s=this.$__parent,i=s?.$__?.populated?s.$populated(a.call(this),!0)||s.$populated(this.$__path,!0):null,o=this.get(e);if(i!=null){if(this.$__schemaType.$isSingleNested)throw new MCe(`Cannot manually populate single nested subdoc underneath Map at path "${this.$__path}". Try using an array instead of a Map.`);Array.isArray(r)&&this.$__schemaType.$isMongooseArray?r=r.map(u=>(u.$__==null&&(u=new i.options[kK](u)),u.$__.wasPopulated={value:u._doc._id},u)):r!=null&&(r.$__==null&&(r=new i.options[kK](r)),r.$__.wasPopulated={value:r._doc._id})}else try{let u=this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested||this.$__schemaType.$isMongooseArray||this.$__schemaType.$isSchemaMap?{path:a.call(this)}:null;r=this.$__schemaType.applySetters(r,this.$__parent,!1,this.get(e),u)}catch(u){if(this.$__parent?.$__!=null){this.$__parent.invalidate(a.call(this),u);return}throw u}if(super.set(e,r),s?.$__!=null&&!PCe(r,o)){let u=a.call(this);s.markModified(u),(this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested)&&kCe(s,u)}function a(){return n||(n=this.$__path+"."+e,n)}}clear(){super.clear();let e=this.$__parent;e?.markModified(this.$__path)}delete(e){return Ux(e,"ObjectId")&&(e=e.toString()),this.set(e,void 0),super.delete(e)}toBSON(){return new Map(this)}toObject(e){if(e?.flattenMaps){let r={},n=this.keys();for(let s of n)r[s]=IK(this.get(s),e);return r}return new Map(this)}$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)}toJSON(e){if(typeof e?.flattenMaps!="boolean"||e.flattenMaps){let r={},n=this.keys();for(let s of n)r[s]=IK(this.get(s),e);return r}return new Map(this)}inspect(){return new Map(this)}$__runDeferred(){if(this.$__deferred){for(let e of this.$__deferred)this.set(e.key,e.value);this.$__deferred=null}}};NK.inspect.custom&&Object.defineProperty(Ci.prototype,NK.inspect.custom,{enumerable:!1,writable:!1,configurable:!1,value:Ci.prototype.inspect});Object.defineProperty(Ci.prototype,"$__set",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(Ci.prototype,"$__parent",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(Ci.prototype,"$__path",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(Ci.prototype,"$__schemaType",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(Ci.prototype,"$isMongooseMap",{enumerable:!1,writable:!1,configurable:!1,value:!0});Object.defineProperty(Ci.prototype,"$__deferredCalls",{enumerable:!1,writable:!1,configurable:!1,value:!0});function RK(t){let e=typeof t;if(e!=="string")throw new TypeError(`Mongoose maps only support string keys, got ${e}`);if(t.startsWith("$"))throw new Error(`Mongoose maps do not support keys that start with "$", got "${t}"`);if(t.includes("."))throw new Error(`Mongoose maps do not support keys that contain ".", got "${t}"`);if(NCe.has(t))throw new Error(`Mongoose maps do not support reserved key name "${t}"`)}FK.exports=Ci});var qK=m((C$e,$K)=>{"use strict";$K.exports=pe().UUID});var e1=m(Vs=>{"use strict";Vs.Array=dx();Vs.Buffer=I_();Vs.Document=Vs.Embedded=Jp();Vs.DocumentArray=wc();Vs.Double=BK();Vs.Decimal128=f_();Vs.ObjectId=Za();Vs.Map=mE();Vs.Subdocument=G_();Vs.UUID=qK()});var LK=m((x$e,jK)=>{"use strict";var RCe=qn(),t1=class extends RCe{},Vx=hs();Object.defineProperty(t1.prototype,"enum",Vx);Object.defineProperty(t1.prototype,"of",Vx);Object.defineProperty(t1.prototype,"castNonArrays",Vx);jK.exports=t1});var VK=m((T$e,UK)=>{"use strict";UK.exports=Wx;function Wx(t){if(!Array.isArray(t))return{min:0,max:0,containsNonArrayItem:!0};if(t.length===0)return{min:1,max:1,containsNonArrayItem:!1};if(t.length===1&&!Array.isArray(t[0]))return{min:1,max:1,containsNonArrayItem:!1};let e=Wx(t[0]);for(let r=1;r<t.length;++r){let n=Wx(t[r]);n.min<e.min&&(e.min=n.min),n.max>e.max&&(e.max=n.max),e.containsNonArrayItem=e.containsNonArrayItem||n.containsNonArrayItem}return e.min=e.min+1,e.max=e.max+1,e}});var Jh=m((D$e,zK)=>{"use strict";var WK=require("assert");zK.exports=function(e){if(e==null)return e;if(e==="")return null;if((typeof e=="string"||typeof e=="boolean")&&(e=Number(e)),WK.ok(!isNaN(e)),e instanceof Number)return e.valueOf();if(typeof e=="number")return e;if(!Array.isArray(e)&&typeof e.valueOf=="function")return Number(e.valueOf());if(e.toString&&!Array.isArray(e)&&e.toString()==Number(e))return Number(e);WK.ok(!1)}});var zx=m((M$e,KK)=>{"use strict";KK.exports=function(e){if(e==null||typeof e!="object")return e;if(Array.isArray(e))for(let r=e.length-1;r>=0;--r)e[r]===void 0&&e.splice(r,1);for(let r of Object.keys(e))e[r]===void 0&&delete e[r];return e}});var JK=m((P$e,GK)=>{"use strict";var r1=sn(),HK=eu(),yE=Jh(),FCe=zx(),$Ce=new Set(["$and","$or"]),qCe=new Set(["$cmp","$eq","$lt","$lte","$gt","$gte"]),jCe=new Set(["$multiply","$divide","$log","$mod","$trunc","$avg","$max","$min","$stdDevPop","$stdDevSamp","$sum"]),LCe=new Set(["$abs","$exp","$ceil","$floor","$ln","$log10","$sqrt","$sin","$cos","$tan","$asin","$acos","$atan","$atan2","$asinh","$acosh","$atanh","$sinh","$cosh","$tanh","$degreesToRadians","$radiansToDegrees"]),UCe=new Set(["$arrayElemAt","$first","$last"]),VCe=new Set(["$year","$month","$week","$dayOfMonth","$dayOfYear","$hour","$minute","$second","$isoDayOfWeek","$isoWeekYear","$isoWeek","$millisecond"]),WCe=new Set(["$not"]);GK.exports=function(e,r,n){if(typeof e=="boolean")return e;if(typeof e!="object"||e===null)throw new Error("`$expr` must be an object or boolean literal");return Ws(e,r,n)};function Ws(t,e,r){if(Yh(t)||t===null)return t;t.$cond!=null?Array.isArray(t.$cond)?t.$cond=t.$cond.map(s=>Ws(s,e,r)):(t.$cond.if=Ws(t.$cond.if,e,r),t.$cond.then=Ws(t.$cond.then,e,r),t.$cond.else=Ws(t.$cond.else,e,r)):t.$ifNull!=null?t.$ifNull.map(s=>Ws(s,e,r)):t.$switch!=null&&(Array.isArray(t.$switch.branches)&&(t.$switch.branches=t.$switch.branches.map(s=>Ws(s,e,r))),"default"in t.$switch&&(t.$switch.default=Ws(t.$switch.default,e,r)));let n=Object.keys(t);for(let s of n)$Ce.has(s)?t[s]=t[s].map(i=>Ws(i,e,r)):qCe.has(s)?t[s]=HCe(t[s],e,r):jCe.has(s)?t[s]=KCe(t[s],e,r):LCe.has(s)?t[s]=Kx(t[s],e,r):WCe.has(s)&&(t[s]=Ws(t[s],e,r));if(t.$in&&(t.$in=zCe(t.$in,e,r)),t.$size&&(t.$size=Kx(t.$size,e,r)),t.$round){let s=t.$round;if(!Array.isArray(s)||s.length<1||s.length>2)throw new r1("Array",s,"$round");t.$round=s.map(i=>Kx(i,e,r))}return FCe(t),t}function Kx(t){if(!gE(t))return t;try{return yE(t)}catch{throw new r1("Number",t)}}function zCe(t,e,r){let n=t[1];if(!Yh(n))return t;let s=t[0],i=e.path(n.slice(1));if(i===null){if(r===!1)return t;if(r==="throw")throw new HK("$in");return}if(!i.$isMongooseArray)throw new Error("Path must be an array for $in");return[i.embeddedSchemaType.cast(s),n]}function KCe(t){if(!Array.isArray(t)){if(!gE(t))return t;try{return yE(t)}catch{throw new r1("Number",t)}}return t.map(e=>{if(!gE(e))return e;try{return yE(e)}catch{throw new r1("Number",e)}})}function HCe(t,e,r){if(!Array.isArray(t)||t.length!==2)throw new Error("Comparison operator must be an array of length 2");t[0]=Ws(t[0],e,r);let n=t[0];if(gE(t[1])){let s=null,i=null,o=null;if(Yh(n))s=n.slice(1),i=e.path(s);else if(typeof n=="object"&&n!=null)for(let u of Object.keys(n))VCe.has(u)&&Yh(n[u])?(s=n[u].slice(1)+"."+u,o=yE):UCe.has(u)&&Yh(n[u])&&(s=n[u].slice(1)+"."+u,i=e.path(n[u].slice(1)),i!=null&&i.$isMongooseArray&&(i=i.embeddedSchemaType));let a=typeof t[1]=="object"&&t[1]!=null&&t[1].$literal!=null;if(i!=null)a?t[1]={$literal:i.cast(t[1].$literal)}:t[1]=i.cast(t[1]);else if(o!=null)if(a)try{t[1]={$literal:o(t[1].$literal)}}catch{throw new r1(o.name.replace(/^cast/,""),t[1],s+".$literal")}else try{t[1]=o(t[1])}catch{throw new r1(o.name.replace(/^cast/,""),t[1],s)}else{if(s!=null&&r===!0)return;if(s!=null&&r==="throw")throw new HK(s)}}else t[1]=Ws(t[1]);return t}function Yh(t){return typeof t=="string"&&t[0]==="$"}function gE(t){return typeof t=="string"&&t[0]==="$"?!1:typeof t=="object"&&t!==null&&Object.keys(t).find(e=>e[0]==="$")?t.$literal!=null:!0}});var _E=m((B$e,YK)=>{"use strict";var GCe=sn();YK.exports=function(e,r){if(e==null)return e;if(typeof e?._id=="string")return e._id;if(e.toString&&e.toString!==Object.prototype.toString&&!Array.isArray(e))return e.toString();throw new GCe("string",e,r)}});var eH=m((I$e,ZK)=>{"use strict";var JCe=sn(),QK=M_(),XK=_E();ZK.exports=function(e,r){if(e==null||typeof e!="object")throw new JCe("$text",e,r);return e.$search!=null&&(e.$search=XK(e.$search,r+".$search")),e.$language!=null&&(e.$language=XK(e.$language,r+".$language")),e.$caseSensitive!=null&&(e.$caseSensitive=QK(e.$caseSensitive,r+".$caseSensitive")),e.$diacriticSensitive!=null&&(e.$diacriticSensitive=QK(e.$diacriticSensitive,r+".$diacriticSensitive")),e}});var Qh=m((N$e,tH)=>{"use strict";var YCe=new Set(["$ref","$id","$db"]);tH.exports=function(e){return e[0]==="$"&&!YCe.has(e)}});var xc=m((k$e,iH)=>{"use strict";var rH=sn(),Hx=eu(),QCe=Xh(),XCe=JK(),ZCe=_E(),eve=eH(),tve=Rt(),nH=z_(),sH=Qh(),rve=require("util"),Yx=hc(),Gx=Rh(),Jx=ae(),nve=["Polygon","MultiPolygon"];iH.exports=function t(e,r,n,s){if(Array.isArray(r))throw new Error("Query filter must be an object, got an array ",rve.inspect(r));if(r==null)return r;e?.discriminators!=null&&r[e.options.discriminatorKey]!=null&&(e=nH(e,r[e.options.discriminatorKey])||e);let i=Object.keys(r),o=i.length,a,u,c,l,p,d,h;for(n=n||{};o--;)if(p=i[o],h=r[p],p==="$or"||p==="$nor"||p==="$and"){if(!Array.isArray(h))throw new rH("Array",h,p);for(let f=h.length-1;f>=0;f--){if(h[f]==null||typeof h[f]!="object")throw new rH("Object",h[f],p+"."+f);let y=Object.keys(h[f]).length,g=h[f][e.options.discriminatorKey];if(g==null)h[f]=t(e,h[f],n,s);else{let _=nH(s.schema,g);h[f]=t(_||e,h[f],n,s)}Jx.hasOwnKeys(h[f])===!1&&y!==0&&h.splice(f,1)}h.length===0&&delete r[p]}else if(p==="$where"){if(d=typeof h,d!=="string"&&d!=="function")throw new Error("Must have a string or function for $where");d==="function"&&(r[p]=h.toString());continue}else if(p==="$expr"){h=XCe(h,e);continue}else if(p==="$elemMatch")h=t(e,h,n,s);else if(p==="$text")h=eve(h,p);else if(p==="$comment"&&!Object.hasOwn(e.paths,"$comment"))h=ZCe(h,p),r[p]=h;else{if(!e)continue;if(c=e.path(p),!c){let f=p.split("."),y=f.length;for(;y--;){let g=f.slice(0,y).join("."),_=f.slice(y).join("."),S=e.path(g),O=S?.schema?.options?.discriminatorKey;if(S?.schema?.discriminators!=null&&O!=null&&_!==O){let E=tve(r,g+"."+O),A=S.schema.discriminators;typeof E=="string"&&A[E]!=null?c=A[E].path(_):E!=null&&Object.keys(E).length===1&&Array.isArray(E.$in)&&E.$in.length===1&&typeof E.$in[0]=="string"&&A[E.$in[0]]!=null&&(c=A[E.$in[0]].path(_))}}}if(c){if(h==null)continue;if(Jx.isPOJO(h))if(u=Object.keys(h).some(sH),!u)r[p]=c.castForQuery(null,h,s);else{let f=Object.keys(h),y,g=f.length;for(;g--;)if(y=f[g],l=h[y],y==="$elemMatch")l&&c?.schema!=null?t(c.schema,l,n,s):l&&c?.$isMongooseArray&&(Jx.isPOJO(l)&&l.$not!=null?t(e,l,n,s):h[y]=c.castForQuery(y,l,s));else if(y==="$not"){if(l&&c){if(a=Object.keys(l),a.length&&sH(a[0]))for(let _ in l)l[_]=c.castForQuery(_,l[_],s);else h[y]=c.castForQuery(y,l,s);continue}}else h[y]=c.castForQuery(y,l,s)}else if(Array.isArray(h)&&["Buffer","Array"].indexOf(c.instance)===-1&&!n.sanitizeFilter){let f=[],y=h;for(let g of y)f.push(c.castForQuery(null,g,s));r[p]={$in:f}}else r[p]=c.castForQuery(null,h,s)}else{let f=p.split("."),y=f.length,g,_,S;for(;y--&&(g=f.slice(0,y).join("."),c=e.path(g),!c););if(c){if(c.schema){S={},_=f.slice(y).join("."),S[_]=h;let A=t(c.schema,S,n,s)[_];A===void 0?delete r[p]:r[p]=A}else r[p]=h;continue}if(Yx(h)){let A="";if(h.$near?A="$near":h.$nearSphere?A="$nearSphere":h.$within?A="$within":h.$geoIntersects?A="$geoIntersects":h.$geoWithin&&(A="$geoWithin"),A){let x=new QCe.Number("__QueryCasting__",null,null,e),v=h[A];if(h.$maxDistance!=null&&(h.$maxDistance=x.castForQuery(null,h.$maxDistance,s)),h.$minDistance!=null&&(h.$minDistance=x.castForQuery(null,h.$minDistance,s)),A==="$within"){let R=v.$center||v.$centerSphere||v.$box||v.$polygon;if(!R)throw new Error("Bad $within parameter: "+JSON.stringify(h));v=R}else if(A==="$near"&&typeof v.type=="string"&&Array.isArray(v.coordinates))v=v.coordinates;else if((A==="$near"||A==="$nearSphere"||A==="$geoIntersects")&&v.$geometry&&typeof v.$geometry.type=="string"&&Array.isArray(v.$geometry.coordinates))v.$maxDistance!=null&&(v.$maxDistance=x.castForQuery(null,v.$maxDistance,s)),v.$minDistance!=null&&(v.$minDistance=x.castForQuery(null,v.$minDistance,s)),Gx(v.$geometry)&&(v.$geometry=v.$geometry.toObject({transform:!1,virtuals:!1})),v=v.$geometry.coordinates;else if(A==="$geoWithin")if(v.$geometry){Gx(v.$geometry)&&(v.$geometry=v.$geometry.toObject({virtuals:!1}));let R=v.$geometry.type;if(nve.indexOf(R)===-1)throw new Error('Invalid geoJSON type for $geoWithin "'+R+'", must be "Polygon" or "MultiPolygon"');v=v.$geometry.coordinates}else v=v.$box||v.$polygon||v.$center||v.$centerSphere,Gx(v)&&(v=v.toObject({virtuals:!1}));Qx(v,x,s);continue}}if(e.nested[p])continue;let O="strict"in n?n.strict:e.options.strict,E=sve(n,e._userProvidedOptions,e.options,s);if(n.upsert&&O)throw O==="throw"?new Hx(p):new Hx(p,'Path "'+p+'" is not in schema, strict mode is `true`, and upsert is `true`.');if(E==="throw")throw new Hx(p,'Path "'+p+`" is not in schema and strictQuery is 'throw'.`);E&&delete r[p]}}return r};function Qx(t,e,r){if(Array.isArray(t))t.forEach(function(n,s){if(Array.isArray(n)||Yx(n))return Qx(n,e,r);t[s]=e.castForQuery(null,n,r)});else{let n=Object.keys(t),s=n.length;for(;s--;){let i=n[s],o=t[i];Array.isArray(o)||Yx(o)?(Qx(o,e,r),t[i]=o):t[i]=e.castForQuery({val:o,context:r})}}}function sve(t,e,r,n){if("strictQuery"in t)return t.strictQuery;if("strictQuery"in e)return e.strictQuery;let s=n?.mongooseCollection?.conn?.base?.options;return s&&"strictQuery"in s?s.strictQuery:r.strictQuery}});var aH=m((R$e,oH)=>{"use strict";var ive=qn(),Tc=class extends ive{},EE=hs();Object.defineProperty(Tc.prototype,"min",EE);Object.defineProperty(Tc.prototype,"max",EE);Object.defineProperty(Tc.prototype,"enum",EE);Object.defineProperty(Tc.prototype,"populate",EE);oH.exports=Tc});var on=m((F$e,uH)=>{"use strict";uH.exports=function(e,r,n,s){return n?s?{bsonType:r}:{bsonType:[r,"null"]}:s?{type:e}:{type:[e,"null"]}}});var Zh=m(($$e,lH)=>{"use strict";var ove=sn();function ave(t){let e=this;return Array.isArray(t)?t.map(function(r){return cH(e.path,r)}):Buffer.isBuffer(t)?t:cH(e.path,t)}function cH(t,e){let r=Number(e);if(isNaN(r))throw new ove("number",e,t);return r}lH.exports=ave});var e7=m((q$e,pH)=>{"use strict";var wE=ds(),uve=aH(),Uo=kt(),cve=Jh(),lve=on(),bE=Zh(),Xx=ae(),Zx=Uo.CastError;function ft(t,e,r,n){this.enumValues=[],Uo.call(this,t,e,"Number",n)}ft.get=Uo.get;ft.set=Uo.set;ft.setters=[];ft._cast=cve;ft.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};ft._defaultCaster=t=>{if(typeof t!="number")throw new Error;return t};ft.schemaName="Number";ft.defaultOptions={};ft.prototype=Object.create(Uo.prototype);ft.prototype.constructor=ft;ft.prototype.OptionsConstructor=uve;ft._checkRequired=t=>typeof t=="number"||t instanceof Number;ft.checkRequired=Uo.checkRequired;ft.prototype.checkRequired=function(e,r){return typeof e=="object"&&Uo._isRef(this,e,r,!0)?e!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():ft.checkRequired())(e)};ft.prototype.min=function(t,e){if(this.minValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.minValidator},this)),t!=null){let r=e||wE.messages.Number.min;r=r.replace(/{MIN}/,t),this.validators.push({validator:this.minValidator=function(n){return n==null||n>=t},message:r,type:"min",min:t})}return this};ft.prototype.max=function(t,e){if(this.maxValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.maxValidator},this)),t!=null){let r=e||wE.messages.Number.max;r=r.replace(/{MAX}/,t),this.validators.push({validator:this.maxValidator=function(n){return n==null||n<=t},message:r,type:"max",max:t})}return this};ft.prototype.enum=function(t,e){if(this.enumValidator&&(this.validators=this.validators.filter(function(n){return n.validator!==this.enumValidator},this),this.enumValidator=!1),t===void 0||t===!1)return this;if(!Array.isArray(t)){if(Xx.isPOJO(t)&&t.values!=null?(e=t.message,t=t.values):typeof t=="number"&&(t=Array.prototype.slice.call(arguments),e=null),Xx.isPOJO(t)){let s=Object.keys(t).sort(),i=Object.values(t).sort();s.length===i.length&&s.every((o,a)=>o===String(i[a]))&&i.filter(o=>typeof o=="number").length===Math.floor(i.length/2)?t=i.filter(o=>typeof o=="number"):t=Object.values(t)}e=e||wE.messages.Number.enum}e=e??wE.messages.Number.enum;for(let n of t)n!==void 0&&this.enumValues.push(this.cast(n));let r=this.enumValues;return this.enumValidator=n=>n==null||r.indexOf(n)!==-1,this.validators.push({validator:this.enumValidator,message:e,type:"enum",enumValues:r}),this};ft.prototype.cast=function(t,e,r,n,s){if(typeof t!="number"&&Uo._isRef(this,t,e,r)&&(t==null||Xx.isNonBuiltinObject(t)))return this._castRef(t,e,r,s);let i=t?._id!==void 0?t._id:t,o;typeof this._castFunction=="function"?o=this._castFunction:typeof this.constructor.cast=="function"?o=this.constructor.cast():o=ft.cast();try{return o(i)}catch(a){throw new Zx("Number",i,this.path,a,this)}};function SE(t){return this.cast(t)}function pve(t){let e=this;return Array.isArray(t)?t.map(function(r){return e.cast(r)}):[this.cast(t)]}var dve={...Uo.prototype.$conditionalHandlers,$bitsAllClear:bE,$bitsAnyClear:bE,$bitsAllSet:bE,$bitsAnySet:bE,$gt:SE,$gte:SE,$lt:SE,$lte:SE,$mod:pve};Object.defineProperty(ft.prototype,"$conditionalHandlers",{enumerable:!1,value:dve});ft.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Zx("number",e,this.path,null,this);return n.call(this,e,r)}try{e=this.applySetters(e,r)}catch(s){throw s instanceof Zx&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}return e};ft.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function"||this.path==="_id";return lve("number","number",e?.useBsonType,r)};pH.exports=ft});var ef=m(t7=>{"use strict";var hve=e7();t7.castToNumber=dH;t7.castArraysOfNumbers=hH;function dH(t){return hve.cast()(t)}function hH(t,e){t.forEach(function(r,n){Array.isArray(r)?hH(r,e):t[n]=dH.call(e,r)})}});var s7=m(AE=>{"use strict";var fH=ef().castArraysOfNumbers,tf=ef().castToNumber;AE.cast$geoIntersects=yve;AE.cast$near=fve;AE.cast$within=mve;function fve(t){let e=OE();if(Array.isArray(t))return fH(t,this),t;if(n7(this,t),t?.$geometry)return r7(t,this);if(!Array.isArray(t))throw new TypeError("$near must be either an array or an object with a $geometry property");return e.prototype.castForQuery.call(this,null,t)}function r7(t,e){switch(t.$geometry.type){case"Polygon":case"LineString":case"Point":fH(t.$geometry.coordinates,e);break;default:break}return n7(e,t),t}function mve(t){if(n7(this,t),t.$box||t.$polygon){let e=t.$box?"$box":"$polygon";t[e].forEach(r=>{if(!Array.isArray(r)){let n="Invalid $within $box argument. Expected an array, received "+r;throw new TypeError(n)}r.forEach((n,s)=>{r[s]=tf.call(this,n)})})}else if(t.$center||t.$centerSphere){let e=t.$center?"$center":"$centerSphere";t[e].forEach((r,n)=>{Array.isArray(r)?r.forEach((s,i)=>{r[i]=tf.call(this,s)}):t[e][n]=tf.call(this,r)})}else t.$geometry&&r7(t,this);return t}function yve(t){if(t.$geometry)return r7(t,this),t}function n7(t,e){e.$maxDistance&&(e.$maxDistance=tf.call(t,e.$maxDistance)),e.$minDistance&&(e.$minDistance=tf.call(t,e.$minDistance))}});var OE=m((U$e,gH)=>{"use strict";var gve=P_(),_ve=K8(),yH=be(),Eve=LK(),ms=kt(),CE=ms.CastError,vE=_c(),bve=Ix(),mH=dE(),Sve=VK(),o7=xc(),wve=vt(),Ave=bn(),Ove=Qh(),xE=require("util"),su=ae(),Cve=ef().castToNumber,vve=on(),a7=s7(),xve=Us(),rf,i7,Tve=Object.freeze({});function ke(t,e,r,n,s){i7||(i7=e1().Embedded);let i="type";if(n?.typeKey&&(i=n.typeKey),this.schemaOptions=n,e){let u={};su.isPOJO(e)&&(e[i]?(u=wve(e),delete u[i],e=e[i]):e=vE),r?.ref!=null&&u.ref==null&&(u.ref=r.ref),e===Object&&(e=vE);let c=typeof e=="string"?e:su.getFunctionName(e),l=Xh(),p=Object.hasOwn(l,c)?l[c]:e;typeof p=="function"?p===ke?this.embeddedSchemaType=new p(t,u,n,null,s):this.embeddedSchemaType=new p(t,u,n,s):p instanceof ms&&(this.embeddedSchemaType=p,this.embeddedSchemaType instanceof i7||(this.embeddedSchemaType.path=t))}this.$isMongooseArray=!0,ms.call(this,t,r,"Array",s);let o,a;if(this.defaultValue!=null&&(o=this.defaultValue,a=typeof o=="function"),!("defaultValue"in this)||this.defaultValue!=null){let u=function(){return a?o.call(this):o!=null?[].concat(o):[]};u.$runBeforeSetters=!a,this.default(u)}}ke.schemaName="Array";ke.options={castNonArrays:!0};ke.defaultOptions={};ke.set=ms.set;ke.setters=[];ke.get=ms.get;ke.prototype=Object.create(ms.prototype);ke.prototype.constructor=ke;ke.prototype.OptionsConstructor=Eve;ke._checkRequired=ms.prototype.checkRequired;ke.checkRequired=ms.checkRequired;ke.prototype.virtuals=null;ke.prototype.checkRequired=function(e,r){return typeof e=="object"&&ms._isRef(this,e,r,!0)?!!e:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():ke.checkRequired())(e)};ke.prototype.enum=function(){let t=this;for(;;){let r=t?.embeddedSchemaType?.instance;if(r==="Array"){t=t.embeddedSchemaType;continue}if(r!=="String"&&r!=="Number")throw new Error("`enum` can only be set on an array of strings or numbers , not "+r);break}let e=arguments;return!Array.isArray(arguments)&&su.isObject(arguments)&&(e=su.object.vals(e)),t.embeddedSchemaType.enum.apply(t.embeddedSchemaType,e),this};ke.prototype.applyGetters=function(t,e){return e?.$__!=null&&e.$populated(this.path)?t:ms.prototype.applyGetters.call(this,t,e)};ke.prototype._applySetters=function(t,e,r,n){if(this.embeddedSchemaType.$isMongooseArray&&ke.options.castNonArrays){let s=0,i=this;for(;i!=null&&i.$isMongooseArray&&!i.$isMongooseDocumentArray;)++s,i=i.embeddedSchemaType;if(t!=null&&t.length!==0){let o=Sve(t);if(o.min===o.max&&o.max<s&&o.containsNonArrayItem)for(let a=o.max;a<s;++a)t=[t]}}return ms.prototype._applySetters.call(this,t,e,r,n)};ke.prototype.cast=function(t,e,r,n,s){rf||(rf=e1().Array);let i,o;if(Array.isArray(t)){if(!t.length&&e){let h=e.schema.indexedPaths(),f=this.path;for(i=0,o=h.length;i<o;++i){let g=h[i][0][f];if(g==="2dsphere"||g==="2d")return}let y=this.path.endsWith(".coordinates")?this.path.substring(0,this.path.lastIndexOf(".")):null;if(y!=null){for(i=0,o=h.length;i<o;++i)if(h[i][0][y]==="2dsphere")return}}s=s||Tve;let c=su.isMongooseArray(t)?t.__array:t,l=s.path||this.path;if(s.arrayPathIndex!=null&&(l+="."+s.arrayPathIndex),t=rf(c,l,e,this),c=t.__array,r&&e?.$__!=null&&e.$populated(this.path))return t;let p=this.embeddedSchemaType,d=p.$isMongooseArray;if(p&&this.embeddedSchemaType.constructor!==vE)try{let h=c.length;for(i=0;i<h;i++){let f={};d&&(s.arrayPath!=null||p._arrayParentPath!=null)&&(f.arrayPathIndex=i),s.hydratedPopulatedDocs&&(f.hydratedPopulatedDocs=s.hydratedPopulatedDocs),s.virtuals&&(f.virtuals=s.virtuals),c[i]=p.applySetters(c[i],e,r,void 0,f)}}catch(h){throw new CE("["+h.kind+"]",xE.inspect(t),this.path+"."+i,h,this)}return t}let a=this.options.castNonArrays??ke.options.castNonArrays;if(r||a)return e&&r&&e.markModified(this.path),this.cast([t],e,r);throw new CE("Array",xE.inspect(t),this.path,null,this)};ke.prototype._castForPopulate=function(e,r){if(rf||(rf=e1().Array),Array.isArray(e)){let n,s=e.__array?e.__array:e,i=s.length;if(this.embeddedSchemaType&&this.embeddedSchemaType.constructor!==vE)try{for(n=0;n<i;n++){let o={};this.embeddedSchemaType.$isMongooseArray&&this.embeddedSchemaType._arrayParentPath!=null&&(o.arrayPathIndex=n),s[n]=this.embeddedSchemaType.cast(s[n],r,!1,void 0,o)}}catch(o){throw new CE("["+o.kind+"]",xE.inspect(e),this.path+"."+n,o,this)}return e}throw new CE("Array",xE.inspect(e),this.path,null,this)};ke.prototype.$toObject=ke.prototype.toObject;ke.prototype.discriminator=function(...t){let e=this;for(;e.$isMongooseArray&&!e.$isMongooseDocumentArray;)e=e.embeddedSchemaType;if(!e.$isMongooseDocumentArray)throw new yH("You can only add an embedded discriminator on a document array, "+this.path+" is a plain array");return e.discriminator(...t)};ke.prototype.clone=function(){let t=Object.assign({},this.options),e=new this.constructor(this.path,this.embeddedSchemaType,t,this.schemaOptions,this.parentSchema);return e.validators=this.validators.slice(),this.requiredValidator!==void 0&&(e.requiredValidator=this.requiredValidator),e};ke.prototype._castForQuery=function(t,e){let r=this.embeddedSchemaType,n=r?.schema?.options?.discriminatorKey,s=r?.discriminators;if(t&&s&&typeof n=="string")if(s[t[n]])r=s[t[n]];else{let i=xve(s,t[n]);i&&(r=i)}return Array.isArray(t)?(this.setters.reverse().forEach(i=>{t=i.call(this,t,this)}),t=t.map(function(i){return su.isObject(i)&&i.$elemMatch?i:r.castForQuery(null,i,e)})):t=r.castForQuery(null,t,e),t};ke.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with Array.");return n.call(this,e,r)}else return this._castForQuery(e,r)};ke.prototype.virtual=function(e,r){if(e instanceof mH||Ave(e)==="VirtualType")return this.virtual(e.path,e.options);if(r=new bve(r),su.hasUserDefinedProperty(r,["ref","refPath"]))throw new yH("Cannot set populate virtual as a property of an array");let n=new mH(r,e);return this.virtuals===null&&(this.virtuals={}),this.virtuals[e]=n,n};function Dve(t,e){return Array.isArray(t)||(t=[t]),t=t.map(r=>{if(!su.isObject(r))return r;if(r.$elemMatch!=null)return{$elemMatch:o7(this.embeddedSchemaType.schema,r.$elemMatch,null,this?.$$context)};let n={};return n[this.path]=r,o7(this.embeddedSchemaType.schema,n,null,this?.$$context)[this.path]},this),this.castForQuery(null,t,e)}function Mve(t,e){let r=Object.keys(t),n=r.length;for(let s=0;s<n;++s){let i=r[s],o=t[i];Ove(i)&&o!=null&&(t[i]=this.castForQuery(i,o,e))}return t}var ct=ke.prototype.$conditionalHandlers={};ct.$all=Dve;ct.$options=String;ct.$elemMatch=Mve;ct.$geoIntersects=a7.cast$geoIntersects;ct.$or=u7("$or");ct.$and=u7("$and");ct.$nor=u7("$nor");function u7(t){return function(r,n){if(!Array.isArray(r))throw new TypeError("conditional "+t+" requires an array");let s=[];for(let i of r)s.push(o7(this.embeddedSchemaType.schema??n.schema,i,null,this?.$$context));return s}}ct.$near=ct.$nearSphere=a7.cast$near;ct.$within=ct.$geoWithin=a7.cast$within;ct.$size=ct.$minDistance=ct.$maxDistance=Cve;ct.$exists=gve;ct.$type=_ve;ct.$eq=ct.$gt=ct.$gte=ct.$lt=ct.$lte=ct.$not=ct.$regex=ct.$ne=ke.prototype._castForQuery;ct.$nin=ms.prototype.$conditionalHandlers.$nin;ct.$in=ms.prototype.$conditionalHandlers.$in;ke.prototype.toJSONSchema=function(e){let r=this.getEmbeddedSchemaType(),n=this.options.required&&typeof this.options.required!="function";return{...vve("array","array",e?.useBsonType,n),items:r.toJSONSchema(e)}};ke.prototype.autoEncryptionType=function(){return"array"};gH.exports=ke});var bH=m((V$e,EH)=>{"use strict";var{Long:Pve}=pe(),c7=9223372036854775807n,l7=-9223372036854775808n,_H=`Mongoose only supports BigInts between ${l7} and ${c7} because MongoDB does not support arbitrary precision integers`;EH.exports=function(e){if(e==null)return e;if(e==="")return null;if(typeof e=="bigint"){if(e>c7||e<l7)throw new Error(_H);return e}if(e instanceof Pve)return e.toBigInt();if(typeof e=="string"||typeof e=="number"){if(e=BigInt(e),e>c7||e<l7)throw new Error(_H);return e}throw new Error(`Cannot convert value to BigInt: "${e}"`)}});var AH=m((W$e,wH)=>{"use strict";var SH=sn(),n1=kt(),Bve=bH(),Ive=on();function Ft(t,e,r,n){n1.call(this,t,e,"BigInt",n)}Ft.schemaName="BigInt";Ft.defaultOptions={};Ft.prototype=Object.create(n1.prototype);Ft.prototype.constructor=Ft;Ft._cast=Bve;Ft.set=n1.set;Ft.setters=[];Ft.get=n1.get;Ft.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Ft._checkRequired=t=>t!=null;Ft.checkRequired=n1.checkRequired;Ft.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};Ft.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=Ft.cast();try{return e(t)}catch(r){throw new SH("BigInt",t,this.path,r,this)}};var Nve={...n1.prototype.$conditionalHandlers,$gt:TE,$gte:TE,$lt:TE,$lte:TE};Object.defineProperty(Ft.prototype,"$conditionalHandlers",{enumerable:!1,value:Nve});function TE(t,e){return this.castForQuery(null,t,e)}Ft.prototype.castForQuery=function(t,e,r){let n;if(t!=null)return n=this.$conditionalHandlers[t],n?n.call(this,e):this.applySetters(e,r);try{return this.applySetters(e,r)}catch(s){throw s instanceof SH&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}};Ft.prototype._castNullish=function(e){return typeof e>"u"||(typeof this.constructor.cast=="function"?this.constructor.cast():Ft.cast())==null,e};Ft.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return Ive("string","long",e?.useBsonType,r)};Ft.prototype.autoEncryptionType=function(){return"long"};wH.exports=Ft});var vH=m((z$e,CH)=>{"use strict";var OH=sn(),s1=kt(),nf=M_(),kve=on();function mt(t,e,r,n){s1.call(this,t,e,"Boolean",n)}mt.schemaName="Boolean";mt.defaultOptions={};mt.prototype=Object.create(s1.prototype);mt.prototype.constructor=mt;mt._cast=nf;mt.set=s1.set;mt.setters=[];mt.get=s1.get;mt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};mt._defaultCaster=t=>{if(t!=null&&typeof t!="boolean")throw new Error;return t};mt._checkRequired=t=>t===!0||t===!1;mt.checkRequired=s1.checkRequired;mt.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};Object.defineProperty(mt,"convertToTrue",{get:()=>nf.convertToTrue,set:t=>{nf.convertToTrue=t}});Object.defineProperty(mt,"convertToFalse",{get:()=>nf.convertToFalse,set:t=>{nf.convertToFalse=t}});mt.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=mt.cast();try{return e(t)}catch(r){throw new OH("Boolean",t,this.path,r,this)}};var Rve={...s1.prototype.$conditionalHandlers};Object.defineProperty(mt.prototype,"$conditionalHandlers",{enumerable:!1,value:Rve});mt.prototype.castForQuery=function(t,e,r){let n;if(t!=null)return n=this.$conditionalHandlers[t],n?n.call(this,e):this.applySetters(e,r);try{return this.applySetters(e,r)}catch(s){throw s instanceof OH&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}};mt.prototype._castNullish=function(e){if(typeof e>"u")return e;let r=typeof this.constructor.cast=="function"?this.constructor.cast():mt.cast();return r==null?e:r.convertToFalse instanceof Set&&r.convertToFalse.has(e)?!1:r.convertToTrue instanceof Set&&r.convertToTrue.has(e)?!0:e};mt.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return kve("boolean","bool",e?.useBsonType,r)};mt.prototype.autoEncryptionType=function(){return"bool"};CH.exports=mt});var TH=m((K$e,xH)=>{"use strict";var Fve=qn(),DE=class extends Fve{},$ve=hs();Object.defineProperty(DE.prototype,"subtype",$ve);xH.exports=DE});var PH=m((H$e,MH)=>{"use strict";var i1=I_(),qve=TH(),Vo=kt(),jve=on(),ME=Zh(),DH=ae(),p7=i1.Binary,BE=Vo.CastError;function cr(t,e,r,n){Vo.call(this,t,e,"Buffer",n)}cr.schemaName="Buffer";cr.defaultOptions={};cr.prototype=Object.create(Vo.prototype);cr.prototype.constructor=cr;cr.prototype.OptionsConstructor=qve;cr._checkRequired=t=>!!t?.length;cr.set=Vo.set;cr.setters=[];cr.get=Vo.get;cr.checkRequired=Vo.checkRequired;cr.prototype.checkRequired=function(t,e){return Vo._isRef(this,t,e,!0)?!!t:this.constructor._checkRequired(t)};cr.prototype.cast=function(t,e,r,n,s){let i;if(Vo._isRef(this,t,e,r)){if(t?.isMongooseBuffer)return t;if(Buffer.isBuffer(t))return t?.isMongooseBuffer||(t=new i1(t,[this.path,e]),this.options.subtype!=null&&(t._subtype=this.options.subtype)),t;if(t instanceof p7){if(i=new i1(t.value(!0),[this.path,e]),typeof t.sub_type!="number")throw new BE("Buffer",t,this.path,null,this);return i._subtype=t.sub_type,i}if(t==null||DH.isNonBuiltinObject(t))return this._castRef(t,e,r,s)}if(t?._id&&(t=t._id),t?.isMongooseBuffer)return t;if(Buffer.isBuffer(t))return t?.isMongooseBuffer||(t=new i1(t,[this.path,e]),this.options.subtype!=null&&(t._subtype=this.options.subtype)),t;if(t instanceof p7){if(i=new i1(t.value(!0),[this.path,e]),typeof t.sub_type!="number")throw new BE("Buffer",t,this.path,null,this);return i._subtype=t.sub_type,i}if(t===null)return t;let o=typeof t;if(o==="string"||o==="number"||Array.isArray(t)||o==="object"&&t.type==="Buffer"&&Array.isArray(t.data))return o==="number"&&(t=[t]),i=new i1(t,[this.path,e]),this.options.subtype!=null&&(i._subtype=this.options.subtype),i;if(DH.isPOJO(t)&&(t.$binary instanceof p7||typeof t.$binary=="string")){let a=this.cast(Buffer.from(t.$binary,"base64"));if(t.$type!=null)return a._subtype=t.$type,a}throw new BE("Buffer",t,this.path,null,this)};cr.prototype.subtype=function(t){return this.options.subtype=t,this};function PE(t,e){return this.castForQuery(null,t,e)}var Lve={...Vo.prototype.$conditionalHandlers,$bitsAllClear:ME,$bitsAnyClear:ME,$bitsAllSet:ME,$bitsAnySet:ME,$gt:PE,$gte:PE,$lt:PE,$lte:PE};Object.defineProperty(cr.prototype,"$conditionalHandlers",{enumerable:!1,value:Lve});cr.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with Buffer.");return n.call(this,e)}let s;try{s=this.applySetters(e,r)}catch(i){throw i instanceof BE&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}return s&&s.toObject({transform:!1,virtuals:!1})};cr.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return jve("string","binData",e?.useBsonType,r)};cr.prototype.autoEncryptionType=function(){return"binData"};MH.exports=cr});var IH=m((G$e,BH)=>{"use strict";var Uve=qn(),o1=class extends Uve{},d7=hs();Object.defineProperty(o1.prototype,"min",d7);Object.defineProperty(o1.prototype,"max",d7);Object.defineProperty(o1.prototype,"expires",d7);BH.exports=o1});var kH=m((J$e,NH)=>{"use strict";var h7=require("assert");NH.exports=function(e){if(e==null||e==="")return null;if(e instanceof Date)return h7.ok(!isNaN(e.valueOf())),e;let r;if(h7.ok(typeof e!="boolean"),e instanceof Number||typeof e=="number"?r=new Date(e):typeof e=="string"&&!isNaN(Number(e))&&(Number(e)>=275761||Number(e)<-271820)?r=new Date(Number(e)):typeof e.valueOf=="function"?r=new Date(e.valueOf()):r=new Date(e),!isNaN(r.valueOf()))return r;h7.ok(!1)}});var qH=m((Y$e,$H)=>{"use strict";var RH=ds(),Vve=IH(),iu=kt(),Wve=kH(),zve=on(),Kve=bn(),Hve=ae(),FH=iu.CastError;function lt(t,e,r,n){iu.call(this,t,e,"Date",n)}lt.schemaName="Date";lt.defaultOptions={};lt.prototype=Object.create(iu.prototype);lt.prototype.constructor=lt;lt.prototype.OptionsConstructor=Vve;lt._cast=Wve;lt.set=iu.set;lt.setters=[];lt.get=iu.get;lt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};lt._defaultCaster=t=>{if(t!=null&&!(t instanceof Date))throw new Error;return t};lt.prototype.expires=function(t){return Kve(this._index)!=="Object"&&(this._index={}),this._index.expires=t,Hve.expires(this._index),this};lt._checkRequired=t=>t instanceof Date;lt.checkRequired=iu.checkRequired;lt.prototype.checkRequired=function(t,e){return typeof t=="object"&&iu._isRef(this,t,e,!0)?t!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():lt.checkRequired())(t)};lt.prototype.min=function(t,e){if(this.minValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.minValidator},this)),t){let r=e||RH.messages.Date.min;typeof r=="string"&&(r=r.replace(/{MIN}/,t===Date.now?"Date.now()":t.toString()));let n=this;this.validators.push({validator:this.minValidator=function(s){let i=t;typeof t=="function"&&t!==Date.now&&(i=i.call(this));let o=i===Date.now?i():n.cast(i);return s===null||s.valueOf()>=o.valueOf()},message:r,type:"min",min:t})}return this};lt.prototype.max=function(t,e){if(this.maxValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.maxValidator},this)),t){let r=e||RH.messages.Date.max;typeof r=="string"&&(r=r.replace(/{MAX}/,t===Date.now?"Date.now()":t.toString()));let n=this;this.validators.push({validator:this.maxValidator=function(s){let i=t;typeof i=="function"&&i!==Date.now&&(i=i.call(this));let o=i===Date.now?i():n.cast(i);return s===null||s.valueOf()<=o.valueOf()},message:r,type:"max",max:t})}return this};lt.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=lt.cast();try{return e(t)}catch(r){throw new FH("date",t,this.path,r,this)}};function IE(t){return this.cast(t)}var Gve={...iu.prototype.$conditionalHandlers,$gt:IE,$gte:IE,$lt:IE,$lte:IE};Object.defineProperty(lt.prototype,"$conditionalHandlers",{enumerable:!1,value:Gve});lt.prototype.castForQuery=function(t,e,r){if(t==null)try{return this.applySetters(e,r)}catch(s){throw s instanceof FH&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}let n=this.$conditionalHandlers[t];if(!n)throw new Error("Can't use "+t+" with Date.");return n.call(this,e)};lt.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return zve("string","date",e?.useBsonType,r)};lt.prototype.autoEncryptionType=function(){return"date"};$H.exports=lt});var LH=m((Q$e,jH)=>{"use strict";var Dc=f_(),Jve=require("assert");jH.exports=function(e){if(e==null)return e;if(typeof e=="object"&&typeof e.$numberDecimal=="string")return Dc.fromString(e.$numberDecimal);if(e instanceof Dc)return e;if(typeof e=="string")return Dc.fromString(e);if(typeof Buffer=="function"&&Buffer.isBuffer(e))return new Dc(e);if(typeof Uint8Array=="function"&&e instanceof Uint8Array)return new Dc(e);if(typeof e=="number")return Dc.fromString(String(e));if(typeof e.valueOf=="function"&&typeof e.valueOf()=="string")return Dc.fromString(e.valueOf());Jve.ok(!1)}});var VH=m((X$e,UH)=>{"use strict";var Wo=kt(),Yve=Wo.CastError,Qve=LH(),Xve=on(),f7=$r();function zt(t,e,r,n){Wo.call(this,t,e,"Decimal128",n)}zt.schemaName="Decimal128";zt.defaultOptions={};zt.prototype=Object.create(Wo.prototype);zt.prototype.constructor=zt;zt._cast=Qve;zt.set=Wo.set;zt.setters=[];zt.get=Wo.get;zt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};zt._defaultCaster=t=>{if(t!=null&&!f7(t,"Decimal128"))throw new Error;return t};zt._checkRequired=t=>f7(t,"Decimal128");zt.checkRequired=Wo.checkRequired;zt.prototype.checkRequired=function(e,r){return Wo._isRef(this,e,r,!0)?!!e:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():zt.checkRequired())(e)};zt.prototype.cast=function(t,e,r,n,s){if(Wo._isRef(this,t,e,r))return f7(t,"Decimal128")?t:this._castRef(t,e,r,s);let i;typeof this._castFunction=="function"?i=this._castFunction:typeof this.constructor.cast=="function"?i=this.constructor.cast():i=zt.cast();try{return i(t)}catch(o){throw new Yve("Decimal128",t,this.path,o,this)}};function NE(t){return this.cast(t)}var Zve={...Wo.prototype.$conditionalHandlers,$gt:NE,$gte:NE,$lt:NE,$lte:NE};Object.defineProperty(zt.prototype,"$conditionalHandlers",{enumerable:!1,value:Zve});zt.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return Xve("string","decimal",e?.useBsonType,r)};zt.prototype.autoEncryptionType=function(){return"decimal"};UH.exports=zt});var KH=m((Z$e,zH)=>{"use strict";var e9e=qn(),sf=class extends e9e{},WH=hs();Object.defineProperty(sf.prototype,"_id",WH);Object.defineProperty(sf.prototype,"minimize",WH);zH.exports=sf});var GH=m((eqe,HH)=>{"use strict";HH.exports=function(e){e.s.hooks.pre("save",!1,async function(){if(this.$isSubdocument)return;let s=this.$getAllSubdocs({useCache:!0});if(!s.length)return;let i=this.$__.saveOptions;await Promise.all(s.map(o=>o._execDocumentPreHooks("save",i))),this.$__.saveOptions&&(this.$__.saveOptions.__subdocs=null)},null,!0),e.s.hooks.pre("save",async function(){let s=this.$__.removedSubdocs;if(!s?.length)return;let i=[];for(let o of s)i.push(o._execDocumentPreHooks("deleteOne"));await Promise.all(i)}),e.s.hooks.post("save",async function(){let s=this.$__.removedSubdocs;if(!s?.length)return;let i=[];for(let o of s)i.push(o._execDocumentPostHooks("deleteOne"));this.$__.removedSubdocs=null,await Promise.all(i)}),e.s.hooks.post("save",async function(){if(this.$isSubdocument)return;let s=this.$getAllSubdocs({useCache:!0});if(!s.length)return;let i=[];for(let o of s)i.push(o._execDocumentPostHooks("save"));await Promise.all(i)},null,!0)}});var YH=m((tqe,g7)=>{"use strict";var t9e=te().objectIdSymbol,JH=ae();g7.exports=function(e){e.post("init",function(){return y7.call(this),this}),e.pre("save",function(){m7.call(this)}),e.pre("deleteOne",{document:!0,query:!1},function(){m7.call(this)}),e.pre("updateOne",{document:!0,query:!1},function(){m7.call(this)}),e.post("save",function(){y7.call(this)})};function m7(){let t,e;if(this.$__.shardval){t=Object.keys(this.$__.shardval),e=t.length,this.$where=this.$where||{};for(let r=0;r<e;++r)this.$where[t[r]]=this.$__.shardval[t[r]]}}g7.exports.storeShard=y7;function y7(){let t=this.$__schema.options.shardKey||this.$__schema.options.shardkey;if(!JH.isPOJO(t))return;let e=this.$__.shardval={},r=Object.keys(t),n=r.length,s;for(let i=0;i<n;++i)s=this.$__getValue(r[i]),s==null?e[r[i]]=s:JH.isMongooseObject(s)?e[r[i]]=s.toObject({depopulate:!0,_isNested:!0}):s instanceof Date||s[t9e]?e[r[i]]=s:typeof s.valueOf=="function"?e[r[i]]=s.valueOf():e[r[i]]=s}});var ZH=m((rqe,XH)=>{"use strict";var a1=te().arrayAtomicsSymbol,_7=te().sessionNewDocuments,E7=ae();XH.exports=function(e){e.pre("save",function(){let n=this.$session();if(n!=null&&!(n.transaction==null||n[_7]==null)&&!n[_7].has(this)){let s={};this.isNew&&(s.isNew=!0),this.$__schema.options.versionKey&&(s.versionKey=this.get(this.$__schema.options.versionKey)),s.modifiedPaths=new Set(Object.keys(this.$__.activePaths.getStatePaths("modify"))),s.atomics=r9e(this),n[_7].set(this,s)}})};function r9e(t,e){let r=new Map;e=e||new Map;let n=Object.keys(t.$__.activePaths.init).concat(Object.keys(t.$__.activePaths.modify));for(let i of n){let o=t.$__getValue(i);if(Array.isArray(o)&&E7.isMongooseDocumentArray(o)&&o.length&&o[a1]!=null&&E7.hasOwnKeys(o[a1])){let a=e.get(i)||{};r.set(i,QH(a,o[a1]))}}let s=t.$__dirty();for(let i of s){let o=i.path,a=i.value;if(a?.[a1]!=null&&E7.hasOwnKeys(a[a1])){let u=e.get(o)||{};r.set(o,QH(u,a[a1]))}}return r}function QH(t,e){return t=t||{},e.$pullAll!=null&&(t.$pullAll=(t.$pullAll||[]).concat(e.$pullAll)),e.$push!=null&&(t.$push=t.$push||{},t.$push.$each=(t.$push.$each||[]).concat(e.$push.$each)),e.$addToSet!=null&&(t.$addToSet=(t.$addToSet||[]).concat(e.$addToSet)),e.$set!=null&&(t.$set=Array.isArray(e.$set)?[...e.$set]:Object.assign({},e.$set)),t}});var tG=m((nqe,eG)=>{"use strict";eG.exports=function(e){e.pre("save",!1,async function(s){if(this.$isSubdocument)return;let i=s&&typeof s=="object"&&"validateBeforeSave"in s,o;if(i?o=!!s.validateBeforeSave:o=this.$__schema.options.validateBeforeSave,o){let u=s&&typeof s=="object"&&"validateModifiedOnly"in s?{validateModifiedOnly:s.validateModifiedOnly}:null;await this.$validate(u).then(()=>{this.$op="save"})}},null,!0)}});var b7=m(of=>{"use strict";of.saveSubdocs=GH();of.sharding=YH();of.trackTransaction=ZH();of.validateBeforeSave=tG()});var sG=m((iqe,nG)=>{"use strict";var rG=b7();nG.exports=function(e){for(let r of Object.values(rG))r(e,{deduplicate:!0});e.plugins=Object.values(rG).map(r=>({fn:r,opts:{deduplicate:!0}})).concat(e.plugins)}});var aG=m((oqe,oG)=>{"use strict";var n9e=B_(),s9e=dc(),i9e=$r(),o9e=Za(),a9e=kt(),iG=hc();oG.exports=function t(e,r,n,s){let i=Object.keys(r),o=0,a=i.length,u;if(n=n||"",s=s||new WeakSet,!s.has(r)){for(s.add(r);o<a;)if(u=i[o++],!(!n&&(u==="discriminators"||u==="base"||u==="_applyDiscriminators"||u==="_userProvidedOptions"||u==="options"||u==="tree"))&&!(n==="tree"&&r?.instanceOfSchema)&&!s9e.has(u)&&u!=="parentSchema"){if(e[u]==null)e[u]=r[u];else if(iG(r[u])){if(iG(e[u])||(e[u]={}),r[u]!=null){if(r[u].$isSingleNested&&e[u].$isMongooseDocumentArray||r[u].$isMongooseDocumentArray&&e[u].$isSingleNested||r[u].$isMongooseDocumentArrayElement&&e[u].$isMongooseDocumentArrayElement)continue;if(r[u].instanceOfSchema){e[u].instanceOfSchema?n9e(e[u],r[u].clone(),!0):e[u]=r[u].clone();continue}else if(i9e(r[u],"ObjectId")){e[u]=new o9e(r[u]);continue}else if(r[u]instanceof a9e&&(e[u]==null&&(e[u]=r[u].clone()),!r[u].$isMongooseDocumentArray&&!r[u].$isSingleNested))continue}t(e[u],r[u],n?n+"."+u:u,s)}}r?.instanceOfSchema&&(e.tree=Object.assign({},r.tree,e.tree))}}});var kE=m((aqe,lG)=>{"use strict";var uG=_c(),u9e=sG(),c9e=vt(),l9e=V_().defineKey,p9e=Rt(),S7=ae(),d9e=aG(),cG={toJSON:!0,toObject:!0,_id:!0,id:!0,virtuals:!0,methods:!0,statics:!0};function h9e(t,e){if(t.encryptionType()==null&&e.encryptionType()==null)return;let r=s(n(t),n(e));for(let i of r){if(t._hasEncryptedField(i)&&e._hasEncryptedField(i))throw new Error(`encrypted fields cannot be declared on both the base schema and the child schema in a discriminator. path=${i}`);if(t._hasEncryptedField(i)||e._hasEncryptedField(i))throw new Error(`encrypted fields cannot have the same path as a non-encrypted field for discriminators. path=${i}`)}function n(i){return[...Object.keys(i.paths),...Object.keys(i.singleNestedPaths)]}function*s(i,o){let a=new Set(i);for(let u of o)a.has(u)&&(yield u)}}lG.exports=function(e,r,n,s,i,o,a){if(!n?.instanceOfSchema)throw new Error("You must pass a valid discriminator Schema");if(o=o??!0,e.schema.discriminatorMapping&&!e.schema.discriminatorMapping.isRoot)throw new Error('Discriminator "'+r+'" can only be a discriminator of the root model');if(i){let d=p9e(e.base,"options.applyPluginsToDiscriminators",!1)||!o;e.base._applyPlugins(n,{skipTopLevel:!d})}else o||u9e(n);let u=e.schema.options.discriminatorKey,c=e.schema.path(u);if(c!=null)S7.hasUserDefinedProperty(c.options,"select")||(c.options.select=!0),c.options.$skipDiscriminatorCheck=!0;else{let d={};d[u]={default:void 0,select:!0,$skipDiscriminatorCheck:!0},d[u][e.schema.options.typeKey]=String,e.schema.add(d),l9e({prop:u,prototype:e.prototype,options:e.schema.options})}if(n.path(u)&&n.path(u).options.$skipDiscriminatorCheck!==!0)throw new Error('Discriminator "'+r+'" cannot have field with name "'+u+'"');let l=r;(typeof s=="string"&&s.length||s!=null)&&(l=s),h9e(e.schema,n);function p(d,h){d._baseSchema=h,h.paths._id&&h.paths._id.options&&!h.paths._id.options.auto&&d.remove("_id");let f=Object.keys(h.paths),y=[];for(let v of f){if(d.nested[v]){y.push(v);continue}if(v.indexOf(".")===-1)continue;let R=v.split(".").slice(0,-1),M="";for(let I of R)M+=(M.length?".":"")+I,(d.paths[M]instanceof uG||d.singleNestedPaths[M]instanceof uG)&&y.push(v)}d.obj={...d.obj},d9e(d,h),d._gatherChildSchemas();for(let v of y)delete d.paths[v];d.childSchemas.forEach(v=>{v.model.prototype.$__setSchema(v.schema)});let g={};g[u]={default:l,select:!0,set:function(v){if(v===l||Array.isArray(l)&&S7.deepEqual(v,l))return l;throw new Error(`Can't set discriminator key "`+u+'"')},$skipDiscriminatorCheck:!0},g[u][d.options.typeKey]=c?c.options[d.options.typeKey]:String,d.add(g),d.discriminatorMapping={key:u,value:l,isRoot:!1},h.options.collection&&(d.options.collection=h.options.collection);let _=d.options.toJSON,S=d.options.toObject,O=d.options._id,E=d.options.id,A=Object.keys(d.options);d.options.discriminatorKey=h.options.discriminatorKey;let x=d._userProvidedOptions;for(let v of A)if(!cG[v]&&v in x&&!S7.deepEqual(d.options[v],h.options[v]))throw new Error("Can't customize discriminator option "+v+" (can only modify "+Object.keys(cG).join(", ")+")");d.options=c9e(h.options);for(let v of Object.keys(x))d.options[v]=x[v];_&&(d.options.toJSON=_),S&&(d.options.toObject=S),typeof O<"u"&&(d.options._id=O),d.options.id=E,o&&(d.s.hooks=e.schema.s.hooks.merge(d.s.hooks)),i&&(d.plugins=Array.prototype.slice.call(h.plugins)),d.callQueue=h.callQueue.concat(d.callQueue),delete d._requiredpaths}if(p(n,e.schema),e.discriminators||(e.discriminators={}),e.schema.discriminatorMapping||(e.schema.discriminatorMapping={key:u,value:null,isRoot:!0}),e.schema.discriminators||(e.schema.discriminators={}),e.schema.discriminators[r]=n,e.discriminators[r]&&!n.options.overwriteModels&&!a)throw new Error('Discriminator with name "'+r+'" already exists');return n}});var RE=m((uqe,pG)=>{"use strict";var f9e=Us();pG.exports=function(e,r,n){let s=e.schema.options.discriminatorKey,i=r?.[s];if(i==null&&(i=n),e.discriminators&&i!=null)if(e.discriminators[i])e=e.discriminators[i];else{let o=f9e(e.discriminators,i);o&&(e=o)}return e}});var w7=m((cqe,dG)=>{"use strict";var m9e=kx();dG.exports=function(e,r){return r?._id==null||(e=e.clone(),r._id?e.paths._id||(m9e(e),e.options._id=!0):(e.remove("_id"),e.options._id=!1)),e}});var A7=m((lqe,hG)=>{"use strict";var y9e=be(),FE=class extends y9e{constructor(e,r){let n=`Cannot create use schema for property "${e}" because the schema has the ${r} option enabled.`;super(n)}};Object.defineProperty(FE.prototype,"name",{value:"InvalidSchemaOptionError"});hG.exports=FE});var x7=m((pqe,_G)=>{"use strict";var fG=sn(),O7=require("events").EventEmitter,g9e=R_(),_9e=KH(),Mc=kt(),E9e=j_(),b9e=P_(),mG=ef().castToNumber,S9e=on(),w9e=kE(),C7=s7(),v7=RE(),A9e=w7(),O9e=bi().internalToObjectOptions,C9e=Hp(),yG=ae(),v9e=A7(),$E;_G.exports=lr;function lr(t,e,r,n){if(t.options.timeseries)throw new v9e(e,"timeseries");let s=lr.defaultOptions?._id;s!=null&&(r=r||{},r._id=s),t=A9e(t,r),this.Constructor=gG(t,null,r),this.Constructor.path=e,this.Constructor.prototype.$basePath=e,this.schema=t,this.$isSingleNested=!0,this.base=t.base,Mc.call(this,e,r,"Embedded",n)}lr.prototype=Object.create(Mc.prototype);lr.prototype.constructor=lr;lr.prototype.OptionsConstructor=_9e;function gG(t,e,r){$E||($E=G_());let n=function(o,a,u){this.$__parent=u,$E.apply(this,arguments),u!=null&&this.$session(u.$session())};t._preCompile();let s=e?.prototype??$E.prototype;n.prototype=Object.create(s),n.prototype.$__setSchema(t),n.prototype.constructor=n,n.prototype.$__schemaTypeOptions=r,n.$__required=r?.required,n.base=t.base,n.schema=t,n.$isSingleNested=!0,n.events=new O7,n.prototype.toBSON=function(){return this.toObject(O9e)};for(let i in t.methods)n.prototype[i]=t.methods[i];for(let i in t.statics)n[i]=t.statics[i];for(let i in O7.prototype)n[i]=O7.prototype[i];return n}var to={...Mc.prototype.$conditionalHandlers};to.$geoWithin=function(e,r){return{$geometry:this.castForQuery(null,e.$geometry,r)}};to.$near=to.$nearSphere=C7.cast$near;to.$within=to.$geoWithin=C7.cast$within;to.$geoIntersects=C7.cast$geoIntersects;to.$minDistance=mG;to.$maxDistance=mG;to.$exists=b9e;Object.defineProperty(lr.prototype,"$conditionalHandlers",{enumerable:!1,value:to});lr.prototype.cast=function(t,e,r,n,s){if(t?.$isSingleNested&&t.parent===e)return t;if(!r&&t!=null&&(typeof t!="object"||Array.isArray(t)))throw new g9e(this.path,t);let i=this.schema.path(this.schema.options.discriminatorKey),o=i==null?null:i.getDefault(e),a=v7(this.Constructor,t,o),u,c=e?.$__?.selected,l=this.path,p=c==null?null:Object.keys(c).reduce((d,h)=>(h.startsWith(l+".")&&(d=d||{},d[h.substring(l.length+1)]=c[h]),d),null);if(r){u=new a(void 0,p,e,{defaults:!1}),delete u.$__.defaults,s.path!=null&&(s={...s},delete s.path),u.$init(t,s);let d=C9e(p);E9e(u,p,d)}else return s=Object.assign({},s,{priorDoc:n}),yG.hasOwnKeys(t)===!1?new a({},p,e,s):new a(t,p,e,s);return u};lr.prototype.castForQuery=function(t,e,r,n){let s;if(t!=null){if(s=this.$conditionalHandlers[t],!s)throw new Error("Can't use "+t);return s.call(this,e)}if(e==null)return e;let i=v7(this.Constructor,e);if(e instanceof i)return e;this.options.runSetters&&(e=this._applySetters(e,r));let o=n?.strict??void 0;try{e=new i(e,o)}catch(a){throw a instanceof fG?a:new fG("Embedded",e,this.path,a,this)}return e};lr.prototype.doValidate=async function(e,r,n){let s=v7(this.Constructor,e);if(e&&!(e instanceof s)&&(e=new s(e,null,r?.$__!=null?r:null)),n?.skipSchemaValidators)return e?e.validate():void 0;await Mc.prototype.doValidate.call(this,e,r,n),e!=null&&await e.validate()};lr.prototype.doValidateSync=function(t,e,r){if(!r?.skipSchemaValidators){let n=Mc.prototype.doValidateSync.call(this,t,e);if(n)return n}if(t)return t.validateSync()};lr.prototype.discriminator=function(t,e,r){r=r||{};let n=yG.isPOJO(r)?r.value:r,s=typeof r.clone=="boolean"?r.clone:!0;return e.instanceOfSchema&&s&&(e=e.clone()),e=w9e(this.Constructor,t,e,n,null,null,r.overwriteExisting),this.Constructor.discriminators[t]=gG(e,this.Constructor),this.Constructor.discriminators[t]};lr.defaultOptions={};lr.set=Mc.set;lr.setters=[];lr.get=Mc.get;lr.prototype.toJSON=function(){return{path:this.path,options:this.options}};lr.prototype.clone=function(){let t=new this.constructor(this.schema,this.path,{...this.options,_skipApplyDiscriminators:!0},this.parentSchema);return t.validators=this.validators.slice(),this.requiredValidator!==void 0&&(t.requiredValidator=this.requiredValidator),t.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),t._appliedDiscriminators=this._appliedDiscriminators,t};lr.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return{...this.schema.toJSONSchema(e),...S9e("object","object",e?.useBsonType,r)}}});var T7=m((dqe,EG)=>{"use strict";var x9e=be(),af=kt(),T9e=x7(),D9e=RE();function vi(t,e,r,n){if(this.$parentSchemaType=r?.$parentSchemaType,!this.$parentSchemaType)throw new x9e("Cannot create DocumentArrayElement schematype without a parent");delete r.$parentSchemaType,af.call(this,t,r,"DocumentArrayElement",n),this.$isMongooseDocumentArrayElement=!0,this.Constructor=r?.Constructor,this.schema=e}vi.schemaName="DocumentArrayElement";vi.defaultOptions={};vi.set=af.set;vi.get=af.get;vi.prototype=Object.create(af.prototype);vi.prototype.constructor=vi;vi.prototype.cast=function(...t){return this.$parentSchemaType.cast(...t)[0]};vi.prototype.doValidate=async function(e,r,n){let s=D9e(this.Constructor,e);return e&&!(e instanceof s)&&(e=new s(e,r,null,null,n?.index??null)),T9e.prototype.doValidate.call(this,e,r,n)};vi.prototype.clone=function(){this.options.$parentSchemaType=this.$parentSchemaType;let t=af.prototype.clone.apply(this,arguments);return delete this.options.$parentSchemaType,t.Constructor=this.Constructor,t.schema=this.schema,t};EG.exports=vi});var wG=m((hqe,SG)=>{"use strict";var M9e=qn(),uf=class extends M9e{},bG=hs();Object.defineProperty(uf.prototype,"excludeIndexes",bG);Object.defineProperty(uf.prototype,"_id",bG);SG.exports=uf});var PG=m((fqe,MG)=>{"use strict";var AG=sn(),P9e=T7(),D7=require("events").EventEmitter,P7=OE(),B9e=wG(),cf=kt(),OG=xc(),CG=on(),I9e=kE(),vG=w7(),N9e=K_(),k9e=Qh(),u1=ae(),qE=RE(),R9e=A7(),xG=te().arrayAtomicsSymbol,M7=te().arrayPathSymbol,F9e=te().documentArrayParent,zo,Pc;function xt(t,e,r,n,s){if(e.options?.timeseries)throw new R9e(t,"timeseries");let i=xt.defaultOptions?._id;i!=null&&(n=n||{},n._id=i),n?._id!=null?e=vG(e,n):r?._id!=null&&(e=vG(e,r));let o=DG(e,r);o.prototype.$basePath=t,o.path=t;let a=this,u=new P9e(t+".$",e,{...n||{},$parentSchemaType:a,Constructor:o});P7.call(this,t,u,r,null,s),this.schema=e,this.schemaOptions=n||{},this.$isMongooseDocumentArray=!0,this.Constructor=o,o.base=e.base;let c=this.defaultValue;(!("defaultValue"in this)||c!=null)&&this.default(function(){let l=c.call(this);return l!=null&&!Array.isArray(l)&&(l=[l]),l})}xt.schemaName="DocumentArray";xt.options={castNonArrays:!0};xt.prototype=Object.create(P7.prototype);xt.prototype.constructor=xt;xt.prototype.OptionsConstructor=B9e;Object.defineProperty(xt.prototype,"$conditionalHandlers",{enumerable:!1,value:{...P7.prototype.$conditionalHandlers}});function DG(t,e,r){Pc||(Pc=Jp());function n(){Pc.apply(this,arguments),!(this.__parentArray==null||this.__parentArray.getArrayParent()==null)&&this.$session(this.__parentArray.getArrayParent().$session())}t._preCompile();let s=r?.prototype??Pc.prototype;n.prototype=Object.create(s),n.prototype.$__setSchema(t),n.schema=t,n.prototype.constructor=n,n.$isArraySubdocument=!0,n.events=new D7,n.base=t.base;for(let i in t.methods)n.prototype[i]=t.methods[i];for(let i in t.statics)n[i]=t.statics[i];for(let i in D7.prototype)n[i]=D7.prototype[i];return n.options=e,n}xt.prototype.discriminator=function(t,e,r){typeof t=="function"&&(t=u1.getFunctionName(t)),r=r||{};let n=u1.isPOJO(r)?r.value:r,s=typeof r.clone=="boolean"?r.clone:!0;e.instanceOfSchema&&s&&(e=e.clone()),e=I9e(this.Constructor,t,e,n,null,null,r?.overwriteExisting);let i=DG(e,null,this.Constructor);return i.baseCasterConstructor=this.Constructor,Object.defineProperty(i,"name",{value:t}),this.Constructor.discriminators[t]=i,this.Constructor.discriminators[t]};xt.prototype.doValidate=async function(e,r,n){if(zo||(zo=wc()),await cf.prototype.doValidate.call(this,e,r),n?.updateValidator)return;u1.isMongooseDocumentArray(e)||(e=new zo(e,this.path,r));let s=[];for(let i=0;i<e.length;++i){let o=e[i];if(o!=null){if(!(o instanceof Pc)){let a=qE(this.Constructor,e[i]);o=e[i]=new a(o,e,void 0,void 0,i)}n?.validateModifiedOnly&&!o.$isModified()||s.push(o.$__validate(null,n))}}await Promise.all(s)};xt.prototype.doValidateSync=function(t,e,r){let n=cf.prototype.doValidateSync.call(this,t,e);if(n!=null)return n;let s=t?.length,i=null;if(s){for(let o=0,a=s;o<a;++o){let u=t[o];if(!u)continue;if(!(u instanceof Pc)){let l=qE(this.Constructor,t[o]);u=t[o]=new l(u,t,void 0,void 0,o)}if(r?.validateModifiedOnly&&!u.$isModified())continue;let c=u.validateSync(r);c&&i==null&&(i=c)}return i}};xt.prototype.getDefault=function(t,e,r){let n=typeof this.defaultValue=="function"?this.defaultValue.call(t):this.defaultValue;if(n==null||r?.skipCast)return n;zo||(zo=wc()),Array.isArray(n)||(n=[n]),n=new zo(n,this.path,t);for(let s=0;s<n.length;++s){let i=qE(this.Constructor,n[s]),o=new i({},n,void 0,void 0,s);o.$init(n[s]),o.isNew=!0,Object.assign(o.$__.activePaths.default,o.$__.activePaths.init),o.$__.activePaths.init={},n[s]=o}return n};var $9e=Object.freeze({transform:!1,virtuals:!1}),TG=Object.freeze({skipId:!1,willInit:!0});xt.prototype.cast=function(t,e,r,n,s){if(zo||(zo=wc()),t?.[M7]!=null&&t===n)return t;let i,o;s=s||{};let a=s.path||this.path;if(!Array.isArray(t)){if(!r&&!xt.options.castNonArrays)throw new AG("DocumentArray",t,this.path,null,this);return e&&r&&e.markModified(a),this.cast([t],e,r,n,s)}(!s.skipDocumentArrayCast||u1.isMongooseDocumentArray(t))&&(t=new zo(t,a,e,this)),n!=null&&(t[xG]=n[xG]||{}),s.arrayPathIndex!=null&&(t[M7]=a+"."+s.arrayPathIndex);let u=u1.isMongooseDocumentArray(t)?t.__array:t,c=u.length;for(let l=0;l<c;++l){if(!u[l])continue;let p=qE(this.Constructor,u[l]),d=N9e(u[l],!0);if(u[l]!==d&&(u[l]=d),u[l]instanceof Pc){if(u[l][F9e]!==e||u[l].__index!=null&&u[l].__index!==l)if(r){let h=new p(null,t,TG,i,l);u[l]=h.$init(u[l])}else{let h=new p(u[l],t,void 0,void 0,l);u[l]=h}u[l].__index==null&&u[l].$setIndex(l)}else if(u[l]!=null)if(r)e?i||(i=q9e(this,e.$__.selected,r)):i=!0,o=new p(null,t,TG,i,l),s.path!=null&&(s={...s},delete s.path),u[l]=o.$init(u[l],s);else if(typeof n?.id=="function"&&(o=n.id(u[l]._id)),n&&o&&u1.deepEqual(o.toObject($9e),u[l]))o.set(u[l]),u[l]=o;else try{o=new p(u[l],t,void 0,void 0,l),u[l]=o}catch(h){throw new AG("embedded",u[l],t[M7],h,this)}}return t};xt.prototype.clone=function(){let t=Object.assign({},this.options),e=new this.constructor(this.path,this.schema,t,this.schemaOptions,this.parentSchema);return e.validators=this.validators.slice(),this.requiredValidator!==void 0&&(e.requiredValidator=this.requiredValidator),e.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),e._appliedDiscriminators=this._appliedDiscriminators,e};xt.prototype.applyGetters=function(t,e){return cf.prototype.applyGetters.call(this,t,e)};function q9e(t,e,r){if(!(r&&e))return;let n=t.path+".",s=Object.keys(e),i=s.length,o={},a,u,c;for(;i--;)if(u=s[i],u.startsWith(n)){if(c=u.substring(n.length),c==="$")continue;c.startsWith("$.")&&(c=c.substring(2)),a||(a=!0),o[c]=e[u]}return a&&o||void 0}xt.defaultOptions={};xt.set=cf.set;xt.setters=[];xt.get=cf.get;xt.prototype.$conditionalHandlers.$elemMatch=j9e;function j9e(t,e){let r=Object.keys(t),n=r.length;for(let a=0;a<n;++a){let u=r[a],c=t[u];k9e(u)&&c!=null&&(t[u]=this.castForQuery(u,c,e))}let s=this?.Constructor?.schema?.options?.discriminatorKey,i=this?.Constructor?.schema?.discriminators||{};if(s!=null&&t[s]!=null&&i[t[s]]!=null)return OG(i[t[s]],t,null,this?.$$context);let o=this.Constructor.schema??e.schema;return OG(o,t,null,this?.$$context)}xt.prototype.toJSONSchema=function(e){let r=CG("object","object",e?.useBsonType,!1),n=this.options.required&&typeof this.options.required!="function";return{...CG("array","array",e?.useBsonType,n),items:{...r,...this.schema.toJSONSchema(e)}}};MG.exports=xt});var NG=m((mqe,IG)=>{"use strict";var BG=require("assert"),B7=pe(),L9e=$r();IG.exports=function(e){if(e==null||e==="")return null;let r;if(L9e(e,"Long"))r=e.toNumber();else if(typeof e=="string")try{return r=B7.Double.fromString(e),r}catch{BG.ok(!1)}else if(typeof e=="object"){let n=e.valueOf()??e.toString();if(typeof n=="string")try{return r=B7.Double.fromString(n),r}catch{BG.ok(!1)}else r=Number(n)}else r=Number(e);return new B7.Double(r)}});var RG=m((yqe,kG)=>{"use strict";var U9e=sn(),c1=kt(),V9e=NG(),W9e=on();function Zt(t,e,r,n){c1.call(this,t,e,"Double",n)}Zt.schemaName="Double";Zt.defaultOptions={};Zt.prototype=Object.create(c1.prototype);Zt.prototype.constructor=Zt;Zt._cast=V9e;Zt.set=c1.set;Zt.setters=[];Zt.get=c1.get;Zt._defaultCaster=t=>{if(t!=null&&t._bsontype!=="Double")throw new Error;return t};Zt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Zt._checkRequired=t=>t!=null;Zt.checkRequired=c1.checkRequired;Zt.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};Zt.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=Zt.cast();try{return e(t)}catch(r){throw new U9e("Double",t,this.path,r,this)}};function jE(t){return this.cast(t)}var z9e={...c1.prototype.$conditionalHandlers,$gt:jE,$gte:jE,$lt:jE,$lte:jE};Object.defineProperty(Zt.prototype,"$conditionalHandlers",{enumerable:!1,value:z9e});Zt.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return W9e("number","double",e?.useBsonType,r)};Zt.prototype.autoEncryptionType=function(){return"double"};kG.exports=Zt});var $G=m((gqe,FG)=>{"use strict";var K9e=$r(),H9e=require("assert");FG.exports=function(e){if(e==null)return e;if(e==="")return null;let r=K9e(e,"Long")?e.toNumber():Number(e);if(r===(r|0)&&r>=-2147483648&&r<=2147483647)return r;H9e.ok(!1)}});var LG=m((_qe,jG)=>{"use strict";var qG=sn(),l1=kt(),G9e=$G(),J9e=on(),LE=Zh();function Kt(t,e,r,n){l1.call(this,t,e,"Int32",n)}Kt.schemaName="Int32";Kt.defaultOptions={};Kt.prototype=Object.create(l1.prototype);Kt.prototype.constructor=Kt;Kt._cast=G9e;Kt.set=l1.set;Kt.setters=[];Kt.get=l1.get;Kt._defaultCaster=t=>{if(t!=null&&(typeof t!="number"||t!==(t|0)||t<-2147483648||t>2147483647))throw new Error;return t};Kt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Kt._checkRequired=t=>t!=null;Kt.checkRequired=l1.checkRequired;Kt.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};Kt.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=Kt.cast();try{return e(t)}catch(r){throw new qG("Int32",t,this.path,r,this)}};var Y9e={...l1.prototype.$conditionalHandlers,$gt:UE,$gte:UE,$lt:UE,$lte:UE,$bitsAllClear:LE,$bitsAnyClear:LE,$bitsAllSet:LE,$bitsAnySet:LE};Object.defineProperty(Kt.prototype,"$conditionalHandlers",{enumerable:!1,value:Y9e});function UE(t,e){return this.castForQuery(null,t,e)}Kt.prototype.castForQuery=function(t,e,r){let n;if(t!=null)return n=this.$conditionalHandlers[t],n?n.call(this,e):this.applySetters(e,r);try{return this.applySetters(e,r)}catch(s){throw s instanceof qG&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}};Kt.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return J9e("number","int",e?.useBsonType,r)};Kt.prototype.autoEncryptionType=function(){return"int"};jG.exports=Kt});var VG=m((Eqe,UG)=>{"use strict";var Q9e=qn(),VE=class extends Q9e{},X9e=hs();Object.defineProperty(VE.prototype,"of",X9e);UG.exports=VE});var KG=m((bqe,zG)=>{"use strict";var I7=mE(),Z9e=VG(),WG=kt(),e8e=on(),t8e=be(),r8e=Oc(),p1=ae(),Bc=class extends WG{constructor(e,r,n,s){super(e,r,"Map",s),this.$isSchemaMap=!0,this._createNestedSchemaType(s,e,r,n)}set(e,r){return WG.set(e,r)}cast(e,r,n,s,i){if(e instanceof I7)return e;let o=i?.path??this.path;if(n){let a=new I7({},o,r,this.$__schemaType);if(e instanceof global.Map)for(let u of e.keys()){let c=e.get(u);c==null?c=a.$__schemaType._castNullish(c):c=a.$__schemaType.cast(c,r,!0,null,{...i,path:o+"."+u}),a.$init(u,c)}else for(let u of Object.keys(e)){let c=e[u];c==null?c=a.$__schemaType._castNullish(c):c=a.$__schemaType.cast(c,r,!0,null,{...i,path:o+"."+u}),a.$init(u,c)}return a}return new I7(e,o,r,this.$__schemaType)}clone(){let e=super.clone();return this.$__schemaType!=null&&(e.$__schemaType=this.$__schemaType.clone()),e}getEmbeddedSchemaType(){return this.$__schemaType}toJSONSchema(e){let r=e?.useBsonType,n=this.getEmbeddedSchemaType(),s=this.options.required&&typeof this.options.required!="function",i=e8e("object","object",r,s);return i.additionalProperties=n.toJSONSchema(e),i}autoEncryptionType(){return"object"}};Bc.schemaName="Map";Bc.prototype.OptionsConstructor=Z9e;Bc.defaultOptions={};Bc.prototype._createNestedSchemaType=function(e,r,n,s){let i=r+".$*",o={type:{}};p1.hasUserDefinedProperty(n,"of")&&(p1.isPOJO(n.of)&&p1.hasOwnKeys(n.of)&&!p1.hasUserDefinedProperty(n.of,e.options.typeKey)?o={[e.options.typeKey]:new r8e(n.of)}:p1.isPOJO(n.of)?o=Object.assign({},n.of):o={[e.options.typeKey]:n.of},o[e.options.typeKey]&&o[e.options.typeKey].instanceOfSchema&&o[e.options.typeKey].eachPath((c,l)=>{if(l.options.select===!0||l.options.select===!1)throw new t8e('Cannot use schema-level projections (`select: true` or `select: false`) within maps at path "'+r+"."+c+'"')}),p1.hasUserDefinedProperty(n,"ref")&&(o.ref=n.ref)),this.$__schemaType=e.interpretAsType(i,o,s)};zG.exports=Bc});var JG=m((Sqe,GG)=>{"use strict";var n8e=qn(),lf=class extends n8e{},HG=hs();Object.defineProperty(lf.prototype,"auto",HG);Object.defineProperty(lf.prototype,"populate",HG);GG.exports=lf});var XG=m((wqe,QG)=>{"use strict";var YG=$r(),N7=Za();QG.exports=function(e){if(e==null||YG(e,"ObjectId"))return e;if(e._id){if(YG(e._id,"ObjectId"))return e._id;if(e._id.toString instanceof Function)return new N7(e._id.toString())}return e.toString instanceof Function?new N7(e.toString()):new N7(e)}});var rJ=m((Aqe,tJ)=>{"use strict";var s8e=JG(),Ko=kt(),i8e=XG(),o8e=on(),a8e=bn(),R7=Za(),F7=$r(),ZG=ae(),u8e=Ko.CastError,k7;function Tt(t,e,r,n){let s=typeof t=="string"&&t.length===24&&/^[a-f0-9]+$/i.test(t),i=e?.suppressWarning;(s||typeof t>"u")&&!i&&ZG.warn("mongoose: To create a new ObjectId please try `Mongoose.Types.ObjectId` instead of using `Mongoose.Schema.Types.ObjectId`. Set the `suppressWarning` option if you're trying to create a hex char path in your schema."),Ko.call(this,t,e,"ObjectId",n)}Tt.schemaName="ObjectId";Tt.defaultOptions={};Tt.prototype=Object.create(Ko.prototype);Tt.prototype.constructor=Tt;Tt.prototype.OptionsConstructor=s8e;Tt.get=Ko.get;Tt.set=Ko.set;Tt.setters=[];Tt.prototype.auto=function(t){return t&&(this.default(eJ),this.set(l8e)),this};Tt._checkRequired=t=>F7(t,"ObjectId");Tt._cast=i8e;Tt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Tt._defaultCaster=t=>{if(!F7(t,"ObjectId"))throw new Error(t+" is not an instance of ObjectId");return t};Tt.checkRequired=Ko.checkRequired;Tt.prototype.checkRequired=function(e,r){return Ko._isRef(this,e,r,!0)?!!e:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():Tt.checkRequired())(e)};Tt.prototype.cast=function(t,e,r,n,s){if(!F7(t,"ObjectId")&&Ko._isRef(this,t,e,r)){if((a8e(t)||"").toLowerCase()==="objectid")return new R7(t.toHexString());if(t==null||ZG.isNonBuiltinObject(t))return this._castRef(t,e,r,s)}let i;typeof this._castFunction=="function"?i=this._castFunction:typeof this.constructor.cast=="function"?i=this.constructor.cast():i=Tt.cast();try{return i(t)}catch(o){throw new u8e("ObjectId",t,this.path,o,this)}};function WE(t){return this.cast(t)}var c8e={...Ko.prototype.$conditionalHandlers,$gt:WE,$gte:WE,$lt:WE,$lte:WE};Object.defineProperty(Tt.prototype,"$conditionalHandlers",{enumerable:!1,value:c8e});function eJ(){return new R7}eJ.$runBeforeSetters=!0;function l8e(t){return k7||(k7=Zi()),this instanceof k7&&t===void 0?new R7:t}Tt.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function"||this.path==="_id";return o8e("string","objectId",e?.useBsonType,r)};Tt.prototype.autoEncryptionType=function(){return"objectId"};tJ.exports=Tt});var sJ=m((Oqe,nJ)=>{"use strict";var p8e=qn(),ys=class extends p8e{},ro=hs();Object.defineProperty(ys.prototype,"enum",ro);Object.defineProperty(ys.prototype,"match",ro);Object.defineProperty(ys.prototype,"lowercase",ro);Object.defineProperty(ys.prototype,"trim",ro);Object.defineProperty(ys.prototype,"uppercase",ro);Object.defineProperty(ys.prototype,"minLength",ro);Object.defineProperty(ys.prototype,"minlength",ro);Object.defineProperty(ys.prototype,"maxLength",ro);Object.defineProperty(ys.prototype,"maxlength",ro);Object.defineProperty(ys.prototype,"populate",ro);nJ.exports=ys});var $7=m((Cqe,uJ)=>{"use strict";var Ho=kt(),df=ds(),d8e=sJ(),h8e=_E(),f8e=on(),iJ=ae(),m8e=$r(),aJ=Ho.CastError;function qe(t,e,r,n){this.enumValues=[],this.regExp=null,Ho.call(this,t,e,"String",n)}qe.schemaName="String";qe.defaultOptions={};qe.prototype=Object.create(Ho.prototype);qe.prototype.constructor=qe;Object.defineProperty(qe.prototype,"OptionsConstructor",{configurable:!1,enumerable:!1,writable:!1,value:d8e});qe._cast=h8e;qe.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};qe._defaultCaster=t=>{if(t!=null&&typeof t!="string")throw new Error;return t};qe.get=Ho.get;qe.set=Ho.set;qe.setters=[];qe._checkRequired=t=>(t instanceof String||typeof t=="string")&&t.length;qe.checkRequired=Ho.checkRequired;qe.prototype.enum=function(){if(this.enumValidator&&(this.validators=this.validators.filter(function(n){return n.validator!==this.enumValidator},this),this.enumValidator=!1),arguments[0]===void 0||arguments[0]===!1)return this;let t,e;iJ.isObject(arguments[0])?Array.isArray(arguments[0].values)?(t=arguments[0].values,e=arguments[0].message):(t=iJ.object.vals(arguments[0]),e=df.messages.String.enum):(t=arguments,e=df.messages.String.enum);for(let n of t)n!==void 0&&this.enumValues.push(this.cast(n));let r=this.enumValues;return this.enumValidator=function(n){return n==null||~r.indexOf(n)},this.validators.push({validator:this.enumValidator,message:e,type:"enum",enumValues:r}),this};qe.prototype.lowercase=function(t){return arguments.length>0&&!t?this:this.set(e=>(typeof e!="string"&&(e=this.cast(e)),e&&e.toLowerCase()))};qe.prototype.uppercase=function(t){return arguments.length>0&&!t?this:this.set(e=>(typeof e!="string"&&(e=this.cast(e)),e&&e.toUpperCase()))};qe.prototype.trim=function(t){return arguments.length>0&&!t?this:this.set(e=>(typeof e!="string"&&(e=this.cast(e)),e&&e.trim()))};qe.prototype.minlength=function(t,e){if(this.minlengthValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.minlengthValidator},this)),t!=null){let r=e||df.messages.String.minlength;r=r.replace(/{MINLENGTH}/,t),this.validators.push({validator:this.minlengthValidator=function(n){return n===null||n.length>=t},message:r,type:"minlength",minlength:t})}return this};qe.prototype.minLength=qe.prototype.minlength;qe.prototype.maxlength=function(t,e){if(this.maxlengthValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.maxlengthValidator},this)),t!=null){let r=e||df.messages.String.maxlength;r=r.replace(/{MAXLENGTH}/,t),this.validators.push({validator:this.maxlengthValidator=function(n){return n===null||n.length<=t},message:r,type:"maxlength",maxlength:t})}return this};qe.prototype.maxLength=qe.prototype.maxlength;qe.prototype.match=function(e,r){let n=r||df.messages.String.match,s=function(i){return e?(e.lastIndex=0,i!=null&&i!==""?e.test(i):!0):!1};return this.validators.push({validator:s,message:n,type:"regexp",regexp:e}),this};qe.prototype.checkRequired=function(e,r){return typeof e=="object"&&Ho._isRef(this,e,r,!0)?e!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():qe.checkRequired())(e)};qe.prototype.cast=function(t,e,r,n,s){if(typeof t!="string"&&Ho._isRef(this,t,e,r))return this._castRef(t,e,r,s);let i;typeof this._castFunction=="function"?i=this._castFunction:typeof this.constructor.cast=="function"?i=this.constructor.cast():i=qe.cast();try{return i(t)}catch{throw new aJ("string",t,this.path,null,this)}};function pf(t,e){return this.castForQuery(null,t,e)}function y8e(t,e){let r=this;return Array.isArray(t)?t.map(function(n){return r.castForQuery(null,n,e)}):[this.castForQuery(null,t,e)]}function oJ(t){return t==null?this._castNullish(t):this.cast(t,this)}var g8e={...Ho.prototype.$conditionalHandlers,$all:y8e,$gt:pf,$gte:pf,$lt:pf,$lte:pf,$options:oJ,$regex:function(e){return Object.prototype.toString.call(e)==="[object RegExp]"?e:oJ.call(this,e)},$not:pf};Object.defineProperty(qe.prototype,"$conditionalHandlers",{enumerable:!1,value:g8e});qe.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with String.");return n.call(this,e,r)}if(Object.prototype.toString.call(e)==="[object RegExp]"||m8e(e,"BSONRegExp"))return e;try{return this.applySetters(e,r)}catch(s){throw s instanceof aJ&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}};qe.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return f8e("string","string",e?.useBsonType,r)};qe.prototype.autoEncryptionType=function(){return"string"};uJ.exports=qe});var cJ=m((vqe,L7)=>{"use strict";var q7=pe().UUID,j7=/[0-9a-f]{8}-[0-9a-f]{4}-[0-9][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i;L7.exports=function(e){if(e==null||e instanceof q7)return e;if(typeof e=="string"){if(j7.test(e))return new q7(e);throw new Error(`"${e}" is not a valid UUID string`)}if(e.toString&&e.toString!==Object.prototype.toString&&j7.test(e.toString()))return new q7(e.toString());throw new Error(`"${e}" cannot be casted to a UUID`)};L7.exports.UUID_FORMAT=j7});var hJ=m((xqe,dJ)=>{"use strict";var ou=kt(),lJ=ou.CastError,pJ=cJ(),_8e=on(),E8e=ae(),zE=Zh(),b8e=pJ.UUID_FORMAT;function S8e(t){let e;return typeof t!="string"&&t!=null?(e=t.toString("hex"),e.substring(0,8)+"-"+e.substring(8,12)+"-"+e.substring(12,16)+"-"+e.substring(16,20)+"-"+e.substring(20,32)):t}function Ht(t,e,r,n){ou.call(this,t,e,"UUID",n)}Ht.schemaName="UUID";Ht.defaultOptions={};Ht.prototype=Object.create(ou.prototype);Ht.prototype.constructor=Ht;Ht._cast=pJ;Ht.get=ou.get;Ht.set=ou.set;Ht.setters=[];Ht.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Ht._checkRequired=t=>t!=null;Ht.checkRequired=ou.checkRequired;Ht.prototype.checkRequired=function(e){return Buffer.isBuffer(e)&&(e=S8e(e)),e!=null&&b8e.test(e)};Ht.prototype.cast=function(t,e,r,n,s){if(E8e.isNonBuiltinObject(t)&&ou._isRef(this,t,e,r))return this._castRef(t,e,r,s);let i;typeof this._castFunction=="function"?i=this._castFunction:typeof this.constructor.cast=="function"?i=this.constructor.cast():i=Ht.cast();try{return i(t)}catch(o){throw new lJ(Ht.schemaName,t,this.path,o,this)}};function w8e(t){return this.cast(t)}function U7(t){return t.map(e=>this.cast(e))}var A8e={...ou.prototype.$conditionalHandlers,$bitsAllClear:zE,$bitsAnyClear:zE,$bitsAllSet:zE,$bitsAnySet:zE,$all:U7,$in:U7,$ne:w8e,$nin:U7};Object.defineProperty(Ht.prototype,"$conditionalHandlers",{enumerable:!1,value:A8e});Ht.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with UUID.");return n.call(this,e,r)}try{return this.applySetters(e,r)}catch(s){throw s instanceof lJ&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}};Ht.prototype.toJSONSchema=function(e){let r=this.options.required&&typeof this.options.required!="function";return _8e("string","binData",e?.useBsonType,r)};Ht.prototype.autoEncryptionType=function(){return"binData"};dJ.exports=Ht});var mJ=m((Tqe,fJ)=>{"use strict";var O8e=qn(),KE=class extends O8e{},C8e=hs();Object.defineProperty(KE.prototype,"of",C8e);fJ.exports=KE});var gJ=m((Dqe,yJ)=>{"use strict";var v8e=mJ(),x8e=kt(),d1=Symbol("firstValue");var h1=class extends x8e{constructor(e,r,n,s){if(super(e,r,"Union",s),!Array.isArray(r?.of)||r.of.length===0)throw new Error("Union schema type requires an array of types");this.schemaTypes=r.of.map(i=>s.interpretAsType(e,i,n))}cast(e,r,n,s,i){let o=d1,a;for(let u=0;u<this.schemaTypes.length;++u)try{let c=this.schemaTypes[u].cast(e,r,n,s,i);if(c===e)return c;o===d1&&(o=c)}catch(c){a=c}if(o!==d1)return o;throw a}applySetters(e,r,n,s,i){let o=d1,a;for(let u=0;u<this.schemaTypes.length;++u)try{let c=this.schemaTypes[u]._applySetters(e,r,n,s,i);if(c==null?c=this.schemaTypes[u]._castNullish(c):c=this.schemaTypes[u].cast(c,r,n,s,i),c===e)return c;o===d1&&(o=c)}catch(c){a=c}if(o!==d1)return o;throw a}clone(){let e=super.clone();return e.schemaTypes=this.schemaTypes.map(r=>r.clone()),e}};h1.schemaName="Union";h1.defaultOptions={};h1.prototype.OptionsConstructor=v8e;yJ.exports=h1});var Xh=m(nt=>{"use strict";nt.Array=OE();nt.BigInt=AH();nt.Boolean=vH();nt.Buffer=PH();nt.Date=qH();nt.Decimal128=nt.Decimal=VH();nt.DocumentArray=PG();nt.DocumentArrayElement=T7();nt.Double=RG();nt.Int32=LG();nt.Map=KG();nt.Mixed=_c();nt.Number=e7();nt.ObjectId=rJ();nt.String=$7();nt.Subdocument=x7();nt.UUID=hJ();nt.Union=gJ();nt.Oid=nt.ObjectId;nt.Object=nt.Mixed;nt.Bool=nt.Boolean;nt.ObjectID=nt.ObjectId});var Oc=m((K7,DJ)=>{"use strict";var T8e=require("events").EventEmitter,D8e=fc(),au=be(),_J=kt(),EJ=qn(),M8e=Ix(),z7=dE(),bJ=kx(),Ur=vt(),SJ=Rt(),P8e=bn(),B8e=lK(),JE=$x(),I8e=hK(),wJ=mK(),N8e=B_(),HE=fs(),k8e=gK(),R8e=xK(),F8e=gc(),pt=ae(),$8e=DK(),q8e=/\.\d+(\.|$)/,uu,j8e=Gh().queryMiddlewareFunctions,L8e=Gh().documentMiddlewareFunctions,AJ=j8e.concat(L8e).reduce((t,e)=>t.add(e),new Set),V7=pt.isPOJO,OJ=0,U8e=/^\d+$/;function H(t,e){if(!(this instanceof H))return new H(t,e);if(this.obj=t,this.paths={},this.aliases={},this.subpaths={},this.virtuals={},this.singleNestedPaths={},this.nested={},this.inherits={},this.callQueue=[],this._indexes=[],this._searchIndexes=[],this.methods=e?.methods||{},this.methodOptions={},this.statics=e?.statics||{},this.tree={},this.query=e?.query||{},this.childSchemas=[],this.plugins=[],this.$id=++OJ,this.mapPaths=[],this.encryptedFields={},this.s={hooks:new D8e},this.options=this.defaultOptions(e),Array.isArray(t))for(let s of t)this.add(s);else t&&this.add(t);if(e?.virtuals){let s=e.virtuals,i=Object.keys(s);for(let o of i){let a=s[o].options?s[o].options:void 0,u=this.virtual(o,a);s[o].get&&u.get(s[o].get),s[o].set&&u.set(s[o].set)}}let r=t?._id&&pt.isObject(t._id);!this.paths._id&&this.options._id&&!r&&bJ(this),this.setupTimestamp(this.options.timestamps)}function CJ(t,e){for(let r of Object.keys(e)){let n=null;if(e[r]!=null)n=e[r];else{let i=SJ(t.paths[r],"options");if(i==null)continue;n=i.alias}if(!n)continue;let s=t.paths[r].path;if(Array.isArray(n)){for(let i of n){if(typeof i!="string")throw new Error("Invalid value for alias option on "+s+", got "+i);t.aliases[i]=s,t.virtual(i).get((function(o){return function(){return typeof this.get=="function"?this.get(o):this[o]}})(s)).set((function(o){return function(a){return this.$set(o,a)}})(s))}continue}if(typeof n!="string")throw new Error("Invalid value for alias option on "+s+", got "+n);t.aliases[n]=s,t.virtual(n).get((function(i){return function(){return typeof this.get=="function"?this.get(i):this[i]}})(s)).set((function(i){return function(o){return this.$set(i,o)}})(s))}}H.prototype=Object.create(T8e.prototype);H.prototype.constructor=H;H.prototype.instanceOfSchema=!0;Object.defineProperty(H.prototype,"$schemaType",{configurable:!1,enumerable:!1,writable:!0});Object.defineProperty(H.prototype,"childSchemas",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(H.prototype,"virtuals",{configurable:!1,enumerable:!0,writable:!0});H.prototype.obj;H.prototype.paths;H.prototype.tree;H.create=function(e,r){return new H(e,r)};H.prototype.clone=function(){let t=this._clone();return t.on("init",e=>this.emit("init",e)),t};H.prototype._clone=function(e){e=e||(this.base==null?H:this.base.Schema);let r=new e({},this._userProvidedOptions);r.base=this.base,r.obj=this.obj,r.options=Ur(this.options),r.callQueue=this.callQueue.map(function(n){return n}),r.methods=Ur(this.methods),r.methodOptions=Ur(this.methodOptions),r.statics=Ur(this.statics),r.query=Ur(this.query),r.plugins=Array.prototype.slice.call(this.plugins),r._indexes=Ur(this._indexes),r._searchIndexes=Ur(this._searchIndexes),r.s.hooks=this.s.hooks.clone(),r.tree=Ur(this.tree),r.paths=Object.fromEntries(Object.entries(this.paths).map(([n,s])=>[n,s.clone()])),r.nested=Ur(this.nested),r.subpaths=Ur(this.subpaths);for(let n of Object.values(r.paths))if(n.$isSingleNested){let s=n.path;for(let i of Object.keys(n.schema.paths))r.singleNestedPaths[s+"."+i]=n.schema.paths[i];for(let i of Object.keys(n.schema.singleNestedPaths))r.singleNestedPaths[s+"."+i]=n.schema.singleNestedPaths[i];for(let i of Object.keys(n.schema.subpaths))r.singleNestedPaths[s+"."+i]=n.schema.subpaths[i];for(let i of Object.keys(n.schema.nested))r.singleNestedPaths[s+"."+i]="nested"}return r._gatherChildSchemas(),r.virtuals=Ur(this.virtuals),r.$globalPluginsApplied=this.$globalPluginsApplied,r.$isRootDiscriminator=this.$isRootDiscriminator,r.$implicitlyCreated=this.$implicitlyCreated,r.$id=++OJ,r.$originalSchemaId=this.$id,r.mapPaths=[].concat(this.mapPaths),this.discriminatorMapping!=null&&(r.discriminatorMapping=Object.assign({},this.discriminatorMapping)),this.discriminators!=null&&(r.discriminators=Object.assign({},this.discriminators)),this._applyDiscriminators!=null&&(r._applyDiscriminators=new Map(this._applyDiscriminators)),r.aliases=Object.assign({},this.aliases),r.encryptedFields=Ur(this.encryptedFields),r};H.prototype.pick=function(t,e){let r=new H({},e||this.options);if(!Array.isArray(t))throw new au('Schema#pick() only accepts an array argument, got "'+typeof t+'"');for(let n of t)if(this._hasEncryptedField(n)){let s=this.encryptedFields[n],i=this.path(n);r.add({[n]:{encrypt:s,[this.options.typeKey]:i}})}else if(this.nested[n])r.add({[n]:SJ(this.tree,n)});else{let s=this.path(n);if(s==null)throw new au("Path `"+n+"` is not in the schema");r.add({[n]:s})}return this._hasEncryptedFields()||(r.options.encryptionType=null),r};H.prototype.omit=function(t,e){let r=new H(this,e||this.options);if(!Array.isArray(t))throw new au('Schema#omit() only accepts an array argument, got "'+typeof t+'"');r.remove(t);for(let n in r.singleNestedPaths)t.includes(n)&&delete r.singleNestedPaths[n];return r};H.prototype.defaultOptions=function(t){this._userProvidedOptions=t==null?{}:Ur(t);let e=this.base?.options||{},r="strict"in e?e.strict:!0,n="strictQuery"in e?e.strictQuery:!1,s="id"in e?e.id:!0;if(t={strict:r,strictQuery:n,bufferCommands:!0,capped:!1,versionKey:"__v",optimisticConcurrency:!1,minimize:!0,autoIndex:null,discriminatorKey:"__t",shardKey:null,read:null,validateBeforeSave:!0,validateModifiedOnly:!1,_id:!0,id:s,typeKey:"type",...t},t.versionKey&&typeof t.versionKey!="string")throw new au("`versionKey` must be falsy or string, got `"+typeof t.versionKey+"`");if(typeof t.read=="string"?t.read=JE(t.read):Array.isArray(t.read)&&typeof t.read[0]=="string"&&(t.read={mode:JE(t.read[0]),tags:t.read[1]}),t.optimisticConcurrency&&!t.versionKey)throw new au("Must set `versionKey` if using `optimisticConcurrency`");return t};H.prototype.discriminator=function(t,e,r){return this._applyDiscriminators=this._applyDiscriminators||new Map,this._applyDiscriminators.set(t,{schema:e,options:r}),this};H.prototype._getDocumentMiddleware=function(){return this.s.hooks.filter(e=>e.name==="updateOne"||e.name==="deleteOne"?!!e.document:e.name==="remove"||e.name==="init"?e.document==null||!!e.document:e.query!=null||e.document!=null?e.document!==!1:!0).filter(e=>this.methods[e.name]?!e.fn[F8e.builtInMiddleware]:!0)};H.prototype._defaultToObjectOptions=function(t){let e=t?"toJSON":"toObject";if(this._defaultToObjectOptionsMap&&this._defaultToObjectOptionsMap[e])return this._defaultToObjectOptionsMap[e];let r=this.base?.options?.[e]||{},n=this.options[e]||{},s=Object.assign({},r,n);return this._defaultToObjectOptionsMap=this._defaultToObjectOptionsMap||{},this._defaultToObjectOptionsMap[e]=s,s};H.prototype.encryptionType=function(t){if(arguments.length===0)return this.options.encryptionType;if(!(typeof t=="string"||t===null))throw new Error("invalid `encryptionType`: ${encryptionType}");this.options.encryptionType=t};H.prototype.add=function(e,r){if(e instanceof H||e?.instanceOfSchema)return N8e(this,e),this;if(e._id===!1&&r==null&&(this.options._id=!1),r=r||"",r==="__proto__."||r==="constructor."||r==="prototype.")return this;let n=Object.keys(e),s=this.options.typeKey;for(let o of n){if(pt.specialProperties.has(o))continue;let a=r+o,u=e[o];if(u==null)throw new TypeError("Invalid value for schema path `"+a+'`, got value "'+u+'"');if(o==="_id"&&u===!1)continue;let c=!1;if(typeof u=="string"){let l=this.base?.Schema.Types??H.Types,p=u.charAt(0).toUpperCase()+u.substring(1);c=l[p]!=null}if(o!=="_id"&&(typeof u!="object"&&typeof u!="function"&&!c||u==null))throw new TypeError(`Invalid schema configuration: \`${u}\` is not a valid type at path \`${o}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);if(u instanceof z7||(u.constructor?.name??null)==="VirtualType"){this.virtual(u);continue}if(Array.isArray(u)&&u.length===1&&u[0]==null)throw new TypeError("Invalid value for schema Array path `"+a+'`, got value "'+u[0]+'"');if(V7(u)||u instanceof EJ)if(pt.hasOwnKeys(u)===!1)r&&(this.nested[r.substring(0,r.length-1)]=!0),this.path(a,u);else if(!u[s]||s==="type"&&V7(u.type)&&u.type.type)this.nested[a]=!0,this.add(u,a+".");else{let l=u[s];if(V7(l)&&pt.hasOwnKeys(l)){r&&(this.nested[r.substring(0,r.length-1)]=!0);let p={};this._userProvidedOptions.typeKey&&(p.typeKey=this._userProvidedOptions.typeKey),this._userProvidedOptions.strict!=null&&(p.strict=this._userProvidedOptions.strict),this._userProvidedOptions.toObject!=null&&(p.toObject=pt.omit(this._userProvidedOptions.toObject,["transform"])),this._userProvidedOptions.toJSON!=null&&(p.toJSON=pt.omit(this._userProvidedOptions.toJSON,["transform"]));let d=new H(l,p);d.$implicitlyCreated=!0;let h=Object.assign({},u,{[s]:d});this.path(r+o,h)}else if(r&&(this.nested[r.substring(0,r.length-1)]=!0),this.path(r+o,u),!u?.instanceOfSchema&&pt.isPOJO(u?.discriminators)){let p=this.path(r+o);for(let d in u.discriminators)p.discriminator(d,u.discriminators[d])}}else if(r&&(this.nested[r.substring(0,r.length-1)]=!0),this.path(r+o,u),!u[0]?.instanceOfSchema&&pt.isPOJO(u[0]?.discriminators)){let l=this.path(r+o);for(let p in u[0].discriminators)l.discriminator(p,u[0].discriminators[p])}if(u.instanceOfSchema&&u.encryptionType()!=null){if(this.encryptionType()!=u.encryptionType())throw new Error("encryptionType of a nested schema must match the encryption type of the parent schema.");for(let[l,p]of Object.entries(u.encryptedFields)){let d=a+"."+l;this._addEncryptedField(d,p)}}else if(typeof u=="object"&&"encrypt"in u){let{encrypt:l}=u;if(this.encryptionType()==null)throw new Error("encryptionType must be provided");this._addEncryptedField(a,l)}else this._removeEncryptedField(a)}let i=Object.fromEntries(Object.entries(e).map(([o])=>[r+o,null]));return CJ(this,i),this};H.prototype._addEncryptedField=function(e,r){if(this.path(e).autoEncryptionType()==null)throw new Error(`Invalid BSON type for FLE field: '${e}'`);this.encryptedFields[e]=Ur(r)};H.prototype._removeEncryptedField=function(e){delete this.encryptedFields[e]};H.prototype._hasEncryptedFields=function(){return pt.hasOwnKeys(this.encryptedFields)};H.prototype._hasEncryptedField=function(e){return e in this.encryptedFields};H.prototype._buildEncryptedFields=function(){return{fields:Object.entries(this.encryptedFields).map(([e,r])=>{let n=this.path(e).autoEncryptionType();return{path:e,bsonType:n,...r}})}};H.prototype._buildSchemaMap=function(){function t(n,s,i){let o=0,a=n[o];for(;o<n.length-1;++o,a=n[o])s[a]=s[a]==null?{bsonType:"object",properties:{}}:s[a],s=s[a].properties;s[a]=i}let e=(n,[s,i])=>{let o=this.path(s).autoEncryptionType(),a=s.split("."),u={encrypt:{...i,bsonType:o}};return t(a,n,u),n};return{bsonType:"object",properties:Object.entries(this.encryptedFields).reduce(e,{})}};H.prototype.alias=function(t,e){return CJ(this,{[t]:e}),this};H.prototype.removeIndex=function(e){if(arguments.length>1)throw new Error("removeIndex() takes only 1 argument");if(typeof e!="object"&&typeof e!="string")throw new Error("removeIndex() may only take either an object or a string as an argument");if(typeof e=="object")for(let r=this._indexes.length-1;r>=0;--r)wJ(this._indexes[r][0],e)&&this._indexes.splice(r,1);else for(let r=this._indexes.length-1;r>=0;--r)this._indexes[r][1]!=null&&this._indexes[r][1].name===e&&this._indexes.splice(r,1);return this};H.prototype.clearIndexes=function(){return this._indexes.length=0,this};H.prototype.searchIndex=function(e){return this._searchIndexes.push(e),this};H.reserved=Object.create(null);H.prototype.reserved=H.reserved;var Lr=H.reserved;Lr.prototype=Lr.emit=Lr.listeners=Lr.removeListener=Lr.collection=Lr.errors=Lr.get=Lr.init=Lr.isModified=Lr.isNew=Lr.populated=Lr.remove=Lr.save=Lr.toObject=Lr.validate=1;Lr.collection=1;H.prototype.path=function(t,e){if(e===void 0){if(this.paths[t]!=null)return this.paths[t];let u=vJ(t),c=V8e(this,t,u);if(c!=null)return c;let l=xJ(this,t);return l??(c=this.hasMixedParent(u),c??(q8e.test(t)?W8e(this,t,u):void 0))}let r=t.split(".")[0];if(Lr[r]&&!this.options.suppressReservedKeysWarning){let u=`\`${r}\` is a reserved schema pathname and may break some functionality. You are allowed to use it, but use at your own risk. To disable this warning pass \`suppressReservedKeysWarning\` as a schema option.`;pt.warn(u)}typeof e=="object"&&pt.hasUserDefinedProperty(e,"ref")&&$8e(e.ref,t);let n=t.split(/\./),s=n.pop(),i=this.tree,o="";for(let u of n){if(pt.specialProperties.has(u))throw new Error("Cannot set special property `"+u+"` on a schema");if(o=o+=(o.length>0?".":"")+u,i[u]||(this.nested[o]=!0,i[u]={}),typeof i[u]!="object"){let c="Cannot set nested path `"+t+"`. Parent path `"+o+"` already set to type "+i[u].name+".";throw new Error(c)}i=i[u]}i[s]=Ur(e),this.paths[t]=this.interpretAsType(t,e,this.options);let a=this.paths[t];if(this.childSchemas=this.childSchemas.filter(u=>u.path!==t),a.$isSchemaMap){let u=t+".$*";this.paths[u]=a.$__schemaType,this.mapPaths.push(this.paths[u]),a.$__schemaType.$isSingleNested&&this.childSchemas.push({schema:a.$__schemaType.schema,model:a.$__schemaType.Constructor,path:t})}if(a.$isSingleNested){for(let u of Object.keys(a.schema.paths))this.singleNestedPaths[t+"."+u]=a.schema.paths[u];for(let u of Object.keys(a.schema.singleNestedPaths))this.singleNestedPaths[t+"."+u]=a.schema.singleNestedPaths[u];for(let u of Object.keys(a.schema.subpaths))this.singleNestedPaths[t+"."+u]=a.schema.subpaths[u];for(let u of Object.keys(a.schema.nested))this.singleNestedPaths[t+"."+u]="nested";Object.defineProperty(a.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),a.Constructor.base=this.base,this.childSchemas.push({schema:a.schema,model:a.Constructor,path:t})}else a.$isMongooseDocumentArray&&(Object.defineProperty(a.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),a.Constructor.base=this.base,this.childSchemas.push({schema:a.schema,model:a.Constructor,path:t}));if(a.$isMongooseArray&&!a.$isMongooseDocumentArray){let u=t,c=a,l=[];for(;c.$isMongooseArray;)u=u+".$",c.embeddedSchemaType._arrayPath=u,c.embeddedSchemaType._arrayParentPath=t,c=c.embeddedSchemaType,this.subpaths[u]=c;for(let p of l)this.subpaths[p.path]=p}if(a.$isMongooseDocumentArray){for(let u of Object.keys(a.schema.paths)){let c=a.schema.paths[u];this.subpaths[t+"."+u]=c,typeof c=="object"&&c!=null&&c.$parentSchemaDocArray==null&&(c.$parentSchemaDocArray=a)}for(let u of Object.keys(a.schema.subpaths)){let c=a.schema.subpaths[u];this.subpaths[t+"."+u]=c,typeof c=="object"&&c!=null&&c.$parentSchemaDocArray==null&&(c.$parentSchemaDocArray=a)}for(let u of Object.keys(a.schema.singleNestedPaths)){let c=a.schema.singleNestedPaths[u];this.subpaths[t+"."+u]=c,typeof c=="object"&&c!=null&&c.$parentSchemaDocArray==null&&(c.$parentSchemaDocArray=a)}}return this};H.prototype._gatherChildSchemas=function(){let e=[];for(let r of Object.keys(this.paths)){if(typeof r!="string")continue;let n=this.paths[r];n.$isMongooseDocumentArray||n.$isSingleNested?e.push({schema:n.schema,model:n.Constructor,path:r}):n.$isSchemaMap&&n.$__schemaType.$isSingleNested&&e.push({schema:n.$__schemaType.schema,model:n.$__schemaType.Constructor,path:r})}return this.childSchemas=e,e};function V8e(t,e,r){if(Object.hasOwn(t.paths,e))return t.paths[e];if(Object.hasOwn(t.subpaths,r)){let n=t.subpaths[r];return n==="nested"?void 0:n}if(Object.hasOwn(t.singleNestedPaths,r)&&typeof t.singleNestedPaths[r]=="object"){let n=t.singleNestedPaths[r];return n==="nested"?void 0:n}return null}function vJ(t){return/\.\d+/.test(t)?t.replace(/\.\d+\./g,".$.").replace(/\.\d+$/,".$"):t}function xJ(t,e){if(t.mapPaths.length===0)return null;for(let r of t.mapPaths){let n=r.path.replace(/\.\$\*/g,"");if(e===n||e.startsWith(n+".")&&e.slice(n.length+1).indexOf(".")===-1)return r;if(r.schema&&e.startsWith(n+".")){let s=e.slice(n.length+1);return s=s.slice(s.indexOf(".")+1),r.schema.paths[s]}else if(r.$isSchemaMap&&e.startsWith(n+".")){let s=e.slice(n.length+1);s=s.slice(s.indexOf(".")+1);let i=r.$__schemaType._presplitPath;if(s.indexOf(".")===-1&&i[i.length-1]==="$*")return r.$__schemaType;if(s.indexOf(".")!==-1&&r.$__schemaType.schema&&i[i.length-1]==="$*")return r.$__schemaType.schema.path(s.slice(s.indexOf(".")+1))}}return null}Object.defineProperty(H.prototype,"base",{configurable:!0,enumerable:!1,writable:!0,value:null});H.prototype.interpretAsType=function(t,e,r){if(e instanceof _J){if(e.path===t)return e;let u=e.clone();return u.path=t,u}let n=this.base?.Schema.Types??H.Types,s=this.base?.Types??e1();if(!pt.isPOJO(e)&&!(e instanceof EJ)&&pt.getFunctionName(e.constructor)!=="Object"){let c=e;e={},e[r.typeKey]=c}let i=e[r.typeKey]&&(e[r.typeKey]instanceof Function||r.typeKey!=="type"||!e.type.type)?e[r.typeKey]:{};if(i instanceof _J){if(i.path===t)return i;let u=i.clone();return u.path=t,u}let o;if(pt.isPOJO(i)||i==="mixed")return new n.Mixed(t,e,null,this);if(Array.isArray(i)||i===Array||i==="array"||i===n.Array){let u=i===Array||i==="array"?e.cast||e.of:i[0];if(u?.instanceOfSchema){if(!(u instanceof H))if(this.options._isMerging)u=new H(u);else throw new TypeError("Schema for array path `"+t+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${t}: new Schema(...)`);return new n.DocumentArray(t,u,e,null,this)}if(u&&u[r.typeKey]&&u[r.typeKey].instanceOfSchema){if(!(u[r.typeKey]instanceof H))if(this.options._isMerging)u[r.typeKey]=new H(u[r.typeKey]);else throw new TypeError("Schema for array path `"+t+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${t}: new Schema(...)`);return new n.DocumentArray(t,u[r.typeKey],e,u,this)}if(typeof u<"u"&&(Array.isArray(u)||u.type===Array||u.type=="Array"))return u?.type=="Array"&&(u.type=Array),new n.Array(t,this.interpretAsType(t,u,r),e,null,this);let c=u!=null&&u[r.typeKey]&&(r.typeKey!=="type"||!u.type.type)?u[r.typeKey]:u;if(typeof u=="string")u=n[u.charAt(0).toUpperCase()+u.substring(1)];else if(pt.isPOJO(c))if(pt.hasOwnKeys(c)){let l={minimize:r.minimize};r.typeKey&&(l.typeKey=r.typeKey),Object.hasOwn(r,"strict")&&(l.strict=r.strict),Object.hasOwn(r,"strictQuery")&&(l.strictQuery=r.strictQuery),Object.hasOwn(r,"toObject")&&(l.toObject=pt.omit(r.toObject,["transform"])),Object.hasOwn(r,"toJSON")&&(l.toJSON=pt.omit(r.toJSON,["transform"])),Object.hasOwn(this._userProvidedOptions,"_id")?l._id=this._userProvidedOptions._id:H.Types.DocumentArray.defaultOptions._id!=null&&(l._id=H.Types.DocumentArray.defaultOptions._id);let p=new H(c,l);return p.$implicitlyCreated=!0,new n.DocumentArray(t,p,e,null,this)}else return new n.Array(t,n.Mixed,e,null,this);if(u){if(i=u[r.typeKey]&&(r.typeKey!=="type"||!u.type.type)?u[r.typeKey]:u,Array.isArray(i))return new n.Array(t,this.interpretAsType(t,i,r),e,null,this);if(o=typeof i=="string"?i:i.schemaName||pt.getFunctionName(i),o==="ClockDate"&&(o="Date"),o===void 0)throw new TypeError(`Invalid schema configuration: Could not determine the embedded type for array \`${t}\`. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(!Object.hasOwn(n,o))throw new TypeError(`Invalid schema configuration: \`${o}\` is not a valid type within the array \`${t}\`.See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);o==="Union"&&typeof u=="object"&&(u.parentSchema=this)}return new n.Array(t,u||n.Mixed,e,r,this)}if(i?.instanceOfSchema)return new n.Subdocument(i,t,e,this);if(Buffer.isBuffer(i)?o="Buffer":typeof i=="function"||typeof i=="object"?o=i.schemaName||pt.getFunctionName(i):i===s.ObjectId?o="ObjectId":i===s.Decimal128?o="Decimal128":o=i==null?""+i:i.toString(),o&&(o=o.charAt(0).toUpperCase()+o.substring(1)),o==="ObjectID"&&(o="ObjectId"),o==="ClockDate"&&(o="Date"),o===void 0)throw new TypeError(`Invalid schema configuration: \`${t}\` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(n[o]==null)throw new TypeError(`Invalid schema configuration: \`${o}\` is not a valid type at path \`${t}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);return new n[o](t,e,r,this)};H.prototype.eachPath=function(t){let e=Object.keys(this.paths),r=e.length;for(let n=0;n<r;++n)t(e[n],this.paths[e[n]]);return this};H.prototype.requiredPaths=function(e){if(this._requiredpaths&&!e)return this._requiredpaths;let r=Object.keys(this.paths),n=r.length,s=[];for(;n--;){let i=r[n];this.paths[i].isRequired&&s.push(i)}return this._requiredpaths=s,this._requiredpaths};H.prototype.indexedPaths=function(){return this._indexedpaths?this._indexedpaths:(this._indexedpaths=this.indexes(),this._indexedpaths)};H.prototype.pathType=function(t){if(Object.hasOwn(this.paths,t))return"real";if(Object.hasOwn(this.virtuals,t))return"virtual";if(Object.hasOwn(this.nested,t))return"nested";let e=vJ(t);if(Object.hasOwn(this.subpaths,e)||Object.hasOwn(this.subpaths,t))return"real";let r=Object.hasOwn(this.singleNestedPaths,e)||Object.hasOwn(this.singleNestedPaths,t);return r?r==="nested"?"nested":"real":xJ(this,t)!=null?"real":/\.\d+\.|\.\d+$/.test(t)?TJ(this,t,e):"adhocOrUndefined"};H.prototype.hasMixedParent=function(t){let e=t.split(/\./g);t="";for(let r=0;r<e.length;++r)if(t=r>0?t+"."+e[r]:e[r],Object.hasOwn(this.paths,t)&&this.paths[t]instanceof uu.Mixed)return this.paths[t];return null};H.prototype.setupTimestamp=function(t){return R8e(this,t)};function TJ(t,e,r){let n=e.split(/\.(\d+)\.|\.(\d+)$/).filter(Boolean);if(n.length<2)return Object.hasOwn(t.paths,n[0])?t.paths[n[0]]:"adhocOrUndefined";let s=t.path(n[0]),i=!1;if(!s)return"adhocOrUndefined";let o=n.length-1;for(let a=1;a<n.length;++a){i=!1;let u=n[a];if(a===o&&s&&!/\D/.test(u)){s.$isMongooseDocumentArray||s instanceof uu.Array?s=s.embeddedSchemaType:s=void 0;break}if(!/\D/.test(u)){s instanceof uu.Array&&a!==o&&(s=s.embeddedSchemaType);continue}if(!s?.schema){s=void 0;break}i=s.schema.pathType(u)==="nested",s=s.schema.path(u)}return t.subpaths[r]=s,s?"real":i?"nested":"adhocOrUndefined"}function W8e(t,e,r){return TJ(t,e,r),t.subpaths[r]}H.prototype.queue=function(t,e){return this.callQueue.push([t,e]),this};H.prototype.pre=function(t){if(t instanceof RegExp){let e=Array.prototype.slice.call(arguments,1);for(let r of AJ)t.test(r)&&this.pre.apply(this,[r].concat(e));return this}if(Array.isArray(t)){let e=Array.prototype.slice.call(arguments,1);for(let r of t)this.pre.apply(this,[r].concat(e));return this}return this.s.hooks.pre.apply(this.s.hooks,arguments),this};H.prototype.post=function(t){if(t instanceof RegExp){let e=Array.prototype.slice.call(arguments,1);for(let r of AJ)t.test(r)&&this.post.apply(this,[r].concat(e));return this}if(Array.isArray(t)){let e=Array.prototype.slice.call(arguments,1);for(let r of t)this.post.apply(this,[r].concat(e));return this}return this.s.hooks.post.apply(this.s.hooks,arguments),this};H.prototype.plugin=function(t,e){if(typeof t!="function")throw new Error('First param to `schema.plugin()` must be a function, got "'+typeof t+'"');if(e?.deduplicate){for(let r of this.plugins)if(r.fn===t)return this}return this.plugins.push({fn:t,opts:e}),t(this,e),this};H.prototype.method=function(t,e,r){if(typeof t!="string")for(let n in t)this.methods[n]=t[n],this.methodOptions[n]=Ur(r);else this.methods[t]=e,this.methodOptions[t]=Ur(r);return this};H.prototype.static=function(t,e){if(typeof t!="string")for(let r in t)this.statics[r]=t[r];else this.statics[t]=e;return this};H.prototype.index=function(t,e){t||(t={}),e||(e={}),e.expires&&pt.expires(e);for(let r in t)this.aliases[r]&&(t=pt.renameObjKey(t,r,this.aliases[r]));for(let r of Object.keys(t))t[r]==="ascending"||t[r]==="asc"?t[r]=1:(t[r]==="descending"||t[r]==="desc")&&(t[r]=-1);for(let r of this.indexes())e.name==null&&r[1].name==null&&wJ(r[0],t)&&pt.warn(`Duplicate schema index on ${JSON.stringify(t)} found. This is often due to declaring an index using both "index: true" and "schema.index()". Please remove the duplicate index definition.`);return this._indexes.push([t,e]),this};H.prototype.set=function(t,e,r){if(arguments.length===1)return this.options[t];switch(t){case"read":typeof e=="string"?this.options[t]={mode:JE(e),tags:r}:Array.isArray(e)&&typeof e[0]=="string"?this.options[t]={mode:JE(e[0]),tags:e[1]}:this.options[t]=e,this._userProvidedOptions[t]=this.options[t];break;case"timestamps":this.setupTimestamp(e),this.options[t]=e,this._userProvidedOptions[t]=this.options[t];break;case"_id":this.options[t]=e,this._userProvidedOptions[t]=this.options[t],e&&!this.paths._id?bJ(this):!e&&this.paths._id!=null&&this.paths._id.auto&&this.remove("_id");break;default:this.options[t]=e,this._userProvidedOptions[t]=this.options[t];break}return t==="strict"&&hf(this,{strict:e}),t==="strictQuery"&&hf(this,{strictQuery:e}),t==="toObject"&&(e={...e},delete e.transform,hf(this,{toObject:e})),t==="toJSON"&&(e={...e},delete e.transform,hf(this,{toJSON:e})),this};function hf(t,e){for(let{schema:r}of t.childSchemas)r.$implicitlyCreated&&(Object.assign(r.options,e),hf(r,e))}H.prototype.get=function(t){return this.options[t]};var z8e="2d 2dsphere hashed text".split(" ");Object.defineProperty(H,"indexTypes",{get:function(){return z8e},set:function(){throw new Error("Cannot overwrite Schema.indexTypes")}});H.prototype.indexes=function(){return B8e(this)};H.prototype.virtual=function(t,e){if(t instanceof z7||P8e(t)==="VirtualType")return this.virtual(t.path,t.options);if(e=new M8e(e),pt.hasUserDefinedProperty(e,["ref","refPath"])){if(e.localField==null)throw new Error("Reference virtuals require `localField` option");if(e.foreignField==null)throw new Error("Reference virtuals require `foreignField` option");let s=this.virtual(t);s.options=e,this.pre("init",function(u,c){if(HE.has(t,u)){let l=HE.get(t,u);if(this.$$populatedVirtuals||(this.$$populatedVirtuals={}),e.justOne||e.count?this.$$populatedVirtuals[t]=Array.isArray(l)?l[0]:l:this.$$populatedVirtuals[t]=Array.isArray(l)?l:l==null?[]:[l],c?.hydratedPopulatedDocs&&!e.count){let p=s._getModelNamesForPopulate(this),d=this.$$populatedVirtuals[t];if(!Array.isArray(d)&&!d.$__&&p?.length===1){let h=this.db.model(p[0]);this.$$populatedVirtuals[t]=h.hydrate(d)}else if(Array.isArray(d)&&p?.length===1){let h=this.db.model(p[0]);for(let y=0;y<d.length;++y)d[y].$__||(d[y]=h.hydrate(d[y],null,{hydratedPopulatedDocs:!0}));let f=e.foreignField;this.$populated(t,d.map(y=>y==null?y:y.get(typeof f=="function"?f.call(y,y):f)),{populateModelSymbol:h})}}HE.unset(t,u)}}),s.set(function(a){return this.$$populatedVirtuals||(this.$$populatedVirtuals={}),k8e(this.$$populatedVirtuals,t,a,e)}),typeof e.get=="function"&&s.get(e.get);let i=t.split("."),o=i[0];for(let a=0;a<i.length-1;++a)if(this.paths[o]!=null){if(this.paths[o].$isMongooseDocumentArray||this.paths[o].$isSingleNested){let u=i.slice(a+1).join(".");this.paths[o].schema.virtual(u,e);break}else if(this.paths[o].$isSchemaMap){let u=i.slice(a+2).join(".");this.paths[o].$__schemaType.schema.virtual(u,e);break}o+="."+i[a+1]}return s}let r=this.virtuals,n=t.split(".");if(this.pathType(t)==="real")throw new Error('Virtual path "'+t+'" conflicts with a real path in the schema');if(r[t]=n.reduce(function(s,i,o){return s[i]||(s[i]=o===n.length-1?new z7(e,t):{}),s[i]},this.tree),e?.applyToArray&&n.length>1){let s=this.path(n.slice(0,-1).join("."));if(s?.$isMongooseArray)return s.virtual(n[n.length-1],e);throw new au(`Path "${s}" is not an array`)}return r[t]};H.prototype.virtualpath=function(t){return Object.hasOwn(this.virtuals,t)?this.virtuals[t]:null};H.prototype.remove=function(t){return typeof t=="string"&&(t=[t]),Array.isArray(t)&&t.forEach(function(e){if(!(this.path(e)==null&&!this.nested[e])){if(this.nested[e]){let r=Object.keys(this.paths).concat(Object.keys(this.nested));for(let n of r)n.startsWith(e+".")&&(delete this.paths[n],delete this.nested[n],W7(this,n));delete this.nested[e],W7(this,e);return}delete this.paths[e],W7(this,e),this._removeEncryptedField(e)}},this),this};function W7(t,e){let r=e.split("."),n=r.pop(),s=t.tree;for(let i of r)s=s[i];delete s[n]}H.prototype.removeVirtual=function(t){if(typeof t=="string"&&(t=[t]),Array.isArray(t)){for(let e of t)if(this.virtuals[e]==null)throw new au(`Attempting to remove virtual "${e}" that does not exist.`);for(let e of t)delete this.paths[e],delete this.virtuals[e],e.indexOf(".")!==-1?HE.unset(e,this.tree):delete this.tree[e]}return this};H.prototype.loadClass=function(t,e){return t===Object.prototype||t===Function.prototype||Object.hasOwn(t.prototype,"$isMongooseModelPrototype")||Object.hasOwn(t.prototype,"$isMongooseDocumentPrototype")?this:(this.loadClass(Object.getPrototypeOf(t),e),e||Object.getOwnPropertyNames(t).forEach(function(r){if(r.match(/^(length|name|prototype|constructor|__proto__)$/))return;let n=Object.getOwnPropertyDescriptor(t,r);Object.hasOwn(n,"value")&&this.static(r,n.value)},this),Object.getOwnPropertyNames(t.prototype).forEach(function(r){if(r.match(/^(constructor)$/))return;let n=Object.getOwnPropertyDescriptor(t.prototype,r);e||typeof n.value=="function"&&this.method(r,n.value),typeof n.get=="function"&&(this.virtuals[r]&&(this.virtuals[r].getters=[]),this.virtual(r).get(n.get)),typeof n.set=="function"&&(this.virtuals[r]&&(this.virtuals[r].setters=[]),this.virtual(r).set(n.set))},this),this)};H.prototype._getSchema=function(t){let e=this,r=e.path(t),n=[];if(r)return r.$fullPath=t,r;function s(o,a){let u=o.length+1,c,l;for(;u--;)if(l=o.slice(0,u).join("."),c=a.path(l),c){if(n.push(l),c.embeddedSchemaType||c.Constructor){if(c.embeddedSchemaType instanceof uu.Mixed)return c.embeddedSchemaType.$fullPath=n.join("."),c.embeddedSchemaType;if(u!==o.length){if(u+1===o.length&&c.embeddedSchemaType&&(o[u]==="$"||GE(o[u])))return c.embeddedSchemaType;if(c.schema){let p;return o[u]==="$"||GE(o[u])?u+1===o.length?c.embeddedSchemaType:(p=s(o.slice(u+1),c.schema),p&&(p.$parentSchemaDocArray=p.$parentSchemaDocArray||(c.schema.$isSingleNested?null:c)),p):(p=s(o.slice(u),c.schema),p&&(p.$parentSchemaDocArray=p.$parentSchemaDocArray||(c.schema.$isSingleNested?null:c)),p)}}}else if(c.$isSchemaMap){if(u>=o.length)return c;if(u+1>=o.length||c.$__schemaType instanceof uu.Mixed)return c.$__schemaType;if(c.$__schemaType.schema!=null)return s(o.slice(u+1),c.$__schemaType.schema)}return c.$fullPath=n.join("."),c}}let i=t.split(".");for(let o=0;o<i.length;++o)(i[o]==="$"||GE(i[o]))&&(i[o]="0"),U8e.test(i[o])&&(i[o]="$");return s(i,e)};H.prototype._getPathType=function(t){let e=this;if(e.path(t))return"real";function n(s,i){let o=s.length+1,a,u;for(;o--;){if(u=s.slice(0,o).join("."),a=i.path(u),a)return a.embeddedSchemaType||a.Constructor?a.embeddedSchemaType instanceof uu.Mixed?{schema:a,pathType:"mixed"}:o!==s.length&&a.schema?s[o]==="$"||GE(s[o])?o===s.length-1?{schema:a,pathType:"nested"}:n(s.slice(o+1),a.schema):n(s.slice(o),a.schema):{schema:a,pathType:a.$isSingleNested?"nested":"array"}:{schema:a,pathType:"real"};if(o===s.length&&i.nested[u])return{schema:i,pathType:"nested"}}return{schema:a||i,pathType:"undefined"}}return n(t.split("."),e)};H.prototype._transformDuplicateKeyError=function(e){if(!this._duplicateKeyErrorMessagesByPath||e.code!==11e3&&e.code!==11001)return e;if(e.keyPattern!=null){let r=e.keyPattern,n=Object.keys(r);if(n.length!==1)return e;let s=n[0];return Object.hasOwn(this._duplicateKeyErrorMessagesByPath,s)?new au(this._duplicateKeyErrorMessagesByPath[s],{cause:e}):e}return e};function GE(t){return t.startsWith("$[")&&t.endsWith("]")}H.prototype._preCompile=function(){this.plugin(I8e,{deduplicate:!0})};H.prototype.toJSONSchema=function(e){let r=e?.useBsonType??!1,n=r?{required:[],properties:{}}:{type:"object",required:[],properties:{}};for(let s of Object.keys(this.paths)){let i=this.paths[s];if(i._presplitPath.indexOf("$*")!==-1)continue;let o=i._presplitPath.length>1,a=n;if(o)for(let l=0;l<i._presplitPath.length-1;++l){let p=i._presplitPath[l];a.properties[p]==null&&(a.properties[p]=r?{bsonType:["object","null"],properties:{}}:{type:["object","null"],properties:{}}),a=a.properties[p]}let u=i._presplitPath[i._presplitPath.length-1],c=!1;s==="_id"?(a.required||(a.required=[]),a.required.push("_id"),c=!0):i.options.required&&typeof i.options.required!="function"&&(a.required||(a.required=[]),a.required.push(u),c=!0),a.properties[u]=i.toJSONSchema(e),i.options.enum&&(a.properties[u].enum=c?i.options.enum:[...i.options.enum,null])}return n.required.length===0&&delete n.required,n};DJ.exports=K7=H;H.Types=uu=Xh();K7.ObjectId=uu.ObjectId});var H7=m((Pqe,MJ)=>{"use strict";var K8e=ds(),YE=class extends K8e{constructor(e,r,n,s){let i=e.map(o=>o.message).join(", ");i.length>200&&(i=i.slice(0,200)+"..."),super(`${s} failed with ${e.length} Mongoose validation errors: ${i}`),this.validationErrors=e,this.results=r,this.rawResult=n,this.operation=s}};Object.defineProperty(YE.prototype,"name",{value:"MongooseBulkWriteError"});MJ.exports=YE});var BJ=m((Bqe,PJ)=>{"use strict";var H8e=be(),QE=class extends H8e{constructor(e,r){super(e),this.errors=r}};Object.defineProperty(QE.prototype,"name",{value:"SyncIndexesError"});PJ.exports=QE});var G7=m((Iqe,IJ)=>{"use strict";IJ.exports=function t(e,r,n,s){if(e[s])return;if(e[s]=!0,!n?.skipTopLevel){let u=null;for(let c of r){let l=c[1]==null?null:c[1].tags;if(!Array.isArray(l)){e.plugin(c[0],c[1]);continue}u=u||new Set(e.options.pluginTags||[]),l.find(p=>u.has(p))&&e.plugin(c[0],c[1])}}if(n=Object.assign({},n),delete n.skipTopLevel,n.applyPluginsToChildSchemas!==!1)for(let u of Object.keys(e.paths)){let c=e.paths[u];c.schema!=null&&(t(c.schema,r,n,s),c.Constructor.prototype.$__setSchema(c.schema))}let i=e.discriminators;if(i==null)return;let o=n.applyPluginsToDiscriminators,a=Object.keys(i);for(let u of a){let c=i[u];t(c,r,{skipTopLevel:!o},s)}}});var XE=m((Nqe,J7)=>{"use strict";var NJ=null;J7.exports.get=function(){return NJ};J7.exports.set=function(t){NJ=t}});var Y7=m((kqe,kJ)=>{"use strict";function G8e(){return{ok:1,nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[],writeErrors:[],insertedIds:[],writeConcernErrors:[]}}kJ.exports=G8e});var FJ=m((Rqe,RJ)=>{"use strict";var J8e=be(),ZE=class extends J8e{constructor(e,r){super(e),this.errors=r}};Object.defineProperty(ZE.prototype,"name",{value:"CreateCollectionsError"});RJ.exports=ZE});var jJ=m((Fqe,qJ)=>{"use strict";var $J=W_().modifiedPaths;qJ.exports=function(e){let r=Object.keys(e),n={},s={};for(let i of r){if(i.startsWith("$")){$J(e[i],"",n);continue}s[i]=e[i]}return $J(s,"",n),n}});var Q7=m(($qe,LJ)=>{"use strict";var Y8e=jJ();LJ.exports=function(e){if(e==null)return{};let r=Y8e(e);return Object.keys(r).reduce((n,s)=>{let i=s.match(/\$\[[^\]]+\]/g);if(i==null)return n;for(let o of i){let a=s.indexOf(o);if(a!==s.lastIndexOf(o))throw new Error(`Path '${s}' contains the same array filter multiple times`);n[o.substring(2,o.length-1)]=s.substring(0,a-1).replace(/\$\[[^\]]+\]/g,"0")}return n},{})}});var WJ=m((qqe,VJ)=>{"use strict";var Q8e=Hh(),UJ=Rt(),X8e=Us(),Z8e=Q7();VJ.exports=function(e,r,n,s,i){let o=s.indexOf(".")===-1?[s]:s.split("."),a=null,u="adhocOrUndefined";n=n||{},r=r||{};let c=Array.isArray(i?.arrayFilters)?i.arrayFilters:[],l=Z8e(r),p=0;for(let d=0;d<o.length;++d){let h=o.slice(p,d+1).join("."),f=Q8e(h);if(a=e.path(f),a!=null&&(u=e.pathType(f),(a.$isSingleNested||a.$isMongooseDocumentArrayElement)&&a.schema.discriminators!=null)){let y=UJ(a,"schema.options.discriminatorKey"),g=f+"."+y,_=g.replace(/\.\d+\./,"."),S=null;g in n&&(S=n[g]),_ in n&&(S=n[_]);let O=f.replace(/\.\d+$/,"");a.$isMongooseDocumentArrayElement&&UJ(n[O],"$elemMatch."+y)!=null&&(S=n[O].$elemMatch[y]);let E=h+"."+y;E in r&&(S=r[E]),g in r&&(S=r[g]);for(let R of Object.keys(l)){let M=l[R]+"."+y,I=R+"."+y;if(M===_){let j=c.find(U=>Object.hasOwn(U,I));j!=null&&(S=j[I])}}if(S==null)continue;let x=X8e(a.Constructor.discriminators,S)?.schema;if(x==null)continue;let v=o.slice(d+1).join(".");if(a=x.path(v),e=x,p=d+1,a!=null){u=x._getPathType(v);break}}}return{type:u,schematype:a}}});var KJ=m((jqe,zJ)=>{"use strict";var exe=eu();zJ.exports=function(e,r,n,s,i,o,a){if(!e?.options?.immutable)return!1;let u=e.options.immutable;if(typeof u=="function"&&(u=u.call(a,a)),!u||o?.overwriteImmutable||r===!1)return!1;if(r==="throw")throw new exe(null,`Field ${i} is immutable and strict = 'throw'`);return delete n[s],!0}});var JJ=m((Lqe,GJ)=>{"use strict";var txe=Rt();GJ.exports=function(e,r,n){if(r==null)return;let s=Object.keys(r);for(let i of s){let o=i.startsWith("$");if(i==="$set"){let a=Object.keys(r[i]);for(let u of a)HJ(e,r[i],u,r,n)}else o||HJ(e,r,i,r,n)}};function HJ(t,e,r,n,s){let i=t.path(r);if(i==null)return;let o=txe(i,"options.immutable",null);o!=null&&(typeof o=="function"&&(o=o.call(s,s)),o&&(n.$setOnInsert=n.$setOnInsert||{},n.$setOnInsert[r]=e[r],delete e[r]))}});var Z7=m((Uqe,YJ)=>{"use strict";var X7=dc();YJ.exports=function(e,r,n){if(r.indexOf(".")===-1){if(X7.has(r))return;e[r]=n;return}let s=r.split("."),i=s.pop(),o=e;for(let a of s)X7.has(a)||(o[a]==null&&(o[a]={}),o=o[a]);X7.has(i)||(o[i]=n)}});var i5=m((Vqe,sY)=>{"use strict";var eb=sn(),m1=be(),QJ=$7(),XJ=eu(),rxe=yc(),r5=Jh(),nxe=xc(),sxe=bn(),e5=Us(),t5=WJ(),ZJ=KJ(),ixe=JJ(),rY=gc().schemaMixedSymbol,oxe=Z7(),Go=ae(),{internalToObjectOptions:axe}=bi(),n5=new Set(["$currentDate","$inc","$min","$max","$mul","$rename","$set","$setOnInsert","$unset","$addToSet","$pop","$pull","$push","$pullAll","$bit"]);sY.exports=function(e,r,n,s,i){if(r==null)return;if(n=n||{},Array.isArray(r)){let p=r.length;for(let d=0;d<p;++d){let h=Object.keys(r[d]);for(let f of h)r[d][f]=uxe(f,r[d][f])}return r}if(e!=null&&i!=null&&Go.hasUserDefinedProperty(i,e.options.discriminatorKey)&&typeof i[e.options.discriminatorKey]!="object"&&e.discriminators!=null){let p=i[e.options.discriminatorKey],d=e5(s.model.discriminators,p);e=e.discriminators[p]||d?.schema||e}else if(e!=null&&n.overwriteDiscriminatorKey&&Go.hasUserDefinedProperty(r,e.options.discriminatorKey)&&e.discriminators!=null){let p=r[e.options.discriminatorKey],d=e5(s.model.discriminators,p);e=e.discriminators[p]||d?.schema||e}else if(e!=null&&n.overwriteDiscriminatorKey&&r.$set!=null&&Go.hasUserDefinedProperty(r.$set,e.options.discriminatorKey)&&e.discriminators!=null){let p=r.$set[e.options.discriminatorKey],d=e5(s.model.discriminators,p);e=e.discriminators[p]||d?.schema||e}n.upsert&&ixe(e,r,s);let o=Object.keys(r),a=o.length,u={},c,l=!1;for(i=i||{};a--;){let p=o[a];n5.has(p)?p==="$set"&&u.$set||(u[p]=r[p]):(u.$set||(r.$set?u.$set=r.$set:u.$set={}),u.$set[p]=r[p],o.splice(a,1),~o.indexOf("$set")||o.push("$set"))}for(a=o.length;a--;){let p=o[a];if(c=u[p],l=l||p.startsWith("$"),c?.$__&&(c=c.toObject(axe),u[p]=c),c&&typeof c=="object"&&!Buffer.isBuffer(c)&&n5.has(p))nY(e,c,p,n,s,i);else{let d="Invalid atomic update value for "+p+". Expected an object, received "+typeof c;throw new Error(d)}p.startsWith("$")&&Go.isEmptyObject(c)&&delete u[p]}return Go.hasOwnKeys(u)===!1&&n.upsert&&Go.hasOwnKeys(i)?{$setOnInsert:{...i}}:u};function uxe(t,e){if(t==="$unset"){if(typeof e!="string"&&(!Array.isArray(e)||e.find(r=>typeof r!="string")))throw new m1("Invalid $unset in pipeline, must be  a string or an array of strings");return e}if(t==="$project"){if(e==null||typeof e!="object")throw new m1("Invalid $project in pipeline, must be an object");return e}if(t==="$addFields"||t==="$set"){if(e==null||typeof e!="object")throw new m1("Invalid "+t+" in pipeline, must be an object");return e}else if(t==="$replaceRoot"||t==="$replaceWith"){if(e==null||typeof e!="object")throw new m1("Invalid "+t+" in pipeline, must be an object");return e}throw new m1('Invalid update pipeline operator: "'+t+'"')}function nY(t,e,r,n,s,i,o){let a=n.strict;o=o?o+".":"";let u=Object.keys(e),c=u.length,l=!1,p,d,h,f=null,y=a??t.options.strict;for(;c--;){if(d=u[c],h=e[d],r==="$pull"){if(p=t._getSchema(o+d),p==null){let _=t5(t,e,i,o+d,n);_.schematype!=null&&(p=_.schematype)}if(p?.schema!=null){e[d]=nxe(p.schema,e[d],n,s),l=!0;continue}}let g=o?o+d:d;if(t.discriminatorMapping!=null&&g===t.options.discriminatorKey&&t.discriminatorMapping.value!==e[d]&&!n.overwriteDiscriminatorKey){if(y==="throw"){let _=new Error(`Can't modify discriminator key "`+g+'" on discriminator model');f=Ic(_,s,g,f);continue}else if(y){delete e[d];continue}}if(sxe(h)==="Object"){if(p=t._getSchema(o+d),p==null){let _=t5(t,e,i,o+d,n);_.schematype!=null&&(p=_.schematype)}if(r!=="$setOnInsert"&&ZJ(p,a,e,d,o+d,n,s))continue;if(p&&(p.embeddedSchemaType||p.Constructor)&&r in s5)if("$each"in h){l=!0;try{e[d]={$each:f1(p,h.$each,r,d,s,o+d)}}catch(_){f=Ic(_,s,d,f)}h.$slice!=null&&(e[d].$slice=h.$slice|0),h.$sort&&(e[d].$sort=h.$sort),h.$position!=null&&(e[d].$position=r5(h.$position))}else{if(p?.$isSingleNested){let _=a??p.schema.options.strict;try{e[d]=p.castForQuery(null,h,s,{strict:_})}catch(S){f=Ic(S,s,d,f)}}else try{e[d]=f1(p,h,r,d,s,o+d)}catch(_){f=Ic(_,s,d,f)}if(e[d]===void 0){delete e[d];continue}l=!0}else if(r==="$currentDate"||r in s5&&p){try{e[d]=f1(p,h,r,d,s,o+d)}catch(_){f=Ic(_,s,d,f)}if(e[d]===void 0){delete e[d];continue}l=!0}else if(r==="$rename"){let _=new QJ(`${o}${d}.$rename`);try{e[d]=f1(_,h,r,d,s,o+d)}catch(S){f=Ic(S,s,d,f)}if(e[d]===void 0){delete e[d];continue}l=!0}else{let _=o+d,S=t._getPathType(_),O=a;if(S?.schema&&O==null&&(O=S.schema.options.strict),S.pathType==="undefined"){if(O==="throw")throw new XJ(_);if(O){delete e[d];continue}}l|=nY(t,h,r,n,s,i,o+d)||Go.isObject(h)&&Go.hasOwnKeys(h)===!1}}else{let _=d==="$each"||d==="$or"||d==="$and"||d==="$in";if(_&&!o)throw new m1('Invalid update: Unexpected modifier "'+d+'" as a key in operator. Did you mean something like { $addToSet: { fieldName: { $each: [...] } } }? Modifiers such as "$each", "$or", "$and", "$in" must appear under a valid field path.');let S=_?o:o+d;if(p=t._getSchema(S),r!=="$setOnInsert"&&ZJ(p,a,e,d,o+d,n,s))continue;let O=t._getPathType(S);if(p==null){let x=t5(t,e,i,S,n);x.schematype!=null&&(p=x.schematype,O=x.type)}let E=a;if(O?.schema&&a==null&&(E=O.schema.options.strict),E&&!p&&!/real|nested/.test(O.pathType)){if(E==="throw"&&t.virtuals[S]==null)throw new XJ(o+d);delete e[d]}else{if(r==="$rename"){if(e[d]==null)throw new eb("String",e[d],`${o}${d}.$rename`);let x=new QJ(`${o}${d}.$rename`,null,null,t);e[d]=x.castForQuery(null,e[d],s);continue}try{o.length===0||d.indexOf(".")===-1?e[d]=f1(p,h,r,d,s,o+d):(E!==!1||p!=null)&&(oxe(e,d,f1(p,h,r,d,s,o+d)),delete e[d])}catch(x){f=Ic(x,s,d,f)}if(Array.isArray(e[d])&&(r==="$addToSet"||r==="$push")&&d!=="$each"&&p&&p.embeddedSchemaType&&!p.embeddedSchemaType.$isMongooseArray&&!p.embeddedSchemaType[rY]&&(e[d]={$each:e[d]}),e[d]===void 0){delete e[d];continue}l=!0}}}if(f!=null)throw f;return l}function Ic(t,e,r,n){if(typeof e!="object"||!e.options.multipleCastError)throw t;return n=n||new rxe,n.addError(r,t),n}var eY={$pop:1,$inc:1},cxe={$unset:1},s5={$push:1,$addToSet:1,$set:1,$setOnInsert:1};var tY={$set:1,$setOnInsert:1};function f1(t,e,r,n,s,i){if(!t){if(r in eY)try{return r5(e)}catch{throw new eb("number",e,i)}return e}if(t.$isMongooseArray&&r in s5&&(Go.isObject(e)||Array.isArray(e))&&!tY[r]){let a=0,u=t;for(;u.$isMongooseArray;)++a,u=u.embeddedSchemaType;let c=0,l=e;for(;Array.isArray(l);)++c,l=l[0];let p=a-c;for(;c<a;)e=[e],++c;let d=t.applySetters(Array.isArray(e)?e:[e],s);for(let h=0;h<p;++h)d=d[0];return d}if(r in cxe)return e;if(r in eY){if(e==null)throw new eb("number",e,t.path);if(r==="$inc")return t.castForQuery(null,e,s);try{return r5(e)}catch{throw new eb("number",e,t.path)}}if(r==="$currentDate")return typeof e=="object"?{$type:e.$type}:!!e;if(n5.has(n))return t.castForQuery(n,e,s);if(tY[r]){let a=e!=null&&t.$isMongooseArray&&t.$fullPath!=null&&!t.$fullPath.match(/\d+$/),u=t[rY]!=null;return a||u?t.applySetters(e,s):t.castForQuery(null,e,s)}return t.castForQuery(null,e,s)}});var o5=m((Wqe,iY)=>{"use strict";iY.exports=function(e,r,n){!n||!r?.upsert||(r.overwrite?ff(e,n)||(e[n]=0):!ff(e,n)&&!ff(e?.$set,n)&&!ff(e?.$inc,n)&&!ff(e?.$setOnInsert,n)&&(e.$setOnInsert||(e.$setOnInsert={}),e.$setOnInsert[n]=0))};function ff(t,e){return t==null||typeof t!="object"?!1:Object.hasOwn(t,e)}});var a5=m((zqe,aY)=>{"use strict";var lxe=Rt();aY.exports=function(t,e,r,n){n=n||{};let s=n.setDefaultsOnInsert??e.base.options.setDefaultsOnInsert;if(!n.upsert||s===!1)return r;let i=Object.keys(r||{}),o={},a={},u=i.length,c=!1;for(let d=0;d<u;++d)if(i[d].charAt(0)==="$"){c=!0;break}let l=Object.keys(t),p=l.length;for(let d=0;d<p;++d){let h=l[d],f=t[h];if(f&&typeof f=="object"){let y=Object.keys(f),g=y.length,_=!1;for(let S=0;S<g;++S)if(y[S].charAt(0)==="$"){_=!0;break}if(_)continue}o[h]=!0}return n?.overwrite&&!c||e.eachPath(function(d,h){if(h.path==="_id"&&h.options.auto)return;let f=h.getDefault(null,!0);if(typeof f>"u")return;let y=h.splitPath();y.includes("$*")||pxe(r,o,d,y,c)||(r=r||{},r.$setOnInsert=r.$setOnInsert||{},lxe(r,d)==null&&(r.$setOnInsert[d]=f),a[d]=f)}),r};function pxe(t,e,r,n,s){if(e[r])return!0;let i=n[0];for(let o=1;o<n.length;++o){if(e[i])return!0;i+="."+n[o]}if(s){for(let o in t)if(o.charAt(0)==="$"&&oY(t[o],r,n))return!0}else if(oY(t,r,n))return!0;return!1}function oY(t,e,r){if(t==null||typeof t!="object")return!1;if(Object.hasOwn(t,e))return!0;let n=r[0];for(let i=1;i<r.length;++i){if(Object.hasOwn(t,n))return!0;n+="."+r[i]}let s=e+".";for(let i in t)if(i.startsWith(s))return!0;return!1}});var u5=m((Kqe,Gt)=>{"use strict";var dxe=be(),hxe=Us(),uY=jx(),cY=Lx(),mf=xc(),lY=i5(),fxe=vt(),pY=o5(),{inspect:mxe}=require("util"),dY=a5();Gt.exports=function(e,r,n){let s,i=e.schema.get("timestamps");return typeof i?.currentTime=="function"?s=i.currentTime():s=e.base.now(),r.insertOne?o=>Gt.exports.castInsertOne(e,r.insertOne,n).then(()=>o(null),a=>o(a)):r.updateOne?o=>{try{Gt.exports.castUpdateOne(e,r.updateOne,n,s),o(null)}catch(a){o(a)}}:r.updateMany?o=>{try{Gt.exports.castUpdateMany(e,r.updateMany,n,s),o(null)}catch(a){o(a)}}:r.replaceOne?o=>{Gt.exports.castReplaceOne(e,r.replaceOne,n).then(()=>o(null),a=>o(a))}:r.deleteOne?o=>{try{Gt.exports.castDeleteOne(e,r.deleteOne),o(null)}catch(a){o(a)}}:r.deleteMany?o=>{try{Gt.exports.castDeleteMany(e,r.deleteMany),o(null)}catch(a){o(a)}}:o=>{let a=new dxe(`Invalid op passed to \`bulkWrite()\`: ${mxe(r)}`);o(a,null)}};Gt.exports.castInsertOne=async function(e,r,n){let s=y1(e,r.document),i=new s(r.document);s.schema.options.timestamps&&tb(r,n)&&i.initializeTimestamps(),n.session!=null&&i.$session(n.session);let o=s?.schema?.options?.versionKey;return o&&i[o]==null&&(i[o]=0),r.document=i,n.skipValidation||r.skipValidation||await r.document.$validate(),r};Gt.exports.castUpdateOne=function(e,r,n,s){if(!r.filter)throw new Error("Must provide a filter object.");if(!r.update)throw new Error("Must provide an update object.");let i=y1(e,r.filter),o=i.schema,a=n.strict??i.schema.options.strict,u=fxe(r.update);yf(o,r.filter);let c=tb(r,n);if(i.schema.$timestamps!=null&&c){let d=i.schema.$timestamps.createdAt,h=i.schema.$timestamps.updatedAt;cY(s,d,h,u,{timestamps:r.timestamps,overwriteImmutable:r.overwriteImmutable})}c&&uY(s,u,i.schema);let l=e.base.options.setDefaultsOnInsert;return(r.setDefaultsOnInsert??l)!==!1&&dY(r.filter,i.schema,u,{setDefaultsOnInsert:!0,upsert:r.upsert}),pY(u,r,i.schema.options.versionKey),r.filter=mf(i.schema,r.filter,{strict:a,upsert:r.upsert}),r.update=lY(i.schema,u,{strict:a,upsert:r.upsert,arrayFilters:r.arrayFilters,overwriteDiscriminatorKey:r.overwriteDiscriminatorKey,overwriteImmutable:r.overwriteImmutable},i,r.filter),r};Gt.exports.castUpdateMany=function(e,r,n,s){if(!r.filter)throw new Error("Must provide a filter object.");if(!r.update)throw new Error("Must provide an update object.");let i=y1(e,r.filter),o=i.schema,a=n.strict??i.schema.options.strict,u=e.base.options.setDefaultsOnInsert;(r.setDefaultsOnInsert??u)!==!1&&dY(r.filter,i.schema,r.update,{setDefaultsOnInsert:!0,upsert:r.upsert});let l=tb(r,n);if(i.schema.$timestamps!=null&&l){let p=i.schema.$timestamps.createdAt,d=i.schema.$timestamps.updatedAt;cY(s,p,d,r.update,{timestamps:r.timestamps,overwriteImmutable:r.overwriteImmutable})}l&&uY(s,r.update,i.schema),yf(o,r.filter),pY(r.update,r,i.schema.options.versionKey),r.filter=mf(i.schema,r.filter,{strict:a,upsert:r.upsert}),r.update=lY(i.schema,r.update,{strict:a,upsert:r.upsert,arrayFilters:r.arrayFilters,overwriteDiscriminatorKey:r.overwriteDiscriminatorKey,overwriteImmutable:r.overwriteImmutable},i,r.filter)};Gt.exports.castReplaceOne=async function(e,r,n){let s=y1(e,r.filter),i=s.schema,o=n.strict??s.schema.options.strict;yf(i,r.filter),r.filter=mf(s.schema,r.filter,{strict:o,upsert:r.upsert});let a=new s(r.replacement,o,{skipId:!0});s.schema.options.timestamps&&tb(r,n)&&a.initializeTimestamps(),n.session!=null&&a.$session(n.session);let u=s?.schema?.options?.versionKey;if(u&&a[u]==null&&(a[u]=0),r.replacement=a,n.skipValidation||r.skipValidation){r.replacement=r.replacement.toBSON();return}await r.replacement.$validate(),r.replacement=r.replacement.toBSON()};Gt.exports.castDeleteOne=function(e,r){let n=y1(e,r.filter),s=n.schema;yf(s,r.filter),r.filter=mf(n.schema,r.filter)};Gt.exports.castDeleteMany=function(e,r){let n=y1(e,r.filter),s=n.schema;yf(s,r.filter),r.filter=mf(n.schema,r.filter)};Gt.exports.cast={insertOne:Gt.exports.castInsertOne,updateOne:Gt.exports.castUpdateOne,updateMany:Gt.exports.castUpdateMany,replaceOne:Gt.exports.castReplaceOne,deleteOne:Gt.exports.castDeleteOne,deleteMany:Gt.exports.castDeleteMany};function yf(t,e){t!=null&&t.discriminatorMapping&&!t.discriminatorMapping.isRoot&&(e[t.discriminatorMapping.key]=t.discriminatorMapping.value)}function y1(t,e){let r=t.schema.options.discriminatorKey;return e!=null&&Object.hasOwn(e,r)&&(t=hxe(t.discriminators,e[r])||t),t}function tb(t,e){let r=t.timestamps,n=e.timestamps;return r??n??!0}});var c5=m((Hqe,hY)=>{"use strict";hY.exports=function(e,r,n){return e.mongoose=e.mongoose||{},e.mongoose.validationErrors=r,e.mongoose.results=n,e}});var h5=m((Gqe,gY)=>{"use strict";var yxe=I8(),p5=require("events").EventEmitter,gxe=Oc(),Jt=Rd(),fY=H7(),$t=ds(),_xe=V8(),Exe=BJ(),bxe=G7(),Sxe=vt(),wxe=XE(),Axe=Rt(),Oxe=Y7(),mY=Da(),d5=ae(),Cxe=FJ(),rb=u5(),{modelSymbol:nb}=te(),vxe=ax(),l5=c5(),xxe=te().arrayAtomicsSymbol,gf=te().sessionNewDocuments,Txe=globalThis.Date,Dxe=["MONGODB-X509"];function se(t){this.base=t,this.collections={},this.models={},this.config={},this.replica=!1,this.options=null,this.otherDbs=[],this.relatedDbs={},this.states=Jt,this._readyState=Jt.disconnected,this._closeCalled=!1,this._hasOpened=!1,this.plugins=[],typeof t>"u"||!t.connections.length?this.id=0:this.id=t.nextConnectionId,this._queue=[]}Object.setPrototypeOf(se.prototype,p5.prototype);Object.defineProperty(se.prototype,"readyState",{get:function(){return this._readyState===Jt.connected&&this._lastHeartbeatAt!=null&&this.client?.topology?.s?.description?.type!=="LoadBalanced"&&typeof this.client?.topology?.s?.description?.heartbeatFrequencyMS=="number"&&Txe.now()-this._lastHeartbeatAt>=this.client.topology.s.description.heartbeatFrequencyMS*2?Jt.disconnected:this._readyState},set:function(t){if(!(t in Jt))throw new Error("Invalid connection state: "+t);if(this._readyState!==t){this._readyState=t;for(let e of this.otherDbs)e.readyState=t;Jt.connected===t&&(this._hasOpened=!0),this.emit(Jt[t])}}});se.prototype.get=function(e){return Object.hasOwn(this.config,e)?this.config[e]:Axe(this.options,e)};se.prototype.set=function(e,r){return Object.hasOwn(this.config,e)?(this.config[e]=r,r):(this.options=this.options||{},this.options[e]=r,r)};se.prototype.collections;se.prototype.name;se.prototype.models;se.prototype.id;Object.defineProperty(se.prototype,"plugins",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(se.prototype,"host",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(se.prototype,"port",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(se.prototype,"user",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(se.prototype,"pass",{configurable:!0,enumerable:!0,writable:!0});se.prototype.db;se.prototype.client;se.prototype.config;se.prototype.createCollection=async function(e,r){if(typeof r=="function"||arguments.length>=3&&typeof arguments[2]=="function")throw new $t("Connection.prototype.createCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.createCollection(e,r)};se.prototype.bulkWrite=async function(e,r){await this._waitForConnect(),r=r||{};let n=r.ordered==null?!0:r.ordered,s=this.base.transactionAsyncLocalStorage?.getStore();(!r||!Object.hasOwn(r,"session"))&&s?.session!=null&&(r={...r,session:s.session});let i=this.base.now(),o=null;if(n){let a=[];for(let u of e){if(typeof u.model!="string"&&!u.model?.[nb])throw new $t("Must specify model in Connection.prototype.bulkWrite() operations");let c=u.model[nb]?u.model:this.model(u.model);if(u.name==null)throw new $t("Must specify operation name in Connection.prototype.bulkWrite()");if(!Object.hasOwn(rb.cast,u.name))throw new $t(`Unrecognized bulkWrite() operation name ${u.name}`);await rb.cast[u.name](c,u,r,i),a.push({...u,namespace:c.namespace()})}o=await this.client.bulkWrite(a,r)}else{let a=[],u=[],c=[],l=[],p=[];for(let h=0;h<e.length;++h){let f=e[h];if(typeof f.model!="string"&&!f.model?.[nb]){let _=new $t("Must specify model in Connection.prototype.bulkWrite() operations");c.push({index:h,error:_}),p[h]=_;continue}let y;try{y=f.model[nb]?f.model:this.model(f.model)}catch(_){c.push({index:h,error:_});continue}if(f.name==null){let _=new $t("Must specify operation name in Connection.prototype.bulkWrite()");c.push({index:h,error:_}),p[h]=_;continue}if(!Object.hasOwn(rb.cast,f.name)){let _=new $t(`Unrecognized bulkWrite() operation name ${f.name}`);c.push({index:h,error:_}),p[h]=_;continue}let g=null;try{g=rb.cast[f.name](y,f,r,i)}catch(_){c.push({index:h,error:_}),p[h]=_;continue}vxe(g)?l.push(g.then(()=>{a.push({...f,namespace:y.namespace()}),u.push(h)},_=>{c.push({index:h,error:_}),p[h]=_})):(a.push({...f,namespace:y.namespace()}),u.push(h))}if(l.length>0&&await Promise.all(l),c=c.sort((h,f)=>h.index-f.index).map(h=>h.error),a.length===0){if(r.throwOnValidationError&&c.length)throw new fY(c,p,f,"bulkWrite");let h=this.base.driver.get().BulkWriteResult,f=new h(Oxe(),!1);return l5(f,c,p)}let d;[o,d]=await this.client.bulkWrite(a,r).then(h=>[h,null]).catch(h=>[null,h]);for(let h=0;h<u.length;++h)p[u[h]]=null;if(d&&c.length>0&&(l5(d,c,p),d.mongoose=d.mongoose||{},d.mongoose.validationErrors=c),c.length>0){if(r.throwOnValidationError)throw new fY(c,p,o,"bulkWrite");l5(o,c,p)}}return o};se.prototype.createCollections=async function(e={}){let r={},n={},{continueOnError:s}=e;delete e.continueOnError;for(let i of Object.values(this.models))try{r[i.modelName]=await i.createCollection({})}catch(o){if(s)r[i.modelName]=o;else{n[i.modelName]=o;break}}if(!s&&d5.hasOwnKeys(n)){let i=Object.entries(n).map(([a,u])=>`${a}: ${u.message}`).join(", ");throw new Cxe(i,n)}return r};se.prototype.withSession=async function(e){if(arguments.length===0)throw new Error("Please provide an executor function");return await this.client.withSession(e)};se.prototype.startSession=async function(e){if(arguments.length>=2&&typeof arguments[1]=="function")throw new $t("Connection.prototype.startSession() no longer accepts a callback");return await this._waitForConnect(),this.client.startSession(e)};se.prototype.transaction=function(e,r){return this.startSession().then(n=>(n[gf]=new Map,n.withTransaction(()=>Mxe(e,n,this.base),r).then(s=>(delete n[gf],s)).catch(s=>{throw delete n[gf],s}).finally(()=>{n.endSession().catch(()=>{})})))};async function Mxe(t,e,r){try{return r.transactionAsyncLocalStorage==null?await t(e):await new Promise(s=>{r.transactionAsyncLocalStorage.run({session:e},()=>s(t(e)))})}catch(n){throw Pxe(e),n}}function Pxe(t){for(let e of t[gf].keys()){let r=t[gf].get(e);Object.hasOwn(r,"isNew")&&(e.$isNew=r.isNew),Object.hasOwn(r,"versionKey")&&e.set(e.schema.options.versionKey,r.versionKey),r.modifiedPaths.length>0&&e.$__.activePaths.states.modify==null&&(e.$__.activePaths.states.modify={});for(let n of r.modifiedPaths){let s=e.$__.activePaths.paths[n];s!=null&&delete e.$__.activePaths[s][n],e.$__.activePaths.paths[n]="modify",e.$__.activePaths.states.modify[n]=!0}for(let n of r.atomics.keys()){let s=e.$__getValue(n);s!=null&&(s[xxe]=r.atomics.get(n))}}}se.prototype.dropCollection=async function(e){if(arguments.length>=2&&typeof arguments[1]=="function")throw new $t("Connection.prototype.dropCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.dropCollection(e)};se.prototype._waitForConnect=async function(e){if((this.readyState===Jt.connecting||this.readyState===Jt.disconnected)&&this._shouldBufferCommands()){let r=this._getBufferTimeoutMS(),n=null,s=!1,i={},o=new Promise(a=>{i.fn=a,this._queue.push(i)});if(e?await o:await Promise.race([o,new Promise(a=>{n=setTimeout(()=>{s=!0,a()},r)})]),s){let a=this._queue.indexOf(i);a!==-1&&this._queue.splice(a,1);let u="Connection operation buffering timed out after "+r+"ms";throw new $t(u)}else n!=null&&clearTimeout(n)}};se.prototype._getBufferTimeoutMS=function(){return this.config.bufferTimeoutMS!=null?this.config.bufferTimeoutMS:this.base?.get("bufferTimeoutMS")!=null?this.base.get("bufferTimeoutMS"):1e4};se.prototype.listCollections=async function(){return await this._waitForConnect(),await this.db.listCollections().toArray()};se.prototype.listDatabases=async function(){throw new $t("listDatabases() not implemented by driver")};se.prototype.dropDatabase=async function(){if(arguments.length>=1&&typeof arguments[0]=="function")throw new $t("Connection.prototype.dropDatabase() no longer accepts a callback");await this._waitForConnect();for(let e of Object.values(this.models))delete e.$init;return this.db.dropDatabase()};se.prototype._shouldBufferCommands=function(){return this.config.bufferCommands!=null?this.config.bufferCommands:this.base.get("bufferCommands")!=null?this.base.get("bufferCommands"):!0};se.prototype.error=function(e,r){return r?(r(e),null):(this.listeners("error").length>0&&this.emit("error",e),Promise.reject(e))};se.prototype.onOpen=function(){this.readyState=Jt.connected;for(let t of this._queue)t.fn.apply(t.ctx,t.args);this._queue=[];for(let t in this.collections)Object.hasOwn(this.collections,t)&&this.collections[t].onOpen();this.emit("open")};se.prototype.openUri=async function(e,r){if((this.readyState===Jt.connecting||this.readyState===Jt.connected)&&this._connectionString===e)return this;this._closeCalled=!1;let n=!1;r&&"_fireAndForget"in r&&(n=r._fireAndForget,delete r._fireAndForget);try{Bxe.apply(arguments)}catch(s){throw n||(this.$initialConnection=Promise.reject(s)),s}this.$initialConnection=this.createClient(e,r).then(()=>this).catch(s=>{throw this.readyState=Jt.disconnected,this.listeners("error").length>0&&mY(()=>this.emit("error",s)),s});for(let s of Object.values(this.models))s.init().catch(function(){});if(n)return this;try{await this.$initialConnection}catch(s){throw yY(s)}return this};se.prototype.on=function(e,r){return e==="error"&&this.$initialConnection&&this.$initialConnection.catch(()=>{}),p5.prototype.on.call(this,e,r)};se.prototype.once=function(e,r){return e==="error"&&this.$initialConnection&&this.$initialConnection.catch(()=>{}),p5.prototype.once.call(this,e,r)};function Bxe(t,e,r){if(typeof e=="function"&&r==null)throw new $t("Connection.prototype.openUri() no longer accepts a callback");if(typeof r=="function")throw new $t("Connection.prototype.openUri() no longer accepts a callback")}function yY(t){if(t?.name==="MongoServerSelectionError"){let e=t;t=new _xe,t.assimilateError(e)}return t}se.prototype.destroy=async function(e){if(typeof e=="function"||arguments.length===2&&typeof arguments[1]=="function")throw new $t("Connection.prototype.destroy() no longer accepts a callback");return e!=null&&typeof e=="object"?this.$wasForceClosed=!!e.force:this.$wasForceClosed=!!e,this._close(e,!0)};se.prototype.close=async function(e){if(typeof e=="function"||arguments.length===2&&typeof arguments[1]=="function")throw new $t("Connection.prototype.close() no longer accepts a callback");e!=null&&typeof e=="object"?this.$wasForceClosed=!!e.force:this.$wasForceClosed=!!e,this._lastHeartbeatAt!=null&&(this._lastHeartbeatAt=null);for(let r of Object.values(this.models))delete r.$init;return this._close(e,!1)};se.prototype._close=async function(e,r){let n=this,s=this._closeCalled;this._closeCalled=!0,this._destroyCalled=r,this.client!=null&&(this.client._closeCalled=!0,this.client._destroyCalled=r);let i=this;switch(this.readyState){case Jt.disconnected:if(r){let o=this.base.connections.indexOf(i);o!==-1&&this.base.connections.splice(o,1)}s||(await this.doClose(e),this.onClose(e));break;case Jt.connected:if(this.readyState=Jt.disconnecting,await this.doClose(e),r){let o=n.base.connections.indexOf(i);o!==-1&&this.base.connections.splice(o,1)}this.onClose(e);break;case Jt.connecting:return new Promise((o,a)=>{let u=()=>{this.removeListener("open",u),this.removeListener("error",u),r?this.destroy(e).then(o,a):this.close(e).then(o,a)};this.once("open",u),this.once("error",u)});case Jt.disconnecting:return new Promise(o=>{this.once("close",()=>{r&&this.base.connections.indexOf(i)!==-1&&this.base.connections.splice(this.base.connections.indexOf(i),1),o()})})}return this};se.prototype.doClose=function(){throw new Error("Connection#doClose unimplemented by driver")};se.prototype.onClose=function(e){this.readyState=Jt.disconnected;for(let n in this.collections)Object.hasOwn(this.collections,n)&&this.collections[n].onClose(e);this.emit("close",e);let r=typeof e=="object"&&e!==null?e.force:e;for(let n of this.otherDbs)this._destroyCalled?n.destroy({force:r,skipCloseClient:!0}):n.close({force:r,skipCloseClient:!0})};se.prototype.collection=function(t,e){let r={autoIndex:this.config.autoIndex??this.base.options.autoIndex,autoCreate:this.config.autoCreate??this.base.options.autoCreate,autoSearchIndex:this.config.autoSearchIndex??this.base.options.autoSearchIndex};e=Object.assign({},r,e?Sxe(e):{}),e.$wasForceClosed=this.$wasForceClosed;let n=this.base?.__driver?.Collection||wxe.get().Collection;return t in this.collections||(this.collections[t]=new n(t,this,e)),this.collections[t]};se.prototype.plugin=function(t,e){return this.plugins.push([t,e]),this};se.prototype.model=function(e,r,n,s){if(!(this instanceof se))throw new $t("`connection.model()` should not be run with `new`. If you are doing `new db.model(foo)(bar)`, use `db.model(foo)(bar)` instead");let i;if(typeof e=="function"&&(i=e,e=i.name),typeof r=="string"&&(n=r,r=!1),d5.isObject(r)&&(r.instanceOfSchema?r instanceof this.base.Schema||(r=r._clone(this.base.Schema)):r=new gxe(r)),r&&!r.instanceOfSchema)throw new Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");let o={cache:!1,overwriteModels:this.base.options.overwriteModels},a=Object.assign(o,s,{connection:this});if(this.models[e]&&!n&&a.overwriteModels!==!0){if(r?.instanceOfSchema&&r!==this.models[e].schema)throw new $t.OverwriteModelError(e);return this.models[e]}let u;if(r?.instanceOfSchema)return bxe(r,this.plugins,null,"$connectionPluginsApplied"),u=this.base._model(i||e,r,n,a),this.models[e]||(this.models[e]=u),u.init().catch(function(){}),u;if(this.models[e]&&n)return u=this.models[e],r=u.prototype.schema,u.__subclass(this,r,n);if(arguments.length===1){if(u=this.models[e],!u)throw new $t.MissingSchemaError(e);return u}if(!u)throw new $t.MissingSchemaError(e);return this===u.prototype.db&&(!n||n===u.collection.name)?(this.models[e]||(this.models[e]=u),u):(this.models[e]=u.__subclass(this,r,n),this.models[e])};se.prototype.deleteModel=function(e){if(typeof e=="string"){let r=this.model(e);if(r==null)return this;let n=r.collection.name;delete this.models[e],delete this.collections[n],this.emit("deleteModel",r)}else if(e instanceof RegExp){let r=e,n=this.modelNames();for(let s of n)r.test(s)&&this.deleteModel(s)}else throw new Error('First parameter to `deleteModel()` must be a string or regexp, got "'+e+'"');return this};se.prototype.watch=function(e,r){let n=i=>{mY(()=>{if(this.readyState===Jt.connecting)this.once("open",function(){let o=this.db.watch(e,r);i(null,o)});else{let o=this.db.watch(e,r);i(null,o)}})};return new yxe(n,e,r)};se.prototype.asPromise=async function(){try{return await this.$initialConnection,this}catch(e){throw yY(e)}};se.prototype.modelNames=function(){return Object.keys(this.models)};se.prototype.shouldAuthenticate=function(){return this.user!=null&&(this.pass!=null||this.authMechanismDoesNotRequirePassword())};se.prototype.authMechanismDoesNotRequirePassword=function(){return this.options?.auth?Dxe.indexOf(this.options.auth.authMechanism)>=0:!0};se.prototype.optionsProvideAuthenticationData=function(e){return e&&e.user&&(e.pass||this.authMechanismDoesNotRequirePassword())};se.prototype.getClient=function(){return this.client};se.prototype.setClient=function(){throw new $t("Connection#setClient not implemented by driver")};se.prototype.createClient=function(){throw new $t("Connection#createClient not implemented by driver")};se.prototype.syncIndexes=async function(e={}){let r={},n={},{continueOnError:s}=e;delete e.continueOnError;for(let i of Object.values(this.models))try{r[i.modelName]=await i.syncIndexes(e)}catch(o){if(s)r[i.modelName]=o;else{n[i.modelName]=o;break}}if(!s&&d5.hasOwnKeys(n)){let i=Object.entries(n).map(([a,u])=>`${a}: ${u.message}`).join(", ");throw new Exe(i,n)}return r};se.STATES=Jt;gY.exports=se});var f5=m((Jqe,Ixe)=>{Ixe.exports={name:"mongoose",description:"Mongoose MongoDB ODM",version:"9.1.6",author:"Guillermo Rauch <guillermo@learnboost.com>",keywords:["mongodb","document","model","schema","database","odm","data","datastore","query","nosql","orm","db"],type:"commonjs",license:"MIT",dependencies:{kareem:"3.0.0",mongodb:"~7.0",mpath:"0.9.0",mquery:"6.0.0",ms:"2.1.3",sift:"17.1.3"},devDependencies:{"@ark/attest":"0.56.0","@mongodb-js/mongodb-downloader":"^1.0.0","@types/node":"^18.16.0",acquit:"1.4.0","acquit-ignore":"0.2.2","acquit-require":"0.1.1",ajv:"8.17.1",cheerio:"^1.2",dox:"1.0.0",eslint:"9.39.2","eslint-plugin-mocha-no-only":"1.2.0",express:"^4.19.2","fs-extra":"~11.3.0","highlight.js":"11.11.1",linkinator:"7.x","lodash.isequal":"4.5.0","lodash.isequalwith":"4.4.0","markdownlint-cli2":"^0.20.0",marked:"15.x",mkdirp:"^3.0.1",mocha:"11.3.0",moment:"2.30.1","mongodb-memory-server":"11.0.1","mongodb-runner":"^6.0.0","mongodb-client-encryption":"~7.0",ncp:"^2.0.0",c8:"10.1.3",pug:"3.0.3",sinon:"21.0.1",tsd:"0.33.0",typescript:"5.9.3","typescript-eslint":"^8.31.1",uuid:"11.1.0"},directories:{lib:"./lib/mongoose"},scripts:{"docs:clean":"npm run docs:clean:stable","docs:clean:stable":"rm -rf index.html && rm -rf ./docs/*.html  && rm -rf ./docs/api && rm -rf ./docs/tutorials/*.html && rm -rf ./docs/typescript/*.html && rm -rf ./docs/*.html && rm -rf ./docs/source/_docs && rm -rf ./tmp","docs:clean:5x":"rm -rf index.html && rm -rf ./docs/5.x && rm -rf ./docs/source/_docs && rm -rf ./tmp","docs:clean:6x":"rm -rf index.html && rm -rf ./docs/6.x && rm -rf ./docs/source/_docs && rm -rf ./tmp","docs:copy:tmp":"mkdirp ./tmp/docs/css && mkdirp ./tmp/docs/js && mkdirp ./tmp/docs/images && mkdirp ./tmp/docs/tutorials && mkdirp ./tmp/docs/typescript && mkdirp ./tmp/docs/api && ncp ./docs/css ./tmp/docs/css --filter=.css$ && ncp ./docs/js ./tmp/docs/js --filter=.js$ && ncp ./docs/images ./tmp/docs/images && ncp ./docs/tutorials ./tmp/docs/tutorials && ncp ./docs/typescript ./tmp/docs/typescript && ncp ./docs/api ./tmp/docs/api && cp index.html ./tmp && cp docs/*.html ./tmp/docs/","docs:copy:tmp:5x":"rm -rf ./docs/5.x && ncp ./tmp ./docs/5.x","docs:copy:tmp:6x":"rm -rf ./docs/6.x && ncp ./tmp ./docs/6.x","docs:generate":"node ./scripts/website.js","docs:generate:sponsorData":"node ./scripts/loadSponsorData.js","docs:test":"npm run docs:generate","docs:view":"node ./scripts/static.js","docs:prepare:publish:stable":"git checkout gh-pages && git merge master && npm run docs:generate","docs:prepare:publish:5x":"git checkout 5.x && git merge 5.x && npm run docs:clean:stable && npm run docs:generate && npm run docs:copy:tmp && git checkout gh-pages && npm run docs:copy:tmp:5x","docs:prepare:publish:6x":"git checkout 6.x && git merge 6.x && npm run docs:clean:stable && env DOCS_DEPLOY=true npm run docs:generate && mv ./docs/6.x ./tmp && git checkout gh-pages && npm run docs:copy:tmp:6x","docs:prepare:publish:7x":"env DOCS_DEPLOY=true npm run docs:generate && git checkout gh-pages && rm -rf ./docs/7.x && mv ./tmp ./docs/7.x","docs:prepare:publish:8x":"env DOCS_DEPLOY=true npm run docs:generate && git checkout gh-pages && rm -rf ./docs/8.x && mv ./tmp ./docs/8.x","docs:check-links":"linkinator http://127.0.0.1:8089 --silent",lint:"eslint .","lint-js":"eslint . --ext .js --ext .cjs","lint-ts":"eslint . --ext .ts","lint-md":'markdownlint-cli2 "**/*.md" "#node_modules" "#benchmarks"',release:"git pull && git push origin master --tags && npm publish","release-5x":"git pull origin 5.x && git push origin 5.x && git push origin 5.x --tags && npm publish --tag 5x","release-6x":"git pull origin 6.x && git push origin 6.x && git push origin 6.x --tags && npm publish --tag 6x",mongo:"node ./tools/repl.js","publish-7x":"npm publish --tag 7x","create-separate-require-instance":"rm -rf ./node_modules/mongoose-separate-require-instance && node ./scripts/create-tarball && tar -xzf mongoose.tgz -C ./node_modules && mv ./node_modules/package ./node_modules/mongoose-separate-require-instance",test:"mocha --exit ./test/*.test.js","test:ci":"npm run test -- --reporter min","test-deno":"deno run --allow-env --allow-read --allow-net --allow-run --allow-sys --allow-write ./test/deno.mjs","test-deno:ci":"npm run test-deno -- --reporter min","test-rs":"START_REPLICA_SET=1 mocha --timeout 30000 --exit ./test/*.test.js","test-rs:ci":"npm run test-rs -- --reporter min","test-tsd":"node ./test/types/check-types-filename && tsd --full","setup-test-encryption":"node scripts/setup-encryption-tests.js","test-encryption":"mocha --exit ./test/encryption/*.test.js","test-encryption:ci":"npm run test-encryption -- --reporter min",tdd:"mocha --watch --inspect --recursive ./test/*.test.js --watch-files lib/**/*.js test/**/*.js","test-coverage":"c8 --reporter=html --reporter=text npm test","test-coverage:ci":"c8 --reporter=html --reporter=text npm run test:ci","ts-benchmark":"cd ./benchmarks/typescript/simple && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check","ts-benchmark:local":"node ./scripts/create-tarball && cd ./benchmarks/typescript/simple && rm -rf ./node_modules && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check","attest-benchmark":"node ./benchmarks/typescript/infer.bench.mts"},main:"./index.js",types:"./types/index.d.ts",engines:{node:">=20.19.0"},bugs:{url:"https://github.com/Automattic/mongoose/issues/new"},repository:{type:"git",url:"git://github.com/Automattic/mongoose.git"},homepage:"https://mongoosejs.com",config:{mongodbMemoryServer:{disablePostinstall:!0}},funding:{type:"opencollective",url:"https://opencollective.com/mongoose"},tsd:{directory:"test/types",compilerOptions:{esModuleInterop:!1,strict:!0,allowSyntheticDefaultImports:!0,strictPropertyInitialization:!1,noImplicitAny:!1,strictNullChecks:!0,module:"commonjs",target:"ES2022"}}}});var EY=m((Yqe,_Y)=>{"use strict";var Nxe=vt(),kxe=ds();function Rxe(t,e){let r=e||{},n=r.readPreference?r.readPreference:jxe(t),s=Nxe(r);return n&&n!=="primary"&&n!=="primaryPreferred"?Fxe(n,s):s}function Fxe(t,e){if($xe(e)&&qxe(t))Uxe();else return Lxe(e)}function $xe(t){let e=t.config?.autoIndex,{autoCreate:r,autoIndex:n}=t;return!!(e||r||n)}function qxe(t){return t==="secondary"||t==="secondaryPreferred"}function jxe(t){let r=/(?:&|\?)readPreference=(\w+)(?:&|$)/.exec(t);return r?r[1]:null}function Lxe(t){return t.config={autoIndex:!1},t.autoCreate=!1,t.autoIndex=!1,t}function Uxe(){throw new kxe('MongoDB prohibits index creation on connections that read from non-primary replicas.  Connections that set "readPreference" to "secondary" or "secondaryPreferred" may not opt-in to the following connection options: autoCreate, autoIndex')}_Y.exports=Rxe});var SY=m(bY=>{"use strict";bY.setTimeout=setTimeout});var CY=m((Xqe,OY)=>{"use strict";var wY=h5(),Nc=ds(),Vn=Rd(),AY=ka(),Vxe=f5(),Wxe=EY(),zxe=SY().setTimeout,_f=ae(),Kxe=Oc();function xi(){wY.apply(this,arguments),this._listening=!1,this._lastHeartbeatAt=null}xi.STATES=Vn;Object.setPrototypeOf(xi.prototype,wY.prototype);xi.prototype.useDb=function(t,e){if(e=e||{},e.useCache&&this.relatedDbs[t])return this.relatedDbs[t];let r=new this.constructor;r.name=t,r.base=this.base,r.collections={},r.models={},r.replica=this.replica,r.config=Object.assign({},this.config,r.config),r.name=this.name,r.options=this.options,r._readyState=this._readyState,r._closeCalled=this._closeCalled,r._hasOpened=this._hasOpened,r._listening=!1,r._parent=this,r.host=this.host,r.port=this.port,r.user=this.user,r.pass=this.pass;let n=this;r.client=n.client,this.db&&this._readyState===Vn.connected?s():this._queue.push({fn:s});function s(){r.client=n.client,r.db=n.client.db(t),r._lastHeartbeatAt=n._lastHeartbeatAt,r.onOpen()}return r.name=t,this.otherDbs.push(r),r.otherDbs.push(this),e?.useCache&&(this.relatedDbs[r.name]=r,r.relatedDbs=this.relatedDbs),r};xi.prototype.aggregate=function(e,r){return new this.base.Aggregate(null,this).append(e).option(r??{})};xi.prototype.removeDb=function(e){let r=this.otherDbs.filter(n=>n.name===e);if(!r.length)throw new Nc(`No connections to database "${e}" found`);for(let n of r)n._closeCalled=!0,n._destroyCalled=!0,n._readyState=Vn.disconnected,n.$wasForceClosed=!0;delete this.relatedDbs[e],this.otherDbs=this.otherDbs.filter(n=>n.name!==e)};xi.prototype.doClose=async function(e){if(this.client==null)return this;let r=!1;return e!=null&&typeof e=="object"&&(r=e.skipCloseClient,e=e.force),r?this:(await this.client.close(e),await new Promise(n=>zxe(n,1)),this)};xi.prototype.listDatabases=async function(){return await this._waitForConnect(),await this.db.admin().listDatabases()};xi.prototype.createClient=async function(e,r){if(typeof e!="string")throw new Nc(`The \`uri\` parameter to \`openUri()\` must be a string, got "${typeof e}". Make sure the first parameter to \`mongoose.connect()\` or \`mongoose.createConnection()\` is a string.`);if(this._destroyCalled)throw new Nc("Connection has been closed and destroyed, and cannot be used for re-opening the connection. Please create a new connection with `mongoose.createConnection()` or `mongoose.connect()`.");if((this.readyState===Vn.connecting||this.readyState===Vn.connected)&&this._connectionString!==e)throw new Nc("Can't call `openUri()` on an active connection with different connection strings. Make sure you aren't calling `mongoose.connect()` multiple times. See: https://mongoosejs.com/docs/connections.html#multiple_connections");if(r=Wxe(e,r),r){let a=r.config?.autoIndex??r.autoIndex;a!=null&&(this.config.autoIndex=a!==!1,delete r.config,delete r.autoIndex),"autoCreate"in r&&(this.config.autoCreate=!!r.autoCreate,delete r.autoCreate),"sanitizeFilter"in r&&(this.config.sanitizeFilter=r.sanitizeFilter,delete r.sanitizeFilter),"autoSearchIndex"in r&&(this.config.autoSearchIndex=r.autoSearchIndex,delete r.autoSearchIndex),"bufferTimeoutMS"in r&&(this.config.bufferTimeoutMS=r.bufferTimeoutMS,delete r.bufferTimeoutMS),(r.user||r.pass)&&(r.auth=r.auth||{},r.auth.username=r.user,r.auth.password=r.pass,this.user=r.user,this.pass=r.pass),delete r.user,delete r.pass,r.bufferCommands!=null&&(this.config.bufferCommands=r.bufferCommands,delete r.bufferCommands)}else r={};this._connectionOptions=r;let n=r.dbName;n!=null&&(this.$dbName=n),delete r.dbName,_f.hasUserDefinedProperty(r,"driverInfo")||(r.driverInfo={name:"Mongoose",version:Vxe.version});let{schemaMap:s,encryptedFieldsMap:i}=this._buildEncryptionSchemas();if((_f.hasOwnKeys(s)||_f.hasOwnKeys(i))&&!r.autoEncryption)throw new Error("Must provide `autoEncryption` when connecting with encrypted schemas.");_f.hasOwnKeys(s)&&(r.autoEncryption.schemaMap=s),_f.hasOwnKeys(i)&&(r.autoEncryption.encryptedFieldsMap=i),this.readyState=Vn.connecting,this._connectionString=e;let o;try{o=new AY.MongoClient(e,r)}catch(a){throw this.readyState=Vn.disconnected,a}this.client=o,o.setMaxListeners(0),await o.connect(),m5(this,o,r,n);for(let a of this.otherDbs)m5(a,o,{},a.name);return this};xi.prototype._buildEncryptionSchemas=function(){let t={},e={},r=Object.values(this.models).filter(i=>i.schema._hasEncryptedFields());for(let i of r){let{schema:o,collection:{collectionName:a}}=i,u=`${this.$dbName}.${a}`,c=o.encryptionType()==="csfle"?e:t;if(c[u]??=new Kxe({},{encryptionType:o.encryptionType()}),o.discriminatorMapping&&!o.discriminatorMapping.isRoot){let p=o._baseSchema;o.eachPath(d=>{if(!p.path(d)&&c[u]._hasEncryptedField(d))throw new Error(`Cannot have duplicate keys in discriminators with encryption. key=${d}`)})}c[u].add(o)}let n=Object.fromEntries(Object.entries(e).map(([i,o])=>[i,o._buildSchemaMap()])),s=Object.fromEntries(Object.entries(t).map(([i,o])=>[i,o._buildEncryptedFields()]));return{schemaMap:n,encryptedFieldsMap:s}};xi.prototype.setClient=function(e){if(!(e instanceof AY.MongoClient))throw new Nc("Must call `setClient()` with an instance of MongoClient");if(this.readyState!==Vn.disconnected)throw new Nc("Cannot call `setClient()` on a connection that is already connected.");if(e.topology==null)throw new Nc("Cannot call `setClient()` with a MongoClient that you have not called `connect()` on yet.");this._connectionString=e.s.url,m5(this,e,{},e.s.options.dbName);for(let r of Object.values(this.models))r.init().catch(function(){});return this};function m5(t,e,r,n){let s=n!=null?e.db(n):e.db();t.db=s,t.client=e,t.host=e?.s?.options?.hosts?.[0]?.host,t.port=e?.s?.options?.hosts?.[0]?.port,t.name=n??s.databaseName,t._closeCalled=e._closeCalled;let i=()=>{t.readyState!==Vn.connected&&(t.readyState=Vn.connected,t.emit("reconnect"),t.emit("reconnected"),t.onOpen())},o=e?.topology?.description?.type||"";o==="Single"?e.on("serverDescriptionChanged",a=>{a.newDescription.type==="Unknown"?t.readyState=Vn.disconnected:i()}):o.startsWith("ReplicaSet")&&e.on("topologyDescriptionChanged",a=>{let u=a.newDescription;t.readyState===Vn.connected&&u.type!=="ReplicaSetWithPrimary"?t.readyState=Vn.disconnected:t.readyState===Vn.disconnected&&u.type==="ReplicaSetWithPrimary"&&i()}),t._lastHeartbeatAt=null,e.on("serverHeartbeatSucceeded",()=>{t._lastHeartbeatAt=Date.now();for(let a of t.otherDbs)a._lastHeartbeatAt=t._lastHeartbeatAt}),r.monitorCommands&&(e.on("commandStarted",a=>t.emit("commandStarted",a)),e.on("commandFailed",a=>t.emit("commandFailed",a)),e.on("commandSucceeded",a=>t.emit("commandSucceeded",a))),t.onOpen();for(let a in t.collections)Object.hasOwn(t.collections,a)&&t.collections[a].onOpen()}OY.exports=xi});var vY=m(Ef=>{"use strict";Ef.BulkWriteResult=BR();Ef.Collection=qU();Ef.Connection=CY();Ef.ClientEncryption=ka().ClientEncryption});var TY=m((eje,xY)=>{"use strict";var Hxe=Object.freeze(["allowDiskUse","applyPluginsToChildSchemas","applyPluginsToDiscriminators","autoCreate","autoIndex","autoSearchIndex","bufferCommands","bufferTimeoutMS","cloneSchemas","createInitialConnection","debug","forceRepopulate","id","maxTimeMS","objectIdGetter","overwriteModels","returnOriginal","runValidators","sanitizeFilter","sanitizeProjection","selectPopulatedPaths","setDefaultsOnInsert","strict","strictPopulate","strictQuery","timestamps.createdAt.immutable","toJSON","toObject","transactionAsyncLocalStorage","translateAliases","updatePipeline"]);xY.exports=Hxe});var MY=m((tje,DY)=>{"use strict";var Gxe=be(),sb=class extends Gxe{constructor(e){let r=e.map(n=>n.message).join(", ");r.length>50&&(r=r.slice(0,50)+"..."),super(`eachAsync() finished with ${e.length} errors: ${r}`),this.errors=e}};Object.defineProperty(sb.prototype,"name",{value:"EachAsyncMultiError"});DY.exports=sb});var g5=m((rje,BY)=>{"use strict";var Jxe=MY(),y5=Da();BY.exports=async function(e,r,n){let s=n.parallel||1,i=n.batchSize,o=n.signal,a=n.continueOnError,u=[],c=Yxe(),l=!1;return new Promise((h,f)=>{if(o!=null){if(o.aborted)return h(null);o.addEventListener("abort",()=>(l=!0,h(null)),{once:!0})}if(i!=null){if(typeof i!="number")throw new TypeError("batchSize must be a number");if(Number.isInteger(i)){if(i<1)throw new TypeError("batchSize must be at least 1")}else throw new TypeError("batchSize must be an integer")}p((y,g)=>{if(y!=null)return f(y);h(g)})});function p(h){let f=0,y=0,g=null;for(let S=0;S<s;++S)c(_());function _(){let S=[],O=!1;return E;function E(A){if(O||l)return A();if(g)return A();e(function(x,v){if(g!=null)return A();if(x!=null)if(x.name==="MongoCursorExhaustedError")v=null;else if(a)u.push(x);else return g=x,h(x),A();if(v==null){if(O=!0,f<=0){let I=a?PY(u):g;h(I)}else i&&S.length&&d(S,y++,M);return A()}if(++f,y5(()=>A()),i&&S.push(v),i&&S.length!==i){y5(()=>c(E));return}let R=i?S:v;function M(I){if(i?(f-=S.length,S=[]):--f,I!=null)if(a)u.push(I);else return g=I,h(I);if((O||l)&&f<=0){let j=a?PY(u):g;return h(j)}y5(()=>c(E))}d(R,y++,M)})}}}function d(h,f,y){let g;try{g=r(h,f)}catch(_){return y(_)}typeof g?.then=="function"?g.then(function(){y(null)},function(_){y(_||new Error("`eachAsync()` promise rejected without error"))}):y(null)}};function Yxe(){let t=[],e=null,r=0;return function(i){if(e===null&&t.length===0)return e=r++,i(n);t.push(i)};function n(){t.length!==0?(e=r++,t.shift()(n)):e=null}}function PY(t){return t.length===0?null:new Jxe(t)}});var jY=m((nje,qY)=>{"use strict";var bf=be(),kY=require("stream").Readable,Qxe=g5(),RY=qh(),Xxe=fc(),_5=Da(),{once:Zxe}=require("events"),FY=require("util");function Wn(t){kY.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.skipped=!1,this.query=t,this._closed=!1;let e=t.model;this._mongooseOptions={},this._transforms=[],this.model=e,this.options={};let r=n=>{if(n!=null){if(n instanceof Xxe.skipWrappedFunction){let s=n.args[0];if(s!=null&&(!Array.isArray(s)||s.length)){let i=new bf('Cannot `skipMiddlewareFunction()` with a value when using `.find().cursor()`, value must be nullish or empty array, got "'+FY.inspect(s)+'".');this._markError(i),this.listeners("error").length>0&&this.emit("error",i);return}this.skipped=!0,this.emit("cursor",null);return}this._markError(n),this.listeners("error").length>0&&this.emit("error",n);return}Object.assign(this.options,t._optionsForExec()),this._transforms=this._transforms.concat(t._transforms.slice()),this.options.transform&&this._transforms.push(this.options.transform),this.options.batchSize&&(this.options._populateBatchSize=Math.min(this.options.batchSize,5e3)),t._mongooseOptions._asyncIterator&&(this._mongooseOptions._asyncIterator=!0),e.collection._shouldBufferCommands()&&e.collection.buffer?e.collection.queue.push([()=>IY(t,this)]):IY(t,this)};e.hooks.execPre("find",t).then(()=>r(null),n=>r(n))}FY.inherits(Wn,kY);function IY(t,e){try{let r=t.model.collection.find(t._conditions,e.options);e.cursor=r,e.emit("cursor",r)}catch(r){e._markError(r),e.listeners("error").length>0&&e.emit("error",e._error)}}Wn.prototype._read=function(){ab(this,(t,e)=>{if(t)return this.emit("error",t);if(!e){this.push(null),this.cursor.close(function(r){if(r)return this.emit("error",r)});return}this.push(e)})};Wn.prototype.getDriverCursor=async function(){return this.cursor?this.cursor:(await Zxe(this,"cursor"),this.cursor)};Object.defineProperty(Wn.prototype,"map",{value:function(t){return this._transforms.push(t),this},enumerable:!0,configurable:!0,writable:!0});Wn.prototype._markError=function(t){return this._error=t,this};Wn.prototype.close=async function(){if(typeof arguments[0]=="function")throw new bf("QueryCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close(),this._closed=!0,this.emit("close")}catch(e){throw this.listeners("error").length>0&&this.emit("error",e),e}};Wn.prototype._destroy=function(e,r){let n=null;return this.cursor?n=Promise.resolve():n=new Promise(s=>{this.once("cursor",s)}),n.then(()=>{this.cursor.close()}).then(()=>{this._closed=!0,r()}).catch(s=>{r(s)}),this};Wn.prototype.rewind=function(){return $Y(this,()=>{this.cursor.rewind()}),this};Wn.prototype.next=async function(){if(typeof arguments[0]=="function")throw new bf("QueryCursor.prototype.next() no longer accepts a callback");if(this._closed)throw new bf("Cannot call `next()` on a closed cursor");return new Promise((e,r)=>{ab(this,function(n,s){if(n)return r(n);e(s)})})};Wn.prototype.eachAsync=function(t,e){if(typeof arguments[2]=="function")throw new bf("QueryCursor.prototype.eachAsync() no longer accepts a callback");return typeof e=="function"&&(e={}),e=e||{},Qxe(r=>ab(this,r),t,e)};Wn.prototype.options;Wn.prototype.addCursorFlag=function(t,e){return $Y(this,()=>{this.cursor.addCursorFlag(t,e)}),this};Symbol.asyncIterator!=null&&(Wn.prototype[Symbol.asyncIterator]=function(){return this._mongooseOptions._asyncIterator=!0,this});function ab(t,e){let r=e;if(r=function(n,s){return n?e(n):s===null?t._mongooseOptions._asyncIterator?e(null,{done:!0}):e(null,null):(t._transforms.length&&s!==null&&(s=t._transforms.reduce(function(i,o){return o.call(t,i)},s)),t._mongooseOptions._asyncIterator?e(null,{value:s,done:!1}):e(null,s))},t._error)return _5(function(){r(t._error)});if(t.skipped)return _5(()=>r(null,null));if(t.cursor)if(t.query._mongooseOptions.populate&&!t._pop&&(t._pop=RY.preparePopulationOptionsMQ(t.query,t.query._mongooseOptions),t._pop.__noPromise=!0),t.query._mongooseOptions.populate&&t.options._populateBatchSize>1){if(t._batchDocs&&t._batchDocs.length)return ib(t,t._batchDocs.shift(),t._pop,r);if(t._batchExhausted)return r(null,null);t._batchDocs=[],t.cursor.next().then(n=>{ob.call({ctx:t,callback:r},null,n)},n=>{ob.call({ctx:t,callback:r},n)});return}else return t.cursor.next().then(n=>{if(!n){r(null,null);return}if(!t.query._mongooseOptions.populate)return ib(t,n,null,r);ib(t,n,t._pop,(s,i)=>{if(s!=null)return r(s);t.query.model.populate(i,t._pop).then(o=>r(null,o),o=>r(o))})},n=>{r(n)});else t.once("error",e),t.once("cursor",function(n){if(t.removeListener("error",e),n==null)return t.skipped?e(null,null):void 0;ab(t,e)})}function ob(t,e){if(t)return this.callback(t);if(!e)return this.ctx._batchExhausted=!0,NY.call(this);this.ctx._batchDocs.push(e),this.ctx._batchDocs.length<this.ctx.options._populateBatchSize?_5(()=>this.ctx.cursor.next().then(r=>{ob.call(this,null,r)},r=>{ob.call(this,r)})):NY.call(this)}function NY(){if(!this.ctx._batchDocs.length)return this.callback(null,null);this.ctx.query.model.populate(this.ctx._batchDocs,this.ctx._pop).then(()=>{ib(this.ctx,this.ctx._batchDocs.shift(),this.ctx._pop,this.callback)},t=>{this.callback(t)})}function ib(t,e,r,n){if(t.query._mongooseOptions.lean)return t.model.hooks.execPost("find",t.query,[[e]]).then(()=>n(null,e),u=>n(u));let{model:s,_fields:i,_userProvidedFields:o,options:a}=t.query;RY.createModelAndInit(s,e,i,o,a,r,(u,c)=>{if(u!=null)return n(u);a.session!=null&&c.$session(a.session),t.model.hooks.execPost("find",t.query,[[c]]).then(()=>n(null,c),l=>n(l))})}function $Y(t,e){if(t.cursor)return e();t.once("cursor",function(r){r!=null&&e()})}qY.exports=Wn});var b5=m((sje,UY)=>{"use strict";var E5=ae();function e7e(t,e,r){LY(t,e,r,"maxTimeMS")}function t7e(t,e,r){LY(t,e,r,"allowDiskUse")}UY.exports={applyGlobalMaxTimeMS:e7e,applyGlobalDiskUse:t7e};function LY(t,e,r,n){E5.hasUserDefinedProperty(t,n)||(E5.hasUserDefinedProperty(e,n)?t[n]=e[n]:E5.hasUserDefinedProperty(r,n)&&(t[n]=r[n]))}});var S5=m((ije,VY)=>{"use strict";VY.exports=function(e,r){if(r.readConcern!==void 0||r?.session?.transaction)return;let n=e.options?.readConcern?.level;n!=null&&(r.readConcern={level:n})}});var w5=m((oje,WY)=>{"use strict";var r7e=ae();WY.exports=function(e,r){if(r.writeConcern!=null||r?.session?.transaction)return;let n=e.options.writeConcern??{};r7e.hasOwnKeys(n)?(r.writeConcern={},!("w"in r)&&n.w!=null&&(r.writeConcern.w=n.w),!("j"in r)&&n.j!=null&&(r.writeConcern.j=n.j),!("wtimeout"in r)&&n.wtimeout!=null&&(r.writeConcern.wtimeout=n.wtimeout)):(!("w"in r)&&n.w!=null&&(r.w=n.w),!("j"in r)&&n.j!=null&&(r.j=n.j),!("wtimeout"in r)&&n.wtimeout!=null&&(r.wtimeout=n.wtimeout))}});var HY=m((aje,KY)=>{"use strict";var zY=Qh();KY.exports=function(e,r,n){if(!Object.keys(n).some(zY))return r.castForQuery(null,n,e);let i=Object.keys(n),o=i.length;for(;o--;){let a=i[o],u=n[a];if(a==="$not"){if(u&&r&&!r.embeddedSchemaType&&!r.Constructor){let c=Object.keys(u);if(c.length&&zY(c[0]))for(let l of Object.keys(u))u[l]=r.castForQuery(l,u[l],e);else n[a]=r.castForQuery(a,u,e);continue}}else n[a]=r.castForQuery(a,u,e)}return n}});var JY=m((uje,GY)=>{"use strict";var n7e=/^\d+$/;GY.exports=function(e,r,n){let s=e.path(r);if(s!=null)return s;let i=r.split("."),o="",a=!1;for(let u of i)if(!(a&&n7e.test(u))){if(o=o.length===0?u:o+"."+u,s=e.path(o),s?.schema)e=s.schema,!a&&s.$isMongooseDocumentArray&&(a=!0),n&&n[o]&&(e=e.discriminators[n[o]]??e),o="";else if(s?.instance==="Mixed")break}return s}});var eQ=m((cje,ZY)=>{"use strict";var s7e=HY(),YY=Hh(),QY=JY(),i7e=Q7(),o7e=ae();ZY.exports=function(e){let r=e.options.arrayFilters;if(!Array.isArray(r))return;let n=e.getUpdate(),s=e.schema,i=i7e(n),o=s.options.strict;e._mongooseOptions.strict!=null&&(o=e._mongooseOptions.strict),e.model?.base.options.strictQuery!=null&&(o=e.model.base.options.strictQuery),s._userProvidedOptions.strictQuery!=null&&(o=s._userProvidedOptions.strictQuery),e._mongooseOptions.strictQuery!=null&&(o=e._mongooseOptions.strictQuery),XY(r,s,o,i,e)};function XY(t,e,r,n,s){let i={};for(let o of t){if(o==null)throw new Error(`Got null array filter in ${t}`);let a=Object.keys(o).filter(f=>o[f]!=null);if(a.length===0)continue;let u=a[0];if(u==="$and"||u==="$or"){for(let f of a)XY(o[f],e,r,n,s);continue}let c=u.indexOf("."),l=c===-1?u:u.substring(0,c);if(n[l]==null)continue;let p=YY(n[l]),d=QY(e,p,i),h=d!=null?d.schema:null;h?.discriminators!=null&&o[l+"."+h.options.discriminatorKey]&&(h=h.discriminators[o[l+"."+h.options.discriminatorKey]]||h,i[p]=o[l+"."+h.options.discriminatorKey]);for(let f of a){if(n[f]===null||o7e.hasOwnKeys(n)===!1)continue;let y=f.indexOf("."),g=y===-1?null:f.substring(y),_;if(g==null||h==null?_=d:(g=YY(g),_=QY(h,g,i)),_==null){if(!r)return;let S=g==null?p+".0":p+".0"+g;throw new Error(`Could not find path "${S}" in schema`)}typeof o[f]=="object"?o[f]=s7e(s,_,o[f]):o[f]=_.castForQuery(null,o[f])}}}});var ub=m((lje,tQ)=>{"use strict";var a7e=Kp(),u7e=jp();tQ.exports=function t(e){if(e==null)return!1;let r=Object.keys(e),n=r.length;if(n===0)return!1;for(let s=0;s<n;++s){let i=r[s];if(!i.startsWith("+")&&a7e(e[i])&&e[i])return u7e(e[i])?t(e[i]):!!e[i]}return!1}});var nQ=m((pje,rQ)=>{"use strict";rQ.exports=function(e,r){return e===r||r.startsWith(e+".")}});var sQ=m(er=>{"use strict";var A5=["__proto__","constructor","prototype"],cb=er.clone=function t(e,r){if(e==null)return e;if(Array.isArray(e))return er.cloneArray(e,r);if(e.constructor){if(/ObjectI[dD]$/.test(e.constructor.name))return typeof e.clone=="function"?e.clone():new e.constructor(e.id);if(e.constructor.name==="ReadPreference")return new e.constructor(e.mode,t(e.tags,r));if(e._bsontype=="Binary"&&e.buffer&&e.value)return typeof e.clone=="function"?e.clone():new e.constructor(e.value(!0),e.sub_type);if(e.constructor.name==="Date"||e.constructor.name==="Function")return new e.constructor(+e);if(e.constructor.name==="RegExp")return new RegExp(e);if(e.constructor.name==="Buffer")return Buffer.from(e)}if(l7e(e))return er.cloneObject(e,r);if(e.valueOf)return e.valueOf()};er.cloneObject=function(e,r){let n=r&&r.minimize,s={},i=Object.keys(e),o=i.length,a=!1,u,c="",l=0;for(l=0;l<o;++l)c=i[l],A5.indexOf(c)===-1&&(u=cb(e[c],r),(!n||typeof u<"u")&&(a||(a=!0),s[c]=u));return n?a&&s:s};er.cloneArray=function(e,r){let n=[],s=e.length,i=0;for(;i<s;i++)n.push(cb(e[i],r));return n};er.merge=function t(e,r){let n=Object.keys(r);for(let s of n)A5.indexOf(s)===-1&&(typeof e[s]>"u"?e[s]=r[s]:er.isObject(r[s])?t(e[s],r[s]):e[s]=r[s])};er.mergeClone=function t(e,r){let n=Object.keys(r);for(let s of n)A5.indexOf(s)===-1&&(typeof e[s]>"u"?e[s]=cb(r[s]):er.isObject(r[s])?t(e[s],r[s]):e[s]=cb(r[s]))};er.readPref=function(e){switch(e){case"p":e="primary";break;case"pp":e="primaryPreferred";break;case"s":e="secondary";break;case"sp":e="secondaryPreferred";break;case"n":e="nearest";break}return e};er.readConcern=function(e){if(typeof e=="string"){switch(e){case"l":e="local";break;case"a":e="available";break;case"m":e="majority";break;case"lz":e="linearizable";break;case"s":e="snapshot";break}e={level:e}}return e};var c7e=Object.prototype.toString;er.toString=function(t){return c7e.call(t)};var l7e=er.isObject=function(t){return er.toString(t)=="[object Object]"};er.keys=Object.keys;er.create=typeof Object.create=="function"?Object.create:p7e;function p7e(t){if(arguments.length>1)throw new Error("Adding properties is not supported");function e(){}return e.prototype=t,new e}er.inherits=function(t,e){t.prototype=er.create(e.prototype),t.prototype.constructor=t};er.isArgumentsObject=function(t){return Object.prototype.toString.call(t)==="[object Arguments]"}});var oQ=m(iQ=>{"use strict";var bt=iQ;bt.distinct=function(t){if(t._fields&&Object.keys(t._fields).length>0)return"field selection and slice";let e=Object.keys(bt.distinct),r;return e.every(function(n){return t.options[n]?(r=n,!1):!0}),r};bt.distinct.select=bt.distinct.slice=bt.distinct.sort=bt.distinct.limit=bt.distinct.skip=bt.distinct.batchSize=bt.distinct.hint=bt.distinct.tailable=!0;bt.findOneAndUpdate=bt.findOneAndDelete=function(t){let e=Object.keys(bt.findOneAndUpdate),r;return e.every(function(n){return t.options[n]?(r=n,!1):!0}),r};bt.findOneAndUpdate.limit=bt.findOneAndUpdate.skip=bt.findOneAndUpdate.batchSize=bt.findOneAndUpdate.tailable=!0;bt.findOneAndReplace=function(t){let e=Object.keys(bt.findOneAndUpdate),r;return e.every(function(n){return t.options[n]?(r=n,!1):!0}),r};bt.countDocuments=function(t){if(t._fields&&Object.keys(t._fields).length>0)return"field selection and slice";let e=Object.keys(bt.countDocuments),r;return e.every(function(n){return t.options[n]?(r=n,!1):!0}),r};bt.countDocuments.slice=bt.countDocuments.batchSize=bt.countDocuments.tailable=!0});var O5=m((Ti,aQ)=>{"use strict";Ti.isNode=typeof process<"u"&&typeof aQ=="object"&&typeof global=="object"&&typeof Buffer=="function"&&process.argv;Ti.isMongo=!Ti.isNode&&typeof printjson=="function"&&typeof ObjectId=="function"&&typeof rs=="function"&&typeof sh=="function";Ti.isBrowser=!Ti.isNode&&!Ti.isMongo&&typeof window<"u";Ti.type=Ti.isNode?"node":Ti.isMongo?"mongo":Ti.isBrowser?"browser":"unknown"});var Sf=m((uQ,cQ)=>{"use strict";var C5=["find","findOne","updateMany","updateOne","replaceOne","countDocuments","estimatedDocumentCount","distinct","findOneAndDelete","findOneAndReplace","findOneAndUpdate","aggregate","findCursor","deleteOne","deleteMany"];function v5(){}for(let t=0,e=C5.length;t<e;++t){let r=C5[t];v5.prototype[r]=d7e(r)}cQ.exports=uQ=v5;v5.methods=C5;function d7e(t){return function(){throw new Error("collection."+t+" not implemented")}}});var dQ=m((lQ,pQ)=>{"use strict";var h7e=Sf(),x5=class extends h7e{constructor(e){super(),this.collection=e,this.collectionName=e.collectionName}async find(e,r){return this.collection.find(e,r).toArray()}async findOne(e,r){return this.collection.findOne(e,r)}async countDocuments(e,r){return this.collection.countDocuments(e,r)}async estimatedDocumentCount(e,r){return this.collection.estimatedDocumentCount(e,r)}async distinct(e,r,n){return this.collection.distinct(e,r,n)}async updateMany(e,r,n){return this.collection.updateMany(e,r,n)}async updateOne(e,r,n){return this.collection.updateOne(e,r,n)}async replaceOne(e,r,n){return this.collection.replaceOne(e,r,n)}async deleteOne(e,r){return this.collection.deleteOne(e,r)}async deleteMany(e,r){return this.collection.deleteMany(e,r)}async findOneAndDelete(e,r){return this.collection.findOneAndDelete(e,r)}async findOneAndUpdate(e,r,n){return this.collection.findOneAndUpdate(e,r,n)}async findOneAndReplace(e,r,n){return this.collection.findOneAndReplace(e,r,n)}findCursor(e,r){return this.collection.find(e,r)}};pQ.exports=lQ=x5});var fQ=m((fje,hQ)=>{"use strict";var T5=O5();if(T5.type=="unknown")throw new Error("Unknown environment");hQ.exports=T5.isNode?dQ():T5.isMongo?Sf():Sf()});var B5=m((gQ,_Q)=>{"use strict";var f7e=require("assert"),yQ=require("util"),We=sQ(),Jo=yQ.debuglog("mquery");function q(t,e){if(!(this instanceof q))return new q(t,e);let r=this.constructor.prototype;this.op=r.op||void 0,this.options=Object.assign({},r.options),this._conditions=r._conditions?We.clone(r._conditions):{},this._fields=r._fields?We.clone(r._fields):void 0,this._updateDoc=r._updateDoc?We.clone(r._updateDoc):void 0,this._path=r._path||void 0,this._distinctDoc=r._distinctDoc||void 0,this._collection=r._collection||void 0,this._traceFunction=r._traceFunction||void 0,e&&this.setOptions(e),t&&this.find(t)}q.prototype.toConstructor=function(){function e(n,s){if(!(this instanceof e))return new e(n,s);q.call(this,n,s)}We.inherits(e,q);let r=e.prototype;return r.options={},r.setOptions(this.options),r.op=this.op,r._conditions=We.clone(this._conditions),r._fields=We.clone(this._fields),r._updateDoc=We.clone(this._updateDoc),r._path=this._path,r._distinctDoc=this._distinctDoc,r._collection=this._collection,r._traceFunction=this._traceFunction,e};q.prototype.setOptions=function(t){if(!(t&&We.isObject(t)))return this;let e=We.keys(t),r;for(let n=0;n<e.length;++n)if(r=e[n],typeof this[r]=="function"){let s=Array.isArray(t[r])?t[r]:[t[r]];this[r].apply(this,s)}else this.options[r]=t[r];return this};q.prototype.collection=function(e){return this._collection=new q.Collection(e),this};q.prototype.collation=function(t){return this.options.collation=t,this};q.prototype.$where=function(t){return this._conditions.$where=t,this};q.prototype.where=function(){if(!arguments.length)return this;this.op||(this.op="find");let t=typeof arguments[0];if(t=="string")return this._path=arguments[0],arguments.length===2&&(this._conditions[this._path]=arguments[1]),this;if(t=="object"&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw new TypeError("path must be a string or object")};q.prototype.equals=function(e){this._ensurePath("equals");let r=this._path;return this._conditions[r]=e,this};q.prototype.eq=function(e){this._ensurePath("eq");let r=this._path;return this._conditions[r]=e,this};q.prototype.or=function(e){let r=this._conditions.$or||(this._conditions.$or=[]);return Array.isArray(e)||(e=[e]),r.push.apply(r,e),this};q.prototype.nor=function(e){let r=this._conditions.$nor||(this._conditions.$nor=[]);return Array.isArray(e)||(e=[e]),r.push.apply(r,e),this};q.prototype.and=function(e){let r=this._conditions.$and||(this._conditions.$and=[]);return Array.isArray(e)||(e=[e]),r.push.apply(r,e),this};"gt gte lt lte ne in nin all regex size maxDistance minDistance".split(" ").forEach(function(t){q.prototype[t]=function(){let e,r;arguments.length===1?(this._ensurePath(t),r=arguments[0],e=this._path):(r=arguments[1],e=arguments[0]);let n=this._conditions[e]===null||typeof this._conditions[e]=="object"?this._conditions[e]:this._conditions[e]={};return n["$"+t]=r,this}});q.prototype.mod=function(){let t,e;arguments.length===1?(this._ensurePath("mod"),t=arguments[0],e=this._path):arguments.length===2&&!Array.isArray(arguments[1])?(this._ensurePath("mod"),t=[arguments[0],arguments[1]],e=this._path):arguments.length===3?(t=[arguments[1],arguments[2]],e=arguments[0]):(t=arguments[1],e=arguments[0]);let r=this._conditions[e]||(this._conditions[e]={});return r.$mod=t,this};q.prototype.exists=function(){let t,e;arguments.length===0?(this._ensurePath("exists"),t=this._path,e=!0):arguments.length===1?typeof arguments[0]=="boolean"?(this._ensurePath("exists"),t=this._path,e=arguments[0]):(t=arguments[0],e=!0):arguments.length===2&&(t=arguments[0],e=arguments[1]);let r=this._conditions[t]||(this._conditions[t]={});return r.$exists=e,this};q.prototype.elemMatch=function(){if(arguments[0]==null)throw new TypeError("Invalid argument");let t,e,r;if(typeof arguments[0]=="function")this._ensurePath("elemMatch"),e=this._path,t=arguments[0];else if(We.isObject(arguments[0]))this._ensurePath("elemMatch"),e=this._path,r=arguments[0];else if(typeof arguments[1]=="function")e=arguments[0],t=arguments[1];else if(arguments[1]&&We.isObject(arguments[1]))e=arguments[0],r=arguments[1];else throw new TypeError("Invalid argument");t&&(r=new q,t(r),r=r._conditions);let n=this._conditions[e]||(this._conditions[e]={});return n.$elemMatch=r,this};q.prototype.within=function(){if(this._ensurePath("within"),this._geoComparison="$geoWithin",arguments.length===0)return this;if(arguments.length===2)return this.box.apply(this,arguments);if(2<arguments.length)return this.polygon.apply(this,arguments);let e=arguments[0];if(!e)throw new TypeError("Invalid argument");if(e.center)return this.circle(e);if(e.box)return this.box.apply(this,e.box);if(e.polygon)return this.polygon.apply(this,e.polygon);if(e.type&&e.coordinates)return this.geometry(e);throw new TypeError("Invalid argument")};q.prototype.box=function(){let t,e;if(arguments.length===3)t=arguments[0],e=[arguments[1],arguments[2]];else if(arguments.length===2)this._ensurePath("box"),t=this._path,e=[arguments[0],arguments[1]];else throw new TypeError("Invalid argument");let r=this._conditions[t]||(this._conditions[t]={});return r[this._geoComparison||"$geoWithin"]={$box:e},this};q.prototype.polygon=function(){let t,e;typeof arguments[0]=="string"?(t=Array.from(arguments),e=t.shift()):(this._ensurePath("polygon"),e=this._path,t=Array.from(arguments));let r=this._conditions[e]||(this._conditions[e]={});return r[this._geoComparison||"$geoWithin"]={$polygon:t},this};q.prototype.circle=function(){let t,e;if(arguments.length===1)this._ensurePath("circle"),t=this._path,e=arguments[0];else if(arguments.length===2)t=arguments[0],e=arguments[1];else throw new TypeError("Invalid argument");if(!("radius"in e&&e.center))throw new Error("center and radius are required");let r=this._conditions[t]||(this._conditions[t]={}),n=e.spherical?"$centerSphere":"$center",s=this._geoComparison||"$geoWithin";return r[s]={},r[s][n]=[e.center,e.radius],"unique"in e&&(r[s].$uniqueDocs=!!e.unique),this};q.prototype.near=function(){let e,r;if(this._geoComparison="$near",arguments.length===0)return this;if(arguments.length===1)this._ensurePath("near"),e=this._path,r=arguments[0];else if(arguments.length===2)e=arguments[0],r=arguments[1];else throw new TypeError("Invalid argument");if(!r.center)throw new Error("center is required");let n=this._conditions[e]||(this._conditions[e]={}),s=r.spherical?"$nearSphere":"$near";if(Array.isArray(r.center)){n[s]=r.center;let i="maxDistance"in r?r.maxDistance:null;i!=null&&(n.$maxDistance=i),r.minDistance!=null&&(n.$minDistance=r.minDistance)}else{if(r.center.type!="Point"||!Array.isArray(r.center.coordinates))throw new Error(yQ.format("Invalid GeoJSON specified for %s",s));n[s]={$geometry:r.center},"maxDistance"in r&&(n[s].$maxDistance=r.maxDistance),"minDistance"in r&&(n[s].$minDistance=r.minDistance)}return this};q.prototype.intersects=function(){if(this._ensurePath("intersects"),this._geoComparison="$geoIntersects",arguments.length===0)return this;let e=arguments[0];if(e!=null&&e.type&&e.coordinates)return this.geometry(e);throw new TypeError("Invalid argument")};q.prototype.geometry=function(){if(!(this._geoComparison=="$within"||this._geoComparison=="$geoWithin"||this._geoComparison=="$near"||this._geoComparison=="$geoIntersects"))throw new Error("geometry() must come after `within()`, `intersects()`, or `near()");let e,r;if(arguments.length===1)this._ensurePath("geometry"),r=this._path,e=arguments[0];else throw new TypeError("Invalid argument");if(!(e.type&&Array.isArray(e.coordinates)))throw new TypeError("Invalid argument");let n=this._conditions[r]||(this._conditions[r]={});return n[this._geoComparison]={$geometry:e},this};q.prototype.select=function(){let e=arguments[0];if(!e)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");let r=this._fields||(this._fields={}),n=typeof e,s,i;if((n=="string"||We.isArgumentsObject(e))&&typeof e.length=="number"||Array.isArray(e)){for(n=="string"&&(e=e.split(/\s+/)),s=0,i=e.length;s<i;++s){let o=e[s];if(!o)continue;let a=o[0]=="-"?0:1;a===0&&(o=o.substring(1)),r[o]=a}return this}if(We.isObject(e)){let o=We.keys(e);for(s=0;s<o.length;++s)r[o[s]]=e[o[s]];return this}throw new TypeError("Invalid select() argument. Must be string or object.")};q.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let t,e;if(arguments.length===1){let n=arguments[0];if(typeof n=="object"&&!Array.isArray(n)){let s=Object.keys(n),i=s.length;for(let o=0;o<i;++o)this.slice(s[o],n[s[o]]);return this}this._ensurePath("slice"),t=this._path,e=arguments[0]}else arguments.length===2?typeof arguments[0]=="number"?(this._ensurePath("slice"),t=this._path,e=[arguments[0],arguments[1]]):(t=arguments[0],e=arguments[1]):arguments.length===3&&(t=arguments[0],e=[arguments[1],arguments[2]]);let r=this._fields||(this._fields={});return r[t]={$slice:e},this};q.prototype.sort=function(t){if(!t)return this;let e,r,n;this._validate("sort");let s=typeof t;if(Array.isArray(t)){for(r=t.length,e=0;e<t.length;++e){if(!Array.isArray(t[e]))throw new Error("Invalid sort() argument, must be array of arrays");m7e(this.options,t[e][0],t[e][1])}return this}if(arguments.length===1&&s=="string"){for(t=t.split(/\s+/),r=t.length,e=0;e<r;++e){if(n=t[e],!n)continue;let i=n[0]=="-"?-1:1;i===-1&&(n=n.substring(1)),mQ(this.options,n,i)}return this}if(We.isObject(t)){let i=We.keys(t);for(e=0;e<i.length;++e)n=i[e],mQ(this.options,n,t[n]);return this}if(typeof Map<"u"&&t instanceof Map)return y7e(this.options,t),this;throw new TypeError("Invalid sort() argument. Must be a string, object, or array.")};var D5={1:1,"-1":-1,asc:1,ascending:1,desc:-1,descending:-1};function mQ(t,e,r){if(Array.isArray(t.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let n;if(r&&r.$meta){n=t.sort||(t.sort={}),n[e]={$meta:r.$meta};return}n=t.sort||(t.sort={});let s=String(r||1).toLowerCase();if(s=D5[s],!s)throw new TypeError("Invalid sort value: { "+e+": "+r+" }");n[e]=s}function m7e(t,e,r){if(t.sort=t.sort||[],!Array.isArray(t.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let n=String(r||1).toLowerCase();if(n=D5[n],!n)throw new TypeError("Invalid sort value: [ "+e+", "+r+" ]");t.sort.push([e,n])}function y7e(t,e){if(t.sort=t.sort||new Map,!(t.sort instanceof Map))throw new TypeError("Can't mix sort syntaxes. Use either array or object or map consistently");e.forEach(function(r,n){let s=String(r||1).toLowerCase();if(s=D5[s],!s)throw new TypeError("Invalid sort value: < "+n+": "+r+" >");t.sort.set(n,s)})}["limit","skip","batchSize","comment"].forEach(function(t){q.prototype[t]=function(e){return this._validate(t),this.options[t]=e,this}});q.prototype.maxTime=q.prototype.maxTimeMS=function(t){return this._validate("maxTime"),this.options.maxTimeMS=t,this};q.prototype.hint=function(){if(arguments.length===0)return this;this._validate("hint");let t=arguments[0];if(We.isObject(t)){let e=this.options.hint||(this.options.hint={});for(let r in t)e[r]=t[r];return this}if(typeof t=="string")return this.options.hint=t,this;throw new TypeError("Invalid hint. "+t)};q.prototype.j=function(e){return this.options.j=e,this};q.prototype.slaveOk=function(t){return this.options.slaveOk=arguments.length?!!t:!0,this};q.prototype.read=q.prototype.setReadPreference=function(t){return arguments.length>1&&!q.prototype.read.deprecationWarningIssued&&(console.error("Deprecation warning: 'tags' argument is not supported anymore in Query.read() method. Please use mongodb.ReadPreference object instead."),q.prototype.read.deprecationWarningIssued=!0),this.options.readPreference=We.readPref(t),this};q.prototype.readConcern=q.prototype.r=function(t){return this.options.readConcern=We.readConcern(t),this};q.prototype.tailable=function(){return this._validate("tailable"),this.options.tailable=arguments.length?!!arguments[0]:!0,this};q.prototype.writeConcern=q.prototype.w=function(e){return typeof e=="object"?(typeof e.j<"u"&&(this.options.j=e.j),typeof e.w<"u"&&(this.options.w=e.w),typeof e.wtimeout<"u"&&(this.options.wtimeout=e.wtimeout)):this.options.w=e==="m"?"majority":e,this};q.prototype.wtimeout=q.prototype.wTimeout=function(e){return this.options.wtimeout=e,this};q.prototype.merge=function(t){if(!t)return this;if(!q.canMerge(t))throw new TypeError("Invalid argument. Expected instanceof mquery or plain object");return t instanceof q?(t._conditions&&We.merge(this._conditions,t._conditions),t._fields&&(this._fields||(this._fields={}),We.merge(this._fields,t._fields)),t.options&&(this.options||(this.options={}),We.merge(this.options,t.options)),t._updateDoc&&(this._updateDoc||(this._updateDoc={}),We.mergeClone(this._updateDoc,t._updateDoc)),t._distinctDoc&&(this._distinctDoc=t._distinctDoc),this):(We.merge(this._conditions,t),this)};q.prototype.find=function(t){return this.op="find",q.canMerge(t)&&this.merge(t),this};q.prototype._find=async function(){let e=this._conditions,r=this._optionsForExec();return this.$useProjection?r.projection=this._fieldsForExec():r.fields=this._fieldsForExec(),Jo("find",this._collection.collectionName,e,r),this._collection.find(e,r)};q.prototype.cursor=function(e){if(this.op){if(this.op!=="find")throw new TypeError(".cursor only support .find method")}else this.find(e);let r=this._conditions,n=this._optionsForExec();return this.$useProjection?n.projection=this._fieldsForExec():n.fields=this._fieldsForExec(),Jo("findCursor",this._collection.collectionName,r,n),this._collection.findCursor(r,n)};q.prototype.findOne=function(t){return this.op="findOne",q.canMerge(t)&&this.merge(t),this};q.prototype._findOne=async function(){let e=this._conditions,r=this._optionsForExec();return this.$useProjection?r.projection=this._fieldsForExec():r.fields=this._fieldsForExec(),Jo("findOne",this._collection.collectionName,e,r),this._collection.findOne(e,r)};q.prototype.countDocuments=function(t){return this.op="countDocuments",this._validate(),q.canMerge(t)&&this.merge(t),this};q.prototype._countDocuments=async function(){let e=this._conditions,r=this._optionsForExec();return Jo("countDocuments",this._collection.collectionName,e,r),this._collection.countDocuments(e,r)};q.prototype.estimatedDocumentCount=function(){return this.op="estimatedDocumentCount",this._validate(),this};q.prototype._estimatedDocumentCount=async function(){let e=this._conditions,r=this._optionsForExec();return Jo("estimatedDocumentCount",this._collection.collectionName,e,r),this._collection.estimatedDocumentCount(e,r)};q.prototype.distinct=function(t,e){return this.op="distinct",this._validate(),!e&&typeof t=="string"&&(e=t,t=void 0),typeof e=="string"&&(this._distinctDoc=e),q.canMerge(t)&&this.merge(t),this};q.prototype._distinct=async function(){if(!this._distinctDoc)throw new Error("No value for `distinct` has been declared");let e=this._conditions,r=this._optionsForExec();return this._collection.distinct(this._distinctDoc,e,r)};q.prototype.updateMany=function(e,r,n){return M5(this,"updateMany",e,r,n)};q.prototype._updateMany=async function(){return P5(this,"updateMany")};q.prototype.updateOne=function(e,r,n){return M5(this,"updateOne",e,r,n)};q.prototype._updateOne=async function(){return P5(this,"updateOne")};q.prototype.replaceOne=function(e,r,n){return this.setOptions({overwrite:!0}),M5(this,"replaceOne",e,r,n)};q.prototype._replaceOne=async function(){return P5(this,"replaceOne")};function M5(t,e,r,n,s){return t.op=e,q.canMerge(r)&&t.merge(r),n&&t._mergeUpdate(n),We.isObject(s)&&t.setOptions(s),t}async function P5(t,e){let r=t._optionsForExec(),n=t._conditions,s=t._updateForExec();return Jo(e,t._collection.collectionName,n,s,r),t._collection[e](n,s,r)}q.prototype.deleteOne=function(t){return this.op="deleteOne",q.canMerge(t)&&this.merge(t),this};q.prototype._deleteOne=async function(){let t=this._optionsForExec();delete t.justOne;let e=this._conditions;return Jo("deleteOne",this._collection.collectionName,e,t),this._collection.deleteOne(e,t)};q.prototype.deleteMany=function(t){return this.op="deleteMany",q.canMerge(t)&&this.merge(t),this};q.prototype._deleteMany=async function(){let t=this._optionsForExec();delete t.justOne;let e=this._conditions;return this._collection.deleteMany(e,t)};q.prototype.findOneAndUpdate=function(t,e,r){return this.op="findOneAndUpdate",this._validate(),q.canMerge(t)&&this.merge(t),e&&this._mergeUpdate(e),r&&this.setOptions(r),this};q.prototype._findOneAndUpdate=async function(){let t=this._conditions,e=this._updateForExec(),r=this._optionsForExec();return this._collection.findOneAndUpdate(t,e,r)};q.prototype.findOneAndReplace=function(t,e,r){return this.op="findOneAndReplace",this._validate(),q.canMerge(t)&&this.merge(t),e&&(this._updateDoc=e,this.options=this.options||{},this.options.overwrite=!0),r&&this.setOptions(r),this};q.prototype._findOneAndReplace=async function(){let t=this._conditions,e=this._updateForExec(),r=this._optionsForExec();return Jo("findOneAndReplace",this._collection.collectionName,t,e,r),this._collection.findOneAndReplace(t,e,r)};q.prototype.findOneAndDelete=function(t,e){return this.op="findOneAndDelete",this._validate(),q.canMerge(t)&&this.merge(t),e&&this.setOptions(e),this};q.prototype._findOneAndDelete=async function(){let t=this._optionsForExec(),e=this._conditions;return Jo("findOneAndDelete",this._collection.collectionName,e,t),this._collection.findOneAndDelete(e,t)};q.prototype.setTraceFunction=function(t){return this._traceFunction=t,this};q.prototype.exec=async function(e){typeof e=="string"&&(this.op=e),f7e.ok(this.op,"Missing query type: (find, etc)");let r="_"+this.op;if(typeof this[r]!="function")throw new TypeError(`this[${r}] is not a function`);return this[r]()};q.prototype.then=async function(t,e){return this.exec().then(t,e)};q.prototype.cursor=function(){if(this.op!="find")throw new Error("cursor() is only available for find");let t=this._conditions,e=this._optionsForExec();return this.$useProjection?e.projection=this._fieldsForExec():e.fields=this._fieldsForExec(),this._collection.findCursor(t,e)};q.prototype.selected=function(){return!!(this._fields&&Object.keys(this._fields).length>0)};q.prototype.selectedInclusively=function(){if(!this._fields)return!1;let e=Object.keys(this._fields);if(e.length===0)return!1;for(let r=0;r<e.length;++r){let n=e[r];if(this._fields[n]===0||this._fields[n]&&typeof this._fields[n]=="object"&&this._fields[n].$meta)return!1}return!0};q.prototype.selectedExclusively=function(){if(!this._fields)return!1;let e=Object.keys(this._fields);if(e.length===0)return!1;for(let r=0;r<e.length;++r){let n=e[r];if(this._fields[n]===0)return!0}return!1};q.prototype._mergeUpdate=function(t){this._updateDoc||(this._updateDoc={}),t instanceof q?t._updateDoc&&We.mergeClone(this._updateDoc,t._updateDoc):We.mergeClone(this._updateDoc,t)};q.prototype._optionsForExec=function(){return We.clone(this.options)};q.prototype._fieldsForExec=function(){return We.clone(this._fields)};q.prototype._updateForExec=function(){let t=this._updateDoc==null?{}:We.clone(this._updateDoc),e=We.keys(t),r={};for(let n of e){if(this.options.overwrite){r[n]=t[n];continue}n[0]!=="$"?(r.$set||(t.$set?r.$set=t.$set:r.$set={}),r.$set[n]=t[n],~e.indexOf("$set")||e.push("$set")):n==="$set"&&r.$set||(r[n]=t[n])}return this._compiledUpdate=r,r};q.prototype._ensurePath=function(t){if(!this._path){let e=t+"() must be used after where() when called with these arguments";throw new Error(e)}};q.permissions=oQ();q._isPermitted=function(t,e){let r=q.permissions[e];return r?r[t]!==!0:!0};q.prototype._validate=function(t){let e,r;if(t===void 0){if(r=q.permissions[this.op],typeof r!="function")return!0;e=r(this)}else q._isPermitted(t,this.op)||(e=t);if(e)throw new Error(e+" cannot be used with "+this.op)};q.canMerge=function(t){return t instanceof q||We.isObject(t)};q.setGlobalTraceFunction=function(t){q.traceFunction=t};q.utils=We;q.env=O5();q.Collection=fQ();q.BaseCollection=Sf();_Q.exports=gQ=q});var I5=m((mje,EQ)=>{"use strict";EQ.exports=function(e,r){if(typeof e==="string"&&(e=e.split(/\s+/)),!Array.isArray(e)&&Object.prototype.toString.call(e)!=="[object Arguments]")return e;let s=e.length,i={};for(let o=0;o<s;++o){let a=e[o];if(!a)continue;let u=a[0]=="-"?0:1;!r&&u===0&&(a=a.substring(1)),i[a]=u}return i}});var wQ=m((yje,SQ)=>{"use strict";SQ.exports=function(e,r){let n=Object.keys(e).map(s=>Object.keys(e[s])).reduce((s,i)=>s.concat(i),[]);return r.filter(s=>bQ(s,n))};function bQ(t,e){let r=Object.keys(t)[0];if(r==="$and"||r==="$or")return Array.isArray(t[r])?t[r].find(i=>bQ(i,e))!=null:!1;let n=r.indexOf("."),s=n===-1?r:r.slice(0,n);return e.find(i=>i.includes("$["+s+"]"))!=null}});var lb=m((gje,AQ)=>{"use strict";AQ.exports=function(e){if(typeof e!="object"||e===null)return!1;let r=Object.keys(e),n=r.length;for(let s=0;s<n;++s)if(r[s][0]==="$")return!0;return!1}});var N5=m((_je,OQ)=>{"use strict";var g7e=be(),_7e=lb(),{trustedSymbol:E7e}=Lp();OQ.exports=function t(e){if(e==null||typeof e!="object")return e;if(Array.isArray(e)){for(let n of e)t(n);return e}let r=Object.keys(e);for(let n of r){let s=e[n];if(!s?.[E7e]){if(n==="$and"||n==="$or"||n==="$nor"){t(s);continue}else if(n==="$jsonSchema"||n==="$where"||n==="$expr"||n==="$text")throw new g7e(n+" is not allowed with sanitizeFilter");if(_7e(s)){let i=Object.keys(s);if(i.length===1&&i[0]==="$eq")continue;e[n]={$eq:e[n]}}}}return e}});var vQ=m((Eje,CQ)=>{"use strict";CQ.exports=function(e){if(e==null)return;let r=Object.keys(e);for(let n=0;n<r.length;++n)typeof e[r[n]]=="string"&&(e[r[n]]=1)}});var DQ=m((bje,TQ)=>{"use strict";var b7e=Hp(),S7e=ub();TQ.exports=function(e,r,n){if(n==null)return;let s=Object.keys(n);if(r=r||{},S7e(e))for(let i of s){xQ(r,i)?r[i]===0&&delete e[i]:e[i]=1;let o=n[i]?.refPath;typeof o=="string"&&(xQ(r,o)?r[o]===0&&delete e[o]:e[o]=1)}else if(b7e(e))for(let i of s){r[i]==null&&delete e[i];let o=n[i]?.refPath;typeof o=="string"&&r[o]==null&&delete e[o]}};function xQ(t,e){let r=e.split("."),n=r.length,s=r[0];for(let i=1;i<n;++i){if(t[s]!=null||t[s+".$"]!=null)return!0;s+="."+r[i]}return t[s]!=null||t[s+".$"]!=null}});var IQ=m((Sje,BQ)=>{"use strict";var MQ=yc(),w7e=Hh(),PQ=W_().flatten;BQ.exports=async function(e,r,n,s){let i=Object.keys(n||{}),o={},a={},u={},c={},l=i.length,p=!1,d,h;for(let A=0;A<l;++A)if(i[A].startsWith("$")){if(p=!0,i[A]==="$push"||i[A]==="$addToSet"){let M=Object.keys(n[i[A]]);for(let I=0;I<M.length;++I)d=n[i[A]][M[I]],d?.$each?c[M[I]]=(c[M[I]]||[]).concat(d.$each):c[M[I]]=(c[M[I]]||[]).concat([d]);continue}let x=PQ(n[i[A]],null,null,r),v=Object.keys(x),R=v.length;for(let M=0;M<R;++M){let I=w7e(v[M]);h=i[A],!I.includes("$")&&(h==="$set"||h==="$setOnInsert"||h==="$pull"||h==="$pullAll"?(a[I]=x[v[M]],u[I]=h==="$pull"||h==="$pullAll"):h==="$unset"&&(a[I]=void 0),o[I]=!0)}}p||(a=PQ(n,null,null,r),o=Object.keys(a));let f=Object.keys(a),y=f.length,g=[],_=[],S=[],O=e;for(let A=0;A<y;++A){let x=a[f[A]],v=r._getSchema(f[A]);if(v!=null&&!(v.instance==="Mixed"&&v.path!==f[A]))if(x&&Array.isArray(x.$in))x.$in.forEach((R,M)=>{g.push(v.doValidate(R,O,{updateValidator:!0}).catch(I=>{I.path=f[M]+".$in."+M,_.push(I)}))});else{if(u[f[A]]&&v.$isMongooseArray)continue;if(v.$isMongooseDocumentArrayElement&&x?.$__!=null)S.push(f[A]),g.push(v.doValidate(x,O,{updateValidator:!0}).catch(R=>{if(R.errors)for(let M of Object.keys(R.errors)){let I=R.errors[M];I.path=f[A]+"."+M,_.push(I)}else R.path=f[A],_.push(R)}));else{if(S.find(M=>f[A].startsWith(M+".")))continue;v.$isSingleNested&&S.push(f[A]),g.push(v.doValidate(x,O,{updateValidator:!0}).catch(M=>{v.schema!=null&&v.schema.options.storeSubdocValidationError===!1&&M instanceof MQ||M&&(M.path=f[A],_.push(M))}))}}}let E=Object.keys(c);for(let A of E){let x=r._getSchema(A);if(x&&x.$isMongooseDocumentArray)g.push(x.doValidate(c[A],s?.context==="query"?e:null).catch(v=>{v.path=A,_.push(v)}));else{x=r._getSchema(A+".0");for(let v of c[A])g.push(x.doValidate(v,s?.context==="query"?e:null,{updateValidator:!0}).catch(R=>{R.path=A,_.push(R)}))}}if(await Promise.all(g),_.length){let A=new MQ(null);for(let x of _)A.addError(x.path,x);throw A}}});var fb=m((wje,HQ)=>{"use strict";var wf=sn(),A7e=b_(),R5=fc(),tr=be(),Yo=$_(),NQ=jY(),kQ=yc(),{applyGlobalMaxTimeMS:Af,applyGlobalDiskUse:Of}=b5(),O7e=$x(),C7e=S5(),v7e=w5(),x7e=xc(),T7e=eQ(),db=Jh(),D7e=i5(),zn=vt(),M7e=Us(),Cf=qh(),P7e=bi().internalToObjectOptions,B7e=Hp(),I7e=ub(),N7e=H_(),RQ=nQ(),$Q=fs(),hb=B5(),k7e=I5(),R7e=wQ(),F7e=N5(),$7e=vQ(),q7e=DQ(),qQ=a5(),pb=dc(),j7e=IQ(),E1=require("util"),Re=ae(),L7e=Gh().queryMiddlewareFunctions,U7e=new Set(["allowDiskUse","batchSize","collation","comment","explain","hint","j","lean","limit","maxTimeMS","populate","projection","read","select","skip","slice","sort","tailable","w","writeConcern","wtimeout"]),V7e=new Map([["countDocuments","_countDocuments"],["distinct","__distinct"],["estimatedDocumentCount","_estimatedDocumentCount"],["find","_find"],["findOne","_findOne"],["findOneAndReplace","_findOneAndReplace"],["findOneAndUpdate","_findOneAndUpdate"],["replaceOne","_replaceOne"],["updateMany","_updateMany"],["updateOne","_updateOne"],["deleteMany","_deleteMany"],["deleteOne","_deleteOne"],["findOneAndDelete","_findOneAndDelete"]]);function $(t,e,r,n){this._mongooseOptions||(this._mongooseOptions={}),e=e||{},this._transforms=[],this._hooks=new R5,this._execCount=0;let s=Object.keys(e);for(let o of s)this._mongooseOptions[o]=e[o];n&&(this.mongooseCollection=n),r&&(this.model=r,this.schema=r.schema),this.model?._mapreduce&&this.lean(),hb.call(this,null,e),n&&this.collection(n),t&&this.find(t),this.options=this.options||{},this.$useProjection=!0;let i=this?.schema?.options?.collation||null;i!=null&&(this.options.collation=i)}function jQ(t){if(t==null||typeof t!="object"||Re.hasOwnKeys(t)===!1)return!0;for(let e of["$and","$or","$nor"])if(Array.isArray(t[e])&&(t[e].length===0||t[e].every(r=>jQ(r))))return!0;return!1}function b1(t,e){if(e?.requireFilter&&jQ(t))throw new Error("Empty or invalid filter not allowed with requireFilter enabled")}$.prototype=new hb;$.prototype.constructor=$;$.prototype.count=void 0;$.prototype.findOneAndRemove=void 0;$.base=hb.prototype;Object.defineProperty($.prototype,"_distinct",{configurable:!0,writable:!0,enumerable:!0,value:void 0});$.use$geoWithin=hb.use$geoWithin;$.prototype.toConstructor=function(){let e=this.model,r=this.mongooseCollection,n=function(o,a){if(!(this instanceof n))return new n(o,a);this._mongooseOptions=zn(s._mongooseOptions),$.call(this,o,a||null,e,r)};E1.inherits(n,e.Query);let s=n.prototype;s.options={};let i=Object.assign({},this.options);return i.sort!=null&&(s.sort(i.sort),delete i.sort),s.setOptions(i),s.op=this.op,s._conditions=zn(this._conditions),s._fields=zn(this._fields),s._update=zn(this._update,{flattenDecimals:!1}),s._path=this._path,s._distinct=this._distinct,s._collection=this._collection,s._mongooseOptions=this._mongooseOptions,n};$.prototype.clone=function(){let t=this.model,e=this.mongooseCollection,r=new this.model.Query({},{},t,e),n=Object.assign({},this.options);return n.sort!=null&&(r.sort(n.sort),delete n.sort),r.setOptions(n),r.op=this.op,r._conditions=zn(this._conditions),r._fields=zn(this._fields),r._update=zn(this._update,{flattenDecimals:!1}),r._path=this._path,r._distinct=this._distinct,r._collection=this._collection,r._mongooseOptions=this._mongooseOptions,r};$.prototype.slice=function(...t){if(t.length===0)return this;this._validate("slice");let e,r;if(t.length===1){let s=t[0];if(typeof s=="object"&&!Array.isArray(s)){let i=Object.keys(s),o=i.length;for(let a=0;a<o;++a)this.slice(i[a],s[i[a]]);return this}this._ensurePath("slice"),e=this._path,r=t[0]}else t.length===2?typeof t[0]=="number"?(this._ensurePath("slice"),e=this._path,r=[t[0],t[1]]):(e=t[0],r=t[1]):t.length===3&&(e=t[0],r=[t[1],t[2]]);let n={};return n[e]={$slice:r},this.select(n),this};var W7e=new Set(L7e);$.prototype._validateOp=function(){if(this.op!=null&&!W7e.has(this.op)&&this.error(new Error('Query has invalid `op`: "'+this.op+'"')),this.op!=="estimatedDocumentCount"&&this._conditions==null)throw new Yo(this._conditions,"filter",this.op)};$.prototype.mod=function(){let t,e;arguments.length===1?(this._ensurePath("mod"),t=arguments[0],e=this._path):arguments.length===2&&!Array.isArray(arguments[1])?(this._ensurePath("mod"),t=[arguments[0],arguments[1]],e=this._path):arguments.length===3?(t=[arguments[1],arguments[2]],e=arguments[0]):(t=arguments[1],e=arguments[0]);let r=this._conditions[e]||(this._conditions[e]={});return r.$mod=t,this};$.prototype.limit=function(e){if(this._validate("limit"),typeof e=="string")try{e=db(e)}catch{throw new wf("Number",e,"limit")}return this.options.limit=e,this};$.prototype.skip=function(e){if(this._validate("skip"),typeof e=="string")try{e=db(e)}catch{throw new wf("Number",e,"skip")}return this.options.skip=e,this};$.prototype.projection=function(t){return arguments.length===0?this._fields:(this._fields={},this._userProvidedFields={},this.select(t),this._fields)};$.prototype.select=function(){let e=arguments[0];if(!e)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");let r=this._fields||(this._fields={}),n=this._userProvidedFields||(this._userProvidedFields={}),s;this.model!=null&&Re.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection")?s=this.model.db.options.sanitizeProjection:this.model!=null&&Re.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection")?s=this.model.base.options.sanitizeProjection:s=this._mongooseOptions.sanitizeProjection;function i(o){return typeof o=="string"&&s?o=1:o}if(e=k7e(e,!0),Re.isObject(e)){if(this.selectedInclusively())Object.entries(e).forEach(([o,a])=>{a?(r["-"+o]!=null&&delete r["-"+o],r[o]=n[o]=i(a)):Object.keys(n).forEach(u=>{RQ(o,u)&&(delete r[u],delete n[u])})});else if(this.selectedExclusively())Object.entries(e).forEach(([o,a])=>{a?Object.keys(n).forEach(u=>{RQ(o,u)&&(delete r[u],delete n[u])}):(r["+"+o]!=null&&delete r["+"+o],r[o]=n[o]=i(a))});else{let o=Object.keys(e);for(let a=0;a<o.length;++a){let u=e[o[a]],c=o[a];r[c]=i(u),n[c]=i(u)}}return this}throw new TypeError("Invalid select() argument. Must be string or object.")};$.prototype.schemaLevelProjections=function(e){return this._mongooseOptions.schemaLevelProjections=e,this};$.prototype.sanitizeProjection=function(e){return this._mongooseOptions.sanitizeProjection=e,this};$.prototype.read=function(e,r){return typeof e=="string"?(e=O7e(e),this.options.readPreference={mode:e,tags:r}):this.options.readPreference=e,this};$.prototype.toString=function(){return this.op==="count"||this.op==="countDocuments"||this.op==="find"||this.op==="findOne"||this.op==="deleteMany"||this.op==="deleteOne"||this.op==="findOneAndDelete"||this.op==="remove"?`${this.model.modelName}.${this.op}(${E1.inspect(this._conditions)})`:this.op==="distinct"?`${this.model.modelName}.distinct('${this._distinct}', ${E1.inspect(this._conditions)})`:this.op==="findOneAndReplace"||this.op==="findOneAndUpdate"||this.op==="replaceOne"||this.op==="update"||this.op==="updateMany"||this.op==="updateOne"?`${this.model.modelName}.${this.op}(${E1.inspect(this._conditions)}, ${E1.inspect(this._update)})`:`${this.model.modelName}.${this.op}()`};$.prototype.session=function(e){return e==null&&delete this.options.session,this.options.session=e,this};$.prototype.writeConcern=function(e){return e==null?(delete this.options.writeConcern,this):(this.options.writeConcern=e,this)};$.prototype.w=function(e){return e==null&&delete this.options.w,this.options.writeConcern!=null?this.options.writeConcern.w=e:this.options.w=e,this};$.prototype.j=function(e){return e==null&&delete this.options.j,this.options.writeConcern!=null?this.options.writeConcern.j=e:this.options.j=e,this};$.prototype.wtimeout=function(e){return e==null&&delete this.options.wtimeout,this.options.writeConcern!=null?this.options.writeConcern.wtimeout=e:this.options.wtimeout=e,this};$.prototype.getOptions=function(){return this.options};$.prototype.setOptions=function(t,e){if(e)return this._mongooseOptions=t&&zn(t)||{},this.options=t||{},"populate"in t&&this.populate(this._mongooseOptions),this;if(t==null)return this;if(typeof t!="object")throw new Error('Options must be an object, got "'+t+'"');if(t=Object.assign({},t),Array.isArray(t.populate)){let r=t.populate;delete t.populate;let n=r.length;for(let s=0;s<n;++s)this.populate(r[s])}if("setDefaultsOnInsert"in t&&(this._mongooseOptions.setDefaultsOnInsert=t.setDefaultsOnInsert,delete t.setDefaultsOnInsert),"overwriteDiscriminatorKey"in t&&(this._mongooseOptions.overwriteDiscriminatorKey=t.overwriteDiscriminatorKey,delete t.overwriteDiscriminatorKey),"overwriteImmutable"in t&&(this._mongooseOptions.overwriteImmutable=t.overwriteImmutable,delete t.overwriteImmutable),"updatePipeline"in t&&(this._mongooseOptions.updatePipeline=t.updatePipeline,delete t.updatePipeline),"sanitizeProjection"in t&&(t.sanitizeProjection&&!this._mongooseOptions.sanitizeProjection&&$7e(this._fields),this._mongooseOptions.sanitizeProjection=t.sanitizeProjection,delete t.sanitizeProjection),"sanitizeFilter"in t&&(this._mongooseOptions.sanitizeFilter=t.sanitizeFilter,delete t.sanitizeFilter),"timestamps"in t&&(this._mongooseOptions.timestamps=t.timestamps,delete t.timestamps),"defaults"in t&&(this._mongooseOptions.defaults=t.defaults),"translateAliases"in t&&(this._mongooseOptions.translateAliases=t.translateAliases,delete t.translateAliases),"schemaLevelProjections"in t&&(this._mongooseOptions.schemaLevelProjections=t.schemaLevelProjections,delete t.schemaLevelProjections),t.lean==null&&this.schema&&"lean"in this.schema.options&&(this._mongooseOptions.lean=this.schema.options.lean),typeof t.limit=="string")try{t.limit=db(t.limit)}catch{throw new wf("Number",t.limit,"limit")}if(typeof t.skip=="string")try{t.skip=db(t.skip)}catch{throw new wf("Number",t.skip,"skip")}for(let r of Object.keys(t))if(U7e.has(r)){let n=Array.isArray(t[r])?t[r]:[t[r]];this[r].apply(this,n)}else this.options[r]=t[r];return this};$.prototype.explain=function(e){return arguments.length===0?this.options.explain=!0:e===!1?delete this.options.explain:this.options.explain=e,this};$.prototype.allowDiskUse=function(t){return arguments.length===0?this.options.allowDiskUse=!0:t===!1?delete this.options.allowDiskUse:this.options.allowDiskUse=t,this};$.prototype.maxTimeMS=function(t){return this.options.maxTimeMS=t,this};$.prototype.getFilter=function(){return this._conditions};$.prototype.getQuery=function(){return this._conditions};$.prototype.setQuery=function(t){this._conditions=t};$.prototype.getUpdate=function(){return this._update};$.prototype.setUpdate=function(t){this._update=t};$.prototype._fieldsForExec=function(){return this._fields==null||Re.hasOwnKeys(this._fields)===!1?null:zn(this._fields)};$.prototype._updateForExec=function(){let t=zn(this._update,{transform:!1,depopulate:!0}),e=Object.keys(t),r=e.length,n={};for(;r--;){let s=e[r];s[0]!=="$"?(n.$set||(t.$set?n.$set=t.$set:n.$set={}),n.$set[s]=t[s],e.splice(r,1),~e.indexOf("$set")||e.push("$set")):s==="$set"&&n.$set||(n[s]=t[s])}return n};$.prototype._optionsForExec=function(t){let e=zn(this.options);if(delete e.populate,t=t||this.model,!t)return e;C7e(t.schema,e),v7e(t.schema,e);let r=this.model?.db?.base.transactionAsyncLocalStorage?.getStore();!Object.hasOwn(this.options,"session")&&r?.session!=null&&(e.session=r.session);let n=t?.schema?.options?.read;if(!("readPreference"in e)&&n&&(e.readPreference=n),e.upsert!==void 0&&(e.upsert=!!e.upsert),e.writeConcern&&(e.j&&(e.writeConcern.j=e.j,delete e.j),e.w&&(e.writeConcern.w=e.w,delete e.w),e.wtimeout&&(e.writeConcern.wtimeout=e.wtimeout,delete e.wtimeout)),this._applyPaths(),this._fields!=null){this._fields=this._castFields(this._fields);let s=this._fieldsForExec();s!=null&&(e.projection=s)}if(this._mongooseOptions.populate){if(e.readPreference)for(let s of Object.values(this._mongooseOptions.populate))s.options?.readPreference===void 0&&(s.options||(s.options={}),s.options.readPreference=e.readPreference);if(e.readConcern)for(let s of Object.values(this._mongooseOptions.populate))s.options?.readConcern===void 0&&(s.options||(s.options={}),s.options.readConcern=e.readConcern)}return e};$.prototype.lean=function(t){return this._mongooseOptions.lean=arguments.length?t:!0,this};$.prototype.set=function(t,e){if(typeof t=="object"){let r=Object.keys(t);for(let n of r)this.set(n,t[n]);return this}return this._update=this._update||{},t in this._update&&delete this._update[t],this._update.$set=this._update.$set||{},this._update.$set[t]=e,this};$.prototype.get=function(e){let r=this._update;if(r==null)return;let n=r.$set;if(n==null||Re.hasUserDefinedProperty(r,e))return r[e];if(Re.hasUserDefinedProperty(n,e))return n[e]};$.prototype.error=function(e){return arguments.length===0?this._error:(this._error=e,this)};$.prototype._unsetCastError=function(){if(!(this._error==null||!(this._error instanceof wf)))return this.error(null)};$.prototype.mongooseOptions=function(t){return arguments.length>0&&(this._mongooseOptions=t),this._mongooseOptions};$.prototype._castConditions=function(){let t;this.model?.db.options?.sanitizeFilter!=null?t=this.model.db.options.sanitizeFilter:this.model?.base.options?.sanitizeFilter!=null?t=this.model.base.options.sanitizeFilter:t=this._mongooseOptions.sanitizeFilter,t&&F7e(this._conditions);try{this.cast(this.model),this._unsetCastError()}catch(e){this.error(e)}};function LQ(t){try{T7e(t)}catch(e){t.error(e)}}$.prototype._find=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();let e=this._mongooseOptions,r=this._userProvidedFields||{},n=this.model.db.options,s=this.model.base.options;Af(this.options,n,s),Of(this.options,n,s);let i={session:this?.options?.session||null,lean:e.lean||null},o=this._optionsForExec(),a=this._conditions,u=o.projection,c=await this.mongooseCollection.find(a,o);if(o.explain)return c.explain();let l=await c.toArray();if(l.length===0)return l;if(!e.populate){let d=this.schema.options.versionKey;return e.lean?.versionKey===!1&&d&&l.forEach(h=>{d in h&&delete h[d]}),e.lean?VQ(this.model.schema,l,null,i):this._completeMany(l,u,r,i)}let p=Cf.preparePopulationOptionsMQ(this,e);return this.options?._deferPopulate?(l=e.lean?l:await this._completeMany(l,u,r,i),this._deferredPopulate=p,l):e.lean?this.model.populate(l,p):(l=await this._completeMany(l,u,r,i),await this.model.populate(l,p),l)};$.prototype.find=function(t){if(typeof t=="function"||typeof arguments[1]=="function")throw new tr("Query.prototype.find() no longer accepts a callback");return this.op="find",Qo(t)?(this.merge(t),vf(this)):t!=null&&this.error(new Yo(t,"filter","find")),this};$.prototype.merge=function(t){if(!t)return t===null&&(this._conditions=null),this;this._conditions=this._conditions??{};let e={overwrite:!0};return t instanceof $?(t._conditions&&(e.omit={},this._conditions&&this._conditions.$and&&t._conditions.$and&&(e.omit.$and=!0,this._conditions.$and=this._conditions.$and.concat(t._conditions.$and)),this._conditions&&this._conditions.$or&&t._conditions.$or&&(e.omit.$or=!0,this._conditions.$or=this._conditions.$or.concat(t._conditions.$or)),Re.merge(this._conditions,t._conditions,e)),t._fields&&(this._fields||(this._fields={}),Re.merge(this._fields,t._fields,e)),t.options&&(this.options||(this.options={}),Re.merge(this.options,t.options,e)),t._update&&(this._update||(this._update={}),Re.mergeClone(this._update,t._update)),t._distinct&&(this._distinct=t._distinct),Re.merge(this._mongooseOptions,t._mongooseOptions),this):this.model!=null&&t instanceof this.model.base.Types.ObjectId?(Re.merge(this._conditions,{_id:t},e),this):(t?.$__&&(t=t.toObject(P7e)),e.omit={},Array.isArray(t.$and)&&(e.omit.$and=!0,this._conditions||(this._conditions={}),this._conditions.$and=(this._conditions.$and||[]).concat(t.$and.map(r=>Re.isPOJO(r)?Re.merge({},r):r))),Array.isArray(t.$or)&&(e.omit.$or=!0,this._conditions||(this._conditions={}),this._conditions.$or=(this._conditions.$or||[]).concat(t.$or.map(r=>Re.isPOJO(r)?Re.merge({},r):r))),Re.merge(this._conditions,t,e),this)};$.prototype.collation=function(t){return this.options==null&&(this.options={}),this.options.collation=t,this};$.prototype._completeOne=function(t,e,r,n){if(!t&&!this.options.includeResultMetadata)return n(null,null);let s=this.model,i=this._userProvidedFields||{},o=this._mongooseOptions,a=this.options;if(!a.lean&&o.lean&&(a.lean=o.lean),a.explain)return n(null,t);if(!o.populate){let c=this.schema.options.versionKey;return o.lean?.versionKey===!1&&c&&c in t&&delete t[c],o.lean?F5(s.schema,t,null,e,a,n):FQ(s,t,e,a,r,i,null,n)}let u=Cf.preparePopulationOptionsMQ(this,this._mongooseOptions);if(o.lean)return s.populate(t,u).then(c=>{F5(s.schema,c,null,e,a,n)},c=>{n(c)});FQ(s,t,e,a,r,i,[],(c,l)=>{if(c!=null)return n(c);s.populate(l,u).then(p=>{n(null,p)},p=>{n(p)})})};$.prototype._completeMany=async function(e,r,n,s){let i=this.model;return Promise.all(e.map(o=>new Promise((a,u)=>{let c=o;o=Cf.createModel(i,o,r,n),s.session!=null&&o.$session(s.session),o.$init(c,s,l=>{if(l!=null)return u(l);a(o)})})))};$.prototype._findOne=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();let e=this.model.db.options,r=this.model.base.options;Af(this.options,e,r),Of(this.options,e,r);let n=this._optionsForExec(),s=await this.mongooseCollection.findOne(this._conditions,n);return new Promise((i,o)=>{this._completeOne(s,null,n.projection,(a,u)=>{if(a)return o(a);i(u)})})};$.prototype.findOne=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[3]=="function")throw new tr("Query.prototype.findOne() no longer accepts a callback");return this.op="findOne",r&&this.setOptions(r),e&&this.select(e),Qo(t)?(this.merge(t),vf(this)):t!=null&&this.error(new Yo(t,"filter","findOne")),this};$.prototype._countDocuments=async function(){this._applyTranslateAliases();try{this.cast(this.model)}catch(i){this.error(i)}if(this.error())throw this.error();let e=this.model.db.options,r=this.model.base.options;Af(this.options,e,r),Of(this.options,e,r);let n=this._optionsForExec(),s=this._conditions;return this.mongooseCollection.countDocuments(s,n)};$.prototype._applyTranslateAliases=function(){let e=!1;"translateAliases"in this._mongooseOptions?e=this._mongooseOptions.translateAliases:this.model?.schema?._userProvidedOptions?.translateAliases!=null?e=this.model.schema._userProvidedOptions.translateAliases:this.model?.base?.options?.translateAliases!=null&&(e=this.model.base.options.translateAliases),e&&this.model?.schema?.aliases&&Re.hasOwnKeys(this.model.schema.aliases)&&(this.model.translateAliases(this._conditions,!0),this.model.translateAliases(this._fields,!0),this.model.translateAliases(this._update,!0),this._distinct!=null&&this.model.schema.aliases[this._distinct]!=null&&(this._distinct=this.model.schema.aliases[this._distinct]))};$.prototype._estimatedDocumentCount=async function(){if(this.error())throw this.error();let e=this._optionsForExec();return this.mongooseCollection.estimatedDocumentCount(e)};$.prototype.estimatedDocumentCount=function(t){if(typeof t=="function"||typeof arguments[1]=="function")throw new tr("Query.prototype.estimatedDocumentCount() no longer accepts a callback");return this.op="estimatedDocumentCount",t!=null&&this.setOptions(t),this};$.prototype.countDocuments=function(t,e){if(typeof t=="function"||typeof e=="function"||typeof arguments[2]=="function")throw new tr("Query.prototype.countDocuments() no longer accepts a callback");return this.op="countDocuments",Qo(t)&&this.merge(t),e!=null&&this.setOptions(e),this};$.prototype.__distinct=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();let e=this.model.db.options,r=this.model.base.options;Af(this.options,e,r),Of(this.options,e,r);let n=this._optionsForExec();return this.mongooseCollection.distinct(this._distinct,this._conditions,n)};$.prototype.distinct=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[3]=="function")throw new tr("Query.prototype.distinct() no longer accepts a callback");return this.op="distinct",Qo(e)?(this.merge(e),vf(this)):e!=null&&this.error(new Yo(e,"filter","distinct")),t!=null&&(this._distinct=t),r!=null&&this.setOptions(r),this};$.prototype.sort=function(t,e){if(arguments.length>2)throw new Error("sort() takes at most 2 arguments");if(e!=null&&typeof e!="object")throw new Error("sort() options argument must be an object or nullish");this.options.sort==null&&(this.options.sort={}),e?.override&&(this.options.sort={});let r=this.options.sort;if(typeof t=="string"){let n=t.indexOf(" ")===-1?[t]:t.split(" ");for(let s of n){let i=s[0]=="-"?-1:1;i===-1&&(s=s.slice(1)),!pb.has(s)&&(r[s]=i)}}else if(Array.isArray(t))for(let n of t){if(!Array.isArray(n))throw new TypeError("Invalid sort() argument, must be array of arrays");let s=""+n[0];pb.has(s)||(r[s]=k5(n[1],s))}else if(typeof t=="object"&&t!=null&&!(t instanceof Map))for(let n of Object.keys(t))pb.has(n)||(r[n]=k5(t[n],n));else if(t instanceof Map)for(let n of t.keys())n=""+n,!pb.has(n)&&(r[n]=k5(t.get(n),n));else if(t!=null)throw new TypeError("Invalid sort() argument. Must be a string, object, array, or map.");return this};function k5(t,e){if(t===1||t==="asc"||t==="ascending")return 1;if(t===-1||t==="desc"||t==="descending")return-1;if(t?.$meta!=null)return{$meta:t.$meta};throw new TypeError("Invalid sort value: { "+e+": "+t+" }")}$.prototype.deleteOne=function(e,r){if(typeof e=="function"||typeof r=="function"||typeof arguments[2]=="function")throw new tr("Query.prototype.deleteOne() no longer accepts a callback");return this.op="deleteOne",this.setOptions(r),Qo(e)?(this.merge(e),vf(this)):e!=null&&this.error(new Yo(e,"filter","deleteOne")),this};$.prototype._deleteOne=async function(){if(this._applyTranslateAliases(),this._castConditions(),b1(this._conditions,this.options),this.error()!=null)throw this.error();let e=this._optionsForExec();return this.mongooseCollection.deleteOne(this._conditions,e)};$.prototype.deleteMany=function(t,e){if(typeof t=="function"||typeof e=="function"||typeof arguments[2]=="function")throw new tr("Query.prototype.deleteMany() no longer accepts a callback");return this.setOptions(e),this.op="deleteMany",Qo(t)?(this.merge(t),vf(this)):t!=null&&this.error(new Yo(t,"filter","deleteMany")),this};$.prototype._deleteMany=async function(){if(this._applyTranslateAliases(),this._castConditions(),b1(this._conditions,this.options),this.error()!=null)throw this.error();let e=this._optionsForExec();return this.mongooseCollection.deleteMany(this._conditions,e)};function FQ(t,e,r,n,s,i,o,a){if(n.includeResultMetadata&&e==null)return u(null),null;Cf.createModelAndInit(t,e,s,i,n,o,u);function u(c,l){if(c)return a(c);if(n.includeResultMetadata)return e&&l?(n.session!=null&&l.$session(n.session),r.value=l):r.value=null,a(null,r);n.session!=null&&l.$session(n.session),a(null,l)}}function vf(t){if(!t?.model?.schema)return;let e=t.model.schema;e?.discriminatorMapping&&!e.discriminatorMapping.isRoot&&(t._conditions[e.discriminatorMapping.key]=e.discriminatorMapping.value)}$.prototype.findOneAndUpdate=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[3]=="function")throw new tr("Query.prototype.findOneAndUpdate() no longer accepts a callback");switch(this.op="findOneAndUpdate",this._validate(),arguments.length){case 2:r=void 0;break;case 1:e=t,t=r=void 0;break}Qo(t)?this.merge(t):t!=null&&this.error(new Yo(t,"filter","findOneAndUpdate")),r=r?zn(r):{},r.projection&&(this.select(r.projection),delete r.projection),r.fields&&(this.select(r.fields),delete r.fields);let n=this?.model?.base?.options?.returnOriginal;r.new==null&&r.returnDocument==null&&r.returnOriginal==null&&n!=null&&(r.returnOriginal=n);let s=this?.model?.base?.options?.updatePipeline;return r.updatePipeline==null&&s!=null&&(r.updatePipeline=s),this.setOptions(r),e&&this._mergeUpdate(e),this};$.prototype._findOneAndUpdate=async function(){if(this._applyTranslateAliases(),this._castConditions(),b1(this._conditions,this.options),LQ(this),this.error())throw this.error();let e=this.model.db.options,r=this.model.base.options;Af(this.options,e,r),Of(this.options,e,r),"strict"in this.options&&(this._mongooseOptions.strict=this.options.strict);let n=this._optionsForExec(this.model);UQ(n),this._update=this._castUpdate(this._update);let s=Object.assign({},n,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});if(this._update=qQ(this._conditions,this.model.schema,this._update,s),!this._update||Re.hasOwnKeys(this._update)===!1)if(n.upsert){let u=zn(this._update);delete u._id,this._update={$set:u}}else return this._execCount=0,await this._findOne();else{if(this._update instanceof Error)throw this._update;this._update.$set&&Re.hasOwnKeys(this._update.$set)===!1&&delete this._update.$set}$5(this,"runValidators",!1)&&await this.validate(this._update,n,!1),this._update.toBSON&&(this._update=this._update.toBSON());let o=await this.mongooseCollection.findOneAndUpdate(this._conditions,this._update,n);for(let u of this._transforms)o=u(o);let a=n.includeResultMetadata?o.value:o;return new Promise((u,c)=>{this._completeOne(a,o,n.projection,(l,p)=>{if(l)return c(l);u(p)})})};$.prototype.findOneAndDelete=function(t,e){if(typeof t=="function"||typeof e=="function"||typeof arguments[2]=="function")throw new tr("Query.prototype.findOneAndDelete() no longer accepts a callback");return this.op="findOneAndDelete",this._validate(),Qo(t)&&this.merge(t),e&&this.setOptions(e),this};$.prototype._findOneAndDelete=async function(){if(this._applyTranslateAliases(),this._castConditions(),b1(this._conditions,this.options),this.error()!=null)throw this.error();let e=this.options.includeResultMetadata,r=this._conditions,n=this._optionsForExec(this.model),s=await this.mongooseCollection.findOneAndDelete(r,n);for(let o of this._transforms)s=o(s);let i=e?s.value:s;return new Promise((o,a)=>{this._completeOne(i,s,n.projection,(u,c)=>{if(u)return a(u);o(c)})})};$.prototype.findOneAndReplace=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[4]=="function")throw new tr("Query.prototype.findOneAndReplace() no longer accepts a callback");this.op="findOneAndReplace",this._validate(),Qo(t)?this.merge(t):t!=null&&this.error(new Yo(t,"filter","findOneAndReplace")),e!=null&&this._mergeUpdate(e),r=r||{};let n=this?.model?.base?.options?.returnOriginal;return r.new==null&&r.returnDocument==null&&r.returnOriginal==null&&n!=null&&(r.returnOriginal=n),this.setOptions(r),this};$.prototype._findOneAndReplace=async function(){if(this._applyTranslateAliases(),this._castConditions(),b1(this._conditions,this.options),this.error()!=null)throw this.error();"strict"in this.options&&(this._mongooseOptions.strict=this.options.strict,delete this.options.strict);let e=this._conditions,r=this._optionsForExec();UQ(r);let n=this.options.includeResultMetadata,s={skipId:!0};"strict"in this._mongooseOptions&&(s.strict=this._mongooseOptions.strict);let i=$5(this,"runValidators",!1);try{let u=new this.model(this._update,null,s);if(i)await u.validate();else if(u.$__.validationError)throw u.$__.validationError;this._update=u.toBSON()}catch(u){if(u instanceof kQ)throw u;let c=new kQ;throw c.errors[u.path]=u,c}let o=await this.mongooseCollection.findOneAndReplace(e,this._update,r);for(let u of this._transforms)o=u(o);let a=n?o.value:o;return new Promise((u,c)=>{this._completeOne(a,o,r.projection,(l,p)=>{if(l)return c(l);u(p)})})};$.prototype.findById=function(t,e,r){return this.findOne({_id:t},e,r)};$.prototype.findByIdAndUpdate=function(t,e,r){return this.findOneAndUpdate({_id:t},e,r)};$.prototype.findByIdAndDelete=function(t,e){return this.findOneAndDelete({_id:t},e)};function UQ(t){"new"in t&&(t.returnDocument=t.new?"after":"before",delete t.new),"returnOriginal"in t&&(t.returnDocument=t.returnOriginal?"before":"after",delete t.returnOriginal),typeof t.returnDocument=="string"&&(t.returnOriginal=t.returnDocument==="before")}function $5(t,e,r){let n=t._optionsForExec(t.model);return e in n?n[e]:e in t.model.base.options?t.model.base.options[e]:r}function F5(t,e,r,n,s,i){if(s.lean&&typeof s.lean.transform=="function"){s.lean.transform(e);for(let o=0;o<t.childSchemas.length;o++){let a=r?r+"."+t.childSchemas[o].model.path:t.childSchemas[o].model.path,u=t.childSchemas[o].schema,c=$Q.get(a,e);if(c!=null){if(Array.isArray(c))for(let l=0;l<c.length;l++)s.lean.transform(c[l]);else s.lean.transform(c);F5(u,c,a,n,s)}}return i?i(null,e):void 0}return s.includeResultMetadata?i(null,n):i(null,e)}function VQ(t,e,r,n){if(n.lean&&typeof n.lean.transform=="function"){for(let s of e)n.lean.transform(s);for(let s=0;s<t.childSchemas.length;s++){let i=r?r+"."+t.childSchemas[s].model.path:t.childSchemas[s].model.path,o=t.childSchemas[s].schema,a=$Q.get(i,e);if(a!=null){a=a.flat();for(let u=0;u<a.length;u++)n.lean.transform(a[u]);VQ(o,a,i,n)}}}return e}$.prototype._mergeUpdate=function(t){if(!this._mongooseOptions.updatePipeline&&Array.isArray(t))throw new tr("Cannot pass an array to query updates unless the `updatePipeline` option is set.");if(this._update||(this._update=Array.isArray(t)?[]:{}),!(t==null||typeof t=="object"&&Re.hasOwnKeys(t)===!1))if(t instanceof $){if(Array.isArray(this._update))throw new tr(`Cannot mix array and object updates (current: ${g1(this._update)}, incoming: ${g1(t._update)})`);t._update&&Re.mergeClone(this._update,t._update)}else if(Array.isArray(t)){if(!Array.isArray(this._update))if(this._update==null||Re.isEmptyObject(this._update))this._update=[];else throw new tr(`Cannot mix array and object updates (current: ${g1(this._update)}, incoming: ${g1(t)})`);this._update=this._update.concat(t)}else{if(Array.isArray(this._update))throw new tr(`Cannot mix array and object updates (current: ${g1(this._update)}, incoming: ${g1(t)})`);Re.mergeClone(this._update,t)}};function g1(t){let e=E1.inspect(t,{depth:2,maxArrayLength:5,breakLength:80,compact:!0});return e.length>200?`${e.slice(0,197)}...`:e}async function q5(t){if(this._applyTranslateAliases(),this._castConditions(),b1(this._conditions,this.options),LQ(this),this.error()!=null)throw this.error();let e=this._conditions,r=this._optionsForExec(this.model);this._update=zn(this._update,r);let n=t==="replaceOne";if(n)this._update=new this.model(this._update,null,{skipId:!0});else{if(this._update=this._castUpdate(this._update),this._update==null||Re.hasOwnKeys(this._update)===!1)return{acknowledged:!1};let i=Object.assign({},r,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});this._update=qQ(this._conditions,this.model.schema,this._update,i)}return Array.isArray(r.arrayFilters)&&(r.arrayFilters=R7e(this._update,r.arrayFilters)),$5(this,"runValidators",!1)&&await this.validate(this._update,r,n),this._update.toBSON&&(this._update=this._update.toBSON()),this.mongooseCollection[t](e,this._update,r)}$.prototype.validate=async function(e,r,n){if(typeof arguments[3]=="function")throw new tr("Query.prototype.validate() no longer accepts a callback");await zQ(this,"validate"),n?await e.$validate():await j7e(this,this.model.schema,e,r),await WQ(this,null,null,"validate")};$.prototype._updateMany=async function(){return q5.call(this,"updateMany")};$.prototype._updateOne=async function(){return q5.call(this,"updateOne")};$.prototype._replaceOne=async function(){return q5.call(this,"replaceOne")};$.prototype.updateMany=function(t,e,r,n){return typeof r=="function"?(n=r,r=void 0):typeof e=="function"?(n=e,e=t,t={},r=void 0):typeof t=="function"?(n=t,t=void 0,e=void 0,r=void 0):typeof t=="object"&&!e&&!r&&!n&&(e=t,t=void 0,r=void 0,n=void 0),j5(this,"updateMany",t,e,r,n)};$.prototype.updateOne=function(t,e,r,n){return typeof r=="function"?(n=r,r=void 0):typeof e=="function"?(n=e,e=t,t={},r=void 0):typeof t=="function"?(n=t,t=void 0,e=void 0,r=void 0):typeof t=="object"&&!e&&!r&&!n&&(e=t,t=void 0,r=void 0,n=void 0),j5(this,"updateOne",t,e,r,n)};$.prototype.replaceOne=function(t,e,r,n){return typeof r=="function"?(n=r,r=void 0):typeof e=="function"?(n=e,e=t,t={},r=void 0):typeof t=="function"?(n=t,t=void 0,e=void 0,r=void 0):typeof t=="object"&&!e&&!r&&!n&&(e=t,t=void 0,r=void 0,n=void 0),j5(this,"replaceOne",t,e,r,n)};function j5(t,e,r,n,s,i){t.op=e,n=n||{},s!=null&&"strict"in s&&(t._mongooseOptions.strict=s.strict),!(r instanceof $)&&r!=null&&r.toString()!=="[object Object]"?t.error(new Yo(r,"filter",e)):t.merge(r);let o=t?.model?.base?.options?.updatePipeline;return o!=null&&s?.updatePipeline==null&&(s=s||{},s.updatePipeline=o),Re.isObject(s)&&t.setOptions(s),t._mergeUpdate(n),i&&t.exec(i),t}$.prototype.transform=function(t){return this._transforms.push(t),this};$.prototype.orFail=function(t){return this.transform(e=>{switch(this.op){case"find":if(e.length===0)throw _1(t,this);break;case"findOne":if(e==null)throw _1(t,this);break;case"replaceOne":case"updateMany":case"updateOne":if(e?.matchedCount===0)throw _1(t,this);break;case"findOneAndDelete":case"findOneAndUpdate":case"findOneAndReplace":if(this.options.includeResultMetadata&&e!=null&&e.value==null)throw _1(t,this);if(!this.options.includeResultMetadata&&e==null)throw _1(t,this);break;case"deleteMany":case"deleteOne":if(e.deletedCount===0)throw _1(t,this);break;default:break}return e}),this};function _1(t,e){return typeof t=="function"&&(t=t.call(e)),t==null&&(t=new A7e(e.getQuery(),e.model.modelName)),t}$.prototype.isPathSelectedInclusive=function(t){return N7e(this._fields,t)};$.prototype.exec=async function(e){if(typeof e=="function"||arguments.length>=2&&typeof arguments[1]=="function")throw new tr("Query.prototype.exec() no longer accepts a callback");if(this._validateOp(),typeof e=="string"&&(this.op=e),this.op==null)throw new tr("Query must have `op` before executing");if(this.model==null)throw new tr("Query must have an associated model before executing");let r=V7e.get(this.op);if(!r)throw new tr('Query has invalid `op`: "'+this.op+'"');if(this.options?.sort&&typeof this.options.sort=="object"&&Object.hasOwn(this.options.sort,""))throw new Error('Invalid field "" passed to sort()');if(this._execCount>0){let o=this.toString();throw o.length>60&&(o=o.slice(0,60)+"..."),new tr("Query was already executed: "+o)}this._execCount++;let n=null;try{await this._hooks.execPre("exec",this,[])}catch(o){if(o instanceof R5.skipWrappedFunction)n=o;else throw o}let s,i=null;try{await zQ(this),s=n?n.args[0]:await this[r]();for(let o of this._transforms)s=o(s)}catch(o){o instanceof R5.skipWrappedFunction?s=o.args[0]:i=o,i=this.model.schema._transformDuplicateKeyError(i)}return s=await WQ(this,s,i),await this._hooks.execPost("exec",this,[]),s};function WQ(t,e,r,n){if(t._queryMiddleware==null){if(r!=null)throw r;return e}let s=r?{error:r}:{};return t._queryMiddleware.execPost(n||t.op,t,[e],s).then(i=>i[0])}function zQ(t,e){if(t._queryMiddleware!=null)return t._queryMiddleware.execPre(e||t.op,t,[])}$.prototype.then=function(t,e){return this.exec().then(t,e)};$.prototype.catch=function(t){return this.exec().then(null,t)};$.prototype.finally=function(t){return this.exec().finally(t)};$.prototype[Symbol.toStringTag]=function(){return`Query { ${this.op} }`};$.prototype.pre=function(t){return this._hooks.pre("exec",t),this};$.prototype.post=function(t){return this._hooks.post("exec",t),this};$.prototype._castUpdate=function(e){let r=this.schema,n=r.options.discriminatorKey,s=r._baseSchema||r;if(this._mongooseOptions.overwriteDiscriminatorKey&&e[n]!=null&&s.discriminators){let o=Object.values(s.discriminators).find(a=>a.discriminatorMapping.value===e[n]);o!=null&&(r=o)}let i;return"upsert"in this.options&&(i=this.options.upsert),D7e(r,e,{strict:this._mongooseOptions.strict,upsert:i,arrayFilters:this.options.arrayFilters,overwriteDiscriminatorKey:this._mongooseOptions.overwriteDiscriminatorKey,overwriteImmutable:this._mongooseOptions.overwriteImmutable},this,this._conditions)};$.prototype.populate=function(...t){if(!t.some(Boolean))return this;let e=Re.populate.apply(null,t),r=this._mongooseOptions;if(r.lean!=null){let s=r.lean;for(let i of e)i?.options?.lean==null&&(i.options=i.options||{},i.options.lean=s)}Re.isObject(r.populate)||(r.populate={});let n=r.populate;for(let s of e){let i=s.path;n[i]?.populate&&s.populate&&(s.populate=n[i].populate.concat(s.populate)),n[s.path]=s}return this};$.prototype.getPopulatedPaths=function(){let e=this._mongooseOptions.populate||{},r=Object.keys(e);for(let n of Object.keys(e)){let s=e[n];Array.isArray(s.populate)&&KQ(r,s.populate,n+".")}return r};function KQ(t,e,r){for(let n of e)t.push(r+n.path),Array.isArray(n.populate)&&KQ(t,n.populate,r+n.path+".")}$.prototype.cast=function(t,e){e||(e=this._conditions),t=t||this.model;let r=t.schema.options.discriminatorKey;e!=null&&Object.hasOwn(e,r)&&(t=M7e(t.discriminators,e[r])||t);let n={upsert:this.options?.upsert};this.options&&("strict"in this.options&&(n.strict=this.options.strict),"strictQuery"in this.options&&(n.strictQuery=this.options.strictQuery)),"sanitizeFilter"in this._mongooseOptions&&(n.sanitizeFilter=this._mongooseOptions.sanitizeFilter);try{return x7e(t.schema,e,n,this)}catch(s){throw typeof s.setModel=="function"&&s.setModel(t),s}};$.prototype._castFields=function(e){let r,n,s,i,o;if(e){s=Object.keys(e),n=[];for(let a=0;a<s.length;++a)i=s[a],e[i].$elemMatch&&(r||(r={}),r[i]=e[i],n.push(i))}if(r){try{o=this.cast(this.model,r)}catch(a){return a}for(let a=0;a<n.length;++a)i=n[a],e[i]=o[i]}return e};$.prototype._applyPaths=function(){if(!this.model)return;this._fields=this._fields||{};let e;this.model!=null&&Re.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection")?e=this.model.db.options.sanitizeProjection:this.model!=null&&Re.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection")?e=this.model.base.options.sanitizeProjection:e=this._mongooseOptions.sanitizeProjection,(this._mongooseOptions.schemaLevelProjections??!0)&&Cf.applyPaths(this._fields,this.model.schema,e);let n=!0;"selectPopulatedPaths"in this.model.base.options&&(n=this.model.base.options.selectPopulatedPaths),"selectPopulatedPaths"in this.model.schema.options&&(n=this.model.schema.options.selectPopulatedPaths),n&&q7e(this._fields,this._userProvidedFields,this._mongooseOptions.populate)};$.prototype.cursor=function(e){e&&this.setOptions(e);try{this.cast(this.model)}catch(r){return new NQ(this)._markError(r)}return new NQ(this)};$.prototype.tailable=function(t,e){if(typeof t?.constructor=="function"&&t.constructor.name==="Object"&&(e=t,t=!0),t===void 0&&(t=!0),e&&typeof e=="object")for(let r of Object.keys(e))r==="awaitData"||r==="awaitdata"?this.options.awaitData=!!e[r]:this.options[r]=e[r];return this.options.tailable=arguments.length?!!t:!0,this};$.prototype.near=function(){let t=[],e=this._mongooseOptions.nearSphere;if(arguments.length===1)if(Array.isArray(arguments[0]))t.push({center:arguments[0],spherical:e});else if(typeof arguments[0]=="string")t.push(arguments[0]);else if(Re.isObject(arguments[0]))typeof arguments[0].spherical!="boolean"&&(arguments[0].spherical=e),t.push(arguments[0]);else throw new TypeError("invalid argument");else if(arguments.length===2)if(typeof arguments[0]=="number"&&typeof arguments[1]=="number")t.push({center:[arguments[0],arguments[1]],spherical:e});else if(typeof arguments[0]=="string"&&Array.isArray(arguments[1]))t.push(arguments[0]),t.push({center:arguments[1],spherical:e});else if(typeof arguments[0]=="string"&&Re.isObject(arguments[1]))t.push(arguments[0]),typeof arguments[1].spherical!="boolean"&&(arguments[1].spherical=e),t.push(arguments[1]);else throw new TypeError("invalid argument");else if(arguments.length===3)if(typeof arguments[0]=="string"&&typeof arguments[1]=="number"&&typeof arguments[2]=="number")t.push(arguments[0]),t.push({center:[arguments[1],arguments[2]],spherical:e});else throw new TypeError("invalid argument");else throw new TypeError("invalid argument");return $.base.near.apply(this,t)};$.prototype.nearSphere=function(){return this._mongooseOptions.nearSphere=!0,this.near.apply(this,arguments),this};$.prototype[Symbol.asyncIterator]=function(){return this._mongooseOptions._asyncIterator=!0,this.cursor()};$.prototype.box=function(t,e){return!Array.isArray(t)&&Re.isObject(t)&&(e=t.ur,t=t.ll),$.base.box.call(this,t,e)};$.prototype.center=$.base.circle;$.prototype.centerSphere=function(){typeof arguments[0]?.constructor=="function"&&arguments[0].constructor.name==="Object"&&(arguments[0].spherical=!0),typeof arguments[1]?.constructor=="function"&&arguments[1].constructor.name==="Object"&&(arguments[1].spherical=!0),$.base.circle.apply(this,arguments)};$.prototype.selectedInclusively=function(){return I7e(this._fields)};$.prototype.selectedExclusively=function(){return B7e(this._fields)};$.prototype.model;function Qo(t){return t instanceof $||Re.isObject(t)||t===null}HQ.exports=$});var XQ=m((Aje,QQ)=>{"use strict";var xf=be(),JQ=require("stream").Readable,z7e=g5(),K7e=Da(),H7e=fc(),YQ=require("util");function Kn(t){JQ.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.agg=t,this._transforms=[];let e=t._connection,r=t._model;delete t.options.cursor.useMongooseAggCursor,this._mongooseOptions={},e?(this.cursor=e.db.aggregate(t._pipeline,t.options||{}),setImmediate(()=>this.emit("cursor",this.cursor))):G7e(r,this,t)}YQ.inherits(Kn,JQ);function G7e(t,e,r){t.collection.buffer?t.collection.emitter.once("queue",function(){t.hooks.execPre("aggregate",r).then(()=>n(null),s=>n(s))}):t.hooks.execPre("aggregate",r).then(()=>n(null),s=>n(s));function n(s){if(s!=null){J7e(e,s);return}typeof r.options?.cursor?.transform=="function"&&e._transforms.push(r.options.cursor.transform),e.cursor=t.collection.aggregate(r._pipeline,r.options||{}),e.emit("cursor",e.cursor)}}function J7e(t,e){if(e instanceof H7e.skipWrappedFunction){let r=e.args[0];if(r!=null&&(!Array.isArray(r)||r.length)){let n=new xf('Cannot `skipMiddlewareFunction()` with a value when using `.aggregate().cursor()`, value must be nullish or empty array, got "'+YQ.inspect(r)+'".');t._markError(n),t.listeners("error").length>0&&t.emit("error",n);return}t.emit("cursor",null);return}t._markError(e),t.listeners("error").length>0&&t.emit("error",e)}Kn.prototype._read=function(){let t=this;mb(this,function(e,r){if(e)return t.emit("error",e);if(!r){t.push(null),t.cursor.close(function(n){if(n)return t.emit("error",n)});return}t.push(r)})};if(Symbol.asyncIterator!=null){let t="Mongoose does not support using async iterators with an existing aggregation cursor. See https://bit.ly/mongoose-async-iterate-aggregation";Kn.prototype[Symbol.asyncIterator]=function(){throw new xf(t)}}Object.defineProperty(Kn.prototype,"map",{value:function(t){return this._transforms.push(t),this},enumerable:!0,configurable:!0,writable:!0});Kn.prototype._markError=function(t){return this._error=t,this};Kn.prototype.close=async function(){if(typeof arguments[0]=="function")throw new xf("AggregationCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close()}catch(e){throw this.listeners("error").length>0&&this.emit("error",e),e}this.emit("close")};Kn.prototype._destroy=function(e,r){let n=null;return this.cursor?n=Promise.resolve():n=new Promise(s=>{this.once("cursor",s)}),n.then(()=>this.cursor.close()).then(()=>{this._closed=!0,r()}).catch(s=>{r(s)}),this};Kn.prototype.next=async function(){if(typeof arguments[0]=="function")throw new xf("AggregationCursor.prototype.next() no longer accepts a callback");return new Promise((e,r)=>{mb(this,(n,s)=>{if(n!=null)return r(n);e(s)})})};Kn.prototype.eachAsync=function(t,e){if(typeof arguments[2]=="function")throw new xf("AggregationCursor.prototype.eachAsync() no longer accepts a callback");let r=this;return typeof e=="function"&&(e={}),e=e||{},z7e(function(n){return mb(r,n)},t,e)};Symbol.asyncIterator!=null&&(Kn.prototype[Symbol.asyncIterator]=function(){return this.transformNull()._transformForAsyncIterator()});Kn.prototype._transformForAsyncIterator=function(){return this._transforms.indexOf(GQ)===-1&&this.map(GQ),this};Kn.prototype.transformNull=function(t){return arguments.length===0&&(t=!0),this._mongooseOptions.transformNull=t,this};function GQ(t){return t==null?{done:!0}:{value:t,done:!1}}Kn.prototype.addCursorFlag=function(t,e){let r=this;return Y7e(this,function(){r.cursor.addCursorFlag(t,e)}),this};function Y7e(t,e){if(t.cursor)return e();t.once("cursor",function(){e()})}function mb(t,e){let r=e;if(t._transforms.length&&(r=function(n,s){if(n||s===null&&!t._mongooseOptions.transformNull)return e(n,s);e(n,t._transforms.reduce(function(i,o){return o(i)},s))}),t._error)return K7e(function(){r(t._error)});if(t.cursor)return t.cursor.next().then(n=>{if(!n)return r(null,null);r(null,n)},n=>r(n));t.once("error",e),t.once("cursor",function(){mb(t,e)})}QQ.exports=Kn});var L5=m((Oje,ZQ)=>{"use strict";ZQ.exports=function(e,r,n){let s=r?.discriminatorMapping;if(n=n||"",s&&!s.isRoot){let i=e,o=(n.length>0?n+".":n)+s.key,a=s.value;if(i[0]!=null&&i[0].$match&&(i[0].$match[o]===void 0||i[0].$match[o]===a))i[0].$match[o]=a;else if(i[0]?.$geoNear)i[0].$geoNear.query=i[0].$geoNear.query||{},i[0].$geoNear.query[o]=a;else if(i[0]?.$search)if(i[1]?.$match!=null)i[1].$match[o]=i[1].$match[o]||a;else{let u={};u[o]=a,i.splice(1,0,{$match:u})}else{let u={};u[o]=a,i.unshift({$match:u})}}}});var tX=m((Cje,eX)=>{"use strict";eX.exports=function t(e){if(Array.isArray(e))for(let r of e){if(r==null)continue;let n=r.$group||r.$bucket||r.$bucketAuto;if(n!=null)for(let i of Object.keys(n))Q7e(n[i]);let s=Object.keys(r)[0];if(s&&typeof r[s]=="object"){let i=r[s];for(let o of Object.keys(i))i[o]!=null&&i[o].$function!=null&&typeof i[o].$function.body=="function"&&(i[o].$function.body=i[o].$function.body.toString())}if(r.$facet!=null)for(let i of Object.keys(r.$facet))t(r.$facet[i])}};function Q7e(t){if(!(t==null||t.$accumulator==null))for(let e of["init","accumulate","merge","finalize"])typeof t.$accumulator[e]=="function"&&(t.$accumulator[e]=String(t.$accumulator[e]))}});var V5=m((vje,oX)=>{"use strict";var sX=XQ(),kc=be(),iX=fb(),{applyGlobalMaxTimeMS:X7e,applyGlobalDiskUse:Z7e}=b5(),e5e=vt(),t5e=bn(),U5=L5(),r5e=tX(),rX=ae(),{modelSymbol:n5e}=te(),s5e=iX.prototype.read,i5e=iX.prototype.readConcern,nX=new Set(["$$DESCEND","$$PRUNE","$$KEEP"]);function Te(t,e){this._pipeline=[],e==null||e[n5e]?this._model=e:this._connection=e,this.options={},arguments.length===1&&Array.isArray(t)&&this.append.apply(this,t)}Te.prototype.options;Te.prototype._optionsForExec=function(){let t=this.options||{},e=this.model()?.db?.base.transactionAsyncLocalStorage?.getStore();return!Object.hasOwn(t,"session")&&e?.session!=null&&(t.session=e.session),t};Te.prototype.model=function(t){return arguments.length===0?this._model:(this._model=t,t.schema!=null&&(this.options.readPreference==null&&t.schema.options.read!=null&&(this.options.readPreference=t.schema.options.read),this.options.collation==null&&t.schema.options.collation!=null&&(this.options.collation=t.schema.options.collation)),t)};Te.prototype.append=function(){let t=arguments.length===1&&Array.isArray(arguments[0])?arguments[0]:[...arguments];if(!t.every(o5e))throw new Error("Arguments must be aggregate pipeline operators");return this._pipeline=this._pipeline.concat(t),this};Te.prototype.addFields=function(t){if(typeof t!="object"||t===null||Array.isArray(t))throw new Error("Invalid addFields() argument. Must be an object");return this.append({$addFields:Object.assign({},t)})};Te.prototype.project=function(t){let e={};if(typeof t=="object"&&!Array.isArray(t))Object.keys(t).forEach(function(r){e[r]=t[r]});else if(arguments.length===1&&typeof t=="string")t.split(/\s+/).forEach(function(r){if(!r)return;let n=r[0]==="-"?0:1;n===0&&(r=r.substring(1)),e[r]=n});else throw new Error("Invalid project() argument. Must be string or object");return this.append({$project:e})};Te.prototype.near=function(t){if(t==null)throw new kc("Aggregate `near()` must be called with non-nullish argument");if(t.near==null)throw new kc("Aggregate `near()` argument must have a `near` property");let e=Array.isArray(t.near)?t.near:t.near.coordinates;if(typeof t.near=="object"&&(!Array.isArray(e)||e.length<2||e.find(n=>typeof n!="number")))throw new kc(`Aggregate \`near()\` argument has invalid coordinates, got "${e}"`);let r={};return r.$geoNear=t,this.append(r)};"group match skip limit out densify fill".split(" ").forEach(function(t){Te.prototype[t]=function(e){let r={};return r["$"+t]=e,this.append(r)}});Te.prototype.unwind=function(){let t=[...arguments],e=[];for(let r of t)if(r&&typeof r=="object")e.push({$unwind:r});else if(typeof r=="string")e.push({$unwind:r[0]==="$"?r:"$"+r});else throw new Error('Invalid arg "'+r+'" to unwind(), must be string or object');return this.append.apply(this,e)};Te.prototype.replaceRoot=function(t){let e;return typeof t=="string"?e=t.startsWith("$")?t:"$"+t:e=t,this.append({$replaceRoot:{newRoot:e}})};Te.prototype.count=function(t){return this.append({$count:t})};Te.prototype.sortByCount=function(t){if(t&&typeof t=="object")return this.append({$sortByCount:t});if(typeof t=="string")return this.append({$sortByCount:t[0]==="$"?t:"$"+t});throw new TypeError('Invalid arg "'+t+'" to sortByCount(), must be string or object')};Te.prototype.lookup=function(t){return this.append({$lookup:t})};Te.prototype.graphLookup=function(t){let e={};if(t){if(!rX.isObject(t))throw new TypeError("Invalid graphLookup() argument. Must be an object.");rX.mergeClone(e,t);let r=e.startWith;r&&typeof r=="string"&&(e.startWith=e.startWith.startsWith("$")?e.startWith:"$"+e.startWith)}return this.append({$graphLookup:e})};Te.prototype.sample=function(t){return this.append({$sample:{size:t}})};Te.prototype.sort=function(t){let e={};if(t5e(t)==="Object"){let r=["desc","descending",-1];Object.keys(t).forEach(function(n){if(t[n]instanceof Object&&t[n].$meta){e[n]=t[n];return}e[n]=r.indexOf(t[n])===-1?1:-1})}else if(arguments.length===1&&typeof t=="string")t.split(/\s+/).forEach(function(r){if(!r)return;let n=r[0]==="-"?-1:1;n===-1&&(r=r.substring(1)),e[r]=n});else throw new TypeError("Invalid sort() argument. Must be a string or object.");return this.append({$sort:e})};Te.prototype.unionWith=function(t){return this.append({$unionWith:t})};Te.prototype.read=function(t,e){return s5e.call(this,t,e),this};Te.prototype.readConcern=function(t){return i5e.call(this,t),this};Te.prototype.redact=function(t,e,r){if(arguments.length===3){if(typeof e=="string"&&!nX.has(e)||typeof r=="string"&&!nX.has(r))throw new Error("If thenExpr or elseExpr is string, it must be either $$DESCEND, $$PRUNE or $$KEEP");t={$cond:{if:t,then:e,else:r}}}else if(arguments.length!==1)throw new TypeError("Invalid arguments");return this.append({$redact:t})};Te.prototype.explain=async function(e){if(typeof e=="function"||typeof arguments[1]=="function")throw new kc("Aggregate.prototype.explain() no longer accepts a callback");let r=this._model;if(!this._pipeline.length)throw new Error("Aggregate has empty pipeline");U5(this._pipeline,this._model.schema);try{await r.hooks.execPre("aggregate",this)}catch(i){return await r.hooks.execPost("aggregate",this,[null],{error:i})}let n=r.collection.aggregate(this._pipeline,this.options);e==null&&(e=!0);let s=null;try{s=await n.explain(e)}catch(i){return await r.hooks.execPost("aggregate",this,[null],{error:i})}return await r.hooks.execPost("aggregate",this,[s],{error:null}),s};Te.prototype.allowDiskUse=function(t){return this.options.allowDiskUse=t,this};Te.prototype.hint=function(t){return this.options.hint=t,this};Te.prototype.session=function(t){return t==null?delete this.options.session:this.options.session=t,this};Te.prototype.option=function(t){for(let e in t)this.options[e]=t[e];return this};Te.prototype.cursor=function(t){return this._optionsForExec(),this.options.cursor=t||{},new sX(this)};Te.prototype.collation=function(t){return this.options.collation=t,this};Te.prototype.facet=function(t){return this.append({$facet:t})};Te.prototype.search=function(t){return this.append({$search:t})};Te.prototype.pipeline=function(){return this._pipeline};Te.prototype.exec=async function(){if(!this._model&&!this._connection)throw new Error("Aggregate not bound to any Model");if(typeof arguments[0]=="function")throw new kc("Aggregate.prototype.exec() no longer accepts a callback");if(this._connection){if(!this._pipeline.length)throw new kc("Aggregate has empty pipeline");return this._optionsForExec(),await(await this._connection.client.db().aggregate(this._pipeline,this.options)).toArray()}let e=this._model,r=this._model.collection;if(X7e(this.options,e.db.options,e.base.options),Z7e(this.options,e.db.options,e.base.options),this._optionsForExec(),this.options?.cursor)return new sX(this);U5(this._pipeline,this._model.schema),r5e(this._pipeline);try{await e.hooks.execPre("aggregate",this)}catch(i){return await e.hooks.execPost("aggregate",this,[null],{error:i})}if(!this._pipeline.length)throw new kc("Aggregate has empty pipeline");let n=e5e(this.options||{}),s;try{s=await(await r.aggregate(this._pipeline,n)).toArray()}catch(i){return await e.hooks.execPost("aggregate",this,[null],{error:i})}return await e.hooks.execPost("aggregate",this,[s],{error:null}),s};Te.prototype.then=function(t,e){return this.exec().then(t,e)};Te.prototype.catch=function(t){return this.exec().then(null,t)};Te.prototype.finally=function(t){return this.exec().finally(t)};Te.prototype[Symbol.asyncIterator]=function(){return this.cursor({useMongooseAggCursor:!0}).transformNull()._transformForAsyncIterator()};function o5e(t){if(typeof t!="object"||t===null)return!1;let e=Object.keys(t);return e.length===1&&e[0][0]==="$"}Te._prepareDiscriminatorPipeline=U5;oX.exports=Te});var uX=m((xje,aX)=>{"use strict";var a5e=vt(),yb=class{constructor(e){e!=null&&Object.assign(this,a5e(e))}};yb.prototype.__subdocs=null;aX.exports=yb});var lX=m((Tje,cX)=>{"use strict";cX.exports=function t(e,r){let n=Object.keys(r.paths),s=n.length;for(let i=0;i<s;++i){let o="",a=n[i],u=r.paths[a],c=u.splitPath(),l=c.length,p=e;for(let d=0;d<l&&p!=null;++d){let h=c[d];if(o+=(o.length?".":"")+h,d===l-1){if(typeof p[h]<"u"){u.$isSingleNested?t(p[h],u.schema):u.$isMongooseDocumentArray&&Array.isArray(p[h])&&p[h].forEach(y=>t(y,u.schema));break}let f=u.getDefault(e,!1,{skipCast:!0});typeof f<"u"&&(p[h]=f,u.$isSingleNested?t(f,u.schema):u.$isMongooseDocumentArray&&Array.isArray(f)&&f.forEach(y=>t(y,u.schema)))}else p[h]==null&&(p[h]={}),p=p[h]}}}});var z5=m((Dje,pX)=>{"use strict";pX.exports=W5;function W5(t,e=new WeakSet,r=!1){if(!e.has(t)){e.add(t);for(let n of Object.keys(t.paths)){let s=t.paths[n];if(s.schema&&(W5(s.schema,e),!!s.schema._applyDiscriminators&&!(s._appliedDiscriminators&&!r))){for(let i of s.schema._applyDiscriminators.keys()){let{schema:o,options:a}=s.schema._applyDiscriminators.get(i);W5(o,e),s.discriminator(i,o,r?{...a,overwriteExisting:!0}:a)}s._appliedDiscriminators=!0}}}}});var hX=m((Mje,dX)=>{"use strict";dX.exports=Tf;Tf.middlewareFunctions=["deleteOne","remove","save","updateOne","validate","init"];var u5e=new Set(Tf.middlewareFunctions.flatMap(t=>[t,`$__${t}`]));function Tf(t,e,r){r=r||{};let n={useErrorHandlers:!0,numCallbackParams:1,nullResultByDefault:!0,contextParameter:!0},s=r.decorateDoc?t:t.prototype;t.$appliedHooks=!0;for(let u of Object.keys(e.paths)){let c=e.paths[u],l=null,p=K5(c);if(p)l=p.childModel,c=p.type;else continue;if(!l.$appliedHooks&&(Tf(l,c.schema,{...r,decorateDoc:!1,isChildSchema:!0}),l.discriminators!=null)){let d=Object.keys(l.discriminators);for(let h of d)Tf(l.discriminators[h],l.discriminators[h].schema,r)}}let i=e._getDocumentMiddleware();t._middleware=i,s.$__init=i.createWrapperSync("init",s.$__init,null,n);let o=Object.keys(e.methods),a=Object.assign({},n,{checkForPromise:!0});for(let u of o){if(u5e.has(u)||!i.hasHooks(u))continue;let c=s[u];s[`$__${u}`]=s[u],s[u]=i.createWrapper(u,c,null,a)}}function K5(t){if(t.$isSingleNested||t.$isMongooseDocumentArray)return{childModel:t.Constructor,type:t};if(t.instance==="Array"){let e=t.getEmbeddedSchemaType();if(e)return K5(e)}if(t.instance==="Map"){let e=t.getEmbeddedSchemaType();if(e)return K5(e)}return null}});var mX=m((Pje,fX)=>{"use strict";var c5e=Rt(),l5e=ae();fX.exports=function t(e,r){let n=H5();function s(i,o){Object.defineProperty(e.prototype,i,{get:function(){let a={};for(let u in o.methods[i])a[u]=o.methods[i][u].bind(this);return a},configurable:!0})}for(let i of Object.keys(r.methods)){let o=r.methods[i];if(Object.hasOwn(r.tree,i))throw new Error('You have a method and a property in your schema both named "'+i+'"');if(typeof o=="function"&&n.prototype[i]===o){delete r.methods[i];continue}r.reserved[i]&&!c5e(r,`methodOptions.${i}.suppressWarning`,!1)&&l5e.warn(`mongoose: the method name "${i}" is used by mongoose internally, overwriting it may cause bugs. If you're sure you know what you're doing, you can suppress this error by using \`schema.method('${i}', fn, { suppressWarning: true })\`.`),typeof o=="function"?e.prototype[i]=o:s(i,r)}e.$appliedMethods=!0;for(let i of Object.keys(r.paths)){let o=r.paths[i];o.$isSingleNested&&!o.Constructor.$appliedMethods&&t(o.Constructor,o.schema),o.$isMongooseDocumentArray&&!o.Constructor.$appliedMethods&&t(o.Constructor,o.schema)}}});var _X=m((Bje,gX)=>{"use strict";var yX=Q8(),p5e=Hp(),d5e=ub(),Eb=ae().isPOJO;gX.exports=function(e,r,n){if(r==null||e==null)return e;let s=null;return d5e(r)?s=!1:p5e(r)&&(s=!0),s==null?e:s?(n=n||yX(r),gb(e,r,n)):(n=n||yX(r),_b(e,r,n))};function gb(t,e,r,n,s){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(o=>gb(o,e,r,n,s));let i={...t};n=s?n||{}:e;for(let o of Object.keys(i)){let a=s?s+"."+o:o;Object.hasOwn(e,a)||Object.hasOwn(n,o)?Eb(e[a])||Eb(n[o])?i[o]=gb(i[o],e,r,n[o],a):delete i[o]:r[a]&&(i[o]=gb(i[o],e,r,n[o],a))}return i}function _b(t,e,r,n,s){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(o=>_b(o,e,r,n,s));let i={...t};n=s?n||{}:e;for(let o of Object.keys(i)){let a=s?s+"."+o:o;if(Object.hasOwn(e,a)||Object.hasOwn(n,o)){(Eb(e[a])||Eb(n[o]))&&(i[o]=_b(i[o],e,r,n[o],a));continue}else r[a]?i[o]=_b(i[o],e,r,n[o],a):delete i[o]}return i}});var bX=m((Ije,EX)=>{"use strict";EX.exports=function(e){let r=!1;for(let n of Object.keys(e))e[n]==="text"&&(r=!0);return r}});var wX=m((Nje,SX)=>{"use strict";var h5e=bX();SX.exports=function(e,r,n){h5e(e)||Object.hasOwn(n,"collation")&&!Object.hasOwn(r,"collation")&&(r.collation=n.collation)}});var OX=m((kje,AX)=>{"use strict";var{queryMiddlewareFunctions:f5e,aggregateMiddlewareFunctions:m5e,modelMiddlewareFunctions:y5e,documentMiddlewareFunctions:g5e}=Gh(),_5e=Array.from(new Set([...f5e,...m5e,...y5e,...g5e]));AX.exports=function(e,r,n){r=r.filter(s=>_5e.indexOf(s.name)!==-1?!!s.model:s.model!==!1);for(let s of Object.keys(n))if(r.hasHooks(s)){let i=e[s];e[s]=r.createWrapper(s,i)}}});var vX=m((Rje,CX)=>{"use strict";CX.exports=function(e,r){for(let n in r.statics)e[n]=r.statics[n]}});var PX=m((Fje,MX)=>{"use strict";var xX=hE(),E5e=fs(),b5e=ae();MX.exports=TX;function TX(t,e,r){return e==null?e:(S5e(t,e,r),DX(t,e,r))}function S5e(t,e,r){for(let n of t.childSchemas){let s=n.model.path,i=n.schema;if(!s)continue;let o=E5e.get(s,e);o==null||Array.isArray(o)&&o.flat(1/0).length===0||TX(i,o,r)}}function DX(t,e,r){if(e==null||typeof e!="object")return;if(Array.isArray(e)){for(let a of e)DX(t,a,r);return}if(t.discriminators&&b5e.hasOwnKeys(t.discriminators))for(let a of Object.keys(t.discriminators)){let u=t.discriminators[a],c=u.discriminatorMapping.key,l=u.discriminatorMapping.value;if(e[c]==l){t=u;break}}let n=xX(t.options.timestamps,"createdAt"),s=xX(t.options.timestamps,"updatedAt"),i=r?.currentTime,o=null;i!=null?o=i():t.base?.now?o=t.base.now():o=new Date,n&&e[n]==null&&!r?.isUpdate&&(e[n]=o),s&&(e[s]=o)}});var NX=m(($je,IX)=>{"use strict";var w5e=fs(),A5e=ae();IX.exports=BX;function BX(t,e,r){if(e==null)return e;let n=r,s=null;if(Array.isArray(r)){n=[],s=[];for(let i of r)i.length===1?s.push(i[0]):n.push(i)}return O5e(t,e,n),G5(t,e,s)}function O5e(t,e,r){let n=!1;for(let s of t.childSchemas){let i=s.model.path,o=s.schema;if(!i)continue;let a=w5e.get(i,e);if(a==null||Array.isArray(a)&&a.flat(1/0).length===0)continue;let u=null;if(Array.isArray(r)){u=[];for(let c of r)c[0]==i&&u.push(c.slice(1));if(u.length===0)continue}BX(o,a,u),n=!0}r?.length&&!n&&G5(t,e,r)}function G5(t,e,r){if(!(e==null||typeof e!="object")){if(Array.isArray(e)){for(let n of e)G5(t,n,r);return}if(t.discriminators&&A5e.hasOwnKeys(t.discriminators))for(let n of Object.keys(t.discriminators)){let s=t.discriminators[n],i=s.discriminatorMapping.key,o=s.discriminatorMapping.value;if(e[i]==o){t=s;break}}r==null&&(r=Object.keys(t.virtuals));for(let n of r){if(t.virtuals[n]==null)continue;let s=t.virtuals[n],i=Array.isArray(n)?n:n.indexOf(".")===-1?[n]:n.split("."),o=e;for(let c=0;c<i.length-1;++c)o[i[c]]=i[c]in o?o[i[c]]:{},o=o[i[c]];let a=s.applyGetters(o[i[i.length-1]],e);(s.options?.ref||s.options?.refPath)&&a===void 0&&(s.options.justOne?a=null:a=[]),o[i[i.length-1]]=a}}}});var bb=m((qje,kX)=>{"use strict";kX.exports=function t(e){return this instanceof t?(this.val=e,this):new t(e)}});var Df=m((jje,RX)=>{"use strict";RX.exports=new WeakMap});var jX=m((Lje,qX)=>{"use strict";var C5e=vt(),FX=Df(),v5e=te().modelSymbol,x5e=ae();qX.exports=$X;var Sb=Symbol("mongoose#assignRawDocsToIdStructure#hasArray");function $X(t,e,r,n,s){let i=[],o=n.isVirtual&&n.justOne&&t.length>1?!1:n.sort&&t.length>1,a=n.$nullIfNotFound,u,c,l;x5e.isMongooseArray(t)&&(t=t.__array);let p=0,d=t.length;if(o&&s&&n[Sb]===void 0){n[Sb]=!1;for(let h in r)if(Array.isArray(r[h])){n[Sb]=!0;break}}for(p=0;p<d;++p){if(l=t[p],Array.isArray(l)){$X(l,e,r,n,!0),i.push(l);continue}if(l===null&&o===!1){i.push(l);continue}if(c=String(l),u=e[c],n.clone&&u!=null)if(n.lean){let h=FX.get(u);u=C5e(u),FX.set(u,h)}else u=u.constructor.hydrate(u._doc);if(s)if(u)if(o){let h=r[c];n[Sb]?i.push(u):i[h]=u}else i.push(u);else l?.[v5e]!=null?i.push(l):i.push(n.retainNullValues||a?null:l);else i[p]=u||null}t.length=0,i.length&&i.forEach(function(h,f){t[f]=h})}});var J5=m((Uje,LX)=>{"use strict";LX.exports=wb;function wb(t,e){if(t.virtuals[e])return{virtual:t.virtuals[e],path:void 0};let r=e.split("."),n="",s="";for(let i=0;i<r.length;++i){if(n+=(n.length>0?".":"")+r[i],t.virtuals[n]){if(i===r.length-1)return{virtual:t.virtuals[n],path:s};continue}if(!t.nested[n]){if(t.paths[n]&&t.paths[n].schema){t=t.paths[n].schema;let o=r.slice(i+1).join(".");if(t.virtuals[o]){if(i===r.length-2)return{virtual:t.virtuals[o],nestedSchemaPath:[s,n].filter(a=>!!a).join(".")};continue}if(i+1<r.length&&t.discriminators)for(let a of Object.keys(t.discriminators)){let u=wb(t.discriminators[a],o);if(u!=null){let c=[s,n,u.nestedSchemaPath].filter(l=>!!l).join(".");return{virtual:u.virtual,nestedSchemaPath:c}}}s+=(s.length>0?".":"")+n,n="";continue}else if(t.paths[n]?.$isSchemaMap&&t.paths[n].$__schemaType?.schema){t=t.paths[n].$__schemaType.schema,++i;let o=r.slice(i+1).join(".");if(t.virtuals[o]){if(i===r.length-2)return{virtual:t.virtuals[o],nestedSchemaPath:[s,n,"$*"].filter(a=>!!a).join(".")};continue}if(i+1<r.length&&t.discriminators)for(let a of Object.keys(t.discriminators)){let u=wb(t.discriminators[a],o);if(u!=null){let c=[s,n,u.nestedSchemaPath,"$*"].filter(l=>!!l).join(".");return{virtual:u.virtual,nestedSchemaPath:c}}}s+=(s.length>0?".":"")+"$*"+n,n=""}if(t.discriminators)for(let o of Object.keys(t.discriminators)){let a=wb(t.discriminators[o],e);if(a)return a}return null}}}});var VX=m((Ab,UX)=>{(function(t,e){typeof Ab=="object"&&typeof UX<"u"?e(Ab):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.sift={}))})(Ab,(function(t){"use strict";var e=function(w,C){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,N){T.__proto__=N}||function(T,N){for(var K in N)Object.prototype.hasOwnProperty.call(N,K)&&(T[K]=N[K])},e(w,C)};function r(w,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");e(w,C);function T(){this.constructor=w}w.prototype=C===null?Object.create(C):(T.prototype=C.prototype,new T)}typeof SuppressedError=="function"&&SuppressedError;var n=function(w){var C="[object "+w+"]";return function(T){return s(T)===C}},s=function(w){return Object.prototype.toString.call(w)},i=function(w){return w instanceof Date?w.getTime():a(w)?w.map(i):w&&typeof w.toJSON=="function"?w.toJSON():w},o=function(w){return w??null},a=n("Array"),u=n("Object"),c=n("Function"),l=function(w,C){return w.hasOwnProperty(C)&&!c(w[C])},p=function(w){return w&&(w.constructor===Object||w.constructor===Array||w.constructor.toString()==="function Object() { [native code] }"||w.constructor.toString()==="function Array() { [native code] }")&&!w.toJSON},d=function(w,C){if(w==null&&w==C||w===C)return!0;if(Object.prototype.toString.call(w)!==Object.prototype.toString.call(C))return!1;if(a(w)){if(w.length!==C.length)return!1;for(var T=0,N=w.length;T<N;T++)if(!d(w[T],C[T]))return!1;return!0}else if(u(w)){if(Object.keys(w).length!==Object.keys(C).length)return!1;for(var K in w)if(!d(w[K],C[K]))return!1;return!0}return!1},h=function(w,C,T,N,K,re){var me=C[N];if(a(w)&&isNaN(Number(me))&&!l(w,me)){for(var De=0,zr=w.length;De<zr;De++)if(!h(w[De],C,T,N,De,w))return!1}return N===C.length||w==null?T(w,K,re,N===0,N===C.length):h(w[me],C,T,N+1,me,w)},f=(function(){function w(C,T,N,K){this.params=C,this.owneryQuery=T,this.options=N,this.name=K,this.init()}return w.prototype.init=function(){},w.prototype.reset=function(){this.done=!1,this.keep=!1},w})(),y=(function(w){r(C,w);function C(T,N,K,re){var me=w.call(this,T,N,K)||this;return me.children=re,me}return C.prototype.reset=function(){this.keep=!1,this.done=!1;for(var T=0,N=this.children.length;T<N;T++)this.children[T].reset()},C.prototype.childrenNext=function(T,N,K,re,me){for(var De=!0,zr=!0,Hn=0,Di=this.children.length;Hn<Di;Hn++){var pu=this.children[Hn];if(pu.done||pu.next(T,N,K,re,me),pu.keep||(zr=!1),pu.done){if(!pu.keep)break}else De=!1}this.done=De,this.keep=zr},C})(f),g=(function(w){r(C,w);function C(T,N,K,re,me){var De=w.call(this,T,N,K,re)||this;return De.name=me,De}return C})(y),_=(function(w){r(C,w);function C(){var T=w!==null&&w.apply(this,arguments)||this;return T.propop=!0,T}return C.prototype.next=function(T,N,K,re){this.childrenNext(T,N,K,re)},C})(y),S=(function(w){r(C,w);function C(T,N,K,re,me){var De=w.call(this,N,K,re,me)||this;return De.keyPath=T,De.propop=!0,De._nextNestedValue=function(zr,Hn,Di,pu,Vee){return De.childrenNext(zr,Hn,Di,pu,Vee),!De.done},De}return C.prototype.next=function(T,N,K){h(T,this.keyPath,this._nextNestedValue,0,N,K)},C})(y),O=function(w,C){if(w instanceof Function)return w;if(w instanceof RegExp)return function(N){var K=typeof N=="string"&&w.test(N);return w.lastIndex=0,K};var T=i(w);return function(N){return C(T,i(N))}},E=(function(w){r(C,w);function C(){var T=w!==null&&w.apply(this,arguments)||this;return T.propop=!0,T}return C.prototype.init=function(){this._test=O(this.params,this.options.compare)},C.prototype.next=function(T,N,K){(!Array.isArray(K)||K.hasOwnProperty(N))&&this._test(T,N,K)&&(this.done=!0,this.keep=!0)},C})(f),A=function(w,C,T){return new E(w,C,T)},x=function(w){return function(C,T,N,K){return w(C,T,N,K)}},v=function(w){return x(function(C,T,N,K){var re=typeof i(C),me=w(C);return new E(function(De){var zr=o(De);return typeof i(zr)===re&&me(zr)},T,N,K)})},R=function(w,C,T,N){var K=N.operations[w];return K||M(w),K(C,T,N,w)},M=function(w){throw new Error("Unsupported operation: ".concat(w))},I=function(w,C){for(var T in w)if(C.operations.hasOwnProperty(T)||T.charAt(0)==="$")return!0;return!1},j=function(w,C,T,N,K){if(I(C,K)){var re=oe(C,T,K),me=re[0],De=re[1];if(De.length)throw new Error("Property queries must contain only operations, or exact objects.");return new S(w,C,N,K,me)}return new S(w,C,N,K,[new E(C,N,K)])},U=function(w,C,T){C===void 0&&(C=null);var N=T===void 0?{}:T,K=N.compare,re=N.operations,me={compare:K||d,operations:Object.assign({},re||{})},De=oe(w,null,me),zr=De[0],Hn=De[1],Di=[];return zr.length&&Di.push(new S([],w,C,me,zr)),Di.push.apply(Di,Hn),Di.length===1?Di[0]:new _(w,C,me,Di)},oe=function(w,C,T){var N=[],K=[];if(!p(w))return N.push(new E(w,w,T)),[N,K];for(var re in w)if(T.operations.hasOwnProperty(re)){var me=R(re,w[re],w,T);if(me&&!me.propop&&C&&!T.operations[C])throw new Error("Malformed query. ".concat(re," cannot be matched against property."));me!=null&&N.push(me)}else re.charAt(0)==="$"?M(re):K.push(j(re.split("."),w[re],re,w,T));return[N,K]},Q=function(w){return function(C,T,N){return w.reset(),w.next(C,T,N),w.keep}},un=function(w,C){return C===void 0&&(C={}),Q(U(w,null,C))},Vr=(function(w){r(C,w);function C(){var T=w!==null&&w.apply(this,arguments)||this;return T.propop=!0,T}return C.prototype.init=function(){this._test=O(this.params,this.options.compare)},C.prototype.reset=function(){w.prototype.reset.call(this),this.keep=!0},C.prototype.next=function(T){this._test(T)&&(this.done=!0,this.keep=!1)},C})(f),lu=(function(w){r(C,w);function C(){var T=w!==null&&w.apply(this,arguments)||this;return T.propop=!0,T}return C.prototype.init=function(){if(!this.params||typeof this.params!="object")throw new Error("Malformed query. $elemMatch must by an object.");this._queryOperation=U(this.params,this.owneryQuery,this.options)},C.prototype.reset=function(){w.prototype.reset.call(this),this._queryOperation.reset()},C.prototype.next=function(T){if(a(T)){for(var N=0,K=T.length;N<K;N++){this._queryOperation.reset();var re=T[N];this._queryOperation.next(re,N,T,!1),this.keep=this.keep||this._queryOperation.keep}this.done=!0}else this.done=!1,this.keep=!1},C})(f),dt=(function(w){r(C,w);function C(){var T=w!==null&&w.apply(this,arguments)||this;return T.propop=!0,T}return C.prototype.init=function(){this._queryOperation=U(this.params,this.owneryQuery,this.options)},C.prototype.reset=function(){w.prototype.reset.call(this),this._queryOperation.reset()},C.prototype.next=function(T,N,K,re){this._queryOperation.next(T,N,K,re),this.done=this._queryOperation.done,this.keep=!this._queryOperation.keep},C})(f),rr=(function(w){r(C,w);function C(){var T=w!==null&&w.apply(this,arguments)||this;return T.propop=!0,T}return C.prototype.init=function(){},C.prototype.next=function(T){a(T)&&T.length===this.params&&(this.done=!0,this.keep=!0)},C})(f),An=function(w){if(w.length===0)throw new Error("$and/$or/$nor must be a nonempty array")},Wr=(function(w){r(C,w);function C(){var T=w!==null&&w.apply(this,arguments)||this;return T.propop=!1,T}return C.prototype.init=function(){var T=this;An(this.params),this._ops=this.params.map(function(N){return U(N,null,T.options)})},C.prototype.reset=function(){this.done=!1,this.keep=!1;for(var T=0,N=this._ops.length;T<N;T++)this._ops[T].reset()},C.prototype.next=function(T,N,K){for(var re=!1,me=!1,De=0,zr=this._ops.length;De<zr;De++){var Hn=this._ops[De];if(Hn.next(T,N,K),Hn.keep){re=!0,me=Hn.keep;break}}this.keep=me,this.done=re},C})(f),so=(function(w){r(C,w);function C(){var T=w!==null&&w.apply(this,arguments)||this;return T.propop=!1,T}return C.prototype.next=function(T,N,K){w.prototype.next.call(this,T,N,K),this.keep=!this.keep},C})(Wr),wT=(function(w){r(C,w);function C(){var T=w!==null&&w.apply(this,arguments)||this;return T.propop=!0,T}return C.prototype.init=function(){var T=this,N=Array.isArray(this.params)?this.params:[this.params];this._testers=N.map(function(K){if(I(K,T.options))throw new Error("cannot nest $ under ".concat(T.name.toLowerCase()));return O(K,T.options.compare)})},C.prototype.next=function(T,N,K){for(var re=!1,me=!1,De=0,zr=this._testers.length;De<zr;De++){var Hn=this._testers[De];if(Hn(T)){re=!0,me=!0;break}}this.keep=me,this.done=re},C})(f),Fee=(function(w){r(C,w);function C(T,N,K,re){var me=w.call(this,T,N,K,re)||this;return me.propop=!0,me._in=new wT(T,N,K,re),me}return C.prototype.next=function(T,N,K,re){this._in.next(T,N,K),a(K)&&!re?this._in.keep?(this.keep=!1,this.done=!0):N==K.length-1&&(this.keep=!0,this.done=!0):(this.keep=!this._in.keep,this.done=!0)},C.prototype.reset=function(){w.prototype.reset.call(this),this._in.reset()},C})(f),$ee=(function(w){r(C,w);function C(){var T=w!==null&&w.apply(this,arguments)||this;return T.propop=!0,T}return C.prototype.next=function(T,N,K,re,me){me?K.hasOwnProperty(N)===this.params&&(this.done=!0,this.keep=!0):(this.done=!0,this.keep=!this.params)},C})(f),qee=(function(w){r(C,w);function C(T,N,K,re){var me=w.call(this,T,N,K,T.map(function(De){return U(De,N,K)}),re)||this;return me.propop=!1,An(T),me}return C.prototype.next=function(T,N,K,re){this.childrenNext(T,N,K,re)},C})(g),jee=(function(w){r(C,w);function C(T,N,K,re){var me=w.call(this,T,N,K,T.map(function(De){return U(De,N,K)}),re)||this;return me.propop=!0,me}return C.prototype.next=function(T,N,K,re){this.childrenNext(T,N,K,re)},C})(g),AT=function(w,C,T){return new E(w,C,T)},OT=function(w,C,T,N){return new Vr(w,C,T,N)},CT=function(w,C,T,N){return new Wr(w,C,T,N)},vT=function(w,C,T,N){return new so(w,C,T,N)},xT=function(w,C,T,N){return new lu(w,C,T,N)},TT=function(w,C,T,N){return new Fee(w,C,T,N)},DT=function(w,C,T,N){return new wT(w,C,T,N)},MT=v(function(w){return function(C){return C!=null&&C<w}}),PT=v(function(w){return function(C){return C===w||C<=w}}),BT=v(function(w){return function(C){return C!=null&&C>w}}),IT=v(function(w){return function(C){return C===w||C>=w}}),NT=function(w,C,T){var N=w[0],K=w[1];return new E(function(re){return i(re)%N===K},C,T)},kT=function(w,C,T,N){return new $ee(w,C,T,N)},RT=function(w,C,T){return new E(new RegExp(w,C.$options),C,T)},FT=function(w,C,T,N){return new dt(w,C,T,N)},$T={number:function(w){return typeof w=="number"},string:function(w){return typeof w=="string"},bool:function(w){return typeof w=="boolean"},array:function(w){return Array.isArray(w)},null:function(w){return w===null},timestamp:function(w){return w instanceof Date}},qT=function(w,C,T){return new E(function(N){if(typeof w=="string"){if(!$T[w])throw new Error("Type alias does not exist");return $T[w](N)}return N!=null?N instanceof w||N.constructor===w:!1},C,T)},jT=function(w,C,T,N){return new qee(w,C,T,N)},LT=function(w,C,T,N){return new jee(w,C,T,N)},UT=function(w,C,T){return new rr(w,C,T,"$size")},VT=function(){return null},WT=function(w,C,T){var N;if(c(w))N=w;else if(!process.env.CSP_ENABLED)N=new Function("obj","return "+w);else throw new Error('In CSP mode, sift does not support strings in "$where" condition');return new E(function(K){return N.bind(K)(K)},C,T)},Lee=Object.freeze({__proto__:null,$Size:rr,$all:LT,$and:jT,$elemMatch:xT,$eq:AT,$exists:kT,$gt:BT,$gte:IT,$in:DT,$lt:MT,$lte:PT,$mod:NT,$ne:OT,$nin:TT,$nor:vT,$not:FT,$options:VT,$or:CT,$regex:RT,$size:UT,$type:qT,$where:WT}),zT=function(w,C,T){var N=T===void 0?{}:T,K=N.compare,re=N.operations;return U(w,C,{compare:K,operations:Object.assign({},Lee,re||{})})},Uee=function(w,C){C===void 0&&(C={});var T=zT(w,null,C);return Q(T)};t.$Size=rr,t.$all=LT,t.$and=jT,t.$elemMatch=xT,t.$eq=AT,t.$exists=kT,t.$gt=BT,t.$gte=IT,t.$in=DT,t.$lt=MT,t.$lte=PT,t.$mod=NT,t.$ne=OT,t.$nin=TT,t.$nor=vT,t.$not=FT,t.$options=VT,t.$or=CT,t.$regex=RT,t.$size=UT,t.$type=qT,t.$where=WT,t.EqualsOperation=E,t.createDefaultQueryOperation=zT,t.createEqualsOperation=A,t.createOperationTester=Q,t.createQueryOperation=U,t.createQueryTester=un,t.default=Uee,Object.defineProperty(t,"__esModule",{value:!0})}))});var zX=m((Vje,Y5)=>{var WX=VX();Y5.exports=WX.default;Object.assign(Y5.exports,WX)});var QX=m((Wje,YX)=>{"use strict";var T5e=mE(),D5e=bb(),M5e=jX(),Ob=Rt(),P5e=J5(),JX=Df(),KX=pE(),B5e=sx(),Q5=fs(),HX=zX().default,Cb=ae(),{populateModelSymbol:I5e}=te();YX.exports=function(e){let r=Object.assign({},Ob(e,"allOptions.options.options"),Ob(e,"allOptions.options")),n=Object.assign({},e.options,r,{justOne:e.justOne,isVirtual:e.isVirtual});n.$nullIfNotFound=e.isVirtual;let s=e.populatedModel,i=[].concat(e.rawIds);e.allIds=[].concat(e.allIds),M5e(e.rawIds,e.rawDocs,e.rawOrder,n);let o=e.docs,a=e.rawIds,u=e.options,c=e.count&&e.isVirtual,l,p=0;function d(h){if(++p,c)return h;if(h instanceof D5e)return h.val;if(h===void 0)return h;let f=e.allIds[l];if(e.path.endsWith(".$*"))return Mf(h,u,n,f);if(e.justOne===!0&&Array.isArray(h)){let y=[];for(let g of h){let _=JX.get(g);(_==null||_===s)&&y.push(g)}for(;h.length>y.length;)Array.prototype.pop.apply(h,[]);for(let g=0;g<y.length;++g)h[g]=y[g];return Mf(h[0],u,n,f)}else{if(e.justOne===!1&&!Array.isArray(h))return Mf([h],u,n,f);if(e.justOne===!0&&!Array.isArray(h)&&Array.isArray(f))return Mf(h,u,n,h==null?h:f[p-1])}return Mf(h,u,n,f)}for(l=0;l<o.length;++l){p=0;let h=e.path.endsWith(".$*")?e.path.slice(0,-3):e.path,f=Q5.get(h,o[l],KX);if(f==null&&!P5e(e.originalModel.schema,h))continue;let y;c?y=N5e(a[l]):Array.isArray(e.match)?y=Array.isArray(a[l])?a[l].filter(A=>A==null||HX(e.match[l])(A)):[a[l]].filter(A=>A==null||HX(e.match[l])(A))[0]:y=a[l];let g=e.originalModel.schema,_=Ob(o[l],"$__",null)!=null,S=_?f instanceof Map:Cb.isPOJO(f);if(S=S&&Ob(g._getSchema(h),"$isSchemaMap"),!e.isVirtual&&S){let A=f instanceof Map?Array.from(f.keys()):Object.keys(f);y=y.reduce((x,v,R)=>(x.set(A[R],v),x),new Map)}if(_&&Array.isArray(y))for(let A of y)A?.$__!=null&&(A.$__.parent=o[l]);else _&&y?.$__!=null&&(y.$__.parent=o[l]);if(e.isVirtual&&_){o[l].$populated(h,e.justOne?i[0]:i,e.allOptions),Array.isArray(y)&&(y=y.map(A=>A??void 0)),Q5.set(h,y,o[l],function(x,v,R){return arguments.length>=3?(x[v]=R,x[v]):x instanceof Map&&v==="$*"?[...x.values()]:x[v]},d,!1);continue}let O=h.split("."),E=o[l];for(let A=0;A<O.length-1&&!(Array.isArray(E)&&!Cb.isArrayIndex(O[A])||O[A]==="$*");++A){if(E[O[A]]==null){let x=O.slice(0,A+1).join("."),v=g._getSchema(x);if(y==null&&v?.$isMongooseArray)break;E[O[A]]={}}if(E=E[O[A]],typeof E!="object")break}o[l].$__&&(e.allOptions.options[I5e]=e.allOptions.model,o[l].$populated(h,e.unpopulatedValues[l],e.allOptions.options),y?.$__!=null&&(y.$__.wasPopulated={value:e.unpopulatedValues[l]}),y instanceof Map&&!y.$isMongooseMap&&(y=new T5e(y,h,o[l],o[l].schema.path(h).$__schemaType))),Q5.set(h,y,o[l],KX,d,!1),o[l].$__&&B5e(o[l],[e.allOptions.options])}};function N5e(t){return Array.isArray(t)?t.some(e=>Array.isArray(e)||e===null)?t.map(e=>e==null?0:Array.isArray(e)?e.filter(r=>r!=null).length:1):t.filter(e=>e!=null).length:t==null?0:1}function Mf(t,e,r,n){let s=typeof r.transform=="function",i=s?r.transform:o=>o;if(Array.isArray(t)){let o=[],a=t.length;for(let l=0;l<a;++l){let p=t[l],d=Array.isArray(n)?n[l]:n;if(!(!X5(p)&&(!r.retainNullValues||p!=null)&&!s)){{if(!r.retainNullValues&&p==null)continue;s&&(p=i(X5(p)?p:null,d))}if(GX(p,e),o.push(p),e.originalLimit&&o.length>=e.originalLimit)break}}let u=o.length;for(;t.length>u;)Array.prototype.pop.apply(t,[]);let c=0;if(Cb.isMongooseArray(t))for(c=0;c<u;++c)t.set(c,o[c],!0);else for(c=0;c<u;++c)t[c]=o[c];return t}return X5(t)||Cb.isPOJO(t)?(GX(t,e),i(t,n)):t instanceof Map?t:r.justOne===!1?[]:t==null?i(t,n):i(null,n)}function GX(t,e){t!=null&&e.excludeId&&(typeof t.$__setValue=="function"?delete t._doc._id:delete t._id)}function X5(t){return t==null?!1:Array.isArray(t)||t.$isMongooseMap||t.$__!=null||JX.has(t)}});var tZ=m((zje,eZ)=>{"use strict";var k5e=bb(),R5e=ox(),{trusted:vb}=Lp(),XX=lb();eZ.exports=function(e,r,n,s,i){let o=F5e(r);if(n.size===1){let a=Array.from(n)[0],u=s.schema.path(a);if(a!=="_id"||!o._id)e=ZX(e,u,i),o[a]=vb({$in:e});else if(a==="_id"&&o._id){let l=XX(o[a])?o[a]:{$eq:o[a]};o[a]={...vb({$in:e}),...l}}let c=R5e(a);for(let l=0;l<c.length-1;++l){let p=c[l];if(o[p]!=null&&o[p].$elemMatch!=null){o[p].$elemMatch[a.slice(p.length+1)]=vb({$in:e}),delete o[a];break}}}else{let a=[];Array.isArray(o.$or)?(o.$and=[{$or:o.$or},{$or:a}],delete o.$or):o.$or=a;for(let u of n)if(u!=="_id"||!o._id){let c=s.schema.path(u);e=ZX(e,c,i),a.push({[u]:{$in:e}})}else if(u==="_id"&&o._id){let c=XX(o[u])?o[u]:{$eq:o[u]};o[u]={...vb({$in:e}),...c}}}return o};function ZX(t,e,r){return t=t.filter(n=>!(n instanceof k5e)),r?t.filter(n=>{try{return e.cast(n),!0}catch{return!1}}):t}function F5e(t){return Array.isArray(t)?t.length>1?{$or:[].concat(t.map(e=>Object.assign({},e)))}:Object.assign({},t[0]):Object.assign({},t)}});var nZ=m((Kje,rZ)=>{"use strict";rZ.exports=function(e,r,n){if(e.length===0)return n();let s=e.length,i=null;for(let o of e)r(o,function(a){if(i==null){if(a!=null)return i=a,n(i);if(--s<=0)return n()}})}});var aZ=m((Hje,oZ)=>{"use strict";var sZ=_c(),$5e=Rt(),q5e=Us(),iZ=Df(),S1=fs(),j5e=te().populateModelSymbol;oZ.exports=function t(e,r,n,s){let i=r.path(s),o=n;if(i)return i;let a=r.discriminatorMapping?.key;if(a&&e!=null){if(n?.[a]!=null)r=q5e(e.discriminators,n[a])?.schema||r;else if(e.discriminators!=null)return Object.keys(e.discriminators).reduce((l,p)=>{let d=e.discriminators[p];return l.concat(t(d,d.schema,null,s))},[])}function u(l,p,d,h){let f=l.length+1,y,g;for(;f--;){if(g=l.slice(0,f).join("."),y=p.path(g),y==null)continue;if(y.embeddedSchemaType||y.schema){if(y.embeddedSchemaType instanceof sZ)return y.embeddedSchemaType;let O=null;if(y.schema?.discriminators!=null){let E=y.schema.discriminators,A=g+"."+y.schema.options.discriminatorKey,x=d?S1.get(A,d)||[]:[];O=Object.keys(E).reduce(function(v,R){let M=E[R].discriminatorMapping.value;return(n==null||x.indexOf(R)!==-1||x.indexOf(M)!==-1)&&v.push(E[R]),v},[])}if(f!==l.length&&y.schema){let E;if(l[f]==="$")return f+1===l.length?y:(E=u(l.slice(f+1),p,d?S1.get(g,d):null,h.concat(l.slice(0,f))),E&&(E.$parentSchemaDocArray=E.$parentSchemaDocArray||(y.schema.$isSingleNested?null:y)),E);if(O!=null&&O.length>0){E=[];for(let A of O){let x=u(l.slice(f),A,d?S1.get(g,d):null,h.concat(l.slice(0,f)));x!=null&&(x.$parentSchemaDocArray=x.$parentSchemaDocArray||(y.schema.$isSingleNested?null:y),x.$parentSchemaDocArray&&(E.$parentSchemaDocArray=x.$parentSchemaDocArray),E.push(x))}return E}else return E=u(l.slice(f),y.schema,d?S1.get(g,d):null,h.concat(l.slice(0,f))),E&&(E.$parentSchemaDocArray=E.$parentSchemaDocArray||(y.schema.$isSingleNested?null:y)),E}else if(f!==l.length&&y.$isMongooseArray&&y.embeddedSchemaType.$isMongooseArray){let E=y;for(;E.$isMongooseArray&&!E.$isMongooseDocumentArray;)E=E.embeddedSchemaType;let A=u(l.slice(f),E.schema,null,h.concat(l.slice(0,f)));if(A!=null)return A;if(E.schema.discriminators){let x=[];for(let v of Object.keys(E.schema.discriminators)){let R=E.schema.discriminators[v]||E.schema,M=u(l.slice(f),R,null,h.concat(l.slice(0,f)));M!=null&&x.push(M)}if(x.length>0)return x}}}else if(y.$isSchemaMap&&y.$__schemaType instanceof sZ)return y.$__schemaType;let _=h.concat([g]).join(".");if(o?.$__&&o.$populated(_,!0)&&f<l.length){let O=o.$populated(_,!0).options[j5e];if(O!=null)return u(l.slice(f),O.schema,d?S1.get(g,d):null,h.concat(l.slice(0,f)))}let S=$5e(o,g);if(S!=null){let E=(Array.isArray(S)&&S.length>0?iZ.get(S[0]):iZ.get(S))?.schema??null;if(E!=null){let A=u(l.slice(f),E,d?S1.get(g,d):null,h.concat(l.slice(0,f)));if(A!=null)return A.$parentSchemaDocArray=A.$parentSchemaDocArray||(E.$isSingleNested?null:E),A}}return y}}let c=s.split(".");for(let l=0;l<c.length;++l)c[l]==="$"&&(c[l]="0");return u(c,r,n,[])}});var hZ=m((Gje,dZ)=>{"use strict";var sT=ds(),L5e=bb(),U5e=vt(),zs=Rt(),V5e=Us(),W5e=bn(),uZ=aZ(),z5e=J5(),Pf=pE(),Rc=fs(),xb=Nx(),Or=ae(),tT=te().modelSymbol,Z5=te().populateModelSymbol,rT=gc().schemaMixedSymbol,K5e=z8();dZ.exports=function(e,r,n){let s,i=r.length,o=[],a=n.model?.modelName||n.model,u,c,l,p,d={},h=e.schema;if(n._localModel!=null&&n._localModel.schema.nested[n.path])return[];let f=z5e(e.schema,n.path);if((f==null?null:f.virtual)!=null)return H5e(e,r,n,f);let g=uZ(e,h,null,n.path);if(g=Array.isArray(g)?g:[g].filter(O=>O!=null),!(n.strictPopulate===!1||n.options?.strictPopulate===!1)&&g.length===0&&n._localModel!=null)return new K5e(n._fullPath||n.path);for(let O=0;O<i;O++){s=r[O];let E=null;if(s.$__!=null&&s.populated(n.path)&&(n.forceRepopulate??s.constructor.base.options.forceRepopulate)===!1)continue;let A=s?.$__!=null?s.$__schema:h;if(u=uZ(e,A,s,n.path),u!=null&&u.$isMongooseDocumentArray&&u.options.ref==null&&u.options.refPath==null)continue;if(u?.$parentSchemaDocArray&&zs(n,"options.sort")!=null)return new sT("Cannot populate with `sort` on path "+n.path+" because it is a subproperty of a document array");l=null;let v=!1,R=null,M=null,I=null;if(u?.instance==="Embedded"){if(u.options.ref){let dt={localField:n.path+"._id",foreignField:"_id",justOne:!0},rr=S(s,u,a,e),An=Rc.get(n.path,s),Wr=Rc.get("_id",An);nT(e,o,d,rr.modelNames,n,dt,Wr,s,M,An)}continue}if(Array.isArray(u)){let dt=u;for(let rr of dt){let An,Wr;try{Wr=S(s,rr,a,e),An=Wr.modelNames,v=v||Wr.isRefPath,R=R||Wr.refPath,E=Wr.justOne}catch(so){return so}if(!(v&&!Wr.isRefPath)&&An){l=l||[],p=p||new Set;for(let so of An)p.has(so)===!1&&(p.add(so),l.push(so))}}}else{try{let dt=S(s,u,a,e);l=dt.modelNames,v=dt.isRefPath,R=R||dt.refPath,E=dt.justOne,M=zs(u,"options.populate",null),v&&(I=l,l=Array.from(new Set(l)))}catch(dt){return dt}if(!l)continue}let j={},U=n.path,oe="_id";if("justOne"in n&&n.justOne!==void 0?E=n.justOne:u&&!u[rT]&&(n.path.endsWith("."+u.path)||n.path===u.path)&&(E=Array.isArray(u)?u.every(dt=>!dt.$isMongooseArray):!u.$isMongooseArray),!l)continue;j.isVirtual=!1,j.justOne=E,j.localField=U,j.foreignField=oe;let Q=lZ(s,U,e,n,null,u),un=String(Or.getValue(oe,s));n._docs[un]=Array.isArray(Q)?Q.slice():Q;let Vr=zs(n,"match",null),lu=typeof Vr=="function";lu&&(Vr=Vr.call(s,s)),oT(Vr),j.match=Vr,j.hasMatchFunction=lu,j.isRefPath=v,j.modelNamesInOrder=I,v&&(l=G5e(s,h,j,n,R,Q)||l);try{nT(e,o,d,l,n,j,Q,s,M)}catch(dt){return dt}}return o;function S(O,E,A,x){let v,R=!1,M=null,I=E;E?.instance==="Array"&&(E=E.embeddedSchemaType),E?.$isSchemaMap&&(E=E.$__schemaType);let j=E?.options?.ref;if(c=E?.options?.refPath,E!=null&&E[rT]&&!j&&!c&&!A)return{modelNames:null};if(A)v=[A];else if(c!=null){if(typeof c=="function"){let U=n.path.slice(0,n.path.length-E.path.length-1),oe=Rc.get(U,O,Pf),Q=Array.isArray(oe)?Or.array.flatten(oe):oe?[oe]:[];v=new Set;for(let un of Q)c=c.call(un,un,n.path),xb(c,O,n.path,h,n._queryProjection).forEach(Vr=>v.add(Vr));v=Array.from(v)}else v=xb(c,O,n.path,h,n._queryProjection);R=!0}else{let U,oe,Q,un,Vr=x,lu=x.schema.options.discriminatorKey;if(!E&&lu&&(un=Or.getValue(lu,O))){let dt=V5e(x.discriminators,un)||x;if(dt!=null)Vr=dt;else try{Vr=iT(x.db,un)}catch(rr){return rr}Q=Vr.schema._getSchema(n.path),Q?.embeddedSchemaType&&(Q=Q.embeddedSchemaType)}else Q=E;if(I&&I.path.endsWith(".$*")?M=!I.$isMongooseArray&&!I._arrayPath:Q!=null&&(M=!Q.$isMongooseArray&&!Q._arrayPath),(U=zs(Q,"options.ref"))!=null)if(Q!=null&&typeof U=="function"&&n.path.endsWith("."+Q.path)){v=new Set;let dt=n.path.slice(0,n.path.length-Q.path.length-1),rr=Rc.get(dt,O,Pf),An=Array.isArray(rr)?Or.array.flatten(rr):rr?[rr]:[];for(let Wr of An)v.add(eT(U,Wr));An.length===0?v=[eT(U,O)]:v=Array.from(v)}else U=eT(U,O),v=[U];else if((Q=zs(E,"options.refPath"))!=null)if(R=!0,typeof oe=="function"){let dt=n.path.slice(0,n.path.length-Q.path.length-1),rr=Rc.get(dt,O,Pf),An=Array.isArray(rr)?Or.array.flatten(rr):rr?[rr]:[];v=new Set;for(let Wr of An)oe=oe.call(Wr,Wr,n.path),xb(oe,O,n.path,h,n._queryProjection).forEach(so=>v.add(so));v=Array.from(v)}else v=xb(oe,O,n.path,h,n._queryProjection)}if(!v)if(n._localModel==null)v=[x.modelName];else return{modelNames:v,justOne:M,isRefPath:R,refPath:c};return Array.isArray(v)||(v=[v]),{modelNames:v,justOne:M,isRefPath:R,refPath:c}}};function H5e(t,e,r,n){let s=[],i={},o=n.virtual;for(let a of e){let u=null,c={},l,p=n.nestedSchemaPath?n.nestedSchemaPath+".":"";typeof r.localField=="string"?l=r.localField:typeof o.options.localField=="function"?l=p+o.options.localField.call(a,a):Array.isArray(o.options.localField)?l=o.options.localField.map(S=>p+S):l=p+o.options.localField,c.count=o.options.count,o.options.skip!=null&&!Object.hasOwn(r,"skip")&&(r.skip=o.options.skip),o.options.limit!=null&&!Object.hasOwn(r,"limit")&&(r.limit=o.options.limit),o.options.perDocumentLimit!=null&&!Object.hasOwn(r,"perDocumentLimit")&&(r.perDocumentLimit=o.options.perDocumentLimit);let d=o.options.foreignField;if(!l||!d)return new sT(`Cannot populate virtual \`${r.path}\` on model \`${t.modelName}\`, because options \`localField\` and / or \`foreignField\` are missing`);typeof l=="function"&&(l=l.call(a,a)),typeof d=="function"&&(d=d.call(a,a)),c.isRefPath=!1;let h=null;if("justOne"in r&&r.justOne!==void 0&&(h=r.justOne),n.nestedSchemaPath&&typeof o.options.ref=="function"){let S=Or.getValue(n.nestedSchemaPath,a);u=Array.isArray(S)?S.flatMap(O=>o._getModelNamesForPopulate(O)):o._getModelNamesForPopulate(S)}else u=o._getModelNamesForPopulate(a);o.options.refPath?(h=!!o.options.justOne,c.isRefPath=!0):o.options.ref&&(h=!!o.options.justOne),c.isVirtual=!0,c.virtual=o,c.justOne=h;let f=zs(c,"virtual.options.match",null)||zs(c,"virtual.options.options.match",null),y=zs(r,"match",null)||f,g=typeof y=="function";if(g&&(y=y.call(a,a,c.virtual)),Array.isArray(l)&&Array.isArray(d)&&l.length===d.length){y=Object.assign({},y);for(let S=1;S<l.length;++S)y[d[S]]=pZ(Rc.get(l[S],a,Pf),t.schema),g=!0;l=l[0],d=d[0]}c.localField=l,c.foreignField=d,c.match=y,c.hasMatchFunction=g,oT(y);let _=lZ(a,l,t,r,o);try{nT(t,s,i,u,r,c,_,a)}catch(S){return S}}return s}function nT(t,e,r,n,s,i,o,a,u,c){let l=s.connection??t.db;if(c=c===void 0?o:c,Array.isArray(c)&&(c=Or.cloneArrays(c)),n==null)return;let p=Or.array.flatten(n),d=p.length;for(;d--;){let h=p[d];if(h==null)continue;let f;if(s.model&&s.model[tT])f=s.model;else if(h[tT])f=h,h=f.modelName;else try{f=iT(l,h)}catch(S){if(o!==void 0)throw S;f=null}let y=o,g=i.modelNamesInOrder||n;i.isRefPath&&Array.isArray(o)&&o.length===g.length&&(y=cZ(o,g,h));let _=s.perDocumentLimit==null?zs(s,"options.perDocumentLimit",null):s.perDocumentLimit;if(!r[h]||_!=null){let S={model:f};i.isVirtual&&zs(i.virtual,"options.options")?S.options=U5e(i.virtual.options.options):u!=null&&(S.options=Object.assign({},u)),Or.merge(S,s),s[Z5]=f,S[Z5]=f,r[h]={model:f,options:S,match:i.hasMatchFunction?[i.match]:i.match,docs:[a],ids:[y],allIds:[o],unpopulatedValues:[c],localField:new Set([i.localField]),foreignField:new Set([i.foreignField]),justOne:i.justOne,isVirtual:i.isVirtual,virtual:i.virtual,count:i.count,[Z5]:f},e.push(r[h])}else r[h].localField.add(i.localField),r[h].foreignField.add(i.foreignField),r[h].docs.push(a),r[h].ids.push(y),r[h].allIds.push(o),r[h].unpopulatedValues.push(c),i.hasMatchFunction&&r[h].match.push(i.match)}}function iT(t,e){return t.models[e]==null&&t._parent!=null?iT(t._parent,e):t.model(e)}function cZ(t,e,r){return Array.isArray(e)?Array.isArray(t)&&Array.isArray(e)?t.flatMap((n,s)=>cZ(n,e[s],r)):[]:e===r?Array.isArray(t)?Or.array.flatten(t):[t]:[]}function eT(t,e){return typeof t=="function"&&!t[tT]?t.call(e,e):t}function lZ(t,e,r,n,s,i){let o=r.schema._getPathType(e),a=o==="real"?r.schema.path(e):o.schema,u=a?.getters||[];e=a?.instance==="Embedded"?e+"._id":e;let c=zs(n,"options",{}),l="getters"in c?c.getters:zs(s,"options.getters",!1);if(u.length!==0&&l){let p=t.$__!=null?t:r.hydrate(t),d=Or.getValue(e,t);if(Array.isArray(d)){let h=Or.getValue(e.split(".").slice(0,-1),p);return d.map((f,y)=>a.applyGetters(f,h[y]))}else return a.applyGetters(d,p)}else return pZ(Rc.get(e,t,Pf),i)}function pZ(t,e){if(t?.$__!=null)return t._doc._id;if(t?._id!=null&&!e?.$isSchemaMap)return t._id;if(Array.isArray(t)){let r=t.__array??t;for(let n=0;n<r.length;++n)r[n]?.$__!=null&&(r[n]=r[n]._doc._id);return Or.isMongooseArray(t)&&t.$schema()?t.$schema()._castForPopulate(t,t.$parent()):[].concat(t)}if(W5e(t)==="Object"&&e?.[rT]==null){let r=[];for(let n of Object.keys(t))r.push(t[n]);return r}return t instanceof Map?Array.from(t.values()):t}function G5e(t,e,r,n,s,i){if(!r.isRefPath||s==null)return;let o=s.split("."),a="",u;for(let c=0;c<o.length;++c){let l=o[c];a=a+(a.length===0?"":".")+l;let p=e.path(a);if(p!=null&&p.$isMongooseDocumentArray&&p.Constructor.discriminators!=null&&Or.hasOwnKeys(p.Constructor.discriminators)){let d=Or.getValue(a,t),h=n.path.substring(a.length+1),f=p.Constructor.schema.options.discriminatorKey;u=[];for(let y of d){let g=Or.getValue(f,y),S=p.Constructor.discriminators[g]?.schema;if(S==null)continue;let O=S.path(h);if(O==null||O.options.refPath==null){let A=Or.getValue(r.localField.substring(a.length+1),y);i.forEach((x,v)=>{x===A&&(i[v]=L5e(x))});continue}let E=Or.getValue(o.slice(c+1).join("."),y);u.push(E)}}}return u}function oT(t){if(t!=null&&typeof t=="object")for(let e of Object.keys(t)){if(e==="$where")throw new sT("Cannot use $where filter with populate() match");t[e]!=null&&typeof t[e]=="object"&&oT(t[e])}}});var mZ=m((Jje,fZ)=>{"use strict";var J5e=Rt();fZ.exports=function(e){if(Array.isArray(e)){let n=Object.keys(e[0]);return n.length===1&&n[0]==="_id"&&e[0]._id!=="hashed"}if(typeof e!="object")return!1;let r=J5e(e,"key",{});return Object.keys(r).length===1&&Object.hasOwn(r,"_id")}});var _Z=m((Yje,gZ)=>{"use strict";var Tb=Rt(),yZ=ae();gZ.exports=function(e,r,n){if(n.textIndexVersion!=null){delete n.key._fts,delete n.key._ftsx;let a={...n.weights,...n.key};if(Object.keys(a).length!==Object.keys(e).length)return!1;for(let u of Object.keys(a)){if(!(u in e))return!1;let c=a[u];if(c!==Tb(r,"weights."+u)&&!(c===1&&Tb(r,"weights."+u)==null))return!1}return r.default_language!==n.default_language?n.default_language==="english"&&r.default_language==null:!0}let s=["unique","partialFilterExpression","sparse","expireAfterSeconds","collation"];for(let a of s)if(!(!(a in r)&&!(a in n))){if(a==="collation"){if(r[a]==null||n[a]==null)return r[a]==null&&n[a]==null;let u=Object.keys(r.collation),c=r.collation,l=n.collation;for(let p of u)if(Tb(c,p)!==Tb(l,p))return!1}else if(!yZ.deepEqual(r[a],n[a]))return!1}let i=Object.keys(e),o=Object.keys(n.key);if(i.length!==o.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==o[a]||!yZ.deepEqual(e[i[a]],n.key[o[a]]))return!1;return!0}});var bZ=m((Qje,EZ)=>{"use strict";EZ.exports=function(e,r){if(r.timeseries==null)return!1;let{timeField:n,metaField:s}=r.timeseries;return typeof n!="string"||typeof s!="string"?!1:Object.keys(e.key).length===2&&e.key[n]===1&&e.key[s]===1}});var OZ=m((Xje,AZ)=>{"use strict";var Y5e=lb();function Q5e(t,e){return wZ({baseModelName:t.baseModelName,discriminatorMapping:t.schema.discriminatorMapping,indexes:e,indexesType:"schema"})}function X5e(t,e){return wZ({baseModelName:t.baseModelName,discriminatorMapping:t.schema.discriminatorMapping,indexes:e,indexesType:"db"})}AZ.exports={getRelatedSchemaIndexes:Q5e,getRelatedDBIndexes:X5e};function wZ({baseModelName:t,discriminatorMapping:e,indexes:r,indexesType:n}){let s=e?.key,i=e?.value;return s?t?r.filter(a=>{let u=SZ(a,n);return u&&u[s]===i}):r.filter(a=>{let u=SZ(a,n);return!u||!u[s]||Y5e(u[s])&&!("$eq"in u[s])}):r}function SZ(t,e){return e==="schema"?t[1]?.partialFilterExpression:t.partialFilterExpression}});var vZ=m((Zje,CZ)=>{"use strict";CZ.exports=Z5e;async function Z5e(t,e,r){if(r<=0)throw new Error("Limit must be positive");if(t.length===0)return[];let n=[],s=new Set;for(let i=0;i<t.length;i++){let o=t[i],a=e(o,i);n.push(a),s.add(a);let u=()=>s.delete(a);a.then(u).catch(u),s.size>=r&&await Promise.race(s)}return Promise.all(n)}});var TZ=m((eLe,xZ)=>{"use strict";xZ.exports=function t(e,r,n){if(r!=null)for(let s=0;s<r.length;++s)Array.isArray(r[s])?t(e,r[s],n+"."+s):e.push(n+"."+s)}});var IZ=m((tLe,BZ)=>{"use strict";var DZ=Rt(),MZ=fs(),PZ=I5();BZ.exports=function(e,r,n){let s=PZ(DZ(r,"select",null),!0)||PZ(DZ(r,"options.select",null),!0);if(s!=null){for(let i of e)if(Object.hasOwn(s,"-"+i))for(let o of n)o.$__!=null?MZ.unset(i,o._doc):MZ.unset(i,o)}}});var H5=m((XZ,ZZ)=>{"use strict";var eTe=V5(),tTe=I8(),no=Zi(),rTe=b_(),uT=require("events").EventEmitter,Nf=fc(),Pb=H7(),ge=ds(),nTe=$_(),sTe=L8(),Db=fb(),iTe=uX(),cT=Oc(),Mb=yc(),UZ=q8(),NZ=j8(),oTe=j_(),aTe=lX(),uTe=z5(),cTe=hX(),VZ=mX(),lTe=_X(),pTe=S5(),WZ=wX(),dTe=OX(),zZ=vX(),hTe=PX(),KZ=w5(),fTe=NX(),mTe=QX(),yTe=u5(),Xo=vt(),gTe=tZ(),HZ=o5(),aT=Y7(),GZ=z_(),_Te=kE(),ETe=nZ(),kf=Rt(),bTe=bn(),Bf=Us(),STe=hZ(),kZ=Da(),pT=bi().internalToObjectOptions,dT=mZ(),JZ=_Z(),wTe=bZ(),{getRelatedDBIndexes:ATe,getRelatedSchemaIndexes:OTe}=OZ(),hT=Rx(),CTe=H_(),vTe=Df(),xTe=vZ(),TTe=L5(),YZ=TZ(),DTe=IZ(),MTe=Z7(),RZ=require("util"),Je=ae(),PTe=ix(),BTe=U8(),ITe=R_(),Fc=c5(),$c=Symbol("mongoose#Model#collection"),qc=Symbol("mongoose#Model#db"),QZ=te().modelSymbol,If=Symbol("mongoose#Model#subclassed"),{VERSION_INC:Bb,VERSION_WHERE:FZ,VERSION_ALL:NTe}=no,kTe=Object.assign({},pT,{bson:!0});function L(t,e,r){if(e instanceof cT)throw new TypeError("2nd argument to `Model` constructor must be a POJO or string, **not** a schema. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");if(typeof t=="string")throw new TypeError("First argument to `Model` constructor must be an object, **not** a string. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");no.call(this,t,e,r)}Object.setPrototypeOf(L.prototype,no.prototype);L.prototype.$isMongooseModelPrototype=!0;L.prototype.db;L.useConnection=function(e){if(!e)throw new Error("Please provide a connection.");this.db&&(delete this.db.models[this.modelName],delete this.prototype.db,delete this.prototype[qc],delete this.prototype.collection,delete this.prototype.$collection,delete this.prototype[$c]),this.db=e;let r=e.collection(this.collection.collectionName,e.options);return this.prototype.collection=r,this.prototype.$collection=r,this.prototype[$c]=r,this.prototype.db=e,this.prototype[qc]=e,this.collection=r,this.$__collection=r,e.models[this.modelName]=this,this};L.prototype.collection;L.prototype.$__collection;L.prototype.modelName;L.prototype.$where;L.prototype.baseModelName;L.events;L._middleware;function lT(t,e){if(t.$where!=null)for(let r of Object.keys(t.$where))e[r]=t.$where[r]}function RTe(t,e){let r={};KZ(t.$__schema,e),typeof e.writeConcern<"u"?(r.writeConcern={},"w"in e.writeConcern&&(r.writeConcern.w=e.writeConcern.w),"j"in e.writeConcern&&(r.writeConcern.j=e.writeConcern.j),"wtimeout"in e.writeConcern&&(r.writeConcern.wtimeout=e.writeConcern.wtimeout)):("w"in e&&(r.w=e.w),"j"in e&&(r.j=e.j),"wtimeout"in e&&(r.wtimeout=e.wtimeout)),"checkKeys"in e&&(r.checkKeys=e.checkKeys);let n=t.$session(),s=t[qc].base.transactionAsyncLocalStorage?.getStore();return n!=null?r.session=n:!Object.hasOwn(e,"session")&&s?.session!=null&&(r.session=s.session),r}L.prototype.$__save=async function(e){try{await this._execDocumentPreHooks("save",e)}catch(o){await this._execDocumentPostHooks("save",o);return}let r=null,n=null;try{let o=RTe(this,e);if(this.$isNew){let a=this.toObject(kTe);if((a||{})._id===void 0)throw new ge("document must have an _id before saving");this.$__version(!0,a),this.$__reset(),w1(this,!1),this.$__.inserting=!0,r=await this[$c].insertOne(a,o).catch(u=>{throw w1(this,!0),u})}else{this.$__.inserting=!1;let a=this.$__delta();if(e.pathsToSave){for(let u in a[1].$set)if(!e.pathsToSave.includes(u)){if(e.pathsToSave.some(c=>u.slice(0,c.length)===c&&u.charAt(c.length)==="."))continue;delete a[1].$set[u]}}if(a){n=this.$__where(a[0]),lT(this,n);let u=a[1];if(this.$__schema.options.minimize){for(let c of Object.values(u))if(c!=null)for(let l of Object.keys(c))c[l]==null||typeof c[l]!="object"||Je.isPOJO(c[l])&&(PTe(c[l]),Je.hasOwnKeys(c[l])===!1&&(delete c[l],u.$unset=u.$unset||{},u.$unset[l]=1))}this.$__.modifiedPaths=this.modifiedPaths(),this.$__reset(),w1(this,!1),r=await this[$c].updateOne(n,u,o).catch(c=>{throw this.$__undoReset(),c})}else n=this.$__where(),lT(this,n),this.$__.version&&this.$__version(n,a),pTe(this.$__schema,o),r=await this.constructor.collection.findOne(n,{...o,projection:{_id:1}}).then(u=>({matchedCount:u?1:0}))}}catch(o){let a=this.$__schema._transformDuplicateKeyError(o);await this._execDocumentPostHooks("save",a);return}let s=0;if((e!=null?e.writeConcern!=null?e.writeConcern.w:e.w:0)!==0){if(r!=null&&(Array.isArray(r)?s=r.length:r.matchedCount!=null?s=r.matchedCount:s=r),this.$__.version&&!this.$__.inserting){let a=Bb===(Bb&this.$__.version);this.$__.version=void 0;let u=this.$__schema.options.versionKey,c=this.$__getValue(u)||0;if(s<=0){this.$__undoReset();let l=this.$__.$versionError||new UZ(this,c,this.$__.modifiedPaths);await this._execDocumentPostHooks("save",l);return}a&&this.$__setValue(u,c+1)}if(r!=null&&s<=0){this.$__undoReset();let a=new rTe(n,this.constructor.modelName,s,r);await this._execDocumentPostHooks("save",a);return}}this.$__.saving=void 0,this.$__.savedState={},this.$emit("save",this,s),this.constructor.emit("save",this,s),await this._execDocumentPostHooks("save")};function FTe(t,e,r){let n=t.$__schema.options.versionKey;if(!n)return null;let s=t.$__getValue(n)||0;return new UZ(t,s,e.concat(r))}L.prototype.save=async function(e){if(typeof e=="function"||typeof arguments[1]=="function")throw new ge("Model.prototype.save() no longer accepts a callback");let r;if(this.$op="save",this.$__.saving?r=new NZ(this):this.$__.saving=new NZ(this),e=new iTe(e),Object.hasOwn(e,"session")&&this.$session(e.session),this.$__.timestamps!=null&&(e.timestamps=this.$__.timestamps),this.$__.$versionError=FTe(this,this.modifiedPaths(),Object.keys(this.$__.activePaths.getStatePaths("default"))),r)throw this.$__handleReject(r),r;this.$__.saveOptions=e;try{await this.$__save(e)}catch(n){throw this.$__handleReject(n),n}finally{this.$__.saving=null,this.$__.saveOptions=null,this.$__.$versionError=null,this.$op=null}return this};L.prototype.$save=L.prototype.save;L.prototype.$__version=function(t,e){let r=this.$__schema.options.versionKey;if(t===!0){r&&(MTe(e,r,0),this.$__setValue(r,0));return}if(r!==!1&&this.$__isSelected(r)){if(FZ===(FZ&this.$__.version)){let n=this.$__getValue(r);n!=null&&(t[r]=n)}Bb===(Bb&this.$__.version)&&(kf(e.$set,r,null)!=null?++e.$set[r]:(e.$inc=e.$inc||{},e.$inc[r]=1))}};L.prototype.increment=function(){return this.$__.version=NTe,this};L.prototype.$__where=function(e){if(e||(e={}),e._id||(e._id=this._doc._id),this._doc._id===void 0)throw new ge("No _id found on document!");return e};L.prototype.deleteOne=function(e){if(typeof e=="function"||typeof arguments[1]=="function")throw new ge("Model.prototype.deleteOne() no longer accepts a callback");e||(e={}),Object.hasOwn(e,"session")&&this.$session(e.session);let r=this,n=this.$__where(),s=r.constructor.deleteOne();return this.$session()!=null&&("session"in s.options||(s.options.session=this.$session())),s.pre(async function(){let o=await r.constructor._middleware.execPre("deleteOne",r,[r,e]);if(o[0]!==r||o[1]!==e)throw new Error("Document deleteOne pre hooks cannot overwrite arguments");return s.deleteOne(n,e),r.$where!=null&&this.where(r.$where),o}),s.pre(function(){return Promise.all(r.$getAllSubdocs().map(o=>o.constructor._middleware.execPre("deleteOne",o,[o])))}),s.pre(function(){if(r.$__.isDeleted)throw new Nf.skipWrappedFunction}),s.post(function(){return Promise.all(r.$getAllSubdocs().map(o=>o.constructor._middleware.execPost("deleteOne",o,[o])))}),s.post(function(){return r.constructor._middleware.execPost("deleteOne",r,[r],{})}),s.transform(function(o){return o?.deletedCount>0&&r.$isDeleted(!0),o}),s};L.prototype.$model=function(e){return arguments.length===0?this.constructor:this[qc].model(e)};L.prototype.model=L.prototype.$model;L.exists=function(e,r){if(Ee(this,"exists"),typeof arguments[2]=="function")throw new ge("Model.exists() no longer accepts a callback");return this.findOne(e).select({_id:1}).lean().setOptions(r)};L.discriminator=function(t,e,r){let n;if(typeof t=="function"&&(n=t,t=Je.getFunctionName(n),!(n.prototype instanceof L)))throw new ge("The provided class "+t+" must extend Model");r=r||{};let s=Je.isPOJO(r)?r.value:r,i=typeof r.clone=="boolean"?r.clone:!0,o=typeof r.mergePlugins=="boolean"?r.mergePlugins:!0,a=typeof r.overwriteModels=="boolean"?r.overwriteModels:!1;if(Ee(this,"discriminator"),Je.isObject(e)&&!e.instanceOfSchema&&(e=new cT(e)),e instanceof cT&&i&&(e=e.clone()),e=_Te(this,t,e,s,o,r.mergeHooks,a),this.db.models[t]&&!e.options.overwriteModels&&!a)throw new sTe(t);e.$isRootDiscriminator=!0,e.$globalPluginsApplied=!0,n=this.db.model(n||t,e,this.$__collection.name),this.discriminators[t]=n;let u=this.discriminators[t];if(Object.setPrototypeOf(u.prototype,this.prototype),Object.defineProperty(u,"baseModelName",{value:this.modelName,configurable:!0,writable:!1}),VZ(u,e),zZ(u,e),this[If]!=null)for(let c of this[If])c.discriminators=c.discriminators||{},c.discriminators[t]=n.__subclass(n.db,e,c.collection.name);return u};function Ee(t,e){if(t==null||t===global)throw new ge("`Model."+e+"()` cannot run without a model as `this`. Make sure you are calling `MyModel."+e+"()` where `MyModel` is a Mongoose model.");if(t[QZ]==null)throw new ge("`Model."+e+"()` cannot run without a model as `this`. Make sure you are not calling `new Model."+e+"()`")}for(let t in uT.prototype)L[t]=uT.prototype[t];L.init=function(){if(Ee(this,"init"),typeof arguments[0]=="function")throw new ge("Model.init() no longer accepts a callback");if(this.schema.emit("init",this),this.$init!=null)return this.$init;let e=this.db,r=async()=>{if(Je.getOption("autoIndex",this.schema.options,e.config,e.base.options))return await this.ensureIndexes({_automatic:!0})},n=async()=>{if(Je.getOption("autoSearchIndex",this.schema.options,e.config,e.base.options))return await this.createSearchIndexes()},s=async()=>{let a=Je.getOption("autoCreate",this.schema.options,e.config);if(a==null&&(await e._waitForConnect(!0),a=Je.getOption("autoCreate",this.schema.options,e.config,e.base.options)),!!a)return await this.createCollection()};this.$init=s().then(()=>r()).then(()=>n());let i=this.$init.catch,o=this;return this.$init.catch=function(){return o.$caught=!0,i.apply(o.$init,arguments)},this.$init};L.createCollection=async function(e){if(Ee(this,"createCollection"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new ge("Model.createCollection() no longer accepts a callback");[e]=await this.hooks.execPre("createCollection",this,[e]).catch(a=>{if(a instanceof Nf.skipWrappedFunction)return[a];throw a});let r=this?.schema?.options?.collectionOptions;r!=null&&(e=Object.assign({},r,e));let n=this?.schema?.options?.collation;n!=null&&(e=Object.assign({collation:n},e));let s=this?.schema?.options?.capped;s!=null&&(typeof s=="number"?e=Object.assign({capped:!0,size:s},e):typeof s=="object"&&(e=Object.assign({capped:!0},s,e)));let i=this?.schema?.options?.timeseries;i!=null&&(e=Object.assign({timeseries:i},e),e.expireAfterSeconds!=null||(e.expires!=null?Je.expires(e):this.schema.options.expireAfterSeconds!=null?e.expireAfterSeconds=this.schema.options.expireAfterSeconds:this.schema.options.expires!=null&&(e.expires=this.schema.options.expires,Je.expires(e))));let o=this?.schema?.options?.clusteredIndex;o!=null&&(e=Object.assign({clusteredIndex:{...o,unique:!0}},e));try{e instanceof Nf.skipWrappedFunction||await this.db.createCollection(this.$__collection.collectionName,e)}catch(a){a!=null&&(a.name!=="MongoServerError"||a.code!==48)&&await this.hooks.execPost("createCollection",this,[null],{error:a})}return await this.hooks.execPost("createCollection",this,[this.$__collection]),this.$__collection};L.syncIndexes=async function(e){if(Ee(this,"syncIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new ge("Model.syncIndexes() no longer accepts a callback");if(e?.autoCreate??this.schema.options?.autoCreate??this.db.config.autoCreate??this.db.base?.options?.autoCreate??!0)try{await this.createCollection()}catch(i){if(i!=null&&(i.name!=="MongoServerError"||i.code!==48))throw i}let n=await this.diffIndexes({indexOptionsToCreate:!0}),s=await this.cleanIndexes({...e,toDrop:n.toDrop});return await this.createIndexes({...e,toCreate:n.toCreate}),s};L.createSearchIndex=async function(e){return Ee(this,"createSearchIndex"),await this.$__collection.createSearchIndex(e)};L.updateSearchIndex=async function(e,r){return Ee(this,"updateSearchIndex"),await this.$__collection.updateSearchIndex(e,r)};L.dropSearchIndex=async function(e){return Ee(this,"dropSearchIndex"),await this.$__collection.dropSearchIndex(e)};L.listSearchIndexes=async function(e){return Ee(this,"listSearchIndexes"),await(await this.$__collection.listSearchIndexes(e)).toArray()};L.diffIndexes=async function(e){if(typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new ge("Model.syncIndexes() no longer accepts a callback");let r=this,n=await r.listIndexes().catch(u=>{if(u.codeName!="NamespaceNotFound")throw u});n===void 0&&(n=[]),n=ATe(r,n);let s=r.schema,i=OTe(r,s.indexes()),o=qTe(s,i,n),a=$Te(s,i,n,o,e);return{toDrop:o,toCreate:a}};function $Te(t,e,r,n,s){let i=[],o=s?.indexOptionsToCreate??!1;for(let[a,u]of e){let c=!1,l=hT(t,Xo(u));for(let p of r)if(!dT(p)&&JZ(a,l,p)&&!n.includes(p.name)){c=!0;break}c||(o?i.push([a,u]):i.push(a))}return i}function qTe(t,e,r){let n=[];for(let s of r){let i=!1;if(!dT(s)&&!wTe(s,t.options)){for(let[o,a]of e){let u=hT(t,Xo(a));if(WZ(o,u,t.options),JZ(o,u,s)){i=!0;break}}i||n.push(s.name)}}return n}L.cleanIndexes=async function(e){if(Ee(this,"cleanIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new ge("Model.cleanIndexes() no longer accepts a callback");let r=this;if(Array.isArray(e?.toDrop))return await $Z(e.toDrop,r,e);let n=await r.diffIndexes();return await $Z(n.toDrop,r,e)};async function $Z(t,e,r){if(t.length===0)return[];let n=e.$__collection;return r?.hideIndexes?await Promise.all(t.map(s=>e.db.db.command({collMod:n.collectionName,index:{name:s,hidden:!0}}))):await Promise.all(t.map(s=>n.dropIndex(s))),t}L.listIndexes=async function(){if(Ee(this,"listIndexes"),typeof arguments[0]=="function")throw new ge("Model.listIndexes() no longer accepts a callback");return this.$__collection.buffer&&await new Promise(e=>{this.$__collection.addQueue(e)}),this.$__collection.listIndexes().toArray()};L.ensureIndexes=async function(e){if(Ee(this,"ensureIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new ge("Model.ensureIndexes() no longer accepts a callback");await new Promise((r,n)=>{jTe(this,e,s=>{if(s!=null)return n(s);r()})})};L.createIndexes=async function(e){if(Ee(this,"createIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new ge("Model.createIndexes() no longer accepts a callback");return this.ensureIndexes(e)};function jTe(t,e,r){let n=Array.isArray(e?.toCreate)?e.toCreate:t.schema.indexes(),s;e=e||{};let i=function(p){p&&!t.$caught&&t.emit("error",p),t.emit("index",p||s),r&&r(p||s)};for(let p of n)dT(p)&&Je.warn('mongoose: Cannot specify a custom index on `_id` for model name "'+t.modelName+'", MongoDB does not allow overwriting the default `_id` index. See https://bit.ly/mongodb-id-index');if(!n.length){kZ(function(){i()});return}let o=function(p,d,h,f){t.emit("index-single-done",p,d,h,f)},a=function(p,d){t.emit("index-single-start",p,d)},u=t.schema._baseSchema,c=u?u.indexes():[];kZ(function(){e._automatic&&!t.collection.collection?t.collection.addQueue(l,[]):l()});function l(){if(e._automatic&&(t.schema.options.autoIndex===!1||t.schema.options.autoIndex==null&&t.db.config.autoIndex===!1))return i();let p=n.shift();if(!p)return i();if(e._automatic&&p[1]._autoIndex===!1||c.find(y=>Je.deepEqual(y,p)))return l();let d=Xo(p[0]),h=Xo(p[1]);delete h._autoIndex,hT(t.schema,h),KZ(t.schema,h),WZ(d,h,t.schema.options),a(d,e);let f=null;try{f=t.collection.createIndex(d,h)}catch(y){s||(s=y),t.$caught||t.emit("error",y),o(y,d,h),l();return}f.then(y=>{o(null,d,h,y),l()},y=>{s||(s=y),t.$caught||t.emit("error",y),o(y,d,h),l()})}}L.createSearchIndexes=async function(){Ee(this,"createSearchIndexes");let e=[];for(let r of this.schema._searchIndexes)e.push(await this.createSearchIndex(r));return e};L.schema;L.db;L.collection;L.$__collection;L.base;L.discriminators;L.translateAliases=function(e,r){Ee(this,"translateAliases");let n=(s,i)=>{let o,a=[],u=s.split("."),c=this.schema;for(let p in u){let d=u[p];if(c?.aliases[d]){if(o=c.aliases[d],r&&o in e)throw new ge(`Provided object has both field "${d}" and its alias "${o}"`);a.push(o)}else o=d,a.push(d);c?.paths[o]?c=c.paths[o].schema:c=null}let l=a.join(".");return e instanceof Map?e.set(l,i):e[l]=i,l!==s&&(e instanceof Map?e.delete(s):delete e[s]),e};if(typeof e=="object"){if(e instanceof Map)for(let s of new Map(e))e=n(s[0],s[1]);else for(let s of Object.keys(e))if(e=n(s,e[s]),s[0]==="$")if(Array.isArray(e[s]))for(let i in e[s])e[s][i]=this.translateAliases(e[s][i]);else this.translateAliases(e[s]);return e}else return e};L.deleteOne=function(e,r){if(Ee(this,"deleteOne"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ge("Model.prototype.deleteOne() no longer accepts a callback");let n=new this.Query({},{},this,this.$__collection);return n.setOptions(r),n.deleteOne(e)};L.deleteMany=function(e,r){if(Ee(this,"deleteMany"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ge("Model.deleteMany() no longer accepts a callback");let n=new this.Query({},{},this,this.$__collection);return n.setOptions(r),n.deleteMany(e)};L.find=function(e,r,n){if(Ee(this,"find"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new ge("Model.find() no longer accepts a callback");let s=new this.Query({},{},this,this.$__collection);return s.select(r),s.setOptions(n),s.find(e)};L.findById=function(e,r,n){if(Ee(this,"findById"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ge("Model.findById() no longer accepts a callback");return this.findOne({_id:e},r,n)};L.findOne=function(e,r,n){if(Ee(this,"findOne"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ge("Model.findOne() no longer accepts a callback");let s=new this.Query({},{},this,this.$__collection);return s.select(r),s.setOptions(n),s.findOne(e)};L.estimatedDocumentCount=function(e){return Ee(this,"estimatedDocumentCount"),new this.Query({},{},this,this.$__collection).estimatedDocumentCount(e)};L.countDocuments=function(e,r){if(Ee(this,"countDocuments"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ge("Model.countDocuments() no longer accepts a callback");let n=new this.Query({},{},this,this.$__collection);return r!=null&&n.setOptions(r),n.countDocuments(e)};L.distinct=function(e,r,n){if(Ee(this,"distinct"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ge("Model.distinct() no longer accepts a callback");let s=new this.Query({},{},this,this.$__collection);return n!=null&&s.setOptions(n),s.distinct(e,r)};L.where=function(e,r){Ee(this,"where");let n=new this.Query({},{},this,this.$__collection).find({});return n.where.apply(n,arguments)};L.$where=function(){Ee(this,"$where");let e=new this.Query({},{},this,this.$__collection).find({});return e.$where.apply(e,arguments)};L.findOneAndUpdate=function(t,e,r){if(Ee(this,"findOneAndUpdate"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new ge("Model.findOneAndUpdate() no longer accepts a callback");let n;r&&(n=r.fields||r.projection),e=Xo(e,{depopulate:!0,_isNested:!0}),HZ(e,r,this.schema.options.versionKey);let s=new this.Query({},{},this,this.$__collection);return s.select(n),s.findOneAndUpdate(t,e,r)};L.findByIdAndUpdate=function(t,e,r){if(Ee(this,"findByIdAndUpdate"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new ge("Model.findByIdAndUpdate() no longer accepts a callback");return t instanceof no&&(t=t._doc._id),this.findOneAndUpdate.call(this,{_id:t},e,r)};L.findOneAndDelete=function(t,e){if(Ee(this,"findOneAndDelete"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ge("Model.findOneAndDelete() no longer accepts a callback");let r;e&&(r=e.select,e.select=void 0);let n=new this.Query({},{},this,this.$__collection);return n.select(r),n.findOneAndDelete(t,e)};L.findByIdAndDelete=function(t,e){if(Ee(this,"findByIdAndDelete"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ge("Model.findByIdAndDelete() no longer accepts a callback");return this.findOneAndDelete({_id:t},e)};L.findOneAndReplace=function(t,e,r){if(Ee(this,"findOneAndReplace"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new ge("Model.findOneAndReplace() no longer accepts a callback");let n;r&&(n=r.select,r.select=void 0);let s=new this.Query({},{},this,this.$__collection);return s.select(n),s.findOneAndReplace(t,e,r)};L.create=async function(e,r){if(typeof r=="function"||typeof arguments[2]=="function")throw new ge("Model.create() no longer accepts a callback");Ee(this,"create");let n,s=this.schema.options.discriminatorKey;if(Array.isArray(e))n=e,r=r!=null&&typeof r=="object"?r:{};else{let a=arguments[arguments.length-1];if(r={},typeof a=="function"||typeof r=="function"||typeof arguments[2]=="function")throw new ge("Model.create() no longer accepts a callback");n=[...arguments],n.length>1&&!a&&n.pop(),n.length===2&&n[0]!=null&&n[1]!=null&&n[0].session==null&&a&&bTe(a.session)==="ClientSession"&&!this.schema.path("session")&&Je.warn("WARNING: to pass a `session` to `Model.create()` in Mongoose, you **must** pass an array as the first argument. See: https://mongoosejs.com/docs/api/model.html#Model.create()")}if(n.length===0)return Array.isArray(e)?[]:null;let i=[],o=typeof r.aggregateErrors=="boolean"?!r.aggregateErrors:!0;if(delete r.aggregateErrors,r.session&&!r.ordered&&n.length>1)throw new ge("Cannot call `create()` with a session and multiple documents unless `ordered: true` is set");if(r.ordered){for(let a=0;a<n.length;a++)try{let u=n[a],c=this.discriminators&&u[s]!=null?this.discriminators[u[s]]||Bf(this.discriminators,u[s]):this;if(c==null)throw new ge(`Discriminator "${u[s]}" not found for model "${this.modelName}"`);let l=u;l instanceof c||(l=new c(l)),await l.$save(r),i.push(l)}catch(u){if(!o)i.push(u);else throw u}return i}else if(!o)i=await Promise.allSettled(n.map(async a=>{let u=this.discriminators&&a[s]!=null?this.discriminators[a[s]]||Bf(this.discriminators,a[s]):this;if(u==null)throw new ge(`Discriminator "${a[s]}" not found for model "${this.modelName}"`);let c=a;return c instanceof u||(c=new u(c)),await c.$save(r),c})),i=i.map(a=>a.status==="fulfilled"?a.value:a.reason);else{let a=null;if(i=await Promise.all(n.map(async u=>{let c=this.discriminators&&u[s]!=null?this.discriminators[u[s]]||Bf(this.discriminators,u[s]):this;if(c==null)throw new ge(`Discriminator "${u[s]}" not found for model "${this.modelName}"`);try{let l=u;return l instanceof c||(l=new c(l)),await l.$save(r),l}catch(l){a||(a=l)}})),a)throw a}return!Array.isArray(e)&&n.length===1?i[0]:i};L.insertOne=async function(e,r){Ee(this,"insertOne");let n=this.schema.options.discriminatorKey,s=this.discriminators&&e[n]!=null?this.discriminators[e[n]]||Bf(this.discriminators,e[n]):this;if(s==null)throw new ge(`Discriminator "${e[n]}" not found for model "${this.modelName}"`);return e instanceof s||(e=new s(e)),await e.$save(r)};L.watch=function(t,e){Ee(this,"watch"),e=e||{};let r=e?.hydrate!==void 0?Je.omit(e,["hydrate"]):{...e};e.model=this;let n=s=>{if(t=t||[],TTe(t,this.schema,"fullDocument"),this.$__collection.buffer)this.$__collection.addQueue(()=>{if(this.closed)return;let i=this.$__collection.watch(t,r);s(null,i)});else{let i=this.$__collection.watch(t,r);s(null,i)}};return new tTe(n,t,e)};L.startSession=function(){return Ee(this,"startSession"),this.db.startSession.apply(this.db,arguments)};L.insertMany=async function(e,r){if(Ee(this,"insertMany"),typeof r=="function"||typeof arguments[2]=="function")throw new ge("Model.insertMany() no longer accepts a callback");try{[e]=await this._middleware.execPre("insertMany",this,[e])}catch(E){await this._middleware.execPost("insertMany",this,[e],{error:E})}r=r||{};let n=this,s=r.limit||1e3,i=!!r.rawResult,o=typeof r.ordered=="boolean"?r.ordered:!0,a=typeof r.throwOnValidationError=="boolean"?r.throwOnValidationError:!1,u=!!r.lean,c=this.db.base.transactionAsyncLocalStorage?.getStore();(!r||!Object.hasOwn(r,"session"))&&c?.session!=null&&(r={...r,session:c.session}),Array.isArray(e)||(e=[e]);let l=[],p=new Map,d=o?null:new Array(e.length);async function h(E,A){if(u)return E;let x=!1;if(!(E instanceof n)){if(E!=null&&typeof E!="object")throw new nTe(E,"arr."+A,"insertMany");E=new n(E),x=!0}return r.session!=null&&E.$session(r.session),E.$validate(x?{_skipParallelValidateCheck:!0}:null).then(()=>E).catch(v=>{if(o===!1){v.index=A,l.push(v),p.set(v,A),d[A]=v;return}throw v})}let f=await xTe(e,h,s),y=new Map,g=new Map;for(let E=0;E<f.length;++E)y.set(f[E],E);let _=f.filter(function(E){return E!=null});for(let E=0;E<_.length;++E)g.set(E,y.get(_[E]));if(l.length>0&&l.sort((E,A)=>p.get(E)-p.get(A)),_.length===0){if(a)throw new Pb(l,d,null,"insertMany");if(i){let E={acknowledged:!0,insertedCount:0,insertedIds:{}};return Fc(E,l,l),E}return[]}let S=u?_:_.map(function(E){return E.$__schema.options.versionKey&&(E[E.$__schema.options.versionKey]=0),r?.timestamps!==!1&&E.initializeTimestamps&&(!E.$__||E.$__.timestamps!==!1)&&E.initializeTimestamps(r?.timestamps),E.$__hasOnlyPrimitiveValues()?E.$__toObjectShallow():E.toObject(pT)}),O;try{O=await this.$__collection.insertMany(S,r)}catch(E){E.writeErrors==null&&E.result?.result?.writeErrors!=null&&(E.writeErrors=E.result.result.writeErrors);let A=E?.writeErrors,x=new Set((E?.writeErrors||[]).map(R=>R.index));if(E.writeErrors!=null)for(let R=0;R<E.writeErrors.length;++R){let M=g.get(E.writeErrors[R].index);E.writeErrors[R]={...E.writeErrors[R],index:M},o||(d[M]=E.writeErrors[R])}if(!o){for(let R=0;R<d.length;++R)d[R]===void 0&&(d[R]=f[R]);E.results=d}let v=-1;E.insertedDocs=_.filter((R,M)=>{let I=!A||x.has(M);if(o){if(v>-1)return M<v;I&&(v=M)}return!I}).map(function(M){return u||(M.$__reset(),w1(M,!1)),M}),i&&o===!1&&Fc(E,l,d),await this._middleware.execPost("insertMany",this,[e],{error:E})}if(!u)for(let E of _)E.$__reset(),w1(E,!1);if(o===!1&&a&&l.length>0){for(let E=0;E<d.length;++E)d[E]===void 0&&(d[E]=f[E]);throw new Pb(l,d,O,"insertMany")}if(i){if(o===!1){for(let E=0;E<d.length;++E)d[E]===void 0&&(d[E]=f[E]);Fc(O,l,d)}return O}return r.populate!=null?this.populate(_,r.populate).catch(E=>{throw E!=null&&(E.insertedDocs=_),E}):await this._middleware.execPost("insertMany",this,[_]).then(E=>E[0])};function w1(t,e){t.$isNew=e,t.$emit("isNew",e),t.constructor.emit("isNew",e);let r=t.$getAllSubdocs({useCache:!0});for(let n of r)n.$isNew=e,n.$emit("isNew",e)}L.bulkWrite=async function(e,r){if(Ee(this,"bulkWrite"),typeof r=="function"||typeof arguments[2]=="function")throw new ge("Model.bulkWrite() no longer accepts a callback");r=r||{};try{[e,r]=await this.hooks.execPre("bulkWrite",this,[e,r])}catch(a){a instanceof Nf.skipWrappedFunction?e=a:await this.hooks.execPost("bulkWrite",this,[null],{error:a})}if(e instanceof Nf.skipWrappedFunction)return e.args[0];let n=r.ordered==null?!0:r.ordered;if(e.length===0){let a=this.base.driver.get().BulkWriteResult,u=new a(aT(),!1);return u.n=0,Fc(u,[],[]),u}let s=r?._skipCastBulkWrite?[]:e.map(a=>yTe(this,a,r)),i=this.db.base.transactionAsyncLocalStorage?.getStore();(!r||!Object.hasOwn(r,"session"))&&i?.session!=null&&(r={...r,session:i.session});let o=null;if(n){await new Promise((a,u)=>{ETe(s,(c,l)=>c(l),c=>{if(c)return u(c);a()})});try{o=await this.$__collection.bulkWrite(e,r)}catch(a){await this.hooks.execPost("bulkWrite",this,[null],{error:a})}}else{let a=[],u=[],c=[];s.length>0?(a=await Promise.all(e.map((h,f)=>f>=s.length?f:new Promise(y=>{s[f](g=>{g==null?y(f):(u.push({index:f,error:g}),c[f]=g),y()})}))),a=a.filter(h=>h!=null)):a=e.map((h,f)=>f),u=u.sort((h,f)=>h.index-f.index).map(h=>h.error);let l=a.sort().map(h=>e[h]);if(l.length===0){if(r.throwOnValidationError&&u.length)throw new Pb(u,c,o,"bulkWrite");let h=this.base.driver.get().BulkWriteResult,f=new h(aT(),!1);return f.result=aT(),Fc(f,u,c),f}let p;[o,p]=await this.$__collection.bulkWrite(l,r).then(h=>[h,null]).catch(h=>[null,h]);let d={};if(p?.writeErrors)for(let h of p.writeErrors)d[h.err.index]=h;for(let h=0;h<a.length;++h)c[a[h]]=d[h]??null;if(p&&(u.length>0&&Fc(p,u,c),await this.hooks.execPost("bulkWrite",this,[null],{error:p})),u.length>0){if(r.throwOnValidationError)throw new Pb(u,c,o,"bulkWrite");Fc(o,u,c)}}return await this.hooks.execPost("bulkWrite",this,[o]),o};L.bulkSave=async function(e,r){if(r=r||{},r.timestamps!=null)for(let l of e)l.$__.saveOptions=l.$__.saveOptions||{},l.$__.saveOptions.timestamps=r.timestamps;else for(let l of e)l.$__.timestamps!=null&&(l.$__.saveOptions=l.$__.saveOptions||{},l.$__.saveOptions.timestamps=l.$__.timestamps);await Promise.all(e.map(l=>LTe(l,r)));let n=this.buildBulkWriteOperations(e,r),s={skipValidation:!0,_skipCastBulkWrite:!0,...r},{bulkWriteResult:i,bulkWriteError:o}=await this.bulkWrite(n,s).then(l=>({bulkWriteResult:l,bulkWriteError:null}),l=>({bulkWriteResult:null,bulkWriteError:l}));if(o!=null&&o.name!=="MongoBulkWriteError")throw o;let a=i?.matchedCount??0,u=i?.insertedCount??0;if(n.length>0&&a+u<n.length&&!o)throw new BTe(this.modelName,e,i);let c=[];for(let l=0;l<e.length;l++){let p=e[l];o?.writeErrors.find(h=>(h.err.op._id||h.err.op.q._id).toString()===p._doc._id.toString())==null&&c.push(p)}if(await Promise.all(c.map(l=>UTe(l))),o!=null)throw o;return i};async function LTe(t,e){let[r]=await t.schema.s.hooks.execPre("save",t,[e]);if(r!==e)throw new Error('Cannot overwrite options in pre("save") hook on bulkSave()')}async function UTe(t){return t.$isNew&&w1(t,!1),t.$__reset(),t._applyVersionIncrement(),t.schema.s.hooks.execPost("save",t,[t])}L.applyDefaults=function t(e){if(e==null)return e;if(e.$__!=null){oTe(e,e.$__.fields,e.$__.exclude);for(let r of e.$getAllSubdocs())t(r,r.$__.fields,r.$__.exclude);return e}return aTe(e,this.schema),e};L.applyVirtuals=function(e,r){return e==null||e.$__!=null||fTe(this.schema,e,r),e};L.applyTimestamps=function(e,r){return e==null||e.$__!=null||hTe(this.schema,e,r),e};L.castObject=function(e,r){r=r||{};let n={},s=this.schema,i=s.options.discriminatorKey;s.discriminators!=null&&e!=null&&e[i]!=null&&(s=GZ(s,e[i])||s);let o=Object.keys(s.paths);for(let u of o){if(!s.path(u)?.$isMongooseArray)continue;let l=kf(e,u);YZ(o,l,u)}let a=null;for(let u of o){let c=s.path(u);if(c==null)continue;let l=kf(e,u,void 0);if(l==null)continue;let p=u.indexOf(".")===-1?[u]:u.split("."),d=n;for(let h=0;h<p.length-1;++h)d[p[h]]==null&&(d[p[h]]=isNaN(p[h+1])?{}:[]),d=d[p[h]];if(c.$isMongooseDocumentArray){let h=c.options?.castNonArrays??c.constructor.options.castNonArrays;if(!Array.isArray(l)){h?d[p[p.length-1]]=[L.castObject.call(c.Constructor,l)]:r.ignoreCastErrors||(a=a||new Mb,a.addError(u,new ITe(u,l)));continue}}if(c.$isSingleNested||c.$isMongooseDocumentArrayElement){try{l=L.castObject.call(c.Constructor,l)}catch(h){r.ignoreCastErrors||(a=a||new Mb,a.addError(u,h));continue}d[p[p.length-1]]=l;continue}try{l=c.cast(l),d[p[p.length-1]]=l}catch(h){r.ignoreCastErrors||(a=a||new Mb,a.addError(u,h));continue}}if(a!=null)throw a;return n};L.buildBulkWriteOperations=function(e,r){if(!Array.isArray(e))throw new Error(`bulkSave expects an array of documents to be passed, received \`${e}\` instead`);return s(),e.map((i,o)=>{if(!r.skipValidation){if(!(i instanceof no))throw new Error(`documents.${o} was not a mongoose document, documents must be an array of mongoose documents (instanceof mongoose.Document).`);if(r.validateBeforeSave==null||r.validateBeforeSave){let l=i.validateSync();if(l!=null)throw l}}if(i.isNew){let l={insertOne:{document:i}};return Je.injectTimestampsOption(l.insertOne,r.timestamps),l}let u=i.$__delta();if(u!=null&&!Je.isEmptyObject(u[0])){let l=i.$__where(u[0]),p=u[1];lT(i,l);let d=this.schema.options.shardKey;if(d){let f=Object.keys(d),y=f.length;for(let g=0;g<y;++g)l[f[g]]=i[f[g]]}i.$__version(l,u);let h={updateOne:{filter:l,update:p}};return Je.injectTimestampsOption(h.updateOne,r.timestamps),h}return null}).filter(i=>i!==null);function s(){r=r||{},r.skipValidation==null&&(r.skipValidation=!1)}};L.hydrate=function(t,e,r){if(Ee(this,"hydrate"),r?.virtuals&&r?.hydratedPopulatedDocs===!1)throw new ge("Cannot set `hydratedPopulatedDocs` option to false if `virtuals` option is truthy because `virtuals: true` also sets populated virtuals");e!=null&&(t?.$__!=null&&(t=t.toObject(pT)),t=lTe(t,e));let n=qh().createModel(this,t,e,e,r);return n.$init(t,r),n};L.updateMany=function(e,r,n){if(Ee(this,"updateMany"),r==null)throw new ge("updateMany `update` parameter cannot be nullish");return fT(this,"updateMany",e,r,n)};L.updateOne=function(e,r,n){return Ee(this,"updateOne"),fT(this,"updateOne",e,r,n)};L.replaceOne=function(e,r,n){Ee(this,"replaceOne");let s=this?.schema?.options?.versionKey||null;return s&&!r[s]&&(r[s]=0),fT(this,"replaceOne",e,r,n)};function fT(t,e,r,n,s){let i=new t.Query({},{},t,t.collection);r instanceof no?r=r.toObject():r=Xo(r),s=typeof s=="function"?s:Xo(s);let o=t?.schema?.options?.versionKey||null;return HZ(n,s,o),i[e](r,n,s)}L.aggregate=function(e,r){if(Ee(this,"aggregate"),typeof r=="function"||typeof arguments[2]=="function")throw new ge("Model.aggregate() no longer accepts a callback");let n=new eTe(e||[]);return n.model(this),r!=null&&n.option(r),n};L.validate=async function(e,r,n){if((arguments.length<3||arguments.length===3&&typeof arguments[2]=="function")&&(n=e),typeof n=="function"||typeof arguments[3]=="function")throw new ge("Model.validate() no longer accepts a callback");let s=this.schema,i=s.options.discriminatorKey;s.discriminators!=null&&e!=null&&e[i]!=null&&(s=GZ(s,e[i])||s);let o=Object.keys(s.paths);if(r!=null){let c=typeof r=="string"?new Set(r.split(" ")):Array.isArray(r)?new Set(r):new Set(o);o=o.filter(l=>{if(r.pathsToSkip){if(Array.isArray(r.pathsToSkip)){if(r.pathsToSkip.find(h=>h==l))return!1}else if(typeof r.pathsToSkip=="string"&&r.pathsToSkip.includes(l))return!1}let p=l.split("."),d=p[0];for(let h of p){if(c.has(d))return!0;d+="."+h}return c.has(l)})}for(let c of o){let l=s.path(c);if(!l?.$isMongooseArray||l.$isMongooseDocumentArray)continue;let p=kf(e,c);YZ(o,p,c)}let a=null;o=new Set(o);try{e=this.castObject(e)}catch(c){a=c;for(let l of Object.keys(a.errors||{}))o.delete(l)}let u=[];for(let c of o){let l=s.path(c);if(l==null)continue;let p=c.indexOf(".")===-1?[c]:c.split("."),d=e;for(let f=0;f<p.length-1;++f)d=d[p[f]];let h=kf(e,c,void 0);u.push(l.doValidate(h,n,{path:c}).catch(f=>{a=a||new Mb,a.addError(c,f)}))}if(await Promise.all(u),a!=null)throw a;return e};L.populate=async function(e,r){if(Ee(this,"populate"),typeof r=="function"||typeof arguments[2]=="function")throw new ge("Model.populate() no longer accepts a callback");if(r=Je.populate(r),r.length===0)return e;if(r.find(n=>n.ordered))for(let n of r)await qZ(this,e,n);else{let n=[];for(let s of r)n.push(qZ(this,e,s));await Promise.all(n)}return e};var VTe=/\s?-_id\s?/,WTe=/\s?-_id\s?/g;async function qZ(t,e,r){if(r.strictPopulate==null&&(r._localModel?.schema._userProvidedOptions.strictPopulate!=null?r.strictPopulate=r._localModel.schema._userProvidedOptions.strictPopulate:(r._localModel!=null&&t.base.options.strictPopulate!=null||t.base.options.strictPopulate!=null)&&(r.strictPopulate=t.base.options.strictPopulate)),Array.isArray(e)||(e=[e]),e.length===0||e.every(Je.isNullOrUndefined))return;let n=STe(t,e,r);if(n instanceof ge)throw n;let s=n.length,i=[];function o(l){return l!==void 0}let a=!1,u=[];for(let l=0;l<s;++l){let p=n[l],d=p.options.select,h=Je.array.flatten(p.ids,o);h=Je.array.unique(h);let f={};if(f.sort=p&&p.options&&p.options.options&&p.options.options.sort||void 0,f.excludeId=VTe.test(d)||d&&d._id===0,p.options&&p.options.options&&p.options.options.lean&&p.options.options.lean.transform&&(p.options.options._leanTransform=p.options.options.lean.transform,p.options.options.lean=!0),h.length===0||h.every(Je.isNullOrUndefined)){LZ(t,[],p,f);continue}a=!0,typeof r.foreignField=="string"&&(p.foreignField.clear(),p.foreignField.add(r.foreignField));let y=gTe(h,p.match,p.foreignField,p.model,p.options.skipInvalidIds);f.excludeId&&(typeof d=="string"?d=d.replace(WTe," "):Array.isArray(d)?d=d.filter(g=>g!=="-_id"):(d={...d},delete d._id)),p.options.options?.limit!=null?f.originalLimit=p.options.options.limit:p.options.limit!=null&&(f.originalLimit=p.options.limit),u.push([p,y,d,f])}if(!a){if(n.length!==0)return;if(r.populate!=null){let l=Je.populate(r.populate).map(p=>Object.assign({},p,{path:r.path+"."+p.path}));return t.populate(e,l)}return}let c=new Map;if(r.ordered)for(let l=0;l<u.length;l++){let p=u[l],{docs:d,deferredPopulates:h}=await jZ.apply(null,p);i=i.concat(d),h.length>0&&c.set(l,h)}else{let l=[];for(let d of u)l.push(jZ.apply(null,d));let p=await Promise.all(l);for(let d=0;d<p.length;d++){let{docs:h,deferredPopulates:f}=p[d];i=i.concat(h),f.length>0&&c.set(d,f)}}for(let l of u){let p=l[0],d=l[3];for(let h of i)p.options._childDocs.push(h);LZ(t,i,p,d)}if(c.size>0)for(let l=0;l<u.length;l++){let d=u[l][0];if(!Array.isArray(d.match))continue;let h=c.get(l);if(!h||h.length===0)continue;let f=[];for(let y of d.docs){let g=y.$__!=null?y.get(d.options.path):y[d.options.path];Array.isArray(g)?f.push(...g):g!=null&&f.push(g)}if(f.length>0)for(let y of h)await d.model.populate(f,y)}for(let l of u)DTe(l[0].foreignField,l[0].options,i);for(let l of u){let p=l[0];if(p.options?.options?._leanTransform)for(let d of i)p.options.options._leanTransform(d)}}function jZ(t,e,r){let n=Xo(t.options.populate),s={};t.options.skip!==void 0&&(s.skip=t.options.skip),t.options.limit!==void 0&&(s.limit=t.options.limit),t.options.perDocumentLimit!==void 0&&(s.perDocumentLimit=t.options.perDocumentLimit),Object.assign(s,t.options.options),t.count&&delete s.skip,s.perDocumentLimit!=null?(s.limit=s.perDocumentLimit,delete s.perDocumentLimit):s.limit!=null&&(s.limit=s.limit*t.ids.length),Array.isArray(t.match)&&(s._deferPopulate=!0);let i=t.model.find(e,r,s);for(let a of t.foreignField)a!=="_id"&&i.selectedInclusively()&&!CTe(i._fields,a)&&i.select(a);if(t.count)for(let a of t.foreignField)i.select(a);let o=n&&Array.isArray(t.match);if(n){t.model.baseModelName!=null&&(Array.isArray(n)?n.forEach(u=>{u.strictPopulate=!1}):typeof n=="string"?n={path:n,strictPopulate:!1}:n.strictPopulate=!1);let a=t.options._fullPath||t.options.path;if(Array.isArray(n))for(let u of n)u._fullPath=a+"."+u.path,o&&u._localModel==null&&(u._localModel=t.model);else typeof n=="object"&&(n._fullPath=a+"."+n.path,o&&n._localModel==null&&(n._localModel=t.model))}return n&&!o&&i.populate(n),i.exec().then(a=>{for(let c of a)vTe.set(c,t.model);let u=[];return i._deferredPopulate&&(u.push(...i._deferredPopulate),delete i._deferredPopulate),o&&u.push(n),{docs:a,deferredPopulates:u}})}function LZ(t,e,r,n){let s=r.options,i=r.isVirtual,o=r.justOne,a,u=s&&s.options&&s.options.lean||!1,c=e.length,l={},p={},d,h,f=Xo(r.allIds);for(let y=0;y<c;y++)if(h=e[y],h!=null)for(let g of r.foreignField){if(a=Je.getValue(g,h),Array.isArray(a)){a=Je.array.unique(Je.array.flatten(a));for(let _ of a)_ instanceof no&&(_=_._doc._id),d=String(_),p[d]?Array.isArray(p[d])?(p[d].push(h),l[d].push(y)):(p[d]=[p[d],h],l[d]=[l[d],y]):i&&!o?(p[d]=[h],l[d]=[y]):(p[d]=h,l[d]=y)}else a instanceof no&&(a=a._doc._id),d=String(a),p[d]?Array.isArray(p[d])?(p[d].push(h),l[d].push(y)):(i||p[d].constructor!==h.constructor||(p[d]instanceof no?String(p[d]._doc._id):String(p[d]._id))!==(h instanceof no?String(h._doc._id):String(h._id)))&&(p[d]=[p[d],h],l[d]=[l[d],y]):(p[d]=h,l[d]=y);u||(h.$__.wasPopulated=h.$__.wasPopulated||{value:a})}mTe({originalModel:t,rawIds:r.isVirtual?f:r.allIds,allIds:f,unpopulatedValues:r.unpopulatedValues,foreignField:r.foreignField,rawDocs:p,rawOrder:l,docs:r.docs,path:s.path,options:n,justOne:r.justOne,isVirtual:r.isVirtual,allOptions:r,populatedModel:r.model,lean:u,virtual:r.virtual,count:r.count,match:r.match})}L.compile=function(e,r,n,s,i){if(r.options.versionKey!==!1&&!r.paths[r.options.versionKey]){let p={};p[r.options.versionKey]=Number,r.add(p)}let a;typeof e=="function"&&e.prototype instanceof L?(a=e,e=a.name,r.loadClass(a,!1),a.prototype.$isMongooseModelPrototype=!0):a=function p(d,h,f){if(p.hooks.execPreSync("createModel",d),!(this instanceof p))return new p(d,h,f);let y=p.schema.options.discriminatorKey;if(p.discriminators==null||d==null||d[y]==null){L.call(this,d,h,f);return}let g=p.discriminators[d[y]]||Bf(p.discriminators,d[y]);if(g!=null)return new g(d,h,f);L.call(this,d,h,f)},a.hooks=r.s.hooks.clone(),a.base=i,a.modelName=e,a.prototype instanceof L||(Object.setPrototypeOf(a,L),Object.setPrototypeOf(a.prototype,L.prototype)),a.model=function(d){return this.db.model(d)},a.db=s,a.prototype.db=s,a.prototype[qc]=s,a.discriminators=a.prototype.discriminators=void 0,a[QZ]=!0,a.events=new uT,r._preCompile();let c={schemaUserProvidedOptions:r._userProvidedOptions||{},capped:r.options.capped,Promise:a.base.Promise,modelName:e};r.options.autoCreate!==void 0&&(c.autoCreate=r.options.autoCreate);let l=s.collection(n,c);return a.prototype.collection=l,a.prototype.$collection=l,a.prototype[$c]=l,a.prototype.$__setSchema(r),VZ(a,r),zZ(a,r),cTe(a,r),dTe(a,r.s.hooks,r.statics),a.schema=a.prototype.$__schema,a.collection=l,a.$__collection=l,a.Query=function(){Db.apply(this,arguments)},Object.setPrototypeOf(a.Query.prototype,Db.prototype),a.Query.base=Db.base,a.Query.prototype.constructor=Db,a._applyQueryMiddleware(),zTe(a,r.query),a};L.clientEncryption=function(){let e=this.base.driver.get().ClientEncryption;if(!e)throw new Error("The mongodb driver must be used to obtain a ClientEncryption object.");let r=this.collection?.conn?.client;if(!r)return null;let n=r.options.autoEncryption;if(!n)return null;let{keyVaultNamespace:s,keyVaultClient:i,kmsProviders:o,credentialProviders:a,proxyOptions:u,tlsOptions:c}=n;return new e(i??r,{keyVaultNamespace:s,kmsProviders:o,credentialProviders:a,proxyOptions:u,tlsOptions:c})};L.$__updateConnection=function(e){this.db=e,this.prototype.db=e,this.prototype[qc]=e;let r=e.collection(this.collection.collectionName,this.collection.opts);this.prototype.collection=r,this.prototype.$collection=r,this.prototype[$c]=r,this.collection=r,this.$__collection=r};function zTe(t,e){for(let r in e)t.Query.prototype[r]=e[r]}L.__subclass=function(e,r,n){let s=this,i=function l(p,d,h){if(!(this instanceof l))return new l(p,d,h);s.call(this,p,d,h)};if(Object.setPrototypeOf(i,s),Object.setPrototypeOf(i.prototype,s.prototype),i.db=e,i.prototype.db=e,i.prototype[qc]=e,s[If]=s[If]||[],s[If].push(i),s.discriminators!=null){i.discriminators={};for(let l of Object.keys(s.discriminators))i.discriminators[l]=s.discriminators[l].__subclass(s.db,s.discriminators[l].schema,n)}let o=r&&typeof r!="string"?r:s.prototype.$__schema,a=o.options||{},u=o._userProvidedOptions||{};n||(n=s.prototype.$__schema.get("collection")||Je.toCollectionName(s.modelName,this.base.pluralize()));let c={schemaUserProvidedOptions:u,capped:o&&a.capped};return i.prototype.collection=e.collection(n,c),i.prototype.$collection=i.prototype.collection,i.prototype[$c]=i.prototype.collection,i.collection=i.prototype.collection,i.$__collection=i.collection,i.init().catch(()=>{}),i};L.recompileSchema=function(){if(this.prototype.$__setSchema(this.schema),this.schema._applyDiscriminators!=null)for(let e of this.schema._applyDiscriminators.keys())this.discriminator(e,this.schema._applyDiscriminators.get(e));delete this.schema._defaultToObjectOptionsMap,uTe(this.schema,new WeakSet,!0)};L.inspect=function(){return`Model { ${this.modelName} }`};L.namespace=function(){return this.db.name+"."+this.collection.collectionName};RZ.inspect.custom&&(L[RZ.inspect.custom]=L.inspect);L._applyQueryMiddleware=function(){let e=this.Query,r=this.schema.s.hooks.filter(n=>{let s=KTe(n);return n.name==="validate"?!!s.query:n.name==="deleteOne"||n.name==="updateOne"?!!s.query||Je.hasOwnKeys(s)===!1:n.query!=null||n.document!=null?!!n.query:!0});e.prototype._queryMiddleware=r};function KTe(t){let e={};return Object.hasOwn(t,"query")&&(e.query=t.query),Object.hasOwn(t,"document")&&(e.document=t.document),e}ZZ.exports=XZ=L});var tee=m((Rf,eee)=>{"use strict";eee.exports=JTe;Rf.pluralization=[[/human$/gi,"humans"],[/(m|wom)an$/gi,"$1en"],[/(pe)rson$/gi,"$1ople"],[/(child)$/gi,"$1ren"],[/^(ox)$/gi,"$1en"],[/(ax|test)is$/gi,"$1es"],[/(octop|cact|foc|fung|nucle)us$/gi,"$1i"],[/(alias|status|virus)$/gi,"$1es"],[/(bu)s$/gi,"$1ses"],[/(buffal|tomat|potat)o$/gi,"$1oes"],[/([ti])um$/gi,"$1a"],[/sis$/gi,"ses"],[/(?:([^f])fe|([lr])f)$/gi,"$1$2ves"],[/(hive)$/gi,"$1s"],[/([^aeiouy]|qu)y$/gi,"$1ies"],[/(x|ch|ss|sh)$/gi,"$1es"],[/(matr|vert|ind)ix|ex$/gi,"$1ices"],[/([m|l])ouse$/gi,"$1ice"],[/(kn|w|l)ife$/gi,"$1ives"],[/(quiz)$/gi,"$1zes"],[/^goose$/i,"geese"],[/s$/gi,"s"],[/([^a-z])$/,"$1"],[/$/gi,"s"]];var HTe=Rf.pluralization;Rf.uncountables=["advice","energy","excretion","digestion","cooperation","health","justice","labour","machinery","equipment","information","pollution","sewage","paper","money","species","series","rain","rice","fish","sheep","moose","deer","news","expertise","status","media"];var GTe=Rf.uncountables;function JTe(t){let e;return t=t.toLowerCase(),!~GTe.indexOf(t)&&(e=HTe.filter(function(r){return t.match(r[0])}),e[0])?t.replace(e[0][0],e[0][1]):t}});var oee=m((rLe,iee)=>{"use strict";var see=be(),ree=require("util"),nee=F8(),cu=class t extends see{constructor(){super(""),this.errors={}}toString(){return nee(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(e,r){if(r instanceof t){let{errors:n}=r;for(let s of Object.keys(n))this.addError(s,n[s]);return}this.errors[e]=r,this.message=nee(this)}};ree.inspect.custom&&(cu.prototype[ree.inspect.custom]=cu.prototype.inspect);Object.defineProperty(cu.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(cu.prototype,"name",{value:"SetOptionError"});var mT=class extends see{constructor(e){super(`"${e}" is not a valid option to set`)}};cu.SetOptionInnerError=mT;iee.exports=cu});var uee=m(()=>{"use strict";var aee=ae();typeof jest<"u"&&!process.env.SUPPRESS_JEST_WARNINGS&&(typeof window<"u"&&aee.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's default jsdom test environment. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning."),typeof setTimeout.clock?.Date=="function"&&aee.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's mock timers enabled. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning."))});var gee=m((mee,yee)=>{"use strict";var YTe=Zi(),QTe=require("events").EventEmitter,yT=fc(),Zo=Oc(),XTe=kt(),Ff=Xh(),ZTe=dE(),Nb=Rd(),cee=TY(),eDe=e1(),tDe=fb(),lee=H5(),rDe=G7(),nDe=b7(),pee=XE(),sDe=tee(),kb=ae(),iDe=f5(),oDe=xc(),aDe=V5(),uDe=Lp().trusted,cDe=N5(),lDe=$r(),A1=be(),Ib=oee(),pDe=z5(),dee=Symbol.for("mongoose:default"),hee=Symbol("mongoose:defaultConnection");uee();var dDe=/^[0-9A-Fa-f]{24}$/,{AsyncLocalStorage:fee}=require("async_hooks");function G(t){if(this.connections=[],this.nextConnectionId=0,this.models={},this.events=new QTe,this.__driver=pee.get(),this.options=Object.assign({pluralization:!0,autoIndex:!0,autoCreate:!0,autoSearchIndex:!1},t),(kb.getOption("createInitialConnection",this.options)??!0)&&this.__driver!=null&&gT(this),this.options.pluralization&&(this._pluralize=sDe),t?.[dee])for(let r of["Schema","model"])this[r]=G.prototype[r];else{let r=this;this.Schema=function(){return this.base=r,Zo.apply(this,arguments)},this.Schema.prototype=Object.create(Zo.prototype),Object.assign(this.Schema,Zo),this.Schema.base=this,this.Schema.Types=Object.assign({},Zo.Types)}this.Schema.prototype.base=this,t?.transactionAsyncLocalStorage&&(this.transactionAsyncLocalStorage=new fee),Object.defineProperty(this,"plugins",{configurable:!1,enumerable:!0,writable:!1,value:Object.values(nDe).map(r=>[r,{deduplicate:!0}])})}G.prototype.cast=oDe;G.prototype.STATES=Nb;G.prototype.ConnectionStates=Nb;G.prototype.driver=pee;G.prototype.setDriver=function(e){let r=this instanceof G?this:an;if(r.__driver===e)return r;if(r.connections&&r.connections.find(o=>o.readyState!==Nb.disconnected)){let o="Cannot modify Mongoose driver if a connection is already open. Call `mongoose.disconnect()` before modifying the driver";throw new A1(o)}if(r.__driver=e,Array.isArray(e.plugins))for(let o of e.plugins)typeof o=="function"&&r.plugin(o);e.SchemaTypes!=null&&Object.assign(an.Schema.Types,e.SchemaTypes);let s=e.Connection,i=r.connections[0];if(r.connections=[new s(r)],r.connections[0].models=r.models,i==null)return r;for(let o of Object.values(r.models))o.db===i&&o.$__updateConnection(r.connections[0]);return r};G.prototype.set=function(e,r){let n=this instanceof G?this:an;if(arguments.length===1&&typeof e!="object"){if(cee.indexOf(e)===-1){let o=new Ib;throw o.addError(e,new Ib.SetOptionInnerError(e)),o}return n.options[e]}let s={};arguments.length===2&&(s={[e]:r}),arguments.length===1&&typeof e=="object"&&(s=e);let i;for(let[o,a]of Object.entries(s)){if(cee.indexOf(o)===-1){i||(i=new Ib),i.addError(o,new Ib.SetOptionInnerError(o));continue}n.options[o]=a,o==="objectIdGetter"?a?Object.defineProperty(n.Types.ObjectId.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}}):delete n.Types.ObjectId.prototype._id:o==="transactionAsyncLocalStorage"?a&&!n.transactionAsyncLocalStorage?n.transactionAsyncLocalStorage=new fee:!a&&n.transactionAsyncLocalStorage&&delete n.transactionAsyncLocalStorage:o==="createInitialConnection"&&(a&&!n.connection?gT(n):a===!1&&n.connection?.[hee]&&n.connection.readyState===Nb.disconnected&&kb.hasOwnKeys(n.connection.models)===!1&&n.connections.shift())}if(i)throw i;return n};G.prototype.get=G.prototype.set;G.prototype.createConnection=function(e,r){let n=this instanceof G?this:an,s=n.__driver.Connection,i=new s(n);return n.connections.push(i),n.nextConnectionId++,n.events.emit("createConnection",i),arguments.length>0&&i.openUri(e,{...r,_fireAndForget:!0}),i};G.prototype.connect=async function(e,r){if(typeof r=="function"||arguments.length>=3&&typeof arguments[2]=="function")throw new A1("Mongoose.prototype.connect() no longer accepts a callback");let n=this instanceof G?this:an;return n.connection==null&&gT(n),n.connection.openUri(e,r).then(()=>n)};G.prototype.disconnect=async function(){if(arguments.length>=1&&typeof arguments[0]=="function")throw new A1("Mongoose.prototype.disconnect() no longer accepts a callback");let e=this instanceof G?this:an;e.connections.length<=0||await Promise.all(e.connections.map(n=>n.close()))};G.prototype.startSession=function(){let e=this instanceof G?this:an;return e.connection.startSession.apply(e.connection,arguments)};G.prototype.pluralize=function(e){let r=this instanceof G?this:an;return arguments.length>0&&(r._pluralize=e),r._pluralize};G.prototype.model=function(e,r,n,s){let i=this instanceof G?this:an;if(typeof r=="string"&&(n=r,r=!1),arguments.length===1){let c=i.models[e];if(!c)throw new i.Error.MissingSchemaError(e);return c}if(kb.isObject(r)&&!(r instanceof Zo)&&(r=new Zo(r)),r&&!(r instanceof Zo))throw new i.Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");s=s||{};let o=r;r&&(i.get("cloneSchemas")&&(r=r.clone()),i._applyPlugins(r));let a=Object.hasOwn(i.options,"overwriteModels")?i.options.overwriteModels:s.overwriteModels;if(Object.hasOwn(i.models,e)&&s.cache!==!1&&a!==!0){if(o?.instanceOfSchema&&o!==i.models[e].schema)throw new i.Error.OverwriteModelError(e);if(n&&n!==i.models[e].collection.name){let c=i.models[e];return r=c.prototype.schema,c.__subclass(i.connection,r,n)}return i.models[e]}if(r==null)throw new i.Error.MissingSchemaError(e);let u=i._model(e,r,n,s);return i.connection.models[e]=u,i.models[e]=u,u};G.prototype._model=function(e,r,n,s){let i=this instanceof G?this:an,o;if(typeof e=="function"&&(o=e,e=o.name,!(o.prototype instanceof lee)))throw new i.Error("The provided class "+e+" must extend Model");r&&(i.get("cloneSchemas")&&(r=r.clone()),i._applyPlugins(r)),(r==null||!("pluralization"in r.options))&&(r.options.pluralization=i.options.pluralization),n||(n=r.get("collection")||kb.toCollectionName(e,i.pluralize())),pDe(r);let a=s.connection||i.connection;if(o=i.Model.compile(o||e,r,n,a,i),o.init().catch(function(){}),a.emit("model",o),r._applyDiscriminators!=null)for(let u of r._applyDiscriminators.keys()){let{schema:c,options:l}=r._applyDiscriminators.get(u);o.discriminator(u,c,l)}return o};G.prototype.deleteModel=function(e){let r=this instanceof G?this:an;return r.connection.deleteModel(e),delete r.models[e],r};G.prototype.modelNames=function(){let e=this instanceof G?this:an;return Object.keys(e.models)};G.prototype._applyPlugins=function(e,r){let n=this instanceof G?this:an;r=r||{},r.applyPluginsToDiscriminators=n.options?.applyPluginsToDiscriminators||!1,r.applyPluginsToChildSchemas=typeof n.options?.applyPluginsToChildSchemas=="boolean"?n.options.applyPluginsToChildSchemas:!0,rDe(e,n.plugins,r,"$globalPluginsApplied")};G.prototype.plugin=function(e,r){let n=this instanceof G?this:an;return n.plugins.push([e,r]),n};G.prototype.__defineGetter__("connection",function(){return this.connections[0]});G.prototype.__defineSetter__("connection",function(t){t instanceof this.__driver.Connection&&(this.connections[0]=t,this.models=t.models)});G.prototype.connections;G.prototype.nextConnectionId;G.prototype.Aggregate=aDe;G.prototype.BaseCollection=$O();Object.defineProperty(G.prototype,"Collection",{get:function(){return this.__driver.Collection},set:function(t){this.__driver.Collection=t}});Object.defineProperty(G.prototype,"Connection",{get:function(){return this.__driver.Connection},set:function(t){t!==this.__driver.Connection&&(this.__driver.Connection=t)}});G.prototype.BaseConnection=h5();G.prototype.version=iDe.version;G.prototype.Mongoose=G;G.prototype.Schema=Zo;G.prototype.SchemaType=XTe;G.prototype.SchemaTypes=Zo.Types;G.prototype.VirtualType=ZTe;G.prototype.Types=eDe;G.prototype.Query=tDe;G.prototype.Model=lee;G.prototype.Document=YTe;G.prototype.ObjectId=Ff.ObjectId;G.prototype.isValidObjectId=function(e){return(this instanceof G?this:an).Types.ObjectId.isValid(e)};G.prototype.isObjectIdOrHexString=function(e){return lDe(e,"ObjectId")||typeof e=="string"&&dDe.test(e)};G.prototype.syncIndexes=function(e){return(this instanceof G?this:an).connection.syncIndexes(e)};G.prototype.Decimal128=Ff.Decimal128;G.prototype.Mixed=Ff.Mixed;G.prototype.Date=Ff.Date;G.prototype.Number=Ff.Number;G.prototype.Error=A1;G.prototype.MongooseError=A1;G.prototype.now=function(){return new Date};G.prototype.CastError=A1.CastError;G.prototype.SchemaTypeOptions=qn();G.prototype.mquery=B5();G.prototype.sanitizeFilter=cDe;G.prototype.trusted=uDe;G.prototype.skipMiddlewareFunction=yT.skipWrappedFunction;G.prototype.overwriteMiddlewareResult=yT.overwriteResult;G.prototype.overwriteMiddlewareArguments=yT.overwriteArguments;G.prototype.omitUndefined=zx();function gT(t){if(t.connection)return;let e=t.createConnection();e[hee]=!0,e.models=t.models}var an=yee.exports=mee=new G({[dee]:!0})});var bee=m((iLe,Eee)=>{"use strict";var _ee=vY();XE().set(_ee);var _T=gee();_T.setDriver(_ee);_T.Mongoose.prototype.mongo=ka();Eee.exports=_T});var $f=m((oLe,ce)=>{"use strict";var le=bee();ce.exports=le;ce.exports.default=le;ce.exports.mongoose=le;ce.exports.cast=le.cast;ce.exports.STATES=le.STATES;ce.exports.setDriver=le.setDriver;ce.exports.set=le.set;ce.exports.get=le.get;ce.exports.createConnection=le.createConnection;ce.exports.connect=le.connect;ce.exports.disconnect=le.disconnect;ce.exports.startSession=le.startSession;ce.exports.pluralize=le.pluralize;ce.exports.model=le.model;ce.exports.deleteModel=le.deleteModel;ce.exports.modelNames=le.modelNames;ce.exports.plugin=le.plugin;ce.exports.connections=le.connections;ce.exports.version=le.version;ce.exports.Aggregate=le.Aggregate;ce.exports.Mongoose=le.Mongoose;ce.exports.Schema=le.Schema;ce.exports.SchemaType=le.SchemaType;ce.exports.SchemaTypes=le.SchemaTypes;ce.exports.VirtualType=le.VirtualType;ce.exports.Types=le.Types;ce.exports.Query=le.Query;ce.exports.Model=le.Model;ce.exports.Document=le.Document;ce.exports.ObjectId=le.ObjectId;ce.exports.isValidObjectId=le.isValidObjectId;ce.exports.isObjectIdOrHexString=le.isObjectIdOrHexString;ce.exports.syncIndexes=le.syncIndexes;ce.exports.Decimal128=le.Decimal128;ce.exports.Mixed=le.Mixed;ce.exports.Date=le.Date;ce.exports.Number=le.Number;ce.exports.Error=le.Error;ce.exports.MongooseError=le.MongooseError;ce.exports.now=le.now;ce.exports.CastError=le.CastError;ce.exports.SchemaTypeOptions=le.SchemaTypeOptions;ce.exports.mongo=le.mongo;ce.exports.mquery=le.mquery;ce.exports.sanitizeFilter=le.sanitizeFilter;ce.exports.trusted=le.trusted;ce.exports.skipMiddlewareFunction=le.skipMiddlewareFunction;ce.exports.overwriteMiddlewareResult=le.overwriteMiddlewareResult});var xee=m((zLe,gDe)=>{gDe.exports={name:"dotenv",version:"17.2.3",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard",pretest:"npm run lint && npm run dts-check",test:"tap run tests/**/*.js --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run tests/**/*.js --show-full-coverage --timeout=60000 --coverage-report=text --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},homepage:"https://github.com/motdotla/dotenv#readme",funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^18.11.3",decache:"^4.6.2",sinon:"^14.0.1",standard:"^17.0.0","standard-version":"^9.5.0",tap:"^19.2.0",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var Iee=m((KLe,ea)=>{var bT=require("fs"),jb=require("path"),_De=require("os"),EDe=require("crypto"),bDe=xee(),ST=bDe.version,Tee=["\u{1F510} encrypt with Dotenvx: https://dotenvx.com","\u{1F510} prevent committing .env to code: https://dotenvx.com/precommit","\u{1F510} prevent building .env in docker: https://dotenvx.com/prebuild","\u{1F4E1} add observability to secrets: https://dotenvx.com/ops","\u{1F465} sync secrets across teammates & machines: https://dotenvx.com/ops","\u{1F5C2}\uFE0F backup and recover secrets: https://dotenvx.com/ops","\u2705 audit secrets and track compliance: https://dotenvx.com/ops","\u{1F504} add secrets lifecycle management: https://dotenvx.com/ops","\u{1F511} add access controls to secrets: https://dotenvx.com/ops","\u{1F6E0}\uFE0F  run anywhere with `dotenvx run -- yourcommand`","\u2699\uFE0F  specify custom .env file path with { path: '/custom/path/.env' }","\u2699\uFE0F  enable debug logging with { debug: true }","\u2699\uFE0F  override existing env vars with { override: true }","\u2699\uFE0F  suppress all logs with { quiet: true }","\u2699\uFE0F  write to custom object with { processEnv: myObject }","\u2699\uFE0F  load multiple .env files with { path: ['.env.local', '.env'] }"];function SDe(){return Tee[Math.floor(Math.random()*Tee.length)]}function v1(t){return typeof t=="string"?!["false","0","no","off",""].includes(t.toLowerCase()):!!t}function wDe(){return process.stdout.isTTY}function ADe(t){return wDe()?`\x1B[2m${t}\x1B[0m`:t}var ODe=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function CDe(t){let e={},r=t.toString();r=r.replace(/\r\n?/mg,`
`);let n;for(;(n=ODe.exec(r))!=null;){let s=n[1],i=n[2]||"";i=i.trim();let o=i[0];i=i.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),o==='"'&&(i=i.replace(/\\n/g,`
`),i=i.replace(/\\r/g,"\r")),e[s]=i}return e}function vDe(t){t=t||{};let e=Bee(t);t.path=e;let r=pr.configDotenv(t);if(!r.parsed){let o=new Error(`MISSING_DATA: Cannot parse ${e} for an unknown reason`);throw o.code="MISSING_DATA",o}let n=Pee(t).split(","),s=n.length,i;for(let o=0;o<s;o++)try{let a=n[o].trim(),u=TDe(r,a);i=pr.decrypt(u.ciphertext,u.key);break}catch(a){if(o+1>=s)throw a}return pr.parse(i)}function xDe(t){console.error(`[dotenv@${ST}][WARN] ${t}`)}function qf(t){console.log(`[dotenv@${ST}][DEBUG] ${t}`)}function Mee(t){console.log(`[dotenv@${ST}] ${t}`)}function Pee(t){return t&&t.DOTENV_KEY&&t.DOTENV_KEY.length>0?t.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function TDe(t,e){let r;try{r=new URL(e)}catch(a){if(a.code==="ERR_INVALID_URL"){let u=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw u.code="INVALID_DOTENV_KEY",u}throw a}let n=r.password;if(!n){let a=new Error("INVALID_DOTENV_KEY: Missing key part");throw a.code="INVALID_DOTENV_KEY",a}let s=r.searchParams.get("environment");if(!s){let a=new Error("INVALID_DOTENV_KEY: Missing environment part");throw a.code="INVALID_DOTENV_KEY",a}let i=`DOTENV_VAULT_${s.toUpperCase()}`,o=t.parsed[i];if(!o){let a=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${i} in your .env.vault file.`);throw a.code="NOT_FOUND_DOTENV_ENVIRONMENT",a}return{ciphertext:o,key:n}}function Bee(t){let e=null;if(t&&t.path&&t.path.length>0)if(Array.isArray(t.path))for(let r of t.path)bT.existsSync(r)&&(e=r.endsWith(".vault")?r:`${r}.vault`);else e=t.path.endsWith(".vault")?t.path:`${t.path}.vault`;else e=jb.resolve(process.cwd(),".env.vault");return bT.existsSync(e)?e:null}function Dee(t){return t[0]==="~"?jb.join(_De.homedir(),t.slice(1)):t}function DDe(t){let e=v1(process.env.DOTENV_CONFIG_DEBUG||t&&t.debug),r=v1(process.env.DOTENV_CONFIG_QUIET||t&&t.quiet);(e||!r)&&Mee("Loading env from encrypted .env.vault");let n=pr._parseVault(t),s=process.env;return t&&t.processEnv!=null&&(s=t.processEnv),pr.populate(s,n,t),{parsed:n}}function MDe(t){let e=jb.resolve(process.cwd(),".env"),r="utf8",n=process.env;t&&t.processEnv!=null&&(n=t.processEnv);let s=v1(n.DOTENV_CONFIG_DEBUG||t&&t.debug),i=v1(n.DOTENV_CONFIG_QUIET||t&&t.quiet);t&&t.encoding?r=t.encoding:s&&qf("No encoding is specified. UTF-8 is used by default");let o=[e];if(t&&t.path)if(!Array.isArray(t.path))o=[Dee(t.path)];else{o=[];for(let l of t.path)o.push(Dee(l))}let a,u={};for(let l of o)try{let p=pr.parse(bT.readFileSync(l,{encoding:r}));pr.populate(u,p,t)}catch(p){s&&qf(`Failed to load ${l} ${p.message}`),a=p}let c=pr.populate(n,u,t);if(s=v1(n.DOTENV_CONFIG_DEBUG||s),i=v1(n.DOTENV_CONFIG_QUIET||i),s||!i){let l=Object.keys(c).length,p=[];for(let d of o)try{let h=jb.relative(process.cwd(),d);p.push(h)}catch(h){s&&qf(`Failed to load ${d} ${h.message}`),a=h}Mee(`injecting env (${l}) from ${p.join(",")} ${ADe(`-- tip: ${SDe()}`)}`)}return a?{parsed:u,error:a}:{parsed:u}}function PDe(t){if(Pee(t).length===0)return pr.configDotenv(t);let e=Bee(t);return e?pr._configVault(t):(xDe(`You set DOTENV_KEY but you are missing a .env.vault file at ${e}. Did you forget to build it?`),pr.configDotenv(t))}function BDe(t,e){let r=Buffer.from(e.slice(-64),"hex"),n=Buffer.from(t,"base64"),s=n.subarray(0,12),i=n.subarray(-16);n=n.subarray(12,-16);try{let o=EDe.createDecipheriv("aes-256-gcm",r,s);return o.setAuthTag(i),`${o.update(n)}${o.final()}`}catch(o){let a=o instanceof RangeError,u=o.message==="Invalid key length",c=o.message==="Unsupported state or unable to authenticate data";if(a||u){let l=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw l.code="INVALID_DOTENV_KEY",l}else if(c){let l=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw l.code="DECRYPTION_FAILED",l}else throw o}}function IDe(t,e,r={}){let n=!!(r&&r.debug),s=!!(r&&r.override),i={};if(typeof e!="object"){let o=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw o.code="OBJECT_REQUIRED",o}for(let o of Object.keys(e))Object.prototype.hasOwnProperty.call(t,o)?(s===!0&&(t[o]=e[o],i[o]=e[o]),n&&qf(s===!0?`"${o}" is already defined and WAS overwritten`:`"${o}" is already defined and was NOT overwritten`)):(t[o]=e[o],i[o]=e[o]);return i}var pr={configDotenv:MDe,_configVault:DDe,_parseVault:vDe,config:PDe,decrypt:BDe,parse:CDe,populate:IDe};ea.exports.configDotenv=pr.configDotenv;ea.exports._configVault=pr._configVault;ea.exports._parseVault=pr._parseVault;ea.exports.config=pr.config;ea.exports.decrypt=pr.decrypt;ea.exports.parse=pr.parse;ea.exports.populate=pr.populate;ea.exports=pr});var Nee=require("node:http");var hB=Mi(dB(),1),{Server:fB,Namespace:XMe,Socket:ZMe}=hB.default;var nk=Mi(rk(),1);async function sk(t,e){try{let{sessionToken:r}=t?.handshake?.auth||{};if(!r)throw new Error("NO_SESSION_TOKEN");console.log("RECEIVED_TOKEN",r);let n=await(0,nk.getToken)({req:{headers:{authorization:`Bearer ${r}`}},secret:process.env.NEXTAUTH_SECRET});if(!n)throw new Error("INVALID_AUTH");if(!n?.username)throw new Error("ONBOARDING_INCOMPLETE");console.log("AUTH_SUCCESS: ",n.username),t.username=n.username,e()}catch(r){r instanceof Error&&console.log("AUTH_FAIL",r?.message),e(new Error("NOT AUTHENTICATED"))}}var Rb=Mi($f(),1);async function O1(){try{if(Rb.default.connection.readyState===1)return;if(!process.env.DB_URI)throw new Error("No DB URI Provided");await Rb.default.connect(process.env.DB_URI),Rb.default.set({debug:!0}),console.log("Connected to DB");return}catch(t){throw t instanceof Error&&console.log("Failed to connect to MongoDB at connect-db.ts >> ",t?.message),t}}var C1=Mi($f(),1),hDe=new C1.Schema({username:{type:String,required:!0},image:{type:String,required:!0},role:{type:String,enum:["admin","member"],default:"member"},joinedAt:{type:Date,required:function(){return this.ownerDocument()?.type==="group"}},leftAt:{type:Date,required:function(){return this.ownerDocument()?.type==="group"}}},{_id:!1}),fDe=new C1.Schema({threadId:{type:String,required:!0,unique:!0},type:{type:String,enum:["direct","group"],required:!0},particpants:{type:[hDe],required:!0,validate:{validator:function(t){let e=this;if(!Array.isArray(t)||e.type==="direct"&&t.length!==2||e.type==="group"&&t.length<2)return!1;let r=t.map(n=>(n?.username??"").trim().toLowerCase()).filter(Boolean);return!(r.length!==t.length||new Set(r).size!==r.length)},message:function(){return this.type==="direct"?"Direct threads must have exactly 2 unique participants":"Group threads must have at least 2 unique participants"}}},createdBy:{type:String,required:function(){return this.type==="group"}},groupName:{type:String,required:function(){return this.type==="group"}},groupImage:{type:String,required:function(){return this.type==="group"}}},{timestamps:!0,collection:"threads"}),See=C1.default.models.Thread||C1.default.model("Thread",fDe);var Fb=Mi($f(),1),mDe=new Fb.default.Schema({name:{type:String,required:!0},username:{type:String,required:!0,unique:!0},email:{type:String,required:!0,unique:!0},image:{type:String,required:!0}},{timestamps:!0}),lLe=Fb.default.models.User||Fb.default.model("User",mDe);var $b=Mi($f(),1),yDe=new $b.default.Schema({msgId:{type:String,required:!0,unique:!0},threadId:{type:String,required:!0,index:!0},sender:{type:String,required:!0},type:{type:String,enum:["text","image","voice","document","deleted"],required:!0},content:{type:String,required:!0},replyToMsgId:{type:String,default:null},readBy:{type:[String],default:[]},status:{type:String,enum:["sending","sent","failed"],required:!0,default:"sent"},timestamp:{type:String,required:!0}},{collection:"messages"}),qb=$b.default.models.Messages||$b.default.model("Messages",yDe);async function wee(t){try{await O1();let e=await See.distinct("threadId",{"particpants.username":t});if(!e||e.length===0)throw new Error("No thread found, aborting... ");return console.log(`${t} joined ${e}`),e}catch(e){return e instanceof Error&&console.error("[getUserThreads] Failed to get user threads! Logs: ",e?.message),[]}}var Aee=async t=>{let e=await wee(t.username);t.join(e),console.log(`${t.username} joined threads:${e}`)};var Oee=async(t,e,r)=>{try{await O1(),e.status="sent",await qb.create(e),t.to(e.threadId).emit("message:received",e),console.log(`Message from ${e.sender} emitted to thread:${e.threadId}`),r({ok:!0,data:"SENT_OK"});return}catch(n){n instanceof Error&&console.error("[handleNewMessage] Failed to send message >>",n.message),r({ok:!1,data:"SEND_FAILED"});return}};async function Cee(t,e,r){try{let{threadId:n,msgId:s,sender:i}=e;if(!n||!s||!i||i!==t.username)throw new Error("Delete not allowed!");return await O1(),await qb.findOneAndUpdate({msgId:s},{$set:{content:"",type:"deleted",replyToMsgId:null,readBy:[]}}),t.to(n).emit("message:deleted",n,s),r({ok:!0,data:"DELETE_SUCCESS"})}catch(n){return console.error("[deleteMessage] Failed to delete message from DB >> ",n instanceof Error?n.message:""),r({ok:!1,data:"DELETE_FAIL"})}}function vee(t,e){e.on("message:new",async(r,n)=>{await Oee(e,r,n)}),e.on("message:delete",async(r,n)=>{console.log("received message to delete:",r),await Cee(e,r,n)})}function ET(t){let e=process?.env?.ALLOWED_ORIGINS?.split(",")??[];console.log(e);let r=new fB(t,{cors:{origin:process.env.NODE_ENV==="production"?e:"*",methods:["GET","POST"],credentials:!0}});r.use(sk),r.on("connection",async n=>{console.log("connected:",n.id),await Aee(n),vee(r,n),n.on("disconnect",()=>{console.log("disconnected:",n.id)})})}var kee=Mi(Iee(),1);kee.default.config({path:".env.local"});var Ree=(0,Nee.createServer)((t,e)=>{e.writeHead(200,{"content-type":"text/html"}),e.end(`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SocketIO Chat Server</title>
  <style>
    /* Reset and base */
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #121212;
      color: #e0e0e0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      text-align: center;
    }

    h1 {
      font-weight: 700;
      font-size: 2.5rem;
      margin-bottom: 1.5rem;
      letter-spacing: 1.2px;
    }

    a.github-link {
      position: relative;
      color: #61dafb;
      font-weight: 600;
      font-size: 1.2rem;
      text-decoration: none;
      cursor: pointer;
      padding-bottom: 4px;
      transition: color 0.3s ease;
    }

    a.github-link::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: 0;
      width: 0%;
      height: 2px;
      background: #61dafb;
      transition: width 0.3s ease;
      border-radius: 2px;
    }

    a.github-link:hover {
      color: #21a1f1;
    }

    a.github-link:hover::after {
      width: 100%;
    }
  </style>
</head>
<body>
  <h1>SocketIO Chat Server by M-Arham07</h1>
  <a
    href="https://github.com/M-Arham07/"
    target="_blank"
    rel="noopener noreferrer"
    class="github-link"
    >Visit my GitHub</a
  >
</body>
</html>
`)});ET(Ree);Ree.listen(8080,()=>{console.log("[WS] Started")});
/*! Bundled license information:

negotiator/index.js:
  (*!
   * negotiator
   * Copyright(c) 2012 Federico Romero
   * Copyright(c) 2012-2014 Isaac Z. Schlueter
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)

mime-db/index.js:
  (*!
   * mime-db
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015-2022 Douglas Christopher Wilson
   * MIT Licensed
   *)

mime-types/index.js:
  (*!
   * mime-types
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)

accepts/index.js:
  (*!
   * accepts
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)

base64id/lib/base64id.js:
  (*!
   * base64id v0.1.0
   *)

engine.io/build/parser-v3/utf8.js:
  (*! https://mths.be/utf8js v2.1.2 by @mathias *)

cookie/index.js:
  (*!
   * cookie
   * Copyright(c) 2012-2014 Roman Shtylman
   * Copyright(c) 2015 Douglas Christopher Wilson
   * MIT Licensed
   *)

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

vary/index.js:
  (*!
   * vary
   * Copyright(c) 2014-2017 Douglas Christopher Wilson
   * MIT Licensed
   *)

mongoose/lib/connectionState.js:
  (*!
   * Connection states
   *)

mongoose/lib/helpers/immediate.js:
  (*!
   * Centralize this so we can more easily work around issues with people
   * stubbing out `process.nextTick()` in tests using sinon:
   * https://github.com/sinonjs/lolex#automatically-incrementing-mocked-time
   * See gh-6074
   *)

mongoose/lib/collection.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/error/mongooseError.js:
mongoose/lib/options.js:
mongoose/lib/helpers/clone.js:
mongoose/lib/helpers/error/combinePathErrors.js:
mongoose/lib/schema/operators/exists.js:
mongoose/lib/schema/operators/type.js:
mongoose/lib/helpers/schematype/handleImmutable.js:
mongoose/lib/helpers/document/applyDefaults.js:
mongoose/lib/helpers/document/cleanModifiedSubpaths.js:
mongoose/lib/helpers/projection/isDefiningProjection.js:
mongoose/lib/helpers/projection/isExclusive.js:
mongoose/lib/helpers/projection/isPathSelectedInclusive.js:
mongoose/lib/helpers/schema/idGetter.js:
mongoose/lib/helpers/schema/handleTimestampOption.js:
mongoose/lib/helpers/update/applyTimestampsToChildren.js:
mongoose/lib/helpers/update/applyTimestampsToUpdate.js:
mongoose/lib/constants.js:
mongoose/lib/types/map.js:
mongoose/lib/options/schemaArrayOptions.js:
mongoose/lib/options/schemaNumberOptions.js:
mongoose/lib/options/schemaBufferOptions.js:
mongoose/lib/options/schemaDateOptions.js:
mongoose/lib/plugins/saveSubdocs.js:
mongoose/lib/plugins/sharding.js:
mongoose/lib/plugins/validateBeforeSave.js:
mongoose/lib/helpers/model/discriminator.js:
mongoose/lib/options/schemaDocumentArrayOptions.js:
mongoose/lib/schema/map.js:
mongoose/lib/options/schemaObjectIdOptions.js:
mongoose/lib/options/schemaStringOptions.js:
mongoose/lib/schema/union.js:
mongoose/lib/driver.js:
mongoose/lib/helpers/query/castUpdate.js:
mongoose/lib/helpers/projection/isInclusive.js:
mongoose/lib/helpers/query/hasDollarKeys.js:
mongoose/lib/helpers/query/selectPopulatedFields.js:
mongoose/lib/helpers/model/applyHooks.js:
mongoose/lib/helpers/populate/leanPopulateMap.js:
mongoose/lib/helpers/populate/getVirtual.js:
mongoose/lib/helpers/populate/getSchemaTypes.js:
mongoose/lib/helpers/populate/getModelsMapForPopulate.js:
mongoose/lib/helpers/parallelLimit.js:
mongoose/lib/helpers/populate/removeDeselectedForeignField.js:
  (*!
   * ignore
   *)

mongoose/lib/types/objectid.js:
  (*!
   * Convenience `valueOf()` to allow comparing ObjectIds using double equals re: gh-7299
   *)

mongoose/lib/drivers/node-mongodb-native/collection.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from abstract Collection.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/cursor/changeStream.js:
mongoose/lib/error/serverSelection.js:
mongoose/lib/stateMachine.js:
mongoose/lib/helpers/common.js:
mongoose/lib/utils.js:
mongoose/lib/schema/subdocument.js:
mongoose/lib/cursor/queryCursor.js:
mquery/lib/utils.js:
mongoose/lib/cursor/aggregationCursor.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)

mongoose/lib/error/cast.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * exports
   *)

mongoose/lib/error/notFound.js:
mongoose/lib/error/validator.js:
mongoose/lib/error/version.js:
mongoose/lib/error/parallelSave.js:
mongoose/lib/error/overwriteModel.js:
mongoose/lib/error/missingSchema.js:
mongoose/lib/error/bulkSaveIncompleteError.js:
mongoose/lib/error/divergentArray.js:
mongoose/lib/error/parallelValidate.js:
mongoose/lib/error/invalidSchemaOption.js:
mongoose/lib/error/bulkWriteError.js:
mongoose/lib/error/eachAsyncMultiError.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * exports
   *)

mongoose/lib/error/validation.js:
mongoose/lib/error/setOptionError.js:
  (*!
   * Module requirements
   *)
  (*!
   * Module exports
   *)

mongoose/lib/error/strict.js:
mongoose/lib/error/strictPopulate.js:
mongoose/lib/error/objectExpected.js:
mongoose/lib/error/objectParameter.js:
mongoose/lib/cast.js:
mongoose/lib/error/syncIndexes.js:
mongoose/lib/helpers/cursor/eachAsync.js:
mongoose/lib/helpers/updateValidators.js:
mongoose/lib/index.js:
  (*!
   * Module dependencies.
   *)

mongoose/lib/error/index.js:
mongoose/lib/types/index.js:
mongoose/lib/schema/index.js:
mongoose/lib/drivers/node-mongodb-native/index.js:
  (*!
   * Module exports.
   *)

mpath/lib/index.js:
  (*!
   * Split a string path into components delimited by '.' or
   * '[\d+]'
   *
   * #### Example:
   *     stringToParts('foo[0].bar.1'); // ['foo', '0', 'bar', '1']
   *)
  (*!
   * Recursively set nested arrays
   *)
  (*!
   * Returns the value passed to it.
   *)

mongoose/lib/internal.js:
  (*!
   * Dependencies
   *)

mongoose/lib/types/buffer.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from Buffer.
   *)
  (*!
   * Compile other Buffer methods marking this buffer as modified.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/mixed.js:
mongoose/lib/schema/documentArrayElement.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/helpers/document/compile.js:
  (*!
   * exports
   *)

mongoose/lib/queryHelpers.js:
  (*!
   * Module dependencies
   *)
  (*!
   * ignore
   *)

mongoose/lib/types/subdocument.js:
  (*!
   * ignore
   *)
  (*!
   * Sets this sub-documents parent document.
   *
   * @api private
   *)

mongoose/lib/types/arraySubdocument.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from Subdocument
   *)
  (*!
   * ignore
   *)
  (*!
   * Sets this sub-documents parent document.
   *
   * @api private
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/types/array/methods/index.js:
  (*!
   * ignore
   *)
  (*!
   * Minimize _just_ empty objects along the path chain specified
   * by `parts`, ignoring all other paths. Useful in cases where
   * you want to minimize after unsetting a path.
   *
   * #### Example:
   *
   *     const obj = { foo: { bar: { baz: {} } }, a: {} };
   *     _minimizePath(obj, 'foo.bar.baz');
   *     obj; // { a: {} }
   *)
  (*!
   * If `docs` isn't all instances of the right model, depopulate `arr`
   *)

mongoose/lib/types/array/index.js:
mongoose/lib/types/documentArray/index.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/document.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Document exposes the NodeJS event emitter API, so you can use
   * `on`, `once`, etc.
   *)
  (*!
   * Converts to POJO when you use the document for querying
   *)
  (*!
   * Runs queued functions
   *)
  (*!
   * Internal shallow clone alternative to `$toObject()`: much faster, no options processing
   *)
  (*!
   * Applies virtuals properties to `json`.
   *)
  (*!
   * Check if the given document only has primitive values
   *)
  (*!
   * Increment this document's version if necessary.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schemaType.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * If _duplicateKeyErrorMessage is a string, replace unique index errors "E11000 duplicate key error" with this string.
   *
   * @api private
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/virtualType.js:
  (*!
   * ignore
   *)
  (*!
   * exports
   *)

mongoose/lib/schema/operators/bitwise.js:
mongoose/lib/schema/operators/helpers.js:
mongoose/lib/schema/operators/geospatial.js:
  (*!
   * Module requirements.
   *)
  (*!
   * ignore
   *)

mongoose/lib/schema/number.js:
  (*!
   * Module requirements.
   *)
  (*!
   * ignore
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/array.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * Virtuals defined on this array itself.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/bigint.js:
mongoose/lib/schema/boolean.js:
mongoose/lib/schema/buffer.js:
mongoose/lib/schema/decimal128.js:
mongoose/lib/schema/double.js:
mongoose/lib/schema/int32.js:
mongoose/lib/schema/objectId.js:
mongoose/lib/schema/string.js:
mongoose/lib/schema/uuid.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/date.js:
  (*!
   * Module requirements.
   *)
  (*!
   * Inherits from SchemaType.
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema/documentArray.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherits from SchemaArray.
   *)
  (*!
   * ignore
   *)
  (*!
   * Handle casting $elemMatch operators
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/schema.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from EventEmitter.
   *)
  (*!
   * ignore
   *)
  (*!
   * Get the document middleware for this schema, filtering out any hooks that are specific to queries.
   *)
  (*!
   * Get this schema's default toObject/toJSON options, including Mongoose global
   * options.
   *)
  (*!
   * Recursively set options on implicitly created schemas
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/connection.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherit from EventEmitter
   *)
  (*!
   * Reset document state in between transaction retries re: gh-13698
   *)
  (*!
   * If transaction was aborted, we need to reset newly inserted documents' `isNew`.
   *)
  (*!
   * Get the default buffer timeout for this connection
   *)
  (*!
   * ignore
   *)
  (*!
   * Called internally by `openUri()` to create a MongoClient instance.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/drivers/node-mongodb-native/connection.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * Inherits from Connection.
   *)
  (*!
   * ignore
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/validOptions.js:
  (*!
   * Valid mongoose options
   *)

mquery/lib/mquery.js:
  (*!
   * gt, gte, lt, lte, ne, in, nin, all, regex, size, maxDistance
   *
   *     Thing.where('type').nin(array)
   *)
  (*!
   * @ignore
   *)
  (*!
   * limit, skip, batchSize, comment
   *
   * Sets these associated options.
   *
   *     query.comment('feed query');
   *)
  (*!
   * Internal helper for updateMany, updateOne
   *)
  (*!
   * Permissions
   *)
  (*!
   * Exports.
   *)

mongoose/lib/query.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * inherit mquery
   *)
  (*!
   * Overwrite mquery's `_distinct`, because Mongoose uses that name
   * to store the field to apply distinct on.
   *)
  (*!
   * ignore
   *)
  (*!
   * If `translateAliases` option is set, call `Model.translateAliases()`
   * on the following query properties: filter, projection, update, distinct.
   *)
  (*!
   * Convert sort values
   *)
  (*!
   * Export
   *)

mongoose/lib/aggregate.js:
  (*!
   * Module dependencies
   *)
  (*!
   * define methods
   *)
  (*!
   * Helpers
   *)
  (*!
   * Exports
   *)

mongoose/lib/model.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Give the constructor the ability to emit events.
   *)
  (*!
   * Populates `docs` for a single `populateOptions` instance.
   *)
  (*!
   * Applies query middleware from this model's schema to this model's
   * Query constructor.
   *)
  (*!
   * Module exports.
   *)

mongoose/lib/mongoose.js:
  (*!
   * Module dependencies.
   *)
  (*!
   * ignore
   *)
  (*!
   * Create a new default connection (`mongoose.connection`) for a Mongoose instance.
   * No-op if there is already a default connection.
   *)
*/
